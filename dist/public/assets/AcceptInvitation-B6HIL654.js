import{e,f as s,g as t,r as i,h as a,i as n,j as r,C as l,c as o,k as c,B as u,L as m,a as p,U as h,b as v,l as N,A as d,m as w,n as D,I as x,o as b,d as P}from"./index-CExeSDUv.js";function C(){const[,C]=e(),{toast:g}=s(),{t:f}=t(),[k,j]=i.useState(""),[E,I]=i.useState({username:"",password:"",confirmPassword:"",fullName:""}),[A,U]=i.useState([]);i.useEffect((()=>{const e=new URLSearchParams(window.location.search).get("token");e&&j(e)}),[]);const{data:O,isLoading:V,error:M}=a({queryKey:["invitation",k],queryFn:async()=>{if(!k)throw new Error("No token provided");const e=await P("GET",`/api/team/invitations/verify?token=${k}`);if(!e.ok){const s=await e.json();throw new Error(s.message||"Failed to verify invitation")}return e.json()},enabled:!!k,retry:!1}),y=n({mutationFn:async e=>{const s=await P("POST","/api/team/invitations/accept",{token:k,username:e.username,password:e.password,fullName:e.fullName});if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to accept invitation")}return s.json()},onSuccess:e=>{g({title:f("auth.welcome_team","Welcome to the team!"),description:f("auth.account_created_success","Your account has been created successfully. You are now logged in.")}),C("/")},onError:e=>{g({title:f("common.error","Error"),description:e.message,variant:"destructive"})}}),_=e=>s=>{I((t=>({...t,[e]:s.target.value}))),A.length>0&&U([])};return k?V?r.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxDEV(l,{className:"w-full max-w-md",children:r.jsxDEV(o,{className:"pt-6",children:r.jsxDEV("div",{className:"text-center",children:[r.jsxDEV(m,{className:"h-8 w-8 animate-spin mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:160,columnNumber:15},this),r.jsxDEV("p",{className:"text-gray-600",children:f("auth.verifying_invitation","Verifying invitation...")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:161,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:159,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:158,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:157,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:156,columnNumber:7},this):M||!O?r.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxDEV(l,{className:"w-full max-w-md",children:r.jsxDEV(o,{className:"pt-6",children:r.jsxDEV("div",{className:"text-center",children:[r.jsxDEV(c,{className:"h-12 w-12 text-red-500 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:175,columnNumber:15},this),r.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:f("auth.invitation_not_found_title","Invitation Not Found")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:176,columnNumber:15},this),r.jsxDEV("p",{className:"text-gray-600 mb-4",children:(null==M?void 0:M.message)||f("auth.invitation_not_found_desc","This invitation link is invalid, expired, or has already been used.")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:177,columnNumber:15},this),r.jsxDEV(u,{onClick:()=>C("/auth"),variant:"outline",children:f("auth.go_to_login","Go to Login")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:180,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:174,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:173,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:172,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:171,columnNumber:7},this):r.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxDEV(l,{className:"w-full max-w-md",children:[r.jsxDEV(p,{className:"text-center",children:[r.jsxDEV("div",{className:"mx-auto mb-4",children:r.jsxDEV(h,{className:"h-12 w-12 text-blue-600"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:195,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:194,columnNumber:11},this),r.jsxDEV(v,{className:"text-2xl",children:f("auth.accept_invitation_title","Accept Team Invitation")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:197,columnNumber:11},this),r.jsxDEV(N,{children:[f("auth.invited_as_role","You've been invited to join as a {{role}}",{role:O.role}),r.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:200,columnNumber:13},this),r.jsxDEV("span",{className:"text-sm text-gray-500",children:O.email},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:201,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:198,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:193,columnNumber:9},this),r.jsxDEV(o,{children:[r.jsxDEV("form",{onSubmit:e=>{e.preventDefault();const s=[];(!E.username||E.username.length<3)&&s.push(f("auth.validation.username_min_length","Username must be at least 3 characters long")),(!E.password||E.password.length<6)&&s.push(f("auth.validation.password_min_length","Password must be at least 6 characters long")),E.password!==E.confirmPassword&&s.push(f("auth.validation.passwords_no_match","Passwords do not match")),E.fullName&&0!==E.fullName.trim().length||s.push(f("auth.validation.full_name_required","Full name is required")),U(s),0===s.length&&y.mutate(E)},className:"space-y-4",children:[A.length>0&&r.jsxDEV(d,{variant:"destructive",children:r.jsxDEV(w,{children:r.jsxDEV("ul",{className:"list-disc list-inside space-y-1",children:A.map(((e,s)=>r.jsxDEV("li",{children:e},s,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:213,columnNumber:23},this)))},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:211,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:210,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:209,columnNumber:15},this),r.jsxDEV("div",{className:"space-y-2",children:[r.jsxDEV(D,{htmlFor:"fullName",children:f("auth.full_name","Full Name")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:221,columnNumber:15},this),r.jsxDEV(x,{id:"fullName",type:"text",placeholder:f("auth.enter_full_name","Enter your full name"),value:E.fullName,onChange:_("fullName"),required:!0},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:222,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:220,columnNumber:13},this),r.jsxDEV("div",{className:"space-y-2",children:[r.jsxDEV(D,{htmlFor:"username",children:f("auth.username","Username")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:233,columnNumber:15},this),r.jsxDEV(x,{id:"username",type:"text",placeholder:f("auth.choose_username","Choose a username"),value:E.username,onChange:_("username"),required:!0,minLength:3},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:234,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:232,columnNumber:13},this),r.jsxDEV("div",{className:"space-y-2",children:[r.jsxDEV(D,{htmlFor:"password",children:f("auth.password","Password")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:246,columnNumber:15},this),r.jsxDEV(x,{id:"password",type:"password",placeholder:f("auth.create_password","Create a password"),value:E.password,onChange:_("password"),required:!0,minLength:6},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:247,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:245,columnNumber:13},this),r.jsxDEV("div",{className:"space-y-2",children:[r.jsxDEV(D,{htmlFor:"confirmPassword",children:f("auth.confirm_password","Confirm Password")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:259,columnNumber:15},this),r.jsxDEV(x,{id:"confirmPassword",type:"password",placeholder:f("auth.confirm_password_placeholder","Confirm your password"),value:E.confirmPassword,onChange:_("confirmPassword"),required:!0},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:260,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:258,columnNumber:13},this),r.jsxDEV(u,{type:"submit",className:"w-full",disabled:y.isPending,children:y.isPending?r.jsxDEV(r.Fragment,{children:[r.jsxDEV(m,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:277,columnNumber:19},this),f("auth.creating_account","Creating Account...")]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:276,columnNumber:17},this):r.jsxDEV(r.Fragment,{children:[r.jsxDEV(b,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:282,columnNumber:19},this),f("auth.accept_invitation_button","Accept Invitation & Create Account")]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:281,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:270,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:206,columnNumber:11},this),r.jsxDEV("div",{className:"mt-6 text-center",children:r.jsxDEV("p",{className:"text-xs text-gray-500",children:f("auth.invitation_agreement","By accepting this invitation, you agree to join the team and follow the company's policies.")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:290,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:289,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:205,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:192,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:191,columnNumber:5},this):r.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxDEV(l,{className:"w-full max-w-md",children:r.jsxDEV(o,{className:"pt-6",children:r.jsxDEV("div",{className:"text-center",children:[r.jsxDEV(c,{className:"h-12 w-12 text-red-500 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:139,columnNumber:15},this),r.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:f("auth.invalid_invitation_title","Invalid Invitation Link")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:140,columnNumber:15},this),r.jsxDEV("p",{className:"text-gray-600 mb-4",children:f("auth.invalid_invitation_desc","The invitation link is missing or invalid. Please check your email and try again.")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:141,columnNumber:15},this),r.jsxDEV(u,{onClick:()=>C("/auth"),variant:"outline",children:f("auth.go_to_login","Go to Login")},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:144,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:138,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:137,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:136,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/AcceptInvitation.tsx",lineNumber:135,columnNumber:7},this)}export{C as default};
