import{u as e,r as s,j as i,R as l,B as r,C as n,a,b as t,c as o,d as u}from"./index-CExeSDUv.js";function p(){var p;const{user:c,isLoading:m}=e(),[d,h]=s.useState(null),[b,N]=s.useState(!1),[g,D]=s.useState(null);if(m)return i.jsxDEV("div",{children:"Loading..."},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:15,columnNumber:12},this);if(!c)return i.jsxDEV(l,{to:"/login"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:19,columnNumber:12},this);const v=async()=>{N(!0),D(null);try{const e=await u("GET","/api/debug/pipeline-stages"),s=await e.json();h(s)}catch(e){D(e.message)}finally{N(!1)}};return i.jsxDEV("div",{className:"container mx-auto p-6",children:[i.jsxDEV("h1",{className:"text-2xl font-bold mb-6",children:"Pipeline Debug Page"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:104,columnNumber:7},this),i.jsxDEV("div",{className:"grid gap-4 mb-6",children:[i.jsxDEV(r,{onClick:v,disabled:b,children:b?"Loading...":"Fetch Debug Data"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:107,columnNumber:9},this),null===(null==(p=null==d?void 0:d.user)?void 0:p.companyId)&&i.jsxDEV(r,{onClick:async()=>{var e,s;N(!0),D(null);try{const i=null==(s=null==(e=null==d?void 0:d.allCompanies)?void 0:e[0])?void 0:s.id;if(!i)return void D("No companies available to associate with");const l=await u("POST","/api/debug/fix-user-company",{companyId:i}),r=await l.json();console.log("User company fixed:",r),await v()}catch(i){D(i.message)}finally{N(!1)}},disabled:b,variant:"destructive",children:"Fix User Company Association"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:112,columnNumber:11},this),i.jsxDEV(r,{onClick:async()=>{var e,s,i;N(!0),D(null);try{const l=(null==(e=null==d?void 0:d.user)?void 0:e.companyId)||(null==(i=null==(s=null==d?void 0:d.allCompanies)?void 0:s[0])?void 0:i.id),r=await u("POST","/api/debug/create-default-stages",{companyId:l}),n=await r.json();console.log("Default stages created:",n),await v()}catch(l){D(l.message)}finally{N(!1)}},disabled:b,variant:"outline",children:"Create Default Stages"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:117,columnNumber:9},this),i.jsxDEV(r,{onClick:async()=>{N(!0),D(null);try{const e=await u("POST","/api/pipeline/stages",{name:"Test Stage",color:"#FF5733",order:1}),s=await e.json();console.log("Test stage created:",s),await v()}catch(e){D(e.message)}finally{N(!1)}},disabled:b,variant:"secondary",children:"Test Stage Creation"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:121,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:106,columnNumber:7},this),g&&i.jsxDEV(n,{className:"mb-6 border-red-200",children:[i.jsxDEV(a,{children:i.jsxDEV(t,{className:"text-red-600",children:"Error"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:129,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:128,columnNumber:11},this),i.jsxDEV(o,{children:i.jsxDEV("p",{className:"text-red-600",children:g},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:132,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:131,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:127,columnNumber:9},this),d&&i.jsxDEV(n,{children:[i.jsxDEV(a,{children:i.jsxDEV(t,{children:"Debug Information"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:140,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:139,columnNumber:11},this),i.jsxDEV(o,{children:i.jsxDEV("div",{className:"space-y-4",children:[i.jsxDEV("div",{children:[i.jsxDEV("h3",{className:"font-semibold",children:"Current User (Session):"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:145,columnNumber:17},this),i.jsxDEV("pre",{className:"bg-gray-100 p-2 rounded text-sm",children:JSON.stringify(d.user,null,2)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:146,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:144,columnNumber:15},this),i.jsxDEV("div",{children:[i.jsxDEV("h3",{className:"font-semibold",children:"Database User:"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:152,columnNumber:17},this),i.jsxDEV("pre",{className:"bg-gray-100 p-2 rounded text-sm",children:JSON.stringify(d.dbUser,null,2)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:153,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:151,columnNumber:15},this),i.jsxDEV("div",{children:[i.jsxDEV("h3",{className:"font-semibold",children:"User's Company:"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:159,columnNumber:17},this),i.jsxDEV("pre",{className:"bg-gray-100 p-2 rounded text-sm",children:JSON.stringify(d.company,null,2)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:160,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:158,columnNumber:15},this),i.jsxDEV("div",{children:[i.jsxDEV("h3",{className:"font-semibold",children:"All Companies:"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:166,columnNumber:17},this),i.jsxDEV("pre",{className:"bg-gray-100 p-2 rounded text-sm",children:JSON.stringify(d.allCompanies,null,2)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:167,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:165,columnNumber:15},this),i.jsxDEV("div",{children:[i.jsxDEV("h3",{className:"font-semibold",children:"Statistics:"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:173,columnNumber:17},this),i.jsxDEV("p",{children:["All stages in DB: ",d.allStages]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:174,columnNumber:17},this),i.jsxDEV("p",{children:["Company stages: ",d.companyStages]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:175,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:172,columnNumber:15},this),i.jsxDEV("div",{children:[i.jsxDEV("h3",{className:"font-semibold",children:"Company Pipeline Stages:"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:179,columnNumber:17},this),i.jsxDEV("pre",{className:"bg-gray-100 p-2 rounded text-sm",children:JSON.stringify(d.stages,null,2)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:180,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:178,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:143,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:142,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:138,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/debug-pipeline.tsx",lineNumber:103,columnNumber:5},this)}export{p as default};
