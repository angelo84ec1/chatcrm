import{r as e,e as s,f as a,j as i,C as t,a as n,M as r,b as l,g as c,c as d,A as m,a4 as o,h as x,B as h,L as u,i as j,k as p,l as g,I as y,d as f}from"./index-C_9oFDzq.js";function w(){const[w,N]=e.useState(""),[v,b]=e.useState(!1),{toast:k}=s(),P=a({mutationFn:async e=>{const s=await f("POST","/api/admin/auth/forgot-password",{email:e});if(!s.ok){const e=await s.json().catch((()=>({})));throw new Error(e.message||"Failed to send reset email")}return await s.json()},onSuccess:e=>{b(!0),k({title:"Reset email sent",description:e.message})},onError:e=>{k({title:"Error",description:e.message,variant:"destructive"})}});return v?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"max-w-md w-full space-y-8",children:i.jsxs(t,{children:[i.jsxs(n,{className:"text-center",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:i.jsx(r,{className:"h-6 w-6 text-green-600"})}),i.jsx(l,{className:"mt-4",children:"Check your email"}),i.jsxs(c,{children:["We've sent an admin password reset link to ",i.jsx("strong",{children:w})]})]}),i.jsxs(d,{className:"space-y-4",children:[i.jsxs(m,{children:[i.jsx(o,{className:"h-4 w-4"}),i.jsx(x,{children:"This is an admin password reset request. If you don't see the email in your inbox, please check your spam folder. The reset link will expire in 1 hour for security reasons."})]}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Didn't receive the email?"}),i.jsxs(h,{variant:"outline",onClick:()=>{b(!1),P.mutate(w)},disabled:P.isPending,children:[P.isPending&&i.jsx(u,{className:"mr-2 h-4 w-4 animate-spin"}),"Resend email"]})]}),i.jsx("div",{className:"text-center",children:i.jsxs(j,{to:"/admin/login",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-500",children:[i.jsx(p,{className:"mr-1 h-4 w-4"}),"Back to admin login"]})})]})]})})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"max-w-md w-full space-y-8",children:i.jsxs(t,{children:[i.jsxs(n,{className:"text-center",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100",children:i.jsx(o,{className:"h-6 w-6 text-blue-600"})}),i.jsx(l,{className:"mt-4",children:"Admin Password Reset"}),i.jsx(c,{children:"Enter your admin email address and we'll send you a secure link to reset your password."})]}),i.jsxs(d,{children:[i.jsxs("form",{onSubmit:e=>{e.preventDefault(),w.trim()?P.mutate(w.trim()):k({title:"Error",description:"Please enter your email address",variant:"destructive"})},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(g,{htmlFor:"email",children:"Admin Email Address"}),i.jsx(y,{id:"email",type:"email",placeholder:"Enter your admin email address",value:w,onChange:e=>N(e.target.value),required:!0,disabled:P.isPending})]}),i.jsxs(m,{children:[i.jsx(o,{className:"h-4 w-4"}),i.jsx(x,{children:"This form is for admin accounts only. Regular user password resets should use the main login page."})]}),i.jsxs(h,{type:"submit",className:"w-full btn-brand-primary",variant:"brand",disabled:P.isPending,children:[P.isPending&&i.jsx(u,{className:"mr-2 h-4 w-4 animate-spin"}),"Send admin reset link"]})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(j,{to:"/admin/login",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-500",children:[i.jsx(p,{className:"mr-1 h-4 w-4"}),"Back to admin login"]})})]})]})})})}export{w as default};
