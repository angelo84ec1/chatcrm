import{u as e,e as a,f as s,bi as i,r as n,h as t,i as l,j as r,K as d,L as c,D as o,aJ as m,B as h,P as u,t as g,v as x,w as p,x as j,n as v,I as N,aq as f,ar as y,as as w,at as b,au as F,aw as k,E as C,bv as S,bC as E,bj as I,aF as T,aG as A,aH as D,aI as L,C as P,a as q,b as K,l as O,c as $,O as Q,Q as U,V as z,W as R,X as V,Y as G,aM as M,bO as J,ax as W,d as B}from"./index-Du4k3PvU.js";function H(){const{user:H,isLoading:X}=e(),[Y,_]=a(),{toast:Z}=s(),ee=i(),[ae,se]=n.useState("languages"),[ie,ne]=n.useState(null),[te,le]=n.useState(null),[re,de]=n.useState({code:"",name:"",nativeName:"",flagIcon:"",isActive:!0,isDefault:!1,direction:"ltr"}),[ce,oe]=n.useState(null),[me,he]=n.useState(!1),[ue,ge]=n.useState({name:"",description:""}),[xe,pe]=n.useState(null),[je,ve]=n.useState(!1),[Ne,fe]=n.useState({key:"",description:""}),[ye,we]=n.useState(!1),[be,Fe]=n.useState({}),[ke,Ce]=n.useState({}),[Se,Ee]=n.useState({languageId:"",file:null}),[Ie,Te]=n.useState(!1);n.useEffect((()=>{X||!H||H.isSuperAdmin||_("/")}),[H,X,_]);const Ae=["languages"],{data:De,isLoading:Le}=t({queryKey:Ae,queryFn:async()=>{const e=await B("GET","/api/languages");if(!e.ok)throw new Error("Failed to fetch languages");return e.json()},enabled:!!(null==H?void 0:H.isSuperAdmin)}),Pe=["namespaces"],{data:qe,isLoading:Ke}=t({queryKey:Pe,queryFn:async()=>{const e=await B("GET","/api/namespaces");if(!e.ok)throw new Error("Failed to fetch namespaces");return e.json()},enabled:!!(null==H?void 0:H.isSuperAdmin)}),Oe=["keys",te],{data:$e,isLoading:Qe}=t({queryKey:Oe,queryFn:async()=>{if(!te)throw new Error("Namespace not selected");const e=await B("GET",`/api/keys?namespaceId=${te}`);if(!e.ok)throw new Error("Failed to fetch keys");return e.json()},enabled:!!te&&!!(null==H?void 0:H.isSuperAdmin)}),Ue=["translations",ie,te],{data:ze,isLoading:Re}=t({queryKey:Ue,queryFn:async()=>{if(!ie||!te)throw new Error("Language or Namespace not selected");const e=await B("GET",`/api/translations?languageId=${ie}&namespaceId=${te}`);if(!e.ok)throw new Error("Failed to fetch translations");return e.json()},enabled:!!ie&&!!te&&!!(null==H?void 0:H.isSuperAdmin)}),Ve=async(e,a)=>{try{const s=await e.json();return new Error(s.error||s.message||a)}catch(s){return new Error(a)}},Ge=l({mutationFn:async e=>{const a=await B("POST","/api/admin/languages",e);if(!a.ok)throw await Ve(a,"Failed to create language");return a.json()},onSuccess:()=>{Z({title:"Language created",description:"The language has been created successfully."}),de({code:"",name:"",nativeName:"",flagIcon:"",isActive:!0,isDefault:!1,direction:"ltr"}),ee.invalidateQueries({queryKey:Ae})},onError:e=>{Z({title:"Error creating language",description:e.message,variant:"destructive"})}}),Me=l({mutationFn:async({id:e,data:a})=>{const s=await B("PUT",`/api/admin/languages/${e}`,a);if(!s.ok)throw await Ve(s,"Failed to update language");return s.json()},onSuccess:()=>{Z({title:"Language updated",description:"The language has been updated successfully."}),he(!1),oe(null),ee.invalidateQueries({queryKey:Ae})},onError:e=>{Z({title:"Error updating language",description:e.message,variant:"destructive"})}}),Je=l({mutationFn:async e=>{const a=await B("DELETE",`/api/admin/languages/${e}`);if(!a.ok)throw await Ve(a,"Failed to delete language");return a.json()},onSuccess:()=>{Z({title:"Language deleted",description:"The language has been deleted successfully."}),ee.invalidateQueries({queryKey:Ae})},onError:e=>{Z({title:"Error deleting language",description:e.message,variant:"destructive"})}}),We=l({mutationFn:async e=>{const a=await B("POST",`/api/admin/languages/${e}/default`);if(!a.ok)throw await Ve(a,"Failed to set default language");return a.json()},onSuccess:()=>{Z({title:"Default language updated",description:"The default language has been updated successfully."}),ee.invalidateQueries({queryKey:Ae})},onError:e=>{Z({title:"Error setting default language",description:e.message,variant:"destructive"})}}),Be=l({mutationFn:async e=>{const a=await B("POST","/api/admin/namespaces",e);if(!a.ok)throw await Ve(a,"Failed to create namespace");return a.json()},onSuccess:()=>{Z({title:"Namespace created",description:"The namespace has been created successfully."}),ge({name:"",description:""}),ee.invalidateQueries({queryKey:Pe})},onError:e=>{Z({title:"Error creating namespace",description:e.message,variant:"destructive"})}}),He=l({mutationFn:async({id:e,data:a})=>{const s=await B("PUT",`/api/admin/namespaces/${e}`,a);if(!s.ok)throw await Ve(s,"Failed to update namespace");return s.json()},onSuccess:()=>{Z({title:"Namespace updated",description:"The namespace has been updated successfully."}),ve(!1),pe(null),ee.invalidateQueries({queryKey:Pe})},onError:e=>{Z({title:"Error updating namespace",description:e.message,variant:"destructive"})}}),Xe=l({mutationFn:async e=>{const a=await B("DELETE",`/api/admin/namespaces/${e}`);if(!a.ok)throw await Ve(a,"Failed to delete namespace");return a.json()},onSuccess:()=>{Z({title:"Namespace deleted",description:"The namespace has been deleted successfully."}),ee.invalidateQueries({queryKey:Pe})},onError:e=>{Z({title:"Error deleting namespace",description:e.message,variant:"destructive"})}}),Ye=l({mutationFn:async e=>{const a=await B("POST","/api/admin/keys",e);if(!a.ok)throw await Ve(a,"Failed to create translation key");return a.json()},onSuccess:()=>{Z({title:"Translation key created",description:"The translation key has been created successfully."}),fe({key:"",description:""}),we(!1),ee.invalidateQueries({queryKey:Oe})},onError:e=>{Z({title:"Error creating key",description:e.message,variant:"destructive"})}}),_e=l({mutationFn:async e=>{const a=await B("DELETE",`/api/admin/keys/${e}`);if(!a.ok)throw await Ve(a,"Failed to delete translation key");return a.json()},onSuccess:()=>{Z({title:"Translation key deleted",description:"The translation key has been deleted successfully."}),ee.invalidateQueries({queryKey:Oe})},onError:e=>{Z({title:"Error deleting key",description:e.message,variant:"destructive"})}}),Ze=l({mutationFn:async({keyId:e,languageId:a,value:s})=>{const i=null==ze?void 0:ze.find((s=>s.keyId===e&&s.languageId===a));let n;if(i){if(n=await B("PUT",`/api/admin/translations/${i.id}`,{value:s}),!n.ok)throw await Ve(n,"Failed to update translation")}else if(n=await B("POST","/api/admin/translations",{keyId:e,languageId:a,value:s}),!n.ok)throw await Ve(n,"Failed to create translation");return n.json()},onSuccess:(e,a)=>{Z({title:"Translation saved",description:"The translation has been saved successfully."}),Ce((e=>({...e,[a.keyId]:!1}))),ee.invalidateQueries({queryKey:Ue})},onError:e=>{Z({title:"Error saving translation",description:e.message,variant:"destructive"})}}),ea=l({mutationFn:async({languageId:e,file:a})=>{const s=new FormData;s.append("file",a);const i=await fetch(`/api/admin/translations/import/${e}`,{method:"POST",body:s,credentials:"include"});if(!i.ok)throw await Ve(i,"Failed to import translations");return i.json()},onSuccess:()=>{Z({title:"Translations imported",description:"The translations have been imported successfully."}),Ee({languageId:"",file:null}),Te(!1),ee.invalidateQueries({queryKey:Ue}),ee.invalidateQueries({queryKey:Oe})},onError:e=>{Z({title:"Error importing translations",description:e.message,variant:"destructive"})}}),aa=e=>{const{id:a,value:s}=e.target;de((e=>({...e,[a]:s})))},sa=(e,a)=>{de((s=>({...s,[e]:a})))},ia=e=>{if(!ce)return;const{id:a,value:s}=e.target,i=a.replace(/^edit-/,"");oe((e=>e?{...e,[i]:s}:null))},na=e=>{const{id:a,value:s}=e.target;ge((e=>({...e,[a]:s})))},ta=e=>{if(!xe)return;const{id:a,value:s}=e.target,i=a.replace(/^edit-namespace-/,"");pe((e=>e?{...e,[i]:s}:null))},la=e=>{const{id:a,value:s}=e.target;fe((e=>({...e,[a]:s})))};return X||H&&!H.isSuperAdmin?r.jsx(d,{children:r.jsxs("div",{className:"flex items-center justify-center h-full",children:[" ",r.jsx(c,{className:"h-8 w-8 animate-spin"})]})}):r.jsx(d,{children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4",children:[r.jsx("h1",{className:"text-2xl",children:"Languages & Translations"}),r.jsxs("div",{className:"flex gap-2",children:["languages"===ae&&r.jsxs(o,{onOpenChange:e=>{e&&de({code:"",name:"",nativeName:"",flagIcon:"",isActive:!0,isDefault:!1,direction:"ltr"})},children:[r.jsx(m,{asChild:!0,children:r.jsxs(h,{className:"btn-brand-primary",children:[r.jsx(u,{className:"mr-2 h-4 w-4"})," Add Language"]})}),r.jsxs(g,{className:"sm:max-w-[425px]",children:[r.jsxs(x,{children:[r.jsx(p,{children:"Add New Language"}),r.jsx(j,{children:"Add a new language to your application."})]}),r.jsxs("form",{onSubmit:e=>{e.preventDefault(),Ge.mutate(re)},children:[r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"code",className:"text-right",children:"Code"}),r.jsx(N,{id:"code",value:re.code,onChange:aa,className:"col-span-3",placeholder:"en",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"name",className:"text-right",children:"Name"}),r.jsx(N,{id:"name",value:re.name,onChange:aa,className:"col-span-3",placeholder:"English",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"nativeName",className:"text-right",children:"Native Name"}),r.jsx(N,{id:"nativeName",value:re.nativeName,onChange:aa,className:"col-span-3",placeholder:"English",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"flagIcon",className:"text-right",children:"Flag Icon"}),r.jsx(N,{id:"flagIcon",value:re.flagIcon,onChange:aa,className:"col-span-3",placeholder:"ðŸ‡ºðŸ‡¸"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"direction",className:"text-right",children:"Direction"}),r.jsxs(f,{value:re.direction,onValueChange:e=>de((a=>({...a,direction:e}))),children:[r.jsx(y,{className:"col-span-3",id:"direction",children:r.jsx(w,{placeholder:"Select direction"})}),r.jsxs(b,{children:[r.jsx(F,{value:"ltr",children:"Left to Right (LTR)"}),r.jsx(F,{value:"rtl",children:"Right to Left (RTL)"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"isActive",className:"text-right",children:"Active"}),r.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[r.jsx(k,{id:"isActive",checked:re.isActive,onCheckedChange:e=>sa("isActive",e)}),r.jsx(v,{htmlFor:"isActive",children:"Enable this language"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"isDefault",className:"text-right",children:"Default"}),r.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[r.jsx(k,{id:"isDefault",checked:re.isDefault,onCheckedChange:e=>sa("isDefault",e)}),r.jsx(v,{htmlFor:"isDefault",children:"Set as default language"})]})]})]}),r.jsx(C,{children:r.jsx(h,{type:"submit",variant:"outline",className:"btn-brand-primary",disabled:Ge.isPending,children:Ge.isPending?r.jsxs(r.Fragment,{children:[r.jsx(c,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Language"})})]})]})]}),"namespaces"===ae&&r.jsxs(o,{onOpenChange:e=>{e&&ge({name:"",description:""})},children:[r.jsx(m,{asChild:!0,children:r.jsxs(h,{className:"btn-brand-primary",children:[r.jsx(u,{className:"mr-2 h-4 w-4"})," Add Namespace"]})}),r.jsxs(g,{className:"sm:max-w-[425px]",children:[r.jsxs(x,{children:[r.jsx(p,{children:"Add New Namespace"}),r.jsx(j,{children:"Add a new namespace to organize your translations."})]}),r.jsxs("form",{onSubmit:e=>{e.preventDefault(),Be.mutate(ue)},children:[r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"name",className:"text-right",children:"Name"}),r.jsx(N,{id:"name",value:ue.name,onChange:na,className:"col-span-3",placeholder:"common",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"description",className:"text-right",children:"Description"}),r.jsx(S,{id:"description",value:ue.description,onChange:na,className:"col-span-3",placeholder:"Common translations used throughout the application"})]})]}),r.jsx(C,{children:r.jsx(h,{type:"submit",variant:"outline",className:"btn-brand-primary",disabled:Be.isPending,children:Be.isPending?r.jsxs(r.Fragment,{children:[r.jsx(c,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Namespace"})})]})]})]}),"translations"===ae&&r.jsxs(r.Fragment,{children:[r.jsxs(o,{open:Ie,onOpenChange:e=>{Te(e),e&&Ee({languageId:"",file:null})},children:[r.jsx(m,{asChild:!0,children:r.jsxs(h,{variant:"brand",className:"border-primary/30 hover:border-primary",children:[r.jsx(E,{className:"mr-2 h-4 w-4"}),"Import Translations"]})}),r.jsxs(g,{className:"sm:max-w-[425px]",children:[r.jsxs(x,{children:[r.jsx(p,{children:"Import Translations"}),r.jsx(j,{children:"Import translations from a JSON file."})]}),r.jsxs("form",{onSubmit:e=>{e.preventDefault(),Se.file&&Se.languageId&&ea.mutate({languageId:Se.languageId,file:Se.file})},children:[r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"import-language",className:"text-right",children:"Language"}),r.jsxs(f,{value:Se.languageId,onValueChange:e=>Ee((a=>({...a,languageId:e}))),children:[r.jsx(y,{className:"col-span-3",id:"import-language",children:r.jsx(w,{placeholder:"Select language"})}),r.jsx(b,{children:null==De?void 0:De.map((e=>r.jsxs(F,{value:e.id.toString(),children:[e.flagIcon&&r.jsx("span",{className:"mr-2",children:e.flagIcon}),e.name]},e.id)))})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"import-file",className:"text-right",children:"File"}),r.jsx(N,{id:"import-file",type:"file",accept:".json",onChange:e=>Ee((a=>{var s;return{...a,file:(null==(s=e.target.files)?void 0:s[0])||null}})),className:"col-span-3",required:!0})]})]}),r.jsx(C,{children:r.jsx(h,{type:"submit",disabled:ea.isPending||!Se.file||!Se.languageId,variant:"brand",className:"btn-brand-primary",children:ea.isPending?r.jsxs(r.Fragment,{children:[r.jsx(c,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):"Import Translations"})})]})]})]}),ie&&r.jsxs(h,{variant:"brand",onClick:()=>{var e;const a=null==(e=null==De?void 0:De.find((e=>e.id===ie)))?void 0:e.code;a&&window.open(`/api/admin/translations/export/${a}`,"_blank")},className:"btn-brand-primary",children:[r.jsx(I,{className:"mr-2 h-4 w-4"})," Export Translations"]})]})]})]}),r.jsxs(T,{value:ae,onValueChange:se,children:[r.jsxs(A,{className:"mb-6",children:[r.jsx(D,{value:"languages",children:"Languages"}),r.jsx(D,{value:"namespaces",children:"Namespaces"}),r.jsx(D,{value:"translations",children:"Translations"})]}),r.jsx(L,{value:"languages",children:r.jsxs(P,{children:[r.jsxs(q,{children:[r.jsx(K,{children:"Available Languages"}),r.jsx(O,{children:"Manage the languages available in your application."})]}),r.jsx($,{children:Le?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(c,{className:"h-8 w-8 animate-spin"})}):r.jsxs(Q,{children:[r.jsx(U,{children:r.jsxs(z,{children:[r.jsx(R,{children:"Language"}),r.jsx(R,{children:"Code"}),r.jsx(R,{children:"Direction"}),r.jsx(R,{children:"Active"}),r.jsx(R,{children:"Default"}),r.jsx(R,{className:"text-right",children:"Actions"})]})}),r.jsx(V,{children:null==De?void 0:De.map((e=>r.jsxs(z,{children:[r.jsx(G,{className:"font-medium",children:r.jsxs("div",{className:"flex items-center",children:[e.flagIcon&&r.jsx("span",{className:"mr-2",children:e.flagIcon}),r.jsxs("span",{children:[e.name," (",e.nativeName,")"]})]})}),r.jsx(G,{children:e.code}),r.jsx(G,{children:e.direction.toUpperCase()}),r.jsx(G,{children:r.jsx(k,{checked:e.isActive,onCheckedChange:a=>Me.mutate({id:e.id,data:{isActive:a}}),disabled:e.isDefault})}),r.jsx(G,{children:r.jsx(k,{checked:e.isDefault,onCheckedChange:a=>{a&&We.mutate(e.id)},disabled:e.isDefault})}),r.jsx(G,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsxs(o,{open:me&&(null==ce?void 0:ce.id)===e.id,onOpenChange:a=>{he(a),oe(a?e:null)},children:[r.jsx(m,{asChild:!0,children:r.jsx(h,{variant:"brand",size:"icon",children:r.jsx(M,{className:"h-4 w-4"})})}),r.jsxs(g,{className:"sm:max-w-[425px]",children:[r.jsxs(x,{children:[r.jsx(p,{children:"Edit Language"}),r.jsx(j,{children:"Update the language settings."})]}),ce&&r.jsxs("form",{onSubmit:e=>{e.preventDefault();const a={code:ce.code,name:ce.name,nativeName:ce.nativeName,flagIcon:ce.flagIcon||"",direction:ce.direction,isActive:ce.isActive};Me.mutate({id:ce.id,data:a})},children:[r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"edit-code",className:"text-right",children:"Code"}),r.jsx(N,{id:"edit-code",value:ce.code,onChange:ia,className:"col-span-3",placeholder:"en",required:!0,disabled:ce.isDefault})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"edit-name",className:"text-right",children:"Name"}),r.jsx(N,{id:"edit-name",value:ce.name,onChange:ia,className:"col-span-3",placeholder:"English",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"edit-nativeName",className:"text-right",children:"Native Name"}),r.jsx(N,{id:"edit-nativeName",value:ce.nativeName,onChange:ia,className:"col-span-3",placeholder:"English",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"edit-flagIcon",className:"text-right",children:"Flag Icon"}),r.jsx(N,{id:"edit-flagIcon",value:ce.flagIcon||"",onChange:ia,className:"col-span-3",placeholder:"ðŸ‡ºðŸ‡¸"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"edit-direction",className:"text-right",children:"Direction"}),r.jsxs(f,{value:ce.direction,onValueChange:e=>oe((a=>a?{...a,direction:e}:null)),children:[r.jsx(y,{className:"col-span-3",id:"edit-direction",children:r.jsx(w,{placeholder:"Select direction"})}),r.jsxs(b,{children:[r.jsx(F,{value:"ltr",children:"Left to Right (LTR)"}),r.jsx(F,{value:"rtl",children:"Right to Left (RTL)"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"edit-isActive",className:"text-right",children:"Active"}),r.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[r.jsx(k,{id:"edit-isActive",checked:ce.isActive,onCheckedChange:e=>((e,a)=>{ce&&oe((s=>s?{...s,[e]:a}:null))})("isActive",e),disabled:ce.isDefault}),r.jsx(v,{htmlFor:"edit-isActive",children:"Enable this language"})]})]})]}),r.jsx(C,{children:r.jsx(h,{type:"submit",variant:"outline",className:"btn-brand-primary",disabled:Me.isPending,children:Me.isPending?r.jsxs(r.Fragment,{children:[r.jsx(c,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Language"})})]})]})]}),r.jsx(h,{variant:"destructive",size:"icon",onClick:()=>{e.isDefault?Z({title:"Cannot delete default language",description:"Please set another language as default first.",variant:"destructive"}):window.confirm(`Are you sure you want to delete ${e.name}?`)&&Je.mutate(e.id)},disabled:e.isDefault||Je.isPending,children:Je.isPending?r.jsx(c,{className:"h-4 w-4 animate-spin"}):r.jsx(J,{className:"h-4 w-4"})})]})})]},e.id)))})]})})]})}),r.jsx(L,{value:"namespaces",children:r.jsxs(P,{children:[r.jsxs(q,{children:[r.jsx(K,{children:"Translation Namespaces"}),r.jsx(O,{children:"Namespaces help organize translations."})]}),r.jsx($,{children:Ke?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(c,{className:"h-8 w-8 animate-spin"})}):r.jsxs(Q,{children:[r.jsx(U,{children:r.jsxs(z,{children:[r.jsx(R,{children:"Name"}),r.jsx(R,{children:"Description"}),r.jsx(R,{className:"text-right",children:"Actions"})]})}),r.jsx(V,{children:null==qe?void 0:qe.map((e=>r.jsxs(z,{children:[r.jsx(G,{className:"font-medium",children:e.name}),r.jsx(G,{children:e.description||"-"}),r.jsx(G,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsxs(o,{open:je&&(null==xe?void 0:xe.id)===e.id,onOpenChange:a=>{ve(a),pe(a?e:null)},children:[r.jsx(m,{asChild:!0,children:r.jsx(h,{variant:"brand",size:"icon",children:r.jsx(M,{className:"h-4 w-4"})})}),r.jsxs(g,{className:"sm:max-w-[425px]",children:[r.jsxs(x,{children:[r.jsx(p,{children:"Edit Namespace"}),r.jsx(j,{children:"Update the namespace settings."})]}),xe&&r.jsxs("form",{onSubmit:e=>{e.preventDefault();const a={name:xe.name,description:xe.description||""};He.mutate({id:xe.id,data:a})},children:[r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"edit-namespace-name",className:"text-right",children:"Name"}),r.jsx(N,{id:"edit-namespace-name",value:xe.name,onChange:ta,className:"col-span-3",placeholder:"common",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"edit-namespace-description",className:"text-right",children:"Description"}),r.jsx(S,{id:"edit-namespace-description",value:xe.description||"",onChange:ta,className:"col-span-3",placeholder:"Common translations"})]})]}),r.jsx(C,{children:r.jsx(h,{type:"submit",variant:"outline",className:"btn-brand-primary",disabled:He.isPending,children:He.isPending?r.jsxs(r.Fragment,{children:[r.jsx(c,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Namespace"})})]})]})]}),r.jsx(h,{variant:"destructive",size:"icon",onClick:()=>{window.confirm(`Are you sure you want to delete the "${e.name}" namespace? This will delete all keys and translations in this namespace.`)&&Xe.mutate(e.id)},disabled:Xe.isPending,children:Xe.isPending?r.jsx(c,{className:"h-4 w-4 animate-spin"}):r.jsx(J,{className:"h-4 w-4"})})]})})]},e.id)))})]})})]})}),r.jsx(L,{value:"translations",children:r.jsxs(P,{children:[r.jsxs(q,{children:[r.jsx(K,{children:"Manage Translations"}),r.jsx(O,{children:"Select a language and namespace to manage translations."})]}),r.jsxs($,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx(v,{htmlFor:"language-select",children:"Language"}),r.jsxs(f,{value:(null==ie?void 0:ie.toString())||"",onValueChange:e=>ne(e?parseInt(e):null),children:[r.jsx(y,{id:"language-select",children:r.jsx(w,{placeholder:"Select language"})}),r.jsx(b,{children:null==De?void 0:De.map((e=>r.jsxs(F,{value:e.id.toString(),children:[e.flagIcon&&r.jsx("span",{className:"mr-2",children:e.flagIcon}),e.name]},e.id)))})]})]}),r.jsxs("div",{children:[r.jsx(v,{htmlFor:"namespace-select",children:"Namespace"}),r.jsxs(f,{value:(null==te?void 0:te.toString())||"",onValueChange:e=>le(e?parseInt(e):null),children:[r.jsx(y,{id:"namespace-select",children:r.jsx(w,{placeholder:"Select namespace"})}),r.jsx(b,{children:null==qe?void 0:qe.map((e=>r.jsx(F,{value:e.id.toString(),children:e.name},e.id)))})]})]})]}),ie&&te?Qe||Re?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(c,{className:"h-8 w-8 animate-spin"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex justify-end mb-4",children:r.jsxs(o,{open:ye,onOpenChange:e=>{we(e),e&&fe({key:"",description:""})},children:[r.jsx(m,{asChild:!0,children:r.jsxs(h,{variant:"brand",className:"btn-brand-primary",children:[r.jsx(u,{className:"mr-2 h-4 w-4"}),"Add Translation Key"]})}),r.jsxs(g,{className:"sm:max-w-[425px]",children:[r.jsxs(x,{children:[r.jsx(p,{children:"Add Translation Key"}),r.jsx(j,{children:"Add a new translation key to the selected namespace."})]}),r.jsxs("form",{onSubmit:e=>{e.preventDefault(),te&&Ye.mutate({namespaceId:te,key:Ne.key,description:Ne.description||void 0})},children:[r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"key",className:"text-right",children:"Key"}),r.jsx(N,{id:"key",value:Ne.key,onChange:la,className:"col-span-3",placeholder:"welcome.message",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(v,{htmlFor:"description",className:"text-right",children:"Description"}),r.jsx(S,{id:"description",value:Ne.description,onChange:la,className:"col-span-3",placeholder:"Welcome message shown on the homepage"})]})]}),r.jsx(C,{children:r.jsx(h,{type:"submit",variant:"outline",className:"btn-brand-primary",disabled:Ye.isPending,children:Ye.isPending?r.jsxs(r.Fragment,{children:[r.jsx(c,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Key"})})]})]})]})}),r.jsxs(Q,{children:[r.jsx(U,{children:r.jsxs(z,{children:[r.jsx(R,{children:"Key"}),r.jsx(R,{children:"Translation"}),r.jsx(R,{className:"text-right",children:"Actions"})]})}),r.jsx(V,{children:0===(null==$e?void 0:$e.length)?r.jsx(z,{children:r.jsx(G,{colSpan:3,className:"text-center py-4 text-muted-foreground",children:"No translation keys found in this namespace."})}):null==$e?void 0:$e.map((e=>{const a=null==ze?void 0:ze.find((a=>a.keyId===e.id)),s=ke[e.id]||!1,i=void 0!==be[e.id]?be[e.id]:(null==a?void 0:a.value)||"";return r.jsxs(z,{children:[r.jsx(G,{className:"font-medium",children:e.key}),r.jsx(G,{children:s?r.jsx(S,{value:i,onChange:a=>Fe((s=>({...s,[e.id]:a.target.value}))),className:"min-h-[100px]"}):r.jsx("div",{className:"whitespace-pre-wrap",children:i||r.jsx("em",{className:"text-muted-foreground",children:"No translation"})})}),r.jsx(G,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[s?r.jsx(h,{variant:"brand",size:"icon",onClick:()=>{ie&&Ze.mutate({keyId:e.id,languageId:ie,value:be[e.id]||""})},disabled:Ze.isPending,children:Ze.isPending?r.jsx(c,{className:"h-4 w-4 animate-spin"}):r.jsx(W,{className:"h-4 w-4"})}):r.jsx(h,{variant:"brand",size:"icon",onClick:()=>{Ce((a=>({...a,[e.id]:!0}))),void 0===be[e.id]&&Fe((s=>({...s,[e.id]:(null==a?void 0:a.value)||""})))},children:r.jsx(M,{className:"h-4 w-4"})}),r.jsx(h,{variant:"destructive",size:"icon",onClick:()=>{window.confirm(`Are you sure you want to delete the "${e.key}" translation key? This will delete all translations for this key.`)&&_e.mutate(e.id)},disabled:_e.isPending,children:_e.isPending?r.jsx(c,{className:"h-4 w-4 animate-spin"}):r.jsx(J,{className:"h-4 w-4"})})]})})]},e.id)}))})]})]}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Please select both a language and a namespace to manage translations."})]})]})})]})]})})}export{H as default};
