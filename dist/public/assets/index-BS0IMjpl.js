import{u as e,f as s,r as a,h as i,i as r,j as t,L as l,K as n,D as c,aJ as d,B as m,P as o,t as x,v as h,w as p,x as g,n as u,I as j,aw as v,T as N,E as C,C as F,a as b,b as y,l as f,c as w,aK as P,aL as T,aM as k,a3 as A,aE as D,a4 as U,a5 as E,a6 as I,a7 as R,a8 as S,a9 as M,aa as z,s as L,d as K}from"./index-hDnRHjz5.js";function _(){const{user:_,isLoading:q}=e(),{toast:$}=s(),[B,O]=a.useState(!1),[Q,H]=a.useState(!1),[G,J]=a.useState(null),[V,W]=a.useState({name:"",description:"",price:0,maxUsers:5,maxContacts:1e3,maxChannels:3,maxFlows:1,maxCampaigns:5,maxCampaignRecipients:1e3,campaignFeatures:["basic_campaigns"],isActive:!0,isFree:!1,hasTrialPeriod:!1,trialDays:0,features:["Basic chat","Contact management","1 flow"]});a.useEffect((()=>{q||!_||_.isSuperAdmin||(window.location.href="/")}),[_,q]);const{data:X,isLoading:Y}=i({queryKey:["/api/admin/plans"],queryFn:async()=>{const e=await K("GET","/api/admin/plans");if(!e.ok)throw new Error("Failed to fetch plans");return e.json()},enabled:!!(null==_?void 0:_.isSuperAdmin)}),Z=r({mutationFn:async e=>{const s=await K("POST","/api/admin/plans",e);if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to create plan")}return s.json()},onSuccess:()=>{L.invalidateQueries({queryKey:["/api/admin/plans"]}),O(!1),ae(),$({title:"Plan Created",description:"The plan has been created successfully"})},onError:e=>{$({title:"Error",description:e.message||"Failed to create plan",variant:"destructive"})}}),ee=r({mutationFn:async({id:e,data:s})=>{const a=await K("PUT",`/api/admin/plans/${e}`,s);if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to update plan")}return a.json()},onSuccess:()=>{L.invalidateQueries({queryKey:["/api/admin/plans"]}),H(!1),J(null),$({title:"Plan Updated",description:"The plan has been updated successfully"})},onError:e=>{$({title:"Error",description:e.message||"Failed to update plan",variant:"destructive"})}}),se=r({mutationFn:async e=>{const s=await K("DELETE",`/api/admin/plans/${e}`);if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to delete plan")}return s.json()},onSuccess:()=>{L.invalidateQueries({queryKey:["/api/admin/plans"]}),$({title:"Plan Deleted",description:"The plan has been deleted successfully"})},onError:e=>{$({title:"Error",description:e.message||"Failed to delete plan",variant:"destructive"})}}),ae=()=>{W({name:"",description:"",price:0,maxUsers:5,maxContacts:1e3,maxChannels:3,maxFlows:1,maxCampaigns:5,maxCampaignRecipients:1e3,campaignFeatures:["basic_campaigns"],isActive:!0,isFree:!1,hasTrialPeriod:!1,trialDays:0,features:["Basic chat","Contact management","1 flow"]})},ie=(e,s)=>{const a=[...V.features];a[e]=s,W({...V,features:a})},re=()=>{W({...V,features:[...V.features,""]})},te=e=>{const s=[...V.features];s.splice(e,1),W({...V,features:s})},le=(e,s)=>{const a=[...V.campaignFeatures];a[e]=s,W({...V,campaignFeatures:a})},ne=()=>{W({...V,campaignFeatures:[...V.campaignFeatures,""]})},ce=e=>{const s=[...V.campaignFeatures];s.splice(e,1),W({...V,campaignFeatures:s})};return q?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(l,{className:"h-8 w-8 animate-spin text-primary"})}):(null==_?void 0:_.isSuperAdmin)?t.jsxs(n,{children:[t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-2xl",children:"Subscription Plans"}),t.jsxs(c,{open:B,onOpenChange:O,children:[t.jsx(d,{asChild:!0,children:t.jsxs(m,{variant:"brand",className:"btn-brand-primary",children:[t.jsx(o,{className:"mr-2 h-4 w-4"}),"New Plan"]})}),t.jsxs(x,{className:"sm:max-w-[500px] max-h-[90vh]",children:[t.jsxs(h,{children:[t.jsx(p,{children:"Create New Plan"}),t.jsx(g,{children:"Create a new subscription plan for your customers."})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"name",className:"sm:text-right",children:"Name"}),t.jsx(j,{id:"name",value:V.name,onChange:e=>W({...V,name:e.target.value}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"description",className:"sm:text-right",children:"Description"}),t.jsx(j,{id:"description",value:V.description,onChange:e=>W({...V,description:e.target.value}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"price",className:"sm:text-right",children:"Price ($)"}),t.jsx(j,{id:"price",type:"number",value:V.price,onChange:e=>W({...V,price:parseFloat(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"maxUsers",className:"sm:text-right",children:"Max Users"}),t.jsx(j,{id:"maxUsers",type:"number",value:V.maxUsers,onChange:e=>W({...V,maxUsers:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"maxContacts",className:"sm:text-right",children:"Max Contacts"}),t.jsx(j,{id:"maxContacts",type:"number",value:V.maxContacts,onChange:e=>W({...V,maxContacts:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"maxChannels",className:"sm:text-right",children:"Max Channels"}),t.jsx(j,{id:"maxChannels",type:"number",value:V.maxChannels,onChange:e=>W({...V,maxChannels:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"maxFlows",className:"sm:text-right",children:"Max Flows"}),t.jsx(j,{id:"maxFlows",type:"number",value:V.maxFlows,onChange:e=>W({...V,maxFlows:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"maxCampaigns",className:"sm:text-right",children:"Max Campaigns"}),t.jsx(j,{id:"maxCampaigns",type:"number",value:V.maxCampaigns,onChange:e=>W({...V,maxCampaigns:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"maxCampaignRecipients",className:"sm:text-right",children:"Max Recipients"}),t.jsx(j,{id:"maxCampaignRecipients",type:"number",value:V.maxCampaignRecipients,onChange:e=>W({...V,maxCampaignRecipients:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"isActive",className:"sm:text-right",children:"Active"}),t.jsxs("div",{className:"sm:col-span-3 flex items-center space-x-2",children:[t.jsx(v,{id:"isActive",checked:V.isActive,onCheckedChange:e=>W({...V,isActive:e})}),t.jsx(u,{htmlFor:"isActive",children:V.isActive?"Active":"Inactive"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"isFree",className:"sm:text-right",children:"Free Plan"}),t.jsxs("div",{className:"sm:col-span-3 flex items-center space-x-2",children:[t.jsx(v,{id:"isFree",checked:V.isFree,onCheckedChange:e=>W({...V,isFree:e})}),t.jsx(u,{htmlFor:"isFree",children:V.isFree?"Free":"Paid"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"hasTrialPeriod",className:"sm:text-right",children:"Trial Period"}),t.jsxs("div",{className:"sm:col-span-3 flex items-center space-x-2",children:[t.jsx(v,{id:"hasTrialPeriod",checked:V.hasTrialPeriod,onCheckedChange:e=>W({...V,hasTrialPeriod:e})}),t.jsx(u,{htmlFor:"hasTrialPeriod",children:V.hasTrialPeriod?"Has Trial":"No Trial"})]})]}),V.hasTrialPeriod&&t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"trialDays",className:"sm:text-right",children:"Trial Days"}),t.jsx(j,{id:"trialDays",type:"number",min:"1",max:"365",value:V.trialDays,onChange:e=>W({...V,trialDays:parseInt(e.target.value)||0}),className:"sm:col-span-3",placeholder:"Number of trial days (e.g., 7, 14, 30)"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[t.jsx(u,{className:"sm:text-right pt-2",children:"Features"}),t.jsxs("div",{className:"sm:col-span-3 space-y-2",children:[V.features.map(((e,s)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{value:e,onChange:e=>ie(s,e.target.value),placeholder:"Feature description"}),t.jsx(m,{type:"button",variant:"ghost",size:"icon",onClick:()=>te(s),children:t.jsx(N,{className:"h-4 w-4"})})]},s))),t.jsx(m,{type:"button",variant:"brand",size:"sm",onClick:re,className:"mt-2 border-primary/30 hover:border-primary",children:"Add Feature"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[t.jsx(u,{className:"sm:text-right pt-2",children:"Campaign Features"}),t.jsxs("div",{className:"sm:col-span-3 space-y-2",children:[V.campaignFeatures.map(((e,s)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{value:e,onChange:e=>le(s,e.target.value),placeholder:"Campaign feature (e.g., basic_campaigns, templates, segments)"}),t.jsx(m,{type:"button",variant:"ghost",size:"icon",onClick:()=>ce(s),children:t.jsx(N,{className:"h-4 w-4"})})]},s))),t.jsx(m,{type:"button",variant:"brand",size:"sm",onClick:ne,className:"mt-2 border-primary/30 hover:border-primary",children:"Add Campaign Feature"})]})]})]}),t.jsxs(C,{children:[t.jsx(m,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),t.jsx(m,{onClick:()=>{Z.mutate(V)},disabled:Z.isPending,variant:"brand",className:"btn-brand-primary",children:Z.isPending?t.jsxs(t.Fragment,{children:[t.jsx(l,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Plan"})]})]})]})]}),Y?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(l,{className:"h-8 w-8 animate-spin text-primary"})}):0===(null==X?void 0:X.length)?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No plans found. Create your first plan to get started."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null==X?void 0:X.map((e=>t.jsxs(F,{className:"overflow-hidden border-2 "+(e.isActive?"border-primary/20 hover:border-primary/50 transition-all":"opacity-60"),children:[!e.isActive&&t.jsx("div",{className:"bg-muted/80 text-muted-foreground text-xs font-medium py-1 px-3 text-center",children:"Inactive Plan"}),t.jsx(b,{className:"pb-4",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx(y,{className:"text-xl",children:e.name}),t.jsx(f,{className:"mt-1",children:e.description}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[e.isFree&&t.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium py-1 px-2 rounded-full",children:"Free"}),e.hasTrialPeriod&&e.trialDays>0&&t.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium py-1 px-2 rounded-full",children:[e.trialDays," day trial"]})]})]}),e.isActive&&t.jsx("div",{className:"bg-primary/10 text-secondry text-xs font-medium py-1 px-3 rounded-full",children:"Active"})]})}),t.jsxs(w,{className:"pb-6",children:[t.jsxs("div",{className:"mb-6 flex items-baseline",children:[t.jsxs("span",{className:"text-4xl font-bold",children:["$",e.price]}),t.jsx("span",{className:"text-muted-foreground ml-2",children:"/month"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"text-lg font-semibold",children:e.maxUsers}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Users"})]}),t.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"text-lg font-semibold",children:e.maxContacts.toLocaleString()}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Contacts"})]}),t.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"text-lg font-semibold",children:e.maxChannels}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Channels"})]}),t.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"text-lg font-semibold",children:e.maxFlows}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Flows"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-primary/10 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"text-lg font-semibold",children:e.maxCampaigns||0}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Campaigns"})]}),t.jsxs("div",{className:"bg-primary/10 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"text-lg font-semibold",children:(e.maxCampaignRecipients||0).toLocaleString()}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Recipients"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-3 text-sm text-muted-foreground uppercase tracking-wide",children:"Features"}),t.jsx("ul",{className:"space-y-2",children:e.features.map(((e,s)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx(P,{className:"h-4 w-4 text-green-500 mr-2 mt-1 flex-shrink-0"}),t.jsx("span",{className:"text-sm",children:e})]},s)))})]}),e.campaignFeatures&&e.campaignFeatures.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-3 text-sm text-muted-foreground uppercase tracking-wide",children:"Campaign Features"}),t.jsx("ul",{className:"space-y-2",children:e.campaignFeatures.map(((e,s)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx(P,{className:"h-4 w-4 text-blue-500 mr-2 mt-1 flex-shrink-0"}),t.jsx("span",{className:"text-sm capitalize",children:e.replace(/_/g," ")})]},s)))})]})]})]}),t.jsxs(T,{className:"flex justify-between bg-muted/20 pt-4 pb-4",children:[t.jsxs(m,{variant:"brand",size:"sm",onClick:()=>(e=>{J(e),W({name:e.name,description:e.description,price:e.price,maxUsers:e.maxUsers,maxContacts:e.maxContacts,maxChannels:e.maxChannels,maxFlows:e.maxFlows||1,maxCampaigns:e.maxCampaigns||5,maxCampaignRecipients:e.maxCampaignRecipients||1e3,campaignFeatures:[...e.campaignFeatures||["basic_campaigns"]],isActive:e.isActive,isFree:e.isFree||!1,hasTrialPeriod:e.hasTrialPeriod||!1,trialDays:e.trialDays||0,features:[...e.features]}),H(!0)})(e),className:"border-primary/30 hover:border-primary",children:[t.jsx(k,{className:"h-4 w-4 mr-2"}),"Edit"]}),t.jsxs(A,{children:[t.jsx(D,{asChild:!0,children:t.jsxs(m,{variant:"destructive",size:"sm",children:[t.jsx(N,{className:"h-4 w-4 mr-2"}),"Delete"]})}),t.jsxs(U,{className:"max-w-md max-h-[90vh]",children:[t.jsxs(E,{children:[t.jsx(I,{children:"Are you sure?"}),t.jsx(R,{children:"This action cannot be undone. This will permanently delete the plan and remove it from our servers."})]}),t.jsxs(S,{className:"mt-4",children:[t.jsx(M,{children:"Cancel"}),t.jsx(z,{onClick:()=>{return s=e.id,void se.mutate(s);var s},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})]},e.id)))})]}),t.jsx(c,{open:Q,onOpenChange:H,children:t.jsxs(x,{className:"sm:max-w-[500px] max-h-[90vh]",children:[t.jsxs(h,{children:[t.jsx(p,{children:"Edit Plan"}),t.jsx(g,{children:"Update the subscription plan details."})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-name",className:"sm:text-right",children:"Name"}),t.jsx(j,{id:"edit-name",value:V.name,onChange:e=>W({...V,name:e.target.value}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-description",className:"sm:text-right",children:"Description"}),t.jsx(j,{id:"edit-description",value:V.description,onChange:e=>W({...V,description:e.target.value}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-price",className:"sm:text-right",children:"Price ($)"}),t.jsx(j,{id:"edit-price",type:"number",value:V.price,onChange:e=>W({...V,price:parseFloat(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-maxUsers",className:"sm:text-right",children:"Max Users"}),t.jsx(j,{id:"edit-maxUsers",type:"number",value:V.maxUsers,onChange:e=>W({...V,maxUsers:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-maxContacts",className:"sm:text-right",children:"Max Contacts"}),t.jsx(j,{id:"edit-maxContacts",type:"number",value:V.maxContacts,onChange:e=>W({...V,maxContacts:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-maxChannels",className:"sm:text-right",children:"Max Channels"}),t.jsx(j,{id:"edit-maxChannels",type:"number",value:V.maxChannels,onChange:e=>W({...V,maxChannels:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-maxFlows",className:"sm:text-right",children:"Max Flows"}),t.jsx(j,{id:"edit-maxFlows",type:"number",value:V.maxFlows,onChange:e=>W({...V,maxFlows:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-maxCampaigns",className:"sm:text-right",children:"Max Campaigns"}),t.jsx(j,{id:"edit-maxCampaigns",type:"number",value:V.maxCampaigns,onChange:e=>W({...V,maxCampaigns:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-maxCampaignRecipients",className:"sm:text-right",children:"Max Recipients"}),t.jsx(j,{id:"edit-maxCampaignRecipients",type:"number",value:V.maxCampaignRecipients,onChange:e=>W({...V,maxCampaignRecipients:parseInt(e.target.value)}),className:"sm:col-span-3"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-isActive",className:"sm:text-right",children:"Active"}),t.jsxs("div",{className:"sm:col-span-3 flex items-center space-x-2",children:[t.jsx(v,{id:"edit-isActive",checked:V.isActive,onCheckedChange:e=>W({...V,isActive:e})}),t.jsx(u,{htmlFor:"edit-isActive",children:V.isActive?"Active":"Inactive"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-isFree",className:"sm:text-right",children:"Free Plan"}),t.jsxs("div",{className:"sm:col-span-3 flex items-center space-x-2",children:[t.jsx(v,{id:"edit-isFree",checked:V.isFree,onCheckedChange:e=>W({...V,isFree:e})}),t.jsx(u,{htmlFor:"edit-isFree",children:V.isFree?"Free":"Paid"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-hasTrialPeriod",className:"sm:text-right",children:"Trial Period"}),t.jsxs("div",{className:"sm:col-span-3 flex items-center space-x-2",children:[t.jsx(v,{id:"edit-hasTrialPeriod",checked:V.hasTrialPeriod,onCheckedChange:e=>W({...V,hasTrialPeriod:e})}),t.jsx(u,{htmlFor:"edit-hasTrialPeriod",children:V.hasTrialPeriod?"Has Trial":"No Trial"})]})]}),V.hasTrialPeriod&&t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-4",children:[t.jsx(u,{htmlFor:"edit-trialDays",className:"sm:text-right",children:"Trial Days"}),t.jsx(j,{id:"edit-trialDays",type:"number",min:"1",max:"365",value:V.trialDays,onChange:e=>W({...V,trialDays:parseInt(e.target.value)||0}),className:"sm:col-span-3",placeholder:"Number of trial days (e.g., 7, 14, 30)"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[t.jsx(u,{className:"sm:text-right pt-2",children:"Features"}),t.jsxs("div",{className:"sm:col-span-3 space-y-2",children:[V.features.map(((e,s)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{value:e,onChange:e=>ie(s,e.target.value),placeholder:"Feature description"}),t.jsx(m,{type:"button",variant:"ghost",size:"icon",onClick:()=>te(s),children:t.jsx(N,{className:"h-4 w-4"})})]},s))),t.jsx(m,{type:"button",variant:"brand",size:"sm",onClick:re,className:"mt-2 border-primary/30 hover:border-primary",children:"Add Feature"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[t.jsx(u,{className:"sm:text-right pt-2",children:"Campaign Features"}),t.jsxs("div",{className:"sm:col-span-3 space-y-2",children:[V.campaignFeatures.map(((e,s)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{value:e,onChange:e=>le(s,e.target.value),placeholder:"Campaign feature (e.g., basic_campaigns, templates, segments)"}),t.jsx(m,{type:"button",variant:"ghost",size:"icon",onClick:()=>ce(s),children:t.jsx(N,{className:"h-4 w-4"})})]},s))),t.jsx(m,{type:"button",variant:"brand",size:"sm",onClick:ne,className:"mt-2 border-primary/30 hover:border-primary",children:"Add Campaign Feature"})]})]})]}),t.jsxs(C,{children:[t.jsx(m,{variant:"outline",onClick:()=>H(!1),children:"Cancel"}),t.jsx(m,{onClick:()=>{G&&ee.mutate({id:G.id,data:V})},disabled:ee.isPending,variant:"brand",className:"btn-brand-primary",children:ee.isPending?t.jsxs(t.Fragment,{children:[t.jsx(l,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Plan"})]})]})})]}):null}export{_ as default};
