import{aN as e,aO as a,aP as t,aQ as n,aR as s,aS as i,aT as r,aU as l,aV as c,aW as o,aX as d,aY as m,aZ as p,a_ as u,r as x,a$ as h,b0 as y,b1 as f,b2 as j,b3 as v,b4 as g,b5 as b,b6 as N,b7 as w,b8 as P,b9 as S,ba as A,bb as O,bc as E,bd as k,be as C,bf as _,bg as T,bh as I,u as M,g as D,f as F,bi as z,h as R,i as K,j as L,K as B,B as V,bj as q,aF as $,aG as G,aH as W,aI as U,C as H,a as Q,b as Y,l as J,aq as X,ar as Z,as as ee,at as ae,au as te,c as ne,L as se,bk as ie,bl as re,bm as le,bn as ce,bo as oe,I as de,O as me,Q as pe,V as ue,W as xe,X as he,Y as ye,bp as fe,bq as je,aM as ve,H as ge,o as be,br as Ne,bs as we,G as Pe,bt as Se,bu as Ae,D as Oe,t as Ee,v as ke,w as Ce,x as _e,n as Te,bv as Ie,E as Me,bw as De,a3 as Fe,a4 as ze,a5 as Re,a6 as Ke,a7 as Le,a8 as Be,a9 as Ve,aa as qe,d as $e,bx as Ge,by as We,F as Ue,bz as He}from"./index-Du4k3PvU.js";var Qe,Ye=["layout","type","stroke","connectNulls","isRange","ref"],Je=["key"];function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,a){if(null==e)return{};var t,n,s=function(e,a){if(null==e)return{};var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(a.indexOf(n)>=0)continue;t[n]=e[n]}return t}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}function ea(){return ea=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ea.apply(this,arguments)}function aa(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function ta(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?aa(Object(t),!0).forEach((function(a){ca(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aa(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function na(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oa(n.key),n)}}function sa(e,a,t){return a=ra(a),function(e,a){if(a&&("object"===Xe(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ia()?Reflect.construct(a,t||[],ra(e).constructor):a.apply(e,t))}function ia(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(a){}return(ia=function(){return!!e})()}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function la(e,a){return(la=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,a){return e.__proto__=a,e})(e,a)}function ca(e,a,t){return(a=oa(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function oa(e){var a=function(e,a){if("object"!=Xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a);if("object"!=Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Xe(a)?a:a+""}var da=function(){function f(){var e;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,f);for(var a=arguments.length,t=new Array(a),n=0;n<a;n++)t[n]=arguments[n];return ca(e=sa(this,f,[].concat(t)),"state",{isAnimationFinished:!0}),ca(e,"id",h("recharts-area-")),ca(e,"handleAnimationEnd",(function(){var a=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),y(a)&&a()})),ca(e,"handleAnimationStart",(function(){var a=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),y(a)&&a()})),e}return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),a&&la(e,a)}(f,x.PureComponent),j=f,g=[{key:"getDerivedStateFromProps",value:function(e,a){return e.animationId!==a.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:e.points!==a.curPoints||e.baseLine!==a.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],(v=[{key:"renderDots",value:function(n,s,i){var r=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(r&&!l)return null;var c=this.props,o=c.dot,d=c.points,m=c.dataKey,p=e(this.props,!1),u=e(o,!0),x=d.map((function(e,a){var t=ta(ta(ta({key:"dot-".concat(a),r:3},p),u),{},{index:a,cx:e.x,cy:e.y,dataKey:m,value:e.value,payload:e.payload,points:d});return f.renderDotItem(o,t)})),h={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return a.createElement(t,ea({className:"recharts-area-dots"},h),x)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,i=t.baseLine,r=t.points,l=t.strokeWidth,c=r[0].x,o=r[r.length-1].x,d=e*Math.abs(c-o),m=n(r.map((function(e){return e.y||0})));return s(i)&&"number"==typeof i?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(n(i.map((function(e){return e.y||0}))),m)),s(m)?a.createElement("rect",{x:c<o?c:c-d,y:0,width:d,height:Math.floor(m+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,i=t.baseLine,r=t.points,l=t.strokeWidth,c=r[0].y,o=r[r.length-1].y,d=e*Math.abs(c-o),m=n(r.map((function(e){return e.x||0})));return s(i)&&"number"==typeof i?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(n(i.map((function(e){return e.x||0}))),m)),s(m)?a.createElement("rect",{x:0,y:c<o?c:c-d,width:m+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(n,s,r,l){var c=this.props,o=c.layout,d=c.type,m=c.stroke,p=c.connectNulls,u=c.isRange;c.ref;var x=Ze(c,Ye);return a.createElement(t,{clipPath:r?"url(#clipPath-".concat(l,")"):null},a.createElement(i,ea({},e(x,!0),{points:n,connectNulls:p,type:d,baseLine:s,layout:o,stroke:"none",className:"recharts-area-area"})),"none"!==m&&a.createElement(i,ea({},e(this.props,!1),{className:"recharts-area-curve",layout:o,type:d,connectNulls:p,fill:"none",points:n})),"none"!==m&&u&&a.createElement(i,ea({},e(this.props,!1),{className:"recharts-area-curve",layout:o,type:d,connectNulls:p,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(e,n){var i=this,d=this.props,m=d.points,p=d.baseLine,u=d.isAnimationActive,x=d.animationBegin,h=d.animationDuration,y=d.animationEasing,f=d.animationId,j=this.state,v=j.prevPoints,g=j.prevBaseLine;return a.createElement(r,{begin:x,duration:h,isActive:u,easing:y,from:{t:0},to:{t:1},key:"area-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(r){var d=r.t;if(v){var u,x=v.length/m.length,h=m.map((function(e,a){var t=Math.floor(a*x);if(v[t]){var n=v[t],s=l(n.x,e.x),i=l(n.y,e.y);return ta(ta({},e),{},{x:s(d),y:i(d)})}return e}));return u=s(p)&&"number"==typeof p?l(g,p)(d):c(p)||o(p)?l(g,0)(d):p.map((function(e,a){var t=Math.floor(a*x);if(g[t]){var n=g[t],s=l(n.x,e.x),i=l(n.y,e.y);return ta(ta({},e),{},{x:s(d),y:i(d)})}return e})),i.renderAreaStatically(h,u,e,n)}return a.createElement(t,null,a.createElement("defs",null,a.createElement("clipPath",{id:"animationClipPath-".concat(n)},i.renderClipRect(d))),a.createElement(t,{clipPath:"url(#animationClipPath-".concat(n,")")},i.renderAreaStatically(m,p,e,n)))}))}},{key:"renderArea",value:function(e,a){var t=this.props,n=t.points,s=t.baseLine,i=t.isAnimationActive,r=this.state,l=r.prevPoints,c=r.prevBaseLine,o=r.totalLength;return i&&n&&n.length&&(!l&&o>0||!d(l,n)||!d(c,s))?this.renderAreaWithAnimation(e,a):this.renderAreaStatically(n,s,e,a)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,r=s.dot,l=s.points,o=s.className,d=s.top,x=s.left,h=s.xAxis,y=s.yAxis,f=s.width,j=s.height,v=s.isAnimationActive,g=s.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,N=1===l.length,w=m("recharts-area",o),P=h&&h.allowDataOverflow,S=y&&y.allowDataOverflow,A=P||S,O=c(g)?this.id:g,E=null!==(n=e(r,!1))&&void 0!==n?n:{r:3,strokeWidth:2},k=E.r,C=void 0===k?3:k,_=E.strokeWidth,T=void 0===_?2:_,I=(p(r)?r:{}).clipDot,M=void 0===I||I,D=2*C+T;return a.createElement(t,{className:w},P||S?a.createElement("defs",null,a.createElement("clipPath",{id:"clipPath-".concat(O)},a.createElement("rect",{x:P?x:x-f/2,y:S?d:d-j/2,width:P?f:2*f,height:S?j:2*j})),!M&&a.createElement("clipPath",{id:"clipPath-dots-".concat(O)},a.createElement("rect",{x:x-D/2,y:d-D/2,width:f+D,height:j+D}))):null,N?null:this.renderArea(A,O),(r||N)&&this.renderDots(A,M,O),(!v||b)&&u.renderCallByParent(this.props,l))}}])&&na(j.prototype,v),g&&na(j,g),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,v,g}();function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pa(e,a,t){return a&&function(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ja(n.key),n)}}(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function ua(e,a,t){return a=ha(a),function(e,a){if(a&&("object"===ma(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xa()?Reflect.construct(a,t||[],ha(e).constructor):a.apply(e,t))}function xa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(a){}return(xa=function(){return!!e})()}function ha(e){return(ha=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ya(e,a){return(ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,a){return e.__proto__=a,e})(e,a)}function fa(e,a,t){return(a=ja(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function ja(e){var a=function(e,a){if("object"!=ma(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a);if("object"!=ma(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ma(a)?a:a+""}Qe=da,ca(da,"displayName","Area"),ca(da,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!f.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),ca(da,"getBaseValue",(function(e,a,t,n){var i=e.layout,r=e.baseValue,l=a.props.baseValue,c=null!=l?l:r;if(s(c)&&"number"==typeof c)return c;var o="horizontal"===i?n:t,d=o.scale.domain();if("number"===o.type){var m=Math.max(d[0],d[1]),p=Math.min(d[0],d[1]);return"dataMin"===c?p:"dataMax"===c||m<0?m:Math.max(Math.min(d[0],d[1]),0)}return"dataMin"===c?d[0]:"dataMax"===c?d[1]:d[0]})),ca(da,"getComposedData",(function(e){var a,t=e.props,n=e.item,s=e.xAxis,i=e.yAxis,r=e.xAxisTicks,l=e.yAxisTicks,c=e.bandSize,o=e.dataKey,d=e.stackedData,m=e.dataStartIndex,p=e.displayedData,u=e.offset,x=t.layout,h=d&&d.length,y=Qe.getBaseValue(t,n,s,i),f="horizontal"===x,g=!1,b=p.map((function(e,a){var t;h?t=d[m+a]:(t=j(e,o),Array.isArray(t)?g=!0:t=[y,t]);var n=null==t[1]||h&&null==j(e,o);return f?{x:v({axis:s,ticks:r,bandSize:c,entry:e,index:a}),y:n?null:i.scale(t[1]),value:t,payload:e}:{x:n?null:s.scale(t[1]),y:v({axis:i,ticks:l,bandSize:c,entry:e,index:a}),value:t,payload:e}}));return a=h||g?b.map((function(e){var a=Array.isArray(e.value)?e.value[0]:null;return f?{x:e.x,y:null!=a&&null!=e.y?i.scale(a):null}:{x:null!=a?s.scale(a):null,y:e.y}})):f?i.scale(y):s.scale(y),ta({points:b,baseLine:a,layout:x,isRange:g},u)})),ca(da,"renderDotItem",(function(e,t){var n;if(a.isValidElement(e))n=a.cloneElement(e,t);else if(y(e))n=e(t);else{var s=m("recharts-area-dot","boolean"!=typeof e?e.className:""),i=t.key,r=Ze(t,Je);n=a.createElement(g,ea({},r,{key:i,className:s}))}return n}));var va=function(){function e(){return function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),ua(this,e,arguments)}return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),a&&ya(e,a)}(e,a.Component),pa(e,[{key:"render",value:function(){return null}}])}();fa(va,"displayName","ZAxis"),fa(va,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var ga=["option","isActive"];function ba(){return ba=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ba.apply(this,arguments)}function Na(e,a){if(null==e)return{};var t,n,s=function(e,a){if(null==e)return{};var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(a.indexOf(n)>=0)continue;t[n]=e[n]}return t}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}function wa(e){var t=e.option,n=e.isActive,s=Na(e,ga);return"string"==typeof t?a.createElement(b,ba({option:a.createElement(N,ba({type:t},s)),isActive:n,shapeType:"symbols"},s)):a.createElement(b,ba({option:t,isActive:n,shapeType:"symbols"},s))}function Pa(e){return(Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sa(){return Sa=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Sa.apply(this,arguments)}function Aa(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Oa(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Aa(Object(t),!0).forEach((function(a){Ia(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Aa(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function Ea(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ma(n.key),n)}}function ka(e,a,t){return a=_a(a),function(e,a){if(a&&("object"===Pa(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ca()?Reflect.construct(a,t||[],_a(e).constructor):a.apply(e,t))}function Ca(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(a){}return(Ca=function(){return!!e})()}function _a(e){return(_a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ta(e,a){return(Ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,a){return e.__proto__=a,e})(e,a)}function Ia(e,a,t){return(a=Ma(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function Ma(e){var a=function(e,a){if("object"!=Pa(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a);if("object"!=Pa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Pa(a)?a:a+""}var Da=function(){function n(){var e;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,t=new Array(a),s=0;s<a;s++)t[s]=arguments[s];return Ia(e=ka(this,n,[].concat(t)),"state",{isAnimationFinished:!1}),Ia(e,"handleAnimationEnd",(function(){e.setState({isAnimationFinished:!0})})),Ia(e,"handleAnimationStart",(function(){e.setState({isAnimationFinished:!1})})),Ia(e,"id",h("recharts-scatter-")),e}return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),a&&Ta(e,a)}(n,x.PureComponent),s=n,p=[{key:"getDerivedStateFromProps",value:function(e,a){return e.animationId!==a.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:a.curPoints}:e.points!==a.curPoints?{curPoints:e.points}:null}}],(o=[{key:"renderSymbolsStatically",value:function(n){var s=this,i=this.props,r=i.shape,l=i.activeShape,c=i.activeIndex,o=e(this.props,!1);return n.map((function(e,n){var i=c===n,d=i?l:r,m=Oa(Oa({},o),e);return a.createElement(t,Sa({className:"recharts-scatter-symbol",key:"symbol-".concat(null==e?void 0:e.cx,"-").concat(null==e?void 0:e.cy,"-").concat(null==e?void 0:e.size,"-").concat(n)},w(s.props,e,n),{role:"img"}),a.createElement(wa,Sa({option:d,isActive:i,key:"symbol-".concat(n)},m)))}))}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,n=this.props,s=n.points,i=n.isAnimationActive,c=n.animationBegin,o=n.animationDuration,d=n.animationEasing,m=n.animationId,p=this.state.prevPoints;return a.createElement(r,{begin:c,duration:o,isActive:i,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(n){var i=n.t,r=s.map((function(e,a){var t=p&&p[a];if(t){var n=l(t.cx,e.cx),s=l(t.cy,e.cy),r=l(t.size,e.size);return Oa(Oa({},e),{},{cx:n(i),cy:s(i),size:r(i)})}var c=l(0,e.size);return Oa(Oa({},e),{},{size:c(i)})}));return a.createElement(t,null,e.renderSymbolsStatically(r))}))}},{key:"renderSymbols",value:function(){var e=this.props,a=e.points,t=e.isAnimationActive,n=this.state.prevPoints;return!(t&&a&&a.length)||n&&d(n,a)?this.renderSymbolsStatically(a):this.renderSymbolsWithAnimation()}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,t=e.points,n=e.xAxis,s=e.yAxis,i=e.children,r=P(i,S);return r?r.map((function(e,i){var r=e.props,l=r.direction,c=r.dataKey;return a.cloneElement(e,{key:"".concat(l,"-").concat(c,"-").concat(t[i]),data:t,xAxis:n,yAxis:s,layout:"x"===l?"vertical":"horizontal",dataPointFormatter:function(e,a){return{x:e.cx,y:e.cy,value:"x"===l?+e.node.x:+e.node.y,errorVal:j(e,a)}}})})):null}},{key:"renderLine",value:function(){var n,s,r=this.props,l=r.points,c=r.line,o=r.lineType,d=r.lineJointType,m=e(this.props,!1),p=e(c,!1);if("joint"===o)n=l.map((function(e){return{x:e.cx,y:e.cy}}));else if("fitting"===o){var u=A(l),x=u.xmin,h=u.xmax,f=u.a,j=u.b,v=function(e){return f*e+j};n=[{x:x,y:v(x)},{x:h,y:v(h)}]}var g=Oa(Oa(Oa({},m),{},{fill:"none",stroke:m&&m.fill},p),{},{points:n});return s=a.isValidElement(c)?a.cloneElement(c,g):y(c)?c(g):a.createElement(i,Sa({},g,{type:d})),a.createElement(t,{className:"recharts-scatter-line",key:"recharts-scatter-line"},s)}},{key:"render",value:function(){var e=this.props,n=e.hide,s=e.points,i=e.line,r=e.className,l=e.xAxis,o=e.yAxis,d=e.left,p=e.top,x=e.width,h=e.height,y=e.id,f=e.isAnimationActive;if(n||!s||!s.length)return null;var j=this.state.isAnimationFinished,v=m("recharts-scatter",r),g=l&&l.allowDataOverflow,b=o&&o.allowDataOverflow,N=g||b,w=c(y)?this.id:y;return a.createElement(t,{className:v,clipPath:N?"url(#clipPath-".concat(w,")"):null},g||b?a.createElement("defs",null,a.createElement("clipPath",{id:"clipPath-".concat(w)},a.createElement("rect",{x:g?d:d-x/2,y:b?p:p-h/2,width:g?x:2*x,height:b?h:2*h}))):null,i&&this.renderLine(),this.renderErrorBar(),a.createElement(t,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!f||j)&&u.renderCallByParent(this.props,s))}}])&&Ea(s.prototype,o),p&&Ea(s,p),Object.defineProperty(s,"prototype",{writable:!1}),s;var s,o,p}();Ia(Da,"displayName","Scatter"),Ia(Da,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!f.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"}),Ia(Da,"getComposedData",(function(e){var a=e.xAxis,t=e.yAxis,n=e.zAxis,s=e.item,i=e.displayedData,r=e.xAxisTicks,l=e.yAxisTicks,o=e.offset,d=s.props.tooltipType,m=P(s.props.children,O),p=c(a.dataKey)?s.props.dataKey:a.dataKey,u=c(t.dataKey)?s.props.dataKey:t.dataKey,x=n&&n.dataKey,h=n?n.range:va.defaultProps.range,y=h&&h[0],f=a.scale.bandwidth?a.scale.bandwidth():0,g=t.scale.bandwidth?t.scale.bandwidth():0,b=i.map((function(e,i){var o=j(e,p),h=j(e,u),b=!c(x)&&j(e,x)||"-",N=[{name:c(a.dataKey)?s.props.name:a.name||a.dataKey,unit:a.unit||"",value:o,payload:e,dataKey:p,type:d},{name:c(t.dataKey)?s.props.name:t.name||t.dataKey,unit:t.unit||"",value:h,payload:e,dataKey:u,type:d}];"-"!==b&&N.push({name:n.name||n.dataKey,unit:n.unit||"",value:b,payload:e,dataKey:x,type:d});var w=v({axis:a,ticks:r,bandSize:f,entry:e,index:i,dataKey:p}),P=v({axis:t,ticks:l,bandSize:g,entry:e,index:i,dataKey:u}),S="-"!==b?n.scale(b):y,A=Math.sqrt(Math.max(S,0)/Math.PI);return Oa(Oa({},e),{},{cx:w,cy:P,x:w-A,y:P-A,xAxis:a,yAxis:t,zAxis:n,width:2*A,height:2*A,size:S,node:{x:o,y:h,z:b},tooltipPayload:N,tooltipPosition:{x:w,y:P},payload:e},m&&m[i]&&m[i].props)}));return Oa({points:b},o)}));var Fa=E({chartName:"ComposedChart",GraphicalChild:[k,da,C,Da],axisComponents:[{axisType:"xAxis",AxisComp:_},{axisType:"yAxis",AxisComp:T},{axisType:"zAxis",AxisComp:va}],formatAxisMap:I});function za(){var e,a,t,n;const{user:s}=M(),{t:i}=D(),{toast:r}=F(),l=z(),[c,o]=x.useState("dashboard"),[d,m]=x.useState(""),[p,u]=x.useState("all"),[h,y]=x.useState("all"),[f,j]=x.useState(1),[v,g]=x.useState("12months"),[b,N]=x.useState(""),[w,P]=x.useState(1),[S,A]=x.useState(1),[E,I]=x.useState(!1),[Qe,Ye]=x.useState(null),[Je,Xe]=x.useState(""),[Ze,ea]=x.useState(!1),[aa,ta]=x.useState(!1),[na,sa]=x.useState(!1),[ia,ra]=x.useState(null),[la,ca]=x.useState(null),[oa,da]=x.useState(!1),[ma,pa]=x.useState(null),[ua,xa]=x.useState(""),[ha,ya]=x.useState({status:"",paymentMethod:"",amount:"",notes:"",externalTransactionId:""}),{data:fa,isLoading:ja}=R({queryKey:["admin","payments","metrics"],queryFn:async()=>{const e=await $e("GET","/api/admin/payments/metrics");if(!e.ok)throw new Error("Failed to fetch payment metrics");return e.json()},enabled:!!(null==s?void 0:s.isSuperAdmin)}),{data:va,isLoading:ga}=R({queryKey:["admin","payments","transactions",f,p,h],queryFn:async()=>{const e=new URLSearchParams;e.append("page",f.toString()),e.append("limit","20"),p&&"all"!==p&&e.append("status",p),h&&"all"!==h&&e.append("paymentMethod",h);const a=await $e("GET",`/api/admin/payments/transactions?${e.toString()}`);if(!a.ok)throw new Error("Failed to fetch payment transactions");return a.json()},enabled:!!(null==s?void 0:s.isSuperAdmin)&&"transactions"===c}),{data:ba,isLoading:Na}=R({queryKey:["admin","payments","trends",v],queryFn:async()=>{const e=await $e("GET",`/api/admin/payments/trends?period=${v}`);if(!e.ok)throw new Error("Failed to fetch payment trends");return e.json()},enabled:!!(null==s?void 0:s.isSuperAdmin)&&"dashboard"===c}),{data:wa,isLoading:Pa}=R({queryKey:["admin","payments","pending",S],queryFn:async()=>{const e=new URLSearchParams;e.append("page",S.toString()),e.append("limit","20");const a=await $e("GET",`/api/admin/payments/pending?${e.toString()}`);if(!a.ok)throw new Error("Failed to fetch pending payments");return a.json()},enabled:!!(null==s?void 0:s.isSuperAdmin)&&"pending"===c}),{data:Sa,isLoading:Aa}=R({queryKey:["admin","payments","companies",w,b],queryFn:async()=>{const e=new URLSearchParams;e.append("page",w.toString()),e.append("limit","20"),b&&e.append("search",b);const a=await $e("GET",`/api/admin/payments/companies?${e.toString()}`);if(!a.ok)throw new Error("Failed to fetch companies payment details");return a.json()},enabled:!!(null==s?void 0:s.isSuperAdmin)&&"companies"===c}),{data:Oa,isLoading:Ea}=R({queryKey:["admin","payments","method-performance"],queryFn:async()=>{const e=await $e("GET","/api/admin/payments/method-performance");if(!e.ok)throw new Error("Failed to fetch payment method performance");return e.json()},enabled:!!(null==s?void 0:s.isSuperAdmin)&&"performance"===c}),{data:ka,isLoading:Ca}=R({queryKey:["admin","companies",null==la?void 0:la.id,"transactions"],queryFn:async()=>{if(!(null==la?void 0:la.id))return[];const e=await $e("GET",`/api/admin/companies/${la.id}/payment-transactions`);if(!e.ok)throw new Error("Failed to fetch company transactions");return e.json()},enabled:!!(null==s?void 0:s.isSuperAdmin)&&!!(null==la?void 0:la.id)&&na}),_a=K({mutationFn:async({transactionId:e,notes:a})=>{const t=await $e("PATCH",`/api/admin/payments/transactions/${e}/status`,{status:"completed",notes:a});if(!t.ok)throw new Error("Failed to mark payment as received");return t.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["admin","payments"]}),r({title:i("admin.payments.status_update.success","Payment status updated successfully"),description:"The payment has been marked as received."})},onError:e=>{r({title:"Error",description:e.message,variant:"destructive"})}}),Ta=K({mutationFn:async({companyId:e,message:a})=>{const t=await $e("POST",`/api/admin/payments/reminders/${e}`,{message:a,type:"email"});if(!t.ok)throw new Error("Failed to send reminder");return t.json()},onSuccess:()=>{I(!1),Xe(""),Ye(null),r({title:i("admin.payments.reminders.success","Reminder sent successfully"),description:"Payment reminder has been sent to the company."})},onError:e=>{r({title:"Error",description:e.message,variant:"destructive"})}}),Ia=K({mutationFn:async({transactionId:e,updates:a})=>{const t=await $e("PATCH",`/api/admin/payments/transactions/${e}`,a);if(!t.ok)throw new Error("Failed to update transaction");return t.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["admin","payments"]}),ea(!1),ra(null),r({title:i("admin.payments.edit.success","Transaction updated successfully"),description:"The payment transaction has been updated."})},onError:e=>{r({title:"Error",description:e.message,variant:"destructive"})}}),Ma=e=>{ra(e),ta(!0)},Da=async e=>{try{await navigator.clipboard.writeText(e),r({title:i("admin.payments.copied","Copied to clipboard"),description:"The text has been copied to your clipboard."})}catch(a){r({title:"Error",description:"Failed to copy to clipboard",variant:"destructive"})}};if(!(null==s?void 0:s.isSuperAdmin))return null;const za=e=>L.jsx(ge,{variant:{completed:"default",pending:"secondary",failed:"destructive",cancelled:"outline"}[e]||"outline",children:i(`admin.payments.transactions.status.${e}`,e)}),Ra=()=>ja?L.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map(((e,a)=>L.jsxs(H,{children:[L.jsxs(Q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[L.jsx(Y,{className:"text-sm font-medium",children:L.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})}),L.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded animate-pulse"})]}),L.jsxs(ne,{children:[L.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse mb-2"}),L.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-2/3"})]})]},a)))}):fa?L.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[L.jsxs(H,{children:[L.jsxs(Q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[L.jsx(Y,{className:"text-sm font-medium",children:i("admin.payments.metrics.total_revenue","Total Revenue")}),L.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"})]}),L.jsxs(ne,{children:[L.jsx("div",{className:"text-2xl font-bold",children:ce(fa.totalRevenue)}),L.jsxs("p",{className:"text-xs text-muted-foreground",children:[i("admin.payments.metrics.yearly_revenue","Yearly"),": ",ce(fa.yearlyRevenue)]})]})]}),L.jsxs(H,{children:[L.jsxs(Q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[L.jsx(Y,{className:"text-sm font-medium",children:i("admin.payments.metrics.monthly_revenue","Monthly Revenue")}),L.jsx(We,{className:"h-4 w-4 text-muted-foreground"})]}),L.jsxs(ne,{children:[L.jsx("div",{className:"text-2xl font-bold",children:ce(fa.monthlyRevenue)}),L.jsxs("p",{className:"text-xs text-muted-foreground",children:[fa.monthlyGrowth>=0?"+":"",fa.monthlyGrowth.toFixed(1),"% ",i("admin.payments.metrics.monthly_growth","from last month")]})]})]}),L.jsxs(H,{children:[L.jsxs(Q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[L.jsx(Y,{className:"text-sm font-medium",children:i("admin.payments.metrics.active_subscriptions","Active Subscriptions")}),L.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"})]}),L.jsxs(ne,{children:[L.jsx("div",{className:"text-2xl font-bold",children:fa.activeSubscriptions}),L.jsxs("p",{className:"text-xs text-muted-foreground",children:[i("admin.payments.metrics.payment_success_rate","Success Rate"),": ",fa.paymentSuccessRate,"%"]})]})]}),L.jsxs(H,{children:[L.jsxs(Q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[L.jsx(Y,{className:"text-sm font-medium",children:i("admin.payments.metrics.pending_payments","Pending Payments")}),L.jsx(He,{className:"h-4 w-4 text-muted-foreground"})]}),L.jsxs(ne,{children:[L.jsx("div",{className:"text-2xl font-bold",children:fa.pendingPayments}),L.jsx("p",{className:"text-xs text-muted-foreground",children:i("admin.payments.pending.description","Require attention")})]})]})]}):null;return L.jsx(B,{children:L.jsxs("div",{className:"p-6",children:[L.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4",children:[L.jsxs("div",{children:[L.jsx("h1",{className:"sm:text-2xl",children:i("admin.payments.title","Payment Management")}),L.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:i("admin.payments.description","Comprehensive payment tracking and management dashboard")})]}),L.jsxs(V,{variant:"outline",className:"w-full sm:w-auto",children:[L.jsx(q,{className:"mr-2 h-4 w-4"}),L.jsx("span",{className:"hidden sm:inline",children:i("admin.payments.export.button","Export Data")}),L.jsx("span",{className:"sm:hidden",children:i("admin.payments.export.short","Export")})]})]}),L.jsxs($,{value:c,onValueChange:o,className:"space-y-4",children:[L.jsx("div",{className:"overflow-x-auto",children:L.jsxs(G,{className:"grid w-full grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-1",children:[L.jsxs(W,{value:"dashboard",className:"text-xs sm:text-sm",children:[L.jsx("span",{className:"hidden sm:inline",children:i("admin.payments.dashboard.title","Dashboard")}),L.jsx("span",{className:"sm:hidden",children:i("admin.payments.dashboard.short","Dashboard")})]}),L.jsxs(W,{value:"transactions",className:"text-xs sm:text-sm",children:[L.jsx("span",{className:"hidden sm:inline",children:i("admin.payments.transactions.title","Transactions")}),L.jsx("span",{className:"sm:hidden",children:i("admin.payments.transactions.short","Transactions")})]}),L.jsxs(W,{value:"pending",className:"text-xs sm:text-sm",children:[L.jsx("span",{className:"hidden sm:inline",children:i("admin.payments.pending.title","Pending")}),L.jsx("span",{className:"sm:hidden",children:i("admin.payments.pending.short","Pending")})]}),L.jsxs(W,{value:"companies",className:"text-xs sm:text-sm",children:[L.jsx("span",{className:"hidden sm:inline",children:i("admin.payments.companies.title","Companies")}),L.jsx("span",{className:"sm:hidden",children:i("admin.payments.companies.short","Companies")})]}),L.jsxs(W,{value:"performance",className:"text-xs sm:text-sm",children:[L.jsx("span",{className:"hidden sm:inline",children:i("admin.payments.performance.title","Performance")}),L.jsx("span",{className:"sm:hidden",children:i("admin.payments.performance.short","Performance")})]})]})}),L.jsxs(U,{value:"dashboard",className:"space-y-4",children:[L.jsx(Ra,{}),L.jsxs(H,{children:[L.jsxs(Q,{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[L.jsxs("div",{children:[L.jsx(Y,{className:"text-lg sm:text-xl",children:i("admin.payments.trends.title","Payment Trends")}),L.jsx(J,{className:"text-sm",children:"Revenue and transaction trends over time"})]}),L.jsxs(X,{value:v,onValueChange:g,children:[L.jsx(Z,{className:"w-full sm:w-[180px]",children:L.jsx(ee,{})}),L.jsxs(ae,{children:[L.jsx(te,{value:"7days",children:i("admin.payments.trends.period.7days","Last 7 Days")}),L.jsx(te,{value:"30days",children:i("admin.payments.trends.period.30days","Last 30 Days")}),L.jsx(te,{value:"12months",children:i("admin.payments.trends.period.12months","Last 12 Months")})]})]})]}),L.jsx(ne,{children:Na?L.jsx("div",{className:"h-[300px] sm:h-[400px] flex items-center justify-center",children:L.jsx(se,{className:"h-8 w-8 animate-spin"})}):ba&&ba.length>0?L.jsx("div",{className:"h-[300px] sm:h-[400px]",children:L.jsx(ie,{width:"100%",height:"100%",children:L.jsxs(Fa,{data:ba,margin:{top:20,right:30,left:20,bottom:5},children:[L.jsx(re,{strokeDasharray:"3 3"}),L.jsx(_,{dataKey:"period",fontSize:12,tick:{fontSize:12}}),L.jsx(T,{yAxisId:"left",fontSize:12,tick:{fontSize:12}}),L.jsx(T,{yAxisId:"right",orientation:"right",fontSize:12,tick:{fontSize:12}}),L.jsx(le,{formatter:(e,a)=>["revenue"===a?ce(Number(e)):e,"revenue"===a?i("admin.payments.trends.revenue","Revenue"):i("admin.payments.trends.transactions","Transactions")],contentStyle:{fontSize:"14px"}}),L.jsx(oe,{wrapperStyle:{fontSize:"14px"}}),L.jsx(C,{yAxisId:"left",dataKey:"revenue",fill:"#8884d8",name:i("admin.payments.trends.revenue","Revenue")}),L.jsx(k,{yAxisId:"right",type:"monotone",dataKey:"transactions",stroke:"#82ca9d",strokeWidth:2,name:i("admin.payments.trends.transactions","Transactions")})]})})}):L.jsx("div",{className:"h-[300px] sm:h-[400px] flex items-center justify-center text-muted-foreground",children:"No trend data available"})})]})]}),L.jsx(U,{value:"transactions",className:"space-y-4",children:L.jsxs(H,{children:[L.jsxs(Q,{children:[L.jsx(Y,{children:i("admin.payments.transactions.title","Payment Transactions")}),L.jsx(J,{children:"View and manage all payment transactions"})]}),L.jsxs(ne,{children:[L.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[L.jsx("div",{className:"flex-1",children:L.jsx(de,{placeholder:i("admin.payments.companies.search_placeholder","Search companies..."),value:d,onChange:e=>m(e.target.value),className:"w-full sm:max-w-sm"})}),L.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[L.jsxs(X,{value:p,onValueChange:u,children:[L.jsx(Z,{className:"w-full sm:w-[180px]",children:L.jsx(ee,{placeholder:i("admin.payments.transactions.filter.all_statuses","All Statuses")})}),L.jsxs(ae,{children:[L.jsx(te,{value:"all",children:i("admin.payments.transactions.filter.all_statuses","All Statuses")}),L.jsx(te,{value:"completed",children:i("admin.payments.transactions.status.completed","Completed")}),L.jsx(te,{value:"pending",children:i("admin.payments.transactions.status.pending","Pending")}),L.jsx(te,{value:"failed",children:i("admin.payments.transactions.status.failed","Failed")}),L.jsx(te,{value:"cancelled",children:i("admin.payments.transactions.status.cancelled","Cancelled")})]})]}),L.jsxs(X,{value:h,onValueChange:y,children:[L.jsx(Z,{className:"w-full sm:w-[180px]",children:L.jsx(ee,{placeholder:i("admin.payments.transactions.filter.all_methods","All Methods")})}),L.jsxs(ae,{children:[L.jsx(te,{value:"all",children:i("admin.payments.transactions.filter.all_methods","All Methods")}),L.jsx(te,{value:"stripe",children:"Stripe"}),L.jsx(te,{value:"paypal",children:"PayPal"}),L.jsx(te,{value:"mercadopago",children:"Mercado Pago"}),L.jsx(te,{value:"bank_transfer",children:"Bank Transfer"})]})]})]})]}),ga?L.jsx("div",{className:"flex items-center justify-center py-8",children:L.jsx(se,{className:"h-8 w-8 animate-spin"})}):L.jsx("div",{className:"overflow-x-auto",children:L.jsxs(me,{children:[L.jsx(pe,{children:L.jsxs(ue,{children:[L.jsx(xe,{className:"min-w-[80px]",children:i("admin.payments.transactions.table.id","ID")}),L.jsx(xe,{className:"min-w-[150px]",children:i("admin.payments.transactions.table.company","Company")}),L.jsx(xe,{className:"min-w-[120px]",children:i("admin.payments.transactions.table.plan","Plan")}),L.jsx(xe,{className:"min-w-[100px]",children:i("admin.payments.transactions.table.amount","Amount")}),L.jsx(xe,{className:"min-w-[100px]",children:i("admin.payments.transactions.table.method","Method")}),L.jsx(xe,{className:"min-w-[100px]",children:i("admin.payments.transactions.table.status","Status")}),L.jsx(xe,{className:"min-w-[120px]",children:i("admin.payments.transactions.table.date","Date")}),L.jsx(xe,{className:"min-w-[200px]",children:i("admin.payments.transactions.table.actions","Actions")})]})}),L.jsx(he,{children:null==va?void 0:va.data.map((e=>L.jsxs(ue,{children:[L.jsx(ye,{className:"font-mono text-sm",children:e.id}),L.jsx(ye,{className:"font-medium",children:e.companyName}),L.jsx(ye,{children:e.planName}),L.jsx(ye,{className:"font-medium",children:ce(e.amount)}),L.jsx(ye,{className:"capitalize",children:e.paymentMethod}),L.jsx(ye,{children:za(e.status)}),L.jsx(ye,{className:"text-sm",children:fe(e.createdAt)}),L.jsx(ye,{children:L.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2",children:[L.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>Ma(e),className:"justify-start sm:justify-center",children:[L.jsx(je,{className:"mr-1 h-3 w-3"}),L.jsx("span",{className:"hidden sm:inline",children:i("admin.payments.actions.view_details","View Details")}),L.jsx("span",{className:"sm:hidden",children:i("admin.payments.actions.view","View")})]}),L.jsxs(V,{variant:"outline",size:"sm",onClick:()=>(e=>{var a;ra(e),ya({status:e.status,paymentMethod:e.paymentMethod,amount:e.amount.toString(),notes:e.notes||(null==(a=e.metadata)?void 0:a.notes)||"",externalTransactionId:e.externalTransactionId||""}),ea(!0)})(e),className:"justify-start sm:justify-center",children:[L.jsx(ve,{className:"mr-1 h-3 w-3"}),L.jsx("span",{className:"hidden sm:inline",children:i("admin.payments.actions.edit_payment","Edit Payment")}),L.jsx("span",{className:"sm:hidden",children:i("admin.payments.actions.edit","Edit")})]})]})})]},e.id)))})]})}),va&&va.totalPages>1&&L.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-4 gap-4",children:[L.jsxs("div",{className:"text-sm text-muted-foreground",children:[i("admin.payments.pagination.showing","Showing")," ",20*(f-1)+1," ",i("admin.payments.pagination.to","to")," ",Math.min(20*f,va.total)," ",i("admin.payments.pagination.of","of")," ",va.total," ",i("admin.payments.pagination.records","records")]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(V,{variant:"outline",size:"sm",onClick:()=>j(Math.max(1,f-1)),disabled:1===f,className:"min-w-[80px]",children:i("admin.payments.pagination.previous","Previous")}),L.jsx("div",{className:"flex items-center gap-1",children:L.jsxs("span",{className:"text-sm text-muted-foreground",children:[i("admin.payments.pagination.page","Page")," ",f," ",i("admin.payments.pagination.of","of")," ",va.totalPages]})}),L.jsx(V,{variant:"outline",size:"sm",onClick:()=>j(Math.min(va.totalPages,f+1)),disabled:f===va.totalPages,className:"min-w-[80px]",children:i("admin.payments.pagination.next","Next")})]})]})]})]})}),L.jsx(U,{value:"pending",className:"space-y-4",children:L.jsxs(H,{children:[L.jsxs(Q,{children:[L.jsx(Y,{children:i("admin.payments.pending.title","Pending Payments")}),L.jsx(J,{children:i("admin.payments.pending.description","Manage overdue and pending payments")})]}),L.jsx(ne,{children:Pa?L.jsx("div",{className:"flex items-center justify-center py-8",children:L.jsx(se,{className:"h-8 w-8 animate-spin"})}):(null==wa?void 0:wa.data)&&wa.data.length>0?L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"overflow-x-auto",children:L.jsxs(me,{children:[L.jsx(pe,{children:L.jsxs(ue,{children:[L.jsx(xe,{className:"min-w-[150px]",children:i("admin.payments.pending.table.company","Company")}),L.jsx(xe,{className:"min-w-[120px]",children:i("admin.payments.pending.table.plan","Plan")}),L.jsx(xe,{className:"min-w-[100px]",children:i("admin.payments.pending.table.amount","Amount")}),L.jsx(xe,{className:"min-w-[120px]",children:i("admin.payments.pending.table.days_overdue","Days Overdue")}),L.jsx(xe,{className:"min-w-[100px]",children:i("admin.payments.pending.table.method","Method")}),L.jsx(xe,{className:"min-w-[250px]",children:i("admin.payments.pending.table.actions","Actions")})]})}),L.jsx(he,{children:wa.data.map((e=>L.jsxs(ue,{children:[L.jsx(ye,{className:"font-medium",children:e.companyName}),L.jsx(ye,{children:e.planName}),L.jsx(ye,{className:"font-medium",children:ce(e.amount)}),L.jsx(ye,{children:L.jsxs(ge,{variant:e.daysOverdue>30?"destructive":e.daysOverdue>7?"secondary":"outline",children:[e.daysOverdue," days"]})}),L.jsx(ye,{className:"capitalize",children:e.paymentMethod}),L.jsx(ye,{children:L.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2",children:[L.jsxs(V,{variant:"outline",size:"sm",onClick:()=>_a.mutate({transactionId:e.id}),disabled:_a.isPending,className:"justify-start sm:justify-center text-xs sm:text-sm",children:[L.jsx(be,{className:"mr-1 h-3 w-3"}),L.jsx("span",{className:"hidden sm:inline",children:i("admin.payments.actions.mark_received","Mark as Received")}),L.jsx("span",{className:"sm:hidden",children:i("admin.payments.actions.mark","Mark")})]}),L.jsxs(V,{variant:"outline",size:"sm",onClick:()=>{Ye(e.companyId),I(!0)},className:"justify-start sm:justify-center text-xs sm:text-sm",children:[L.jsx(Ne,{className:"mr-1 h-3 w-3"}),L.jsx("span",{className:"hidden sm:inline",children:i("admin.payments.actions.send_reminder","Send Reminder")}),L.jsx("span",{className:"sm:hidden",children:i("admin.payments.actions.remind","Remind")})]})]})})]},e.id)))})]})}),wa.totalPages>1&&L.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-4 gap-4",children:[L.jsxs("div",{className:"text-sm text-muted-foreground",children:[i("admin.payments.pagination.showing","Showing")," ",20*(S-1)+1," ",i("admin.payments.pagination.to","to")," ",Math.min(20*S,wa.total)," ",i("admin.payments.pagination.of","of")," ",wa.total," ",i("admin.payments.pagination.records","records")]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(V,{variant:"outline",size:"sm",onClick:()=>A(Math.max(1,S-1)),disabled:1===S,className:"min-w-[80px]",children:i("admin.payments.pagination.previous","Previous")}),L.jsx("div",{className:"flex items-center gap-1",children:L.jsxs("span",{className:"text-sm text-muted-foreground",children:[i("admin.payments.pagination.page","Page")," ",S," ",i("admin.payments.pagination.of","of")," ",wa.totalPages]})}),L.jsx(V,{variant:"outline",size:"sm",onClick:()=>A(Math.min(wa.totalPages,S+1)),disabled:S===wa.totalPages,className:"min-w-[80px]",children:i("admin.payments.pagination.next","Next")})]})]})]}):L.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No pending payments found"})})]})}),L.jsx(U,{value:"companies",className:"space-y-4",children:L.jsxs(H,{children:[L.jsxs(Q,{children:[L.jsx(Y,{children:i("admin.payments.companies.title","Company Payment Details")}),L.jsx(J,{children:"View payment information for all companies"})]}),L.jsxs(ne,{children:[L.jsx("div",{className:"flex gap-4 mb-4",children:L.jsx("div",{className:"flex-1",children:L.jsx(de,{placeholder:i("admin.payments.companies.search_placeholder","Search companies..."),value:b,onChange:e=>N(e.target.value),className:"w-full sm:max-w-sm"})})}),Aa?L.jsx("div",{className:"flex items-center justify-center py-8",children:L.jsx(se,{className:"h-8 w-8 animate-spin"})}):Sa&&Sa.data.length>0?L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"overflow-x-auto",children:L.jsxs(me,{children:[L.jsx(pe,{children:L.jsxs(ue,{children:[L.jsx(xe,{className:"min-w-[180px]",children:i("admin.payments.companies.table.company","Company")}),L.jsx(xe,{className:"min-w-[120px]",children:i("admin.payments.companies.table.plan","Plan")}),L.jsx(xe,{className:"min-w-[100px]",children:i("admin.payments.companies.table.status","Status")}),L.jsx(xe,{className:"min-w-[140px]",children:i("admin.payments.companies.table.last_payment","Last Payment")}),L.jsx(xe,{className:"min-w-[130px]",children:i("admin.payments.companies.table.next_renewal","Next Renewal")}),L.jsx(xe,{className:"min-w-[130px]",children:i("admin.payments.companies.table.payment_method","Payment Method")}),L.jsx(xe,{className:"min-w-[100px]",children:i("admin.payments.companies.table.total_paid","Total Paid")}),L.jsx(xe,{className:"min-w-[120px]",children:i("admin.payments.companies.table.actions","Actions")})]})}),L.jsx(he,{children:Sa.data.map((e=>L.jsxs(ue,{children:[L.jsx(ye,{className:"font-medium",children:L.jsxs("div",{children:[L.jsx("div",{className:"font-semibold",children:e.name}),L.jsxs("div",{className:"text-xs text-muted-foreground",children:["ID: ",e.id]})]})}),L.jsx(ye,{className:"font-medium",children:e.planName}),L.jsx(ye,{children:L.jsx(ge,{variant:"active"===e.subscriptionStatus?"default":"overdue"===e.subscriptionStatus?"destructive":"pending"===e.subscriptionStatus?"secondary":"outline",children:i(`admin.payments.companies.status.${e.subscriptionStatus}`,e.subscriptionStatus)})}),L.jsx(ye,{children:e.lastPaymentDate?L.jsxs("div",{children:[L.jsx("div",{className:"text-sm font-medium",children:fe(e.lastPaymentDate)}),L.jsx("div",{className:"text-xs text-muted-foreground",children:ce(e.lastPaymentAmount)})]}):L.jsx("span",{className:"text-muted-foreground text-sm",children:"No payments"})}),L.jsx(ye,{children:e.subscriptionEndDate?L.jsxs("div",{className:"flex items-center gap-1",children:[L.jsx(we,{className:"h-3 w-3"}),L.jsx("span",{className:"text-sm",children:fe(e.subscriptionEndDate)})]}):L.jsx("span",{className:"text-muted-foreground",children:"-"})}),L.jsx(ye,{children:e.lastPaymentMethod?L.jsxs("div",{className:"flex items-center gap-1",children:[L.jsx(Pe,{className:"h-3 w-3"}),L.jsx("span",{className:"capitalize text-sm",children:e.lastPaymentMethod})]}):L.jsx("span",{className:"text-muted-foreground",children:"-"})}),L.jsx(ye,{className:"font-medium",children:ce(e.totalPaid)}),L.jsx(ye,{children:L.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>(e=>{ca(e),sa(!0)})(e),className:"text-xs sm:text-sm",children:[L.jsx(je,{className:"mr-1 h-3 w-3"}),L.jsx("span",{className:"hidden sm:inline",children:i("admin.payments.actions.view_details","View Details")}),L.jsx("span",{className:"sm:hidden",children:i("admin.payments.actions.view","View")})]})})]},e.id)))})]})}),L.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-4 gap-4",children:[L.jsxs("div",{className:"text-sm text-muted-foreground",children:[i("admin.payments.pagination.showing","Showing")," ",20*(w-1)+1," ",i("admin.payments.pagination.to","to")," ",Math.min(20*w,Sa.total)," ",i("admin.payments.pagination.of","of")," ",Sa.total," ",i("admin.payments.pagination.records","records")]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(V,{variant:"outline",size:"sm",onClick:()=>P(Math.max(1,w-1)),disabled:1===w,className:"min-w-[80px]",children:i("admin.payments.pagination.previous","Previous")}),L.jsx("div",{className:"flex items-center gap-1",children:L.jsxs("span",{className:"text-sm text-muted-foreground",children:[i("admin.payments.pagination.page","Page")," ",w," ",i("admin.payments.pagination.of","of")," ",Sa.totalPages]})}),L.jsx(V,{variant:"outline",size:"sm",onClick:()=>P(w+1),disabled:w>=Sa.totalPages,className:"min-w-[80px]",children:i("admin.payments.pagination.next","Next")})]})]})]}):L.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No companies found"})]})]})}),L.jsx(U,{value:"performance",className:"space-y-4",children:L.jsxs(H,{children:[L.jsxs(Q,{children:[L.jsx(Y,{children:i("admin.payments.performance.title","Payment Method Performance")}),L.jsx(J,{children:"Analyze performance across different payment methods"})]}),L.jsx(ne,{children:Ea?L.jsx("div",{className:"flex items-center justify-center py-8",children:L.jsx(se,{className:"h-8 w-8 animate-spin"})}):Oa&&Oa.length>0?L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 mb-6",children:Oa.map((e=>L.jsxs(H,{children:[L.jsx(Q,{className:"pb-2",children:L.jsx(Y,{className:"text-sm font-medium capitalize",children:e.paymentMethod})}),L.jsxs(ne,{children:[L.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:[e.successRate.toFixed(1),"%"]}),L.jsx("p",{className:"text-xs text-muted-foreground",children:"Success Rate"}),L.jsxs("div",{className:"mt-2 text-xs sm:text-sm",children:[L.jsx("div",{className:"font-medium",children:ce(e.totalRevenue)}),L.jsxs("div",{className:"text-muted-foreground",children:[e.totalTransactions," transactions"]})]})]})]},e.paymentMethod)))}),L.jsx("div",{className:"overflow-x-auto",children:L.jsxs(me,{children:[L.jsx(pe,{children:L.jsxs(ue,{children:[L.jsx(xe,{className:"min-w-[140px]",children:i("admin.payments.performance.table.method","Payment Method")}),L.jsx(xe,{className:"min-w-[140px]",children:i("admin.payments.performance.table.transactions","Total Transactions")}),L.jsx(xe,{className:"min-w-[160px]",children:i("admin.payments.performance.table.success_rate","Success Rate")}),L.jsx(xe,{className:"min-w-[120px]",children:i("admin.payments.performance.table.revenue","Total Revenue")}),L.jsx(xe,{className:"min-w-[120px]",children:i("admin.payments.performance.table.avg_amount","Average Amount")})]})}),L.jsx(he,{children:Oa.map((e=>L.jsxs(ue,{children:[L.jsx(ye,{className:"font-medium capitalize",children:L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(Pe,{className:"h-4 w-4"}),L.jsx("span",{className:"text-sm sm:text-base",children:e.paymentMethod})]})}),L.jsx(ye,{children:L.jsxs("div",{children:[L.jsx("div",{className:"font-medium text-sm sm:text-base",children:e.totalTransactions}),L.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:[e.successfulTransactions," successful"]})]})}),L.jsx(ye,{children:L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("div",{className:"w-12 sm:w-16 bg-gray-200 rounded-full h-2",children:L.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${e.successRate}%`}})}),L.jsxs("span",{className:"font-medium text-sm sm:text-base",children:[e.successRate.toFixed(1),"%"]})]})}),L.jsx(ye,{className:"font-medium text-sm sm:text-base",children:ce(e.totalRevenue)}),L.jsx(ye,{className:"text-sm sm:text-base",children:ce(e.averageAmount)})]},e.paymentMethod)))})]})}),L.jsxs("div",{className:"mt-6",children:[L.jsx("h3",{className:"text-base sm:text-lg font-medium mb-4",children:"Revenue Distribution"}),L.jsx("div",{className:"h-[250px] sm:h-[300px]",children:L.jsx(ie,{width:"100%",height:"100%",children:L.jsxs(Se,{children:[L.jsx(Ae,{data:Oa,dataKey:"totalRevenue",nameKey:"paymentMethod",cx:"50%",cy:"50%",outerRadius:"60%",fill:"#8884d8",label:({paymentMethod:e,percent:a})=>window.innerWidth>=640?`${e}: ${(100*a).toFixed(0)}%`:`${(100*a).toFixed(0)}%`,labelLine:!1,children:Oa.map(((e,a)=>L.jsx(O,{fill:["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"][a%5]},`cell-${a}`)))}),L.jsx(le,{formatter:e=>ce(Number(e))})]})})})]})]}):L.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No performance data available"})})]})})]}),L.jsx(Oe,{open:Ze,onOpenChange:ea,children:L.jsxs(Ee,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[L.jsxs(ke,{children:[L.jsx(Ce,{className:"text-lg sm:text-xl",children:i("admin.payments.edit.title","Edit Payment Transaction")}),L.jsx(_e,{className:"text-sm",children:"Modify payment transaction details. Be careful when changing completed payments."})]}),L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[L.jsxs("div",{children:[L.jsx(Te,{htmlFor:"edit-status",children:i("admin.payments.edit.status","Status")}),L.jsxs(X,{value:ha.status,onValueChange:e=>ya((a=>({...a,status:e}))),children:[L.jsx(Z,{children:L.jsx(ee,{})}),L.jsxs(ae,{children:[L.jsx(te,{value:"pending",children:i("admin.payments.status.pending","Pending")}),L.jsx(te,{value:"completed",children:i("admin.payments.status.completed","Completed")}),L.jsx(te,{value:"failed",children:i("admin.payments.status.failed","Failed")}),L.jsx(te,{value:"cancelled",children:i("admin.payments.status.cancelled","Cancelled")})]})]})]}),L.jsxs("div",{children:[L.jsx(Te,{htmlFor:"edit-method",children:i("admin.payments.edit.payment_method","Payment Method")}),L.jsxs(X,{value:ha.paymentMethod,onValueChange:e=>ya((a=>({...a,paymentMethod:e}))),children:[L.jsx(Z,{children:L.jsx(ee,{})}),L.jsxs(ae,{children:[L.jsx(te,{value:"stripe",children:"Stripe"}),L.jsx(te,{value:"paypal",children:"PayPal"}),L.jsx(te,{value:"mercado_pago",children:"Mercado Pago"}),L.jsx(te,{value:"bank_transfer",children:"Bank Transfer"})]})]})]})]}),L.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[L.jsxs("div",{children:[L.jsx(Te,{htmlFor:"edit-amount",children:i("admin.payments.edit.amount","Amount")}),L.jsx(de,{id:"edit-amount",type:"number",step:"0.01",value:ha.amount,onChange:e=>ya((a=>({...a,amount:e.target.value}))),placeholder:"0.00"})]}),L.jsxs("div",{children:[L.jsx(Te,{htmlFor:"edit-external-id",children:i("admin.payments.edit.external_id","External Transaction ID")}),L.jsx(de,{id:"edit-external-id",value:ha.externalTransactionId,onChange:e=>ya((a=>({...a,externalTransactionId:e.target.value}))),placeholder:"External reference ID"})]})]}),L.jsxs("div",{children:[L.jsx(Te,{htmlFor:"edit-notes",children:i("admin.payments.edit.notes","Notes")}),L.jsx(Ie,{id:"edit-notes",value:ha.notes,onChange:e=>ya((a=>({...a,notes:e.target.value}))),placeholder:i("admin.payments.edit.notes_placeholder","Add notes about this transaction..."),rows:3})]})]}),L.jsxs(Me,{className:"flex flex-col sm:flex-row gap-2",children:[L.jsx(V,{variant:"outline",onClick:()=>ea(!1),className:"w-full sm:w-auto",children:"Cancel"}),L.jsxs(V,{onClick:()=>{if(!ia)return;const e={status:ha.status,paymentMethod:ha.paymentMethod,amount:parseFloat(ha.amount),notes:ha.notes,externalTransactionId:ha.externalTransactionId};"completed"===ia.status&&["pending","failed","cancelled"].includes(ha.status)?(xa(i("admin.payments.edit.confirm_status_change","Are you sure you want to change this completed payment back to {{status}}? This action may affect billing and should only be done to correct errors.",{status:ha.status})),pa((()=>()=>{Ia.mutate({transactionId:ia.id,updates:e}),da(!1)})),da(!0)):Ia.mutate({transactionId:ia.id,updates:e})},disabled:Ia.isPending||!ha.amount||!ha.status,className:"w-full sm:w-auto",children:[Ia.isPending?L.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):L.jsx(ve,{className:"mr-2 h-4 w-4"}),i("admin.payments.edit.save_button","Save Changes")]})]})]})}),L.jsx(Oe,{open:E,onOpenChange:I,children:L.jsxs(Ee,{children:[L.jsxs(ke,{children:[L.jsx(Ce,{children:i("admin.payments.reminders.title","Send Payment Reminder")}),L.jsx(_e,{children:"Send a payment reminder to the selected company."})]}),L.jsx("div",{className:"space-y-4",children:L.jsx(Ie,{placeholder:i("admin.payments.reminders.message_placeholder","Enter reminder message..."),value:Je,onChange:e=>Xe(e.target.value),rows:4})}),L.jsxs(Me,{children:[L.jsx(V,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),L.jsxs(V,{onClick:()=>{Qe&&Je.trim()&&Ta.mutate({companyId:Qe,message:Je.trim()})},disabled:!Je.trim()||Ta.isPending,children:[Ta.isPending?L.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):L.jsx(Ne,{className:"mr-2 h-4 w-4"}),i("admin.payments.reminders.send_button","Send Reminder")]})]})]})}),L.jsx(Oe,{open:aa,onOpenChange:ta,children:L.jsxs(Ee,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[L.jsxs(ke,{children:[L.jsx(Ce,{className:"text-lg sm:text-xl",children:i("admin.payments.view.title","Payment Transaction Details")}),L.jsxs(_e,{className:"text-sm",children:["Complete information for transaction #",null==ia?void 0:ia.id]})]}),ia&&L.jsxs("div",{className:"space-y-6",children:[L.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[L.jsxs(H,{children:[L.jsx(Q,{className:"pb-3",children:L.jsx(Y,{className:"text-lg",children:i("admin.payments.view.basic_info","Basic Information")})}),L.jsxs(ne,{className:"space-y-3",children:[L.jsxs("div",{className:"flex justify-between",children:[L.jsxs("span",{className:"text-muted-foreground",children:[i("admin.payments.view.transaction_id","Transaction ID"),":"]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("span",{className:"font-mono",children:ia.id}),L.jsx(V,{variant:"ghost",size:"sm",onClick:()=>Da(ia.id.toString()),children:L.jsx(De,{className:"h-3 w-3"})})]})]}),L.jsxs("div",{className:"flex justify-between",children:[L.jsxs("span",{className:"text-muted-foreground",children:[i("admin.payments.view.status","Status"),":"]}),L.jsx("span",{children:za(ia.status)})]}),L.jsxs("div",{className:"flex justify-between",children:[L.jsxs("span",{className:"text-muted-foreground",children:[i("admin.payments.view.amount","Amount"),":"]}),L.jsx("span",{className:"font-semibold",children:ce(ia.amount)})]}),L.jsxs("div",{className:"flex justify-between",children:[L.jsxs("span",{className:"text-muted-foreground",children:[i("admin.payments.view.payment_method","Payment Method"),":"]}),L.jsx("span",{className:"capitalize",children:ia.paymentMethod})]}),L.jsxs("div",{className:"flex justify-between",children:[L.jsxs("span",{className:"text-muted-foreground",children:[i("admin.payments.view.created_at","Created"),":"]}),L.jsx("span",{children:fe(ia.createdAt)})]}),L.jsxs("div",{className:"flex justify-between",children:[L.jsxs("span",{className:"text-muted-foreground",children:[i("admin.payments.view.updated_at","Updated"),":"]}),L.jsx("span",{children:fe(ia.updatedAt)})]})]})]}),L.jsxs(H,{children:[L.jsx(Q,{className:"pb-3",children:L.jsx(Y,{className:"text-lg",children:i("admin.payments.view.company_info","Company Information")})}),L.jsxs(ne,{className:"space-y-3",children:[L.jsxs("div",{className:"flex justify-between",children:[L.jsxs("span",{className:"text-muted-foreground",children:[i("admin.payments.view.company_id","Company ID"),":"]}),L.jsx("span",{className:"font-mono",children:ia.companyId})]}),L.jsxs("div",{className:"flex justify-between",children:[L.jsxs("span",{className:"text-muted-foreground",children:[i("admin.payments.view.company_name","Company Name"),":"]}),L.jsx("span",{className:"font-medium",children:ia.companyName})]}),L.jsxs("div",{className:"flex justify-between",children:[L.jsxs("span",{className:"text-muted-foreground",children:[i("admin.payments.view.plan_id","Plan ID"),":"]}),L.jsx("span",{className:"font-mono",children:ia.planId})]}),L.jsxs("div",{className:"flex justify-between",children:[L.jsxs("span",{className:"text-muted-foreground",children:[i("admin.payments.view.plan_name","Plan Name"),":"]}),L.jsx("span",{className:"font-medium",children:ia.planName})]})]})]})]}),(ia.paymentIntentId||ia.externalTransactionId||ia.metadata)&&L.jsxs(H,{children:[L.jsx(Q,{className:"pb-3",children:L.jsx(Y,{className:"text-lg",children:i("admin.payments.view.payment_details","Payment Method Details")})}),L.jsxs(ne,{className:"space-y-3",children:[ia.paymentIntentId&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-muted-foreground",children:"stripe"===ia.paymentMethod?"Stripe Payment Intent ID:":"Payment Intent ID:"}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("span",{className:"font-mono text-sm",children:ia.paymentIntentId}),L.jsx(V,{variant:"ghost",size:"sm",onClick:()=>Da(ia.paymentIntentId),children:L.jsx(De,{className:"h-3 w-3"})})]})]}),ia.externalTransactionId&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-muted-foreground",children:"External Transaction ID:"}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("span",{className:"font-mono text-sm",children:ia.externalTransactionId}),L.jsx(V,{variant:"ghost",size:"sm",onClick:()=>Da(ia.externalTransactionId),children:L.jsx(De,{className:"h-3 w-3"})})]})]}),(null==(e=ia.metadata)?void 0:e.reference)&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-muted-foreground",children:"Reference:"}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("span",{className:"font-mono text-sm",children:ia.metadata.reference}),L.jsx(V,{variant:"ghost",size:"sm",onClick:()=>Da(ia.metadata.reference),children:L.jsx(De,{className:"h-3 w-3"})})]})]}),(null==(a=ia.metadata)?void 0:a.paypalTransactionId)&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-muted-foreground",children:"PayPal Transaction ID:"}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("span",{className:"font-mono text-sm",children:ia.metadata.paypalTransactionId}),L.jsx(V,{variant:"ghost",size:"sm",onClick:()=>Da(ia.metadata.paypalTransactionId),children:L.jsx(De,{className:"h-3 w-3"})})]})]})]})]}),(ia.notes||(null==(t=ia.metadata)?void 0:t.notes))&&L.jsxs(H,{children:[L.jsx(Q,{className:"pb-3",children:L.jsx(Y,{className:"text-lg",children:i("admin.payments.view.notes","Notes")})}),L.jsx(ne,{children:L.jsx("p",{className:"text-sm whitespace-pre-wrap",children:ia.notes||(null==(n=ia.metadata)?void 0:n.notes)})})]})]}),L.jsx(Me,{children:L.jsx(V,{variant:"outline",onClick:()=>ta(!1),children:"Close"})})]})}),L.jsx(Fe,{open:oa,onOpenChange:da,children:L.jsxs(ze,{children:[L.jsxs(Re,{children:[L.jsx(Ke,{children:i("admin.payments.confirm.title","Confirm Action")}),L.jsx(Le,{children:ua})]}),L.jsxs(Be,{children:[L.jsx(Ve,{onClick:()=>da(!1),children:"Cancel"}),L.jsx(qe,{onClick:()=>ma&&ma(),children:"Continue"})]})]})}),L.jsx(Oe,{open:na,onOpenChange:sa,children:L.jsxs(Ee,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[L.jsxs(ke,{children:[L.jsx(Ce,{className:"text-xl font-semibold",children:i("admin.payments.company_view.title","Company Payment Details")}),L.jsx(_e,{children:i("admin.payments.company_view.description","Comprehensive payment information for this company")})]}),la&&L.jsxs("div",{className:"space-y-6",children:[L.jsxs(H,{children:[L.jsx(Q,{className:"pb-3",children:L.jsx(Y,{className:"text-lg",children:i("admin.payments.company_view.company_info","Company Information")})}),L.jsx(ne,{className:"space-y-3",children:L.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Company Name:"}),L.jsx("p",{className:"text-sm font-semibold",children:la.name})]}),L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Company ID:"}),L.jsx("p",{className:"text-sm font-mono",children:la.id})]}),L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Member Since:"}),L.jsx("p",{className:"text-sm",children:fe(la.createdAt)})]}),L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Current Plan:"}),L.jsx("p",{className:"text-sm font-semibold",children:la.planName})]})]})})]}),L.jsxs(H,{children:[L.jsx(Q,{className:"pb-3",children:L.jsx(Y,{className:"text-lg",children:i("admin.payments.company_view.subscription","Subscription Details")})}),L.jsx(ne,{className:"space-y-3",children:L.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Status:"}),L.jsx("div",{className:"mt-1",children:L.jsx(ge,{variant:"active"===la.subscriptionStatus?"default":"pending"===la.subscriptionStatus?"secondary":"overdue"===la.subscriptionStatus?"destructive":"outline",children:la.subscriptionStatus})})]}),L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Next Renewal:"}),L.jsx("p",{className:"text-sm",children:la.subscriptionEndDate?fe(la.subscriptionEndDate):"No renewal date set"})]})]})})]}),L.jsxs(H,{children:[L.jsx(Q,{className:"pb-3",children:L.jsx(Y,{className:"text-lg",children:i("admin.payments.company_view.payment_summary","Payment Summary")})}),L.jsx(ne,{className:"space-y-3",children:L.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Paid:"}),L.jsx("p",{className:"text-lg font-bold text-green-600",children:ce(la.totalPaid)})]}),L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Last Payment:"}),L.jsxs("div",{className:"space-y-1",children:[L.jsx("p",{className:"text-sm font-semibold",children:la.lastPaymentAmount>0?ce(la.lastPaymentAmount):"No payments yet"}),la.lastPaymentDate&&L.jsx("p",{className:"text-xs text-muted-foreground",children:fe(la.lastPaymentDate)})]})]}),L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Payment Method:"}),L.jsx("p",{className:"text-sm",children:la.lastPaymentMethod?la.lastPaymentMethod.replace("_"," ").toUpperCase():"No payment method on file"})]})]})})]}),L.jsxs(H,{children:[L.jsx(Q,{className:"pb-3",children:L.jsx(Y,{className:"text-lg",children:i("admin.payments.company_view.transactions","Payment Transactions")})}),L.jsx(ne,{children:Ca?L.jsx("div",{className:"flex items-center justify-center py-4",children:L.jsx(se,{className:"h-6 w-6 animate-spin"})}):ka&&ka.length>0?L.jsxs("div",{className:"space-y-3",children:[ka.slice(0,5).map((e=>L.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[L.jsxs("div",{className:"flex-1",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(ge,{variant:"completed"===e.status?"default":"pending"===e.status?"secondary":"failed"===e.status?"destructive":"outline",children:e.status}),L.jsx("span",{className:"text-sm font-medium",children:ce(e.amount)}),L.jsx("span",{className:"text-xs text-muted-foreground",children:e.paymentMethod.replace("_"," ").toUpperCase()})]}),L.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:fe(e.createdAt)})]}),L.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{sa(!1),Ma(e)},children:L.jsx(je,{className:"h-3 w-3"})})]},e.id))),ka.length>5&&L.jsxs("p",{className:"text-xs text-muted-foreground text-center pt-2",children:["Showing 5 of ",ka.length," transactions"]})]}):L.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No payment transactions found for this company."})})]})]}),L.jsx(Me,{children:L.jsx(V,{variant:"outline",onClick:()=>sa(!1),children:i("common.close","Close")})})]})})]})})}export{za as default};
