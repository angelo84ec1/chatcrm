const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BVsAeSNs.js","assets/database-uG8WPzWh.js","assets/index-BBtvncPy.js"])))=>i.map(i=>d[i]);
var e,t,n,a,r,s,i,o,l,c,d,u,f,m,p,h,g,x,y,v,b,w,j,N,C,S,k,M,_,I,A,E,L,T,D,P,O,R,z,F,B,U,W,G,V,H,q,$,Y,Q,K,J,Z,X,ee,te,ne,ae,re,se,ie,oe,le,ce,de,ue,fe,me,pe,he,ge,xe,ye,ve,be,we,je,Ne,Ce,Se,ke,Me,_e,Ie,Ae,Ee,Le,Te,De,Pe,Oe,Re,ze,Fe,Be,Ue,We,Ge,Ve,He,qe,$e,Ye,Qe,Ke,Je,Ze,Xe,et,tt,nt,at,rt,st,it,ot,lt,ct,dt,ut,ft,mt,pt,ht,gt,xt,yt,vt,bt,wt,jt,Nt,Ct,St,kt,Mt,_t,It,At,Et,Lt,Tt,Dt,Pt,Ot,Rt,zt,Ft,Bt,Ut,Wt,Gt,Vt,Ht,qt,$t,Yt,Qt,Kt,Jt,Zt,Xt,en,tn,nn,an,rn,sn,on,ln,cn,dn,un,fn,mn,pn,hn,gn,xn,yn,vn,bn,wn,jn,Nn,Cn,Sn,kn,Mn,_n,In,An,En,Ln,Tn,Dn,Pn,On,Rn,zn,Fn,Bn,Un,Wn,Gn,Vn,Hn,qn,$n,Yn,Qn,Kn,Jn,Zn,Xn,ea,ta,na,aa,ra,sa,ia,oa,la,ca,da,ua,fa,ma,pa,ha,ga,xa,ya,va,ba,wa,ja,Na,Ca,Sa,ka,Ma,_a,Ia,Aa,Ea,La,Ta,Da,Pa,Oa,Ra,za,Fa,Ba,Ua,Wa,Ga,Va,Ha,qa,$a,Ya,Qa,Ka,Ja,Za,Xa,er,tr,nr,ar,rr,sr,ir,or,lr,cr,dr,ur,fr,mr=Object.defineProperty,pr=e=>{throw TypeError(e)},hr=(e,t,n)=>((e,t,n)=>t in e?mr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),gr=(e,t,n)=>t.has(e)||pr("Cannot "+n),xr=(e,t,n)=>(gr(e,t,"read from private field"),n?n.call(e):t.get(e)),yr=(e,t,n)=>t.has(e)?pr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),vr=(e,t,n,a)=>(gr(e,t,"write to private field"),a?a.call(e,n):t.set(e,n),n),br=(e,t,n)=>(gr(e,t,"access private method"),n),wr=(e,t,n,a)=>({set _(a){vr(e,t,a,n)},get _(){return xr(e,t,a)}});function jr(e,t){for(var n=0;n<t.length;n++){const a=t[n];if("string"!=typeof a&&!Array.isArray(a))for(const t in a)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(a,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>a[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Nr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Cr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sr={exports:{}},kr={},Mr={exports:{}},_r={},Ir=Symbol.for("react.element"),Ar=Symbol.for("react.portal"),Er=Symbol.for("react.fragment"),Lr=Symbol.for("react.strict_mode"),Tr=Symbol.for("react.profiler"),Dr=Symbol.for("react.provider"),Pr=Symbol.for("react.context"),Or=Symbol.for("react.forward_ref"),Rr=Symbol.for("react.suspense"),zr=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),Br=Symbol.iterator;var Ur={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wr=Object.assign,Gr={};function Vr(e,t,n){this.props=e,this.context=t,this.refs=Gr,this.updater=n||Ur}function Hr(){}function qr(e,t,n){this.props=e,this.context=t,this.refs=Gr,this.updater=n||Ur}Vr.prototype.isReactComponent={},Vr.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},Vr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},Hr.prototype=Vr.prototype;var $r=qr.prototype=new Hr;$r.constructor=qr,Wr($r,Vr.prototype),$r.isPureReactComponent=!0;var Yr=Array.isArray,Qr=Object.prototype.hasOwnProperty,Kr={current:null},Jr={key:!0,ref:!0,__self:!0,__source:!0};function Zr(e,t,n){var a,r={},s=null,i=null;if(null!=t)for(a in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(s=""+t.key),t)Qr.call(t,a)&&!Jr.hasOwnProperty(a)&&(r[a]=t[a]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(a in o=e.defaultProps)void 0===r[a]&&(r[a]=o[a]);return{$$typeof:Ir,type:e,key:s,ref:i,props:r,_owner:Kr.current}}function Xr(e){return"object"==typeof e&&null!==e&&e.$$typeof===Ir}var es=/\/+/g;function ts(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function ns(e,t,n,a,r){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var i=!1;if(null===e)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ir:case Ar:i=!0}}if(i)return r=r(i=e),e=""===a?"."+ts(i,0):a,Yr(r)?(n="",null!=e&&(n=e.replace(es,"$&/")+"/"),ns(r,t,n,"",(function(e){return e}))):null!=r&&(Xr(r)&&(r=function(e,t){return{$$typeof:Ir,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(r,n+(!r.key||i&&i.key===r.key?"":(""+r.key).replace(es,"$&/")+"/")+e)),t.push(r)),1;if(i=0,a=""===a?".":a+":",Yr(e))for(var o=0;o<e.length;o++){var l=a+ts(s=e[o],o);i+=ns(s,t,n,l,r)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Br&&e[Br]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),o=0;!(s=e.next()).done;)i+=ns(s=s.value,t,n,l=a+ts(s,o++),r);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function as(e,t,n){if(null==e)return e;var a=[],r=0;return ns(e,a,"","",(function(e){return t.call(n,e,r++)})),a}function rs(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var ss={current:null},is={transition:null},os={ReactCurrentDispatcher:ss,ReactCurrentBatchConfig:is,ReactCurrentOwner:Kr};function ls(){throw Error("act(...) is not supported in production builds of React.")}_r.Children={map:as,forEach:function(e,t,n){as(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return as(e,(function(){t++})),t},toArray:function(e){return as(e,(function(e){return e}))||[]},only:function(e){if(!Xr(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},_r.Component=Vr,_r.Fragment=Er,_r.Profiler=Tr,_r.PureComponent=qr,_r.StrictMode=Lr,_r.Suspense=Rr,_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=os,_r.act=ls,_r.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=Wr({},e.props),r=e.key,s=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,i=Kr.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Qr.call(t,l)&&!Jr.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];a.children=o}return{$$typeof:Ir,type:e.type,key:r,ref:s,props:a,_owner:i}},_r.createContext=function(e){return(e={$$typeof:Pr,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:Dr,_context:e},e.Consumer=e},_r.createElement=Zr,_r.createFactory=function(e){var t=Zr.bind(null,e);return t.type=e,t},_r.createRef=function(){return{current:null}},_r.forwardRef=function(e){return{$$typeof:Or,render:e}},_r.isValidElement=Xr,_r.lazy=function(e){return{$$typeof:Fr,_payload:{_status:-1,_result:e},_init:rs}},_r.memo=function(e,t){return{$$typeof:zr,type:e,compare:void 0===t?null:t}},_r.startTransition=function(e){var t=is.transition;is.transition={};try{e()}finally{is.transition=t}},_r.unstable_act=ls,_r.useCallback=function(e,t){return ss.current.useCallback(e,t)},_r.useContext=function(e){return ss.current.useContext(e)},_r.useDebugValue=function(){},_r.useDeferredValue=function(e){return ss.current.useDeferredValue(e)},_r.useEffect=function(e,t){return ss.current.useEffect(e,t)},_r.useId=function(){return ss.current.useId()},_r.useImperativeHandle=function(e,t,n){return ss.current.useImperativeHandle(e,t,n)},_r.useInsertionEffect=function(e,t){return ss.current.useInsertionEffect(e,t)},_r.useLayoutEffect=function(e,t){return ss.current.useLayoutEffect(e,t)},_r.useMemo=function(e,t){return ss.current.useMemo(e,t)},_r.useReducer=function(e,t,n){return ss.current.useReducer(e,t,n)},_r.useRef=function(e){return ss.current.useRef(e)},_r.useState=function(e){return ss.current.useState(e)},_r.useSyncExternalStore=function(e,t,n){return ss.current.useSyncExternalStore(e,t,n)},_r.useTransition=function(){return ss.current.useTransition()},_r.version="18.3.1",Mr.exports=_r;var cs=Mr.exports;const ds=Cr(cs),us=jr({__proto__:null,default:ds},[cs]);var fs=cs,ms=Symbol.for("react.element"),ps=Symbol.for("react.fragment"),hs=Object.prototype.hasOwnProperty,gs=fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xs={key:!0,ref:!0,__self:!0,__source:!0};function ys(e,t,n){var a,r={},s=null,i=null;for(a in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(i=t.ref),t)hs.call(t,a)&&!xs.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:ms,type:e,key:s,ref:i,props:r,_owner:gs.current}}kr.Fragment=ps,kr.jsx=ys,kr.jsxs=ys,Sr.exports=kr;var vs=Sr.exports,bs={exports:{}},ws={},js={exports:{}},Ns={};!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,s=e[a];if(!(0<r(s,t)))break e;e[a]=t,e[n]=s,n=a}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,s=e.length,i=s>>>1;a<i;){var o=2*(a+1)-1,l=e[o],c=o+1,d=e[c];if(0>r(l,n))c<s&&0>r(d,l)?(e[a]=d,e[c]=n,a=c):(e[a]=l,e[o]=n,a=o);else{if(!(c<s&&0>r(d,n)))break e;e[a]=d,e[c]=n,a=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,u=null,f=3,m=!1,p=!1,h=!1,g="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var r=n(c);null!==r;){if(null===r.callback)a(c);else{if(!(r.startTime<=e))break;a(c),r.sortIndex=r.expirationTime,t(l,r)}r=n(c)}}function b(e){if(h=!1,v(e),!p)if(null!==n(l))p=!0,L(w);else{var t=n(c);null!==t&&T(b,t.startTime-e)}}function w(t,r){p=!1,h&&(h=!1,x(S),S=-1),m=!0;var s=f;try{for(v(r),u=n(l);null!==u&&(!(u.expirationTime>r)||t&&!_());){var i=u.callback;if("function"==typeof i){u.callback=null,f=u.priorityLevel;var o=i(u.expirationTime<=r);r=e.unstable_now(),"function"==typeof o?u.callback=o:u===n(l)&&a(l),v(r)}else a(l);u=n(l)}if(null!==u)var d=!0;else{var g=n(c);null!==g&&T(b,g.startTime-r),d=!1}return d}finally{u=null,f=s,m=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,C=null,S=-1,k=5,M=-1;function _(){return!(e.unstable_now()-M<k)}function I(){if(null!==C){var t=e.unstable_now();M=t;var n=!0;try{n=C(!0,t)}finally{n?j():(N=!1,C=null)}}else N=!1}if("function"==typeof y)j=function(){y(I)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,E=A.port2;A.port1.onmessage=I,j=function(){E.postMessage(null)}}else j=function(){g(I,0)};function L(e){C=e,N||(N=!0,j())}function T(t,n){S=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,L(w))},e.unstable_forceFrameRate=function(e){0>e||125<e||(k=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(a,r,s){var i=e.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?i+s:i:s=i,a){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return a={id:d++,callback:r,priorityLevel:a,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(a.sortIndex=s,t(c,a),null===n(l)&&a===n(c)&&(h?(x(S),S=-1):h=!0,T(b,s-i))):(a.sortIndex=o,t(l,a),p||m||(p=!0,L(w))),a},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}}(Ns),js.exports=Ns;var Cs=js.exports,Ss=cs,ks=Cs;function Ms(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _s=new Set,Is={};function As(e,t){Es(e,t),Es(e+"Capture",t)}function Es(e,t){for(Is[e]=t,e=0;e<t.length;e++)_s.add(t[e])}var Ls=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Ts=Object.prototype.hasOwnProperty,Ds=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ps={},Os={};function Rs(e,t,n,a,r,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var zs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){zs[e]=new Rs(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];zs[t]=new Rs(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){zs[e]=new Rs(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){zs[e]=new Rs(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){zs[e]=new Rs(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){zs[e]=new Rs(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){zs[e]=new Rs(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){zs[e]=new Rs(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){zs[e]=new Rs(e,5,!1,e.toLowerCase(),null,!1,!1)}));var Fs=/[\-:]([a-z])/g;function Bs(e){return e[1].toUpperCase()}function Us(e,t,n,a){var r=zs.hasOwnProperty(t)?zs[t]:null;(null!==r?0!==r.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,a){if(null==t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,a)&&(n=null),a||null===r?function(e){return!!Ts.call(Os,e)||!Ts.call(Ps,e)&&(Ds.test(e)?Os[e]=!0:(Ps[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,a=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Fs,Bs);zs[t]=new Rs(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Fs,Bs);zs[t]=new Rs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Fs,Bs);zs[t]=new Rs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){zs[e]=new Rs(e,1,!1,e.toLowerCase(),null,!1,!1)})),zs.xlinkHref=new Rs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){zs[e]=new Rs(e,1,!1,e.toLowerCase(),null,!0,!0)}));var Ws=Ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gs=Symbol.for("react.element"),Vs=Symbol.for("react.portal"),Hs=Symbol.for("react.fragment"),qs=Symbol.for("react.strict_mode"),$s=Symbol.for("react.profiler"),Ys=Symbol.for("react.provider"),Qs=Symbol.for("react.context"),Ks=Symbol.for("react.forward_ref"),Js=Symbol.for("react.suspense"),Zs=Symbol.for("react.suspense_list"),Xs=Symbol.for("react.memo"),ei=Symbol.for("react.lazy"),ti=Symbol.for("react.offscreen"),ni=Symbol.iterator;function ai(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ni&&e[ni]||e["@@iterator"])?e:null}var ri,si=Object.assign;function ii(e){if(void 0===ri)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ri=t&&t[1]||""}return"\n"+ri+e}var oi=!1;function li(e,t){if(!e||oi)return"";oi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"==typeof c.stack){for(var r=c.stack.split("\n"),s=a.stack.split("\n"),i=r.length-1,o=s.length-1;1<=i&&0<=o&&r[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(r[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||r[i]!==s[o]){var l="\n"+r[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{oi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ii(e):""}function ci(e){switch(e.tag){case 5:return ii(e.type);case 16:return ii("Lazy");case 13:return ii("Suspense");case 19:return ii("SuspenseList");case 0:case 2:case 15:return e=li(e.type,!1);case 11:return e=li(e.type.render,!1);case 1:return e=li(e.type,!0);default:return""}}function di(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Hs:return"Fragment";case Vs:return"Portal";case $s:return"Profiler";case qs:return"StrictMode";case Js:return"Suspense";case Zs:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Qs:return(e.displayName||"Context")+".Consumer";case Ys:return(e._context.displayName||"Context")+".Provider";case Ks:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Xs:return null!==(t=e.displayName||null)?t:di(e.type)||"Memo";case ei:t=e._payload,e=e._init;try{return di(e(t))}catch(n){}}return null}function ui(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return di(t);case 8:return t===qs?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function fi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function mi(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pi(e){e._valueTracker||(e._valueTracker=function(e){var t=mi(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function hi(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=mi(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function gi(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function xi(e,t){var n=t.checked;return si({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function yi(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=fi(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function vi(e,t){null!=(t=t.checked)&&Us(e,"checked",t,!1)}function bi(e,t){vi(e,t);var n=fi(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ji(e,t.type,n):t.hasOwnProperty("defaultValue")&&ji(e,t.type,fi(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function wi(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ji(e,t,n){"number"===t&&gi(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ni=Array.isArray;function Ci(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+fi(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Si(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Ms(91));return si({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ki(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(Ms(92));if(Ni(n)){if(1<n.length)throw Error(Ms(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:fi(n)}}function Mi(e,t){var n=fi(t.value),a=fi(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function _i(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function Ii(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ai(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ii(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ei,Li,Ti=(Li=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Ei=Ei||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ei.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction((function(){return Li(e,t)}))}:Li);function Di(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oi=["Webkit","ms","Moz","O"];function Ri(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Pi.hasOwnProperty(e)&&Pi[e]?(""+t).trim():t+"px"}function zi(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),r=Ri(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,r):e[n]=r}}Object.keys(Pi).forEach((function(e){Oi.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pi[t]=Pi[e]}))}));var Fi=si({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bi(e,t){if(t){if(Fi[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Ms(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Ms(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ms(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(Ms(62))}}function Ui(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wi=null;function Gi(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Vi=null,Hi=null,qi=null;function $i(e){if(e=Ud(e)){if("function"!=typeof Vi)throw Error(Ms(280));var t=e.stateNode;t&&(t=Gd(t),Vi(e.stateNode,e.type,t))}}function Yi(e){Hi?qi?qi.push(e):qi=[e]:Hi=e}function Qi(){if(Hi){var e=Hi,t=qi;if(qi=Hi=null,$i(e),t)for(e=0;e<t.length;e++)$i(t[e])}}function Ki(e,t){return e(t)}function Ji(){}var Zi=!1;function Xi(e,t,n){if(Zi)return e(t,n);Zi=!0;try{return Ki(e,t,n)}finally{Zi=!1,(null!==Hi||null!==qi)&&(Ji(),Qi())}}function eo(e,t){var n=e.stateNode;if(null===n)return null;var a=Gd(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(Ms(231,t,typeof n));return n}var to=!1;if(Ls)try{var no={};Object.defineProperty(no,"passive",{get:function(){to=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch(Li){to=!1}function ao(e,t,n,a,r,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var ro=!1,so=null,io=!1,oo=null,lo={onError:function(e){ro=!0,so=e}};function co(e,t,n,a,r,s,i,o,l){ro=!1,so=null,ao.apply(lo,arguments)}function uo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function fo(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function mo(e){if(uo(e)!==e)throw Error(Ms(188))}function po(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=uo(e)))throw Error(Ms(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(a=r.return)){n=a;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return mo(r),e;if(s===a)return mo(r),t;s=s.sibling}throw Error(Ms(188))}if(n.return!==a.return)n=r,a=s;else{for(var i=!1,o=r.child;o;){if(o===n){i=!0,n=r,a=s;break}if(o===a){i=!0,a=r,n=s;break}o=o.sibling}if(!i){for(o=s.child;o;){if(o===n){i=!0,n=s,a=r;break}if(o===a){i=!0,a=s,n=r;break}o=o.sibling}if(!i)throw Error(Ms(189))}}if(n.alternate!==a)throw Error(Ms(190))}if(3!==n.tag)throw Error(Ms(188));return n.stateNode.current===n?e:t}(e))?ho(e):null}function ho(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=ho(e);if(null!==t)return t;e=e.sibling}return null}var go=ks.unstable_scheduleCallback,xo=ks.unstable_cancelCallback,yo=ks.unstable_shouldYield,vo=ks.unstable_requestPaint,bo=ks.unstable_now,wo=ks.unstable_getCurrentPriorityLevel,jo=ks.unstable_ImmediatePriority,No=ks.unstable_UserBlockingPriority,Co=ks.unstable_NormalPriority,So=ks.unstable_LowPriority,ko=ks.unstable_IdlePriority,Mo=null,_o=null;var Io=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(Ao(e)/Eo|0)|0},Ao=Math.log,Eo=Math.LN2;var Lo=64,To=4194304;function Do(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Po(e,t){var n=e.pendingLanes;if(0===n)return 0;var a=0,r=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~r;0!==o?a=Do(o):0!==(s&=i)&&(a=Do(s))}else 0!==(i=n&~r)?a=Do(i):0!==s&&(a=Do(s));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(s=t&-t)||16===r&&4194240&s))return t;if(4&a&&(a|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)r=1<<(n=31-Io(t)),a|=e[n],t&=~r;return a}function Oo(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ro(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function zo(){var e=Lo;return!(4194240&(Lo<<=1))&&(Lo=64),e}function Fo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bo(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-Io(t)]=n}function Uo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Io(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}var Wo=0;function Go(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Vo,Ho,qo,$o,Yo,Qo=!1,Ko=[],Jo=null,Zo=null,Xo=null,el=new Map,tl=new Map,nl=[],al="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rl(e,t){switch(e){case"focusin":case"focusout":Jo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":Xo=null;break;case"pointerover":case"pointerout":el.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(t.pointerId)}}function sl(e,t,n,a,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=Ud(t))&&Ho(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function il(e){var t=Bd(e.target);if(null!==t){var n=uo(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=fo(n)))return e.blockedOn=t,void Yo(e.priority,(function(){qo(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function ol(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=yl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ud(n))&&Ho(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);Wi=a,n.target.dispatchEvent(a),Wi=null,t.shift()}return!0}function ll(e,t,n){ol(e)&&n.delete(t)}function cl(){Qo=!1,null!==Jo&&ol(Jo)&&(Jo=null),null!==Zo&&ol(Zo)&&(Zo=null),null!==Xo&&ol(Xo)&&(Xo=null),el.forEach(ll),tl.forEach(ll)}function dl(e,t){e.blockedOn===t&&(e.blockedOn=null,Qo||(Qo=!0,ks.unstable_scheduleCallback(ks.unstable_NormalPriority,cl)))}function ul(e){function t(t){return dl(t,e)}if(0<Ko.length){dl(Ko[0],e);for(var n=1;n<Ko.length;n++){var a=Ko[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Jo&&dl(Jo,e),null!==Zo&&dl(Zo,e),null!==Xo&&dl(Xo,e),el.forEach(t),tl.forEach(t),n=0;n<nl.length;n++)(a=nl[n]).blockedOn===e&&(a.blockedOn=null);for(;0<nl.length&&null===(n=nl[0]).blockedOn;)il(n),null===n.blockedOn&&nl.shift()}var fl=Ws.ReactCurrentBatchConfig,ml=!0;function pl(e,t,n,a){var r=Wo,s=fl.transition;fl.transition=null;try{Wo=1,gl(e,t,n,a)}finally{Wo=r,fl.transition=s}}function hl(e,t,n,a){var r=Wo,s=fl.transition;fl.transition=null;try{Wo=4,gl(e,t,n,a)}finally{Wo=r,fl.transition=s}}function gl(e,t,n,a){if(ml){var r=yl(e,t,n,a);if(null===r)fd(e,t,a,xl,n),rl(e,a);else if(function(e,t,n,a,r){switch(t){case"focusin":return Jo=sl(Jo,e,t,n,a,r),!0;case"dragenter":return Zo=sl(Zo,e,t,n,a,r),!0;case"mouseover":return Xo=sl(Xo,e,t,n,a,r),!0;case"pointerover":var s=r.pointerId;return el.set(s,sl(el.get(s)||null,e,t,n,a,r)),!0;case"gotpointercapture":return s=r.pointerId,tl.set(s,sl(tl.get(s)||null,e,t,n,a,r)),!0}return!1}(r,e,t,n,a))a.stopPropagation();else if(rl(e,a),4&t&&-1<al.indexOf(e)){for(;null!==r;){var s=Ud(r);if(null!==s&&Vo(s),null===(s=yl(e,t,n,a))&&fd(e,t,a,xl,n),s===r)break;r=s}null!==r&&a.stopPropagation()}else fd(e,t,a,null,n)}}var xl=null;function yl(e,t,n,a){if(xl=null,null!==(e=Bd(e=Gi(a))))if(null===(t=uo(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=fo(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xl=e,null}function vl(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wo()){case jo:return 1;case No:return 4;case Co:case So:return 16;case ko:return 536870912;default:return 16}default:return 16}}var bl=null,wl=null,jl=null;function Nl(){if(jl)return jl;var e,t,n=wl,a=n.length,r="value"in bl?bl.value:bl.textContent,s=r.length;for(e=0;e<a&&n[e]===r[e];e++);var i=a-e;for(t=1;t<=i&&n[a-t]===r[s-t];t++);return jl=r.slice(e,1<t?1-t:void 0)}function Cl(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Sl(){return!0}function kl(){return!1}function Ml(e){function t(t,n,a,r,s){for(var i in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(r):r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Sl:kl,this.isPropagationStopped=kl,this}return si(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),t}var _l,Il,Al,El={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ll=Ml(El),Tl=si({},El,{view:0,detail:0}),Dl=Ml(Tl),Pl=si({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$l,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Al&&(Al&&"mousemove"===e.type?(_l=e.screenX-Al.screenX,Il=e.screenY-Al.screenY):Il=_l=0,Al=e),_l)},movementY:function(e){return"movementY"in e?e.movementY:Il}}),Ol=Ml(Pl),Rl=Ml(si({},Pl,{dataTransfer:0})),zl=Ml(si({},Tl,{relatedTarget:0})),Fl=Ml(si({},El,{animationName:0,elapsedTime:0,pseudoElement:0})),Bl=si({},El,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ul=Ml(Bl),Wl=Ml(si({},El,{data:0})),Gl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ql(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Hl[e])&&!!t[e]}function $l(){return ql}var Yl=si({},Tl,{key:function(e){if(e.key){var t=Gl[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Cl(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Vl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$l,charCode:function(e){return"keypress"===e.type?Cl(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Cl(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ql=Ml(Yl),Kl=Ml(si({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Jl=Ml(si({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$l})),Zl=Ml(si({},El,{propertyName:0,elapsedTime:0,pseudoElement:0})),Xl=si({},Pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ec=Ml(Xl),tc=[9,13,27,32],nc=Ls&&"CompositionEvent"in window,ac=null;Ls&&"documentMode"in document&&(ac=document.documentMode);var rc=Ls&&"TextEvent"in window&&!ac,sc=Ls&&(!nc||ac&&8<ac&&11>=ac),ic=String.fromCharCode(32),oc=!1;function lc(e,t){switch(e){case"keyup":return-1!==tc.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cc(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var dc=!1;var uc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!uc[e.type]:"textarea"===t}function mc(e,t,n,a){Yi(a),0<(t=pd(t,"onChange")).length&&(n=new Ll("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var pc=null,hc=null;function gc(e){id(e,0)}function xc(e){if(hi(Wd(e)))return e}function yc(e,t){if("change"===e)return t}var vc=!1;if(Ls){var bc;if(Ls){var wc="oninput"in document;if(!wc){var jc=document.createElement("div");jc.setAttribute("oninput","return;"),wc="function"==typeof jc.oninput}bc=wc}else bc=!1;vc=bc&&(!document.documentMode||9<document.documentMode)}function Nc(){pc&&(pc.detachEvent("onpropertychange",Cc),hc=pc=null)}function Cc(e){if("value"===e.propertyName&&xc(hc)){var t=[];mc(t,hc,e,Gi(e)),Xi(gc,t)}}function Sc(e,t,n){"focusin"===e?(Nc(),hc=n,(pc=t).attachEvent("onpropertychange",Cc)):"focusout"===e&&Nc()}function kc(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return xc(hc)}function Mc(e,t){if("click"===e)return xc(t)}function _c(e,t){if("input"===e||"change"===e)return xc(t)}var Ic="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Ac(e,t){if(Ic(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!Ts.call(t,r)||!Ic(e[r],t[r]))return!1}return!0}function Ec(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lc(e,t){var n,a=Ec(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ec(a)}}function Tc(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Tc(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Dc(){for(var e=window,t=gi();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=gi((e=t.contentWindow).document)}return t}function Pc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Oc(e){var t=Dc(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Tc(n.ownerDocument.documentElement,n)){if(null!==a&&Pc(n))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(a.start,r);a=void 0===a.end?s:Math.min(a.end,r),!e.extend&&s>a&&(r=a,a=s,s=r),r=Lc(n,s);var i=Lc(n,a);r&&i&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rc=Ls&&"documentMode"in document&&11>=document.documentMode,zc=null,Fc=null,Bc=null,Uc=!1;function Wc(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Uc||null==zc||zc!==gi(a)||("selectionStart"in(a=zc)&&Pc(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},Bc&&Ac(Bc,a)||(Bc=a,0<(a=pd(Fc,"onSelect")).length&&(t=new Ll("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=zc)))}function Gc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vc={animationend:Gc("Animation","AnimationEnd"),animationiteration:Gc("Animation","AnimationIteration"),animationstart:Gc("Animation","AnimationStart"),transitionend:Gc("Transition","TransitionEnd")},Hc={},qc={};function $c(e){if(Hc[e])return Hc[e];if(!Vc[e])return e;var t,n=Vc[e];for(t in n)if(n.hasOwnProperty(t)&&t in qc)return Hc[e]=n[t];return e}Ls&&(qc=document.createElement("div").style,"AnimationEvent"in window||(delete Vc.animationend.animation,delete Vc.animationiteration.animation,delete Vc.animationstart.animation),"TransitionEvent"in window||delete Vc.transitionend.transition);var Yc=$c("animationend"),Qc=$c("animationiteration"),Kc=$c("animationstart"),Jc=$c("transitionend"),Zc=new Map,Xc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ed(e,t){Zc.set(e,t),As(t,[e])}for(var td=0;td<Xc.length;td++){var nd=Xc[td];ed(nd.toLowerCase(),"on"+(nd[0].toUpperCase()+nd.slice(1)))}ed(Yc,"onAnimationEnd"),ed(Qc,"onAnimationIteration"),ed(Kc,"onAnimationStart"),ed("dblclick","onDoubleClick"),ed("focusin","onFocus"),ed("focusout","onBlur"),ed(Jc,"onTransitionEnd"),Es("onMouseEnter",["mouseout","mouseover"]),Es("onMouseLeave",["mouseout","mouseover"]),Es("onPointerEnter",["pointerout","pointerover"]),Es("onPointerLeave",["pointerout","pointerover"]),As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),As("onBeforeInput",["compositionend","keypress","textInput","paste"]),As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rd=new Set("cancel close invalid load scroll toggle".split(" ").concat(ad));function sd(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,r,s,i,o,l){if(co.apply(this,arguments),ro){if(!ro)throw Error(Ms(198));var c=so;ro=!1,so=null,io||(io=!0,oo=c)}}(a,t,void 0,e),e.currentTarget=null}function id(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var s=void 0;if(t)for(var i=a.length-1;0<=i;i--){var o=a[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;sd(r,o,c),s=l}else for(i=0;i<a.length;i++){if(l=(o=a[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;sd(r,o,c),s=l}}}if(io)throw e=oo,io=!1,oo=null,e}function od(e,t){var n=t[Rd];void 0===n&&(n=t[Rd]=new Set);var a=e+"__bubble";n.has(a)||(ud(t,e,2,!1),n.add(a))}function ld(e,t,n){var a=0;t&&(a|=4),ud(n,e,a,t)}var cd="_reactListening"+Math.random().toString(36).slice(2);function dd(e){if(!e[cd]){e[cd]=!0,_s.forEach((function(t){"selectionchange"!==t&&(rd.has(t)||ld(t,!1,e),ld(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[cd]||(t[cd]=!0,ld("selectionchange",!1,t))}}function ud(e,t,n,a){switch(vl(t)){case 1:var r=pl;break;case 4:r=hl;break;default:r=gl}n=r.bind(null,t,n,e),r=void 0,!to||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function fd(e,t,n,a,r){var s=a;if(!(1&t||2&t||null===a))e:for(;;){if(null===a)return;var i=a.tag;if(3===i||4===i){var o=a.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===i)for(i=a.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;i=i.return}for(;null!==o;){if(null===(i=Bd(o)))return;if(5===(l=i.tag)||6===l){a=s=i;continue e}o=o.parentNode}}a=a.return}Xi((function(){var a=s,r=Gi(n),i=[];e:{var o=Zc.get(e);if(void 0!==o){var l=Ll,c=e;switch(e){case"keypress":if(0===Cl(n))break e;case"keydown":case"keyup":l=Ql;break;case"focusin":c="focus",l=zl;break;case"focusout":c="blur",l=zl;break;case"beforeblur":case"afterblur":l=zl;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Rl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Jl;break;case Yc:case Qc:case Kc:l=Fl;break;case Jc:l=Zl;break;case"scroll":l=Dl;break;case"wheel":l=ec;break;case"copy":case"cut":case"paste":l=Ul;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Kl}var d=!!(4&t),u=!d&&"scroll"===e,f=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=a;null!==p;){var h=(m=p).stateNode;if(5===m.tag&&null!==h&&(m=h,null!==f&&(null!=(h=eo(p,f))&&d.push(md(p,h,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,n,r),i.push({event:o,listeners:d}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Wi||!(c=n.relatedTarget||n.fromElement)||!Bd(c)&&!c[Od])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=a,null!==(c=(c=n.relatedTarget||n.toElement)?Bd(c):null)&&(c!==(u=uo(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=a),l!==c)){if(d=Ol,h="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Kl,h="onPointerLeave",f="onPointerEnter",p="pointer"),u=null==l?o:Wd(l),m=null==c?o:Wd(c),(o=new d(h,p+"leave",l,n,r)).target=u,o.relatedTarget=m,h=null,Bd(r)===a&&((d=new d(f,p+"enter",c,n,r)).target=m,d.relatedTarget=u,h=d),u=h,l&&c)e:{for(f=c,p=0,m=d=l;m;m=hd(m))p++;for(m=0,h=f;h;h=hd(h))m++;for(;0<p-m;)d=hd(d),p--;for(;0<m-p;)f=hd(f),m--;for(;p--;){if(d===f||null!==f&&d===f.alternate)break e;d=hd(d),f=hd(f)}d=null}else d=null;null!==l&&gd(i,o,l,d,!1),null!==c&&null!==u&&gd(i,u,c,d,!0)}if("select"===(l=(o=a?Wd(a):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=yc;else if(fc(o))if(vc)g=_c;else{g=kc;var x=Sc}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=Mc);switch(g&&(g=g(e,a))?mc(i,g,n,r):(x&&x(e,o,a),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ji(o,"number",o.value)),x=a?Wd(a):window,e){case"focusin":(fc(x)||"true"===x.contentEditable)&&(zc=x,Fc=a,Bc=null);break;case"focusout":Bc=Fc=zc=null;break;case"mousedown":Uc=!0;break;case"contextmenu":case"mouseup":case"dragend":Uc=!1,Wc(i,n,r);break;case"selectionchange":if(Rc)break;case"keydown":case"keyup":Wc(i,n,r)}var y;if(nc)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else dc?lc(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(sc&&"ko"!==n.locale&&(dc||"onCompositionStart"!==v?"onCompositionEnd"===v&&dc&&(y=Nl()):(wl="value"in(bl=r)?bl.value:bl.textContent,dc=!0)),0<(x=pd(a,v)).length&&(v=new Wl(v,e,null,n,r),i.push({event:v,listeners:x}),y?v.data=y:null!==(y=cc(n))&&(v.data=y))),(y=rc?function(e,t){switch(e){case"compositionend":return cc(t);case"keypress":return 32!==t.which?null:(oc=!0,ic);case"textInput":return(e=t.data)===ic&&oc?null:e;default:return null}}(e,n):function(e,t){if(dc)return"compositionend"===e||!nc&&lc(e,t)?(e=Nl(),jl=wl=bl=null,dc=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sc&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(a=pd(a,"onBeforeInput")).length&&(r=new Wl("onBeforeInput","beforeinput",null,n,r),i.push({event:r,listeners:a}),r.data=y))}id(i,t)}))}function md(e,t,n){return{instance:e,listener:t,currentTarget:n}}function pd(e,t){for(var n=t+"Capture",a=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=eo(e,n))&&a.unshift(md(e,s,r)),null!=(s=eo(e,t))&&a.push(md(e,s,r))),e=e.return}return a}function hd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function gd(e,t,n,a,r){for(var s=t._reactName,i=[];null!==n&&n!==a;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===a)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=eo(n,s))&&i.unshift(md(n,l,o)):r||null!=(l=eo(n,s))&&i.push(md(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var xd=/\r\n?/g,yd=/\u0000|\uFFFD/g;function vd(e){return("string"==typeof e?e:""+e).replace(xd,"\n").replace(yd,"")}function bd(e,t,n){if(t=vd(t),vd(e)!==t&&n)throw Error(Ms(425))}function wd(){}var jd=null,Nd=null;function Cd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sd="function"==typeof setTimeout?setTimeout:void 0,kd="function"==typeof clearTimeout?clearTimeout:void 0,Md="function"==typeof Promise?Promise:void 0,_d="function"==typeof queueMicrotask?queueMicrotask:void 0!==Md?function(e){return Md.resolve(null).then(e).catch(Id)}:Sd;function Id(e){setTimeout((function(){throw e}))}function Ad(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===a)return e.removeChild(r),void ul(t);a--}else"$"!==n&&"$?"!==n&&"$!"!==n||a++;n=r}while(n);ul(t)}function Ed(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Ld(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Td=Math.random().toString(36).slice(2),Dd="__reactFiber$"+Td,Pd="__reactProps$"+Td,Od="__reactContainer$"+Td,Rd="__reactEvents$"+Td,zd="__reactListeners$"+Td,Fd="__reactHandles$"+Td;function Bd(e){var t=e[Dd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Od]||n[Dd]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ld(e);null!==e;){if(n=e[Dd])return n;e=Ld(e)}return t}n=(e=n).parentNode}return null}function Ud(e){return!(e=e[Dd]||e[Od])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Wd(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Ms(33))}function Gd(e){return e[Pd]||null}var Vd=[],Hd=-1;function qd(e){return{current:e}}function $d(e){0>Hd||(e.current=Vd[Hd],Vd[Hd]=null,Hd--)}function Yd(e,t){Hd++,Vd[Hd]=e.current,e.current=t}var Qd={},Kd=qd(Qd),Jd=qd(!1),Zd=Qd;function Xd(e,t){var n=e.type.contextTypes;if(!n)return Qd;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function eu(e){return null!=(e=e.childContextTypes)}function tu(){$d(Jd),$d(Kd)}function nu(e,t,n){if(Kd.current!==Qd)throw Error(Ms(168));Yd(Kd,t),Yd(Jd,n)}function au(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!=typeof a.getChildContext)return n;for(var r in a=a.getChildContext())if(!(r in t))throw Error(Ms(108,ui(e)||"Unknown",r));return si({},n,a)}function ru(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qd,Zd=Kd.current,Yd(Kd,e),Yd(Jd,Jd.current),!0}function su(e,t,n){var a=e.stateNode;if(!a)throw Error(Ms(169));n?(e=au(e,t,Zd),a.__reactInternalMemoizedMergedChildContext=e,$d(Jd),$d(Kd),Yd(Kd,e)):$d(Jd),Yd(Jd,n)}var iu=null,ou=!1,lu=!1;function cu(e){null===iu?iu=[e]:iu.push(e)}function du(){if(!lu&&null!==iu){lu=!0;var e=0,t=Wo;try{var n=iu;for(Wo=1;e<n.length;e++){var a=n[e];do{a=a(!0)}while(null!==a)}iu=null,ou=!1}catch(r){throw null!==iu&&(iu=iu.slice(e+1)),go(jo,du),r}finally{Wo=t,lu=!1}}return null}var uu=[],fu=0,mu=null,pu=0,hu=[],gu=0,xu=null,yu=1,vu="";function bu(e,t){uu[fu++]=pu,uu[fu++]=mu,mu=e,pu=t}function wu(e,t,n){hu[gu++]=yu,hu[gu++]=vu,hu[gu++]=xu,xu=e;var a=yu;e=vu;var r=32-Io(a)-1;a&=~(1<<r),n+=1;var s=32-Io(t)+r;if(30<s){var i=r-r%5;s=(a&(1<<i)-1).toString(32),a>>=i,r-=i,yu=1<<32-Io(t)+r|n<<r|a,vu=s+e}else yu=1<<s|n<<r|a,vu=e}function ju(e){null!==e.return&&(bu(e,1),wu(e,1,0))}function Nu(e){for(;e===mu;)mu=uu[--fu],uu[fu]=null,pu=uu[--fu],uu[fu]=null;for(;e===xu;)xu=hu[--gu],hu[gu]=null,vu=hu[--gu],hu[gu]=null,yu=hu[--gu],hu[gu]=null}var Cu=null,Su=null,ku=!1,Mu=null;function _u(e,t){var n=Zh(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Iu(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Cu=e,Su=Ed(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Cu=e,Su=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xu?{id:yu,overflow:vu}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Zh(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Cu=e,Su=null,!0);default:return!1}}function Au(e){return!(!(1&e.mode)||128&e.flags)}function Eu(e){if(ku){var t=Su;if(t){var n=t;if(!Iu(e,t)){if(Au(e))throw Error(Ms(418));t=Ed(n.nextSibling);var a=Cu;t&&Iu(e,t)?_u(a,n):(e.flags=-4097&e.flags|2,ku=!1,Cu=e)}}else{if(Au(e))throw Error(Ms(418));e.flags=-4097&e.flags|2,ku=!1,Cu=e}}}function Lu(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Cu=e}function Tu(e){if(e!==Cu)return!1;if(!ku)return Lu(e),ku=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Cd(e.type,e.memoizedProps)),t&&(t=Su)){if(Au(e))throw Du(),Error(Ms(418));for(;t;)_u(e,t),t=Ed(t.nextSibling)}if(Lu(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Ms(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Su=Ed(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Su=null}}else Su=Cu?Ed(e.stateNode.nextSibling):null;return!0}function Du(){for(var e=Su;e;)e=Ed(e.nextSibling)}function Pu(){Su=Cu=null,ku=!1}function Ou(e){null===Mu?Mu=[e]:Mu.push(e)}var Ru=Ws.ReactCurrentBatchConfig;function zu(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Ms(309));var a=n.stateNode}if(!a)throw Error(Ms(147,e));var r=a,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=r.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(Ms(284));if(!n._owner)throw Error(Ms(290,e))}return e}function Fu(e,t){throw e=Object.prototype.toString.call(t),Error(Ms(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bu(e){return(0,e._init)(e._payload)}function Uu(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=eg(e,t)).index=0,e.sibling=null,e}function s(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=2,n):a:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,a){return null===t||6!==t.tag?((t=rg(n,e.mode,a)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,a){var s=n.type;return s===Hs?d(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===ei&&Bu(s)===t.type)?((a=r(t,n.props)).ref=zu(e,t,n),a.return=e,a):((a=tg(n.type,n.key,n.props,null,e.mode,a)).ref=zu(e,t,n),a.return=e,a)}function c(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=sg(n,e.mode,a)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,a,s){return null===t||7!==t.tag?((t=ng(n,e.mode,a,s)).return=e,t):((t=r(t,n)).return=e,t)}function u(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=rg(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Gs:return(n=tg(t.type,t.key,t.props,null,e.mode,n)).ref=zu(e,null,t),n.return=e,n;case Vs:return(t=sg(t,e.mode,n)).return=e,t;case ei:return u(e,(0,t._init)(t._payload),n)}if(Ni(t)||ai(t))return(t=ng(t,e.mode,n,null)).return=e,t;Fu(e,t)}return null}function f(e,t,n,a){var r=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==r?null:o(e,t,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Gs:return n.key===r?l(e,t,n,a):null;case Vs:return n.key===r?c(e,t,n,a):null;case ei:return f(e,t,(r=n._init)(n._payload),a)}if(Ni(n)||ai(n))return null!==r?null:d(e,t,n,a,null);Fu(e,n)}return null}function m(e,t,n,a,r){if("string"==typeof a&&""!==a||"number"==typeof a)return o(t,e=e.get(n)||null,""+a,r);if("object"==typeof a&&null!==a){switch(a.$$typeof){case Gs:return l(t,e=e.get(null===a.key?n:a.key)||null,a,r);case Vs:return c(t,e=e.get(null===a.key?n:a.key)||null,a,r);case ei:return m(e,t,n,(0,a._init)(a._payload),r)}if(Ni(a)||ai(a))return d(t,e=e.get(n)||null,a,r,null);Fu(t,a)}return null}return function o(l,c,d,p){if("object"==typeof d&&null!==d&&d.type===Hs&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case Gs:e:{for(var h=d.key,g=c;null!==g;){if(g.key===h){if((h=d.type)===Hs){if(7===g.tag){n(l,g.sibling),(c=r(g,d.props.children)).return=l,l=c;break e}}else if(g.elementType===h||"object"==typeof h&&null!==h&&h.$$typeof===ei&&Bu(h)===g.type){n(l,g.sibling),(c=r(g,d.props)).ref=zu(l,g,d),c.return=l,l=c;break e}n(l,g);break}t(l,g),g=g.sibling}d.type===Hs?((c=ng(d.props.children,l.mode,p,d.key)).return=l,l=c):((p=tg(d.type,d.key,d.props,null,l.mode,p)).ref=zu(l,c,d),p.return=l,l=p)}return i(l);case Vs:e:{for(g=d.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(l,c.sibling),(c=r(c,d.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=sg(d,l.mode,p)).return=l,l=c}return i(l);case ei:return o(l,c,(g=d._init)(d._payload),p)}if(Ni(d))return function(r,i,o,l){for(var c=null,d=null,p=i,h=i=0,g=null;null!==p&&h<o.length;h++){p.index>h?(g=p,p=null):g=p.sibling;var x=f(r,p,o[h],l);if(null===x){null===p&&(p=g);break}e&&p&&null===x.alternate&&t(r,p),i=s(x,i,h),null===d?c=x:d.sibling=x,d=x,p=g}if(h===o.length)return n(r,p),ku&&bu(r,h),c;if(null===p){for(;h<o.length;h++)null!==(p=u(r,o[h],l))&&(i=s(p,i,h),null===d?c=p:d.sibling=p,d=p);return ku&&bu(r,h),c}for(p=a(r,p);h<o.length;h++)null!==(g=m(p,r,h,o[h],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?h:g.key),i=s(g,i,h),null===d?c=g:d.sibling=g,d=g);return e&&p.forEach((function(e){return t(r,e)})),ku&&bu(r,h),c}(l,c,d,p);if(ai(d))return function(r,i,o,l){var c=ai(o);if("function"!=typeof c)throw Error(Ms(150));if(null==(o=c.call(o)))throw Error(Ms(151));for(var d=c=null,p=i,h=i=0,g=null,x=o.next();null!==p&&!x.done;h++,x=o.next()){p.index>h?(g=p,p=null):g=p.sibling;var y=f(r,p,x.value,l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(r,p),i=s(y,i,h),null===d?c=y:d.sibling=y,d=y,p=g}if(x.done)return n(r,p),ku&&bu(r,h),c;if(null===p){for(;!x.done;h++,x=o.next())null!==(x=u(r,x.value,l))&&(i=s(x,i,h),null===d?c=x:d.sibling=x,d=x);return ku&&bu(r,h),c}for(p=a(r,p);!x.done;h++,x=o.next())null!==(x=m(p,r,h,x.value,l))&&(e&&null!==x.alternate&&p.delete(null===x.key?h:x.key),i=s(x,i,h),null===d?c=x:d.sibling=x,d=x);return e&&p.forEach((function(e){return t(r,e)})),ku&&bu(r,h),c}(l,c,d,p);Fu(l,d)}return"string"==typeof d&&""!==d||"number"==typeof d?(d=""+d,null!==c&&6===c.tag?(n(l,c.sibling),(c=r(c,d)).return=l,l=c):(n(l,c),(c=rg(d,l.mode,p)).return=l,l=c),i(l)):n(l,c)}}var Wu=Uu(!0),Gu=Uu(!1),Vu=qd(null),Hu=null,qu=null,$u=null;function Yu(){$u=qu=Hu=null}function Qu(e){var t=Vu.current;$d(Vu),e._currentValue=t}function Ku(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Ju(e,t){Hu=e,$u=qu=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Bm=!0),e.firstContext=null)}function Zu(e){var t=e._currentValue;if($u!==e)if(e={context:e,memoizedValue:t,next:null},null===qu){if(null===Hu)throw Error(Ms(308));qu=e,Hu.dependencies={lanes:0,firstContext:e}}else qu=qu.next=e;return t}var Xu=null;function ef(e){null===Xu?Xu=[e]:Xu.push(e)}function tf(e,t,n,a){var r=t.interleaved;return null===r?(n.next=n,ef(t)):(n.next=r.next,r.next=n),t.interleaved=n,nf(e,a)}function nf(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var af=!1;function rf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function of(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lf(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,2&Qp){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,nf(e,n)}return null===(r=a.interleaved)?(t.next=t,ef(a)):(t.next=r.next,r.next=t),a.interleaved=t,nf(e,n)}function cf(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Uo(e,n)}}function df(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:a.shared,effects:a.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function uf(e,t,n,a){var r=e.updateQueue;af=!1;var s=r.firstBaseUpdate,i=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=r.baseState;for(i=0,d=c=l=null,o=s;;){var f=o.lane,m=o.eventTime;if((a&f)===f){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,h=o;switch(f=t,m=n,h.tag){case 1:if("function"==typeof(p=h.payload)){u=p.call(m,u,f);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(f="function"==typeof(p=h.payload)?p.call(m,u,f):p))break e;u=si({},u,f);break e;case 2:af=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(f=r.effects)?r.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=f;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(f=o).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}if(null===d&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{i|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);ah|=i,e.lanes=i,e.memoizedState=u}}function ff(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],r=a.callback;if(null!==r){if(a.callback=null,a=n,"function"!=typeof r)throw Error(Ms(191,r));r.call(a)}}}var mf={},pf=qd(mf),hf=qd(mf),gf=qd(mf);function xf(e){if(e===mf)throw Error(Ms(174));return e}function yf(e,t){switch(Yd(gf,t),Yd(hf,e),Yd(pf,mf),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ai(null,"");break;default:t=Ai(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}$d(pf),Yd(pf,t)}function vf(){$d(pf),$d(hf),$d(gf)}function bf(e){xf(gf.current);var t=xf(pf.current),n=Ai(t,e.type);t!==n&&(Yd(hf,e),Yd(pf,n))}function wf(e){hf.current===e&&($d(pf),$d(hf))}var jf=qd(0);function Nf(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cf=[];function Sf(){for(var e=0;e<Cf.length;e++)Cf[e]._workInProgressVersionPrimary=null;Cf.length=0}var kf=Ws.ReactCurrentDispatcher,Mf=Ws.ReactCurrentBatchConfig,_f=0,If=null,Af=null,Ef=null,Lf=!1,Tf=!1,Df=0,Pf=0;function Of(){throw Error(Ms(321))}function Rf(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ic(e[n],t[n]))return!1;return!0}function zf(e,t,n,a,r,s){if(_f=s,If=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kf.current=null===e||null===e.memoizedState?wm:jm,e=n(a,r),Tf){s=0;do{if(Tf=!1,Df=0,25<=s)throw Error(Ms(301));s+=1,Ef=Af=null,t.updateQueue=null,kf.current=Nm,e=n(a,r)}while(Tf)}if(kf.current=bm,t=null!==Af&&null!==Af.next,_f=0,Ef=Af=If=null,Lf=!1,t)throw Error(Ms(300));return e}function Ff(){var e=0!==Df;return Df=0,e}function Bf(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ef?If.memoizedState=Ef=e:Ef=Ef.next=e,Ef}function Uf(){if(null===Af){var e=If.alternate;e=null!==e?e.memoizedState:null}else e=Af.next;var t=null===Ef?If.memoizedState:Ef.next;if(null!==t)Ef=t,Af=e;else{if(null===e)throw Error(Ms(310));e={memoizedState:(Af=e).memoizedState,baseState:Af.baseState,baseQueue:Af.baseQueue,queue:Af.queue,next:null},null===Ef?If.memoizedState=Ef=e:Ef=Ef.next=e}return Ef}function Wf(e,t){return"function"==typeof t?t(e):t}function Gf(e){var t=Uf(),n=t.queue;if(null===n)throw Error(Ms(311));n.lastRenderedReducer=e;var a=Af,r=a.baseQueue,s=n.pending;if(null!==s){if(null!==r){var i=r.next;r.next=s.next,s.next=i}a.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,a=a.baseState;var o=i=null,l=null,c=s;do{var d=c.lane;if((_f&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),a=c.hasEagerState?c.eagerState:e(a,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=u,i=a):l=l.next=u,If.lanes|=d,ah|=d}c=c.next}while(null!==c&&c!==s);null===l?i=a:l.next=o,Ic(a,t.memoizedState)||(Bm=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=l,n.lastRenderedState=a}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,If.lanes|=s,ah|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Vf(e){var t=Uf(),n=t.queue;if(null===n)throw Error(Ms(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var i=r=r.next;do{s=e(s,i.action),i=i.next}while(i!==r);Ic(s,t.memoizedState)||(Bm=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,a]}function Hf(){}function qf(e,t){var n=If,a=Uf(),r=t(),s=!Ic(a.memoizedState,r);if(s&&(a.memoizedState=r,Bm=!0),a=a.queue,rm(Qf.bind(null,n,a,e),[e]),a.getSnapshot!==t||s||null!==Ef&&1&Ef.memoizedState.tag){if(n.flags|=2048,Xf(9,Yf.bind(null,n,a,r,t),void 0,null),null===Kp)throw Error(Ms(349));30&_f||$f(n,t,r)}return r}function $f(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=If.updateQueue)?(t={lastEffect:null,stores:null},If.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Yf(e,t,n,a){t.value=n,t.getSnapshot=a,Kf(t)&&Jf(e)}function Qf(e,t,n){return n((function(){Kf(t)&&Jf(e)}))}function Kf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ic(e,n)}catch(a){return!0}}function Jf(e){var t=nf(e,1);null!==t&&Nh(t,e,1,-1)}function Zf(e){var t=Bf();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:e},t.queue=e,e=e.dispatch=gm.bind(null,If,e),[t.memoizedState,e]}function Xf(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=If.updateQueue)?(t={lastEffect:null,stores:null},If.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function em(){return Uf().memoizedState}function tm(e,t,n,a){var r=Bf();If.flags|=e,r.memoizedState=Xf(1|t,n,void 0,void 0===a?null:a)}function nm(e,t,n,a){var r=Uf();a=void 0===a?null:a;var s=void 0;if(null!==Af){var i=Af.memoizedState;if(s=i.destroy,null!==a&&Rf(a,i.deps))return void(r.memoizedState=Xf(t,n,s,a))}If.flags|=e,r.memoizedState=Xf(1|t,n,s,a)}function am(e,t){return tm(8390656,8,e,t)}function rm(e,t){return nm(2048,8,e,t)}function sm(e,t){return nm(4,2,e,t)}function im(e,t){return nm(4,4,e,t)}function om(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function lm(e,t,n){return n=null!=n?n.concat([e]):null,nm(4,4,om.bind(null,t,e),n)}function cm(){}function dm(e,t){var n=Uf();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&Rf(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function um(e,t){var n=Uf();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&Rf(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function fm(e,t,n){return 21&_f?(Ic(n,t)||(n=zo(),If.lanes|=n,ah|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Bm=!0),e.memoizedState=n)}function mm(e,t){var n=Wo;Wo=0!==n&&4>n?n:4,e(!0);var a=Mf.transition;Mf.transition={};try{e(!1),t()}finally{Wo=n,Mf.transition=a}}function pm(){return Uf().memoizedState}function hm(e,t,n){var a=jh(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},xm(e))ym(t,n);else if(null!==(n=tf(e,t,n,a))){Nh(n,e,a,wh()),vm(n,t,a)}}function gm(e,t,n){var a=jh(e),r={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(xm(e))ym(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(r.hasEagerState=!0,r.eagerState=o,Ic(o,i)){var l=t.interleaved;return null===l?(r.next=r,ef(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=tf(e,t,r,a))&&(Nh(n,e,a,r=wh()),vm(n,t,a))}}function xm(e){var t=e.alternate;return e===If||null!==t&&t===If}function ym(e,t){Tf=Lf=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vm(e,t,n){if(4194240&n){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Uo(e,n)}}var bm={readContext:Zu,useCallback:Of,useContext:Of,useEffect:Of,useImperativeHandle:Of,useInsertionEffect:Of,useLayoutEffect:Of,useMemo:Of,useReducer:Of,useRef:Of,useState:Of,useDebugValue:Of,useDeferredValue:Of,useTransition:Of,useMutableSource:Of,useSyncExternalStore:Of,useId:Of,unstable_isNewReconciler:!1},wm={readContext:Zu,useCallback:function(e,t){return Bf().memoizedState=[e,void 0===t?null:t],e},useContext:Zu,useEffect:am,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,tm(4194308,4,om.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tm(4194308,4,e,t)},useInsertionEffect:function(e,t){return tm(4,2,e,t)},useMemo:function(e,t){var n=Bf();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=Bf();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=hm.bind(null,If,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},Bf().memoizedState=e},useState:Zf,useDebugValue:cm,useDeferredValue:function(e){return Bf().memoizedState=e},useTransition:function(){var e=Zf(!1),t=e[0];return e=mm.bind(null,e[1]),Bf().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=If,r=Bf();if(ku){if(void 0===n)throw Error(Ms(407));n=n()}else{if(n=t(),null===Kp)throw Error(Ms(349));30&_f||$f(a,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,am(Qf.bind(null,a,s,e),[e]),a.flags|=2048,Xf(9,Yf.bind(null,a,s,n,t),void 0,null),n},useId:function(){var e=Bf(),t=Kp.identifierPrefix;if(ku){var n=vu;t=":"+t+"R"+(n=(yu&~(1<<32-Io(yu)-1)).toString(32)+n),0<(n=Df++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Pf++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jm={readContext:Zu,useCallback:dm,useContext:Zu,useEffect:rm,useImperativeHandle:lm,useInsertionEffect:sm,useLayoutEffect:im,useMemo:um,useReducer:Gf,useRef:em,useState:function(){return Gf(Wf)},useDebugValue:cm,useDeferredValue:function(e){return fm(Uf(),Af.memoizedState,e)},useTransition:function(){return[Gf(Wf)[0],Uf().memoizedState]},useMutableSource:Hf,useSyncExternalStore:qf,useId:pm,unstable_isNewReconciler:!1},Nm={readContext:Zu,useCallback:dm,useContext:Zu,useEffect:rm,useImperativeHandle:lm,useInsertionEffect:sm,useLayoutEffect:im,useMemo:um,useReducer:Vf,useRef:em,useState:function(){return Vf(Wf)},useDebugValue:cm,useDeferredValue:function(e){var t=Uf();return null===Af?t.memoizedState=e:fm(t,Af.memoizedState,e)},useTransition:function(){return[Vf(Wf)[0],Uf().memoizedState]},useMutableSource:Hf,useSyncExternalStore:qf,useId:pm,unstable_isNewReconciler:!1};function Cm(e,t){if(e&&e.defaultProps){for(var n in t=si({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function Sm(e,t,n,a){n=null==(n=n(a,t=e.memoizedState))?t:si({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var km={isMounted:function(e){return!!(e=e._reactInternals)&&uo(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=wh(),r=jh(e),s=of(a,r);s.payload=t,null!=n&&(s.callback=n),null!==(t=lf(e,s,r))&&(Nh(t,e,r,a),cf(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=wh(),r=jh(e),s=of(a,r);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=lf(e,s,r))&&(Nh(t,e,r,a),cf(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wh(),a=jh(e),r=of(n,a);r.tag=2,null!=t&&(r.callback=t),null!==(t=lf(e,r,a))&&(Nh(t,e,a,n),cf(t,e,a))}};function Mm(e,t,n,a,r,s,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!Ac(n,a)||!Ac(r,s))}function _m(e,t,n){var a=!1,r=Qd,s=t.contextType;return"object"==typeof s&&null!==s?s=Zu(s):(r=eu(t)?Zd:Kd.current,s=(a=null!=(a=t.contextTypes))?Xd(e,r):Qd),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=km,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Im(e,t,n,a){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&km.enqueueReplaceState(t,t.state,null)}function Am(e,t,n,a){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},rf(e);var s=t.contextType;"object"==typeof s&&null!==s?r.context=Zu(s):(s=eu(t)?Zd:Kd.current,r.context=Xd(e,s)),r.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(Sm(e,t,s,n),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&km.enqueueReplaceState(r,r.state,null),uf(e,n,r,a),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.flags|=4194308)}function Em(e,t){try{var n="",a=t;do{n+=ci(a),a=a.return}while(a);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function Lm(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}var Tm="function"==typeof WeakMap?WeakMap:Map;function Dm(e,t,n){(n=of(-1,n)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){uh||(uh=!0,fh=a)},n}function Pm(e,t,n){(n=of(-1,n)).tag=3;var a=e.type.getDerivedStateFromError;if("function"==typeof a){var r=t.value;n.payload=function(){return a(r)},n.callback=function(){}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof a&&(null===mh?mh=new Set([this]):mh.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Om(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new Tm;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(n)||(r.add(n),e=qh.bind(null,e,t,n),t.then(e,e))}function Rm(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function zm(e,t,n,a,r){return 1&e.mode?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=of(-1,1)).tag=2,lf(n,t,1))),n.lanes|=1),e)}var Fm=Ws.ReactCurrentOwner,Bm=!1;function Um(e,t,n,a){t.child=null===e?Gu(t,null,n,a):Wu(t,e.child,n,a)}function Wm(e,t,n,a,r){n=n.render;var s=t.ref;return Ju(t,r),a=zf(e,t,n,a,s,r),n=Ff(),null===e||Bm?(ku&&n&&ju(t),t.flags|=1,Um(e,t,a,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,up(e,t,r))}function Gm(e,t,n,a,r){if(null===e){var s=n.type;return"function"!=typeof s||Xh(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=tg(n.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Vm(e,t,s,a,r))}if(s=e.child,0===(e.lanes&r)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:Ac)(i,a)&&e.ref===t.ref)return up(e,t,r)}return t.flags|=1,(e=eg(s,a)).ref=t.ref,e.return=t,t.child=e}function Vm(e,t,n,a,r){if(null!==e){var s=e.memoizedProps;if(Ac(s,a)&&e.ref===t.ref){if(Bm=!1,t.pendingProps=a=s,0===(e.lanes&r))return t.lanes=e.lanes,up(e,t,r);131072&e.flags&&(Bm=!0)}}return $m(e,t,n,a,r)}function Hm(e,t,n){var a=t.pendingProps,r=a.children,s=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Yd(eh,Xp),Xp|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==s?s.baseLanes:n,Yd(eh,Xp),Xp|=a}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yd(eh,Xp),Xp|=n;else null!==s?(a=s.baseLanes|n,t.memoizedState=null):a=n,Yd(eh,Xp),Xp|=a;return Um(e,t,r,n),t.child}function qm(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $m(e,t,n,a,r){var s=eu(n)?Zd:Kd.current;return s=Xd(t,s),Ju(t,r),n=zf(e,t,n,a,s,r),a=Ff(),null===e||Bm?(ku&&a&&ju(t),t.flags|=1,Um(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,up(e,t,r))}function Ym(e,t,n,a,r){if(eu(n)){var s=!0;ru(t)}else s=!1;if(Ju(t,r),null===t.stateNode)dp(e,t),_m(t,n,a),Am(t,n,a,r),a=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"==typeof c&&null!==c?c=Zu(c):c=Xd(t,c=eu(n)?Zd:Kd.current);var d=n.getDerivedStateFromProps,u="function"==typeof d||"function"==typeof i.getSnapshotBeforeUpdate;u||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==a||l!==c)&&Im(t,i,a,c),af=!1;var f=t.memoizedState;i.state=f,uf(t,a,i,r),l=t.memoizedState,o!==a||f!==l||Jd.current||af?("function"==typeof d&&(Sm(t,n,d,a),l=t.memoizedState),(o=af||Mm(t,n,o,a,f,l,c))?(u||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),i.props=a,i.state=l,i.context=c,a=o):("function"==typeof i.componentDidMount&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,sf(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Cm(t.type,o),i.props=c,u=t.pendingProps,f=i.context,"object"==typeof(l=n.contextType)&&null!==l?l=Zu(l):l=Xd(t,l=eu(n)?Zd:Kd.current);var m=n.getDerivedStateFromProps;(d="function"==typeof m||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==u||f!==l)&&Im(t,i,a,l),af=!1,f=t.memoizedState,i.state=f,uf(t,a,i,r);var p=t.memoizedState;o!==u||f!==p||Jd.current||af?("function"==typeof m&&(Sm(t,n,m,a),p=t.memoizedState),(c=af||Mm(t,n,c,a,f,p,l)||!1)?(d||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(a,p,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,p,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=p),i.props=a,i.state=p,i.context=l,a=c):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),a=!1)}return Qm(e,t,n,a,s,r)}function Qm(e,t,n,a,r,s){qm(e,t);var i=!!(128&t.flags);if(!a&&!i)return r&&su(t,n,!1),up(e,t,s);a=t.stateNode,Fm.current=t;var o=i&&"function"!=typeof n.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&i?(t.child=Wu(t,e.child,null,s),t.child=Wu(t,null,o,s)):Um(e,t,o,s),t.memoizedState=a.state,r&&su(t,n,!0),t.child}function Km(e){var t=e.stateNode;t.pendingContext?nu(0,t.pendingContext,t.pendingContext!==t.context):t.context&&nu(0,t.context,!1),yf(e,t.containerInfo)}function Jm(e,t,n,a,r){return Pu(),Ou(r),t.flags|=256,Um(e,t,n,a),t.child}var Zm,Xm,ep,tp,np={dehydrated:null,treeContext:null,retryLane:0};function ap(e){return{baseLanes:e,cachePool:null,transitions:null}}function rp(e,t,n){var a,r=t.pendingProps,s=jf.current,i=!1,o=!!(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&!!(2&s)),a?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Yd(jf,1&s),null===e)return Eu(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},1&r||null===i?i=ag(o,r,0,null):(i.childLanes=0,i.pendingProps=o),e=ng(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ap(n),t.memoizedState=np,e):sp(t,o));if(null!==(s=e.memoizedState)&&null!==(a=s.dehydrated))return function(e,t,n,a,r,s,i){if(n)return 256&t.flags?(t.flags&=-257,ip(e,t,i,a=Lm(Error(Ms(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=a.fallback,r=t.mode,a=ag({mode:"visible",children:a.children},r,0,null),(s=ng(s,r,i,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,1&t.mode&&Wu(t,e.child,null,i),t.child.memoizedState=ap(i),t.memoizedState=np,s);if(!(1&t.mode))return ip(e,t,i,null);if("$!"===r.data){if(a=r.nextSibling&&r.nextSibling.dataset)var o=a.dgst;return a=o,ip(e,t,i,a=Lm(s=Error(Ms(419)),a,void 0))}if(o=0!==(i&e.childLanes),Bm||o){if(null!==(a=Kp)){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(a.suspendedLanes|i))?0:r)&&r!==s.retryLane&&(s.retryLane=r,nf(e,r),Nh(a,e,r,-1))}return Oh(),ip(e,t,i,a=Lm(Error(Ms(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Yh.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,Su=Ed(r.nextSibling),Cu=t,ku=!0,Mu=null,null!==e&&(hu[gu++]=yu,hu[gu++]=vu,hu[gu++]=xu,yu=e.id,vu=e.overflow,xu=t),t=sp(t,a.children),t.flags|=4096,t)}(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,a=(s=e.child).sibling;var l={mode:"hidden",children:r.children};return 1&o||t.child===s?(r=eg(s,l)).subtreeFlags=14680064&s.subtreeFlags:((r=t.child).childLanes=0,r.pendingProps=l,t.deletions=null),null!==a?i=eg(a,i):(i=ng(i,o,n,null)).flags|=2,i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=null===(o=e.child.memoizedState)?ap(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=np,r}return e=(i=e.child).sibling,r=eg(i,{mode:"visible",children:r.children}),!(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function sp(e,t){return(t=ag({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ip(e,t,n,a){return null!==a&&Ou(a),Wu(t,e.child,null,n),(e=sp(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function op(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Ku(e.return,t,n)}function lp(e,t,n,a,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=n,s.tailMode=r)}function cp(e,t,n){var a=t.pendingProps,r=a.revealOrder,s=a.tail;if(Um(e,t,a.children,n),2&(a=jf.current))a=1&a|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&op(e,n,t);else if(19===e.tag)op(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Yd(jf,a),1&t.mode)switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Nf(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),lp(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Nf(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}lp(t,!0,n,null,s);break;case"together":lp(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function dp(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function up(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ah|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(Ms(153));if(null!==t.child){for(n=eg(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=eg(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function fp(e,t){if(!ku)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function mp(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=14680064&r.subtreeFlags,a|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function pp(e,t,n){var a=t.pendingProps;switch(Nu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mp(t),null;case 1:case 17:return eu(t.type)&&tu(),mp(t),null;case 3:return a=t.stateNode,vf(),$d(Jd),$d(Kd),Sf(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(Tu(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==Mu&&(Mh(Mu),Mu=null))),Xm(e,t),mp(t),null;case 5:wf(t);var r=xf(gf.current);if(n=t.type,null!==e&&null!=t.stateNode)ep(e,t,n,a,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(Ms(166));return mp(t),null}if(e=xf(pf.current),Tu(t)){a=t.stateNode,n=t.type;var s=t.memoizedProps;switch(a[Dd]=t,a[Pd]=s,e=!!(1&t.mode),n){case"dialog":od("cancel",a),od("close",a);break;case"iframe":case"object":case"embed":od("load",a);break;case"video":case"audio":for(r=0;r<ad.length;r++)od(ad[r],a);break;case"source":od("error",a);break;case"img":case"image":case"link":od("error",a),od("load",a);break;case"details":od("toggle",a);break;case"input":yi(a,s),od("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!s.multiple},od("invalid",a);break;case"textarea":ki(a,s),od("invalid",a)}for(var i in Bi(n,s),r=null,s)if(s.hasOwnProperty(i)){var o=s[i];"children"===i?"string"==typeof o?a.textContent!==o&&(!0!==s.suppressHydrationWarning&&bd(a.textContent,o,e),r=["children",o]):"number"==typeof o&&a.textContent!==""+o&&(!0!==s.suppressHydrationWarning&&bd(a.textContent,o,e),r=["children",""+o]):Is.hasOwnProperty(i)&&null!=o&&"onScroll"===i&&od("scroll",a)}switch(n){case"input":pi(a),wi(a,s,!0);break;case"textarea":pi(a),_i(a);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(a.onclick=wd)}a=r,t.updateQueue=a,null!==a&&(t.flags|=4)}else{i=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=Ii(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof a.is?e=i.createElement(n,{is:a.is}):(e=i.createElement(n),"select"===n&&(i=e,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):e=i.createElementNS(e,n),e[Dd]=t,e[Pd]=a,Zm(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ui(n,a),n){case"dialog":od("cancel",e),od("close",e),r=a;break;case"iframe":case"object":case"embed":od("load",e),r=a;break;case"video":case"audio":for(r=0;r<ad.length;r++)od(ad[r],e);r=a;break;case"source":od("error",e),r=a;break;case"img":case"image":case"link":od("error",e),od("load",e),r=a;break;case"details":od("toggle",e),r=a;break;case"input":yi(e,a),r=xi(e,a),od("invalid",e);break;case"option":default:r=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},r=si({},a,{value:void 0}),od("invalid",e);break;case"textarea":ki(e,a),r=Si(e,a),od("invalid",e)}for(s in Bi(n,r),o=r)if(o.hasOwnProperty(s)){var l=o[s];"style"===s?zi(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&Ti(e,l):"children"===s?"string"==typeof l?("textarea"!==n||""!==l)&&Di(e,l):"number"==typeof l&&Di(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(Is.hasOwnProperty(s)?null!=l&&"onScroll"===s&&od("scroll",e):null!=l&&Us(e,s,l,i))}switch(n){case"input":pi(e),wi(e,a,!1);break;case"textarea":pi(e),_i(e);break;case"option":null!=a.value&&e.setAttribute("value",""+fi(a.value));break;case"select":e.multiple=!!a.multiple,null!=(s=a.value)?Ci(e,!!a.multiple,s,!1):null!=a.defaultValue&&Ci(e,!!a.multiple,a.defaultValue,!0);break;default:"function"==typeof r.onClick&&(e.onclick=wd)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return mp(t),null;case 6:if(e&&null!=t.stateNode)tp(e,t,e.memoizedProps,a);else{if("string"!=typeof a&&null===t.stateNode)throw Error(Ms(166));if(n=xf(gf.current),xf(pf.current),Tu(t)){if(a=t.stateNode,n=t.memoizedProps,a[Dd]=t,(s=a.nodeValue!==n)&&null!==(e=Cu))switch(e.tag){case 3:bd(a.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&bd(a.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(a=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[Dd]=t,t.stateNode=a}return mp(t),null;case 13:if($d(jf),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ku&&null!==Su&&1&t.mode&&!(128&t.flags))Du(),Pu(),t.flags|=98560,s=!1;else if(s=Tu(t),null!==a&&null!==a.dehydrated){if(null===e){if(!s)throw Error(Ms(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(Ms(317));s[Dd]=t}else Pu(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;mp(t),s=!1}else null!==Mu&&(Mh(Mu),Mu=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,1&t.mode&&(null===e||1&jf.current?0===th&&(th=3):Oh())),null!==t.updateQueue&&(t.flags|=4),mp(t),null);case 4:return vf(),Xm(e,t),null===e&&dd(t.stateNode.containerInfo),mp(t),null;case 10:return Qu(t.type._context),mp(t),null;case 19:if($d(jf),null===(s=t.memoizedState))return mp(t),null;if(a=!!(128&t.flags),null===(i=s.rendering))if(a)fp(s,!1);else{if(0!==th||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=Nf(e))){for(t.flags|=128,fp(s,!1),null!==(a=i.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;null!==n;)e=a,(s=n).flags&=14680066,null===(i=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Yd(jf,1&jf.current|2),t.child}e=e.sibling}null!==s.tail&&bo()>ch&&(t.flags|=128,a=!0,fp(s,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=Nf(i))){if(t.flags|=128,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),fp(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!ku)return mp(t),null}else 2*bo()-s.renderingStartTime>ch&&1073741824!==n&&(t.flags|=128,a=!0,fp(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(n=s.last)?n.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=bo(),t.sibling=null,n=jf.current,Yd(jf,a?1&n|2:1&n),t):(mp(t),null);case 22:case 23:return Lh(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&1&t.mode?!!(1073741824&Xp)&&(mp(t),6&t.subtreeFlags&&(t.flags|=8192)):mp(t),null;case 24:case 25:return null}throw Error(Ms(156,t.tag))}function hp(e,t){switch(Nu(t),t.tag){case 1:return eu(t.type)&&tu(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return vf(),$d(Jd),$d(Kd),Sf(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return wf(t),null;case 13:if($d(jf),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(Ms(340));Pu()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return $d(jf),null;case 4:return vf(),null;case 10:return Qu(t.type._context),null;case 22:case 23:return Lh(),null;default:return null}}Zm=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xm=function(){},ep=function(e,t,n,a){var r=e.memoizedProps;if(r!==a){e=t.stateNode,xf(pf.current);var s,i=null;switch(n){case"input":r=xi(e,r),a=xi(e,a),i=[];break;case"select":r=si({},r,{value:void 0}),a=si({},a,{value:void 0}),i=[];break;case"textarea":r=Si(e,r),a=Si(e,a),i=[];break;default:"function"!=typeof r.onClick&&"function"==typeof a.onClick&&(e.onclick=wd)}for(c in Bi(n,a),n=null,r)if(!a.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var o=r[c];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(Is.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in a){var l=a[c];if(o=null!=r?r[c]:void 0,a.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(i||(i=[]),i.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(i=i||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(i=i||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(Is.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&od("scroll",e),i||o===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},tp=function(e,t,n,a){n!==a&&(t.flags|=4)};var gp=!1,xp=!1,yp="function"==typeof WeakSet?WeakSet:Set,vp=null;function bp(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(a){Hh(e,t,a)}else n.current=null}function wp(e,t,n){try{n()}catch(a){Hh(e,t,a)}}var jp=!1;function Np(e,t,n){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var r=a=a.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&wp(t,n,s)}r=r.next}while(r!==a)}}function Cp(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function Sp(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function kp(e){var t=e.alternate;null!==t&&(e.alternate=null,kp(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[Dd],delete t[Pd],delete t[Rd],delete t[zd],delete t[Fd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mp(e){return 5===e.tag||3===e.tag||4===e.tag}function _p(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Mp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ip(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=wd));else if(4!==a&&null!==(e=e.child))for(Ip(e,t,n),e=e.sibling;null!==e;)Ip(e,t,n),e=e.sibling}function Ap(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(Ap(e,t,n),e=e.sibling;null!==e;)Ap(e,t,n),e=e.sibling}var Ep=null,Lp=!1;function Tp(e,t,n){for(n=n.child;null!==n;)Dp(e,t,n),n=n.sibling}function Dp(e,t,n){if(_o&&"function"==typeof _o.onCommitFiberUnmount)try{_o.onCommitFiberUnmount(Mo,n)}catch(o){}switch(n.tag){case 5:xp||bp(n,t);case 6:var a=Ep,r=Lp;Ep=null,Tp(e,t,n),Lp=r,null!==(Ep=a)&&(Lp?(e=Ep,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):Ep.removeChild(n.stateNode));break;case 18:null!==Ep&&(Lp?(e=Ep,n=n.stateNode,8===e.nodeType?Ad(e.parentNode,n):1===e.nodeType&&Ad(e,n),ul(e)):Ad(Ep,n.stateNode));break;case 4:a=Ep,r=Lp,Ep=n.stateNode.containerInfo,Lp=!0,Tp(e,t,n),Ep=a,Lp=r;break;case 0:case 11:case 14:case 15:if(!xp&&(null!==(a=n.updateQueue)&&null!==(a=a.lastEffect))){r=a=a.next;do{var s=r,i=s.destroy;s=s.tag,void 0!==i&&(2&s||4&s)&&wp(n,t,i),r=r.next}while(r!==a)}Tp(e,t,n);break;case 1:if(!xp&&(bp(n,t),"function"==typeof(a=n.stateNode).componentWillUnmount))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(o){Hh(n,t,o)}Tp(e,t,n);break;case 21:Tp(e,t,n);break;case 22:1&n.mode?(xp=(a=xp)||null!==n.memoizedState,Tp(e,t,n),xp=a):Tp(e,t,n);break;default:Tp(e,t,n)}}function Pp(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new yp),t.forEach((function(t){var a=Qh.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))}))}}function Op(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a];try{var s=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 5:Ep=o.stateNode,Lp=!1;break e;case 3:case 4:Ep=o.stateNode.containerInfo,Lp=!0;break e}o=o.return}if(null===Ep)throw Error(Ms(160));Dp(s,i,r),Ep=null,Lp=!1;var l=r.alternate;null!==l&&(l.return=null),r.return=null}catch(c){Hh(r,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Rp(t,e),t=t.sibling}function Rp(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Op(t,e),zp(e),4&a){try{Np(3,e,e.return),Cp(3,e)}catch(h){Hh(e,e.return,h)}try{Np(5,e,e.return)}catch(h){Hh(e,e.return,h)}}break;case 1:Op(t,e),zp(e),512&a&&null!==n&&bp(n,n.return);break;case 5:if(Op(t,e),zp(e),512&a&&null!==n&&bp(n,n.return),32&e.flags){var r=e.stateNode;try{Di(r,"")}catch(h){Hh(e,e.return,h)}}if(4&a&&null!=(r=e.stateNode)){var s=e.memoizedProps,i=null!==n?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===s.type&&null!=s.name&&vi(r,s),Ui(o,i);var c=Ui(o,s);for(i=0;i<l.length;i+=2){var d=l[i],u=l[i+1];"style"===d?zi(r,u):"dangerouslySetInnerHTML"===d?Ti(r,u):"children"===d?Di(r,u):Us(r,d,u,c)}switch(o){case"input":bi(r,s);break;case"textarea":Mi(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;null!=m?Ci(r,!!s.multiple,m,!1):f!==!!s.multiple&&(null!=s.defaultValue?Ci(r,!!s.multiple,s.defaultValue,!0):Ci(r,!!s.multiple,s.multiple?[]:"",!1))}r[Pd]=s}catch(h){Hh(e,e.return,h)}}break;case 6:if(Op(t,e),zp(e),4&a){if(null===e.stateNode)throw Error(Ms(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(h){Hh(e,e.return,h)}}break;case 3:if(Op(t,e),zp(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{ul(t.containerInfo)}catch(h){Hh(e,e.return,h)}break;case 4:default:Op(t,e),zp(e);break;case 13:Op(t,e),zp(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(lh=bo())),4&a&&Pp(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(xp=(c=xp)||d,Op(t,e),xp=c):Op(t,e),zp(e),8192&a){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&1&e.mode)for(vp=e,d=e.child;null!==d;){for(u=vp=d;null!==vp;){switch(m=(f=vp).child,f.tag){case 0:case 11:case 14:case 15:Np(4,f,f.return);break;case 1:bp(f,f.return);var p=f.stateNode;if("function"==typeof p.componentWillUnmount){a=f,n=f.return;try{t=a,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(h){Hh(a,n,h)}}break;case 5:bp(f,f.return);break;case 22:if(null!==f.memoizedState){Wp(u);continue}}null!==m?(m.return=f,vp=m):Wp(u)}d=d.sibling}e:for(d=null,u=e;;){if(5===u.tag){if(null===d){d=u;try{r=u.stateNode,c?"function"==typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(o=u.stateNode,i=null!=(l=u.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=Ri("display",i))}catch(h){Hh(e,e.return,h)}}}else if(6===u.tag){if(null===d)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(h){Hh(e,e.return,h)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Op(t,e),zp(e),4&a&&Pp(e);case 21:}}function zp(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(Mp(n)){var a=n;break e}n=n.return}throw Error(Ms(160))}switch(a.tag){case 5:var r=a.stateNode;32&a.flags&&(Di(r,""),a.flags&=-33),Ap(e,_p(e),r);break;case 3:case 4:var s=a.stateNode.containerInfo;Ip(e,_p(e),s);break;default:throw Error(Ms(161))}}catch(i){Hh(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fp(e,t,n){vp=e,Bp(e)}function Bp(e,t,n){for(var a=!!(1&e.mode);null!==vp;){var r=vp,s=r.child;if(22===r.tag&&a){var i=null!==r.memoizedState||gp;if(!i){var o=r.alternate,l=null!==o&&null!==o.memoizedState||xp;o=gp;var c=xp;if(gp=i,(xp=l)&&!c)for(vp=r;null!==vp;)l=(i=vp).child,22===i.tag&&null!==i.memoizedState?Gp(r):null!==l?(l.return=i,vp=l):Gp(r);for(;null!==s;)vp=s,Bp(s),s=s.sibling;vp=r,gp=o,xp=c}Up(e)}else 8772&r.subtreeFlags&&null!==s?(s.return=r,vp=s):Up(e)}}function Up(e){for(;null!==vp;){var t=vp;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:xp||Cp(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!xp)if(null===n)a.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Cm(t.type,n.memoizedProps);a.componentDidUpdate(r,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&ff(t,s,a);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ff(t,i,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var u=d.dehydrated;null!==u&&ul(u)}}}break;default:throw Error(Ms(163))}xp||512&t.flags&&Sp(t)}catch(f){Hh(t,t.return,f)}}if(t===e){vp=null;break}if(null!==(n=t.sibling)){n.return=t.return,vp=n;break}vp=t.return}}function Wp(e){for(;null!==vp;){var t=vp;if(t===e){vp=null;break}var n=t.sibling;if(null!==n){n.return=t.return,vp=n;break}vp=t.return}}function Gp(e){for(;null!==vp;){var t=vp;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Cp(4,t)}catch(l){Hh(t,n,l)}break;case 1:var a=t.stateNode;if("function"==typeof a.componentDidMount){var r=t.return;try{a.componentDidMount()}catch(l){Hh(t,r,l)}}var s=t.return;try{Sp(t)}catch(l){Hh(t,s,l)}break;case 5:var i=t.return;try{Sp(t)}catch(l){Hh(t,i,l)}}}catch(l){Hh(t,t.return,l)}if(t===e){vp=null;break}var o=t.sibling;if(null!==o){o.return=t.return,vp=o;break}vp=t.return}}var Vp,Hp=Math.ceil,qp=Ws.ReactCurrentDispatcher,$p=Ws.ReactCurrentOwner,Yp=Ws.ReactCurrentBatchConfig,Qp=0,Kp=null,Jp=null,Zp=0,Xp=0,eh=qd(0),th=0,nh=null,ah=0,rh=0,sh=0,ih=null,oh=null,lh=0,ch=1/0,dh=null,uh=!1,fh=null,mh=null,ph=!1,hh=null,gh=0,xh=0,yh=null,vh=-1,bh=0;function wh(){return 6&Qp?bo():-1!==vh?vh:vh=bo()}function jh(e){return 1&e.mode?2&Qp&&0!==Zp?Zp&-Zp:null!==Ru.transition?(0===bh&&(bh=zo()),bh):0!==(e=Wo)?e:e=void 0===(e=window.event)?16:vl(e.type):1}function Nh(e,t,n,a){if(50<xh)throw xh=0,yh=null,Error(Ms(185));Bo(e,n,a),2&Qp&&e===Kp||(e===Kp&&(!(2&Qp)&&(rh|=n),4===th&&_h(e,Zp)),Ch(e,a),1===n&&0===Qp&&!(1&t.mode)&&(ch=bo()+500,ou&&du()))}function Ch(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-Io(s),o=1<<i,l=r[i];-1===l?0!==(o&n)&&0===(o&a)||(r[i]=Oo(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var a=Po(e,e===Kp?Zp:0);if(0===a)null!==n&&xo(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&xo(n),1===t)0===e.tag?function(e){ou=!0,cu(e)}(Ih.bind(null,e)):cu(Ih.bind(null,e)),_d((function(){!(6&Qp)&&du()})),n=null;else{switch(Go(a)){case 1:n=jo;break;case 4:n=No;break;case 16:default:n=Co;break;case 536870912:n=ko}n=Kh(n,Sh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sh(e,t){if(vh=-1,bh=0,6&Qp)throw Error(Ms(327));var n=e.callbackNode;if(Gh()&&e.callbackNode!==n)return null;var a=Po(e,e===Kp?Zp:0);if(0===a)return null;if(30&a||0!==(a&e.expiredLanes)||t)t=Rh(e,a);else{t=a;var r=Qp;Qp|=2;var s=Ph();for(Kp===e&&Zp===t||(dh=null,ch=bo()+500,Th(e,t));;)try{Fh();break}catch(o){Dh(e,o)}Yu(),qp.current=s,Qp=r,null!==Jp?t=0:(Kp=null,Zp=0,t=th)}if(0!==t){if(2===t&&(0!==(r=Ro(e))&&(a=r,t=kh(e,r))),1===t)throw n=nh,Th(e,0),_h(e,a),Ch(e,bo()),n;if(6===t)_h(e,a);else{if(r=e.current.alternate,!(30&a||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var r=n[a],s=r.getSnapshot;r=r.value;try{if(!Ic(s(),r))return!1}catch(i){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)||(t=Rh(e,a),2===t&&(s=Ro(e),0!==s&&(a=s,t=kh(e,s))),1!==t)))throw n=nh,Th(e,0),_h(e,a),Ch(e,bo()),n;switch(e.finishedWork=r,e.finishedLanes=a,t){case 0:case 1:throw Error(Ms(345));case 2:case 5:Wh(e,oh,dh);break;case 3:if(_h(e,a),(130023424&a)===a&&10<(t=lh+500-bo())){if(0!==Po(e,0))break;if(((r=e.suspendedLanes)&a)!==a){wh(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Sd(Wh.bind(null,e,oh,dh),t);break}Wh(e,oh,dh);break;case 4:if(_h(e,a),(4194240&a)===a)break;for(t=e.eventTimes,r=-1;0<a;){var i=31-Io(a);s=1<<i,(i=t[i])>r&&(r=i),a&=~s}if(a=r,10<(a=(120>(a=bo()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Hp(a/1960))-a)){e.timeoutHandle=Sd(Wh.bind(null,e,oh,dh),a);break}Wh(e,oh,dh);break;default:throw Error(Ms(329))}}}return Ch(e,bo()),e.callbackNode===n?Sh.bind(null,e):null}function kh(e,t){var n=ih;return e.current.memoizedState.isDehydrated&&(Th(e,t).flags|=256),2!==(e=Rh(e,t))&&(t=oh,oh=n,null!==t&&Mh(t)),e}function Mh(e){null===oh?oh=e:oh.push.apply(oh,e)}function _h(e,t){for(t&=~sh,t&=~rh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Io(t),a=1<<n;e[n]=-1,t&=~a}}function Ih(e){if(6&Qp)throw Error(Ms(327));Gh();var t=Po(e,0);if(!(1&t))return Ch(e,bo()),null;var n=Rh(e,t);if(0!==e.tag&&2===n){var a=Ro(e);0!==a&&(t=a,n=kh(e,a))}if(1===n)throw n=nh,Th(e,0),_h(e,t),Ch(e,bo()),n;if(6===n)throw Error(Ms(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wh(e,oh,dh),Ch(e,bo()),null}function Ah(e,t){var n=Qp;Qp|=1;try{return e(t)}finally{0===(Qp=n)&&(ch=bo()+500,ou&&du())}}function Eh(e){null!==hh&&0===hh.tag&&!(6&Qp)&&Gh();var t=Qp;Qp|=1;var n=Yp.transition,a=Wo;try{if(Yp.transition=null,Wo=1,e)return e()}finally{Wo=a,Yp.transition=n,!(6&(Qp=t))&&du()}}function Lh(){Xp=eh.current,$d(eh)}function Th(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,kd(n)),null!==Jp)for(n=Jp.return;null!==n;){var a=n;switch(Nu(a),a.tag){case 1:null!=(a=a.type.childContextTypes)&&tu();break;case 3:vf(),$d(Jd),$d(Kd),Sf();break;case 5:wf(a);break;case 4:vf();break;case 13:case 19:$d(jf);break;case 10:Qu(a.type._context);break;case 22:case 23:Lh()}n=n.return}if(Kp=e,Jp=e=eg(e.current,null),Zp=Xp=t,th=0,nh=null,sh=rh=ah=0,oh=ih=null,null!==Xu){for(t=0;t<Xu.length;t++)if(null!==(a=(n=Xu[t]).interleaved)){n.interleaved=null;var r=a.next,s=n.pending;if(null!==s){var i=s.next;s.next=r,a.next=i}n.pending=a}Xu=null}return e}function Dh(e,t){for(;;){var n=Jp;try{if(Yu(),kf.current=bm,Lf){for(var a=If.memoizedState;null!==a;){var r=a.queue;null!==r&&(r.pending=null),a=a.next}Lf=!1}if(_f=0,Ef=Af=If=null,Tf=!1,Df=0,$p.current=null,null===n||null===n.return){th=1,nh=t,Jp=null;break}e:{var s=e,i=n.return,o=n,l=t;if(t=Zp,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,d=o,u=d.tag;if(!(1&d.mode||0!==u&&11!==u&&15!==u)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Rm(i);if(null!==m){m.flags&=-257,zm(m,i,o,0,t),1&m.mode&&Om(s,c,t),l=c;var p=(t=m).updateQueue;if(null===p){var h=new Set;h.add(l),t.updateQueue=h}else p.add(l);break e}if(!(1&t)){Om(s,c,t),Oh();break e}l=Error(Ms(426))}else if(ku&&1&o.mode){var g=Rm(i);if(null!==g){!(65536&g.flags)&&(g.flags|=256),zm(g,i,o,0,t),Ou(Em(l,o));break e}}s=l=Em(l,o),4!==th&&(th=2),null===ih?ih=[s]:ih.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,df(s,Dm(0,l,t));break e;case 1:o=l;var x=s.type,y=s.stateNode;if(!(128&s.flags||"function"!=typeof x.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==mh&&mh.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,df(s,Pm(s,o,t));break e}}s=s.return}while(null!==s)}Uh(n)}catch(v){t=v,Jp===n&&null!==n&&(Jp=n=n.return);continue}break}}function Ph(){var e=qp.current;return qp.current=bm,null===e?bm:e}function Oh(){0!==th&&3!==th&&2!==th||(th=4),null===Kp||!(268435455&ah)&&!(268435455&rh)||_h(Kp,Zp)}function Rh(e,t){var n=Qp;Qp|=2;var a=Ph();for(Kp===e&&Zp===t||(dh=null,Th(e,t));;)try{zh();break}catch(r){Dh(e,r)}if(Yu(),Qp=n,qp.current=a,null!==Jp)throw Error(Ms(261));return Kp=null,Zp=0,th}function zh(){for(;null!==Jp;)Bh(Jp)}function Fh(){for(;null!==Jp&&!yo();)Bh(Jp)}function Bh(e){var t=Vp(e.alternate,e,Xp);e.memoizedProps=e.pendingProps,null===t?Uh(e):Jp=t,$p.current=null}function Uh(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=hp(n,t)))return n.flags&=32767,void(Jp=n);if(null===e)return th=6,void(Jp=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=pp(n,t,Xp)))return void(Jp=n);if(null!==(t=t.sibling))return void(Jp=t);Jp=t=e}while(null!==t);0===th&&(th=5)}function Wh(e,t,n){var a=Wo,r=Yp.transition;try{Yp.transition=null,Wo=1,function(e,t,n,a){do{Gh()}while(null!==hh);if(6&Qp)throw Error(Ms(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ms(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Io(n),s=1<<r;t[r]=0,a[r]=-1,e[r]=-1,n&=~s}}(e,s),e===Kp&&(Jp=Kp=null,Zp=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||ph||(ph=!0,Kh(Co,(function(){return Gh(),null}))),s=!!(15990&n.flags),!!(15990&n.subtreeFlags)||s){s=Yp.transition,Yp.transition=null;var i=Wo;Wo=1;var o=Qp;Qp|=4,$p.current=null,function(e,t){if(jd=ml,Pc(e=Dc())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var r=a.anchorOffset,s=a.focusNode;a=a.focusOffset;try{n.nodeType,s.nodeType}catch(b){n=null;break e}var i=0,o=-1,l=-1,c=0,d=0,u=e,f=null;t:for(;;){for(var m;u!==n||0!==r&&3!==u.nodeType||(o=i+r),u!==s||0!==a&&3!==u.nodeType||(l=i+a),3===u.nodeType&&(i+=u.nodeValue.length),null!==(m=u.firstChild);)f=u,u=m;for(;;){if(u===e)break t;if(f===n&&++c===r&&(o=i),f===s&&++d===a&&(l=i),null!==(m=u.nextSibling))break;f=(u=f).parentNode}u=m}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nd={focusedElem:e,selectionRange:n},ml=!1,vp=t;null!==vp;)if(e=(t=vp).child,1028&t.subtreeFlags&&null!==e)e.return=t,vp=e;else for(;null!==vp;){t=vp;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var h=p.memoizedProps,g=p.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?h:Cm(t.type,h),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(Ms(163))}}catch(b){Hh(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,vp=e;break}vp=t.return}p=jp,jp=!1}(e,n),Rp(n,e),Oc(Nd),ml=!!jd,Nd=jd=null,e.current=n,Fp(n),vo(),Qp=o,Wo=i,Yp.transition=s}else e.current=n;if(ph&&(ph=!1,hh=e,gh=r),s=e.pendingLanes,0===s&&(mh=null),function(e){if(_o&&"function"==typeof _o.onCommitFiberRoot)try{_o.onCommitFiberRoot(Mo,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),Ch(e,bo()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],a(r.value,{componentStack:r.stack,digest:r.digest});if(uh)throw uh=!1,e=fh,fh=null,e;!!(1&gh)&&0!==e.tag&&Gh(),s=e.pendingLanes,1&s?e===yh?xh++:(xh=0,yh=e):xh=0,du()}(e,t,n,a)}finally{Yp.transition=r,Wo=a}return null}function Gh(){if(null!==hh){var e=Go(gh),t=Yp.transition,n=Wo;try{if(Yp.transition=null,Wo=16>e?16:e,null===hh)var a=!1;else{if(e=hh,hh=null,gh=0,6&Qp)throw Error(Ms(331));var r=Qp;for(Qp|=4,vp=e.current;null!==vp;){var s=vp,i=s.child;if(16&vp.flags){var o=s.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(vp=c;null!==vp;){var d=vp;switch(d.tag){case 0:case 11:case 15:Np(8,d,s)}var u=d.child;if(null!==u)u.return=d,vp=u;else for(;null!==vp;){var f=(d=vp).sibling,m=d.return;if(kp(d),d===c){vp=null;break}if(null!==f){f.return=m,vp=f;break}vp=m}}}var p=s.alternate;if(null!==p){var h=p.child;if(null!==h){p.child=null;do{var g=h.sibling;h.sibling=null,h=g}while(null!==h)}}vp=s}}if(2064&s.subtreeFlags&&null!==i)i.return=s,vp=i;else e:for(;null!==vp;){if(2048&(s=vp).flags)switch(s.tag){case 0:case 11:case 15:Np(9,s,s.return)}var x=s.sibling;if(null!==x){x.return=s.return,vp=x;break e}vp=s.return}}var y=e.current;for(vp=y;null!==vp;){var v=(i=vp).child;if(2064&i.subtreeFlags&&null!==v)v.return=i,vp=v;else e:for(i=y;null!==vp;){if(2048&(o=vp).flags)try{switch(o.tag){case 0:case 11:case 15:Cp(9,o)}}catch(w){Hh(o,o.return,w)}if(o===i){vp=null;break e}var b=o.sibling;if(null!==b){b.return=o.return,vp=b;break e}vp=o.return}}if(Qp=r,du(),_o&&"function"==typeof _o.onPostCommitFiberRoot)try{_o.onPostCommitFiberRoot(Mo,e)}catch(w){}a=!0}return a}finally{Wo=n,Yp.transition=t}}return!1}function Vh(e,t,n){e=lf(e,t=Dm(0,t=Em(n,t),1),1),t=wh(),null!==e&&(Bo(e,1,t),Ch(e,t))}function Hh(e,t,n){if(3===e.tag)Vh(e,e,n);else for(;null!==t;){if(3===t.tag){Vh(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof a.componentDidCatch&&(null===mh||!mh.has(a))){t=lf(t,e=Pm(t,e=Em(n,e),1),1),e=wh(),null!==t&&(Bo(t,1,e),Ch(t,e));break}}t=t.return}}function qh(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),t=wh(),e.pingedLanes|=e.suspendedLanes&n,Kp===e&&(Zp&n)===n&&(4===th||3===th&&(130023424&Zp)===Zp&&500>bo()-lh?Th(e,0):sh|=n),Ch(e,t)}function $h(e,t){0===t&&(1&e.mode?(t=To,!(130023424&(To<<=1))&&(To=4194304)):t=1);var n=wh();null!==(e=nf(e,t))&&(Bo(e,t,n),Ch(e,n))}function Yh(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),$h(e,n)}function Qh(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Ms(314))}null!==a&&a.delete(t),$h(e,n)}function Kh(e,t){return go(e,t)}function Jh(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zh(e,t,n,a){return new Jh(e,t,n,a)}function Xh(e){return!(!(e=e.prototype)||!e.isReactComponent)}function eg(e,t){var n=e.alternate;return null===n?((n=Zh(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function tg(e,t,n,a,r,s){var i=2;if(a=e,"function"==typeof e)Xh(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case Hs:return ng(n.children,r,s,t);case qs:i=8,r|=8;break;case $s:return(e=Zh(12,n,t,2|r)).elementType=$s,e.lanes=s,e;case Js:return(e=Zh(13,n,t,r)).elementType=Js,e.lanes=s,e;case Zs:return(e=Zh(19,n,t,r)).elementType=Zs,e.lanes=s,e;case ti:return ag(n,r,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ys:i=10;break e;case Qs:i=9;break e;case Ks:i=11;break e;case Xs:i=14;break e;case ei:i=16,a=null;break e}throw Error(Ms(130,null==e?e:typeof e,""))}return(t=Zh(i,n,t,r)).elementType=e,t.type=a,t.lanes=s,t}function ng(e,t,n,a){return(e=Zh(7,e,a,t)).lanes=n,e}function ag(e,t,n,a){return(e=Zh(22,e,a,t)).elementType=ti,e.lanes=n,e.stateNode={isHidden:!1},e}function rg(e,t,n){return(e=Zh(6,e,null,t)).lanes=n,e}function sg(e,t,n){return(t=Zh(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ig(e,t,n,a,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fo(0),this.expirationTimes=Fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fo(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function og(e,t,n,a,r,s,i,o,l){return e=new ig(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Zh(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rf(s),e}function lg(e){if(!e)return Qd;e:{if(uo(e=e._reactInternals)!==e||1!==e.tag)throw Error(Ms(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(eu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(Ms(171))}if(1===e.tag){var n=e.type;if(eu(n))return au(e,n,t)}return t}function cg(e,t,n,a,r,s,i,o,l){return(e=og(n,a,!0,e,0,s,0,o,l)).context=lg(null),n=e.current,(s=of(a=wh(),r=jh(n))).callback=null!=t?t:null,lf(n,s,r),e.current.lanes=r,Bo(e,r,a),Ch(e,a),e}function dg(e,t,n,a){var r=t.current,s=wh(),i=jh(r);return n=lg(n),null===t.context?t.context=n:t.pendingContext=n,(t=of(s,i)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=lf(r,t,i))&&(Nh(e,r,i,s),cf(e,r,i)),i}function ug(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function fg(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function mg(e,t){fg(e,t),(e=e.alternate)&&fg(e,t)}Vp=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Jd.current)Bm=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return Bm=!1,function(e,t,n){switch(t.tag){case 3:Km(t),Pu();break;case 5:bf(t);break;case 1:eu(t.type)&&ru(t);break;case 4:yf(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,r=t.memoizedProps.value;Yd(Vu,a._currentValue),a._currentValue=r;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Yd(jf,1&jf.current),t.flags|=128,null):0!==(n&t.child.childLanes)?rp(e,t,n):(Yd(jf,1&jf.current),null!==(e=up(e,t,n))?e.sibling:null);Yd(jf,1&jf.current);break;case 19:if(a=0!==(n&t.childLanes),128&e.flags){if(a)return cp(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Yd(jf,jf.current),a)break;return null;case 22:case 23:return t.lanes=0,Hm(e,t,n)}return up(e,t,n)}(e,t,n);Bm=!!(131072&e.flags)}else Bm=!1,ku&&1048576&t.flags&&wu(t,pu,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;dp(e,t),e=t.pendingProps;var r=Xd(t,Kd.current);Ju(t,n),r=zf(null,t,a,e,r,n);var s=Ff();return t.flags|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,eu(a)?(s=!0,ru(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,rf(t),r.updater=km,t.stateNode=r,r._reactInternals=t,Am(t,a,e,n),t=Qm(null,t,a,!0,s,n)):(t.tag=0,ku&&s&&ju(t),Um(null,t,r,n),t=t.child),t;case 16:a=t.elementType;e:{switch(dp(e,t),e=t.pendingProps,a=(r=a._init)(a._payload),t.type=a,r=t.tag=function(e){if("function"==typeof e)return Xh(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ks)return 11;if(e===Xs)return 14}return 2}(a),e=Cm(a,e),r){case 0:t=$m(null,t,a,e,n);break e;case 1:t=Ym(null,t,a,e,n);break e;case 11:t=Wm(null,t,a,e,n);break e;case 14:t=Gm(null,t,a,Cm(a.type,e),n);break e}throw Error(Ms(306,a,""))}return t;case 0:return a=t.type,r=t.pendingProps,$m(e,t,a,r=t.elementType===a?r:Cm(a,r),n);case 1:return a=t.type,r=t.pendingProps,Ym(e,t,a,r=t.elementType===a?r:Cm(a,r),n);case 3:e:{if(Km(t),null===e)throw Error(Ms(387));a=t.pendingProps,r=(s=t.memoizedState).element,sf(e,t),uf(t,a,null,n);var i=t.memoizedState;if(a=i.element,s.isDehydrated){if(s={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Jm(e,t,a,n,r=Em(Error(Ms(423)),t));break e}if(a!==r){t=Jm(e,t,a,n,r=Em(Error(Ms(424)),t));break e}for(Su=Ed(t.stateNode.containerInfo.firstChild),Cu=t,ku=!0,Mu=null,n=Gu(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Pu(),a===r){t=up(e,t,n);break e}Um(e,t,a,n)}t=t.child}return t;case 5:return bf(t),null===e&&Eu(t),a=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,i=r.children,Cd(a,r)?i=null:null!==s&&Cd(a,s)&&(t.flags|=32),qm(e,t),Um(e,t,i,n),t.child;case 6:return null===e&&Eu(t),null;case 13:return rp(e,t,n);case 4:return yf(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=Wu(t,null,a,n):Um(e,t,a,n),t.child;case 11:return a=t.type,r=t.pendingProps,Wm(e,t,a,r=t.elementType===a?r:Cm(a,r),n);case 7:return Um(e,t,t.pendingProps,n),t.child;case 8:case 12:return Um(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,r=t.pendingProps,s=t.memoizedProps,i=r.value,Yd(Vu,a._currentValue),a._currentValue=i,null!==s)if(Ic(s.value,i)){if(s.children===r.children&&!Jd.current){t=up(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var o=s.dependencies;if(null!==o){i=s.child;for(var l=o.firstContext;null!==l;){if(l.context===a){if(1===s.tag){(l=of(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ku(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===s.tag)i=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(i=s.return))throw Error(Ms(341));i.lanes|=n,null!==(o=i.alternate)&&(o.lanes|=n),Ku(i,n,t),i=s.sibling}else i=s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}Um(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,a=t.pendingProps.children,Ju(t,n),a=a(r=Zu(r)),t.flags|=1,Um(e,t,a,n),t.child;case 14:return r=Cm(a=t.type,t.pendingProps),Gm(e,t,a,r=Cm(a.type,r),n);case 15:return Vm(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:Cm(a,r),dp(e,t),t.tag=1,eu(a)?(e=!0,ru(t)):e=!1,Ju(t,n),_m(t,a,r),Am(t,a,r,n),Qm(null,t,a,!0,e,n);case 19:return cp(e,t,n);case 22:return Hm(e,t,n)}throw Error(Ms(156,t.tag))};var pg="function"==typeof reportError?reportError:function(e){};function hg(e){this._internalRoot=e}function gg(e){this._internalRoot=e}function xg(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function yg(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function vg(){}function bg(e,t,n,a,r){var s=n._reactRootContainer;if(s){var i=s;if("function"==typeof r){var o=r;r=function(){var e=ug(i);o.call(e)}}dg(t,i,e,r)}else i=function(e,t,n,a,r){if(r){if("function"==typeof a){var s=a;a=function(){var e=ug(i);s.call(e)}}var i=cg(t,a,e,0,null,!1,0,"",vg);return e._reactRootContainer=i,e[Od]=i.current,dd(8===e.nodeType?e.parentNode:e),Eh(),i}for(;r=e.lastChild;)e.removeChild(r);if("function"==typeof a){var o=a;a=function(){var e=ug(l);o.call(e)}}var l=og(e,0,!1,null,0,!1,0,"",vg);return e._reactRootContainer=l,e[Od]=l.current,dd(8===e.nodeType?e.parentNode:e),Eh((function(){dg(t,l,n,a)})),l}(n,t,e,r,a);return ug(i)}gg.prototype.render=hg.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(Ms(409));dg(e,t,null,null)},gg.prototype.unmount=hg.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Eh((function(){dg(null,e,null,null)})),t[Od]=null}},gg.prototype.unstable_scheduleHydration=function(e){if(e){var t=$o();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nl.length&&0!==t&&t<nl[n].priority;n++);nl.splice(n,0,e),0===n&&il(e)}},Vo=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Do(t.pendingLanes);0!==n&&(Uo(t,1|n),Ch(t,bo()),!(6&Qp)&&(ch=bo()+500,du()))}break;case 13:Eh((function(){var t=nf(e,1);if(null!==t){var n=wh();Nh(t,e,1,n)}})),mg(e,1)}},Ho=function(e){if(13===e.tag){var t=nf(e,134217728);if(null!==t)Nh(t,e,134217728,wh());mg(e,134217728)}},qo=function(e){if(13===e.tag){var t=jh(e),n=nf(e,t);if(null!==n)Nh(n,e,t,wh());mg(e,t)}},$o=function(){return Wo},Yo=function(e,t){var n=Wo;try{return Wo=e,t()}finally{Wo=n}},Vi=function(e,t,n){switch(t){case"input":if(bi(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=Gd(a);if(!r)throw Error(Ms(90));hi(a),bi(a,r)}}}break;case"textarea":Mi(e,n);break;case"select":null!=(t=n.value)&&Ci(e,!!n.multiple,t,!1)}},Ki=Ah,Ji=Eh;var wg={usingClientEntryPoint:!1,Events:[Ud,Wd,Gd,Yi,Qi,Ah]},jg={findFiberByHostInstance:Bd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ng={bundleType:jg.bundleType,version:jg.version,rendererPackageName:jg.rendererPackageName,rendererConfig:jg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ws.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=po(e))?null:e.stateNode},findFiberByHostInstance:jg.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Cg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cg.isDisabled&&Cg.supportsFiber)try{Mo=Cg.inject(Ng),_o=Cg}catch(Li){}}ws.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wg,ws.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!xg(t))throw Error(Ms(200));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Vs,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},ws.createRoot=function(e,t){if(!xg(e))throw Error(Ms(299));var n=!1,a="",r=pg;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=og(e,1,!1,null,0,n,0,a,r),e[Od]=t.current,dd(8===e.nodeType?e.parentNode:e),new hg(t)},ws.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Ms(188));throw e=Object.keys(e).join(","),Error(Ms(268,e))}return e=null===(e=po(t))?null:e.stateNode},ws.flushSync=function(e){return Eh(e)},ws.hydrate=function(e,t,n){if(!yg(t))throw Error(Ms(200));return bg(null,e,t,!0,n)},ws.hydrateRoot=function(e,t,n){if(!xg(e))throw Error(Ms(405));var a=null!=n&&n.hydratedSources||null,r=!1,s="",i=pg;if(null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=cg(t,null,e,1,null!=n?n:null,r,0,s,i),e[Od]=t.current,dd(e),a)for(e=0;e<a.length;e++)r=(r=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new gg(t)},ws.render=function(e,t,n){if(!yg(t))throw Error(Ms(200));return bg(null,e,t,!1,n)},ws.unmountComponentAtNode=function(e){if(!yg(e))throw Error(Ms(40));return!!e._reactRootContainer&&(Eh((function(){bg(null,null,e,!1,(function(){e._reactRootContainer=null,e[Od]=null}))})),!0)},ws.unstable_batchedUpdates=Ah,ws.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!yg(n))throw Error(Ms(200));if(null==e||void 0===e._reactInternals)throw Error(Ms(38));return bg(e,t,n,!1,a)},ws.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),bs.exports=ws;var Sg=bs.exports;const kg=Cr(Sg);var Mg,_g=Sg;Mg=_g.createRoot,_g.hydrateRoot;const Ig={},Ag=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));a=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in Ig)return;Ig[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,n&&r.setAttribute("nonce",n),document.head.appendChild(r),t?new Promise(((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then((t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)}))};var Eg={exports:{}},Lg={},Tg=cs;var Dg="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Pg=Tg.useState,Og=Tg.useEffect,Rg=Tg.useLayoutEffect,zg=Tg.useDebugValue;function Fg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dg(e,n)}catch(a){return!0}}var Bg="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),a=Pg({inst:{value:n,getSnapshot:t}}),r=a[0].inst,s=a[1];return Rg((function(){r.value=n,r.getSnapshot=t,Fg(r)&&s({inst:r})}),[e,n,t]),Og((function(){return Fg(r)&&s({inst:r}),e((function(){Fg(r)&&s({inst:r})}))}),[e]),zg(n),n};Lg.useSyncExternalStore=void 0!==Tg.useSyncExternalStore?Tg.useSyncExternalStore:Bg,Eg.exports=Lg;var Ug=Eg.exports;const Wg=us.useInsertionEffect,Gg=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?cs.useLayoutEffect:cs.useEffect,Vg=Wg||Gg,Hg=e=>{const t=cs.useRef([e,(...e)=>t[0](...e)]).current;return Vg((()=>{t[0]=e})),t[1]},qg="pushState",$g="replaceState",Yg=["popstate",qg,$g,"hashchange"],Qg=e=>{for(const t of Yg)addEventListener(t,e);return()=>{for(const t of Yg)removeEventListener(t,e)}},Kg=(e,t)=>Ug.useSyncExternalStore(Qg,e,t),Jg=()=>location.search,Zg=()=>location.pathname,Xg=({ssrPath:e}={})=>Kg(Zg,e?()=>e:Zg),ex=(e,{replace:t=!1,state:n=null}={})=>history[t?$g:qg](n,"",e),tx=Symbol.for("wouter_v3");if("undefined"!=typeof history&&void 0===window[tx]){for(const e of[qg,$g]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),a=new Event(e);return a.arguments=arguments,dispatchEvent(a),n}}Object.defineProperty(window,tx,{value:!0})}const nx=(e="")=>"/"===e?"":e,ax=(e="",t)=>((e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/")(rx(nx(e)),rx(t)),rx=e=>{try{return decodeURI(e)}catch(t){return e}},sx={hook:(e={})=>[Xg(e),ex],searchHook:({ssrSearch:e=""}={})=>Kg(Jg,(()=>e)),parser:function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,a,r,s,i=[],o="",l=e.split("/");for(l[0]||l.shift();r=l.shift();)"*"===(n=r[0])?(i.push(n),o+="?"===r[1]?"(?:/(.*))?":"/(.*)"):":"===n?(a=r.indexOf("?",1),s=r.indexOf(".",1),i.push(r.substring(1,~a?a:~s?s:r.length)),o+=~a&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(o+=(~a?"?":"")+"\\"+r.substring(s))):o+="/"+r;return{keys:i,pattern:new RegExp("^"+o+(t?"(?=$|/)":"/?$"),"i")}},base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},ix=cs.createContext(sx),ox=()=>cs.useContext(ix),lx={},cx=cs.createContext(lx),dx=()=>cs.useContext(cx),ux=e=>{const[t,n]=e.hook(e);return[ax(e.base,t),Hg(((t,a)=>n(((e,t)=>"~"===e[0]?e.slice(1):nx(t)+e)(t,e.base),a)))]},fx=()=>ux(ox()),mx=(e,t,n,a)=>{const{pattern:r,keys:s}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",a),i=r.exec(n)||[],[o,...l]=i;return void 0!==o?[!0,(()=>{const e=!1!==s?Object.fromEntries(s.map(((e,t)=>[e,l[t]]))):i.groups;let t={...l};return e&&Object.assign(t,e),t})(),...a?[o]:[]]:[!1,null]},px=e=>mx(ox().parser,e,fx()[0]),hx=({children:e,...t})=>{var n,a;const r=ox(),s=t.hook?sx:r;let i=s;const[o,l]=(null==(n=t.ssrPath)?void 0:n.split("?"))??[];l&&(t.ssrSearch=l,t.ssrPath=o),t.hrefs=t.hrefs??(null==(a=t.hook)?void 0:a.hrefs);let c=cs.useRef({}),d=c.current,u=d;for(let f in s){const e="base"===f?s[f]+(t[f]||""):t[f]||s[f];d===u&&e!==u[f]&&(c.current=u={...u}),u[f]=e,e!==s[f]&&(i=u)}return cs.createElement(ix.Provider,{value:i,children:e})},gx=({children:e,component:t},n)=>t?cs.createElement(t,{params:n}):"function"==typeof e?e(n):e,xx=({path:e,nest:t,match:n,...a})=>{const r=ox(),[s]=ux(r),[i,o,l]=n??mx(r.parser,e,s,t),c=(e=>{let t=cs.useRef(lx);const n=t.current;return t.current=Object.keys(e).length!==Object.keys(n).length||Object.entries(e).some((([e,t])=>t!==n[e]))?e:n})({...dx(),...o});if(!i)return null;const d=l?cs.createElement(hx,{base:l},gx(a,c)):gx(a,c);return cs.createElement(cx.Provider,{value:c,children:d})},yx=cs.forwardRef(((e,t)=>{const n=ox(),[a,r]=ux(n),{to:s="",href:i=s,onClick:o,asChild:l,children:c,className:d,replace:u,state:f,...m}=e,p=Hg((t=>{t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||0!==t.button||(null==o||o(t),t.defaultPrevented||(t.preventDefault(),r(i,e)))})),h=n.hrefs("~"===i[0]?i.slice(1):n.base+i,n);return l&&cs.isValidElement(c)?cs.cloneElement(c,{onClick:p,href:h}):cs.createElement("a",{...m,onClick:p,href:h,className:(null==d?void 0:d.call)?d(a===i):d,children:c,ref:t})})),vx=e=>Array.isArray(e)?e.flatMap((e=>vx(e&&e.type===cs.Fragment?e.props.children:e))):[e],bx=({children:e,location:t})=>{const n=ox(),[a]=ux(n);for(const r of vx(e)){let e=0;if(cs.isValidElement(r)&&(e=mx(n.parser,r.props.path,t||a,r.props.nest))[0])return cs.cloneElement(r,{match:e})}return null},wx=e=>{const{to:t,href:n=t}=e,a=ox(),[,r]=ux(a),s=Hg((()=>r(t||n,e))),{ssrContext:i}=a;return Gg((()=>{s()}),[]),i&&(i.redirectTo=t),null};var jx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Nx="undefined"==typeof window||"Deno"in globalThis;function Cx(){}function Sx(e){return"number"==typeof e&&e>=0&&e!==1/0}function kx(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Mx(e,t){return"function"==typeof e?e(t):e}function _x(e,t){return"function"==typeof e?e(t):e}function Ix(e,t){const{type:n="all",exact:a,fetchStatus:r,predicate:s,queryKey:i,stale:o}=e;if(i)if(a){if(t.queryHash!==Ex(i,t.options))return!1}else if(!Tx(t.queryKey,i))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!r||r===t.state.fetchStatus)&&!(s&&!s(t)))}function Ax(e,t){const{exact:n,status:a,predicate:r,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(Lx(t.options.mutationKey)!==Lx(s))return!1}else if(!Tx(t.options.mutationKey,s))return!1}return(!a||t.state.status===a)&&!(r&&!r(t))}function Ex(e,t){return((null==t?void 0:t.queryKeyHashFn)||Lx)(e)}function Lx(e){return JSON.stringify(e,((e,t)=>Rx(t)?Object.keys(t).sort().reduce(((e,n)=>(e[n]=t[n],e)),{}):t))}function Tx(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every((n=>Tx(e[n],t[n]))))}function Dx(e,t){if(e===t)return e;const n=Ox(e)&&Ox(t);if(n||Rx(e)&&Rx(t)){const a=n?e:Object.keys(e),r=a.length,s=n?t:Object.keys(t),i=s.length,o=n?[]:{};let l=0;for(let c=0;c<i;c++){const r=n?c:s[c];(!n&&a.includes(r)||n)&&void 0===e[r]&&void 0===t[r]?(o[r]=void 0,l++):(o[r]=Dx(e[r],t[r]),o[r]===e[r]&&void 0!==e[r]&&l++)}return r===i&&l===r?e:o}return t}function Px(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Ox(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Rx(e){if(!zx(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!zx(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function zx(e){return"[object Object]"===Object.prototype.toString.call(e)}function Fx(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?Dx(e,t):t}function Bx(e,t,n=0){const a=[...e,t];return n&&a.length>n?a.slice(1):a}function Ux(e,t,n=0){const a=[t,...e];return n&&a.length>n?a.slice(0,-1):a}var Wx=Symbol();function Gx(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==Wx?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function Vx(e,t){return"function"==typeof e?e(...t):!!e}var Hx=new(a=class extends jx{constructor(){super(),yr(this,e),yr(this,t),yr(this,n),vr(this,n,(e=>{if(!Nx&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}))}onSubscribe(){xr(this,t)||this.setEventListener(xr(this,n))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=xr(this,t))||e.call(this),vr(this,t,void 0))}setEventListener(e){var a;vr(this,n,e),null==(a=xr(this,t))||a.call(this),vr(this,t,e((e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})))}setFocused(t){xr(this,e)!==t&&(vr(this,e,t),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){var t;return"boolean"==typeof xr(this,e)?xr(this,e):"hidden"!==(null==(t=globalThis.document)?void 0:t.visibilityState)}},e=new WeakMap,t=new WeakMap,n=new WeakMap,a),qx=new(o=class extends jx{constructor(){super(),yr(this,r,!0),yr(this,s),yr(this,i),vr(this,i,(e=>{if(!Nx&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}))}onSubscribe(){xr(this,s)||this.setEventListener(xr(this,i))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=xr(this,s))||e.call(this),vr(this,s,void 0))}setEventListener(e){var t;vr(this,i,e),null==(t=xr(this,s))||t.call(this),vr(this,s,e(this.setOnline.bind(this)))}setOnline(e){xr(this,r)!==e&&(vr(this,r,e),this.listeners.forEach((t=>{t(e)})))}isOnline(){return xr(this,r)}},r=new WeakMap,s=new WeakMap,i=new WeakMap,o);function $x(){let e,t;const n=new Promise(((n,a)=>{e=n,t=a}));function a(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch((()=>{})),n.resolve=t=>{a({status:"fulfilled",value:t}),e(t)},n.reject=e=>{a({status:"rejected",reason:e}),t(e)},n}function Yx(e){return Math.min(1e3*2**e,3e4)}function Qx(e){return"online"!==(e??"online")||qx.isOnline()}var Kx=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function Jx(e){return e instanceof Kx}function Zx(e){let t,n=!1,a=0,r=!1;const s=$x(),i=()=>Hx.isFocused()&&("always"===e.networkMode||qx.isOnline())&&e.canRun(),o=()=>Qx(e.networkMode)&&e.canRun(),l=n=>{var a;r||(r=!0,null==(a=e.onSuccess)||a.call(e,n),null==t||t(),s.resolve(n))},c=n=>{var a;r||(r=!0,null==(a=e.onError)||a.call(e,n),null==t||t(),s.reject(n))},d=()=>new Promise((n=>{var a;t=e=>{(r||i())&&n(e)},null==(a=e.onPause)||a.call(e)})).then((()=>{var n;t=void 0,r||null==(n=e.onContinue)||n.call(e)})),u=()=>{if(r)return;let t;const s=0===a?e.initialPromise:void 0;try{t=s??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch((t=>{var s;if(r)return;const o=e.retry??(Nx?0:3),l=e.retryDelay??Yx,f="function"==typeof l?l(a,t):l,m=!0===o||"number"==typeof o&&a<o||"function"==typeof o&&o(a,t);var p;!n&&m?(a++,null==(s=e.onFail)||s.call(e,a,t),(p=f,new Promise((e=>{setTimeout(e,p)}))).then((()=>i()?void 0:d())).then((()=>{n?c(t):u()}))):c(t)}))};return{promise:s,cancel:t=>{var n;r||(c(new Kx(t)),null==(n=e.abort)||n.call(e))},continue:()=>(null==t||t(),s),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:o,start:()=>(o()?u():d().then(u),s)}}var Xx=e=>setTimeout(e,0);var ey=function(){let e=[],t=0,n=e=>{e()},a=e=>{e()},r=Xx;const s=a=>{t?e.push(a):r((()=>{n(a)}))};return{batch:s=>{let i;t++;try{i=s()}finally{t--,t||(()=>{const t=e;e=[],t.length&&r((()=>{a((()=>{t.forEach((e=>{n(e)}))}))}))})()}return i},batchCalls:e=>(...t)=>{s((()=>{e(...t)}))},schedule:s,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{a=e},setScheduler:e=>{r=e}}}(),ty=(c=class{constructor(){yr(this,l)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Sx(this.gcTime)&&vr(this,l,setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Nx?1/0:3e5))}clearGcTimeout(){xr(this,l)&&(clearTimeout(xr(this,l)),vr(this,l,void 0))}},l=new WeakMap,c),ny=(v=class extends ty{constructor(e){super(),yr(this,x),yr(this,d),yr(this,u),yr(this,f),yr(this,m),yr(this,p),yr(this,h),yr(this,g),vr(this,g,!1),vr(this,h,e.defaultOptions),this.setOptions(e.options),this.observers=[],vr(this,m,e.client),vr(this,f,xr(this,m).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,vr(this,d,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,a=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=e.state??xr(this,d),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=xr(this,p))?void 0:e.promise}setOptions(e){this.options={...xr(this,h),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||xr(this,f).remove(this)}setData(e,t){const n=Fx(this.state.data,e,this.options);return br(this,x,y).call(this,{data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){br(this,x,y).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,n;const a=null==(t=xr(this,p))?void 0:t.promise;return null==(n=xr(this,p))||n.cancel(e),a?a.then(Cx).catch(Cx):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(xr(this,d))}isActive(){return this.observers.some((e=>!1!==_x(e.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Wx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some((e=>e.getCurrentResult().isStale)):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!kx(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find((e=>e.shouldFetchOnWindowFocus()));null==t||t.refetch({cancelRefetch:!1}),null==(e=xr(this,p))||e.continue()}onOnline(){var e;const t=this.observers.find((e=>e.shouldFetchOnReconnect()));null==t||t.refetch({cancelRefetch:!1}),null==(e=xr(this,p))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),xr(this,f).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(xr(this,p)&&(xr(this,g)?xr(this,p).cancel({revert:!0}):xr(this,p).cancelRetry()),this.scheduleGc()),xr(this,f).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||br(this,x,y).call(this,{type:"invalidate"})}fetch(e,t){var n,a,r;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(xr(this,p))return xr(this,p).continueRetry(),xr(this,p).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}const s=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(vr(this,g,!0),s.signal)})},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:xr(this,m),state:this.state,fetchFn:()=>{const e=Gx(this.options,t),n={client:xr(this,m),queryKey:this.queryKey,meta:this.meta};return i(n),vr(this,g,!1),this.options.persister?this.options.persister(e,n,this):e(n)}};i(o),null==(n=this.options.behavior)||n.onFetch(o,this),vr(this,u,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(a=o.fetchOptions)?void 0:a.meta)||br(this,x,y).call(this,{type:"fetch",meta:null==(r=o.fetchOptions)?void 0:r.meta});const l=e=>{var t,n,a,r;Jx(e)&&e.silent||br(this,x,y).call(this,{type:"error",error:e}),Jx(e)||(null==(n=(t=xr(this,f).config).onError)||n.call(t,e,this),null==(r=(a=xr(this,f).config).onSettled)||r.call(a,this.state.data,e,this)),this.scheduleGc()};return vr(this,p,Zx({initialPromise:null==t?void 0:t.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:e=>{var t,n,a,r;if(void 0!==e){try{this.setData(e)}catch(s){return void l(s)}null==(n=(t=xr(this,f).config).onSuccess)||n.call(t,e,this),null==(r=(a=xr(this,f).config).onSettled)||r.call(a,e,this.state.error,this),this.scheduleGc()}else l(new Error(`${this.queryHash} data is undefined`))},onError:l,onFail:(e,t)=>{br(this,x,y).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{br(this,x,y).call(this,{type:"pause"})},onContinue:()=>{br(this,x,y).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),xr(this,p).start()}},d=new WeakMap,u=new WeakMap,f=new WeakMap,m=new WeakMap,p=new WeakMap,h=new WeakMap,g=new WeakMap,x=new WeakSet,y=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...ay(t.data,this.options),fetchMeta:e.meta??null};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Jx(n)&&n.revert&&xr(this,u)?{...xr(this,u),fetchStatus:"idle"}:{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),ey.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),xr(this,f).notify({query:this,type:"updated",action:e})}))},v);function ay(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Qx(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var ry=(w=class extends jx{constructor(e={}){super(),yr(this,b),this.config=e,vr(this,b,new Map)}build(e,t,n){const a=t.queryKey,r=t.queryHash??Ex(a,t);let s=this.get(r);return s||(s=new ny({client:e,queryKey:a,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(s)),s}add(e){xr(this,b).has(e.queryHash)||(xr(this,b).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=xr(this,b).get(e.queryHash);t&&(e.destroy(),t===e&&xr(this,b).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ey.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return xr(this,b).get(e)}getAll(){return[...xr(this,b).values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>Ix(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>Ix(e,t))):t}notify(e){ey.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){ey.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){ey.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},b=new WeakMap,w),sy=(M=class extends ty{constructor(e){super(),yr(this,S),yr(this,j),yr(this,N),yr(this,C),this.mutationId=e.mutationId,vr(this,N,e.mutationCache),vr(this,j,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){xr(this,j).includes(e)||(xr(this,j).push(e),this.clearGcTimeout(),xr(this,N).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){vr(this,j,xr(this,j).filter((t=>t!==e))),this.scheduleGc(),xr(this,N).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){xr(this,j).length||("pending"===this.state.status?this.scheduleGc():xr(this,N).remove(this))}continue(){var e;return(null==(e=xr(this,C))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,n,a,r,s,i,o,l,c,d,u,f,m,p,h,g,x,y,v,b;const w=()=>{br(this,S,k).call(this,{type:"continue"})};vr(this,C,Zx({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{br(this,S,k).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{br(this,S,k).call(this,{type:"pause"})},onContinue:w,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>xr(this,N).canRun(this)}));const j="pending"===this.state.status,M=!xr(this,C).canStart();try{if(j)w();else{br(this,S,k).call(this,{type:"pending",variables:e,isPaused:M}),await(null==(n=(t=xr(this,N).config).onMutate)?void 0:n.call(t,e,this));const s=await(null==(r=(a=this.options).onMutate)?void 0:r.call(a,e));s!==this.state.context&&br(this,S,k).call(this,{type:"pending",context:s,variables:e,isPaused:M})}const m=await xr(this,C).start();return await(null==(i=(s=xr(this,N).config).onSuccess)?void 0:i.call(s,m,e,this.state.context,this)),await(null==(l=(o=this.options).onSuccess)?void 0:l.call(o,m,e,this.state.context)),await(null==(d=(c=xr(this,N).config).onSettled)?void 0:d.call(c,m,null,this.state.variables,this.state.context,this)),await(null==(f=(u=this.options).onSettled)?void 0:f.call(u,m,null,e,this.state.context)),br(this,S,k).call(this,{type:"success",data:m}),m}catch(_){try{throw await(null==(p=(m=xr(this,N).config).onError)?void 0:p.call(m,_,e,this.state.context,this)),await(null==(g=(h=this.options).onError)?void 0:g.call(h,_,e,this.state.context)),await(null==(y=(x=xr(this,N).config).onSettled)?void 0:y.call(x,void 0,_,this.state.variables,this.state.context,this)),await(null==(b=(v=this.options).onSettled)?void 0:b.call(v,void 0,_,e,this.state.context)),_}finally{br(this,S,k).call(this,{type:"error",error:_})}}finally{xr(this,N).runNext(this)}}},j=new WeakMap,N=new WeakMap,C=new WeakMap,S=new WeakSet,k=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),ey.batch((()=>{xr(this,j).forEach((t=>{t.onMutationUpdate(e)})),xr(this,N).notify({mutation:this,type:"updated",action:e})}))},M);var iy=(E=class extends jx{constructor(e={}){super(),yr(this,_),yr(this,I),yr(this,A),this.config=e,vr(this,_,new Set),vr(this,I,new Map),vr(this,A,0)}build(e,t,n){const a=new sy({mutationCache:this,mutationId:++wr(this,A)._,options:e.defaultMutationOptions(t),state:n});return this.add(a),a}add(e){xr(this,_).add(e);const t=oy(e);if("string"==typeof t){const n=xr(this,I).get(t);n?n.push(e):xr(this,I).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(xr(this,_).delete(e)){const t=oy(e);if("string"==typeof t){const n=xr(this,I).get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&xr(this,I).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=oy(e);if("string"==typeof t){const n=xr(this,I).get(t),a=null==n?void 0:n.find((e=>"pending"===e.state.status));return!a||a===e}return!0}runNext(e){var t;const n=oy(e);if("string"==typeof n){const a=null==(t=xr(this,I).get(n))?void 0:t.find((t=>t!==e&&t.state.isPaused));return(null==a?void 0:a.continue())??Promise.resolve()}return Promise.resolve()}clear(){ey.batch((()=>{xr(this,_).forEach((e=>{this.notify({type:"removed",mutation:e})})),xr(this,_).clear(),xr(this,I).clear()}))}getAll(){return Array.from(xr(this,_))}find(e){const t={exact:!0,...e};return this.getAll().find((e=>Ax(t,e)))}findAll(e={}){return this.getAll().filter((t=>Ax(e,t)))}notify(e){ey.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return ey.batch((()=>Promise.all(e.map((e=>e.continue().catch(Cx))))))}},_=new WeakMap,I=new WeakMap,A=new WeakMap,E);function oy(e){var t;return null==(t=e.options.scope)?void 0:t.id}function ly(e){return{onFetch:(t,n)=>{var a,r,s,i,o;const l=t.options,c=null==(s=null==(r=null==(a=t.fetchOptions)?void 0:a.meta)?void 0:r.fetchMore)?void 0:s.direction,d=(null==(i=t.state.data)?void 0:i.pages)||[],u=(null==(o=t.state.data)?void 0:o.pageParams)||[];let f={pages:[],pageParams:[]},m=0;const p=async()=>{let n=!1;const a=Gx(t.options,t.fetchOptions),r=async(e,r,s)=>{if(n)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);const i={client:t.client,queryKey:t.queryKey,pageParam:r,direction:s?"backward":"forward",meta:t.options.meta};var o;o=i,Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",(()=>{n=!0})),t.signal)});const l=await a(i),{maxPages:c}=t.options,d=s?Ux:Bx;return{pages:d(e.pages,l,c),pageParams:d(e.pageParams,r,c)}};if(c&&d.length){const e="backward"===c,t={pages:d,pageParams:u},n=(e?dy:cy)(l,t);f=await r(t,n,e)}else{const t=e??d.length;do{const e=0===m?u[0]??l.initialPageParam:cy(l,f);if(m>0&&null==e)break;f=await r(f,e),m++}while(m<t)}return f};t.options.persister?t.fetchFn=()=>{var e,a;return null==(a=(e=t.options).persister)?void 0:a.call(e,p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=p}}}function cy(e,{pages:t,pageParams:n}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,n[a],n):void 0}function dy(e,{pages:t,pageParams:n}){var a;return t.length>0?null==(a=e.getPreviousPageParam)?void 0:a.call(e,t[0],t,n[0],n):void 0}var uy=(B=class{constructor(e={}){yr(this,L),yr(this,T),yr(this,D),yr(this,P),yr(this,O),yr(this,R),yr(this,z),yr(this,F),vr(this,L,e.queryCache||new ry),vr(this,T,e.mutationCache||new iy),vr(this,D,e.defaultOptions||{}),vr(this,P,new Map),vr(this,O,new Map),vr(this,R,0)}mount(){wr(this,R)._++,1===xr(this,R)&&(vr(this,z,Hx.subscribe((async e=>{e&&(await this.resumePausedMutations(),xr(this,L).onFocus())}))),vr(this,F,qx.subscribe((async e=>{e&&(await this.resumePausedMutations(),xr(this,L).onOnline())}))))}unmount(){var e,t;wr(this,R)._--,0===xr(this,R)&&(null==(e=xr(this,z))||e.call(this),vr(this,z,void 0),null==(t=xr(this,F))||t.call(this),vr(this,F,void 0))}isFetching(e){return xr(this,L).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return xr(this,T).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=xr(this,L).get(n.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=xr(this,L).build(this,t),a=n.state.data;return void 0===a?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Mx(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return xr(this,L).findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,n){const a=this.defaultQueryOptions({queryKey:e}),r=xr(this,L).get(a.queryHash),s=function(e,t){return"function"==typeof e?e(t):e}(t,null==r?void 0:r.state.data);if(void 0!==s)return xr(this,L).build(this,a).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return ey.batch((()=>xr(this,L).findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,n)]))))}getQueryState(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=xr(this,L).get(n.queryHash))?void 0:t.state}removeQueries(e){const t=xr(this,L);ey.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const n=xr(this,L);return ey.batch((()=>(n.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries({type:"active",...e},t))))}cancelQueries(e,t={}){const n={revert:!0,...t},a=ey.batch((()=>xr(this,L).findAll(e).map((e=>e.cancel(n)))));return Promise.all(a).then(Cx).catch(Cx)}invalidateQueries(e,t={}){return ey.batch((()=>(xr(this,L).findAll(e).forEach((e=>{e.invalidate()})),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries({...e,type:(null==e?void 0:e.refetchType)??(null==e?void 0:e.type)??"active"},t))))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},a=ey.batch((()=>xr(this,L).findAll(e).filter((e=>!e.isDisabled())).map((e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(Cx)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(a).then(Cx)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=xr(this,L).build(this,t);return n.isStaleByTime(Mx(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Cx).catch(Cx)}fetchInfiniteQuery(e){return e.behavior=ly(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Cx).catch(Cx)}ensureInfiniteQueryData(e){return e.behavior=ly(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return qx.isOnline()?xr(this,T).resumePausedMutations():Promise.resolve()}getQueryCache(){return xr(this,L)}getMutationCache(){return xr(this,T)}getDefaultOptions(){return xr(this,D)}setDefaultOptions(e){vr(this,D,e)}setQueryDefaults(e,t){xr(this,P).set(Lx(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...xr(this,P).values()],n={};return t.forEach((t=>{Tx(e,t.queryKey)&&Object.assign(n,t.defaultOptions)})),n}setMutationDefaults(e,t){xr(this,O).set(Lx(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...xr(this,O).values()],n={};return t.forEach((t=>{Tx(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)})),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...xr(this,D).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ex(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Wx&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...xr(this,D).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){xr(this,L).clear(),xr(this,T).clear()}},L=new WeakMap,T=new WeakMap,D=new WeakMap,P=new WeakMap,O=new WeakMap,R=new WeakMap,z=new WeakMap,F=new WeakMap,B),fy=(fe=class extends jx{constructor(e,t){super(),yr(this,ne),yr(this,U),yr(this,W),yr(this,G),yr(this,V),yr(this,H),yr(this,q),yr(this,$),yr(this,Y),yr(this,Q),yr(this,K),yr(this,J),yr(this,Z),yr(this,X),yr(this,ee),yr(this,te,new Set),this.options=t,vr(this,U,e),vr(this,Y,null),vr(this,$,$x()),this.options.experimental_prefetchInRender||xr(this,$).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(xr(this,W).addObserver(this),my(xr(this,W),this.options)?br(this,ne,ae).call(this):this.updateResult(),br(this,ne,oe).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return py(xr(this,W),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return py(xr(this,W),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,br(this,ne,le).call(this),br(this,ne,ce).call(this),xr(this,W).removeObserver(this)}setOptions(e){const t=this.options,n=xr(this,W);if(this.options=xr(this,U).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof _x(this.options.enabled,xr(this,W)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");br(this,ne,de).call(this),xr(this,W).setOptions(this.options),t._defaulted&&!Px(this.options,t)&&xr(this,U).getQueryCache().notify({type:"observerOptionsUpdated",query:xr(this,W),observer:this});const a=this.hasListeners();a&&hy(xr(this,W),n,this.options,t)&&br(this,ne,ae).call(this),this.updateResult(),!a||xr(this,W)===n&&_x(this.options.enabled,xr(this,W))===_x(t.enabled,xr(this,W))&&Mx(this.options.staleTime,xr(this,W))===Mx(t.staleTime,xr(this,W))||br(this,ne,re).call(this);const r=br(this,ne,se).call(this);!a||xr(this,W)===n&&_x(this.options.enabled,xr(this,W))===_x(t.enabled,xr(this,W))&&r===xr(this,ee)||br(this,ne,ie).call(this,r)}getOptimisticResult(e){const t=xr(this,U).getQueryCache().build(xr(this,U),e),n=this.createResult(t,e);return function(e,t){if(!Px(e.getCurrentResult(),t))return!0;return!1}(this,n)&&(vr(this,V,n),vr(this,q,this.options),vr(this,H,xr(this,W).state)),n}getCurrentResult(){return xr(this,V)}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),null==t||t(n),Reflect.get(e,n))})}trackProp(e){xr(this,te).add(e)}getCurrentQuery(){return xr(this,W)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=xr(this,U).defaultQueryOptions(e),n=xr(this,U).getQueryCache().build(xr(this,U),t);return n.fetch().then((()=>this.createResult(n,t)))}fetch(e){return br(this,ne,ae).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then((()=>(this.updateResult(),xr(this,V))))}createResult(e,t){var n;const a=xr(this,W),r=this.options,s=xr(this,V),i=xr(this,H),o=xr(this,q),l=e!==a?e.state:xr(this,G),{state:c}=e;let d,u={...c},f=!1;if(t._optimisticResults){const n=this.hasListeners(),s=!n&&my(e,t),i=n&&hy(e,a,t,r);(s||i)&&(u={...u,...ay(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:p,status:h}=u;d=u.data;let g=!1;if(void 0!==t.placeholderData&&void 0===d&&"pending"===h){let e;(null==s?void 0:s.isPlaceholderData)&&t.placeholderData===(null==o?void 0:o.placeholderData)?(e=s.data,g=!0):e="function"==typeof t.placeholderData?t.placeholderData(null==(n=xr(this,J))?void 0:n.state.data,xr(this,J)):t.placeholderData,void 0!==e&&(h="success",d=Fx(null==s?void 0:s.data,e,t),f=!0)}if(t.select&&void 0!==d&&!g)if(s&&d===(null==i?void 0:i.data)&&t.select===xr(this,Q))d=xr(this,K);else try{vr(this,Q,t.select),d=t.select(d),d=Fx(null==s?void 0:s.data,d,t),vr(this,K,d),vr(this,Y,null)}catch(N){vr(this,Y,N)}xr(this,Y)&&(m=xr(this,Y),d=xr(this,K),p=Date.now(),h="error");const x="fetching"===u.fetchStatus,y="pending"===h,v="error"===h,b=y&&x,w=void 0!==d,j={status:h,fetchStatus:u.fetchStatus,isPending:y,isSuccess:"success"===h,isError:v,isInitialLoading:b,isLoading:b,data:d,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:x,isRefetching:x&&!y,isLoadingError:v&&!w,isPaused:"paused"===u.fetchStatus,isPlaceholderData:f,isRefetchError:v&&w,isStale:gy(e,t),refetch:this.refetch,promise:xr(this,$)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===j.status?e.reject(j.error):void 0!==j.data&&e.resolve(j.data)},n=()=>{const e=vr(this,$,j.promise=$x());t(e)},r=xr(this,$);switch(r.status){case"pending":e.queryHash===a.queryHash&&t(r);break;case"fulfilled":"error"!==j.status&&j.data===r.value||n();break;case"rejected":"error"===j.status&&j.error===r.reason||n()}}return j}updateResult(){const e=xr(this,V),t=this.createResult(xr(this,W),this.options);if(vr(this,H,xr(this,W).state),vr(this,q,this.options),void 0!==xr(this,H).data&&vr(this,J,xr(this,W)),Px(t,e))return;vr(this,V,t);br(this,ne,ue).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,n="function"==typeof t?t():t;if("all"===n||!n&&!xr(this,te).size)return!0;const a=new Set(n??xr(this,te));return this.options.throwOnError&&a.add("error"),Object.keys(xr(this,V)).some((t=>{const n=t;return xr(this,V)[n]!==e[n]&&a.has(n)}))})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&br(this,ne,oe).call(this)}},U=new WeakMap,W=new WeakMap,G=new WeakMap,V=new WeakMap,H=new WeakMap,q=new WeakMap,$=new WeakMap,Y=new WeakMap,Q=new WeakMap,K=new WeakMap,J=new WeakMap,Z=new WeakMap,X=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakSet,ae=function(e){br(this,ne,de).call(this);let t=xr(this,W).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(Cx)),t},re=function(){br(this,ne,le).call(this);const e=Mx(this.options.staleTime,xr(this,W));if(Nx||xr(this,V).isStale||!Sx(e))return;const t=kx(xr(this,V).dataUpdatedAt,e);vr(this,Z,setTimeout((()=>{xr(this,V).isStale||this.updateResult()}),t+1))},se=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(xr(this,W)):this.options.refetchInterval)??!1},ie=function(e){br(this,ne,ce).call(this),vr(this,ee,e),!Nx&&!1!==_x(this.options.enabled,xr(this,W))&&Sx(xr(this,ee))&&0!==xr(this,ee)&&vr(this,X,setInterval((()=>{(this.options.refetchIntervalInBackground||Hx.isFocused())&&br(this,ne,ae).call(this)}),xr(this,ee)))},oe=function(){br(this,ne,re).call(this),br(this,ne,ie).call(this,br(this,ne,se).call(this))},le=function(){xr(this,Z)&&(clearTimeout(xr(this,Z)),vr(this,Z,void 0))},ce=function(){xr(this,X)&&(clearInterval(xr(this,X)),vr(this,X,void 0))},de=function(){const e=xr(this,U).getQueryCache().build(xr(this,U),this.options);if(e===xr(this,W))return;const t=xr(this,W);vr(this,W,e),vr(this,G,e.state),this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))},ue=function(e){ey.batch((()=>{e.listeners&&this.listeners.forEach((e=>{e(xr(this,V))})),xr(this,U).getQueryCache().notify({query:xr(this,W),type:"observerResultsUpdated"})}))},fe);function my(e,t){return function(e,t){return!1!==_x(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&py(e,t,t.refetchOnMount)}function py(e,t,n){if(!1!==_x(t.enabled,e)){const a="function"==typeof n?n(e):n;return"always"===a||!1!==a&&gy(e,t)}return!1}function hy(e,t,n,a){return(e!==t||!1===_x(a.enabled,e))&&(!n.suspense||"error"!==e.state.status)&&gy(e,n)}function gy(e,t){return!1!==_x(t.enabled,e)&&e.isStaleByTime(Mx(t.staleTime,e))}var xy=(be=class extends jx{constructor(e,t){super(),yr(this,xe),yr(this,me),yr(this,pe),yr(this,he),yr(this,ge),vr(this,me,e),this.setOptions(t),this.bindMethods(),br(this,xe,ye).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const n=this.options;this.options=xr(this,me).defaultMutationOptions(e),Px(this.options,n)||xr(this,me).getMutationCache().notify({type:"observerOptionsUpdated",mutation:xr(this,he),observer:this}),(null==n?void 0:n.mutationKey)&&this.options.mutationKey&&Lx(n.mutationKey)!==Lx(this.options.mutationKey)?this.reset():"pending"===(null==(t=xr(this,he))?void 0:t.state.status)&&xr(this,he).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=xr(this,he))||e.removeObserver(this)}onMutationUpdate(e){br(this,xe,ye).call(this),br(this,xe,ve).call(this,e)}getCurrentResult(){return xr(this,pe)}reset(){var e;null==(e=xr(this,he))||e.removeObserver(this),vr(this,he,void 0),br(this,xe,ye).call(this),br(this,xe,ve).call(this)}mutate(e,t){var n;return vr(this,ge,t),null==(n=xr(this,he))||n.removeObserver(this),vr(this,he,xr(this,me).getMutationCache().build(xr(this,me),this.options)),xr(this,he).addObserver(this),xr(this,he).execute(e)}},me=new WeakMap,pe=new WeakMap,he=new WeakMap,ge=new WeakMap,xe=new WeakSet,ye=function(){var e;const t=(null==(e=xr(this,he))?void 0:e.state)??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};vr(this,pe,{...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset})},ve=function(e){ey.batch((()=>{var t,n,a,r,s,i,o,l;if(xr(this,ge)&&this.hasListeners()){const c=xr(this,pe).variables,d=xr(this,pe).context;"success"===(null==e?void 0:e.type)?(null==(n=(t=xr(this,ge)).onSuccess)||n.call(t,e.data,c,d),null==(r=(a=xr(this,ge)).onSettled)||r.call(a,e.data,null,c,d)):"error"===(null==e?void 0:e.type)&&(null==(i=(s=xr(this,ge)).onError)||i.call(s,e.error,c,d),null==(l=(o=xr(this,ge)).onSettled)||l.call(o,void 0,e.error,c,d))}this.listeners.forEach((e=>{e(xr(this,pe))}))}))},be),yy=cs.createContext(void 0),vy=e=>{const t=cs.useContext(yy);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},by=({client:e,children:t})=>(cs.useEffect((()=>(e.mount(),()=>{e.unmount()})),[e]),vs.jsx(yy.Provider,{value:e,children:t})),wy=cs.createContext(!1);wy.Provider;var jy=cs.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),Ny=(e,t,n)=>t.fetchOptimistic(e).catch((()=>{n.clearReset()}));function Cy(e,t,n){var a,r,s,i,o;const l=vy(),c=cs.useContext(wy),d=cs.useContext(jy),u=l.defaultQueryOptions(e);null==(r=null==(a=l.getDefaultOptions().queries)?void 0:a._experimental_beforeQuery)||r.call(a,u),u._optimisticResults=c?"isRestoring":"optimistic",(e=>{const t=e.staleTime;e.suspense&&(e.staleTime="function"==typeof t?(...e)=>Math.max(t(...e),1e3):Math.max(t??1e3,1e3),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3)))})(u),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(u,d),(e=>{cs.useEffect((()=>{e.clearReset()}),[e])})(d);const f=!l.getQueryCache().get(u.queryHash),[m]=cs.useState((()=>new t(l,u))),p=m.getOptimisticResult(u),h=!c&&!1!==e.subscribed;if(cs.useSyncExternalStore(cs.useCallback((e=>{const t=h?m.subscribe(ey.batchCalls(e)):Cx;return m.updateResult(),t}),[m,h]),(()=>m.getCurrentResult()),(()=>m.getCurrentResult())),cs.useEffect((()=>{m.setOptions(u)}),[u,m]),((e,t)=>(null==e?void 0:e.suspense)&&t.isPending)(u,p))throw Ny(u,m,d);if((({result:e,errorResetBoundary:t,throwOnError:n,query:a,suspense:r})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(r&&void 0===e.data||Vx(n,[e.error,a])))({result:p,errorResetBoundary:d,throwOnError:u.throwOnError,query:l.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw p.error;if(null==(i=null==(s=l.getDefaultOptions().queries)?void 0:s._experimental_afterQuery)||i.call(s,u,p),u.experimental_prefetchInRender&&!Nx&&((e,t)=>e.isLoading&&e.isFetching&&!t)(p,c)){const e=f?Ny(u,m,d):null==(o=l.getQueryCache().get(u.queryHash))?void 0:o.promise;null==e||e.catch(Cx).finally((()=>{m.updateResult()}))}return u.notifyOnChangeProps?p:m.trackResult(p)}function Sy(e,t){return Cy(e,fy)}function ky(e,t){const n=vy(),[a]=cs.useState((()=>new xy(n,e)));cs.useEffect((()=>{a.setOptions(e)}),[a,e]);const r=cs.useSyncExternalStore(cs.useCallback((e=>a.subscribe(ey.batchCalls(e))),[a]),(()=>a.getCurrentResult()),(()=>a.getCurrentResult())),s=cs.useCallback(((e,t)=>{a.mutate(e,t).catch(Cx)}),[a]);if(r.error&&Vx(a.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:s,mutateAsync:r.mutate}}async function My(e){if(!e.ok){if(503===e.status)try{if((await e.json()).maintenanceMode)throw"/maintenance"!==window.location.pathname&&(window.location.href="/maintenance"),new Error("System is under maintenance")}catch(t){}const n=await e.text()||e.statusText;throw new Error(`${e.status}: ${n}`)}}async function _y(e,t,n){const a=await fetch(t,{method:e,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await My(a),a}const Iy=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});if("returnNull"===e&&401===n.status)return null;if(503===n.status)try{if((await n.json()).maintenanceMode)throw"/maintenance"!==window.location.pathname&&(window.location.href="/maintenance"),new Error("System is under maintenance")}catch(a){}return await My(n),await n.json()},Ay=new uy({defaultOptions:{queries:{queryFn:Iy({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});let Ey=0;const Ly=new Map,Ty=e=>{if(Ly.has(e))return;const t=setTimeout((()=>{Ly.delete(e),Ry({type:"REMOVE_TOAST",toastId:e})}),1e6);Ly.set(e,t)},Dy=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Ty(n):e.toasts.forEach((e=>{Ty(e.id)})),{...e,toasts:e.toasts.map((e=>e.id===n||void 0===n?{...e,open:!1}:e))}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))}}},Py=[];let Oy={toasts:[]};function Ry(e){Oy=Dy(Oy,e),Py.forEach((e=>{e(Oy)}))}function zy({...e}){const t=(Ey=(Ey+1)%Number.MAX_SAFE_INTEGER,Ey.toString()),n=()=>Ry({type:"DISMISS_TOAST",toastId:t});return Ry({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>Ry({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function Fy(){const[e,t]=cs.useState(Oy);return cs.useEffect((()=>(Py.push(t),()=>{const e=Py.indexOf(t);e>-1&&Py.splice(e,1)})),[e]),{...e,toast:zy,dismiss:e=>Ry({type:"DISMISS_TOAST",toastId:e})}}function By(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(null==e||e(a),!1===n||!a.defaultPrevented)return null==t?void 0:t(a)}}function Uy(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Wy(...e){return t=>{let n=!1;const a=e.map((e=>{const a=Uy(e,t);return n||"function"!=typeof a||(n=!0),a}));if(n)return()=>{for(let t=0;t<a.length;t++){const n=a[t];"function"==typeof n?n():Uy(e[t],null)}}}}function Gy(...e){return cs.useCallback(Wy(...e),e)}function Vy(e,t=[]){let n=[];const a=()=>{const t=n.map((e=>cs.createContext(e)));return function(n){const a=(null==n?void 0:n[e])||t;return cs.useMemo((()=>({[`__scope${e}`]:{...n,[e]:a}})),[n,a])}};return a.scopeName=e,[function(t,a){const r=cs.createContext(a),s=n.length;n=[...n,a];const i=t=>{var n;const{scope:a,children:i,...o}=t,l=(null==(n=null==a?void 0:a[e])?void 0:n[s])||r,c=cs.useMemo((()=>o),Object.values(o));return vs.jsx(l.Provider,{value:c,children:i})};return i.displayName=t+"Provider",[i,function(n,i){var o;const l=(null==(o=null==i?void 0:i[e])?void 0:o[s])||r,c=cs.useContext(l);if(c)return c;if(void 0!==a)return a;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},Hy(a,...t)]}function Hy(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const a=n.reduce(((t,{useScope:n,scopeName:a})=>({...t,...n(e)[`__scope${a}`]})),{});return cs.useMemo((()=>({[`__scope${t.scopeName}`]:a})),[a])}};return n.scopeName=t.scopeName,n}function qy(e){const t=Yy(e),n=cs.forwardRef(((e,n)=>{const{children:a,...r}=e,s=cs.Children.toArray(a),i=s.find(Jy);if(i){const e=i.props.children,a=s.map((t=>t===i?cs.Children.count(e)>1?cs.Children.only(null):cs.isValidElement(e)?e.props.children:null:t));return vs.jsx(t,{...r,ref:n,children:cs.isValidElement(e)?cs.cloneElement(e,void 0,a):null})}return vs.jsx(t,{...r,ref:n,children:a})}));return n.displayName=`${e}.Slot`,n}var $y=qy("Slot");function Yy(e){const t=cs.forwardRef(((e,t)=>{const{children:n,...a}=e;if(cs.isValidElement(n)){const e=function(e){var t,n;let a=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,r=a&&"isReactWarning"in a&&a.isReactWarning;if(r)return e.ref;if(a=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(n),r=function(e,t){const n={...t};for(const a in t){const r=e[a],s=t[a];/^on[A-Z]/.test(a)?r&&s?n[a]=(...e)=>{const t=s(...e);return r(...e),t}:r&&(n[a]=r):"style"===a?n[a]={...r,...s}:"className"===a&&(n[a]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==cs.Fragment&&(r.ref=t?Wy(t,e):e),cs.cloneElement(n,r)}return cs.Children.count(n)>1?cs.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}var Qy=Symbol("radix.slottable");function Ky(e){const t=({children:e})=>vs.jsx(vs.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=Qy,t}function Jy(e){return cs.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Qy}function Zy(e){const t=e+"CollectionProvider",[n,a]=Vy(t),[r,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{const{scope:t,children:n}=e,a=ds.useRef(null),s=ds.useRef(new Map).current;return vs.jsx(r,{scope:t,itemMap:s,collectionRef:a,children:n})};i.displayName=t;const o=e+"CollectionSlot",l=qy(o),c=ds.forwardRef(((e,t)=>{const{scope:n,children:a}=e,r=Gy(t,s(o,n).collectionRef);return vs.jsx(l,{ref:r,children:a})}));c.displayName=o;const d=e+"CollectionItemSlot",u="data-radix-collection-item",f=qy(d),m=ds.forwardRef(((e,t)=>{const{scope:n,children:a,...r}=e,i=ds.useRef(null),o=Gy(t,i),l=s(d,n);return ds.useEffect((()=>(l.itemMap.set(i,{ref:i,...r}),()=>{l.itemMap.delete(i)}))),vs.jsx(f,{[u]:"",ref:o,children:a})}));return m.displayName=d,[{Provider:i,Slot:c,ItemSlot:m},function(t){const n=s(e+"CollectionConsumer",t),a=ds.useCallback((()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${u}]`)),a=Array.from(n.itemMap.values()).sort(((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current)));return a}),[n.collectionRef,n.itemMap]);return a},a]}var Xy=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((e,t)=>{const n=qy(`Primitive.${t}`),a=cs.forwardRef(((e,a)=>{const{asChild:r,...s}=e,i=r?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),vs.jsx(i,{...s,ref:a})}));return a.displayName=`Primitive.${t}`,{...e,[t]:a}}),{});function ev(e,t){e&&Sg.flushSync((()=>e.dispatchEvent(t)))}function tv(e){const t=cs.useRef(e);return cs.useEffect((()=>{t.current=e})),cs.useMemo((()=>(...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)}),[])}var nv,av="dismissableLayer.update",rv="dismissableLayer.pointerDownOutside",sv="dismissableLayer.focusOutside",iv=cs.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ov=cs.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:i,onDismiss:o,...l}=e,c=cs.useContext(iv),[d,u]=cs.useState(null),f=(null==d?void 0:d.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,m]=cs.useState({}),p=Gy(t,(e=>u(e))),h=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=h.indexOf(g),y=d?h.indexOf(d):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,b=y>=x,w=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=tv(e),a=cs.useRef(!1),r=cs.useRef((()=>{}));return cs.useEffect((()=>{const e=e=>{if(e.target&&!a.current){let a=function(){dv(rv,n,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",r.current),r.current=a,t.addEventListener("click",r.current,{once:!0})):a()}else t.removeEventListener("click",r.current);a.current=!1},s=window.setTimeout((()=>{t.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",r.current)}}),[t,n]),{onPointerDownCapture:()=>a.current=!0}}((e=>{const t=e.target,n=[...c.branches].some((e=>e.contains(t)));b&&!n&&(null==r||r(e),null==i||i(e),e.defaultPrevented||null==o||o())}),f),j=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=tv(e),a=cs.useRef(!1);return cs.useEffect((()=>{const e=e=>{if(e.target&&!a.current){dv(sv,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)}),[t,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}((e=>{const t=e.target;[...c.branches].some((e=>e.contains(t)))||(null==s||s(e),null==i||i(e),e.defaultPrevented||null==o||o())}),f);return function(e,t=(null==globalThis?void 0:globalThis.document)){const n=tv(e);cs.useEffect((()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})}),[n,t])}((e=>{y===c.layers.size-1&&(null==a||a(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))}),f),cs.useEffect((()=>{if(d)return n&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(nv=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),cv(),()=>{n&&1===c.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=nv)}}),[d,f,n,c]),cs.useEffect((()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),cv())}),[d,c]),cs.useEffect((()=>{const e=()=>m({});return document.addEventListener(av,e),()=>document.removeEventListener(av,e)}),[]),vs.jsx(Xy.div,{...l,ref:p,style:{pointerEvents:v?b?"auto":"none":void 0,...e.style},onFocusCapture:By(e.onFocusCapture,j.onFocusCapture),onBlurCapture:By(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:By(e.onPointerDownCapture,w.onPointerDownCapture)})}));ov.displayName="DismissableLayer";var lv=cs.forwardRef(((e,t)=>{const n=cs.useContext(iv),a=cs.useRef(null),r=Gy(t,a);return cs.useEffect((()=>{const e=a.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}}),[n.branches]),vs.jsx(Xy.div,{...e,ref:r})}));function cv(){const e=new CustomEvent(av);document.dispatchEvent(e)}function dv(e,t,n,{discrete:a}){const r=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),a?ev(r,s):r.dispatchEvent(s)}lv.displayName="DismissableLayerBranch";var uv=ov,fv=lv,mv=(null==globalThis?void 0:globalThis.document)?cs.useLayoutEffect:()=>{},pv=cs.forwardRef(((e,t)=>{var n;const{container:a,...r}=e,[s,i]=cs.useState(!1);mv((()=>i(!0)),[]);const o=a||s&&(null==(n=null==globalThis?void 0:globalThis.document)?void 0:n.body);return o?kg.createPortal(vs.jsx(Xy.div,{...r,ref:t}),o):null}));pv.displayName="Portal";var hv=e=>{const{present:t,children:n}=e,a=function(e){const[t,n]=cs.useState(),a=cs.useRef(null),r=cs.useRef(e),s=cs.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return cs.useReducer(((e,n)=>t[e][n]??e),e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return cs.useEffect((()=>{const e=gv(a.current);s.current="mounted"===o?e:"none"}),[o]),mv((()=>{const t=a.current,n=r.current;if(n!==e){const a=s.current,i=gv(t);if(e)l("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(n&&a!==i?"ANIMATION_OUT":"UNMOUNT")}r.current=e}}),[e,l]),mv((()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,i=s=>{const i=gv(a.current).includes(s.animationName);if(s.target===t&&i&&(l("ANIMATION_END"),!r.current)){const a=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout((()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=a)}))}},o=e=>{e.target===t&&(s.current=gv(a.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}}l("ANIMATION_END")}),[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:cs.useCallback((e=>{a.current=e?getComputedStyle(e):null,n(e)}),[])}}(t),r="function"==typeof n?n({present:a.isPresent}):cs.Children.only(n),s=Gy(a.ref,function(e){var t,n;let a=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,r=a&&"isReactWarning"in a&&a.isReactWarning;if(r)return e.ref;if(a=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(r));return"function"==typeof n||a.isPresent?cs.cloneElement(r,{ref:s}):null};function gv(e){return(null==e?void 0:e.animationName)||"none"}hv.displayName="Presence";var xv=us[" useInsertionEffect ".trim().toString()]||mv;function yv({prop:e,defaultProp:t,onChange:n=()=>{},caller:a}){const[r,s,i]=function({defaultProp:e,onChange:t}){const[n,a]=cs.useState(e),r=cs.useRef(n),s=cs.useRef(t);return xv((()=>{s.current=t}),[t]),cs.useEffect((()=>{var e;r.current!==n&&(null==(e=s.current)||e.call(s,n),r.current=n)}),[n,r]),[n,a,s]}({defaultProp:t,onChange:n}),o=void 0!==e,l=o?e:r;{const t=cs.useRef(void 0!==e);cs.useEffect((()=>{const e=t.current;if(e!==o){}t.current=o}),[o,a])}const c=cs.useCallback((t=>{var n;if(o){const a=function(e){return"function"==typeof e}(t)?t(e):t;a!==e&&(null==(n=i.current)||n.call(i,a))}else s(t)}),[o,e,s,i]);return[l,c]}var vv=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),bv=cs.forwardRef(((e,t)=>vs.jsx(Xy.span,{...e,ref:t,style:{...vv,...e.style}})));bv.displayName="VisuallyHidden";var wv=bv,jv="ToastProvider",[Nv,Cv,Sv]=Zy("Toast"),[kv,Mv]=Vy("Toast",[Sv]),[_v,Iv]=kv(jv),Av=e=>{const{__scopeToast:t,label:n="Notification",duration:a=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:i}=e,[o,l]=cs.useState(null),[c,d]=cs.useState(0),u=cs.useRef(!1),f=cs.useRef(!1);return n.trim(),vs.jsx(Nv.Provider,{scope:t,children:vs.jsx(_v,{scope:t,label:n,duration:a,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:cs.useCallback((()=>d((e=>e+1))),[]),onToastRemove:cs.useCallback((()=>d((e=>e-1))),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:f,children:i})})};Av.displayName=jv;var Ev="ToastViewport",Lv=["F8"],Tv="toast.viewportPause",Dv="toast.viewportResume",Pv=cs.forwardRef(((e,t)=>{const{__scopeToast:n,hotkey:a=Lv,label:r="Notifications ({hotkey})",...s}=e,i=Iv(Ev,n),o=Cv(n),l=cs.useRef(null),c=cs.useRef(null),d=cs.useRef(null),u=cs.useRef(null),f=Gy(t,u,i.onViewportChange),m=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=i.toastCount>0;cs.useEffect((()=>{const e=e=>{var t;0!==a.length&&a.every((t=>e[t]||e.code===t))&&(null==(t=u.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[a]),cs.useEffect((()=>{const e=l.current,t=u.current;if(p&&e&&t){const n=()=>{if(!i.isClosePausedRef.current){const e=new CustomEvent(Tv);t.dispatchEvent(e),i.isClosePausedRef.current=!0}},a=()=>{if(i.isClosePausedRef.current){const e=new CustomEvent(Dv);t.dispatchEvent(e),i.isClosePausedRef.current=!1}},r=t=>{!e.contains(t.relatedTarget)&&a()},s=()=>{e.contains(document.activeElement)||a()};return e.addEventListener("focusin",n),e.addEventListener("focusout",r),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",s),window.addEventListener("blur",n),window.addEventListener("focus",a),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",r),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",n),window.removeEventListener("focus",a)}}}),[p,i.isClosePausedRef]);const h=cs.useCallback((({tabbingDirection:e})=>{const t=o().map((t=>{const n=t.ref.current,a=[n,...Xv(n)];return"forwards"===e?a:a.reverse()}));return("forwards"===e?t.reverse():t).flat()}),[o]);return cs.useEffect((()=>{const e=u.current;if(e){const t=t=>{var n,a,r;const s=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!s){const s=document.activeElement,i=t.shiftKey;if(t.target===e&&i)return void(null==(n=c.current)||n.focus());const o=h({tabbingDirection:i?"backwards":"forwards"}),l=o.findIndex((e=>e===s));eb(o.slice(l+1))?t.preventDefault():i?null==(a=c.current)||a.focus():null==(r=d.current)||r.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}}),[o,h]),vs.jsxs(fv,{ref:l,role:"region","aria-label":r.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&vs.jsx(Rv,{ref:c,onFocusFromOutsideViewport:()=>{eb(h({tabbingDirection:"forwards"}))}}),vs.jsx(Nv.Slot,{scope:n,children:vs.jsx(Xy.ol,{tabIndex:-1,...s,ref:f})}),p&&vs.jsx(Rv,{ref:d,onFocusFromOutsideViewport:()=>{eb(h({tabbingDirection:"backwards"}))}})]})}));Pv.displayName=Ev;var Ov="ToastFocusProxy",Rv=cs.forwardRef(((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:a,...r}=e,s=Iv(Ov,n);return vs.jsx(bv,{"aria-hidden":!0,tabIndex:0,...r,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null==(t=s.viewport)?void 0:t.contains(n))&&a()}})}));Rv.displayName=Ov;var zv="Toast",Fv=cs.forwardRef(((e,t)=>{const{forceMount:n,open:a,defaultOpen:r,onOpenChange:s,...i}=e,[o,l]=yv({prop:a,defaultProp:r??!0,onChange:s,caller:zv});return vs.jsx(hv,{present:n||o,children:vs.jsx(Wv,{open:o,...i,ref:t,onClose:()=>l(!1),onPause:tv(e.onPause),onResume:tv(e.onResume),onSwipeStart:By(e.onSwipeStart,(e=>{e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:By(e.onSwipeMove,(e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)})),onSwipeCancel:By(e.onSwipeCancel,(e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:By(e.onSwipeEnd,(e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),l(!1)}))})})}));Fv.displayName=zv;var[Bv,Uv]=kv(zv,{onClose(){}}),Wv=cs.forwardRef(((e,t)=>{const{__scopeToast:n,type:a="foreground",duration:r,open:s,onClose:i,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:f,onSwipeEnd:m,...p}=e,h=Iv(zv,n),[g,x]=cs.useState(null),y=Gy(t,(e=>x(e))),v=cs.useRef(null),b=cs.useRef(null),w=r||h.duration,j=cs.useRef(0),N=cs.useRef(w),C=cs.useRef(0),{onToastAdd:S,onToastRemove:k}=h,M=tv((()=>{var e;(null==g?void 0:g.contains(document.activeElement))&&(null==(e=h.viewport)||e.focus()),i()})),_=cs.useCallback((e=>{e&&e!==1/0&&(window.clearTimeout(C.current),j.current=(new Date).getTime(),C.current=window.setTimeout(M,e))}),[M]);cs.useEffect((()=>{const e=h.viewport;if(e){const t=()=>{_(N.current),null==c||c()},n=()=>{const e=(new Date).getTime()-j.current;N.current=N.current-e,window.clearTimeout(C.current),null==l||l()};return e.addEventListener(Tv,n),e.addEventListener(Dv,t),()=>{e.removeEventListener(Tv,n),e.removeEventListener(Dv,t)}}}),[h.viewport,w,l,c,_]),cs.useEffect((()=>{s&&!h.isClosePausedRef.current&&_(w)}),[s,w,h.isClosePausedRef,_]),cs.useEffect((()=>(S(),()=>k())),[S,k]);const I=cs.useMemo((()=>g?Kv(g):null),[g]);return h.viewport?vs.jsxs(vs.Fragment,{children:[I&&vs.jsx(Gv,{__scopeToast:n,role:"status","aria-live":"foreground"===a?"assertive":"polite","aria-atomic":!0,children:I}),vs.jsx(Bv,{scope:n,onClose:M,children:Sg.createPortal(vs.jsx(Nv.ItemSlot,{scope:n,children:vs.jsx(uv,{asChild:!0,onEscapeKeyDown:By(o,(()=>{h.isFocusedToastEscapeKeyDownRef.current||M(),h.isFocusedToastEscapeKeyDownRef.current=!1})),children:vs.jsx(Xy.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":h.swipeDirection,...p,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:By(e.onKeyDown,(e=>{"Escape"===e.key&&(null==o||o(e.nativeEvent),e.nativeEvent.defaultPrevented||(h.isFocusedToastEscapeKeyDownRef.current=!0,M()))})),onPointerDown:By(e.onPointerDown,(e=>{0===e.button&&(v.current={x:e.clientX,y:e.clientY})})),onPointerMove:By(e.onPointerMove,(e=>{if(!v.current)return;const t=e.clientX-v.current.x,n=e.clientY-v.current.y,a=Boolean(b.current),r=["left","right"].includes(h.swipeDirection),s=["left","up"].includes(h.swipeDirection)?Math.min:Math.max,i=r?s(0,t):0,o=r?0:s(0,n),l="touch"===e.pointerType?10:2,c={x:i,y:o},f={originalEvent:e,delta:c};a?(b.current=c,Jv("toast.swipeMove",u,f,{discrete:!1})):Zv(c,h.swipeDirection,l)?(b.current=c,Jv("toast.swipeStart",d,f,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(v.current=null)})),onPointerUp:By(e.onPointerUp,(e=>{const t=b.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),b.current=null,v.current=null,t){const n=e.currentTarget,a={originalEvent:e,delta:t};Zv(t,h.swipeDirection,h.swipeThreshold)?Jv("toast.swipeEnd",m,a,{discrete:!0}):Jv("toast.swipeCancel",f,a,{discrete:!0}),n.addEventListener("click",(e=>e.preventDefault()),{once:!0})}}))})})}),h.viewport)})]}):null})),Gv=e=>{const{__scopeToast:t,children:n,...a}=e,r=Iv(zv,t),[s,i]=cs.useState(!1),[o,l]=cs.useState(!1);return function(e=()=>{}){const t=tv(e);mv((()=>{let e=0,n=0;return e=window.requestAnimationFrame((()=>n=window.requestAnimationFrame(t))),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}}),[t])}((()=>i(!0))),cs.useEffect((()=>{const e=window.setTimeout((()=>l(!0)),1e3);return()=>window.clearTimeout(e)}),[]),o?null:vs.jsx(pv,{asChild:!0,children:vs.jsx(bv,{...a,children:s&&vs.jsxs(vs.Fragment,{children:[r.label," ",n]})})})},Vv=cs.forwardRef(((e,t)=>{const{__scopeToast:n,...a}=e;return vs.jsx(Xy.div,{...a,ref:t})}));Vv.displayName="ToastTitle";var Hv=cs.forwardRef(((e,t)=>{const{__scopeToast:n,...a}=e;return vs.jsx(Xy.div,{...a,ref:t})}));Hv.displayName="ToastDescription";var qv=cs.forwardRef(((e,t)=>{const{altText:n,...a}=e;return n.trim()?vs.jsx(Qv,{altText:n,asChild:!0,children:vs.jsx(Yv,{...a,ref:t})}):null}));qv.displayName="ToastAction";var $v="ToastClose",Yv=cs.forwardRef(((e,t)=>{const{__scopeToast:n,...a}=e,r=Uv($v,n);return vs.jsx(Qv,{asChild:!0,children:vs.jsx(Xy.button,{type:"button",...a,ref:t,onClick:By(e.onClick,r.onClose)})})}));Yv.displayName=$v;var Qv=cs.forwardRef(((e,t)=>{const{__scopeToast:n,altText:a,...r}=e;return vs.jsx(Xy.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...r,ref:t})}));function Kv(e){const t=[];return Array.from(e.childNodes).forEach((e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,a=""===e.dataset.radixToastAnnounceExclude;if(!n)if(a){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...Kv(e))}})),t}function Jv(e,t,n,{discrete:a}){const r=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),a?ev(r,s):r.dispatchEvent(s)}var Zv=(e,t,n=0)=>{const a=Math.abs(e.x),r=Math.abs(e.y),s=a>r;return"left"===t||"right"===t?s&&a>n:!s&&r>n};function Xv(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function eb(e){const t=document.activeElement;return e.some((e=>e===t||(e.focus(),document.activeElement!==t)))}var tb=Av,nb=Pv,ab=Fv,rb=Vv,sb=Hv,ib=qv,ob=Yv;function lb(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=lb(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function cb(){for(var e,t,n=0,a="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=lb(e))&&(a&&(a+=" "),a+=t);return a}const db=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,ub=cb,fb=(e,t)=>n=>{var a;if(null==(null==t?void 0:t.variants))return ub(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:r,defaultVariants:s}=t,i=Object.keys(r).map((e=>{const t=null==n?void 0:n[e],a=null==s?void 0:s[e];if(null===t)return null;const i=db(t)||db(a);return r[e][i]})),o=n&&Object.entries(n).reduce(((e,t)=>{let[n,a]=t;return void 0===a||(e[n]=a),e}),{}),l=null==t||null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce(((e,t)=>{let{class:n,className:a,...r}=t;return Object.entries(r).every((e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...s,...o}[t]):{...s,...o}[t]===n}))?[...e,n,a]:e}),[]);return ub(e,i,l,null==n?void 0:n.class,null==n?void 0:n.className)},mb=(...e)=>e.filter(((e,t,n)=>Boolean(e)&&n.indexOf(e)===t)).join(" ");var pb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hb=cs.forwardRef((({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:r="",children:s,iconNode:i,...o},l)=>cs.createElement("svg",{ref:l,...pb,width:t,height:t,stroke:e,strokeWidth:a?24*Number(n)/Number(t):n,className:mb("lucide",r),...o},[...i.map((([e,t])=>cs.createElement(e,t))),...Array.isArray(s)?s:[s]]))),gb=(e,t)=>{const n=cs.forwardRef((({className:n,...a},r)=>{return cs.createElement(hb,{ref:r,iconNode:t,className:mb(`lucide-${s=e,s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...a});var s}));return n.displayName=`${e}`,n},xb=gb("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),yb=gb("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),vb=gb("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),bb=gb("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),wb=gb("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),jb=gb("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Nb=gb("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Cb=gb("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Sb=gb("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),kb=gb("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Mb=gb("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),_b=gb("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ib=gb("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ab=gb("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Eb=gb("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),Lb=gb("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Tb=gb("CircleArrowRight",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]),Db=gb("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Pb=gb("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ob=gb("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Rb=gb("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),zb=gb("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Fb=gb("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Bb=gb("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ub=gb("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Wb=gb("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Gb=gb("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Vb=gb("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Hb=gb("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),qb=gb("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),$b=gb("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Yb=gb("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Qb=gb("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Kb=gb("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]),Jb=gb("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]),Zb=gb("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Xb=gb("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]),ew=gb("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),tw=gb("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),nw=gb("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),aw=gb("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),rw=gb("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),sw=gb("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),iw=gb("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ow=gb("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),lw=gb("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),cw=gb("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),dw=gb("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),uw=gb("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),fw=gb("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),mw=gb("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),pw=gb("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),hw=gb("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),gw=gb("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),xw=gb("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),yw=gb("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),vw=gb("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),bw=gb("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),ww=gb("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),jw=gb("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),Nw=gb("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Cw=gb("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),Sw=gb("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),kw=gb("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Mw=gb("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),_w=gb("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Iw=gb("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Aw=gb("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ew=gb("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),Lw=gb("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Tw=gb("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),Dw=gb("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Pw=gb("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Ow=gb("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Rw=gb("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),zw=gb("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),Fw=gb("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Bw=gb("Sheet",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"9",y2:"21",key:"1ib60c"}],["line",{x1:"15",x2:"15",y1:"9",y2:"21",key:"1n26ft"}]]),Uw=gb("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Ww=gb("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Gw=gb("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Vw=gb("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Hw=gb("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),qw=gb("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),$w=gb("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),Yw=gb("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),Qw=gb("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Kw=gb("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Jw=gb("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),Zw=gb("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Xw=gb("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),ej=gb("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),tj=gb("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),nj=gb("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),aj=gb("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),rj=gb("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),sj=gb("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ij=gb("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),oj=gb("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),lj=gb("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),cj=gb("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),dj=gb("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),uj=gb("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),fj=gb("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),mj=gb("Variable",[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]]),pj=gb("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),hj=gb("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),gj=gb("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),xj=gb("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),yj=gb("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vj=gb("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),bj=e=>{const t=Cj(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),wj(n,t)||Nj(e)},getConflictingClassGroupIds:(e,t)=>{const r=n[e]||[];return t&&a[e]?[...r,...a[e]]:r}}},wj=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const a=e[0],r=t.nextPart.get(a),s=r?wj(e.slice(1),r):void 0;if(s)return s;if(0===t.validators.length)return;const i=e.join("-");return null==(n=t.validators.find((({validator:e})=>e(i))))?void 0:n.classGroupId},jj=/^\[(.+)\]$/,Nj=e=>{if(jj.test(e)){const t=jj.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Cj=e=>{const{theme:t,prefix:n}=e,a={nextPart:new Map,validators:[]};return _j(Object.entries(e.classGroups),n).forEach((([e,n])=>{Sj(n,a,e,t)})),a},Sj=(e,t,n,a)=>{e.forEach((e=>{if("string"!=typeof e){if("function"==typeof e)return Mj(e)?void Sj(e(a),t,n,a):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach((([e,r])=>{Sj(r,kj(t,e),n,a)}))}else{(""===e?t:kj(t,e)).classGroupId=n}}))},kj=(e,t)=>{let n=e;return t.split("-").forEach((e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)})),n},Mj=e=>e.isThemeGetter,_j=(e,t)=>t?e.map((([e,n])=>[e,n.map((e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map((([e,n])=>[t+e,n]))):e))])):e,Ij=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,a=new Map;const r=(r,s)=>{n.set(r,s),t++,t>e&&(t=0,a=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=a.get(e))?(r(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):r(e,t)}}},Aj=e=>{const{separator:t,experimentalParseClassName:n}=e,a=1===t.length,r=t[0],s=t.length,i=e=>{const n=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===r&&(a||e.slice(u,u+s)===t)){n.push(e.slice(l,u)),l=u+s;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:n,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return n?e=>n({className:e,parseClassName:i}):i},Ej=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach((e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)})),t.push(...n.sort()),t},Lj=/\s+/;function Tj(){let e,t,n=0,a="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Dj(e))&&(a&&(a+=" "),a+=t);return a}const Dj=e=>{if("string"==typeof e)return e;let t,n="";for(let a=0;a<e.length;a++)e[a]&&(t=Dj(e[a]))&&(n&&(n+=" "),n+=t);return n};function Pj(e,...t){let n,a,r,s=function(o){const l=t.reduce(((e,t)=>t(e)),e());return n=(e=>({cache:Ij(e.cacheSize),parseClassName:Aj(e),...bj(e)}))(l),a=n.cache.get,r=n.cache.set,s=i,i(o)};function i(e){const t=a(e);if(t)return t;const s=((e,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:r}=t,s=[],i=e.trim().split(Lj);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=n(e);let f=Boolean(u),m=a(f?d.substring(0,u):d);if(!m){if(!f){o=e+(o.length>0?" "+o:o);continue}if(m=a(d),!m){o=e+(o.length>0?" "+o:o);continue}f=!1}const p=Ej(t).join(":"),h=c?p+"!":p,g=h+m;if(s.includes(g))continue;s.push(g);const x=r(m,f);for(let n=0;n<x.length;++n){const e=x[n];s.push(h+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return r(e,s),s}return function(){return s(Tj.apply(null,arguments))}}const Oj=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Rj=/^\[(?:([a-z-]+):)?(.+)\]$/i,zj=/^\d+\/\d+$/,Fj=new Set(["px","full","screen"]),Bj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Uj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Wj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Gj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Vj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hj=e=>$j(e)||Fj.has(e)||zj.test(e),qj=e=>iN(e,"length",oN),$j=e=>Boolean(e)&&!Number.isNaN(Number(e)),Yj=e=>iN(e,"number",$j),Qj=e=>Boolean(e)&&Number.isInteger(Number(e)),Kj=e=>e.endsWith("%")&&$j(e.slice(0,-1)),Jj=e=>Rj.test(e),Zj=e=>Bj.test(e),Xj=new Set(["length","size","percentage"]),eN=e=>iN(e,Xj,lN),tN=e=>iN(e,"position",lN),nN=new Set(["image","url"]),aN=e=>iN(e,nN,dN),rN=e=>iN(e,"",cN),sN=()=>!0,iN=(e,t,n)=>{const a=Rj.exec(e);return!!a&&(a[1]?"string"==typeof t?a[1]===t:t.has(a[1]):n(a[2]))},oN=e=>Uj.test(e)&&!Wj.test(e),lN=()=>!1,cN=e=>Gj.test(e),dN=e=>Vj.test(e),uN=Pj((()=>{const e=Oj("colors"),t=Oj("spacing"),n=Oj("blur"),a=Oj("brightness"),r=Oj("borderColor"),s=Oj("borderRadius"),i=Oj("borderSpacing"),o=Oj("borderWidth"),l=Oj("contrast"),c=Oj("grayscale"),d=Oj("hueRotate"),u=Oj("invert"),f=Oj("gap"),m=Oj("gradientColorStops"),p=Oj("gradientColorStopPositions"),h=Oj("inset"),g=Oj("margin"),x=Oj("opacity"),y=Oj("padding"),v=Oj("saturate"),b=Oj("scale"),w=Oj("sepia"),j=Oj("skew"),N=Oj("space"),C=Oj("translate"),S=()=>["auto",Jj,t],k=()=>[Jj,t],M=()=>["",Hj,qj],_=()=>["auto",$j,Jj],I=()=>["","0",Jj],A=()=>[$j,Jj];return{cacheSize:500,separator:":",theme:{colors:[sN],spacing:[Hj,qj],blur:["none","",Zj,Jj],brightness:A(),borderColor:[e],borderRadius:["none","","full",Zj,Jj],borderSpacing:k(),borderWidth:M(),contrast:A(),grayscale:I(),hueRotate:A(),invert:I(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[Kj,qj],inset:S(),margin:S(),opacity:A(),padding:k(),saturate:A(),scale:A(),sepia:I(),skew:A(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",Jj]}],container:["container"],columns:[{columns:[Zj]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Jj]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],start:[{start:[h]}],end:[{end:[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qj,Jj]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Jj]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",Qj,Jj]}],"grid-cols":[{"grid-cols":[sN]}],"col-start-end":[{col:["auto",{span:["full",Qj,Jj]},Jj]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[sN]}],"row-start-end":[{row:["auto",{span:[Qj,Jj]},Jj]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Jj]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Jj]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Jj,t]}],"min-w":[{"min-w":[Jj,t,"min","max","fit"]}],"max-w":[{"max-w":[Jj,t,"none","full","min","max","fit","prose",{screen:[Zj]},Zj]}],h:[{h:[Jj,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Jj,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Jj,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Jj,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Zj,qj]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Yj]}],"font-family":[{font:[sN]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Jj]}],"line-clamp":[{"line-clamp":["none",$j,Yj]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hj,Jj]}],"list-image":[{"list-image":["none",Jj]}],"list-style-type":[{list:["none","disc","decimal",Jj]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hj,qj]}],"underline-offset":[{"underline-offset":["auto",Hj,Jj]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jj]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Jj]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",tN]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",eN]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},aN]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Hj,Jj]}],"outline-w":[{outline:[Hj,qj]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Hj,qj]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Zj,rN]}],"shadow-color":[{shadow:[sN]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[a]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Zj,Jj]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[v]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Jj]}],duration:[{duration:A()}],ease:[{ease:["linear","in","out","in-out",Jj]}],delay:[{delay:A()}],animate:[{animate:["none","spin","ping","pulse","bounce",Jj]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Qj,Jj]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Jj]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Jj]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Jj]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Hj,qj,Yj]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}));function fN(...e){return uN(cb(e))}function mN(e,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function pN(e){try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return"Invalid date"}}const hN=tb,gN=cs.forwardRef((({className:e,...t},n)=>vs.jsx(nb,{ref:n,className:fN("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t})));gN.displayName=nb.displayName;const xN=fb("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),yN=cs.forwardRef((({className:e,variant:t,...n},a)=>vs.jsx(ab,{ref:a,className:fN(xN({variant:t}),e),...n})));yN.displayName=ab.displayName;cs.forwardRef((({className:e,...t},n)=>vs.jsx(ib,{ref:n,className:fN("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}))).displayName=ib.displayName;const vN=cs.forwardRef((({className:e,...t},n)=>vs.jsx(ob,{ref:n,className:fN("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:vs.jsx(yj,{className:"h-4 w-4"})})));vN.displayName=ob.displayName;const bN=cs.forwardRef((({className:e,...t},n)=>vs.jsx(rb,{ref:n,className:fN("text-sm ",e),...t})));bN.displayName=rb.displayName;const wN=cs.forwardRef((({className:e,...t},n)=>vs.jsx(sb,{ref:n,className:fN("text-sm opacity-90",e),...t})));function jN(){const{toasts:e}=Fy();return vs.jsxs(hN,{children:[e.map((function({id:e,title:t,description:n,action:a,...r}){return vs.jsxs(yN,{...r,children:[vs.jsxs("div",{className:"grid gap-1",children:[t&&vs.jsx(bN,{children:t}),n&&vs.jsx(wN,{children:n})]}),a,vs.jsx(vN,{})]},e)})),vs.jsx(gN,{})]})}wN.displayName=sb.displayName;var NN=us[" useId ".trim().toString()]||(()=>{}),CN=0;function SN(e){const[t,n]=cs.useState(NN());return mv((()=>{n((e=>e??String(CN++)))}),[e]),t?`radix-${t}`:""}const kN=["top","right","bottom","left"],MN=Math.min,_N=Math.max,IN=Math.round,AN=Math.floor,EN=e=>({x:e,y:e}),LN={left:"right",right:"left",bottom:"top",top:"bottom"},TN={start:"end",end:"start"};function DN(e,t,n){return _N(e,MN(t,n))}function PN(e,t){return"function"==typeof e?e(t):e}function ON(e){return e.split("-")[0]}function RN(e){return e.split("-")[1]}function zN(e){return"x"===e?"y":"x"}function FN(e){return"y"===e?"height":"width"}function BN(e){return["top","bottom"].includes(ON(e))?"y":"x"}function UN(e){return zN(BN(e))}function WN(e){return e.replace(/start|end/g,(e=>TN[e]))}function GN(e){return e.replace(/left|right|bottom|top/g,(e=>LN[e]))}function VN(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function HN(e){const{x:t,y:n,width:a,height:r}=e;return{width:a,height:r,top:n,left:t,right:t+a,bottom:n+r,x:t,y:n}}function qN(e,t,n){let{reference:a,floating:r}=e;const s=BN(t),i=UN(t),o=FN(i),l=ON(t),c="y"===s,d=a.x+a.width/2-r.width/2,u=a.y+a.height/2-r.height/2,f=a[o]/2-r[o]/2;let m;switch(l){case"top":m={x:d,y:a.y-r.height};break;case"bottom":m={x:d,y:a.y+a.height};break;case"right":m={x:a.x+a.width,y:u};break;case"left":m={x:a.x-r.width,y:u};break;default:m={x:a.x,y:a.y}}switch(RN(t)){case"start":m[i]-=f*(n&&c?-1:1);break;case"end":m[i]+=f*(n&&c?-1:1)}return m}async function $N(e,t){var n;void 0===t&&(t={});const{x:a,y:r,platform:s,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:f=!1,padding:m=0}=PN(t,e),p=VN(m),h=o[f?"floating"===u?"reference":"floating":u],g=HN(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(h)))||n?h:h.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),x="floating"===u?{x:a,y:r,width:i.floating.width,height:i.floating.height}:i.reference,y=await(null==s.getOffsetParent?void 0:s.getOffsetParent(o.floating)),v=await(null==s.isElement?void 0:s.isElement(y))&&await(null==s.getScale?void 0:s.getScale(y))||{x:1,y:1},b=HN(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:y,strategy:l}):x);return{top:(g.top-b.top+p.top)/v.y,bottom:(b.bottom-g.bottom+p.bottom)/v.y,left:(g.left-b.left+p.left)/v.x,right:(b.right-g.right+p.right)/v.x}}function YN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function QN(e){return kN.some((t=>e[t]>=0))}function KN(){return"undefined"!=typeof window}function JN(e){return eC(e)?(e.nodeName||"").toLowerCase():"#document"}function ZN(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function XN(e){var t;return null==(t=(eC(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function eC(e){return!!KN()&&(e instanceof Node||e instanceof ZN(e).Node)}function tC(e){return!!KN()&&(e instanceof Element||e instanceof ZN(e).Element)}function nC(e){return!!KN()&&(e instanceof HTMLElement||e instanceof ZN(e).HTMLElement)}function aC(e){return!(!KN()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof ZN(e).ShadowRoot)}function rC(e){const{overflow:t,overflowX:n,overflowY:a,display:r}=dC(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+n)&&!["inline","contents"].includes(r)}function sC(e){return["table","td","th"].includes(JN(e))}function iC(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(n){return!1}}))}function oC(e){const t=lC(),n=tC(e)?dC(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function lC(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function cC(e){return["html","body","#document"].includes(JN(e))}function dC(e){return ZN(e).getComputedStyle(e)}function uC(e){return tC(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fC(e){if("html"===JN(e))return e;const t=e.assignedSlot||e.parentNode||aC(e)&&e.host||XN(e);return aC(t)?t.host:t}function mC(e){const t=fC(e);return cC(t)?e.ownerDocument?e.ownerDocument.body:e.body:nC(t)&&rC(t)?t:mC(t)}function pC(e,t,n){var a;void 0===t&&(t=[]),void 0===n&&(n=!0);const r=mC(e),s=r===(null==(a=e.ownerDocument)?void 0:a.body),i=ZN(r);if(s){const e=hC(i);return t.concat(i,i.visualViewport||[],rC(r)?r:[],e&&n?pC(e):[])}return t.concat(r,pC(r,[],n))}function hC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function gC(e){const t=dC(e);let n=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const r=nC(e),s=r?e.offsetWidth:n,i=r?e.offsetHeight:a,o=IN(n)!==s||IN(a)!==i;return o&&(n=s,a=i),{width:n,height:a,$:o}}function xC(e){return tC(e)?e:e.contextElement}function yC(e){const t=xC(e);if(!nC(t))return EN(1);const n=t.getBoundingClientRect(),{width:a,height:r,$:s}=gC(t);let i=(s?IN(n.width):n.width)/a,o=(s?IN(n.height):n.height)/r;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}const vC=EN(0);function bC(e){const t=ZN(e);return lC()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:vC}function wC(e,t,n,a){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=e.getBoundingClientRect(),s=xC(e);let i=EN(1);t&&(a?tC(a)&&(i=yC(a)):i=yC(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==ZN(e))&&t}(s,n,a)?bC(s):EN(0);let l=(r.left+o.x)/i.x,c=(r.top+o.y)/i.y,d=r.width/i.x,u=r.height/i.y;if(s){const e=ZN(s),t=a&&tC(a)?ZN(a):a;let n=e,r=hC(n);for(;r&&a&&t!==n;){const e=yC(r),t=r.getBoundingClientRect(),a=dC(r),s=t.left+(r.clientLeft+parseFloat(a.paddingLeft))*e.x,i=t.top+(r.clientTop+parseFloat(a.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=s,c+=i,n=ZN(r),r=hC(n)}}return HN({width:d,height:u,x:l,y:c})}function jC(e,t){const n=uC(e).scrollLeft;return t?t.left+n:wC(XN(e)).left+n}function NC(e,t,n){void 0===n&&(n=!1);const a=e.getBoundingClientRect();return{x:a.left+t.scrollLeft-(n?0:jC(e,a)),y:a.top+t.scrollTop}}function CC(e,t,n){let a;if("viewport"===t)a=function(e,t){const n=ZN(e),a=XN(e),r=n.visualViewport;let s=a.clientWidth,i=a.clientHeight,o=0,l=0;if(r){s=r.width,i=r.height;const e=lC();(!e||e&&"fixed"===t)&&(o=r.offsetLeft,l=r.offsetTop)}return{width:s,height:i,x:o,y:l}}(e,n);else if("document"===t)a=function(e){const t=XN(e),n=uC(e),a=e.ownerDocument.body,r=_N(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),s=_N(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let i=-n.scrollLeft+jC(e);const o=-n.scrollTop;return"rtl"===dC(a).direction&&(i+=_N(t.clientWidth,a.clientWidth)-r),{width:r,height:s,x:i,y:o}}(XN(e));else if(tC(t))a=function(e,t){const n=wC(e,!0,"fixed"===t),a=n.top+e.clientTop,r=n.left+e.clientLeft,s=nC(e)?yC(e):EN(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:r*s.x,y:a*s.y}}(t,n);else{const n=bC(e);a={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return HN(a)}function SC(e,t){const n=fC(e);return!(n===t||!tC(n)||cC(n))&&("fixed"===dC(n).position||SC(n,t))}function kC(e,t,n){const a=nC(t),r=XN(t),s="fixed"===n,i=wC(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=EN(0);function c(){l.x=jC(r)}if(a||!a&&!s)if(("body"!==JN(t)||rC(r))&&(o=uC(t)),a){const e=wC(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else r&&c();s&&!a&&r&&c();const d=!r||a||s?EN(0):NC(r,o);return{x:i.left+o.scrollLeft-l.x-d.x,y:i.top+o.scrollTop-l.y-d.y,width:i.width,height:i.height}}function MC(e){return"static"===dC(e).position}function _C(e,t){if(!nC(e)||"fixed"===dC(e).position)return null;if(t)return t(e);let n=e.offsetParent;return XN(e)===n&&(n=n.ownerDocument.body),n}function IC(e,t){const n=ZN(e);if(iC(e))return n;if(!nC(e)){let t=fC(e);for(;t&&!cC(t);){if(tC(t)&&!MC(t))return t;t=fC(t)}return n}let a=_C(e,t);for(;a&&sC(a)&&MC(a);)a=_C(a,t);return a&&cC(a)&&MC(a)&&!oC(a)?n:a||function(e){let t=fC(e);for(;nC(t)&&!cC(t);){if(oC(t))return t;if(iC(t))return null;t=fC(t)}return null}(e)||n}const AC={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:a,strategy:r}=e;const s="fixed"===r,i=XN(a),o=!!t&&iC(t.floating);if(a===i||o&&s)return n;let l={scrollLeft:0,scrollTop:0},c=EN(1);const d=EN(0),u=nC(a);if((u||!u&&!s)&&(("body"!==JN(a)||rC(i))&&(l=uC(a)),nC(a))){const e=wC(a);c=yC(a),d.x=e.x+a.clientLeft,d.y=e.y+a.clientTop}const f=!i||u||s?EN(0):NC(i,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}},getDocumentElement:XN,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:a,strategy:r}=e;const s=[..."clippingAncestors"===n?iC(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let a=pC(e,[],!1).filter((e=>tC(e)&&"body"!==JN(e))),r=null;const s="fixed"===dC(e).position;let i=s?fC(e):e;for(;tC(i)&&!cC(i);){const t=dC(i),n=oC(i);n||"fixed"!==t.position||(r=null),(s?!n&&!r:!n&&"static"===t.position&&r&&["absolute","fixed"].includes(r.position)||rC(i)&&!n&&SC(e,i))?a=a.filter((e=>e!==i)):r=t,i=fC(i)}return t.set(e,a),a}(t,this._c):[].concat(n),a],i=s[0],o=s.reduce(((e,n)=>{const a=CC(t,n,r);return e.top=_N(a.top,e.top),e.right=MN(a.right,e.right),e.bottom=MN(a.bottom,e.bottom),e.left=_N(a.left,e.left),e}),CC(t,i,r));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:IC,getElementRects:async function(e){const t=this.getOffsetParent||IC,n=this.getDimensions,a=await n(e.floating);return{reference:kC(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=gC(e);return{width:t,height:n}},getScale:yC,isElement:tC,isRTL:function(e){return"rtl"===dC(e).direction}};function EC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function LC(e,t,n,a){void 0===a&&(a={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=a,c=xC(e),d=r||s?[...c?pC(c):[],...pC(t)]:[];d.forEach((e=>{r&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)}));const u=c&&o?function(e,t){let n,a=null;const r=XN(e);function s(){var e;clearTimeout(n),null==(e=a)||e.disconnect(),a=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),s();const c=e.getBoundingClientRect(),{left:d,top:u,width:f,height:m}=c;if(o||t(),!f||!m)return;const p={rootMargin:-AN(u)+"px "+-AN(r.clientWidth-(d+f))+"px "+-AN(r.clientHeight-(u+m))+"px "+-AN(d)+"px",threshold:_N(0,MN(1,l))||1};let h=!0;function g(t){const a=t[0].intersectionRatio;if(a!==l){if(!h)return i();a?i(!1,a):n=setTimeout((()=>{i(!1,1e-7)}),1e3)}1!==a||EC(c,e.getBoundingClientRect())||i(),h=!1}try{a=new IntersectionObserver(g,{...p,root:r.ownerDocument})}catch(x){a=new IntersectionObserver(g,p)}a.observe(e)}(!0),s}(c,n):null;let f,m=-1,p=null;i&&(p=new ResizeObserver((e=>{let[a]=e;a&&a.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),n()})),c&&!l&&p.observe(c),p.observe(t));let h=l?wC(e):null;return l&&function t(){const a=wC(e);h&&!EC(h,a)&&n();h=a,f=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach((e=>{r&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)})),null==u||u(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(f)}}const TC=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,a;const{x:r,y:s,placement:i,middlewareData:o}=t,l=await async function(e,t){const{placement:n,platform:a,elements:r}=e,s=await(null==a.isRTL?void 0:a.isRTL(r.floating)),i=ON(n),o=RN(n),l="y"===BN(n),c=["left","top"].includes(i)?-1:1,d=s&&l?-1:1,u=PN(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof p&&(m="end"===o?-1*p:p),l?{x:m*d,y:f*c}:{x:f*c,y:m*d}}(t,e);return i===(null==(n=o.offset)?void 0:n.placement)&&null!=(a=o.arrow)&&a.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:i}}}}},DC=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:a,placement:r}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=PN(e,t),c={x:n,y:a},d=await $N(t,l),u=BN(ON(r)),f=zN(u);let m=c[f],p=c[u];if(s){const e="y"===f?"bottom":"right";m=DN(m+d["y"===f?"top":"left"],m,m-d[e])}if(i){const e="y"===u?"bottom":"right";p=DN(p+d["y"===u?"top":"left"],p,p-d[e])}const h=o.fn({...t,[f]:m,[u]:p});return{...h,data:{x:h.x-n,y:h.y-a,enabled:{[f]:s,[u]:i}}}}}},PC=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,a;const{placement:r,middlewareData:s,rects:i,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:h=!0,...g}=PN(e,t);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const x=ON(r),y=BN(o),v=ON(o)===o,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=f||(v||!h?[GN(o)]:function(e){const t=GN(e);return[WN(e),t,WN(t)]}(o)),j="none"!==p;!f&&j&&w.push(...function(e,t,n,a){const r=RN(e);let s=function(e,t,n){const a=["left","right"],r=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:a:t?a:r;case"left":case"right":return t?s:i;default:return[]}}(ON(e),"start"===n,a);return r&&(s=s.map((e=>e+"-"+r)),t&&(s=s.concat(s.map(WN)))),s}(o,h,p,b));const N=[o,...w],C=await $N(t,g),S=[];let k=(null==(a=s.flip)?void 0:a.overflows)||[];if(d&&S.push(C[x]),u){const e=function(e,t,n){void 0===n&&(n=!1);const a=RN(e),r=UN(e),s=FN(r);let i="x"===r?a===(n?"end":"start")?"right":"left":"start"===a?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=GN(i)),[i,GN(i)]}(r,i,b);S.push(C[e[0]],C[e[1]])}if(k=[...k,{placement:r,overflows:S}],!S.every((e=>e<=0))){var M,_;const e=((null==(M=s.flip)?void 0:M.index)||0)+1,t=N[e];if(t){var I;const n="alignment"===u&&y!==BN(t),a=(null==(I=k[0])?void 0:I.overflows[0])>0;if(!n||a)return{data:{index:e,overflows:k},reset:{placement:t}}}let n=null==(_=k.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:_.placement;if(!n)switch(m){case"bestFit":{var A;const e=null==(A=k.filter((e=>{if(j){const t=BN(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:A[0];e&&(n=e);break}case"initialPlacement":n=o}if(r!==n)return{reset:{placement:n}}}return{}}}},OC=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,a;const{placement:r,rects:s,platform:i,elements:o}=t,{apply:l=()=>{},...c}=PN(e,t),d=await $N(t,c),u=ON(r),f=RN(r),m="y"===BN(r),{width:p,height:h}=s.floating;let g,x;"top"===u||"bottom"===u?(g=u,x=f===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(x=u,g="end"===f?"top":"bottom");const y=h-d.top-d.bottom,v=p-d.left-d.right,b=MN(h-d[g],y),w=MN(p-d[x],v),j=!t.middlewareData.shift;let N=b,C=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(C=v),null!=(a=t.middlewareData.shift)&&a.enabled.y&&(N=y),j&&!f){const e=_N(d.left,0),t=_N(d.right,0),n=_N(d.top,0),a=_N(d.bottom,0);m?C=p-2*(0!==e||0!==t?e+t:_N(d.left,d.right)):N=h-2*(0!==n||0!==a?n+a:_N(d.top,d.bottom))}await l({...t,availableWidth:C,availableHeight:N});const S=await i.getDimensions(o.floating);return p!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}},RC=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:a="referenceHidden",...r}=PN(e,t);switch(a){case"referenceHidden":{const e=YN(await $N(t,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:QN(e)}}}case"escaped":{const e=YN(await $N(t,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:QN(e)}}}default:return{}}}}},zC=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:a,placement:r,rects:s,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=PN(e,t)||{};if(null==c)return{};const u=VN(d),f={x:n,y:a},m=UN(r),p=FN(m),h=await i.getDimensions(c),g="y"===m,x=g?"top":"left",y=g?"bottom":"right",v=g?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[m]-f[m]-s.floating[p],w=f[m]-s.reference[m],j=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let N=j?j[v]:0;N&&await(null==i.isElement?void 0:i.isElement(j))||(N=o.floating[v]||s.floating[p]);const C=b/2-w/2,S=N/2-h[p]/2-1,k=MN(u[x],S),M=MN(u[y],S),_=k,I=N-h[p]-M,A=N/2-h[p]/2+C,E=DN(_,A,I),L=!l.arrow&&null!=RN(r)&&A!==E&&s.reference[p]/2-(A<_?k:M)-h[p]/2<0,T=L?A<_?A-_:A-I:0;return{[m]:f[m]+T,data:{[m]:E,centerOffset:A-E-T,...L&&{alignmentOffset:T}},reset:L}}}),FC=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:a,placement:r,rects:s,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=PN(e,t),d={x:n,y:a},u=BN(r),f=zN(u);let m=d[f],p=d[u];const h=PN(o,t),g="number"==typeof h?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(l){const e="y"===f?"height":"width",t=s.reference[f]-s.floating[e]+g.mainAxis,n=s.reference[f]+s.reference[e]-g.mainAxis;m<t?m=t:m>n&&(m=n)}if(c){var x,y;const e="y"===f?"width":"height",t=["top","left"].includes(ON(r)),n=s.reference[u]-s.floating[e]+(t&&(null==(x=i.offset)?void 0:x[u])||0)+(t?0:g.crossAxis),a=s.reference[u]+s.reference[e]+(t?0:(null==(y=i.offset)?void 0:y[u])||0)-(t?g.crossAxis:0);p<n?p=n:p>a&&(p=a)}return{[f]:m,[u]:p}}}},BC=(e,t,n)=>{const a=new Map,r={platform:AC,...n},s={...r.platform,_c:a};return(async(e,t,n)=>{const{placement:a="bottom",strategy:r="absolute",middleware:s=[],platform:i}=n,o=s.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:u}=qN(c,a,l),f=a,m={},p=0;for(let h=0;h<o.length;h++){const{name:n,fn:s}=o[h],{x:g,y:x,data:y,reset:v}=await s({x:d,y:u,initialPlacement:a,placement:f,strategy:r,middlewareData:m,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=x?x:u,m={...m,[n]:{...m[n],...y}},v&&p<=50&&(p++,"object"==typeof v&&(v.placement&&(f=v.placement),v.rects&&(c=!0===v.rects?await i.getElementRects({reference:e,floating:t,strategy:r}):v.rects),({x:d,y:u}=qN(c,f,l))),h=-1)}return{x:d,y:u,placement:f,strategy:r,middlewareData:m}})(e,t,{...r,platform:s})};var UC="undefined"!=typeof document?cs.useLayoutEffect:cs.useEffect;function WC(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,a,r;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(a=n;0!==a--;)if(!WC(e[a],t[a]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(a=n;0!==a--;)if(!{}.hasOwnProperty.call(t,r[a]))return!1;for(a=n;0!==a--;){const n=r[a];if(("_owner"!==n||!e.$$typeof)&&!WC(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function GC(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function VC(e,t){const n=GC(e);return Math.round(t*n)/n}function HC(e){const t=cs.useRef(e);return UC((()=>{t.current=e})),t}const qC=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:a}="function"==typeof e?e(t):e;return n&&(r=n,{}.hasOwnProperty.call(r,"current"))?null!=n.current?zC({element:n.current,padding:a}).fn(t):{}:n?zC({element:n,padding:a}).fn(t):{};var r}}),$C=(e,t)=>({...TC(e),options:[e,t]}),YC=(e,t)=>({...DC(e),options:[e,t]}),QC=(e,t)=>({...FC(e),options:[e,t]}),KC=(e,t)=>({...PC(e),options:[e,t]}),JC=(e,t)=>({...OC(e),options:[e,t]}),ZC=(e,t)=>({...RC(e),options:[e,t]}),XC=(e,t)=>({...qC(e),options:[e,t]});var eS=cs.forwardRef(((e,t)=>{const{children:n,width:a=10,height:r=5,...s}=e;return vs.jsx(Xy.svg,{...s,ref:t,width:a,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:vs.jsx("polygon",{points:"0,0 30,0 15,10"})})}));eS.displayName="Arrow";var tS=eS;function nS(e){const[t,n]=cs.useState(void 0);return mv((()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const a=t[0];let r,s;if("borderBoxSize"in a){const e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,s=t.blockSize}else r=e.offsetWidth,s=e.offsetHeight;n({width:r,height:s})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)}),[e]),t}var aS="Popper",[rS,sS]=Vy(aS),[iS,oS]=rS(aS),lS=e=>{const{__scopePopper:t,children:n}=e,[a,r]=cs.useState(null);return vs.jsx(iS,{scope:t,anchor:a,onAnchorChange:r,children:n})};lS.displayName=aS;var cS="PopperAnchor",dS=cs.forwardRef(((e,t)=>{const{__scopePopper:n,virtualRef:a,...r}=e,s=oS(cS,n),i=cs.useRef(null),o=Gy(t,i);return cs.useEffect((()=>{s.onAnchorChange((null==a?void 0:a.current)||i.current)})),a?null:vs.jsx(Xy.div,{...r,ref:o})}));dS.displayName=cS;var uS="PopperContent",[fS,mS]=rS(uS),pS=cs.forwardRef(((e,t)=>{var n,a,r,s,i,o;const{__scopePopper:l,side:c="bottom",sideOffset:d=0,align:u="center",alignOffset:f=0,arrowPadding:m=0,avoidCollisions:p=!0,collisionBoundary:h=[],collisionPadding:g=0,sticky:x="partial",hideWhenDetached:y=!1,updatePositionStrategy:v="optimized",onPlaced:b,...w}=e,j=oS(uS,l),[N,C]=cs.useState(null),S=Gy(t,(e=>C(e))),[k,M]=cs.useState(null),_=nS(k),I=(null==_?void 0:_.width)??0,A=(null==_?void 0:_.height)??0,E=c+("center"!==u?"-"+u:""),L="number"==typeof g?g:{top:0,right:0,bottom:0,left:0,...g},T=Array.isArray(h)?h:[h],D=T.length>0,P={padding:L,boundary:T.filter(yS),altBoundary:D},{refs:O,floatingStyles:R,placement:z,isPositioned:F,middlewareData:B}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:a=[],platform:r,elements:{reference:s,floating:i}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[d,u]=cs.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=cs.useState(a);WC(f,a)||m(a);const[p,h]=cs.useState(null),[g,x]=cs.useState(null),y=cs.useCallback((e=>{e!==j.current&&(j.current=e,h(e))}),[]),v=cs.useCallback((e=>{e!==N.current&&(N.current=e,x(e))}),[]),b=s||p,w=i||g,j=cs.useRef(null),N=cs.useRef(null),C=cs.useRef(d),S=null!=l,k=HC(l),M=HC(r),_=HC(c),I=cs.useCallback((()=>{if(!j.current||!N.current)return;const e={placement:t,strategy:n,middleware:f};M.current&&(e.platform=M.current),BC(j.current,N.current,e).then((e=>{const t={...e,isPositioned:!1!==_.current};A.current&&!WC(C.current,t)&&(C.current=t,Sg.flushSync((()=>{u(t)})))}))}),[f,t,n,M,_]);UC((()=>{!1===c&&C.current.isPositioned&&(C.current.isPositioned=!1,u((e=>({...e,isPositioned:!1}))))}),[c]);const A=cs.useRef(!1);UC((()=>(A.current=!0,()=>{A.current=!1})),[]),UC((()=>{if(b&&(j.current=b),w&&(N.current=w),b&&w){if(k.current)return k.current(b,w,I);I()}}),[b,w,I,k,S]);const E=cs.useMemo((()=>({reference:j,floating:N,setReference:y,setFloating:v})),[y,v]),L=cs.useMemo((()=>({reference:b,floating:w})),[b,w]),T=cs.useMemo((()=>{const e={position:n,left:0,top:0};if(!L.floating)return e;const t=VC(L.floating,d.x),a=VC(L.floating,d.y);return o?{...e,transform:"translate("+t+"px, "+a+"px)",...GC(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:a}}),[n,o,L.floating,d.x,d.y]);return cs.useMemo((()=>({...d,update:I,refs:E,elements:L,floatingStyles:T})),[d,I,E,L,T])}({strategy:"fixed",placement:E,whileElementsMounted:(...e)=>LC(...e,{animationFrame:"always"===v}),elements:{reference:j.anchor},middleware:[$C({mainAxis:d+A,alignmentAxis:f}),p&&YC({mainAxis:!0,crossAxis:!1,limiter:"partial"===x?QC():void 0,...P}),p&&KC({...P}),JC({...P,apply:({elements:e,rects:t,availableWidth:n,availableHeight:a})=>{const{width:r,height:s}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${n}px`),i.setProperty("--radix-popper-available-height",`${a}px`),i.setProperty("--radix-popper-anchor-width",`${r}px`),i.setProperty("--radix-popper-anchor-height",`${s}px`)}}),k&&XC({element:k,padding:m}),vS({arrowWidth:I,arrowHeight:A}),y&&ZC({strategy:"referenceHidden",...P})]}),[U,W]=bS(z),G=tv(b);mv((()=>{F&&(null==G||G())}),[F,G]);const V=null==(n=B.arrow)?void 0:n.x,H=null==(a=B.arrow)?void 0:a.y,q=0!==(null==(r=B.arrow)?void 0:r.centerOffset),[$,Y]=cs.useState();return mv((()=>{N&&Y(window.getComputedStyle(N).zIndex)}),[N]),vs.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...R,transform:F?R.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[null==(s=B.transformOrigin)?void 0:s.x,null==(i=B.transformOrigin)?void 0:i.y].join(" "),...(null==(o=B.hide)?void 0:o.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:vs.jsx(fS,{scope:l,placedSide:U,onArrowChange:M,arrowX:V,arrowY:H,shouldHideArrow:q,children:vs.jsx(Xy.div,{"data-side":U,"data-align":W,...w,ref:S,style:{...w.style,animation:F?void 0:"none"}})})})}));pS.displayName=uS;var hS="PopperArrow",gS={top:"bottom",right:"left",bottom:"top",left:"right"},xS=cs.forwardRef((function(e,t){const{__scopePopper:n,...a}=e,r=mS(hS,n),s=gS[r.placedSide];return vs.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:vs.jsx(tS,{...a,ref:t,style:{...a.style,display:"block"}})})}));function yS(e){return null!==e}xS.displayName=hS;var vS=e=>({name:"transformOrigin",options:e,fn(t){var n,a,r;const{placement:s,rects:i,middlewareData:o}=t,l=0!==(null==(n=o.arrow)?void 0:n.centerOffset),c=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[u,f]=bS(s),m={start:"0%",center:"50%",end:"100%"}[f],p=((null==(a=o.arrow)?void 0:a.x)??0)+c/2,h=((null==(r=o.arrow)?void 0:r.y)??0)+d/2;let g="",x="";return"bottom"===u?(g=l?m:`${p}px`,x=-d+"px"):"top"===u?(g=l?m:`${p}px`,x=`${i.floating.height+d}px`):"right"===u?(g=-d+"px",x=l?m:`${h}px`):"left"===u&&(g=`${i.floating.width+d}px`,x=l?m:`${h}px`),{data:{x:g,y:x}}}});function bS(e){const[t,n="center"]=e.split("-");return[t,n]}var wS=lS,jS=dS,NS=pS,CS=xS,[SS,kS]=Vy("Tooltip",[sS]),MS=sS(),_S="TooltipProvider",IS=700,AS="tooltip.open",[ES,LS]=SS(_S),TS=e=>{const{__scopeTooltip:t,delayDuration:n=IS,skipDelayDuration:a=300,disableHoverableContent:r=!1,children:s}=e,i=cs.useRef(!0),o=cs.useRef(!1),l=cs.useRef(0);return cs.useEffect((()=>{const e=l.current;return()=>window.clearTimeout(e)}),[]),vs.jsx(ES,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:cs.useCallback((()=>{window.clearTimeout(l.current),i.current=!1}),[]),onClose:cs.useCallback((()=>{window.clearTimeout(l.current),l.current=window.setTimeout((()=>i.current=!0),a)}),[a]),isPointerInTransitRef:o,onPointerInTransitChange:cs.useCallback((e=>{o.current=e}),[]),disableHoverableContent:r,children:s})};TS.displayName=_S;var DS="Tooltip",[PS,OS]=SS(DS),RS=e=>{const{__scopeTooltip:t,children:n,open:a,defaultOpen:r,onOpenChange:s,disableHoverableContent:i,delayDuration:o}=e,l=LS(DS,e.__scopeTooltip),c=MS(t),[d,u]=cs.useState(null),f=SN(),m=cs.useRef(0),p=i??l.disableHoverableContent,h=o??l.delayDuration,g=cs.useRef(!1),[x,y]=yv({prop:a,defaultProp:r??!1,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(AS))):l.onClose(),null==s||s(e)},caller:DS}),v=cs.useMemo((()=>x?g.current?"delayed-open":"instant-open":"closed"),[x]),b=cs.useCallback((()=>{window.clearTimeout(m.current),m.current=0,g.current=!1,y(!0)}),[y]),w=cs.useCallback((()=>{window.clearTimeout(m.current),m.current=0,y(!1)}),[y]),j=cs.useCallback((()=>{window.clearTimeout(m.current),m.current=window.setTimeout((()=>{g.current=!0,y(!0),m.current=0}),h)}),[h,y]);return cs.useEffect((()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)}),[]),vs.jsx(wS,{...c,children:vs.jsx(PS,{scope:t,contentId:f,open:x,stateAttribute:v,trigger:d,onTriggerChange:u,onTriggerEnter:cs.useCallback((()=>{l.isOpenDelayedRef.current?j():b()}),[l.isOpenDelayedRef,j,b]),onTriggerLeave:cs.useCallback((()=>{p?w():(window.clearTimeout(m.current),m.current=0)}),[w,p]),onOpen:b,onClose:w,disableHoverableContent:p,children:n})})};RS.displayName=DS;var zS="TooltipTrigger",FS=cs.forwardRef(((e,t)=>{const{__scopeTooltip:n,...a}=e,r=OS(zS,n),s=LS(zS,n),i=MS(n),o=Gy(t,cs.useRef(null),r.onTriggerChange),l=cs.useRef(!1),c=cs.useRef(!1),d=cs.useCallback((()=>l.current=!1),[]);return cs.useEffect((()=>()=>document.removeEventListener("pointerup",d)),[d]),vs.jsx(jS,{asChild:!0,...i,children:vs.jsx(Xy.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...a,ref:o,onPointerMove:By(e.onPointerMove,(e=>{"touch"!==e.pointerType&&(c.current||s.isPointerInTransitRef.current||(r.onTriggerEnter(),c.current=!0))})),onPointerLeave:By(e.onPointerLeave,(()=>{r.onTriggerLeave(),c.current=!1})),onPointerDown:By(e.onPointerDown,(()=>{r.open&&r.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})})),onFocus:By(e.onFocus,(()=>{l.current||r.onOpen()})),onBlur:By(e.onBlur,r.onClose),onClick:By(e.onClick,r.onClose)})})}));FS.displayName=zS;var[BS,US]=SS("TooltipPortal",{forceMount:void 0}),WS="TooltipContent",GS=cs.forwardRef(((e,t)=>{const n=US(WS,e.__scopeTooltip),{forceMount:a=n.forceMount,side:r="top",...s}=e,i=OS(WS,e.__scopeTooltip);return vs.jsx(hv,{present:a||i.open,children:i.disableHoverableContent?vs.jsx(YS,{side:r,...s,ref:t}):vs.jsx(VS,{side:r,...s,ref:t})})})),VS=cs.forwardRef(((e,t)=>{const n=OS(WS,e.__scopeTooltip),a=LS(WS,e.__scopeTooltip),r=cs.useRef(null),s=Gy(t,r),[i,o]=cs.useState(null),{trigger:l,onClose:c}=n,d=r.current,{onPointerInTransitChange:u}=a,f=cs.useCallback((()=>{o(null),u(!1)}),[u]),m=cs.useCallback(((e,t)=>{const n=e.currentTarget,a={x:e.clientX,y:e.clientY},r=function(e,t,n=5){const a=[];switch(t){case"top":a.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":a.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":a.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":a.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return a}(a,function(e,t){const n=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,a,r,s)){case s:return"left";case r:return"right";case n:return"top";case a:return"bottom";default:throw new Error("unreachable")}}(a,n.getBoundingClientRect())),s=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let a=0;a<e.length;a++){const n=e[a];for(;t.length>=2;){const e=t[t.length-1],a=t[t.length-2];if(!((e.x-a.x)*(n.y-a.y)>=(e.y-a.y)*(n.x-a.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let a=e.length-1;a>=0;a--){const t=e[a];for(;n.length>=2;){const e=n[n.length-1],a=n[n.length-2];if(!((e.x-a.x)*(t.y-a.y)>=(e.y-a.y)*(t.x-a.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...r,...function(e){const{top:t,right:n,bottom:a,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:a},{x:r,y:a}]}(t.getBoundingClientRect())]);o(s),u(!0)}),[u]);return cs.useEffect((()=>()=>f()),[f]),cs.useEffect((()=>{if(l&&d){const e=e=>m(e,d),t=e=>m(e,l);return l.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}}),[l,d,m,f]),cs.useEffect((()=>{if(i){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},a=(null==l?void 0:l.contains(t))||(null==d?void 0:d.contains(t)),r=!function(e,t){const{x:n,y:a}=e;let r=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const e=t[s],o=t[i],l=e.x,c=e.y,d=o.x,u=o.y;c>a!=u>a&&n<(d-l)*(a-c)/(u-c)+l&&(r=!r)}return r}(n,i);a?f():r&&(f(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[l,d,i,c,f]),vs.jsx(YS,{...e,ref:s})})),[HS,qS]=SS(DS,{isInside:!1}),$S=Ky("TooltipContent"),YS=cs.forwardRef(((e,t)=>{const{__scopeTooltip:n,children:a,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:i,...o}=e,l=OS(WS,n),c=MS(n),{onClose:d}=l;return cs.useEffect((()=>(document.addEventListener(AS,d),()=>document.removeEventListener(AS,d))),[d]),cs.useEffect((()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[l.trigger,d]),vs.jsx(ov,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:vs.jsxs(NS,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[vs.jsx($S,{children:a}),vs.jsx(HS,{scope:n,isInside:!0,children:vs.jsx(wv,{id:l.contentId,role:"tooltip",children:r||a})})]})})}));GS.displayName=WS;var QS="TooltipArrow";cs.forwardRef(((e,t)=>{const{__scopeTooltip:n,...a}=e,r=MS(n);return qS(QS,n).isInside?null:vs.jsx(CS,{...r,...a,ref:t})})).displayName=QS;var KS=GS;const JS=TS,ZS=RS,XS=FS,ek=cs.forwardRef((({className:e,sideOffset:t=4,...n},a)=>vs.jsx(KS,{ref:a,sideOffset:t,className:fN("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n})));ek.displayName=KS.displayName;const tk=cs.forwardRef((({className:e,...t},n)=>vs.jsx("div",{ref:n,className:fN("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t})));tk.displayName="Card";const nk=cs.forwardRef((({className:e,...t},n)=>vs.jsx("div",{ref:n,className:fN("flex flex-col space-y-1.5 p-6",e),...t})));nk.displayName="CardHeader";const ak=cs.forwardRef((({className:e,...t},n)=>vs.jsx("div",{ref:n,className:fN("text-2xl  leading-none tracking-tight",e),...t})));ak.displayName="CardTitle";const rk=cs.forwardRef((({className:e,...t},n)=>vs.jsx("div",{ref:n,className:fN("text-sm text-muted-foreground",e),...t})));rk.displayName="CardDescription";const sk=cs.forwardRef((({className:e,...t},n)=>vs.jsx("div",{ref:n,className:fN("p-6 pt-0",e),...t})));sk.displayName="CardContent";const ik=cs.forwardRef((({className:e,...t},n)=>vs.jsx("div",{ref:n,className:fN("flex items-center p-6 pt-0",e),...t})));ik.displayName="CardFooter";const ok=fb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",brand:"bg-brand-primary text-white hover:bg-brand-primary hover:opacity-90 transition-opacity",brandSecondary:"bg-brand-secondary text-white hover:bg-brand-secondary hover:opacity-90 transition-opacity",brandOutline:"btn-brand-outline",brandGhost:"btn-brand-ghost",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"brand",size:"default"}}),lk=cs.forwardRef((({className:e,variant:t,size:n,asChild:a=!1,...r},s)=>{const i=a?$y:"button";return vs.jsx(i,{className:fN(ok({variant:t,size:n,className:e})),ref:s,...r})}));lk.displayName="Button";const ck=fb("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs  transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function dk({className:e,variant:t,...n}){return vs.jsx("div",{className:fN(ck({variant:t}),e),...n})}const uk=cs.createContext(null);function fk({children:e}){const[t,n]=cs.useState(null),[a,r]=cs.useState([]),[s,i]=cs.useState({}),[o,l]=cs.useState(!0),c=e=>{localStorage.setItem("preferred-language",e)},d=async e=>{try{const t=await _y("GET",`/api/translations/language/${e}`);if(!t.ok)throw new Error("Failed to fetch translations");const n=await t.json(),a={};for(const e in n){const t=n[e];for(const n in t){a[`${e}.${n}`]=t[n]}}return a}catch(t){return{}}};cs.useEffect((()=>{(async()=>{l(!0);try{const e=await(async()=>{try{const e=await _y("GET","/api/languages");if(!e.ok)throw new Error("Failed to fetch languages");return await e.json()}catch(e){return[]}})();if(r(e),e.length>0){const t=localStorage.getItem("preferred-language")||"en",a=e.find((e=>e.code===t))||e.find((e=>!0===e.isDefault))||e[0];a&&await(async(e,t)=>{var a,r;l(!0);try{const o=await d(e),l=t.find((t=>t.code===e));if(l){n(l),i(o),c(e);try{(await fetch("/api/user",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}})).ok&&await _y("PUT","/api/user/language",{languageCode:e})}catch(s){!(null==(a=s.message)?void 0:a.includes("401"))&&(null==(r=s.message)||r.includes("Unauthorized"))}document.documentElement.lang=e,document.documentElement.dir=l.direction||"ltr"}}catch(o){}finally{l(!1)}})(a.code,e)}else l(!1)}catch(e){l(!1)}})()}),[]);const u={currentLanguage:t,languages:a,translations:s,isLoading:o,t:(e,t,n)=>{let a=s[e]||t||e;return n&&Object.entries(n).forEach((([e,t])=>{const n=`{{${e}}}`;a=a.replace(new RegExp(n,"g"),String(t))})),a},changeLanguage:async e=>{var t,r;l(!0);try{const o=await d(e),l=a.find((t=>t.code===e));if(l){n(l),i(o),c(e);try{(await fetch("/api/user",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}})).ok&&await _y("PUT","/api/user/language",{languageCode:e})}catch(s){!(null==(t=s.message)?void 0:t.includes("401"))&&(null==(r=s.message)||r.includes("Unauthorized"))}document.documentElement.lang=e,document.documentElement.dir=l.direction||"ltr"}}catch(o){}finally{l(!1)}},refreshTranslations:async()=>{if(t){const e=await d(t.code);i(e)}}};return vs.jsx(uk.Provider,{value:u,children:e})}function mk(){const e=cs.useContext(uk);if(!e)throw new Error("useTranslation must be used within a TranslationProvider");return e}const pk=Symbol.for("drizzle:entityKind");function hk(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,pk))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(pk in n&&n[pk]===t[pk])return!0;n=Object.getPrototypeOf(n)}return!1}we=pk;class gk{constructor(e,t){hr(this,"name"),hr(this,"keyAsName"),hr(this,"primary"),hr(this,"notNull"),hr(this,"default"),hr(this,"defaultFn"),hr(this,"onUpdateFn"),hr(this,"hasDefault"),hr(this,"isUnique"),hr(this,"uniqueName"),hr(this,"uniqueType"),hr(this,"dataType"),hr(this,"columnType"),hr(this,"enumValues"),hr(this,"generated"),hr(this,"generatedIdentity"),hr(this,"config"),this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}hr(gk,we,"Column"),je=pk;class xk{constructor(e,t,n){hr(this,"config"),hr(this,"$default",this.$defaultFn),hr(this,"$onUpdate",this.$onUpdateFn),this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}}hr(xk,je,"ColumnBuilder");const yk=Symbol.for("drizzle:Name");Ne=pk;class vk{constructor(e,t){hr(this,"reference"),hr(this,"_onUpdate","no action"),hr(this,"_onDelete","no action"),this.reference=()=>{const{name:t,columns:n,foreignColumns:a}=e();return{name:t,columns:n,foreignTable:a[0].table,foreignColumns:a}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new bk(e,this)}}hr(vk,Ne,"PgForeignKeyBuilder"),Ce=pk;class bk{constructor(e,t){hr(this,"reference"),hr(this,"onUpdate"),hr(this,"onDelete"),this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}getName(){const{name:e,columns:t,foreignColumns:n}=this.reference(),a=t.map((e=>e.name)),r=n.map((e=>e.name)),s=[this.table[yk],...a,n[0].table[yk],...r];return e??`${s.join("_")}_fk`}}function wk(e){return new Ck(e)}function jk(e,t){return`${e[yk]}_${t.join("_")}_unique`}hr(bk,Ce,"PgForeignKey"),Se=pk;class Nk{constructor(e,t){hr(this,"columns"),hr(this,"nullsNotDistinctConfig",!1),this.name=t,this.columns=e}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new Sk(e,this.columns,this.nullsNotDistinctConfig,this.name)}}hr(Nk,Se,"PgUniqueConstraintBuilder"),ke=pk;class Ck{constructor(e){hr(this,"name"),this.name=e}on(...e){return new Nk(e,this.name)}}hr(Ck,ke,"PgUniqueOnConstraintBuilder"),Me=pk;class Sk{constructor(e,t,n,a){hr(this,"columns"),hr(this,"name"),hr(this,"nullsNotDistinct",!1),this.table=e,this.columns=t,this.name=a??jk(this.table,this.columns.map((e=>e.name))),this.nullsNotDistinct=n}getName(){return this.name}}function kk(e,t,n){for(let a=t;a<e.length;a++){const r=e[a];if("\\"!==r){if('"'===r)return[e.slice(t,a).replace(/\\/g,""),a+1];if(!n&&(","===r||"}"===r))return[e.slice(t,a).replace(/\\/g,""),a]}else a++}return[e.slice(t).replace(/\\/g,""),e.length]}function Mk(e,t=0){const n=[];let a=t,r=!1;for(;a<e.length;){const s=e[a];if(","===s){(r||a===t)&&n.push(""),r=!0,a++;continue}if(r=!1,"\\"===s){a+=2;continue}if('"'===s){const[t,r]=kk(e,a+1,!0);n.push(t),a=r;continue}if("}"===s)return[n,a+1];if("{"===s){const[t,r]=Mk(e,a+1);n.push(t),a=r;continue}const[i,o]=kk(e,a,!1);n.push(i),a=o}return[n,a]}function _k(e){const[t]=Mk(e,1);return t}function Ik(e){return`{${e.map((e=>Array.isArray(e)?Ik(e):"string"==typeof e?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`)).join(",")}}`}hr(Sk,Me,"PgUniqueConstraint");class Ak extends(Ie=xk,_e=pk,Ie){constructor(){super(...arguments),hr(this,"foreignKeyConfigs",[])}array(e){return new Tk(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=null==t?void 0:t.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map((({ref:n,actions:a})=>function(e,...t){return e(...t)}(((n,a)=>{const r=new vk((()=>{const t=n();return{columns:[e],foreignColumns:[t]}}));return a.onUpdate&&r.onUpdate(a.onUpdate),a.onDelete&&r.onDelete(a.onDelete),r.build(t)}),n,a)))}buildExtraConfigColumn(e){return new Lk(e,this.config)}}hr(Ak,_e,"PgColumnBuilder");class Ek extends(Ee=gk,Ae=pk,Ee){constructor(e,t){t.uniqueName||(t.uniqueName=jk(e,[t.name])),super(e,t),this.table=e}}hr(Ek,Ae,"PgColumn");class Lk extends(Te=Ek,Le=pk,Te){constructor(){super(...arguments),hr(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass}),hr(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}hr(Lk,Le,"ExtraConfigColumn");class Tk extends(Pe=Ak,De=pk,Pe){constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){const t=this.config.baseBuilder.build(e);return new Pk(e,this.config,t)}}hr(Tk,De,"PgArrayBuilder");const Dk=class e extends(Re=Ek,Oe=pk,Re){constructor(e,t,n,a){super(e,t),hr(this,"size"),this.baseColumn=n,this.range=a,this.size=t.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=_k(e)),e.map((e=>this.baseColumn.mapFromDriverValue(e)))}mapToDriverValue(t,n=!1){const a=t.map((t=>null===t?null:hk(this.baseColumn,e)?this.baseColumn.mapToDriverValue(t,!0):this.baseColumn.mapToDriverValue(t)));return n?a:Ik(a)}};hr(Dk,Oe,"PgArray");let Pk=Dk;const Ok=Symbol.for("drizzle:isPgEnum");class Rk extends(Fe=Ak,ze=pk,Fe){constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new zk(e,this.config)}}hr(Rk,ze,"PgEnumColumnBuilder");class zk extends(Ue=Ek,Be=pk,Ue){constructor(e,t){super(e,t),hr(this,"enum",this.config.enum),hr(this,"enumValues",this.config.enum.enumValues),this.enum=t.enum}getSQLType(){return this.enum.enumName}}function Fk(e,t){return function(e,t,n){const a=Object.assign((e=>new Rk(e??"",a)),{enumName:e,enumValues:t,schema:n,[Ok]:!0});return a}(e,t,void 0)}hr(zk,Be,"PgEnumColumn"),We=pk;class Bk{constructor(e,t,n,a=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:a}}}hr(Bk,We,"Subquery");const Uk={startActiveSpan:(e,t)=>t()},Wk=Symbol.for("drizzle:ViewBaseConfig"),Gk=Symbol.for("drizzle:Schema"),Vk=Symbol.for("drizzle:Columns"),Hk=Symbol.for("drizzle:ExtraConfigColumns"),qk=Symbol.for("drizzle:OriginalName"),$k=Symbol.for("drizzle:BaseName"),Yk=Symbol.for("drizzle:IsAlias"),Qk=Symbol.for("drizzle:ExtraConfigBuilder"),Kk=Symbol.for("drizzle:IsDrizzleTable");let Jk=(Ze=pk,Je=yk,Ke=qk,Qe=Gk,Ye=Vk,$e=Hk,qe=$k,He=Yk,Ve=Kk,Ge=Qk,Xe=class{constructor(e,t,n){hr(this,Je),hr(this,Ke),hr(this,Qe),hr(this,Ye),hr(this,$e),hr(this,qe),hr(this,He,!1),hr(this,Ve,!0),hr(this,Ge),this[yk]=this[qk]=e,this[Gk]=t,this[$k]=n}},hr(Xe,Ze,"Table"),hr(Xe,"Symbol",{Name:yk,Schema:Gk,OriginalName:qk,Columns:Vk,ExtraConfigColumns:Hk,BaseName:$k,IsAlias:Yk,ExtraConfigBuilder:Qk}),Xe);function Zk(e){return"object"==typeof e&&null!==e&&Kk in e}et=pk;class Xk{constructor(e){hr(this,"value"),this.value=Array.isArray(e)?e:[e]}getSQL(){return new tM([this])}}hr(Xk,et,"StringChunk"),tt=pk;const eM=class e{constructor(e){hr(this,"decoder",aM),hr(this,"shouldInlineParams",!1),this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Uk.startActiveSpan("drizzle.buildSQL",(t=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return null==t||t.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n}))}buildQueryFromSourceParams(t,n){const a=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:r,escapeName:s,escapeParam:i,prepareTyping:o,inlineParams:l,paramStartIndex:c}=a;return function(e){var t;const n={sql:"",params:[]};for(const a of e)n.sql+=a.sql,n.params.push(...a.params),(null==(t=a.typings)?void 0:t.length)&&(n.typings||(n.typings=[]),n.typings.push(...a.typings));return n}(t.map((t=>{var d,u,f;if(hk(t,Xk))return{sql:t.value.join(""),params:[]};if(hk(t,nM))return{sql:s(t.value),params:[]};if(void 0===t)return{sql:"",params:[]};if(Array.isArray(t)){const e=[new Xk("(")];for(const[n,a]of t.entries())e.push(a),n<t.length-1&&e.push(new Xk(", "));return e.push(new Xk(")")),this.buildQueryFromSourceParams(e,a)}if(hk(t,e))return this.buildQueryFromSourceParams(t.queryChunks,{...a,inlineParams:l||t.shouldInlineParams});if(hk(t,Jk)){const e=t[Jk.Symbol.Schema],n=t[Jk.Symbol.Name];return{sql:void 0===e||t[Yk]?s(n):s(e)+"."+s(n),params:[]}}if(hk(t,gk)){const e=r.getColumnCasing(t);if("indexes"===n.invokeSource)return{sql:s(e),params:[]};const a=t.table[Jk.Symbol.Schema];return{sql:t.table[Yk]||void 0===a?s(t.table[Jk.Symbol.Name])+"."+s(e):s(a)+"."+s(t.table[Jk.Symbol.Name])+"."+s(e),params:[]}}if(hk(t,dM)){const e=t[Wk].schema,n=t[Wk].name;return{sql:void 0===e||t[Wk].isAlias?s(n):s(e)+"."+s(n),params:[]}}if(hk(t,sM)){if(hk(t.value,lM))return{sql:i(c.value++,t),params:[t],typings:["none"]};const n=null===t.value?null:t.encoder.mapToDriverValue(t.value);if(hk(n,e))return this.buildQueryFromSourceParams([n],a);if(l)return{sql:this.mapInlineParam(n,a),params:[]};let r=["none"];return o&&(r=[o(t.encoder)]),{sql:i(c.value++,n),params:[n],typings:r}}return hk(t,lM)?{sql:i(c.value++,t),params:[t],typings:["none"]}:hk(t,e.Aliased)&&void 0!==t.fieldAlias?{sql:s(t.fieldAlias),params:[]}:hk(t,Bk)?t._.isWith?{sql:s(t._.alias),params:[]}:this.buildQueryFromSourceParams([new Xk("("),t._.sql,new Xk(") "),new nM(t._.alias)],a):(u=t)&&"function"==typeof u&&Ok in u&&!0===u[Ok]?t.schema?{sql:s(t.schema)+"."+s(t.enumName),params:[]}:{sql:s(t.enumName),params:[]}:null!=(f=t)&&"function"==typeof f.getSQL?(null==(d=t.shouldOmitSQLParens)?void 0:d.call(t))?this.buildQueryFromSourceParams([t.getSQL()],a):this.buildQueryFromSourceParams([new Xk("("),t.getSQL(),new Xk(")")],a):l?{sql:this.mapInlineParam(t,a),params:[]}:{sql:i(c.value++,t),params:[t],typings:["none"]}})))}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){const n=e.toString();return t("[object Object]"===n?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(t){return void 0===t?this:new e.Aliased(this,t)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};hr(eM,tt,"SQL");let tM=eM;nt=pk;class nM{constructor(e){hr(this,"brand"),this.value=e}getSQL(){return new tM([this])}}hr(nM,nt,"Name");const aM={mapFromDriverValue:e=>e},rM={mapToDriverValue:e=>e};at=pk;class sM{constructor(e,t=rM){hr(this,"brand"),this.value=e,this.encoder=t}getSQL(){return new tM([this])}}function iM(e,...t){const n=[];(t.length>0||e.length>0&&""!==e[0])&&n.push(new Xk(e[0]));for(const[a,r]of t.entries())n.push(r,new Xk(e[a+1]));return new tM(n)}var oM;hr(sM,at,"Param"),(oM=iM||(iM={})).empty=function(){return new tM([])},oM.fromList=function(e){return new tM(e)},oM.raw=function(e){return new tM([new Xk(e)])},oM.join=function(e,t){const n=[];for(const[a,r]of e.entries())a>0&&void 0!==t&&n.push(t),n.push(r);return new tM(n)},oM.identifier=function(e){return new nM(e)},oM.placeholder=function(e){return new lM(e)},oM.param=function(e,t){return new sM(e,t)},(e=>{var t;t=pk;const n=class e{constructor(e,t){hr(this,"isSelectionField",!1),this.sql=e,this.fieldAlias=t}getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}};hr(n,t,"SQL.Aliased");let a=n;e.Aliased=a})(tM||(tM={}));let lM=(rt=pk,hr(st=class{constructor(e){this.name=e}getSQL(){return new tM([this])}},rt,"Placeholder"),st);const cM=Symbol.for("drizzle:IsDrizzleView");lt=pk,ot=Wk,it=cM;class dM{constructor({name:e,schema:t,selectedFields:n,query:a}){hr(this,ot),hr(this,it,!0),this[Wk]={name:e,originalName:e,schema:t,selectedFields:n,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new tM([this])}}function uM(e,t){return{name:"string"==typeof e&&e.length>0?e:"",config:"object"==typeof e?e:t}}hr(dM,lt,"View"),gk.prototype.getSQL=function(){return new tM([this])},Jk.prototype.getSQL=function(){return new tM([this])},Bk.prototype.getSQL=function(){return new tM([this])};class fM extends(dt=Ak,ct=pk,dt){generatedAlwaysAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}hr(fM,ct,"PgIntColumnBaseBuilder");class mM extends(ft=fM,ut=pk,ft){constructor(e){super(e,"number","PgBigInt53")}build(e){return new pM(e,this.config)}}hr(mM,ut,"PgBigInt53Builder");class pM extends(pt=Ek,mt=pk,pt){getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}hr(pM,mt,"PgBigInt53");class hM extends(gt=fM,ht=pk,gt){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new gM(e,this.config)}}hr(hM,ht,"PgBigInt64Builder");class gM extends(yt=Ek,xt=pk,yt){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function xM(e,t){const{name:n,config:a}=uM(e,t);return"number"===a.mode?new mM(n):new hM(n)}hr(gM,xt,"PgBigInt64");class yM extends(bt=Ak,vt=pk,bt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new vM(e,this.config)}}hr(yM,vt,"PgBigSerial53Builder");class vM extends(jt=Ek,wt=pk,jt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}hr(vM,wt,"PgBigSerial53");class bM extends(Ct=Ak,Nt=pk,Ct){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new wM(e,this.config)}}hr(bM,Nt,"PgBigSerial64Builder");class wM extends(kt=Ek,St=pk,kt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function jM(e,t){const{name:n,config:a}=uM(e,t);return"number"===a.mode?new yM(n):new bM(n)}hr(wM,St,"PgBigSerial64");class NM extends(_t=Ak,Mt=pk,_t){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new CM(e,this.config)}}hr(NM,Mt,"PgBooleanBuilder");class CM extends(At=Ek,It=pk,At){getSQLType(){return"boolean"}}function SM(e){return new NM(e??"")}hr(CM,It,"PgBoolean");class kM extends(Lt=Ak,Et=pk,Lt){constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new MM(e,this.config)}}hr(kM,Et,"PgCharBuilder");class MM extends(Dt=Ek,Tt=pk,Dt){constructor(){super(...arguments),hr(this,"length",this.config.length),hr(this,"enumValues",this.config.enumValues)}getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function _M(e,t={}){const{name:n,config:a}=uM(e,t);return new kM(n,a)}hr(MM,Tt,"PgChar");class IM extends(Ot=Ak,Pt=pk,Ot){constructor(e){super(e,"string","PgCidr")}build(e){return new AM(e,this.config)}}hr(IM,Pt,"PgCidrBuilder");class AM extends(zt=Ek,Rt=pk,zt){getSQLType(){return"cidr"}}function EM(e){return new IM(e??"")}hr(AM,Rt,"PgCidr");class LM extends(Bt=Ak,Ft=pk,Bt){constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new TM(e,this.config)}}hr(LM,Ft,"PgCustomColumnBuilder");class TM extends(Wt=Ek,Ut=pk,Wt){constructor(e,t){super(e,t),hr(this,"sqlName"),hr(this,"mapTo"),hr(this,"mapFrom"),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function DM(e){return(t,n)=>{const{name:a,config:r}=uM(t,n);return new LM(a,r,e)}}hr(TM,Ut,"PgCustomColumn");class PM extends(Vt=Ak,Gt=pk,Vt){defaultNow(){return this.default(iM`now()`)}}hr(PM,Gt,"PgDateColumnBaseBuilder");class OM extends(qt=PM,Ht=pk,qt){constructor(e){super(e,"date","PgDate")}build(e){return new RM(e,this.config)}}hr(OM,Ht,"PgDateBuilder");class RM extends(Yt=Ek,$t=pk,Yt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}hr(RM,$t,"PgDate");class zM extends(Kt=PM,Qt=pk,Kt){constructor(e){super(e,"string","PgDateString")}build(e){return new FM(e,this.config)}}hr(zM,Qt,"PgDateStringBuilder");class FM extends(Zt=Ek,Jt=pk,Zt){getSQLType(){return"date"}}function BM(e,t){const{name:n,config:a}=uM(e,t);return"date"===(null==a?void 0:a.mode)?new OM(n):new zM(n)}hr(FM,Jt,"PgDateString");class UM extends(en=Ak,Xt=pk,en){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new WM(e,this.config)}}hr(UM,Xt,"PgDoublePrecisionBuilder");class WM extends(nn=Ek,tn=pk,nn){getSQLType(){return"double precision"}mapFromDriverValue(e){return"string"==typeof e?Number.parseFloat(e):e}}function GM(e){return new UM(e??"")}hr(WM,tn,"PgDoublePrecision");class VM extends(rn=Ak,an=pk,rn){constructor(e){super(e,"string","PgInet")}build(e){return new HM(e,this.config)}}hr(VM,an,"PgInetBuilder");class HM extends(on=Ek,sn=pk,on){getSQLType(){return"inet"}}function qM(e){return new VM(e??"")}hr(HM,sn,"PgInet");class $M extends(cn=fM,ln=pk,cn){constructor(e){super(e,"number","PgInteger")}build(e){return new YM(e,this.config)}}hr($M,ln,"PgIntegerBuilder");class YM extends(un=Ek,dn=pk,un){getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}function QM(e){return new $M(e??"")}hr(YM,dn,"PgInteger");class KM extends(mn=Ak,fn=pk,mn){constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new JM(e,this.config)}}hr(KM,fn,"PgIntervalBuilder");class JM extends(hn=Ek,pn=pk,hn){constructor(){super(...arguments),hr(this,"fields",this.config.intervalConfig.fields),hr(this,"precision",this.config.intervalConfig.precision)}getSQLType(){return`interval${this.fields?` ${this.fields}`:""}${this.precision?`(${this.precision})`:""}`}}function ZM(e,t={}){const{name:n,config:a}=uM(e,t);return new KM(n,a)}hr(JM,pn,"PgInterval");class XM extends(xn=Ak,gn=pk,xn){constructor(e){super(e,"json","PgJson")}build(e){return new e_(e,this.config)}}hr(XM,gn,"PgJsonBuilder");class e_ extends(vn=Ek,yn=pk,vn){constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{return e}return e}}function t_(e){return new XM(e??"")}hr(e_,yn,"PgJson");class n_ extends(wn=Ak,bn=pk,wn){constructor(e){super(e,"json","PgJsonb")}build(e){return new a_(e,this.config)}}hr(n_,bn,"PgJsonbBuilder");class a_ extends(Nn=Ek,jn=pk,Nn){constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{return e}return e}}function r_(e){return new n_(e??"")}hr(a_,jn,"PgJsonb");class s_ extends(Sn=Ak,Cn=pk,Sn){constructor(e){super(e,"array","PgLine")}build(e){return new i_(e,this.config)}}hr(s_,Cn,"PgLineBuilder");class i_ extends(Mn=Ek,kn=pk,Mn){getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,a]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}hr(i_,kn,"PgLine");class o_ extends(In=Ak,_n=pk,In){constructor(e){super(e,"json","PgLineABC")}build(e){return new l_(e,this.config)}}hr(o_,_n,"PgLineABCBuilder");class l_ extends(En=Ek,An=pk,En){getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function c_(e,t){const{name:n,config:a}=uM(e,t);return(null==a?void 0:a.mode)&&"tuple"!==a.mode?new o_(n):new s_(n)}hr(l_,An,"PgLineABC");class d_ extends(Tn=Ak,Ln=pk,Tn){constructor(e){super(e,"string","PgMacaddr")}build(e){return new u_(e,this.config)}}hr(d_,Ln,"PgMacaddrBuilder");class u_ extends(Pn=Ek,Dn=pk,Pn){getSQLType(){return"macaddr"}}function f_(e){return new d_(e??"")}hr(u_,Dn,"PgMacaddr");class m_ extends(Rn=Ak,On=pk,Rn){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new p_(e,this.config)}}hr(m_,On,"PgMacaddr8Builder");class p_ extends(Fn=Ek,zn=pk,Fn){getSQLType(){return"macaddr8"}}function h_(e){return new m_(e??"")}hr(p_,zn,"PgMacaddr8");class g_ extends(Un=Ak,Bn=pk,Un){constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new x_(e,this.config)}}hr(g_,Bn,"PgNumericBuilder");class x_ extends(Gn=Ek,Wn=pk,Gn){constructor(e,t){super(e,t),hr(this,"precision"),hr(this,"scale"),this.precision=t.precision,this.scale=t.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function y_(e,t){const{name:n,config:a}=uM(e,t);return new g_(n,null==a?void 0:a.precision,null==a?void 0:a.scale)}hr(x_,Wn,"PgNumeric");class v_ extends(Hn=Ak,Vn=pk,Hn){constructor(e){super(e,"array","PgPointTuple")}build(e){return new b_(e,this.config)}}hr(v_,Vn,"PgPointTupleBuilder");class b_ extends($n=Ek,qn=pk,$n){getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){const[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}hr(b_,qn,"PgPointTuple");class w_ extends(Qn=Ak,Yn=pk,Qn){constructor(e){super(e,"json","PgPointObject")}build(e){return new j_(e,this.config)}}hr(w_,Yn,"PgPointObjectBuilder");class j_ extends(Jn=Ek,Kn=pk,Jn){getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){const[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function N_(e,t){const{name:n,config:a}=uM(e,t);return(null==a?void 0:a.mode)&&"tuple"!==a.mode?new w_(n):new v_(n)}function C_(e,t){const n=new ArrayBuffer(8),a=new DataView(n);for(let r=0;r<8;r++)a.setUint8(r,e[t+r]);return a.getFloat64(0,!0)}function S_(e){const t=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}(e);let n=0;const a=t[n];n+=1;const r=new DataView(t.buffer),s=r.getUint32(n,1===a);if(n+=4,536870912&s&&(r.getUint32(n,1===a),n+=4),1==(65535&s)){const e=C_(t,n);n+=8;const a=C_(t,n);return n+=8,[e,a]}throw new Error("Unsupported geometry type")}hr(j_,Kn,"PgPointObject");class k_ extends(Xn=Ak,Zn=pk,Xn){constructor(e){super(e,"array","PgGeometry")}build(e){return new M_(e,this.config)}}hr(k_,Zn,"PgGeometryBuilder");class M_ extends(ta=Ek,ea=pk,ta){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return S_(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}hr(M_,ea,"PgGeometry");class __ extends(aa=Ak,na=pk,aa){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new I_(e,this.config)}}hr(__,na,"PgGeometryObjectBuilder");class I_ extends(sa=Ek,ra=pk,sa){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=S_(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function A_(e,t){const{name:n,config:a}=uM(e,t);return(null==a?void 0:a.mode)&&"tuple"!==a.mode?new __(n):new k_(n)}hr(I_,ra,"PgGeometryObject");class E_ extends(oa=Ak,ia=pk,oa){constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new L_(e,this.config)}}hr(E_,ia,"PgRealBuilder");class L_ extends(ca=Ek,la=pk,ca){constructor(e,t){super(e,t),hr(this,"mapFromDriverValue",(e=>"string"==typeof e?Number.parseFloat(e):e))}getSQLType(){return"real"}}function T_(e){return new E_(e??"")}hr(L_,la,"PgReal");class D_ extends(ua=Ak,da=pk,ua){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new P_(e,this.config)}}hr(D_,da,"PgSerialBuilder");class P_ extends(ma=Ek,fa=pk,ma){getSQLType(){return"serial"}}function O_(e){return new D_(e??"")}hr(P_,fa,"PgSerial");class R_ extends(ha=fM,pa=pk,ha){constructor(e){super(e,"number","PgSmallInt")}build(e){return new z_(e,this.config)}}hr(R_,pa,"PgSmallIntBuilder");class z_ extends(xa=Ek,ga=pk,xa){constructor(){super(...arguments),hr(this,"mapFromDriverValue",(e=>"string"==typeof e?Number(e):e))}getSQLType(){return"smallint"}}function F_(e){return new R_(e??"")}hr(z_,ga,"PgSmallInt");class B_ extends(va=Ak,ya=pk,va){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new U_(e,this.config)}}hr(B_,ya,"PgSmallSerialBuilder");class U_ extends(wa=Ek,ba=pk,wa){getSQLType(){return"smallserial"}}function W_(e){return new B_(e??"")}hr(U_,ba,"PgSmallSerial");class G_ extends(Na=Ak,ja=pk,Na){constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new V_(e,this.config)}}hr(G_,ja,"PgTextBuilder");class V_ extends(Sa=Ek,Ca=pk,Sa){constructor(){super(...arguments),hr(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}function H_(e,t={}){const{name:n,config:a}=uM(e,t);return new G_(n,a)}hr(V_,Ca,"PgText");class q_ extends(Ma=PM,ka=pk,Ma){constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}build(e){return new $_(e,this.config)}}hr(q_,ka,"PgTimeBuilder");class $_ extends(Ia=Ek,_a=pk,Ia){constructor(e,t){super(e,t),hr(this,"withTimezone"),hr(this,"precision"),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${void 0===this.precision?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Y_(e,t={}){const{name:n,config:a}=uM(e,t);return new q_(n,a.withTimezone??!1,a.precision)}hr($_,_a,"PgTime");class Q_ extends(Ea=PM,Aa=pk,Ea){constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new K_(e,this.config)}}hr(Q_,Aa,"PgTimestampBuilder");class K_ extends(Ta=Ek,La=pk,Ta){constructor(e,t){super(e,t),hr(this,"withTimezone"),hr(this,"precision"),hr(this,"mapFromDriverValue",(e=>new Date(this.withTimezone?e:e+"+0000"))),hr(this,"mapToDriverValue",(e=>e.toISOString())),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${void 0===this.precision?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}hr(K_,La,"PgTimestamp");class J_ extends(Pa=PM,Da=pk,Pa){constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new Z_(e,this.config)}}hr(J_,Da,"PgTimestampStringBuilder");class Z_ extends(Ra=Ek,Oa=pk,Ra){constructor(e,t){super(e,t),hr(this,"withTimezone"),hr(this,"precision"),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${void 0===this.precision?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function X_(e,t={}){const{name:n,config:a}=uM(e,t);return"string"===(null==a?void 0:a.mode)?new J_(n,a.withTimezone??!1,a.precision):new Q_(n,(null==a?void 0:a.withTimezone)??!1,null==a?void 0:a.precision)}hr(Z_,Oa,"PgTimestampString");class eI extends(Fa=Ak,za=pk,Fa){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(iM`gen_random_uuid()`)}build(e){return new tI(e,this.config)}}hr(eI,za,"PgUUIDBuilder");class tI extends(Ua=Ek,Ba=pk,Ua){getSQLType(){return"uuid"}}function nI(e){return new eI(e??"")}hr(tI,Ba,"PgUUID");class aI extends(Ga=Ak,Wa=pk,Ga){constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new rI(e,this.config)}}hr(aI,Wa,"PgVarcharBuilder");class rI extends(Ha=Ek,Va=pk,Ha){constructor(){super(...arguments),hr(this,"length",this.config.length),hr(this,"enumValues",this.config.enumValues)}getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function sI(e,t={}){const{name:n,config:a}=uM(e,t);return new aI(n,a)}hr(rI,Va,"PgVarchar");class iI extends($a=Ak,qa=pk,$a){constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new oI(e,this.config)}}hr(iI,qa,"PgBinaryVectorBuilder");class oI extends(Qa=Ek,Ya=pk,Qa){constructor(){super(...arguments),hr(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}function lI(e,t){const{name:n,config:a}=uM(e,t);return new iI(n,a)}hr(oI,Ya,"PgBinaryVector");class cI extends(Ja=Ak,Ka=pk,Ja){constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new dI(e,this.config)}}hr(cI,Ka,"PgHalfVectorBuilder");class dI extends(Xa=Ek,Za=pk,Xa){constructor(){super(...arguments),hr(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map((e=>Number.parseFloat(e)))}}function uI(e,t){const{name:n,config:a}=uM(e,t);return new cI(n,a)}hr(dI,Za,"PgHalfVector");class fI extends(tr=Ak,er=pk,tr){constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new mI(e,this.config)}}hr(fI,er,"PgSparseVectorBuilder");class mI extends(ar=Ek,nr=pk,ar){constructor(){super(...arguments),hr(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}function pI(e,t){const{name:n,config:a}=uM(e,t);return new fI(n,a)}hr(mI,nr,"PgSparseVector");class hI extends(sr=Ak,rr=pk,sr){constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new gI(e,this.config)}}hr(hI,rr,"PgVectorBuilder");class gI extends(or=Ek,ir=pk,or){constructor(){super(...arguments),hr(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map((e=>Number.parseFloat(e)))}}function xI(e,t){const{name:n,config:a}=uM(e,t);return new hI(n,a)}hr(gI,ir,"PgVector");const yI=Symbol.for("drizzle:PgInlineForeignKeys"),vI=Symbol.for("drizzle:EnableRLS");class bI extends(fr=Jk,ur=pk,dr=yI,cr=vI,lr=Jk.Symbol.ExtraConfigBuilder,fr){constructor(){super(...arguments),hr(this,dr,[]),hr(this,cr,!1),hr(this,lr)}}function wI(e,t,n,a,r=e){const s=new bI(e,a,r),i="function"==typeof t?t({bigint:xM,bigserial:jM,boolean:SM,char:_M,cidr:EM,customType:DM,date:BM,doublePrecision:GM,inet:qM,integer:QM,interval:ZM,json:t_,jsonb:r_,line:c_,macaddr:f_,macaddr8:h_,numeric:y_,point:N_,geometry:A_,real:T_,serial:O_,smallint:F_,smallserial:W_,text:H_,time:Y_,timestamp:X_,uuid:nI,varchar:sI,bit:lI,halfvec:uI,sparsevec:pI,vector:xI}):t,o=Object.fromEntries(Object.entries(i).map((([e,t])=>{const n=t;n.setName(e);const a=n.build(s);return s[yI].push(...n.buildForeignKeys(a,s)),[e,a]}))),l=Object.fromEntries(Object.entries(i).map((([e,t])=>{const n=t;n.setName(e);return[e,n.buildExtraConfigColumn(s)]}))),c=Object.assign(s,o);return c[Jk.Symbol.Columns]=o,c[Jk.Symbol.ExtraConfigColumns]=l,n&&(c[bI.Symbol.ExtraConfigBuilder]=n),Object.assign(c,{enableRLS:()=>(c[bI.Symbol.EnableRLS]=!0,c)})}hr(bI,ur,"PgTable"),hr(bI,"Symbol",Object.assign({},Jk.Symbol,{InlineForeignKeys:yI,EnableRLS:vI}));const jI=(e,t,n)=>wI(e,t,n,void 0);var NI,CI,SI;(CI=NI||(NI={})).assertEqual=e=>{},CI.assertIs=function(e){},CI.assertNever=function(e){throw new Error},CI.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},CI.getValidEnumValues=e=>{const t=CI.objectKeys(e).filter((t=>"number"!=typeof e[e[t]])),n={};for(const a of t)n[a]=e[a];return CI.objectValues(n)},CI.objectValues=e=>CI.objectKeys(e).map((function(t){return e[t]})),CI.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},CI.find=(e,t)=>{for(const n of e)if(t(n))return n},CI.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,CI.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},CI.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(SI||(SI={})).mergeShapes=(e,t)=>({...e,...t});const kI=NI.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),MI=e=>{switch(typeof e){case"undefined":return kI.undefined;case"string":return kI.string;case"number":return Number.isNaN(e)?kI.nan:kI.number;case"boolean":return kI.boolean;case"function":return kI.function;case"bigint":return kI.bigint;case"symbol":return kI.symbol;case"object":return Array.isArray(e)?kI.array:null===e?kI.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?kI.promise:"undefined"!=typeof Map&&e instanceof Map?kI.map:"undefined"!=typeof Set&&e instanceof Set?kI.set:"undefined"!=typeof Date&&e instanceof Date?kI.date:kI.object;default:return kI.unknown}},_I=NI.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class II extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},a=e=>{for(const r of e.issues)if("invalid_union"===r.code)r.unionErrors.map(a);else if("invalid_return_type"===r.code)a(r.returnTypeError);else if("invalid_arguments"===r.code)a(r.argumentsError);else if(0===r.path.length)n._errors.push(t(r));else{let e=n,a=0;for(;a<r.path.length;){const n=r.path[a];a===r.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(r))):e[n]=e[n]||{_errors:[]},e=e[n],a++}}};return a(this),n}static assert(e){if(!(e instanceof II))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,NI.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}II.create=e=>new II(e);const AI=(e,t)=>{let n;switch(e.code){case _I.invalid_type:n=e.received===kI.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case _I.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,NI.jsonStringifyReplacer)}`;break;case _I.unrecognized_keys:n=`Unrecognized key(s) in object: ${NI.joinValues(e.keys,", ")}`;break;case _I.invalid_union:n="Invalid input";break;case _I.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${NI.joinValues(e.options)}`;break;case _I.invalid_enum_value:n=`Invalid enum value. Expected ${NI.joinValues(e.options)}, received '${e.received}'`;break;case _I.invalid_arguments:n="Invalid function arguments";break;case _I.invalid_return_type:n="Invalid function return type";break;case _I.invalid_date:n="Invalid date";break;case _I.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:NI.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case _I.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case _I.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case _I.custom:n="Invalid input";break;case _I.invalid_intersection_types:n="Intersection results could not be merged";break;case _I.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case _I.not_finite:n="Number must be finite";break;default:n=t.defaultError,NI.assertNever(e)}return{message:n}};let EI=AI;function LI(){return EI}const TI=e=>{const{data:t,path:n,errorMaps:a,issueData:r}=e,s=[...n,...r.path||[]],i={...r,path:s};if(void 0!==r.message)return{...r,path:s,message:r.message};let o="";const l=a.filter((e=>!!e)).slice().reverse();for(const c of l)o=c(i,{data:t,defaultError:o}).message;return{...r,path:s,message:o}};function DI(e,t){const n=LI(),a=TI({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===AI?void 0:AI].filter((e=>!!e))});e.common.issues.push(a)}class PI{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if("aborted"===a.status)return OI;"dirty"===a.status&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t){const e=await a.key,t=await a.value;n.push({key:e,value:t})}return PI.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:t,value:r}=a;if("aborted"===t.status)return OI;if("aborted"===r.status)return OI;"dirty"===t.status&&e.dirty(),"dirty"===r.status&&e.dirty(),"__proto__"===t.value||void 0===r.value&&!a.alwaysSet||(n[t.value]=r.value)}return{status:e.value,value:n}}}const OI=Object.freeze({status:"aborted"}),RI=e=>({status:"dirty",value:e}),zI=e=>({status:"valid",value:e}),FI=e=>"aborted"===e.status,BI=e=>"dirty"===e.status,UI=e=>"valid"===e.status,WI=e=>"undefined"!=typeof Promise&&e instanceof Promise;var GI,VI;(VI=GI||(GI={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},VI.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;var HI,qI,$I=function(e,t,n,a){if("a"===n&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?a:"a"===n?a.call(e):a?a.value:t.get(e)},YI=function(e,t,n,a,r){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?r.call(e,n):r?r.value=n:t.set(e,n),n};class QI{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const KI=(e,t)=>{if(UI(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new II(e.common.issues);return this._error=t,this._error}}};function JI(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:a,description:r}=e;if(t&&(n||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:r};return{errorMap:(t,r)=>{const{message:s}=e;return"invalid_enum_value"===t.code?{message:s??r.defaultError}:void 0===r.data?{message:s??a??r.defaultError}:"invalid_type"!==t.code?{message:r.defaultError}:{message:s??n??r.defaultError}},description:r}}class ZI{get description(){return this._def.description}_getType(e){return MI(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:MI(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new PI,ctx:{common:e.parent.common,data:e.data,parsedType:MI(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(WI(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(null==t?void 0:t.async)??!1,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:MI(e)},a=this._parseSync({data:e,path:n.path,parent:n});return KI(n,a)}"~validate"(e){var t,n;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:MI(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:a});return UI(t)?{value:t.value}:{issues:a.common.issues}}catch(r){(null==(n=null==(t=null==r?void 0:r.message)?void 0:t.toLowerCase())?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then((e=>UI(e)?{value:e.value}:{issues:a.common.issues}))}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:MI(e)},a=this._parse({data:e,path:n.path,parent:n}),r=await(WI(a)?a:Promise.resolve(a));return KI(n,r)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,a)=>{const r=e(t),s=()=>a.addIssue({code:_I.custom,...n(t)});return"undefined"!=typeof Promise&&r instanceof Promise?r.then((e=>!!e||(s(),!1))):!!r||(s(),!1)}))}refinement(e,t){return this._refinement(((n,a)=>!!e(n)||(a.addIssue("function"==typeof t?t(n,a):t),!1)))}_refinement(e){return new ZA({schema:this,typeName:uE.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return XA.create(this,this._def)}nullable(){return eE.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return TA.create(this)}promise(){return JA.create(this,this._def)}or(e){return OA.create([this,e],this._def)}and(e){return BA.create(this,e,this._def)}transform(e){return new ZA({...JI(this._def),schema:this,typeName:uE.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new tE({...JI(this._def),innerType:this,defaultValue:t,typeName:uE.ZodDefault})}brand(){return new sE({typeName:uE.ZodBranded,type:this,...JI(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new nE({...JI(this._def),innerType:this,catchValue:t,typeName:uE.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return iE.create(this,e)}readonly(){return oE.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const XI=/^c[^\s-]{8,}$/i,eA=/^[0-9a-z]+$/,tA=/^[0-9A-HJKMNP-TV-Z]{26}$/i,nA=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aA=/^[a-z0-9_-]{21}$/i,rA=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,sA=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,iA=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let oA;const lA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,dA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,uA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,fA=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,mA=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,pA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hA=new RegExp(`^${pA}$`);function gA(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function xA(e){let t=`${pA}T${gA(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function yA(e,t){if(!rA.test(e))return!1;try{const[n]=e.split("."),a=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(a));return"object"==typeof r&&null!==r&&((!("typ"in r)||"JWT"===(null==r?void 0:r.typ))&&(!!r.alg&&(!t||r.alg===t)))}catch{return!1}}function vA(e,t){return!("v4"!==t&&t||!cA.test(e))||!("v6"!==t&&t||!uA.test(e))}class bA extends ZI{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==kI.string){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.string,received:t.parsedType}),OI}const t=new PI;let n;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(n=this._getOrReturnCtx(e,n),DI(n,{code:_I.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(n=this._getOrReturnCtx(e,n),DI(n,{code:_I.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const a=e.data.length>s.value,r=e.data.length<s.value;(a||r)&&(n=this._getOrReturnCtx(e,n),a?DI(n,{code:_I.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):r&&DI(n,{code:_I.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)iA.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"email",code:_I.invalid_string,message:s.message}),t.dirty());else if("emoji"===s.kind)oA||(oA=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),oA.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"emoji",code:_I.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)nA.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"uuid",code:_I.invalid_string,message:s.message}),t.dirty());else if("nanoid"===s.kind)aA.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"nanoid",code:_I.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)XI.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"cuid",code:_I.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)eA.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"cuid2",code:_I.invalid_string,message:s.message}),t.dirty());else if("ulid"===s.kind)tA.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"ulid",code:_I.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),DI(n,{validation:"url",code:_I.invalid_string,message:s.message}),t.dirty()}else if("regex"===s.kind){s.regex.lastIndex=0;s.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"regex",code:_I.invalid_string,message:s.message}),t.dirty())}else if("trim"===s.kind)e.data=e.data.trim();else if("includes"===s.kind)e.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(e,n),DI(n,{code:_I.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),t.dirty());else if("toLowerCase"===s.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===s.kind)e.data=e.data.toUpperCase();else if("startsWith"===s.kind)e.data.startsWith(s.value)||(n=this._getOrReturnCtx(e,n),DI(n,{code:_I.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty());else if("endsWith"===s.kind)e.data.endsWith(s.value)||(n=this._getOrReturnCtx(e,n),DI(n,{code:_I.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty());else if("datetime"===s.kind){xA(s).test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{code:_I.invalid_string,validation:"datetime",message:s.message}),t.dirty())}else if("date"===s.kind){hA.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{code:_I.invalid_string,validation:"date",message:s.message}),t.dirty())}else if("time"===s.kind){new RegExp(`^${gA(s)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{code:_I.invalid_string,validation:"time",message:s.message}),t.dirty())}else"duration"===s.kind?sA.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"duration",code:_I.invalid_string,message:s.message}),t.dirty()):"ip"===s.kind?(a=e.data,("v4"!==(r=s.version)&&r||!lA.test(a))&&("v6"!==r&&r||!dA.test(a))&&(n=this._getOrReturnCtx(e,n),DI(n,{validation:"ip",code:_I.invalid_string,message:s.message}),t.dirty())):"jwt"===s.kind?yA(e.data,s.alg)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"jwt",code:_I.invalid_string,message:s.message}),t.dirty()):"cidr"===s.kind?vA(e.data,s.version)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"cidr",code:_I.invalid_string,message:s.message}),t.dirty()):"base64"===s.kind?fA.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"base64",code:_I.invalid_string,message:s.message}),t.dirty()):"base64url"===s.kind?mA.test(e.data)||(n=this._getOrReturnCtx(e,n),DI(n,{validation:"base64url",code:_I.invalid_string,message:s.message}),t.dirty()):NI.assertNever(s);var a,r;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:_I.invalid_string,...GI.errToObj(n)})}_addCheck(e){return new bA({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...GI.errToObj(e)})}url(e){return this._addCheck({kind:"url",...GI.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...GI.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...GI.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...GI.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...GI.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...GI.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...GI.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...GI.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...GI.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...GI.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...GI.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...GI.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:(null==e?void 0:e.offset)??!1,local:(null==e?void 0:e.local)??!1,...GI.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...GI.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...GI.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...GI.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...GI.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...GI.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...GI.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...GI.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...GI.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...GI.errToObj(t)})}nonempty(e){return this.min(1,GI.errToObj(e))}trim(){return new bA({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new bA({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new bA({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function wA(e,t){const n=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,r=n>a?n:a;return Number.parseInt(e.toFixed(r).replace(".",""))%Number.parseInt(t.toFixed(r).replace(".",""))/10**r}bA.create=e=>new bA({checks:[],typeName:uE.ZodString,coerce:(null==e?void 0:e.coerce)??!1,...JI(e)});class jA extends ZI{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==kI.number){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.number,received:t.parsedType}),OI}let t;const n=new PI;for(const a of this._def.checks)if("int"===a.kind)NI.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),DI(t,{code:_I.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty());else if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),DI(t,{code:_I.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),DI(t,{code:_I.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else"multipleOf"===a.kind?0!==wA(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),DI(t,{code:_I.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),DI(t,{code:_I.not_finite,message:a.message}),n.dirty()):NI.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,GI.toString(t))}gt(e,t){return this.setLimit("min",e,!1,GI.toString(t))}lte(e,t){return this.setLimit("max",e,!0,GI.toString(t))}lt(e,t){return this.setLimit("max",e,!1,GI.toString(t))}setLimit(e,t,n,a){return new jA({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:GI.toString(a)}]})}_addCheck(e){return new jA({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:GI.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:GI.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:GI.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:GI.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:GI.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:GI.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:GI.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:GI.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:GI.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&NI.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}jA.create=e=>new jA({checks:[],typeName:uE.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...JI(e)});class NA extends ZI{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==kI.bigint)return this._getInvalidInput(e);let t;const n=new PI;for(const a of this._def.checks)if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),DI(t,{code:_I.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),DI(t,{code:_I.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),DI(t,{code:_I.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):NI.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.bigint,received:t.parsedType}),OI}gte(e,t){return this.setLimit("min",e,!0,GI.toString(t))}gt(e,t){return this.setLimit("min",e,!1,GI.toString(t))}lte(e,t){return this.setLimit("max",e,!0,GI.toString(t))}lt(e,t){return this.setLimit("max",e,!1,GI.toString(t))}setLimit(e,t,n,a){return new NA({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:GI.toString(a)}]})}_addCheck(e){return new NA({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:GI.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:GI.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:GI.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:GI.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:GI.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}NA.create=e=>new NA({checks:[],typeName:uE.ZodBigInt,coerce:(null==e?void 0:e.coerce)??!1,...JI(e)});class CA extends ZI{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==kI.boolean){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.boolean,received:t.parsedType}),OI}return zI(e.data)}}CA.create=e=>new CA({typeName:uE.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...JI(e)});class SA extends ZI{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==kI.date){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.date,received:t.parsedType}),OI}if(Number.isNaN(e.data.getTime())){return DI(this._getOrReturnCtx(e),{code:_I.invalid_date}),OI}const t=new PI;let n;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),DI(n,{code:_I.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),DI(n,{code:_I.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):NI.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new SA({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:GI.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:GI.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}SA.create=e=>new SA({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:uE.ZodDate,...JI(e)});class kA extends ZI{_parse(e){if(this._getType(e)!==kI.symbol){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.symbol,received:t.parsedType}),OI}return zI(e.data)}}kA.create=e=>new kA({typeName:uE.ZodSymbol,...JI(e)});class MA extends ZI{_parse(e){if(this._getType(e)!==kI.undefined){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.undefined,received:t.parsedType}),OI}return zI(e.data)}}MA.create=e=>new MA({typeName:uE.ZodUndefined,...JI(e)});class _A extends ZI{_parse(e){if(this._getType(e)!==kI.null){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.null,received:t.parsedType}),OI}return zI(e.data)}}_A.create=e=>new _A({typeName:uE.ZodNull,...JI(e)});class IA extends ZI{constructor(){super(...arguments),this._any=!0}_parse(e){return zI(e.data)}}IA.create=e=>new IA({typeName:uE.ZodAny,...JI(e)});class AA extends ZI{constructor(){super(...arguments),this._unknown=!0}_parse(e){return zI(e.data)}}AA.create=e=>new AA({typeName:uE.ZodUnknown,...JI(e)});class EA extends ZI{_parse(e){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.never,received:t.parsedType}),OI}}EA.create=e=>new EA({typeName:uE.ZodNever,...JI(e)});class LA extends ZI{_parse(e){if(this._getType(e)!==kI.undefined){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.void,received:t.parsedType}),OI}return zI(e.data)}}LA.create=e=>new LA({typeName:uE.ZodVoid,...JI(e)});class TA extends ZI{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==kI.array)return DI(t,{code:_I.invalid_type,expected:kI.array,received:t.parsedType}),OI;if(null!==a.exactLength){const e=t.data.length>a.exactLength.value,r=t.data.length<a.exactLength.value;(e||r)&&(DI(t,{code:e?_I.too_big:_I.too_small,minimum:r?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(DI(t,{code:_I.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(DI(t,{code:_I.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>a.type._parseAsync(new QI(t,e,t.path,n))))).then((e=>PI.mergeArray(n,e)));const r=[...t.data].map(((e,n)=>a.type._parseSync(new QI(t,e,t.path,n))));return PI.mergeArray(n,r)}get element(){return this._def.type}min(e,t){return new TA({...this._def,minLength:{value:e,message:GI.toString(t)}})}max(e,t){return new TA({...this._def,maxLength:{value:e,message:GI.toString(t)}})}length(e,t){return new TA({...this._def,exactLength:{value:e,message:GI.toString(t)}})}nonempty(e){return this.min(1,e)}}function DA(e){if(e instanceof PA){const t={};for(const n in e.shape){const a=e.shape[n];t[n]=XA.create(DA(a))}return new PA({...e._def,shape:()=>t})}return e instanceof TA?new TA({...e._def,type:DA(e.element)}):e instanceof XA?XA.create(DA(e.unwrap())):e instanceof eE?eE.create(DA(e.unwrap())):e instanceof UA?UA.create(e.items.map((e=>DA(e)))):e}TA.create=(e,t)=>new TA({type:e,minLength:null,maxLength:null,exactLength:null,typeName:uE.ZodArray,...JI(t)});class PA extends ZI{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=NI.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==kI.object){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.object,received:t.parsedType}),OI}const{status:t,ctx:n}=this._processInputParams(e),{shape:a,keys:r}=this._getCached(),s=[];if(!(this._def.catchall instanceof EA&&"strip"===this._def.unknownKeys))for(const o in n.data)r.includes(o)||s.push(o);const i=[];for(const o of r){const e=a[o],t=n.data[o];i.push({key:{status:"valid",value:o},value:e._parse(new QI(n,t,n.path,o)),alwaysSet:o in n.data})}if(this._def.catchall instanceof EA){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of s)i.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)s.length>0&&(DI(n,{code:_I.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const a=n.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new QI(n,a,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of i){const n=await t.key,a=await t.value;e.push({key:n,value:a,alwaysSet:t.alwaysSet})}return e})).then((e=>PI.mergeObjectSync(t,e))):PI.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return GI.errToObj,new PA({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var a,r;const s=(null==(r=(a=this._def).errorMap)?void 0:r.call(a,t,n).message)??n.defaultError;return"unrecognized_keys"===t.code?{message:GI.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new PA({...this._def,unknownKeys:"strip"})}passthrough(){return new PA({...this._def,unknownKeys:"passthrough"})}extend(e){return new PA({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new PA({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:uE.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new PA({...this._def,catchall:e})}pick(e){const t={};for(const n of NI.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new PA({...this._def,shape:()=>t})}omit(e){const t={};for(const n of NI.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new PA({...this._def,shape:()=>t})}deepPartial(){return DA(this)}partial(e){const t={};for(const n of NI.objectKeys(this.shape)){const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}return new PA({...this._def,shape:()=>t})}required(e){const t={};for(const n of NI.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof XA;)e=e._def.innerType;t[n]=e}return new PA({...this._def,shape:()=>t})}keyof(){return YA(NI.objectKeys(this.shape))}}PA.create=(e,t)=>new PA({shape:()=>e,unknownKeys:"strip",catchall:EA.create(),typeName:uE.ZodObject,...JI(t)}),PA.strictCreate=(e,t)=>new PA({shape:()=>e,unknownKeys:"strict",catchall:EA.create(),typeName:uE.ZodObject,...JI(t)}),PA.lazycreate=(e,t)=>new PA({shape:e,unknownKeys:"strip",catchall:EA.create(),typeName:uE.ZodObject,...JI(t)});class OA extends ZI{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const a of e)if("dirty"===a.result.status)return t.common.issues.push(...a.ctx.common.issues),a.result;const n=e.map((e=>new II(e.ctx.common.issues)));return DI(t,{code:_I.invalid_union,unionErrors:n}),OI}));{let e;const a=[];for(const s of n){const n={...t,common:{...t.common,issues:[]},parent:null},r=s._parseSync({data:t.data,path:t.path,parent:n});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:n}),n.common.issues.length&&a.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const r=a.map((e=>new II(e)));return DI(t,{code:_I.invalid_union,unionErrors:r}),OI}}get options(){return this._def.options}}OA.create=(e,t)=>new OA({options:e,typeName:uE.ZodUnion,...JI(t)});const RA=e=>e instanceof qA?RA(e.schema):e instanceof ZA?RA(e.innerType()):e instanceof $A?[e.value]:e instanceof QA?e.options:e instanceof KA?NI.objectValues(e.enum):e instanceof tE?RA(e._def.innerType):e instanceof MA?[void 0]:e instanceof _A?[null]:e instanceof XA?[void 0,...RA(e.unwrap())]:e instanceof eE?[null,...RA(e.unwrap())]:e instanceof sE||e instanceof oE?RA(e.unwrap()):e instanceof nE?RA(e._def.innerType):[];class zA extends ZI{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==kI.object)return DI(t,{code:_I.invalid_type,expected:kI.object,received:t.parsedType}),OI;const n=this.discriminator,a=t.data[n],r=this.optionsMap.get(a);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(DI(t,{code:_I.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),OI)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const a=new Map;for(const r of t){const t=RA(r.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(a.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);a.set(n,r)}}return new zA({typeName:uE.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...JI(n)})}}function FA(e,t){const n=MI(e),a=MI(t);if(e===t)return{valid:!0,data:e};if(n===kI.object&&a===kI.object){const n=NI.objectKeys(t),a=NI.objectKeys(e).filter((e=>-1!==n.indexOf(e))),r={...e,...t};for(const s of a){const n=FA(e[s],t[s]);if(!n.valid)return{valid:!1};r[s]=n.data}return{valid:!0,data:r}}if(n===kI.array&&a===kI.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let a=0;a<e.length;a++){const r=FA(e[a],t[a]);if(!r.valid)return{valid:!1};n.push(r.data)}return{valid:!0,data:n}}return n===kI.date&&a===kI.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class BA extends ZI{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(e,a)=>{if(FI(e)||FI(a))return OI;const r=FA(e.value,a.value);return r.valid?((BI(e)||BI(a))&&t.dirty(),{status:t.value,value:r.data}):(DI(n,{code:_I.invalid_intersection_types}),OI)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>a(e,t))):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}BA.create=(e,t,n)=>new BA({left:e,right:t,typeName:uE.ZodIntersection,...JI(n)});class UA extends ZI{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==kI.array)return DI(n,{code:_I.invalid_type,expected:kI.array,received:n.parsedType}),OI;if(n.data.length<this._def.items.length)return DI(n,{code:_I.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),OI;!this._def.rest&&n.data.length>this._def.items.length&&(DI(n,{code:_I.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map(((e,t)=>{const a=this._def.items[t]||this._def.rest;return a?a._parse(new QI(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(a).then((e=>PI.mergeArray(t,e))):PI.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new UA({...this._def,rest:e})}}UA.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new UA({items:e,typeName:uE.ZodTuple,rest:null,...JI(t)})};class WA extends ZI{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==kI.object)return DI(n,{code:_I.invalid_type,expected:kI.object,received:n.parsedType}),OI;const a=[],r=this._def.keyType,s=this._def.valueType;for(const i in n.data)a.push({key:r._parse(new QI(n,i,n.path,i)),value:s._parse(new QI(n,n.data[i],n.path,i)),alwaysSet:i in n.data});return n.common.async?PI.mergeObjectAsync(t,a):PI.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,n){return new WA(t instanceof ZI?{keyType:e,valueType:t,typeName:uE.ZodRecord,...JI(n)}:{keyType:bA.create(),valueType:e,typeName:uE.ZodRecord,...JI(t)})}}class GA extends ZI{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==kI.map)return DI(n,{code:_I.invalid_type,expected:kI.map,received:n.parsedType}),OI;const a=this._def.keyType,r=this._def.valueType,s=[...n.data.entries()].map((([e,t],s)=>({key:a._parse(new QI(n,e,n.path,[s,"key"])),value:r._parse(new QI(n,t,n.path,[s,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of s){const a=await n.key,r=await n.value;if("aborted"===a.status||"aborted"===r.status)return OI;"dirty"!==a.status&&"dirty"!==r.status||t.dirty(),e.set(a.value,r.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of s){const a=n.key,r=n.value;if("aborted"===a.status||"aborted"===r.status)return OI;"dirty"!==a.status&&"dirty"!==r.status||t.dirty(),e.set(a.value,r.value)}return{status:t.value,value:e}}}}GA.create=(e,t,n)=>new GA({valueType:t,keyType:e,typeName:uE.ZodMap,...JI(n)});class VA extends ZI{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==kI.set)return DI(n,{code:_I.invalid_type,expected:kI.set,received:n.parsedType}),OI;const a=this._def;null!==a.minSize&&n.data.size<a.minSize.value&&(DI(n,{code:_I.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&n.data.size>a.maxSize.value&&(DI(n,{code:_I.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const r=this._def.valueType;function s(e){const n=new Set;for(const a of e){if("aborted"===a.status)return OI;"dirty"===a.status&&t.dirty(),n.add(a.value)}return{status:t.value,value:n}}const i=[...n.data.values()].map(((e,t)=>r._parse(new QI(n,e,n.path,t))));return n.common.async?Promise.all(i).then((e=>s(e))):s(i)}min(e,t){return new VA({...this._def,minSize:{value:e,message:GI.toString(t)}})}max(e,t){return new VA({...this._def,maxSize:{value:e,message:GI.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}VA.create=(e,t)=>new VA({valueType:e,minSize:null,maxSize:null,typeName:uE.ZodSet,...JI(t)});class HA extends ZI{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==kI.function)return DI(t,{code:_I.invalid_type,expected:kI.function,received:t.parsedType}),OI;function n(e,n){return TI({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,LI(),AI].filter((e=>!!e)),issueData:{code:_I.invalid_arguments,argumentsError:n}})}function a(e,n){return TI({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,LI(),AI].filter((e=>!!e)),issueData:{code:_I.invalid_return_type,returnTypeError:n}})}const r={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof JA){const e=this;return zI((async function(...t){const i=new II([]),o=await e._def.args.parseAsync(t,r).catch((e=>{throw i.addIssue(n(t,e)),i})),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,r).catch((e=>{throw i.addIssue(a(l,e)),i}))}))}{const e=this;return zI((function(...t){const i=e._def.args.safeParse(t,r);if(!i.success)throw new II([n(t,i.error)]);const o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,r);if(!l.success)throw new II([a(o,l.error)]);return l.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new HA({...this._def,args:UA.create(e).rest(AA.create())})}returns(e){return new HA({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new HA({args:e||UA.create([]).rest(AA.create()),returns:t||AA.create(),typeName:uE.ZodFunction,...JI(n)})}}class qA extends ZI{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}qA.create=(e,t)=>new qA({getter:e,typeName:uE.ZodLazy,...JI(t)});class $A extends ZI{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return DI(t,{received:t.data,code:_I.invalid_literal,expected:this._def.value}),OI}return{status:"valid",value:e.data}}get value(){return this._def.value}}function YA(e,t){return new QA({values:e,typeName:uE.ZodEnum,...JI(t)})}$A.create=(e,t)=>new $A({value:e,typeName:uE.ZodLiteral,...JI(t)});class QA extends ZI{constructor(){super(...arguments),HI.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return DI(t,{expected:NI.joinValues(n),received:t.parsedType,code:_I.invalid_type}),OI}if($I(this,HI,"f")||YI(this,HI,new Set(this._def.values),"f"),!$I(this,HI,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return DI(t,{received:t.data,code:_I.invalid_enum_value,options:n}),OI}return zI(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return QA.create(e,{...this._def,...t})}exclude(e,t=this._def){return QA.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}HI=new WeakMap,QA.create=YA;class KA extends ZI{constructor(){super(...arguments),qI.set(this,void 0)}_parse(e){const t=NI.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==kI.string&&n.parsedType!==kI.number){const e=NI.objectValues(t);return DI(n,{expected:NI.joinValues(e),received:n.parsedType,code:_I.invalid_type}),OI}if($I(this,qI,"f")||YI(this,qI,new Set(NI.getValidEnumValues(this._def.values)),"f"),!$I(this,qI,"f").has(e.data)){const e=NI.objectValues(t);return DI(n,{received:n.data,code:_I.invalid_enum_value,options:e}),OI}return zI(e.data)}get enum(){return this._def.values}}qI=new WeakMap,KA.create=(e,t)=>new KA({values:e,typeName:uE.ZodNativeEnum,...JI(t)});class JA extends ZI{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==kI.promise&&!1===t.common.async)return DI(t,{code:_I.invalid_type,expected:kI.promise,received:t.parsedType}),OI;const n=t.parsedType===kI.promise?t.data:Promise.resolve(t.data);return zI(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}JA.create=(e,t)=>new JA({type:e,typeName:uE.ZodPromise,...JI(t)});class ZA extends ZI{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===uE.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,r={addIssue:e=>{DI(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),"preprocess"===a.type){const e=a.transform(n.data,r);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return OI;const a=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===a.status?OI:"dirty"===a.status||"dirty"===t.value?RI(a.value):a}));{if("aborted"===t.value)return OI;const a=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===a.status?OI:"dirty"===a.status||"dirty"===t.value?RI(a.value):a}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,r);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===a.status?OI:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?OI:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===a.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!UI(e))return e;const s=a.transform(e.value,r);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>UI(e)?Promise.resolve(a.transform(e.value,r)).then((e=>({status:t.value,value:e}))):e))}NI.assertNever(a)}}ZA.create=(e,t,n)=>new ZA({schema:e,typeName:uE.ZodEffects,effect:t,...JI(n)}),ZA.createWithPreprocess=(e,t,n)=>new ZA({schema:t,effect:{type:"preprocess",transform:e},typeName:uE.ZodEffects,...JI(n)});class XA extends ZI{_parse(e){return this._getType(e)===kI.undefined?zI(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}XA.create=(e,t)=>new XA({innerType:e,typeName:uE.ZodOptional,...JI(t)});class eE extends ZI{_parse(e){return this._getType(e)===kI.null?zI(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eE.create=(e,t)=>new eE({innerType:e,typeName:uE.ZodNullable,...JI(t)});class tE extends ZI{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===kI.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}tE.create=(e,t)=>new tE({innerType:e,typeName:uE.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...JI(t)});class nE extends ZI{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return WI(a)?a.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new II(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new II(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}nE.create=(e,t)=>new nE({innerType:e,typeName:uE.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...JI(t)});class aE extends ZI{_parse(e){if(this._getType(e)!==kI.nan){const t=this._getOrReturnCtx(e);return DI(t,{code:_I.invalid_type,expected:kI.nan,received:t.parsedType}),OI}return{status:"valid",value:e.data}}}aE.create=e=>new aE({typeName:uE.ZodNaN,...JI(e)});const rE=Symbol("zod_brand");class sE extends ZI{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class iE extends ZI{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?OI:"dirty"===e.status?(t.dirty(),RI(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?OI:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new iE({in:e,out:t,typeName:uE.ZodPipeline})}}class oE extends ZI{_parse(e){const t=this._def.innerType._parse(e),n=e=>(UI(e)&&(e.value=Object.freeze(e.value)),e);return WI(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function lE(e,t){const n="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof n?{message:n}:n}function cE(e,t={},n){return e?IA.create().superRefine(((a,r)=>{const s=e(a);if(s instanceof Promise)return s.then((e=>{if(!e){const e=lE(t,a),s=e.fatal??n??!0;r.addIssue({code:"custom",...e,fatal:s})}}));if(!s){const e=lE(t,a),s=e.fatal??n??!0;r.addIssue({code:"custom",...e,fatal:s})}})):IA.create()}oE.create=(e,t)=>new oE({innerType:e,typeName:uE.ZodReadonly,...JI(t)});const dE={object:PA.lazycreate};var uE,fE;(fE=uE||(uE={})).ZodString="ZodString",fE.ZodNumber="ZodNumber",fE.ZodNaN="ZodNaN",fE.ZodBigInt="ZodBigInt",fE.ZodBoolean="ZodBoolean",fE.ZodDate="ZodDate",fE.ZodSymbol="ZodSymbol",fE.ZodUndefined="ZodUndefined",fE.ZodNull="ZodNull",fE.ZodAny="ZodAny",fE.ZodUnknown="ZodUnknown",fE.ZodNever="ZodNever",fE.ZodVoid="ZodVoid",fE.ZodArray="ZodArray",fE.ZodObject="ZodObject",fE.ZodUnion="ZodUnion",fE.ZodDiscriminatedUnion="ZodDiscriminatedUnion",fE.ZodIntersection="ZodIntersection",fE.ZodTuple="ZodTuple",fE.ZodRecord="ZodRecord",fE.ZodMap="ZodMap",fE.ZodSet="ZodSet",fE.ZodFunction="ZodFunction",fE.ZodLazy="ZodLazy",fE.ZodLiteral="ZodLiteral",fE.ZodEnum="ZodEnum",fE.ZodEffects="ZodEffects",fE.ZodNativeEnum="ZodNativeEnum",fE.ZodOptional="ZodOptional",fE.ZodNullable="ZodNullable",fE.ZodDefault="ZodDefault",fE.ZodCatch="ZodCatch",fE.ZodPromise="ZodPromise",fE.ZodBranded="ZodBranded",fE.ZodPipeline="ZodPipeline",fE.ZodReadonly="ZodReadonly";const mE=bA.create,pE=jA.create,hE=aE.create,gE=NA.create,xE=CA.create,yE=SA.create,vE=kA.create,bE=MA.create,wE=_A.create,jE=IA.create,NE=AA.create,CE=EA.create,SE=LA.create,kE=TA.create,ME=PA.create,_E=PA.strictCreate,IE=OA.create,AE=zA.create,EE=BA.create,LE=UA.create,TE=WA.create,DE=GA.create,PE=VA.create,OE=HA.create,RE=qA.create,zE=$A.create,FE=QA.create,BE=KA.create,UE=JA.create,WE=ZA.create,GE=XA.create,VE=eE.create,HE=ZA.createWithPreprocess,qE=iE.create,$E={string:e=>bA.create({...e,coerce:!0}),number:e=>jA.create({...e,coerce:!0}),boolean:e=>CA.create({...e,coerce:!0}),bigint:e=>NA.create({...e,coerce:!0}),date:e=>SA.create({...e,coerce:!0})},YE=OI,QE=Object.freeze(Object.defineProperty({__proto__:null,BRAND:rE,DIRTY:RI,EMPTY_PATH:[],INVALID:OI,NEVER:YE,OK:zI,ParseStatus:PI,Schema:ZI,ZodAny:IA,ZodArray:TA,ZodBigInt:NA,ZodBoolean:CA,ZodBranded:sE,ZodCatch:nE,ZodDate:SA,ZodDefault:tE,ZodDiscriminatedUnion:zA,ZodEffects:ZA,ZodEnum:QA,ZodError:II,get ZodFirstPartyTypeKind(){return uE},ZodFunction:HA,ZodIntersection:BA,ZodIssueCode:_I,ZodLazy:qA,ZodLiteral:$A,ZodMap:GA,ZodNaN:aE,ZodNativeEnum:KA,ZodNever:EA,ZodNull:_A,ZodNullable:eE,ZodNumber:jA,ZodObject:PA,ZodOptional:XA,ZodParsedType:kI,ZodPipeline:iE,ZodPromise:JA,ZodReadonly:oE,ZodRecord:WA,ZodSchema:ZI,ZodSet:VA,ZodString:bA,ZodSymbol:kA,ZodTransformer:ZA,ZodTuple:UA,ZodType:ZI,ZodUndefined:MA,ZodUnion:OA,ZodUnknown:AA,ZodVoid:LA,addIssueToContext:DI,any:jE,array:kE,bigint:gE,boolean:xE,coerce:$E,custom:cE,date:yE,datetimeRegex:xA,defaultErrorMap:AI,discriminatedUnion:AE,effect:WE,enum:FE,function:OE,getErrorMap:LI,getParsedType:MI,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>cE((t=>t instanceof e),t),intersection:EE,isAborted:FI,isAsync:WI,isDirty:BI,isValid:UI,late:dE,lazy:RE,literal:zE,makeIssue:TI,map:DE,nan:hE,nativeEnum:BE,never:CE,null:wE,nullable:VE,number:pE,object:ME,get objectUtil(){return SI},oboolean:()=>xE().optional(),onumber:()=>pE().optional(),optional:GE,ostring:()=>mE().optional(),pipeline:qE,preprocess:HE,promise:UE,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),record:TE,set:PE,setErrorMap:function(e){EI=e},strictObject:_E,string:mE,symbol:vE,transformer:WE,tuple:LE,undefined:bE,union:IE,unknown:NE,get util(){return NI},void:SE},Symbol.toStringTag,{value:"Module"})),KE=-128,JE=127,ZE=255,XE=-32768,eL=32767,tL=65535,nL=-8388608,aL=8388607,rL=16777215,sL=-2147483648,iL=2147483647,oL=4294967295,lL=-0x800000000000,cL=0x7fffffffffff,dL=0xffffffffffff,uL=-9223372036854775808n,fL=9223372036854775807n,mL=18446744073709551615n;function pL(e,t){return t.includes(e.columnType)}const hL=IE([mE(),pE(),xE(),wE()]),gL=IE([hL,TE(jE()),kE(jE())]),xL=cE((e=>e instanceof Buffer));function yL(e,t){const n=(null==t?void 0:t.zodInstance)??QE,a=(null==t?void 0:t.coerce)??{};let r;return function(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}(e)&&(r=e.enumValues.length?n.enum(e.enumValues):n.string()),r||(pL(e,["PgGeometry","PgPointTuple"])?r=n.tuple([n.number(),n.number()]):pL(e,["PgGeometryObject","PgPointObject"])?r=n.object({x:n.number(),y:n.number()}):pL(e,["PgHalfVector","PgVector"])?(r=n.array(n.number()),r=e.dimensions?r.length(e.dimensions):r):pL(e,["PgLine"])?r=n.tuple([n.number(),n.number(),n.number()]):pL(e,["PgLineABC"])?r=n.object({a:n.number(),b:n.number(),c:n.number()}):pL(e,["PgArray"])?(r=n.array(yL(e.baseColumn,n)),r=e.size?r.length(e.size):r):"array"===e.dataType?r=n.array(n.any()):"number"===e.dataType?r=function(e,t,n){let a,r,s=e.getSQLType().includes("unsigned"),i=!1;pL(e,["MySqlTinyInt","SingleStoreTinyInt"])?(a=s?0:KE,r=s?ZE:JE,i=!0):pL(e,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=s?0:XE,r=s?tL:eL,i=!0):pL(e,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=s?0:nL,r=s?rL:aL,i=pL(e,["MySqlMediumInt","SingleStoreMediumInt"])):pL(e,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=s?0:sL,r=s?oL:iL,i=!0):pL(e,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=s?0:lL,r=s?dL:cL):pL(e,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(s=s||pL(e,["MySqlSerial","SingleStoreSerial"]),a=s?0:Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,i=!0):pL(e,["MySqlYear","SingleStoreYear"])?(a=1901,r=2155,i=!0):(a=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER);let o=!0===n||(null==n?void 0:n.number)?t.coerce.number():t.number();return o=o.min(a).max(r),i?o.int():o}(e,n,a):"bigint"===e.dataType?r=function(e,t,n){const a=e.getSQLType().includes("unsigned"),r=a?0n:uL,s=a?mL:fL,i=!0===n||(null==n?void 0:n.bigint)?t.coerce.bigint():t.bigint();return i.min(r).max(s)}(e,n,a):"boolean"===e.dataType?r=!0===a||a.boolean?n.coerce.boolean():n.boolean():"date"===e.dataType?r=!0===a||a.date?n.coerce.date():n.date():"string"===e.dataType?r=function(e,t,n){if(pL(e,["PgUUID"]))return t.string().uuid();let a,r,s=!1;pL(e,["PgVarchar","SQLiteText"])?a=e.length:pL(e,["MySqlVarChar","SingleStoreVarChar"])?a=e.length??tL:pL(e,["MySqlText","SingleStoreText"])&&(a="longtext"===e.textType?oL:"mediumtext"===e.textType?rL:"text"===e.textType?tL:ZE);pL(e,["PgChar","MySqlChar","SingleStoreChar"])&&(a=e.length,s=!0);pL(e,["PgBinaryVector"])&&(r=/^[01]+$/,a=e.dimensions);let i=!0===n||(null==n?void 0:n.string)?t.coerce.string():t.string();return i=r?i.regex(r):i,a&&s?i.length(a):a?i.max(a):i}(e,n,a):"json"===e.dataType?r=gL:"custom"===e.dataType?r=n.any():"buffer"===e.dataType&&(r=xL)),r||(r=n.any()),r}function vL(e){return Zk(e)?e[Jk.Symbol.Columns]:e[Wk].selectedFields}function bL(e,t,n,a){const r={};for(const[i,o]of Object.entries(e)){if(!hk(o,gk)&&!hk(o,tM)&&!hk(o,tM.Aliased)&&"object"==typeof o){const e=Zk(o)||"object"==typeof(s=o)&&null!==s&&cM in s?vL(o):o;r[i]=bL(e,t[i]??{},n,a);continue}const e=t[i];if(void 0!==e&&"function"!=typeof e){r[i]=e;continue}const l=hk(o,gk)?o:void 0,c=l?yL(l,a):jE(),d="function"==typeof e?e(c):c;n.never(l)||(r[i]=d,l&&(n.nullable(l)&&(r[i]=r[i].nullable()),n.optional(l)&&(r[i]=r[i].optional())))}var s;return ME(r)}const wL={never:e=>{var t,n;return"always"===(null==(t=null==e?void 0:e.generated)?void 0:t.type)||"always"===(null==(n=null==e?void 0:e.generatedIdentity)?void 0:n.type)},optional:e=>!e.notNull||e.notNull&&e.hasDefault,nullable:e=>!e.notNull},jL=(e,t)=>bL(vL(e),{},wL),NL=Fk("user_role",["super_admin","admin","agent"]),CL=jI("companies",{id:O_("id").primaryKey(),name:H_("name").notNull(),slug:H_("slug").notNull().unique(),logo:H_("logo"),primaryColor:H_("primary_color").default("#333235"),active:SM("active").default(!0),plan:H_("plan").default("free"),planId:QM("plan_id").references((()=>tT.id)),subscriptionStatus:H_("subscription_status",{enum:["active","inactive","pending","cancelled","overdue","trial"]}).default("inactive"),subscriptionStartDate:X_("subscription_start_date"),subscriptionEndDate:X_("subscription_end_date"),trialStartDate:X_("trial_start_date"),trialEndDate:X_("trial_end_date"),isInTrial:SM("is_in_trial").default(!1),maxUsers:QM("max_users").default(5),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()});jL(CL).pick({name:!0,slug:!0,logo:!0,primaryColor:!0,active:!0,plan:!0,planId:!0,subscriptionStatus:!0,subscriptionStartDate:!0,subscriptionEndDate:!0,trialStartDate:!0,trialEndDate:!0,isInTrial:!0,maxUsers:!0});const SL=jI("users",{id:O_("id").primaryKey(),username:H_("username").notNull().unique(),password:H_("password").notNull(),fullName:H_("full_name").notNull(),email:H_("email").notNull(),avatarUrl:H_("avatar_url"),role:NL("role").default("agent"),companyId:QM("company_id").references((()=>CL.id)),isSuperAdmin:SM("is_super_admin").default(!1),languagePreference:H_("language_preference").default("en"),permissions:r_("permissions").default("{}"),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()}),kL=jI("role_permissions",{id:O_("id").primaryKey(),companyId:QM("company_id").references((()=>CL.id)).notNull(),role:NL("role").notNull(),permissions:r_("permissions").notNull().default("{}"),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()}),ML=jL(SL).pick({username:!0,password:!0,fullName:!0,email:!0,avatarUrl:!0,role:!0,companyId:!0,isSuperAdmin:!0,languagePreference:!0,permissions:!0});jL(kL).pick({companyId:!0,role:!0,permissions:!0}),FE(["whatsapp_official","whatsapp_unofficial","whatsapp_twilio","whatsapp_360dialog","messenger","instagram"]);const _L=jI("channel_connections",{id:O_("id").primaryKey(),userId:QM("user_id").notNull(),companyId:QM("company_id").references((()=>CL.id)),channelType:H_("channel_type").notNull(),accountId:H_("account_id").notNull(),accountName:H_("account_name").notNull(),accessToken:H_("access_token"),status:H_("status").default("active"),connectionData:r_("connection_data"),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()}),IL=jI("partner_configurations",{id:O_("id").primaryKey(),provider:H_("provider").notNull(),partnerApiKey:H_("partner_api_key").notNull(),partnerId:H_("partner_id").notNull(),partnerWebhookUrl:H_("partner_webhook_url"),redirectUrl:H_("redirect_url"),publicProfile:r_("public_profile"),isActive:SM("is_active").notNull().default(!0),createdAt:X_("created_at").defaultNow().notNull(),updatedAt:X_("updated_at").defaultNow().notNull()}),AL=jI("dialog_360_clients",{id:O_("id").primaryKey(),companyId:QM("company_id").notNull().references((()=>CL.id),{onDelete:"cascade"}),clientId:H_("client_id").notNull().unique(),clientName:H_("client_name"),status:H_("status").notNull().default("active"),onboardedAt:X_("onboarded_at").defaultNow().notNull(),createdAt:X_("created_at").defaultNow().notNull(),updatedAt:X_("updated_at").defaultNow().notNull()}),EL=jI("dialog_360_channels",{id:O_("id").primaryKey(),clientId:QM("client_id").notNull().references((()=>AL.id),{onDelete:"cascade"}),channelId:H_("channel_id").notNull().unique(),phoneNumber:H_("phone_number").notNull(),displayName:H_("display_name"),status:H_("status").notNull().default("pending"),apiKey:H_("api_key"),webhookUrl:H_("webhook_url"),qualityRating:H_("quality_rating"),messagingLimit:QM("messaging_limit").default(250),createdAt:X_("created_at").defaultNow().notNull(),updatedAt:X_("updated_at").defaultNow().notNull()}),LL=jI("meta_whatsapp_clients",{id:O_("id").primaryKey(),companyId:QM("company_id").notNull().references((()=>CL.id),{onDelete:"cascade"}),businessAccountId:H_("business_account_id").notNull().unique(),businessAccountName:H_("business_account_name"),status:H_("status").notNull().default("active"),onboardedAt:X_("onboarded_at").defaultNow(),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()}),TL=jI("meta_whatsapp_phone_numbers",{id:O_("id").primaryKey(),clientId:QM("client_id").notNull().references((()=>LL.id),{onDelete:"cascade"}),phoneNumberId:H_("phone_number_id").notNull().unique(),phoneNumber:H_("phone_number").notNull(),displayName:H_("display_name"),status:H_("status").notNull().default("pending"),qualityRating:H_("quality_rating"),messagingLimit:QM("messaging_limit"),accessToken:H_("access_token"),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()}),DL=jI("email_attachments",{id:O_("id").primaryKey(),messageId:QM("message_id").notNull().references((()=>GL.id),{onDelete:"cascade"}),filename:H_("filename").notNull(),contentType:H_("content_type").notNull(),size:QM("size").notNull(),contentId:H_("content_id"),isInline:SM("is_inline").default(!1),filePath:H_("file_path").notNull(),downloadUrl:H_("download_url"),createdAt:X_("created_at").notNull().defaultNow()}),PL=jI("email_templates",{id:O_("id").primaryKey(),companyId:QM("company_id").notNull().references((()=>CL.id)),createdById:QM("created_by_id").notNull().references((()=>SL.id)),name:H_("name").notNull(),description:H_("description"),category:H_("category").default("general"),subject:H_("subject").notNull(),htmlContent:H_("html_content"),plainTextContent:H_("plain_text_content"),variables:r_("variables").default([]),isActive:SM("is_active").default(!0),usageCount:QM("usage_count").default(0),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),OL=jI("email_signatures",{id:O_("id").primaryKey(),userId:QM("user_id").notNull().references((()=>SL.id)),companyId:QM("company_id").notNull().references((()=>CL.id)),name:H_("name").notNull(),htmlContent:H_("html_content"),plainTextContent:H_("plain_text_content"),isDefault:SM("is_default").default(!1),isActive:SM("is_active").default(!0),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),RL=jI("email_configs",{id:O_("id").primaryKey(),channelConnectionId:QM("channel_connection_id").notNull().references((()=>_L.id),{onDelete:"cascade"}),imapHost:H_("imap_host").notNull(),imapPort:QM("imap_port").notNull().default(993),imapSecure:SM("imap_secure").default(!0),imapUsername:H_("imap_username").notNull(),imapPassword:H_("imap_password"),smtpHost:H_("smtp_host").notNull(),smtpPort:QM("smtp_port").notNull().default(587),smtpSecure:SM("smtp_secure").default(!1),smtpUsername:H_("smtp_username").notNull(),smtpPassword:H_("smtp_password"),oauthProvider:H_("oauth_provider"),oauthClientId:H_("oauth_client_id"),oauthClientSecret:H_("oauth_client_secret"),oauthRefreshToken:H_("oauth_refresh_token"),oauthAccessToken:H_("oauth_access_token"),oauthTokenExpiry:X_("oauth_token_expiry"),emailAddress:H_("email_address").notNull(),displayName:H_("display_name"),signature:H_("signature"),syncFolder:H_("sync_folder").default("INBOX"),syncFrequency:QM("sync_frequency").default(60),maxSyncMessages:QM("max_sync_messages").default(100),status:H_("status").notNull().default("active"),lastSyncAt:X_("last_sync_at"),lastError:H_("last_error"),connectionData:r_("connection_data"),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),zL=jI("api_keys",{id:O_("id").primaryKey(),companyId:QM("company_id").notNull().references((()=>CL.id),{onDelete:"cascade"}),userId:QM("user_id").notNull().references((()=>SL.id),{onDelete:"cascade"}),name:H_("name").notNull(),keyHash:H_("key_hash").notNull().unique(),keyPrefix:H_("key_prefix").notNull(),permissions:r_("permissions").default('["messages:send", "channels:read"]'),isActive:SM("is_active").notNull().default(!0),lastUsedAt:X_("last_used_at"),expiresAt:X_("expires_at"),rateLimitPerMinute:QM("rate_limit_per_minute").default(60),rateLimitPerHour:QM("rate_limit_per_hour").default(1e3),rateLimitPerDay:QM("rate_limit_per_day").default(1e4),allowedIps:r_("allowed_ips").default("[]"),webhookUrl:H_("webhook_url"),metadata:r_("metadata").default("{}"),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()}),FL=jI("api_usage",{id:O_("id").primaryKey(),apiKeyId:QM("api_key_id").notNull().references((()=>zL.id),{onDelete:"cascade"}),companyId:QM("company_id").notNull().references((()=>CL.id),{onDelete:"cascade"}),endpoint:H_("endpoint").notNull(),method:H_("method").notNull(),statusCode:QM("status_code").notNull(),requestSize:QM("request_size"),responseSize:QM("response_size"),duration:QM("duration"),ipAddress:H_("ip_address"),userAgent:H_("user_agent"),requestId:H_("request_id").unique(),errorMessage:H_("error_message"),metadata:r_("metadata").default("{}"),createdAt:X_("created_at").defaultNow()}),BL=jI("api_rate_limits",{id:O_("id").primaryKey(),apiKeyId:QM("api_key_id").notNull().references((()=>zL.id),{onDelete:"cascade"}),windowType:H_("window_type").notNull(),windowStart:X_("window_start").notNull(),requestCount:QM("request_count").notNull().default(0),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()});jL(_L).pick({userId:!0,companyId:!0,channelType:!0,accountId:!0,accountName:!0,accessToken:!0,status:!0,connectionData:!0}),jL(IL).pick({provider:!0,partnerApiKey:!0,partnerId:!0,partnerWebhookUrl:!0,redirectUrl:!0,publicProfile:!0,isActive:!0}),jL(AL).pick({companyId:!0,clientId:!0,clientName:!0,status:!0,onboardedAt:!0}),jL(EL).pick({clientId:!0,channelId:!0,phoneNumber:!0,displayName:!0,status:!0,apiKey:!0,webhookUrl:!0,qualityRating:!0,messagingLimit:!0}),jL(LL).pick({companyId:!0,businessAccountId:!0,businessAccountName:!0,status:!0,onboardedAt:!0}),jL(TL).pick({clientId:!0,phoneNumberId:!0,phoneNumber:!0,displayName:!0,status:!0,qualityRating:!0,messagingLimit:!0,accessToken:!0}),jL(DL).pick({messageId:!0,filename:!0,contentType:!0,size:!0,contentId:!0,isInline:!0,filePath:!0,downloadUrl:!0}),jL(PL).pick({companyId:!0,createdById:!0,name:!0,description:!0,category:!0,subject:!0,htmlContent:!0,plainTextContent:!0,variables:!0,isActive:!0}),jL(OL).pick({userId:!0,companyId:!0,name:!0,htmlContent:!0,plainTextContent:!0,isDefault:!0,isActive:!0}),jL(RL).pick({channelConnectionId:!0,imapHost:!0,imapPort:!0,imapSecure:!0,imapUsername:!0,imapPassword:!0,smtpHost:!0,smtpPort:!0,smtpSecure:!0,smtpUsername:!0,smtpPassword:!0,oauthProvider:!0,oauthClientId:!0,oauthClientSecret:!0,oauthRefreshToken:!0,oauthAccessToken:!0,oauthTokenExpiry:!0,emailAddress:!0,displayName:!0,signature:!0,syncFolder:!0,syncFrequency:!0,maxSyncMessages:!0,status:!0,connectionData:!0}),jL(zL).pick({companyId:!0,userId:!0,name:!0,keyHash:!0,keyPrefix:!0,permissions:!0,isActive:!0,expiresAt:!0,rateLimitPerMinute:!0,rateLimitPerHour:!0,rateLimitPerDay:!0,allowedIps:!0,webhookUrl:!0,metadata:!0}),jL(FL).pick({apiKeyId:!0,companyId:!0,endpoint:!0,method:!0,statusCode:!0,requestSize:!0,responseSize:!0,duration:!0,ipAddress:!0,userAgent:!0,requestId:!0,errorMessage:!0,metadata:!0}),jL(BL).pick({apiKeyId:!0,windowType:!0,windowStart:!0,requestCount:!0});const UL=jI("contacts",{id:O_("id").primaryKey(),companyId:QM("company_id").references((()=>CL.id)),name:H_("name").notNull(),avatarUrl:H_("avatar_url"),email:H_("email"),phone:H_("phone"),company:H_("company"),tags:H_("tags").array(),isActive:SM("is_active").default(!0),identifier:H_("identifier"),identifierType:H_("identifier_type"),source:H_("source"),notes:H_("notes"),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()});jL(UL).pick({companyId:!0,name:!0,avatarUrl:!0,email:!0,phone:!0,company:!0,tags:!0,isActive:!0,identifier:!0,identifierType:!0,source:!0,notes:!0});const WL=jI("conversations",{id:O_("id").primaryKey(),companyId:QM("company_id").references((()=>CL.id)),contactId:QM("contact_id"),channelType:H_("channel_type").notNull(),channelId:QM("channel_id").notNull(),status:H_("status").default("open"),assignedToUserId:QM("assigned_to_user_id"),lastMessageAt:X_("last_message_at").defaultNow(),unreadCount:QM("unread_count").default(0),botDisabled:SM("bot_disabled").default(!1),disabledAt:X_("disabled_at"),disableDuration:QM("disable_duration"),disableReason:H_("disable_reason"),isGroup:SM("is_group").default(!1),groupJid:H_("group_jid"),groupName:H_("group_name"),groupDescription:H_("group_description"),groupParticipantCount:QM("group_participant_count").default(0),groupCreatedAt:X_("group_created_at"),groupMetadata:r_("group_metadata"),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()});jL(WL).pick({companyId:!0,contactId:!0,channelType:!0,channelId:!0,status:!0,assignedToUserId:!0,lastMessageAt:!0,unreadCount:!0,botDisabled:!0,disabledAt:!0,disableDuration:!0,disableReason:!0,isGroup:!0,groupJid:!0,groupName:!0,groupDescription:!0,groupParticipantCount:!0,groupCreatedAt:!0,groupMetadata:!0});jL(jI("group_participants",{id:O_("id").primaryKey(),conversationId:QM("conversation_id").notNull().references((()=>WL.id)),contactId:QM("contact_id").references((()=>UL.id)),participantJid:H_("participant_jid").notNull(),participantName:H_("participant_name"),isAdmin:SM("is_admin").default(!1),isSuperAdmin:SM("is_super_admin").default(!1),joinedAt:X_("joined_at").defaultNow(),leftAt:X_("left_at"),isActive:SM("is_active").default(!0),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()})).pick({conversationId:!0,contactId:!0,participantJid:!0,participantName:!0,isAdmin:!0,isSuperAdmin:!0,joinedAt:!0,leftAt:!0,isActive:!0});const GL=jI("messages",{id:O_("id").primaryKey(),conversationId:QM("conversation_id").notNull(),externalId:H_("external_id"),direction:H_("direction").notNull(),type:H_("type").default("text"),content:H_("content").notNull(),metadata:r_("metadata"),senderId:QM("sender_id"),senderType:H_("sender_type"),status:H_("status").default("sent"),sentAt:X_("sent_at"),readAt:X_("read_at"),isFromBot:SM("is_from_bot").default(!1),mediaUrl:H_("media_url"),groupParticipantJid:H_("group_participant_jid"),groupParticipantName:H_("group_participant_name"),emailMessageId:H_("email_message_id"),emailInReplyTo:H_("email_in_reply_to"),emailReferences:H_("email_references"),emailSubject:H_("email_subject"),emailFrom:H_("email_from"),emailTo:H_("email_to"),emailCc:H_("email_cc"),emailBcc:H_("email_bcc"),emailHtml:H_("email_html"),emailPlainText:H_("email_plain_text"),emailHeaders:r_("email_headers"),createdAt:X_("created_at").defaultNow()});jL(GL).pick({conversationId:!0,externalId:!0,direction:!0,type:!0,content:!0,metadata:!0,senderId:!0,senderType:!0,status:!0,sentAt:!0,readAt:!0,isFromBot:!0,mediaUrl:!0,groupParticipantJid:!0,groupParticipantName:!0});jL(jI("notes",{id:O_("id").primaryKey(),contactId:QM("contact_id").notNull(),userId:QM("created_by_id").notNull(),content:H_("content").notNull(),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()})).pick({contactId:!0,userId:!0,content:!0});const VL=FE(["start","message","condition","input","api_call","delay","end","attachment","template","contact_property","trigger","image","video","audio","document","wait","follow_up","webhook","http_request","shopify","woocommerce","typebot","flowise","n8n","google_sheets","bot_disable","bot_reset"]);FE(["draft","active","inactive","archived"]);const HL=jI("flows",{id:O_("id").primaryKey(),userId:QM("user_id").notNull().references((()=>SL.id)),companyId:QM("company_id").references((()=>CL.id)),name:H_("name").notNull(),description:H_("description"),status:H_("status",{enum:["draft","active","inactive","archived"]}).notNull().default("draft"),nodes:r_("nodes").notNull().default([]),edges:r_("edges").notNull().default([]),version:QM("version").notNull().default(1),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()});jL(HL).pick({userId:!0,companyId:!0,name:!0,description:!0,status:!0,nodes:!0,edges:!0,version:!0});const qL=jI("flow_assignments",{id:O_("id").primaryKey(),flowId:QM("flow_id").notNull().references((()=>HL.id)),channelId:QM("channel_id").notNull().references((()=>_L.id)),isActive:SM("is_active").notNull().default(!1),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),$L=jI("flow_sessions",{id:O_("id").primaryKey(),sessionId:H_("session_id").notNull().unique(),flowId:QM("flow_id").notNull().references((()=>HL.id)),conversationId:QM("conversation_id").notNull().references((()=>WL.id)),contactId:QM("contact_id").notNull().references((()=>UL.id)),companyId:QM("company_id").references((()=>CL.id)),status:H_("status",{enum:["active","waiting","paused","completed","failed","abandoned","timeout"]}).notNull().default("active"),currentNodeId:H_("current_node_id"),triggerNodeId:H_("trigger_node_id").notNull(),executionPath:r_("execution_path").notNull().default([]),branchingHistory:r_("branching_history").notNull().default([]),sessionData:r_("session_data").notNull().default({}),nodeStates:r_("node_states").notNull().default({}),waitingContext:r_("waiting_context"),startedAt:X_("started_at").notNull().defaultNow(),lastActivityAt:X_("last_activity_at").notNull().defaultNow(),pausedAt:X_("paused_at"),resumedAt:X_("resumed_at"),completedAt:X_("completed_at"),expiresAt:X_("expires_at"),totalDurationMs:QM("total_duration_ms"),nodeExecutionCount:QM("node_execution_count").default(0),userInteractionCount:QM("user_interaction_count").default(0),errorCount:QM("error_count").default(0),lastErrorMessage:H_("last_error_message"),checkpointData:r_("checkpoint_data"),debugInfo:r_("debug_info"),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),YL=jI("flow_executions",{id:O_("id").primaryKey(),executionId:H_("execution_id").notNull().unique(),flowId:QM("flow_id").notNull().references((()=>HL.id)),conversationId:QM("conversation_id").notNull().references((()=>WL.id)),contactId:QM("contact_id").notNull().references((()=>UL.id)),companyId:QM("company_id").references((()=>CL.id)),status:H_("status",{enum:["running","waiting","completed","failed","abandoned"]}).notNull().default("running"),triggerNodeId:H_("trigger_node_id").notNull(),currentNodeId:H_("current_node_id"),executionPath:r_("execution_path").notNull().default([]),contextData:r_("context_data").notNull().default({}),startedAt:X_("started_at").notNull().defaultNow(),completedAt:X_("completed_at"),lastActivityAt:X_("last_activity_at").notNull().defaultNow(),totalDurationMs:QM("total_duration_ms"),completionRate:y_("completion_rate",{precision:5,scale:2}),errorMessage:H_("error_message"),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),QL=jI("flow_session_variables",{id:O_("id").primaryKey(),sessionId:H_("session_id").notNull().references((()=>$L.sessionId)),variableKey:H_("variable_key").notNull(),variableValue:r_("variable_value").notNull(),variableType:H_("variable_type",{enum:["string","number","boolean","object","array"]}).notNull().default("string"),scope:H_("scope",{enum:["global","flow","node","user","session"]}).notNull().default("session"),nodeId:H_("node_id"),isEncrypted:SM("is_encrypted").default(!1),expiresAt:X_("expires_at"),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),KL=jI("flow_session_cursors",{id:O_("id").primaryKey(),sessionId:H_("session_id").notNull().references((()=>$L.sessionId)),currentNodeId:H_("current_node_id").notNull(),previousNodeId:H_("previous_node_id"),nextPossibleNodes:r_("next_possible_nodes").notNull().default([]),branchConditions:r_("branch_conditions").notNull().default({}),loopState:r_("loop_state"),waitingForInput:SM("waiting_for_input").default(!1),inputExpectedType:H_("input_expected_type"),inputValidationRules:r_("input_validation_rules"),timeoutAt:X_("timeout_at"),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()});jI("flow_step_executions",{id:O_("id").primaryKey(),sessionId:H_("session_id").references((()=>$L.sessionId)),flowExecutionId:QM("flow_execution_id").references((()=>YL.id)),nodeId:H_("node_id").notNull(),nodeType:H_("node_type").notNull(),stepOrder:QM("step_order").notNull(),startedAt:X_("started_at").notNull().defaultNow(),completedAt:X_("completed_at"),durationMs:QM("duration_ms"),status:H_("status",{enum:["running","completed","failed","skipped","waiting","timeout"]}).notNull().default("running"),inputData:r_("input_data"),outputData:r_("output_data"),errorMessage:H_("error_message"),retryCount:QM("retry_count").default(0),maxRetries:QM("max_retries").default(0),createdAt:X_("created_at").notNull().defaultNow()}),jL(qL).pick({flowId:!0,channelId:!0,isActive:!0}),jL($L).pick({sessionId:!0,flowId:!0,conversationId:!0,contactId:!0,companyId:!0,status:!0,currentNodeId:!0,triggerNodeId:!0,executionPath:!0,branchingHistory:!0,sessionData:!0,nodeStates:!0,waitingContext:!0,expiresAt:!0}),jL(QL).pick({sessionId:!0,variableKey:!0,variableValue:!0,variableType:!0,scope:!0,nodeId:!0,isEncrypted:!0,expiresAt:!0}),jL(KL).pick({sessionId:!0,currentNodeId:!0,previousNodeId:!0,nextPossibleNodes:!0,branchConditions:!0,loopState:!0,waitingForInput:!0,inputExpectedType:!0,inputValidationRules:!0,timeoutAt:!0});const JL=jI("follow_up_schedules",{id:O_("id").primaryKey(),scheduleId:H_("schedule_id").notNull().unique(),sessionId:H_("session_id").references((()=>$L.sessionId)),flowId:QM("flow_id").notNull().references((()=>HL.id)),conversationId:QM("conversation_id").notNull().references((()=>WL.id)),contactId:QM("contact_id").notNull().references((()=>UL.id)),companyId:QM("company_id").references((()=>CL.id)),nodeId:H_("node_id").notNull(),messageType:H_("message_type",{enum:["text","image","video","audio","document"]}).notNull().default("text"),messageContent:H_("message_content"),mediaUrl:H_("media_url"),caption:H_("caption"),templateId:QM("template_id"),triggerEvent:H_("trigger_event",{enum:["conversation_start","node_execution","specific_datetime","relative_delay"]}).notNull().default("conversation_start"),triggerNodeId:H_("trigger_node_id"),delayAmount:QM("delay_amount"),delayUnit:H_("delay_unit",{enum:["minutes","hours","days","weeks"]}),scheduledFor:X_("scheduled_for"),specificDatetime:X_("specific_datetime"),timezone:H_("timezone").default("UTC"),status:H_("status",{enum:["scheduled","sent","failed","cancelled","expired"]}).notNull().default("scheduled"),sentAt:X_("sent_at"),failedReason:H_("failed_reason"),retryCount:QM("retry_count").default(0),maxRetries:QM("max_retries").default(3),channelType:H_("channel_type").notNull(),channelConnectionId:QM("channel_connection_id").references((()=>_L.id)),variables:r_("variables").default({}),executionContext:r_("execution_context").default({}),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow(),expiresAt:X_("expires_at")}),ZL=jI("follow_up_templates",{id:O_("id").primaryKey(),companyId:QM("company_id").notNull().references((()=>CL.id)),name:H_("name").notNull(),description:H_("description"),messageType:H_("message_type",{enum:["text","image","video","audio","document"]}).notNull().default("text"),content:H_("content").notNull(),mediaUrl:H_("media_url"),caption:H_("caption"),defaultDelayAmount:QM("default_delay_amount").default(24),defaultDelayUnit:H_("default_delay_unit",{enum:["minutes","hours","days","weeks"]}).default("hours"),variables:r_("variables").default([]),category:H_("category").default("general"),isActive:SM("is_active").default(!0),usageCount:QM("usage_count").default(0),createdBy:QM("created_by").references((()=>SL.id)),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()},(e=>({uniqueCompanyName:wk().on(e.companyId,e.name)}))),XL=jI("follow_up_execution_log",{id:O_("id").primaryKey(),scheduleId:H_("schedule_id").notNull().references((()=>JL.scheduleId)),executionAttempt:QM("execution_attempt").notNull().default(1),status:H_("status",{enum:["success","failed","retry"]}).notNull(),messageId:H_("message_id"),errorMessage:H_("error_message"),executionDurationMs:QM("execution_duration_ms"),executedAt:X_("executed_at").notNull().defaultNow(),responseReceived:SM("response_received").default(!1),responseAt:X_("response_at"),responseContent:H_("response_content")});jL(JL).pick({scheduleId:!0,sessionId:!0,flowId:!0,conversationId:!0,contactId:!0,companyId:!0,nodeId:!0,messageType:!0,messageContent:!0,mediaUrl:!0,caption:!0,templateId:!0,triggerEvent:!0,triggerNodeId:!0,delayAmount:!0,delayUnit:!0,scheduledFor:!0,specificDatetime:!0,timezone:!0,status:!0,maxRetries:!0,channelType:!0,channelConnectionId:!0,variables:!0,executionContext:!0,expiresAt:!0}),jL(ZL).pick({companyId:!0,name:!0,description:!0,messageType:!0,content:!0,mediaUrl:!0,caption:!0,defaultDelayAmount:!0,defaultDelayUnit:!0,variables:!0,category:!0,isActive:!0,createdBy:!0}),jL(XL).pick({scheduleId:!0,executionAttempt:!0,status:!0,messageId:!0,errorMessage:!0,executionDurationMs:!0,responseReceived:!0,responseAt:!0,responseContent:!0});jL(jI("google_calendar_tokens",{id:O_("id").primaryKey(),userId:QM("user_id").notNull().references((()=>SL.id)),companyId:QM("company_id").notNull().references((()=>CL.id)),accessToken:H_("access_token").notNull(),refreshToken:H_("refresh_token"),idToken:H_("id_token"),tokenType:H_("token_type"),expiryDate:X_("expiry_date"),scope:H_("scope"),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()})).pick({userId:!0,companyId:!0,accessToken:!0,refreshToken:!0,idToken:!0,tokenType:!0,expiryDate:!0,scope:!0});FE([...VL.options,"google_calendar_event","google_calendar_availability","ai_assistant","update_pipeline_stage"]),FE(["pending","accepted","expired","revoked"]);jL(jI("team_invitations",{id:O_("id").primaryKey(),email:H_("email").notNull(),invitedByUserId:QM("invited_by_user_id").notNull().references((()=>SL.id)),companyId:QM("company_id").notNull().references((()=>CL.id)),role:H_("role").notNull().default("agent"),token:H_("token").notNull().unique(),status:H_("status",{enum:["pending","accepted","expired","revoked"]}).notNull().default("pending"),expiresAt:X_("expires_at").notNull(),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()})).pick({email:!0,invitedByUserId:!0,companyId:!0,role:!0,token:!0,status:!0,expiresAt:!0}),FE(["lead","qualified","contacted","demo_scheduled","proposal","negotiation","closed_won","closed_lost"]),FE(["low","medium","high"]);const eT=jI("pipeline_stages",{id:O_("id").primaryKey(),companyId:QM("company_id").references((()=>CL.id)),name:H_("name").notNull(),color:H_("color").notNull(),order:QM("order_num").notNull(),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()});jL(eT).pick({companyId:!0,name:!0,color:!0,order:!0});const tT=jI("plans",{id:O_("id").primaryKey(),name:H_("name").notNull(),description:H_("description"),price:y_("price",{precision:10,scale:2}).notNull().default("0"),maxUsers:QM("max_users").notNull().default(5),maxContacts:QM("max_contacts").notNull().default(1e3),maxChannels:QM("max_channels").notNull().default(3),maxFlows:QM("max_flows").notNull().default(1),maxCampaigns:QM("max_campaigns").notNull().default(5),maxCampaignRecipients:QM("max_campaign_recipients").notNull().default(1e3),campaignFeatures:r_("campaign_features").notNull().default(["basic_campaigns"]),isActive:SM("is_active").notNull().default(!0),isFree:SM("is_free").notNull().default(!1),hasTrialPeriod:SM("has_trial_period").notNull().default(!1),trialDays:QM("trial_days").default(0),features:r_("features").notNull().default([]),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()});jL(tT).pick({name:!0,description:!0,price:!0,maxUsers:!0,maxContacts:!0,maxChannels:!0,maxFlows:!0,maxCampaigns:!0,maxCampaignRecipients:!0,campaignFeatures:!0,isActive:!0,isFree:!0,hasTrialPeriod:!0,trialDays:!0,features:!0});jL(jI("app_settings",{id:O_("id").primaryKey(),key:H_("key").notNull().unique(),value:r_("value").notNull(),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()})).pick({key:!0,value:!0});const nT=jI("company_settings",{id:O_("id").primaryKey(),companyId:QM("company_id").notNull().references((()=>CL.id)),key:H_("key").notNull(),value:r_("value").notNull(),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()});wk("company_settings_company_key_unique").on(nT.companyId,nT.key),jL(nT).pick({companyId:!0,key:!0,value:!0});const aT=jI("languages",{id:O_("id").primaryKey(),code:H_("code").notNull().unique(),name:H_("name").notNull(),nativeName:H_("native_name").notNull(),flagIcon:H_("flag_icon"),isActive:SM("is_active").default(!0),isDefault:SM("is_default").default(!1),direction:H_("direction").default("ltr"),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()});jL(aT).pick({code:!0,name:!0,nativeName:!0,flagIcon:!0,isActive:!0,isDefault:!0,direction:!0});const rT=jI("translation_namespaces",{id:O_("id").primaryKey(),name:H_("name").notNull().unique(),description:H_("description"),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()});jL(rT).pick({name:!0,description:!0});const sT=jI("translation_keys",{id:O_("id").primaryKey(),namespaceId:QM("namespace_id").references((()=>rT.id)),key:H_("key").notNull(),description:H_("description"),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()});jL(sT).pick({namespaceId:!0,key:!0,description:!0});jL(jI("translations",{id:O_("id").primaryKey(),keyId:QM("key_id").notNull().references((()=>sT.id)),languageId:QM("language_id").notNull().references((()=>aT.id)),value:H_("value").notNull(),createdAt:X_("created_at").defaultNow(),updatedAt:X_("updated_at").defaultNow()})).pick({keyId:!0,languageId:!0,value:!0});jL(jI("payment_transactions",{id:O_("id").primaryKey(),companyId:QM("company_id").references((()=>CL.id)),planId:QM("plan_id").references((()=>tT.id)),amount:y_("amount",{precision:10,scale:2}).notNull(),currency:H_("currency").notNull().default("USD"),status:H_("status",{enum:["pending","completed","failed","refunded","cancelled"]}).notNull().default("pending"),paymentMethod:H_("payment_method",{enum:["stripe","mercadopago","paypal","moyasar","bank_transfer","other"]}).notNull(),paymentIntentId:H_("payment_intent_id"),externalTransactionId:H_("external_transaction_id"),receiptUrl:H_("receipt_url"),metadata:r_("metadata"),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()})).pick({companyId:!0,planId:!0,amount:!0,currency:!0,status:!0,paymentMethod:!0,paymentIntentId:!0,externalTransactionId:!0,receiptUrl:!0,metadata:!0});const iT=jI("deals",{id:O_("id").primaryKey(),companyId:QM("company_id").references((()=>CL.id)),contactId:QM("contact_id").notNull().references((()=>UL.id)),title:H_("title").notNull(),stageId:QM("stage_id").references((()=>eT.id)),stage:H_("stage",{enum:["lead","qualified","contacted","demo_scheduled","proposal","negotiation","closed_won","closed_lost"]}).notNull().default("lead"),value:QM("value"),priority:H_("priority",{enum:["low","medium","high"]}).default("medium"),dueDate:X_("due_date"),assignedToUserId:QM("assigned_to_user_id").references((()=>SL.id)),description:H_("description"),tags:H_("tags").array(),status:H_("status").default("active"),lastActivityAt:X_("last_activity_at").defaultNow(),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()});jL(iT).pick({companyId:!0,contactId:!0,title:!0,stageId:!0,stage:!0,value:!0,priority:!0,dueDate:!0,assignedToUserId:!0,description:!0,tags:!0,status:!0,lastActivityAt:!0});jL(jI("deal_activities",{id:O_("id").primaryKey(),dealId:QM("deal_id").notNull().references((()=>iT.id)),userId:QM("user_id").notNull().references((()=>SL.id)),type:H_("type").notNull(),content:H_("content").notNull(),metadata:r_("metadata"),createdAt:X_("created_at").notNull().defaultNow()})).pick({dealId:!0,userId:!0,type:!0,content:!0,metadata:!0});const oT=Fk("update_status",["pending","downloading","validating","applying","completed","failed","rolled_back"]),lT=jI("system_updates",{id:O_("id").primaryKey(),version:H_("version").notNull(),releaseNotes:H_("release_notes"),downloadUrl:H_("download_url").notNull(),packageHash:H_("package_hash"),packageSize:QM("package_size"),status:oT("status").notNull().default("pending"),scheduledAt:X_("scheduled_at"),startedAt:X_("started_at"),completedAt:X_("completed_at"),errorMessage:H_("error_message"),rollbackData:r_("rollback_data"),migrationScripts:r_("migration_scripts").default("[]"),backupPath:H_("backup_path"),progressPercentage:QM("progress_percentage").default(0),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),cT=jI("maintenance_mode",{id:O_("id").primaryKey(),enabled:SM("enabled").notNull().default(!1),message:H_("message").default("System is under maintenance. Please try again later."),estimatedCompletion:X_("estimated_completion"),bypassCode:H_("bypass_code"),enabledBy:QM("enabled_by").references((()=>SL.id)),enabledAt:X_("enabled_at"),disabledAt:X_("disabled_at"),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()});jL(lT).pick({version:!0,releaseNotes:!0,downloadUrl:!0,packageHash:!0,packageSize:!0,status:!0,scheduledAt:!0,startedAt:!0,completedAt:!0,errorMessage:!0,rollbackData:!0,migrationScripts:!0,backupPath:!0,progressPercentage:!0}),jL(cT).pick({enabled:!0,message:!0,estimatedCompletion:!0,bypassCode:!0,enabledBy:!0}),FE(["draft","scheduled","running","paused","completed","cancelled","failed"]),FE(["immediate","scheduled","drip"]),FE(["pending","processing","sent","delivered","read","failed","skipped"]),FE(["connected","disconnected","connecting","error","banned"]);const dT=jI("campaign_templates",{id:O_("id").primaryKey(),companyId:QM("company_id").notNull().references((()=>CL.id)),createdById:QM("created_by_id").notNull().references((()=>SL.id)),name:H_("name").notNull(),description:H_("description"),category:H_("category").default("general"),content:H_("content").notNull(),mediaUrls:r_("media_urls").default([]),variables:r_("variables").default([]),channelType:H_("channel_type").notNull().default("whatsapp"),isActive:SM("is_active").default(!0),usageCount:QM("usage_count").default(0),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),uT=jI("contact_segments",{id:O_("id").primaryKey(),companyId:QM("company_id").notNull().references((()=>CL.id)),createdById:QM("created_by_id").notNull().references((()=>SL.id)),name:H_("name").notNull(),description:H_("description"),criteria:r_("criteria").notNull(),contactCount:QM("contact_count").default(0),lastUpdatedAt:X_("last_updated_at").defaultNow(),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),fT=jI("campaigns",{id:O_("id").primaryKey(),companyId:QM("company_id").notNull().references((()=>CL.id)),createdById:QM("created_by_id").notNull().references((()=>SL.id)),templateId:QM("template_id").references((()=>dT.id)),segmentId:QM("segment_id").references((()=>uT.id)),name:H_("name").notNull(),description:H_("description"),channelType:H_("channel_type").notNull().default("whatsapp"),channelId:QM("channel_id").references((()=>_L.id)),channelIds:r_("channel_ids").default([]),content:H_("content").notNull(),mediaUrls:r_("media_urls").default([]),variables:r_("variables").default({}),campaignType:H_("campaign_type",{enum:["immediate","scheduled","drip"]}).notNull().default("immediate"),scheduledAt:X_("scheduled_at"),timezone:H_("timezone").default("UTC"),dripSettings:r_("drip_settings"),status:H_("status",{enum:["draft","scheduled","running","paused","completed","cancelled","failed"]}).notNull().default("draft"),startedAt:X_("started_at"),completedAt:X_("completed_at"),pausedAt:X_("paused_at"),totalRecipients:QM("total_recipients").default(0),processedRecipients:QM("processed_recipients").default(0),successfulSends:QM("successful_sends").default(0),failedSends:QM("failed_sends").default(0),rateLimitSettings:r_("rate_limit_settings").default({messages_per_minute:10,messages_per_hour:200,messages_per_day:1e3,delay_between_messages:6,random_delay_range:[3,10],humanization_enabled:!0}),complianceSettings:r_("compliance_settings").default({require_opt_out:!0,spam_check_enabled:!0,content_filter_enabled:!0}),antiBanSettings:r_("anti_ban_settings").default({enabled:!0,mode:"moderate",businessHoursOnly:!1,respectWeekends:!1,randomizeDelay:!0,minDelay:3,maxDelay:15,accountRotation:!0,cooldownPeriod:30,messageVariation:!1}),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),mT=jI("campaign_recipients",{id:O_("id").primaryKey(),campaignId:QM("campaign_id").notNull().references((()=>fT.id)),contactId:QM("contact_id").notNull().references((()=>UL.id)),personalizedContent:H_("personalized_content"),variables:r_("variables").default({}),status:H_("status",{enum:["pending","processing","sent","delivered","read","failed","skipped"]}).notNull().default("pending"),scheduledAt:X_("scheduled_at"),sentAt:X_("sent_at"),deliveredAt:X_("delivered_at"),readAt:X_("read_at"),failedAt:X_("failed_at"),errorMessage:H_("error_message"),retryCount:QM("retry_count").default(0),maxRetries:QM("max_retries").default(3),externalMessageId:H_("external_message_id"),conversationId:QM("conversation_id").references((()=>WL.id)),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()},(e=>({uniqueCampaignContact:wk().on(e.campaignId,e.contactId)})));jI("campaign_messages",{id:O_("id").primaryKey(),campaignId:QM("campaign_id").notNull().references((()=>fT.id)),recipientId:QM("recipient_id").notNull().references((()=>mT.id)),messageId:QM("message_id").references((()=>GL.id)),content:H_("content").notNull(),mediaUrls:r_("media_urls").default([]),messageType:H_("message_type").default("text"),status:H_("status",{enum:["pending","sent","delivered","read","failed"]}).notNull().default("pending"),sentAt:X_("sent_at"),deliveredAt:X_("delivered_at"),readAt:X_("read_at"),failedAt:X_("failed_at"),whatsappMessageId:H_("whatsapp_message_id"),whatsappStatus:H_("whatsapp_status"),errorCode:H_("error_code"),errorMessage:H_("error_message"),createdAt:X_("created_at").notNull().defaultNow()}),jI("campaign_analytics",{id:O_("id").primaryKey(),campaignId:QM("campaign_id").notNull().references((()=>fT.id)),recordedAt:X_("recorded_at").notNull().defaultNow(),totalRecipients:QM("total_recipients").default(0),messagesSent:QM("messages_sent").default(0),messagesDelivered:QM("messages_delivered").default(0),messagesRead:QM("messages_read").default(0),messagesFailed:QM("messages_failed").default(0),deliveryRate:y_("delivery_rate",{precision:5,scale:2}).default("0.00"),readRate:y_("read_rate",{precision:5,scale:2}).default("0.00"),failureRate:y_("failure_rate",{precision:5,scale:2}).default("0.00"),avgDeliveryTime:QM("avg_delivery_time"),avgReadTime:QM("avg_read_time"),estimatedCost:y_("estimated_cost",{precision:10,scale:4}).default("0.0000"),metricsData:r_("metrics_data").default({})});const pT=jI("whatsapp_accounts",{id:O_("id").primaryKey(),companyId:QM("company_id").notNull().references((()=>CL.id)),channelId:QM("channel_id").references((()=>_L.id)),accountName:H_("account_name").notNull(),phoneNumber:H_("phone_number").notNull(),accountType:H_("account_type",{enum:["official","unofficial"]}).notNull().default("unofficial"),sessionData:r_("session_data"),qrCode:H_("qr_code"),connectionStatus:H_("connection_status",{enum:["connected","disconnected","connecting","error","banned"]}).default("disconnected"),lastActivityAt:X_("last_activity_at"),messageCountToday:QM("message_count_today").default(0),messageCountHour:QM("message_count_hour").default(0),warningCount:QM("warning_count").default(0),restrictionCount:QM("restriction_count").default(0),rateLimits:r_("rate_limits").default({max_messages_per_minute:10,max_messages_per_hour:200,max_messages_per_day:1e3,cooldown_period:300,humanization_enabled:!0}),healthScore:QM("health_score").default(100),lastHealthCheck:X_("last_health_check"),isActive:SM("is_active").default(!0),rotationGroup:H_("rotation_group"),priority:QM("priority").default(1),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()},(e=>({uniqueCompanyPhone:wk().on(e.companyId,e.phoneNumber)})));jI("whatsapp_account_logs",{id:O_("id").primaryKey(),accountId:QM("account_id").notNull().references((()=>pT.id)),eventType:H_("event_type").notNull(),eventData:r_("event_data"),message:H_("message"),severity:H_("severity",{enum:["info","warning","error","critical"]}).default("info"),messagesSentToday:QM("messages_sent_today").default(0),healthScore:QM("health_score").default(100),createdAt:X_("created_at").notNull().defaultNow()}),jI("campaign_queue",{id:O_("id").primaryKey(),campaignId:QM("campaign_id").notNull().references((()=>fT.id)),recipientId:QM("recipient_id").notNull().references((()=>mT.id)),accountId:QM("account_id").references((()=>_L.id)),priority:QM("priority").default(1),scheduledFor:X_("scheduled_for").notNull(),attempts:QM("attempts").default(0),maxAttempts:QM("max_attempts").default(3),status:H_("status",{enum:["pending","processing","completed","failed","cancelled"]}).notNull().default("pending"),startedAt:X_("started_at"),completedAt:X_("completed_at"),errorMessage:H_("error_message"),lastErrorAt:X_("last_error_at"),metadata:r_("metadata").default({}),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()}),jL(dT).pick({companyId:!0,createdById:!0,name:!0,description:!0,category:!0,content:!0,mediaUrls:!0,variables:!0,channelType:!0,isActive:!0}),jL(uT).pick({companyId:!0,createdById:!0,name:!0,description:!0,criteria:!0}),jL(fT).pick({companyId:!0,createdById:!0,templateId:!0,segmentId:!0,name:!0,description:!0,channelType:!0,channelId:!0,channelIds:!0,content:!0,mediaUrls:!0,variables:!0,campaignType:!0,scheduledAt:!0,timezone:!0,dripSettings:!0,rateLimitSettings:!0,complianceSettings:!0,antiBanSettings:!0}),jL(mT).pick({campaignId:!0,contactId:!0,personalizedContent:!0,variables:!0,scheduledAt:!0,maxRetries:!0}),jL(pT).pick({companyId:!0,channelId:!0,accountName:!0,phoneNumber:!0,accountType:!0,rateLimits:!0,rotationGroup:!0,priority:!0}),FE(["google","facebook","apple"]);jL(jI("user_social_accounts",{id:O_("id").primaryKey(),userId:QM("user_id").notNull().references((()=>SL.id),{onDelete:"cascade"}),provider:H_("provider",{enum:["google","facebook","apple"]}).notNull(),providerUserId:H_("provider_user_id").notNull(),providerEmail:H_("provider_email"),providerName:H_("provider_name"),providerAvatarUrl:H_("provider_avatar_url"),accessToken:H_("access_token"),refreshToken:H_("refresh_token"),tokenExpiresAt:X_("token_expires_at"),providerData:r_("provider_data").default("{}"),createdAt:X_("created_at").notNull().defaultNow(),updatedAt:X_("updated_at").notNull().defaultNow()})).pick({userId:!0,provider:!0,providerUserId:!0,providerEmail:!0,providerName:!0,providerAvatarUrl:!0,accessToken:!0,refreshToken:!0,tokenExpiresAt:!0,providerData:!0}),ML.extend({password:mE().min(6,"Password must be at least 6 characters"),confirmPassword:mE()}).refine((e=>e.password===e.confirmPassword),{message:"Passwords don't match",path:["confirmPassword"]});const hT=cs.createContext(null);function gT({children:e}){const{toast:t}=Fy(),[n,a]=fx(),{data:r,error:s,isLoading:i}=Sy({queryKey:["/api/user"],queryFn:Iy({on401:"returnNull"})}),{data:o,isLoading:l}=Sy({queryKey:["/api/user/with-company"],queryFn:async()=>{try{const e=await _y("GET","/api/user/with-company");if(!e.ok)return null;return(await e.json()).company}catch(e){return null}},enabled:!!r&&!!r.companyId&&!r.isSuperAdmin}),{data:c,isLoading:d}=Sy({queryKey:["maintenance-mode-status"],queryFn:async()=>{try{const e=await _y("GET","/api/auto-update/maintenance");return e.ok?await e.json():{enabled:!1}}catch(e){return{enabled:!1}}},refetchInterval:3e4,refetchOnWindowFocus:!0,retry:1}),u=(null==c?void 0:c.enabled)||!1,f=!(!(null==r?void 0:r.companyId)||(null==r?void 0:r.isSuperAdmin)||"true"!==sessionStorage.getItem("isImpersonating")&&"true"!==localStorage.getItem("isImpersonating")),m=i||l;cs.useEffect((()=>{if(!d&&u&&r){if(r.isSuperAdmin)return;if("/maintenance"===n)return;a("/maintenance")}}),[u,d,r,n,a]);const p=ky({mutationFn:async e=>{const t=await _y("POST","/api/login",e);if(!t.ok){const e=await t.json().catch((()=>({})));throw new Error(e.message||"Invalid credentials")}return await t.json()},onSuccess:e=>{Ay.setQueryData(["/api/user"],e),Ay.invalidateQueries({queryKey:["/api/user/with-company"]}),t({title:"Login successful",description:`Welcome back, ${e.fullName}!`})},onError:e=>{t({title:"Login failed",description:e.message||"Invalid credentials",variant:"destructive"})}}),h=ky({mutationFn:async e=>{const t=await _y("POST","/api/admin/login",e);if(!t.ok){const e=await t.json().catch((()=>({})));throw new Error(e.message||"Invalid admin credentials")}return await t.json()},onSuccess:e=>{Ay.setQueryData(["/api/user"],e),Ay.invalidateQueries({queryKey:["/api/user"]}),t({title:"Admin login successful",description:`Welcome back, ${e.fullName}!`}),setTimeout((()=>{window.location.href="/admin/dashboard"}),500)},onError:e=>{t({title:"Admin login failed",description:e.message||"Invalid admin credentials",variant:"destructive"})}}),g=ky({mutationFn:async e=>{const{confirmPassword:t,...n}=e,a=await _y("POST","/api/register",n);return await a.json()},onSuccess:e=>{Ay.setQueryData(["/api/user"],e),t({title:"Registration successful",description:`Welcome, ${e.fullName}!`})},onError:e=>{t({title:"Registration failed",description:e.message||"Could not create account",variant:"destructive"})}}),x=ky({mutationFn:async()=>{await _y("POST","/api/logout"),sessionStorage.removeItem("isImpersonating")},onSuccess:()=>{Ay.setQueryData(["/api/user"],null),t({title:"Logged out",description:"You have been successfully logged out"}),setTimeout((()=>{window.location.href="/auth"}),500)},onError:e=>{t({title:"Logout failed",description:e.message,variant:"destructive"})}}),y=ky({mutationFn:async e=>{const t=await _y("POST",`/api/admin/impersonate/${e}`);if(!t.ok){const e=await t.json().catch((()=>({})));throw new Error(e.error||"Failed to impersonate company")}return await t.json()},onSuccess:e=>{var n;sessionStorage.setItem("isImpersonating","true"),localStorage.setItem("isImpersonating","true"),localStorage.setItem("originalSuperAdminId",(null==(n=e.originalUserId)?void 0:n.toString())||""),Ay.setQueryData(["/api/user"],e.user),Ay.setQueryData(["/api/user/with-company"],{company:e.company}),t({title:"Company impersonation active",description:`You are now logged in as ${e.user.fullName}`}),setTimeout((()=>{window.location.href="/"}),500)},onError:e=>{t({title:"Impersonation failed",description:e.message,variant:"destructive"})}}),v=ky({mutationFn:async()=>{try{const t=await fetch("/api/admin/return-from-impersonation",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok){let n="Failed to return from impersonation";try{n=(await t.json()).error||n}catch(e){n=`Server error (${t.status}): ${t.statusText}`}throw new Error(n)}try{return await t.json()}catch(e){return{user:null,impersonating:!1,message:"Returned to admin account (response parsing failed)"}}}catch(t){throw new Error("Network error: Could not connect to server")}},onSuccess:e=>{sessionStorage.removeItem("isImpersonating"),localStorage.removeItem("isImpersonating"),localStorage.removeItem("originalSuperAdminId"),Ay.clear(),e.user&&Ay.setQueryData(["/api/user"],e.user),t({title:"Returned to admin account",description:e.message||"You are now logged in as super admin"}),setTimeout((()=>{window.location.replace("/admin/dashboard")}),1e3)},onError:e=>{sessionStorage.removeItem("isImpersonating"),localStorage.removeItem("isImpersonating"),localStorage.removeItem("originalSuperAdminId"),t({title:"Failed to return to admin account",description:e.message+" - Redirecting to admin login",variant:"destructive"}),setTimeout((()=>{Ay.clear(),sessionStorage.clear(),localStorage.clear(),window.location.replace("/admin/login")}),2e3)}});return vs.jsx(hT.Provider,{value:{user:r??null,company:o??null,isLoading:m,error:s,isImpersonating:f,isMaintenanceMode:u,isLoadingMaintenance:d,loginMutation:p,adminLoginMutation:h,logoutMutation:x,registerMutation:g,impersonateCompanyMutation:y,returnFromImpersonationMutation:v},children:e})}function xT(){const e=cs.useContext(hT);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function yT(e){const[t,n]=cs.useState(!1),[a,r]=cs.useState(null),s=cs.useRef(null),{toast:i}=Fy(),{user:o,isLoading:l}=xT(),c=cs.useRef({}),d=cs.useRef(null),u=cs.useRef(0);cs.useEffect((()=>{if(l||!o)return;const t=`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}${e}`,a=new WebSocket(t);return s.current=a,a.addEventListener("open",(()=>{n(!0),u.current=0,a.send(JSON.stringify({type:"authenticate",userId:o.id})),d.current&&(clearTimeout(d.current),d.current=null);const e=setInterval((()=>{a.readyState===WebSocket.OPEN&&a.send(JSON.stringify({type:"ping"}))}),3e4);a.heartbeatInterval=e})),a.addEventListener("close",(e=>{if(n(!1),d.current&&clearTimeout(d.current),o&&u.current<5){u.current++;const e=Math.min(1e3*Math.pow(2,u.current-1),3e4);d.current=setTimeout((()=>{r({type:"reconnect",timestamp:Date.now()})}),e)}else u.current>=5&&i({title:"Connection Lost",description:"Unable to maintain real-time connection. Please refresh the page.",variant:"destructive"})})),a.addEventListener("error",(e=>{})),a.addEventListener("message",(e=>{try{const t=JSON.parse(e.data);if(r(t),"authError"===t.type)return i({title:"Authentication Error",description:t.message||"Failed to authenticate WebSocket connection",variant:"destructive"}),void a.close();t.type&&c.current[t.type]&&c.current[t.type].forEach((e=>{e(t)}))}catch(t){}})),()=>{d.current&&clearTimeout(d.current),a.heartbeatInterval&&clearInterval(a.heartbeatInterval),a.readyState===WebSocket.OPEN&&a.close()}}),[e,i,o,l]);const f=cs.useCallback(((e,t)=>(c.current[e]||(c.current[e]=[]),c.current[e].push(t),()=>{c.current[e]=c.current[e].filter((e=>e!==t))})),[]);return{isConnected:t,lastMessage:a,sendMessage:cs.useCallback((e=>{var t;return(null==(t=s.current)?void 0:t.readyState)===WebSocket.OPEN&&(s.current.send(JSON.stringify(e)),!0)}),[]),onMessage:f}}const vT={appName:"PowerChat",primaryColor:"#333235",secondaryColor:"#4F46E5"},bT=cs.createContext(null);function wT({children:e}){const[t,n]=cs.useState(vT),[a,r]=cs.useState(!0),[s,i]=cs.useState(null),{user:o,isLoading:l}=xT(),{onMessage:c}=yT("/ws"),d=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},u=cs.useCallback((e=>{if(document.title=`${e.appName} - Multi-Channel Team Inbox & AI Chatbot Platform`,e.faviconUrl){const t=document.querySelector('link[rel="icon"]');if(t)t.setAttribute("href",e.faviconUrl);else{const t=document.createElement("link");t.rel="icon",t.href=e.faviconUrl,document.head.appendChild(t)}}document.documentElement.style.setProperty("--brand-primary-color",e.primaryColor),document.documentElement.style.setProperty("--brand-secondary-color",e.secondaryColor);const t=d(e.primaryColor),n=d(e.secondaryColor);if(t){document.documentElement.style.setProperty("--brand-primary-rgb",`${t.r}, ${t.g}, ${t.b}`);const n=`rgb(${Math.max(0,t.r-20)}, ${Math.max(0,t.g-20)}, ${Math.max(0,t.b-20)})`;document.documentElement.style.setProperty("--brand-primary-hover",n),document.documentElement.style.setProperty("--primary",`${t.r} ${t.g} ${t.b}`);document.querySelectorAll(".btn-brand-primary, .bg-brand-primary, .text-brand-primary, .border-brand-primary").forEach((t=>{t.style.setProperty("--brand-primary-color",e.primaryColor,"important")}))}if(n){document.documentElement.style.setProperty("--brand-secondary-rgb",`${n.r}, ${n.g}, ${n.b}`);const t=`rgb(${Math.max(0,n.r-20)}, ${Math.max(0,n.g-20)}, ${Math.max(0,n.b-20)})`;document.documentElement.style.setProperty("--brand-secondary-hover",t),document.documentElement.style.setProperty("--secondary",`${n.r} ${n.g} ${n.b}`);document.querySelectorAll(".btn-brand-secondary, .bg-brand-secondary, .text-brand-secondary, .border-brand-secondary").forEach((t=>{t.style.setProperty("--brand-secondary-color",e.secondaryColor,"important")}))}document.body.style.display="none",document.body.offsetHeight,document.body.style.display=""}),[]),f=cs.useCallback((async()=>{try{r(!0),i(null);let t=await fetch("/public/branding",{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok||(t=await _y("GET","/api/branding")),!t.ok)return n(vT),void u(vT);const a=await t.json(),s=a.find((e=>"branding"===e.key)),o=a.find((e=>"branding_logo"===e.key)),l=a.find((e=>"branding_favicon"===e.key));let c=null==s?void 0:s.value;if("string"==typeof c)try{c=JSON.parse(c)}catch(e){c={}}const d={...vT,...c||{},logoUrl:null==o?void 0:o.value,faviconUrl:null==l?void 0:l.value};n(d),u(d)}catch(t){n(vT),u(vT),i(t instanceof Error?t:new Error("Failed to fetch branding settings"))}finally{r(!1)}}),[u]);cs.useEffect((()=>{f()}),[f]),cs.useEffect((()=>{if(!o||l)return;return c("settingsUpdated",(e=>{"branding"===e.key?(n((t=>{const n={...t,...e.value};return u(n),n})),e.value.appName&&(document.title=`${e.value.appName} - Multi-Channel Team Inbox & AI Chatbot Platform`),window.dispatchEvent(new CustomEvent("brandingUpdated",{detail:e.value}))):"branding_logo"===e.key?(n((t=>{const n={...t,logoUrl:e.value};return u(n),n})),window.dispatchEvent(new CustomEvent("brandingUpdated",{detail:{logoUrl:e.value}}))):"branding_favicon"===e.key&&(n((t=>{const n={...t,faviconUrl:e.value};return u(n),n})),window.dispatchEvent(new CustomEvent("brandingUpdated",{detail:{faviconUrl:e.value}})))}))}),[o,l,c,u]);return vs.jsx(bT.Provider,{value:{branding:t,isLoading:a,error:s,refreshBranding:async()=>{Ay.invalidateQueries({queryKey:["/api/branding"]}),await f()}},children:e})}function jT(){const e=cs.useContext(bT);if(!e)throw new Error("useBranding must be used within a BrandingProvider");return e}function NT(){const{t:e}=mk(),{branding:t}=jT(),{user:n}=xT(),[a,r]=fx(),[s,i]=useState(0);cs.useEffect((()=>{const e=()=>{i((e=>e+1))};return window.addEventListener("brandingUpdated",e),()=>window.removeEventListener("brandingUpdated",e)}),[]);const o=[{label:e("navigation.inbox","Inbox"),icon:vw,path:"/inbox",description:e("errors.404_quick_links.inbox_desc","Access your conversations and messages")},{label:e("navigation.dashboard","Dashboard"),icon:sw,path:"/",description:e("errors.404_quick_links.dashboard_desc","View your main dashboard")},{label:e("navigation.contacts","Contacts"),icon:Ow,path:"/contacts",description:e("errors.404_quick_links.contacts_desc","Manage your contacts")}];return vs.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 px-4 py-8",children:vs.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[vs.jsx(tk,{className:"w-full shadow-2xl border-0 bg-white/80 backdrop-blur-sm dark:bg-gray-800/80",children:vs.jsx(sk,{className:"p-8 md:p-12",children:vs.jsxs("div",{className:"text-center space-y-8",children:[vs.jsxs("div",{className:"relative",children:[vs.jsx("h1",{className:"text-8xl md:text-9xl font-bold opacity-20 select-none",style:{color:t.primaryColor},children:"404"}),vs.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:vs.jsx(Lb,{className:"h-16 w-16 md:h-20 md:w-20",style:{color:t.primaryColor}})})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx(dk,{variant:"outline",className:"text-sm px-4 py-2",style:{borderColor:t.primaryColor,color:t.primaryColor},children:e("errors.404_badge","Page Not Found")}),vs.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white",children:e("errors.404_title","Oops! Page Not Found")}),vs.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto leading-relaxed",children:e("errors.404_description","The page you're looking for doesn't exist or has been moved. Don't worry, it happens to the best of us!")})]}),vs.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-4",children:[vs.jsxs(lk,{onClick:()=>{window.history.length>1?window.history.back():r("/")},variant:"outline",size:"lg",className:"w-full sm:w-auto min-w-[140px]",children:[vs.jsx(yb,{className:"h-4 w-4 mr-2"}),e("errors.404_go_back","Go Back")]}),vs.jsxs(lk,{onClick:()=>{r("/")},variant:"brand",size:"lg",className:"w-full sm:w-auto min-w-[140px]",children:[vs.jsx(sw,{className:"h-4 w-4 mr-2"}),e("errors.404_go_home","Go Home")]}),vs.jsxs(lk,{onClick:()=>{window.location.reload()},variant:"ghost",size:"lg",className:"w-full sm:w-auto min-w-[140px]",children:[vs.jsx(Lw,{className:"h-4 w-4 mr-2"}),e("errors.404_refresh","Refresh")]})]})]})})}),n&&vs.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:o.map(((e,n)=>{const a=e.icon;return vs.jsx(tk,{className:"group hover:shadow-lg transition-all duration-300 cursor-pointer border-0 bg-white/60 backdrop-blur-sm dark:bg-gray-800/60 hover:bg-white/80 dark:hover:bg-gray-800/80",onClick:()=>r(e.path),children:vs.jsxs(sk,{className:"p-6 text-center space-y-3",children:[vs.jsx("div",{className:"w-12 h-12 rounded-full mx-auto flex items-center justify-center group-hover:scale-110 transition-transform duration-300",style:{backgroundColor:`${t.primaryColor}20`},children:vs.jsx(a,{className:"h-6 w-6",style:{color:t.primaryColor}})}),vs.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.label}),vs.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.description})]})},n)}))}),vs.jsx(tk,{className:"mt-8 border-0 bg-white/60 backdrop-blur-sm dark:bg-gray-800/60",children:vs.jsx(sk,{className:"p-6",children:vs.jsxs("div",{className:"text-center space-y-4",children:[vs.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[vs.jsx(Ob,{className:"h-5 w-5 text-gray-500"}),vs.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("errors.404_need_help","Need Help?")})]}),vs.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e("errors.404_help_description","If you believe this is an error or need assistance, please contact our support team.")}),vs.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center",children:[vs.jsxs(lk,{variant:"outline",size:"sm",onClick:()=>window.open("mailto:support@powerchatapp.net","_blank"),className:"w-full sm:w-auto",children:[vs.jsx(hw,{className:"h-4 w-4 mr-2"}),e("errors.404_contact_support","Contact Support")]}),vs.jsxs(lk,{variant:"ghost",size:"sm",onClick:()=>window.open("/help","_blank"),className:"w-full sm:w-auto",children:[vs.jsx(Ob,{className:"h-4 w-4 mr-2"}),e("errors.404_help_center","Help Center")]})]})]})})}),vs.jsx("div",{className:"mt-8 text-center",children:vs.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e("errors.404_footer","Powered by")," ",t.appName]})})]})})}var CT=cs.createContext(void 0);function ST(e){const t=cs.useContext(CT);return e||t||"ltr"}var kT=0;function MT(){cs.useEffect((()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??_T()),document.body.insertAdjacentElement("beforeend",e[1]??_T()),kT++,()=>{1===kT&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),kT--}}),[])}function _T(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var IT="focusScope.autoFocusOnMount",AT="focusScope.autoFocusOnUnmount",ET={bubbles:!1,cancelable:!0},LT=cs.forwardRef(((e,t)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...i}=e,[o,l]=cs.useState(null),c=tv(r),d=tv(s),u=cs.useRef(null),f=Gy(t,(e=>l(e))),m=cs.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;cs.useEffect((()=>{if(a){let e=function(e){if(m.paused||!o)return;const t=e.target;o.contains(t)?u.current=t:OT(u.current,{select:!0})},t=function(e){if(m.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||OT(u.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&OT(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const a=new MutationObserver(n);return o&&a.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),a.disconnect()}}}),[a,o,m.paused]),cs.useEffect((()=>{if(o){RT.add(m);const t=document.activeElement;if(!o.contains(t)){const n=new CustomEvent(IT,ET);o.addEventListener(IT,c),o.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const a of e)if(OT(a,{select:t}),document.activeElement!==n)return}((e=TT(o),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&OT(o))}return()=>{o.removeEventListener(IT,c),setTimeout((()=>{const e=new CustomEvent(AT,ET);o.addEventListener(AT,d),o.dispatchEvent(e),e.defaultPrevented||OT(t??document.body,{select:!0}),o.removeEventListener(AT,d),RT.remove(m)}),0)}}var e}),[o,c,d,m]);const p=cs.useCallback((e=>{if(!n&&!a)return;if(m.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[a,s]=function(e){const t=TT(e),n=DT(t,e),a=DT(t.reverse(),e);return[n,a]}(t);a&&s?e.shiftKey||r!==s?e.shiftKey&&r===a&&(e.preventDefault(),n&&OT(s,{select:!0})):(e.preventDefault(),n&&OT(a,{select:!0})):r===t&&e.preventDefault()}}),[n,a,m.paused]);return vs.jsx(Xy.div,{tabIndex:-1,...i,ref:f,onKeyDown:p})}));function TT(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function DT(e,t){for(const n of e)if(!PT(n,{upTo:t}))return n}function PT(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function OT(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}LT.displayName="FocusScope";var RT=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=zT(e,t),e.unshift(t)},remove(t){var n;e=zT(e,t),null==(n=e[0])||n.resume()}}}();function zT(e,t){const n=[...e],a=n.indexOf(t);return-1!==a&&n.splice(a,1),n}var FT="rovingFocusGroup.onEntryFocus",BT={bubbles:!1,cancelable:!0},UT="RovingFocusGroup",[WT,GT,VT]=Zy(UT),[HT,qT]=Vy(UT,[VT]),[$T,YT]=HT(UT),QT=cs.forwardRef(((e,t)=>vs.jsx(WT.Provider,{scope:e.__scopeRovingFocusGroup,children:vs.jsx(WT.Slot,{scope:e.__scopeRovingFocusGroup,children:vs.jsx(KT,{...e,ref:t})})})));QT.displayName=UT;var KT=cs.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:a,loop:r=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...u}=e,f=cs.useRef(null),m=Gy(t,f),p=ST(s),[h,g]=yv({prop:i,defaultProp:o??null,onChange:l,caller:UT}),[x,y]=cs.useState(!1),v=tv(c),b=GT(n),w=cs.useRef(!1),[j,N]=cs.useState(0);return cs.useEffect((()=>{const e=f.current;if(e)return e.addEventListener(FT,v),()=>e.removeEventListener(FT,v)}),[v]),vs.jsx($T,{scope:n,orientation:a,dir:p,loop:r,currentTabStopId:h,onItemFocus:cs.useCallback((e=>g(e)),[g]),onItemShiftTab:cs.useCallback((()=>y(!0)),[]),onFocusableItemAdd:cs.useCallback((()=>N((e=>e+1))),[]),onFocusableItemRemove:cs.useCallback((()=>N((e=>e-1))),[]),children:vs.jsx(Xy.div,{tabIndex:x||0===j?-1:0,"data-orientation":a,...u,ref:m,style:{outline:"none",...e.style},onMouseDown:By(e.onMouseDown,(()=>{w.current=!0})),onFocus:By(e.onFocus,(e=>{const t=!w.current;if(e.target===e.currentTarget&&t&&!x){const t=new CustomEvent(FT,BT);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=b().filter((e=>e.focusable));eD([e.find((e=>e.active)),e.find((e=>e.id===h)),...e].filter(Boolean).map((e=>e.ref.current)),d)}}w.current=!1})),onBlur:By(e.onBlur,(()=>y(!1)))})})})),JT="RovingFocusGroupItem",ZT=cs.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:a=!0,active:r=!1,tabStopId:s,children:i,...o}=e,l=SN(),c=s||l,d=YT(JT,n),u=d.currentTabStopId===c,f=GT(n),{onFocusableItemAdd:m,onFocusableItemRemove:p,currentTabStopId:h}=d;return cs.useEffect((()=>{if(a)return m(),()=>p()}),[a,m,p]),vs.jsx(WT.ItemSlot,{scope:n,id:c,focusable:a,active:r,children:vs.jsx(Xy.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:By(e.onMouseDown,(e=>{a?d.onItemFocus(c):e.preventDefault()})),onFocus:By(e.onFocus,(()=>d.onItemFocus(c))),onKeyDown:By(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const a=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(a)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)?void 0:XT[a]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=f().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();const s=r.indexOf(e.currentTarget);r=d.loop?(a=s+1,(n=r).map(((e,t)=>n[(a+t)%n.length]))):r.slice(s+1)}setTimeout((()=>eD(r)))}var n,a})),children:"function"==typeof i?i({isCurrentTabStop:u,hasTabStop:null!=h}):i})})}));ZT.displayName=JT;var XT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function eD(e,t=!1){const n=document.activeElement;for(const a of e){if(a===n)return;if(a.focus({preventScroll:t}),document.activeElement!==n)return}}var tD=QT,nD=ZT,aD=new WeakMap,rD=new WeakMap,sD={},iD=0,oD=function(e){return e&&(e.host||oD(e.parentNode))},lD=function(e,t,n,a){var r=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=oD(t);return n&&e.contains(n)?n:null})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);sD[n]||(sD[n]=new WeakMap);var s=sD[n],i=[],o=new Set,l=new Set(r),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};r.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(a),r=null!==t&&"false"!==t,l=(aD.get(e)||0)+1,c=(s.get(e)||0)+1;aD.set(e,l),s.set(e,c),i.push(e),1===l&&r&&rD.set(e,!0),1===c&&e.setAttribute(n,"true"),r||e.setAttribute(a,"true")}catch(u){}}))};return d(t),o.clear(),iD++,function(){i.forEach((function(e){var t=aD.get(e)-1,r=s.get(e)-1;aD.set(e,t),s.set(e,r),t||(rD.has(e)||e.removeAttribute(a),rD.delete(e)),r||e.removeAttribute(n)})),--iD||(aD=new WeakMap,aD=new WeakMap,rD=new WeakMap,sD={})}},cD=function(e,t,n){void 0===n&&(n="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),r=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return r?(a.push.apply(a,Array.from(r.querySelectorAll("[aria-live], script"))),lD(a,r,n,"aria-hidden")):function(){return null}},dD=function(){return dD=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},dD.apply(this,arguments)};function uD(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}"function"==typeof SuppressedError&&SuppressedError;var fD="right-scroll-bar-position",mD="width-before-scroll-bar";function pD(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var hD="undefined"!=typeof window?cs.useLayoutEffect:cs.useEffect,gD=new WeakMap;function xD(e,t){var n,a,r,s=(n=null,a=function(t){return e.forEach((function(e){return pD(e,t)}))},(r=cs.useState((function(){return{value:n,callback:a,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}}))[0]).callback=a,r.facade);return hD((function(){var t=gD.get(s);if(t){var n=new Set(t),a=new Set(e),r=s.current;n.forEach((function(e){a.has(e)||pD(e,null)})),a.forEach((function(e){n.has(e)||pD(e,r)}))}gD.set(s,e)}),[e]),s}function yD(e){return e}var vD=function(e){var t=e.sideCar,n=uD(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return cs.createElement(a,dD({},n))};vD.isSideCarExport=!0;var bD=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=yD);var n=[],a=!1;return{read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var r=t(e,a);return n.push(r),function(){n=n.filter((function(e){return e!==r}))}},assignSyncMedium:function(e){for(a=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){a=!0;var t=[];if(n.length){var r=n;n=[],r.forEach(e),t=n}var s=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(s)};i(),n={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=dD({async:!0,ssr:!1},e),t}(),wD=function(){},jD=cs.forwardRef((function(e,t){var n=cs.useRef(null),a=cs.useState({onScrollCapture:wD,onWheelCapture:wD,onTouchMoveCapture:wD}),r=a[0],s=a[1],i=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,f=e.sideCar,m=e.noRelative,p=e.noIsolation,h=e.inert,g=e.allowPinchZoom,x=e.as,y=void 0===x?"div":x,v=e.gapMode,b=uD(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,j=xD([n,t]),N=dD(dD({},b),r);return cs.createElement(cs.Fragment,null,d&&cs.createElement(w,{sideCar:bD,removeScrollBar:c,shards:u,noRelative:m,noIsolation:p,inert:h,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:v}),i?cs.cloneElement(cs.Children.only(o),dD(dD({},N),{ref:j})):cs.createElement(y,dD({},N,{className:l,ref:j}),o))}));jD.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},jD.classNames={fullWidth:mD,zeroRight:fD};function ND(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var CD=function(){var e=0,t=null;return{add:function(n){var a,r;0==e&&(t=ND())&&(r=n,(a=t).styleSheet?a.styleSheet.cssText=r:a.appendChild(document.createTextNode(r)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},SD=function(){var e,t=(e=CD(),function(t,n){cs.useEffect((function(){return e.add(t),function(){e.remove()}}),[t&&n])});return function(e){var n=e.styles,a=e.dynamic;return t(n,a),null}},kD={left:0,top:0,right:0,gap:0},MD=function(e){return parseInt(e||"",10)||0},_D=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return kD;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],a=t["padding"===e?"paddingTop":"marginTop"],r=t["padding"===e?"paddingRight":"marginRight"];return[MD(n),MD(a),MD(r)]}(e),n=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-n+t[2]-t[0])}},ID=SD(),AD="data-scroll-locked",ED=function(e,t,n,a){var r=e.left,s=e.top,i=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(a,";\n   padding-right: ").concat(o,"px ").concat(a,";\n  }\n  body[").concat(AD,"] {\n    overflow: hidden ").concat(a,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(a,";"),"margin"===n&&"\n    padding-left: ".concat(r,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(a,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(a,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(fD," {\n    right: ").concat(o,"px ").concat(a,";\n  }\n  \n  .").concat(mD," {\n    margin-right: ").concat(o,"px ").concat(a,";\n  }\n  \n  .").concat(fD," .").concat(fD," {\n    right: 0 ").concat(a,";\n  }\n  \n  .").concat(mD," .").concat(mD," {\n    margin-right: 0 ").concat(a,";\n  }\n  \n  body[").concat(AD,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},LD=function(){var e=parseInt(document.body.getAttribute(AD)||"0",10);return isFinite(e)?e:0},TD=function(e){var t=e.noRelative,n=e.noImportant,a=e.gapMode,r=void 0===a?"margin":a;cs.useEffect((function(){return document.body.setAttribute(AD,(LD()+1).toString()),function(){var e=LD()-1;e<=0?document.body.removeAttribute(AD):document.body.setAttribute(AD,e.toString())}}),[]);var s=cs.useMemo((function(){return _D(r)}),[r]);return cs.createElement(ID,{styles:ED(s,!t,r,n?"":"!important")})},DD=!1;if("undefined"!=typeof window)try{var PD=Object.defineProperty({},"passive",{get:function(){return DD=!0,!0}});window.addEventListener("test",PD,PD),window.removeEventListener("test",PD,PD)}catch(pBe){DD=!1}var OD=!!DD&&{passive:!1},RD=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},zD=function(e,t){var n=t.ownerDocument,a=t;do{if("undefined"!=typeof ShadowRoot&&a instanceof ShadowRoot&&(a=a.host),FD(e,a)){var r=BD(e,a);if(r[1]>r[2])return!0}a=a.parentNode}while(a&&a!==n.body);return!1},FD=function(e,t){return"v"===e?function(e){return RD(e,"overflowY")}(t):function(e){return RD(e,"overflowX")}(t)},BD=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},UD=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},WD=function(e){return[e.deltaX,e.deltaY]},GD=function(e){return e&&"current"in e?e.current:e},VD=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},HD=0,qD=[];function $D(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const YD=(QD=function(e){var t=cs.useRef([]),n=cs.useRef([0,0]),a=cs.useRef(),r=cs.useState(HD++)[0],s=cs.useState(SD)[0],i=cs.useRef(e);cs.useEffect((function(){i.current=e}),[e]),cs.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var t=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,s=t.length;r<s;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(GD),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(r))})),function(){document.body.classList.remove("block-interactivity-".concat(r)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(r))}))}}}),[e.inert,e.lockRef.current,e.shards]);var o=cs.useCallback((function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var r,s=UD(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-s[0],c="deltaY"in e?e.deltaY:o[1]-s[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var f=zD(u,d);if(!f)return!0;if(f?r=u:(r="v"===u?"h":"v",f=zD(u,d)),!f)return!1;if(!a.current&&"changedTouches"in e&&(l||c)&&(a.current=r),!r)return!0;var m=a.current||r;return function(e,t,n,a){var r=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=r*a,i=n.target,o=t.contains(i),l=!1,c=s>0,d=0,u=0;do{var f=BD(e,i),m=f[0],p=f[1]-f[2]-r*m;(m||p)&&FD(e,i)&&(d+=p,u+=m),i=i.parentNode.host||i.parentNode}while(!o&&i!==document.body||o&&(t.contains(i)||t===i));return(c&&Math.abs(d)<1||!c&&Math.abs(u)<1)&&(l=!0),l}(m,t,e,"h"===m?l:c)}),[]),l=cs.useCallback((function(e){var n=e;if(qD.length&&qD[qD.length-1]===s){var a="deltaY"in n?WD(n):UD(n),r=t.current.filter((function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,r=a,t[0]===r[0]&&t[1]===r[1]);var t,r}))[0];if(r&&r.should)n.cancelable&&n.preventDefault();else if(!r){var l=(i.current.shards||[]).map(GD).filter(Boolean).filter((function(e){return e.contains(n.target)}));(l.length>0?o(n,l[0]):!i.current.noIsolation)&&n.cancelable&&n.preventDefault()}}}),[]),c=cs.useCallback((function(e,n,a,r){var s={name:e,delta:n,target:a,should:r,shadowParent:$D(a)};t.current.push(s),setTimeout((function(){t.current=t.current.filter((function(e){return e!==s}))}),1)}),[]),d=cs.useCallback((function(e){n.current=UD(e),a.current=void 0}),[]),u=cs.useCallback((function(t){c(t.type,WD(t),t.target,o(t,e.lockRef.current))}),[]),f=cs.useCallback((function(t){c(t.type,UD(t),t.target,o(t,e.lockRef.current))}),[]);cs.useEffect((function(){return qD.push(s),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:f}),document.addEventListener("wheel",l,OD),document.addEventListener("touchmove",l,OD),document.addEventListener("touchstart",d,OD),function(){qD=qD.filter((function(e){return e!==s})),document.removeEventListener("wheel",l,OD),document.removeEventListener("touchmove",l,OD),document.removeEventListener("touchstart",d,OD)}}),[]);var m=e.removeScrollBar,p=e.inert;return cs.createElement(cs.Fragment,null,p?cs.createElement(s,{styles:VD(r)}):null,m?cs.createElement(TD,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},bD.useMedium(QD),vD);var QD,KD=cs.forwardRef((function(e,t){return cs.createElement(jD,dD({},e,{ref:t,sideCar:YD}))}));KD.classNames=jD.classNames;var JD=["Enter"," "],ZD=["ArrowUp","PageDown","End"],XD=["ArrowDown","PageUp","Home",...ZD],eP={ltr:[...JD,"ArrowRight"],rtl:[...JD,"ArrowLeft"]},tP={ltr:["ArrowLeft"],rtl:["ArrowRight"]},nP="Menu",[aP,rP,sP]=Zy(nP),[iP,oP]=Vy(nP,[sP,sS,qT]),lP=sS(),cP=qT(),[dP,uP]=iP(nP),[fP,mP]=iP(nP),pP=e=>{const{__scopeMenu:t,open:n=!1,children:a,dir:r,onOpenChange:s,modal:i=!0}=e,o=lP(t),[l,c]=cs.useState(null),d=cs.useRef(!1),u=tv(s),f=ST(r);return cs.useEffect((()=>{const e=()=>{d.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>d.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),vs.jsx(wS,{...o,children:vs.jsx(dP,{scope:t,open:n,onOpenChange:u,content:l,onContentChange:c,children:vs.jsx(fP,{scope:t,onClose:cs.useCallback((()=>u(!1)),[u]),isUsingKeyboardRef:d,dir:f,modal:i,children:a})})})};pP.displayName=nP;var hP=cs.forwardRef(((e,t)=>{const{__scopeMenu:n,...a}=e,r=lP(n);return vs.jsx(jS,{...r,...a,ref:t})}));hP.displayName="MenuAnchor";var gP="MenuPortal",[xP,yP]=iP(gP,{forceMount:void 0}),vP=e=>{const{__scopeMenu:t,forceMount:n,children:a,container:r}=e,s=uP(gP,t);return vs.jsx(xP,{scope:t,forceMount:n,children:vs.jsx(hv,{present:n||s.open,children:vs.jsx(pv,{asChild:!0,container:r,children:a})})})};vP.displayName=gP;var bP="MenuContent",[wP,jP]=iP(bP),NP=cs.forwardRef(((e,t)=>{const n=yP(bP,e.__scopeMenu),{forceMount:a=n.forceMount,...r}=e,s=uP(bP,e.__scopeMenu),i=mP(bP,e.__scopeMenu);return vs.jsx(aP.Provider,{scope:e.__scopeMenu,children:vs.jsx(hv,{present:a||s.open,children:vs.jsx(aP.Slot,{scope:e.__scopeMenu,children:i.modal?vs.jsx(CP,{...r,ref:t}):vs.jsx(SP,{...r,ref:t})})})})})),CP=cs.forwardRef(((e,t)=>{const n=uP(bP,e.__scopeMenu),a=cs.useRef(null),r=Gy(t,a);return cs.useEffect((()=>{const e=a.current;if(e)return cD(e)}),[]),vs.jsx(MP,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:By(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})})),SP=cs.forwardRef(((e,t)=>{const n=uP(bP,e.__scopeMenu);return vs.jsx(MP,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})})),kP=qy("MenuContent.ScrollLock"),MP=cs.forwardRef(((e,t)=>{const{__scopeMenu:n,loop:a=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:f,onDismiss:m,disableOutsideScroll:p,...h}=e,g=uP(bP,n),x=mP(bP,n),y=lP(n),v=cP(n),b=rP(n),[w,j]=cs.useState(null),N=cs.useRef(null),C=Gy(t,N,g.onContentChange),S=cs.useRef(0),k=cs.useRef(""),M=cs.useRef(0),_=cs.useRef(null),I=cs.useRef("right"),A=cs.useRef(0),E=p?KD:cs.Fragment,L=p?{as:kP,allowPinchZoom:!0}:void 0,T=e=>{var t,n;const a=k.current+e,r=b().filter((e=>!e.disabled)),s=document.activeElement,i=null==(t=r.find((e=>e.ref.current===s)))?void 0:t.textValue,o=function(e,t,n){const a=t.length>1&&Array.from(t).every((e=>e===t[0])),r=a?t[0]:t,s=n?e.indexOf(n):-1;let i=(o=e,l=Math.max(s,0),o.map(((e,t)=>o[(l+t)%o.length])));var o,l;1===r.length&&(i=i.filter((e=>e!==n)));const c=i.find((e=>e.toLowerCase().startsWith(r.toLowerCase())));return c!==n?c:void 0}(r.map((e=>e.textValue)),a,i),l=null==(n=r.find((e=>e.textValue===o)))?void 0:n.ref.current;!function e(t){k.current=t,window.clearTimeout(S.current),""!==t&&(S.current=window.setTimeout((()=>e("")),1e3))}(a),l&&setTimeout((()=>l.focus()))};cs.useEffect((()=>()=>window.clearTimeout(S.current)),[]),MT();const D=cs.useCallback((e=>{var t,n;return I.current===(null==(t=_.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:a}=e;let r=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const e=t[s],o=t[i],l=e.x,c=e.y,d=o.x,u=o.y;c>a!=u>a&&n<(d-l)*(a-c)/(u-c)+l&&(r=!r)}return r}(n,t)}(e,null==(n=_.current)?void 0:n.area)}),[]);return vs.jsx(wP,{scope:n,searchRef:k,onItemEnter:cs.useCallback((e=>{D(e)&&e.preventDefault()}),[D]),onItemLeave:cs.useCallback((e=>{var t;D(e)||(null==(t=N.current)||t.focus(),j(null))}),[D]),onTriggerLeave:cs.useCallback((e=>{D(e)&&e.preventDefault()}),[D]),pointerGraceTimerRef:M,onPointerGraceIntentChange:cs.useCallback((e=>{_.current=e}),[]),children:vs.jsx(E,{...L,children:vs.jsx(LT,{asChild:!0,trapped:r,onMountAutoFocus:By(s,(e=>{var t;e.preventDefault(),null==(t=N.current)||t.focus({preventScroll:!0})})),onUnmountAutoFocus:i,children:vs.jsx(ov,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:f,onDismiss:m,children:vs.jsx(tD,{asChild:!0,...v,dir:x.dir,orientation:"vertical",loop:a,currentTabStopId:w,onCurrentTabStopIdChange:j,onEntryFocus:By(l,(e=>{x.isUsingKeyboardRef.current||e.preventDefault()})),preventScrollOnEntryFocus:!0,children:vs.jsx(NS,{role:"menu","aria-orientation":"vertical","data-state":XP(g.open),"data-radix-menu-content":"",dir:x.dir,...y,...h,ref:C,style:{outline:"none",...h.style},onKeyDown:By(h.onKeyDown,(e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,a=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&a&&T(e.key));const r=N.current;if(e.target!==r)return;if(!XD.includes(e.key))return;e.preventDefault();const s=b().filter((e=>!e.disabled)).map((e=>e.ref.current));ZD.includes(e.key)&&s.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(s)})),onBlur:By(e.onBlur,(e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(S.current),k.current="")})),onPointerMove:By(e.onPointerMove,nO((e=>{const t=e.target,n=A.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>A.current?"right":"left";I.current=t,A.current=e.clientX}})))})})})})})})}));NP.displayName=bP;var _P=cs.forwardRef(((e,t)=>{const{__scopeMenu:n,...a}=e;return vs.jsx(Xy.div,{role:"group",...a,ref:t})}));_P.displayName="MenuGroup";var IP=cs.forwardRef(((e,t)=>{const{__scopeMenu:n,...a}=e;return vs.jsx(Xy.div,{...a,ref:t})}));IP.displayName="MenuLabel";var AP="MenuItem",EP="menu.itemSelect",LP=cs.forwardRef(((e,t)=>{const{disabled:n=!1,onSelect:a,...r}=e,s=cs.useRef(null),i=mP(AP,e.__scopeMenu),o=jP(AP,e.__scopeMenu),l=Gy(t,s),c=cs.useRef(!1);return vs.jsx(TP,{...r,ref:l,disabled:n,onClick:By(e.onClick,(()=>{const e=s.current;if(!n&&e){const t=new CustomEvent(EP,{bubbles:!0,cancelable:!0});e.addEventListener(EP,(e=>null==a?void 0:a(e)),{once:!0}),ev(e,t),t.defaultPrevented?c.current=!1:i.onClose()}})),onPointerDown:t=>{var n;null==(n=e.onPointerDown)||n.call(e,t),c.current=!0},onPointerUp:By(e.onPointerUp,(e=>{var t;c.current||null==(t=e.currentTarget)||t.click()})),onKeyDown:By(e.onKeyDown,(e=>{const t=""!==o.searchRef.current;n||t&&" "===e.key||JD.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))})}));LP.displayName=AP;var TP=cs.forwardRef(((e,t)=>{const{__scopeMenu:n,disabled:a=!1,textValue:r,...s}=e,i=jP(AP,n),o=cP(n),l=cs.useRef(null),c=Gy(t,l),[d,u]=cs.useState(!1),[f,m]=cs.useState("");return cs.useEffect((()=>{const e=l.current;e&&m((e.textContent??"").trim())}),[s.children]),vs.jsx(aP.ItemSlot,{scope:n,disabled:a,textValue:r??f,children:vs.jsx(nD,{asChild:!0,...o,focusable:!a,children:vs.jsx(Xy.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...s,ref:c,onPointerMove:By(e.onPointerMove,nO((e=>{if(a)i.onItemLeave(e);else if(i.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}}))),onPointerLeave:By(e.onPointerLeave,nO((e=>i.onItemLeave(e)))),onFocus:By(e.onFocus,(()=>u(!0))),onBlur:By(e.onBlur,(()=>u(!1)))})})})})),DP=cs.forwardRef(((e,t)=>{const{checked:n=!1,onCheckedChange:a,...r}=e;return vs.jsx(WP,{scope:e.__scopeMenu,checked:n,children:vs.jsx(LP,{role:"menuitemcheckbox","aria-checked":eO(n)?"mixed":n,...r,ref:t,"data-state":tO(n),onSelect:By(r.onSelect,(()=>null==a?void 0:a(!!eO(n)||!n)),{checkForDefaultPrevented:!1})})})}));DP.displayName="MenuCheckboxItem";var PP="MenuRadioGroup",[OP,RP]=iP(PP,{value:void 0,onValueChange:()=>{}}),zP=cs.forwardRef(((e,t)=>{const{value:n,onValueChange:a,...r}=e,s=tv(a);return vs.jsx(OP,{scope:e.__scopeMenu,value:n,onValueChange:s,children:vs.jsx(_P,{...r,ref:t})})}));zP.displayName=PP;var FP="MenuRadioItem",BP=cs.forwardRef(((e,t)=>{const{value:n,...a}=e,r=RP(FP,e.__scopeMenu),s=n===r.value;return vs.jsx(WP,{scope:e.__scopeMenu,checked:s,children:vs.jsx(LP,{role:"menuitemradio","aria-checked":s,...a,ref:t,"data-state":tO(s),onSelect:By(a.onSelect,(()=>{var e;return null==(e=r.onValueChange)?void 0:e.call(r,n)}),{checkForDefaultPrevented:!1})})})}));BP.displayName=FP;var UP="MenuItemIndicator",[WP,GP]=iP(UP,{checked:!1}),VP=cs.forwardRef(((e,t)=>{const{__scopeMenu:n,forceMount:a,...r}=e,s=GP(UP,n);return vs.jsx(hv,{present:a||eO(s.checked)||!0===s.checked,children:vs.jsx(Xy.span,{...r,ref:t,"data-state":tO(s.checked)})})}));VP.displayName=UP;var HP=cs.forwardRef(((e,t)=>{const{__scopeMenu:n,...a}=e;return vs.jsx(Xy.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})}));HP.displayName="MenuSeparator";var qP=cs.forwardRef(((e,t)=>{const{__scopeMenu:n,...a}=e,r=lP(n);return vs.jsx(CS,{...r,...a,ref:t})}));qP.displayName="MenuArrow";var[$P,YP]=iP("MenuSub"),QP="MenuSubTrigger",KP=cs.forwardRef(((e,t)=>{const n=uP(QP,e.__scopeMenu),a=mP(QP,e.__scopeMenu),r=YP(QP,e.__scopeMenu),s=jP(QP,e.__scopeMenu),i=cs.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=s,c={__scopeMenu:e.__scopeMenu},d=cs.useCallback((()=>{i.current&&window.clearTimeout(i.current),i.current=null}),[]);return cs.useEffect((()=>d),[d]),cs.useEffect((()=>{const e=o.current;return()=>{window.clearTimeout(e),l(null)}}),[o,l]),vs.jsx(hP,{asChild:!0,...c,children:vs.jsx(TP,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":XP(n.open),...e,ref:Wy(t,r.onTriggerChange),onClick:t=>{var a;null==(a=e.onClick)||a.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:By(e.onPointerMove,nO((t=>{s.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||i.current||(s.onPointerGraceIntentChange(null),i.current=window.setTimeout((()=>{n.onOpenChange(!0),d()}),100))}))),onPointerLeave:By(e.onPointerLeave,nO((e=>{var t,a;d();const r=null==(t=n.content)?void 0:t.getBoundingClientRect();if(r){const t=null==(a=n.content)?void 0:a.dataset.side,i="right"===t,l=i?-5:5,c=r[i?"left":"right"],d=r[i?"right":"left"];s.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:r.top},{x:d,y:r.top},{x:d,y:r.bottom},{x:c,y:r.bottom}],side:t}),window.clearTimeout(o.current),o.current=window.setTimeout((()=>s.onPointerGraceIntentChange(null)),300)}else{if(s.onTriggerLeave(e),e.defaultPrevented)return;s.onPointerGraceIntentChange(null)}}))),onKeyDown:By(e.onKeyDown,(t=>{var r;const i=""!==s.searchRef.current;e.disabled||i&&" "===t.key||eP[a.dir].includes(t.key)&&(n.onOpenChange(!0),null==(r=n.content)||r.focus(),t.preventDefault())}))})})}));KP.displayName=QP;var JP="MenuSubContent",ZP=cs.forwardRef(((e,t)=>{const n=yP(bP,e.__scopeMenu),{forceMount:a=n.forceMount,...r}=e,s=uP(bP,e.__scopeMenu),i=mP(bP,e.__scopeMenu),o=YP(JP,e.__scopeMenu),l=cs.useRef(null),c=Gy(t,l);return vs.jsx(aP.Provider,{scope:e.__scopeMenu,children:vs.jsx(hv,{present:a||s.open,children:vs.jsx(aP.Slot,{scope:e.__scopeMenu,children:vs.jsx(MP,{id:o.contentId,"aria-labelledby":o.triggerId,...r,ref:c,align:"start",side:"rtl"===i.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;i.isUsingKeyboardRef.current&&(null==(t=l.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:By(e.onFocusOutside,(e=>{e.target!==o.trigger&&s.onOpenChange(!1)})),onEscapeKeyDown:By(e.onEscapeKeyDown,(e=>{i.onClose(),e.preventDefault()})),onKeyDown:By(e.onKeyDown,(e=>{var t;const n=e.currentTarget.contains(e.target),a=tP[i.dir].includes(e.key);n&&a&&(s.onOpenChange(!1),null==(t=o.trigger)||t.focus(),e.preventDefault())}))})})})})}));function XP(e){return e?"open":"closed"}function eO(e){return"indeterminate"===e}function tO(e){return eO(e)?"indeterminate":e?"checked":"unchecked"}function nO(e){return t=>"mouse"===t.pointerType?e(t):void 0}ZP.displayName=JP;var aO=pP,rO=hP,sO=vP,iO=NP,oO=_P,lO=IP,cO=LP,dO=DP,uO=zP,fO=BP,mO=VP,pO=HP,hO=qP,gO=KP,xO=ZP,yO="DropdownMenu",[vO,bO]=Vy(yO,[oP]),wO=oP(),[jO,NO]=vO(yO),CO=e=>{const{__scopeDropdownMenu:t,children:n,dir:a,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,l=wO(t),c=cs.useRef(null),[d,u]=yv({prop:r,defaultProp:s??!1,onChange:i,caller:yO});return vs.jsx(jO,{scope:t,triggerId:SN(),triggerRef:c,contentId:SN(),open:d,onOpenChange:u,onOpenToggle:cs.useCallback((()=>u((e=>!e))),[u]),modal:o,children:vs.jsx(aO,{...l,open:d,onOpenChange:u,dir:a,modal:o,children:n})})};CO.displayName=yO;var SO="DropdownMenuTrigger",kO=cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,disabled:a=!1,...r}=e,s=NO(SO,n),i=wO(n);return vs.jsx(rO,{asChild:!0,...i,children:vs.jsx(Xy.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...r,ref:Wy(t,s.triggerRef),onPointerDown:By(e.onPointerDown,(e=>{a||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())})),onKeyDown:By(e.onKeyDown,(e=>{a||(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())}))})})}));kO.displayName=SO;var MO=e=>{const{__scopeDropdownMenu:t,...n}=e,a=wO(t);return vs.jsx(sO,{...a,...n})};MO.displayName="DropdownMenuPortal";var _O="DropdownMenuContent",IO=cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=NO(_O,n),s=wO(n),i=cs.useRef(!1);return vs.jsx(iO,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...a,ref:t,onCloseAutoFocus:By(e.onCloseAutoFocus,(e=>{var t;i.current||null==(t=r.triggerRef.current)||t.focus(),i.current=!1,e.preventDefault()})),onInteractOutside:By(e.onInteractOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,a=2===t.button||n;r.modal&&!a||(i.current=!0)})),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));IO.displayName=_O;cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=wO(n);return vs.jsx(oO,{...r,...a,ref:t})})).displayName="DropdownMenuGroup";var AO=cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=wO(n);return vs.jsx(lO,{...r,...a,ref:t})}));AO.displayName="DropdownMenuLabel";var EO=cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=wO(n);return vs.jsx(cO,{...r,...a,ref:t})}));EO.displayName="DropdownMenuItem";var LO=cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=wO(n);return vs.jsx(dO,{...r,...a,ref:t})}));LO.displayName="DropdownMenuCheckboxItem";cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=wO(n);return vs.jsx(uO,{...r,...a,ref:t})})).displayName="DropdownMenuRadioGroup";var TO=cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=wO(n);return vs.jsx(fO,{...r,...a,ref:t})}));TO.displayName="DropdownMenuRadioItem";var DO=cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=wO(n);return vs.jsx(mO,{...r,...a,ref:t})}));DO.displayName="DropdownMenuItemIndicator";var PO=cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=wO(n);return vs.jsx(pO,{...r,...a,ref:t})}));PO.displayName="DropdownMenuSeparator";cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=wO(n);return vs.jsx(hO,{...r,...a,ref:t})})).displayName="DropdownMenuArrow";var OO=cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=wO(n);return vs.jsx(gO,{...r,...a,ref:t})}));OO.displayName="DropdownMenuSubTrigger";var RO=cs.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=wO(n);return vs.jsx(xO,{...r,...a,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));RO.displayName="DropdownMenuSubContent";var zO=MO,FO=IO,BO=AO,UO=EO,WO=LO,GO=TO,VO=DO,HO=PO,qO=OO,$O=RO;const YO=CO,QO=kO;cs.forwardRef((({className:e,inset:t,children:n,...a},r)=>vs.jsxs(qO,{ref:r,className:fN("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...a,children:[n,vs.jsx(Ib,{className:"ml-auto"})]}))).displayName=qO.displayName;cs.forwardRef((({className:e,...t},n)=>vs.jsx($O,{ref:n,className:fN("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}))).displayName=$O.displayName;const KO=cs.forwardRef((({className:e,sideOffset:t=4,...n},a)=>vs.jsx(zO,{children:vs.jsx(FO,{ref:a,sideOffset:t,className:fN("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})})));KO.displayName=FO.displayName;const JO=cs.forwardRef((({className:e,inset:t,...n},a)=>vs.jsx(UO,{ref:a,className:fN("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n})));JO.displayName=UO.displayName;cs.forwardRef((({className:e,children:t,checked:n,...a},r)=>vs.jsxs(WO,{ref:r,className:fN("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...a,children:[vs.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:vs.jsx(VO,{children:vs.jsx(kb,{className:"h-4 w-4"})})}),t]}))).displayName=WO.displayName;cs.forwardRef((({className:e,children:t,...n},a)=>vs.jsxs(GO,{ref:a,className:fN("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[vs.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:vs.jsx(VO,{children:vs.jsx(Fb,{className:"h-2 w-2 fill-current"})})}),t]}))).displayName=GO.displayName;const ZO=cs.forwardRef((({className:e,inset:t,...n},a)=>vs.jsx(BO,{ref:a,className:fN("px-2 py-1.5 text-sm ",t&&"pl-8",e),...n})));ZO.displayName=BO.displayName;const XO=cs.forwardRef((({className:e,...t},n)=>vs.jsx(HO,{ref:n,className:fN("-mx-1 my-1 h-px bg-muted",e),...t})));function eR({variant:e="default",className:t}){const{currentLanguage:n,languages:a,changeLanguage:r,isLoading:s,t:i}=mk(),[o,l]=cs.useState(!1),c=async e=>{if((null==n?void 0:n.code)!==e&&!o){l(!0);try{await r(e)}catch(t){}finally{l(!1)}}};if(s||!n)return null;const d=a.filter((e=>e.isActive));return 0===d.length?null:"compact"===e?vs.jsxs(YO,{children:[vs.jsx(QO,{asChild:!0,children:vs.jsxs(lk,{variant:"ghost",size:"sm",className:fN("h-8 w-8 p-0",t),disabled:o,children:[vs.jsx(nw,{className:"h-4 w-4"}),vs.jsx("span",{className:"sr-only",children:i("language_switcher.select_language","Select language")})]})}),vs.jsx(KO,{align:"end",className:"w-48",children:d.map((e=>vs.jsxs(JO,{onClick:()=>c(e.code),className:"flex items-center justify-between cursor-pointer",children:[vs.jsxs("div",{className:"flex items-center",children:[e.flagIcon&&vs.jsx("span",{className:"mr-2 text-sm",children:e.flagIcon}),vs.jsx("span",{children:e.name})]}),n.code===e.code&&vs.jsx(kb,{className:"h-4 w-4 text-primary"})]},e.id)))})]}):vs.jsxs(YO,{children:[vs.jsx(QO,{asChild:!0,children:vs.jsxs(lk,{variant:"brand",className:fN("flex items-center gap-2",t),disabled:o,children:[vs.jsx(nw,{className:"h-4 w-4"}),vs.jsxs("div",{className:"flex items-center gap-1",children:[n.flagIcon&&vs.jsx("span",{className:"text-sm",children:n.flagIcon}),vs.jsx("span",{className:"hidden sm:inline",children:n.name}),vs.jsx("span",{className:"sm:hidden",children:n.code.toUpperCase()})]}),vs.jsx(Mb,{className:"h-3 w-3"})]})}),vs.jsx(KO,{align:"end",className:"w-48",children:d.map((e=>vs.jsxs(JO,{onClick:()=>c(e.code),className:"flex items-center justify-between cursor-pointer",children:[vs.jsxs("div",{className:"flex items-center",children:[e.flagIcon&&vs.jsx("span",{className:"mr-2 text-sm",children:e.flagIcon}),vs.jsx("span",{children:e.name})]}),n.code===e.code&&vs.jsx(kb,{className:"h-4 w-4 text-primary"})]},e.id)))})]})}function tR({className:e,showLabel:t=!0,variant:n="ghost"}){const{currentLanguage:a,languages:r,changeLanguage:s,isLoading:i,t:o}=mk(),[l,c]=cs.useState(!1),d=r.filter((e=>!0===e.isActive));return i?vs.jsxs(lk,{variant:n,size:"sm",disabled:!0,className:fN("gap-2",e),children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin"}),t&&vs.jsx("span",{className:"text-sm",children:"Loading..."})]}):a&&0!==d.length?vs.jsxs(YO,{children:[vs.jsx(QO,{asChild:!0,children:vs.jsxs(lk,{variant:n,size:"sm",className:fN("gap-2 justify-start",e),disabled:l,children:[vs.jsx(nw,{className:"h-4 w-4"}),t&&vs.jsxs(vs.Fragment,{children:[vs.jsx("span",{className:"text-sm",children:a.nativeName}),a.flagIcon&&vs.jsx("span",{className:"text-sm",children:a.flagIcon})]}),l?vs.jsx(uw,{className:"h-3 w-3 animate-spin ml-auto"}):vs.jsx(Mb,{className:"h-3 w-3 ml-auto"})]})}),vs.jsxs(KO,{align:"end",className:"w-56",children:[vs.jsxs(ZO,{className:"flex items-center gap-2",children:[vs.jsx(nw,{className:"h-4 w-4"}),o("common.language_selector.title","Select Language")]}),vs.jsx(XO,{}),d.map((e=>vs.jsxs(JO,{onClick:()=>(async e=>{if(e!==(null==a?void 0:a.code)&&!l){c(!0);try{await s(e)}catch(t){}finally{c(!1)}}})(e.code),className:"flex items-center justify-between cursor-pointer",disabled:l,children:[vs.jsxs("div",{className:"flex items-center gap-3",children:[e.flagIcon&&vs.jsx("span",{className:"text-lg",children:e.flagIcon}),vs.jsxs("div",{className:"flex flex-col",children:[vs.jsx("span",{className:"text-sm font-medium",children:e.nativeName}),vs.jsx("span",{className:"text-xs text-muted-foreground",children:e.name})]})]}),a.code===e.code&&vs.jsx(kb,{className:"h-4 w-4 text-primary"})]},e.code))),0===d.length&&vs.jsx(JO,{disabled:!0,children:vs.jsx("span",{className:"text-sm text-muted-foreground",children:o("common.language_selector.no_languages","No languages available")})})]})]}):vs.jsxs(lk,{variant:n,size:"sm",disabled:!0,className:fN("gap-2",e),children:[vs.jsx(nw,{className:"h-4 w-4"}),t&&vs.jsx("span",{className:"text-sm",children:"No languages"})]})}XO.displayName=HO.displayName;const nR={VIEW_ALL_CONVERSATIONS:"view_all_conversations",VIEW_ASSIGNED_CONVERSATIONS:"view_assigned_conversations",ASSIGN_CONVERSATIONS:"assign_conversations",MANAGE_CONVERSATIONS:"manage_conversations",VIEW_CONTACTS:"view_contacts",MANAGE_CONTACTS:"manage_contacts",VIEW_CHANNELS:"view_channels",MANAGE_CHANNELS:"manage_channels",VIEW_FLOWS:"view_flows",MANAGE_FLOWS:"manage_flows",VIEW_ANALYTICS:"view_analytics",VIEW_DETAILED_ANALYTICS:"view_detailed_analytics",VIEW_TEAM:"view_team",MANAGE_TEAM:"manage_team",VIEW_SETTINGS:"view_settings",MANAGE_SETTINGS:"manage_settings",VIEW_PIPELINE:"view_pipeline",MANAGE_PIPELINE:"manage_pipeline",VIEW_CALENDAR:"view_calendar",MANAGE_CALENDAR:"manage_calendar",VIEW_CAMPAIGNS:"view_campaigns",CREATE_CAMPAIGNS:"create_campaigns",EDIT_CAMPAIGNS:"edit_campaigns",DELETE_CAMPAIGNS:"delete_campaigns",MANAGE_TEMPLATES:"manage_templates",MANAGE_SEGMENTS:"manage_segments",VIEW_CAMPAIGN_ANALYTICS:"view_campaign_analytics",MANAGE_WHATSAPP_ACCOUNTS:"manage_whatsapp_accounts",CONFIGURE_CHANNELS:"configure_channels"},aR=async()=>{const e=await fetch("/api/users/permissions",{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch user permissions");return e.json()},rR=()=>{const{user:e}=xT(),{data:t={},isLoading:n,error:a,refetch:r}=Sy({queryKey:["userPermissions",null==e?void 0:e.id],queryFn:aR,enabled:!!e,staleTime:3e5,gcTime:6e5}),s=n=>!!(null==e?void 0:e.isSuperAdmin)||!0===t[n],i=n=>!!(null==e?void 0:e.isSuperAdmin)||n.some((e=>!0===t[e]));return{permissions:t,isLoading:n,error:a,refetch:r,hasPermission:s,hasAnyPermission:i,hasAllPermissions:n=>!!(null==e?void 0:e.isSuperAdmin)||n.every((e=>!0===t[e])),canViewAllConversations:()=>s(nR.VIEW_ALL_CONVERSATIONS),canOnlyViewAssignedConversations:()=>s(nR.VIEW_ASSIGNED_CONVERSATIONS)&&!s(nR.VIEW_ALL_CONVERSATIONS),canAssignConversations:()=>s(nR.ASSIGN_CONVERSATIONS),canManageConversations:()=>s(nR.MANAGE_CONVERSATIONS),canAccessSettings:()=>i([nR.VIEW_SETTINGS,nR.MANAGE_SETTINGS]),canAccessAnalytics:()=>i([nR.VIEW_ANALYTICS,nR.VIEW_DETAILED_ANALYTICS]),canAccessTeam:()=>i([nR.VIEW_TEAM,nR.MANAGE_TEAM]),canAccessPipeline:()=>i([nR.VIEW_PIPELINE,nR.MANAGE_PIPELINE]),canAccessFlows:()=>i([nR.VIEW_FLOWS,nR.MANAGE_FLOWS]),canAccessChannels:()=>i([nR.VIEW_CHANNELS,nR.MANAGE_CHANNELS]),canAccessContacts:()=>i([nR.VIEW_CONTACTS,nR.MANAGE_CONTACTS]),canAccessCalendar:()=>i([nR.VIEW_CALENDAR,nR.MANAGE_CALENDAR]),canAccessCampaigns:()=>i([nR.VIEW_CAMPAIGNS,nR.CREATE_CAMPAIGNS,nR.EDIT_CAMPAIGNS,nR.DELETE_CAMPAIGNS,nR.MANAGE_TEMPLATES,nR.MANAGE_SEGMENTS,nR.VIEW_CAMPAIGN_ANALYTICS,nR.MANAGE_WHATSAPP_ACCOUNTS,nR.CONFIGURE_CHANNELS]),PERMISSIONS:nR}},sR=({permission:e,permissions:t,requireAll:n=!1,fallback:a=null,children:r})=>{const{hasPermission:s,hasAnyPermission:i,hasAllPermissions:o}=rR();let l=!1;return e?l=s(e):t&&(l=n?o(t):i(t)),l?ds.createElement(ds.Fragment,null,r):ds.createElement(ds.Fragment,null,a)};function iR({isOpen:e,isLoading:t,results:n,onClose:a,onSelect:r,query:s}){const[i,o]=fx(),{t:l}=mk(),[c,d]=cs.useState(-1),u=cs.useRef(null),f=n.conversations.length+n.contacts.length+n.templates.length;cs.useEffect((()=>{d(-1)}),[n]),cs.useEffect((()=>{const t=t=>{if(e)switch(t.key){case"ArrowDown":t.preventDefault(),d((e=>(e+1)%f));break;case"ArrowUp":t.preventDefault(),d((e=>e<=0?f-1:e-1));break;case"Enter":t.preventDefault(),c>=0&&m(c);break;case"Escape":t.preventDefault(),a()}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)}),[e,c,f]);const m=e=>{let t=0;if(e<n.conversations.length){const t=n.conversations[e];return localStorage.setItem("selectedContactId",t.contact.id.toString()),localStorage.setItem("selectedChannelType",t.channelType||"whatsapp"),o("/inbox"),void r()}if(t+=n.conversations.length,e<t+n.contacts.length){const a=n.contacts[e-t];return localStorage.setItem("selectedContactId",a.id.toString()),localStorage.setItem("selectedChannelType",a.identifierType||"whatsapp"),o("/inbox"),void r()}if(t+=n.contacts.length,e<t+n.templates.length)return o("/campaigns/templates"),void r()},p=()=>{o("/campaigns/templates"),r()},h=e=>{const t=new Date(e);return((new Date).getTime()-t.getTime())/36e5<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString()},g=(e,t=50)=>e.length>t?e.substring(0,t)+"...":e;return e?vs.jsx("div",{ref:u,className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:t?vs.jsxs("div",{className:"p-4 flex items-center justify-center",children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin mr-2"}),vs.jsx("span",{className:"text-sm text-gray-500",children:l("common.searching","Searching...")})]}):vs.jsx(vs.Fragment,{children:0===f?vs.jsx("div",{className:"p-4 text-center text-gray-500",children:vs.jsx("div",{className:"text-sm",children:l("search.no_results",'No results found for "{{query}}"',{query:s})})}):vs.jsxs("div",{className:"py-2",children:[n.conversations.length>0&&vs.jsxs("div",{children:[vs.jsx("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:l("search.conversations","Conversations")}),n.conversations.map(((e,t)=>vs.jsxs("button",{className:fN("w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",c===t&&"bg-gray-50"),onClick:()=>(e=>{localStorage.setItem("selectedContactId",e.contact.id.toString()),localStorage.setItem("selectedChannelType",e.channelType||"whatsapp"),o("/inbox"),r()})(e),children:[vs.jsx(yw,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}),vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:e.contact.name}),vs.jsx("span",{className:"text-xs text-gray-500",children:h(e.lastMessageAt)})]}),e.lastMessage&&vs.jsx("div",{className:"text-xs text-gray-500 truncate",children:g(e.lastMessage.content)})]})]},`conversation-${e.id}`)))]}),n.contacts.length>0&&vs.jsxs("div",{children:[vs.jsx("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:l("search.contacts","Contacts")}),n.contacts.map(((e,t)=>{const a=n.conversations.length+t;return vs.jsxs("button",{className:fN("w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",c===a&&"bg-gray-50"),onClick:()=>(e=>{localStorage.setItem("selectedContactId",e.id.toString()),localStorage.setItem("selectedChannelType",e.identifierType||"whatsapp"),o("/inbox"),r()})(e),children:[vs.jsx(uj,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),vs.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[e.phone&&vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(Mw,{className:"h-3 w-3 mr-1"}),e.phone]}),e.email&&vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(hw,{className:"h-3 w-3 mr-1"}),e.email]})]})]})]},`contact-${e.id}`)}))]}),n.templates.length>0&&vs.jsxs("div",{children:[vs.jsx("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:l("search.templates","Templates")}),n.templates.map(((e,t)=>{const a=n.conversations.length+n.contacts.length+t;return vs.jsxs("button",{className:fN("w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",c===a&&"bg-gray-50"),onClick:p,children:[vs.jsx(Zb,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}),vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.description&&vs.jsx("div",{className:"text-xs text-gray-500 truncate",children:g(e.description)})]})]},`template-${e.id}`)}))]})]})})}):null}const oR=cs.createContext(void 0);function lR({children:e}){const[t,n]=cs.useState(null),[a,r]=cs.useState(null),[s,i]=cs.useState({}),[o,l]=cs.useState({}),[c,d]=cs.useState(null),u=vy(),{toast:f}=Fy(),{t:m}=mk(),{user:p,isLoading:h}=xT(),{isConnected:g,sendMessage:x,onMessage:y}=yT("/ws"),{data:v,isLoading:b,refetch:w}=Sy({queryKey:["/api/conversations"],refetchOnWindowFocus:!1,refetchOnMount:!0,staleTime:0,enabled:!!p&&!h}),j=Array.isArray(v)?v:(null==v?void 0:v.conversations)||[],{data:N=[],isLoading:C,refetch:S}=Sy({queryKey:["/api/contacts"],refetchOnWindowFocus:!1,refetchOnMount:!0,staleTime:0,enabled:!!p&&!h});cs.useEffect((()=>{g&&(w(),S())}),[g,w,S]),cs.useEffect((()=>{const e=setInterval((()=>{g&&w()}),3e4);return()=>clearInterval(e)}),[g,w]);const k=async(e,t=1,n=!1)=>{if(p&&!h)try{l((t=>({...t,[e]:{...t[e]||{},page:1,hasMore:!0,loading:!0}})));const a=await _y("GET",`/api/conversations/${e}/messages?page=${t}&limit=25`),r=await a.json();i((t=>{const a=t[e]||[],s=n?[...r.messages,...a]:r.messages;return{...t,[e]:s}})),l((t=>({...t,[e]:{page:r.pagination.page,hasMore:r.pagination.hasMore,loading:!1}})))}catch(pBe){l((t=>({...t,[e]:{...t[e]||{},page:1,hasMore:!0,loading:!1}}))),f({title:m("common.error","Error"),description:m("inbox.failed_load_messages","Failed to load conversation messages"),variant:"destructive"})}};cs.useEffect((()=>{if(t&&p&&!h){l((e=>({...e,[t]:{page:1,hasMore:!0,loading:!1}})));const e=async()=>{try{(await fetch(`/api/conversations/${t}/mark-read`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})).ok}catch(e){}};k(t),e()}}),[t,p,h,f]),cs.useEffect((()=>y("messageDeleted",(e=>{const{messageId:t,conversationId:n}=e.data;t&&n&&i((e=>({...e,[n]:(e[n]||[]).filter((e=>e.id!==t))})))}))),[y]),cs.useEffect((()=>y("conversationHistoryCleared",(e=>{const{conversationId:t}=e.data;t&&(i((e=>({...e,[t]:[]}))),l((e=>({...e,[t]:{page:1,hasMore:!1,loading:!1}}))),f({title:"Chat History Cleared",description:"All messages have been removed from this conversation.",variant:"default"}))}))),[y,f]),cs.useEffect((()=>y("newMessage",(e=>{const t=e.data;if(t&&t.conversationId){i((e=>{const n=e[t.conversationId]||[];return n.some((e=>e.id===t.id||(!(!e.externalId||!t.externalId||e.externalId!==t.externalId)||(e.content===t.content&&e.direction===t.direction&&e.type===t.type&&Math.abs(new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())<2e3||(!!(t.mediaUrl&&e.mediaUrl&&e.mediaUrl===t.mediaUrl&&e.direction===t.direction&&Math.abs(new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())<1e4)||!!(t.type&&e.type&&t.type===e.type&&t.direction===e.direction&&["image","video","audio","document"].includes(t.type)&&(t.content===`${t.type.charAt(0).toUpperCase()+t.type.slice(1)} message`||e.content===`${e.type.charAt(0).toUpperCase()+e.type.slice(1)} message`)&&Math.abs(new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())<5e3))))))?e:{...e,[t.conversationId]:[...n,t]}})),u.invalidateQueries({queryKey:["/api/conversations"]}),u.invalidateQueries({queryKey:["/api/conversations",t.conversationId,"messages"]});new Audio("/assets/notification.mp3").play().catch((()=>{}))}}))),[y,u]),cs.useEffect((()=>y("conversationUpdated",(e=>{const t=e.data;u.setQueryData(["/api/conversations"],(e=>e&&e.conversations?{...e,conversations:e.conversations.map((e=>e.id===t.id?{...e,...t}:e))}:e)),u.invalidateQueries({queryKey:["/api/conversations"]})}))),[y,u]),cs.useEffect((()=>y("conversationCreated",(e=>{const t=e.data;u.setQueryData(["/api/conversations"],(e=>{if(!e||!e.conversations)return e;return e.conversations.some((e=>e.id===t.id))?e:{...e,conversations:[t,...e.conversations]}})),u.invalidateQueries({queryKey:["/api/conversations"]})}))),[y,u]),cs.useEffect((()=>y("conversationAssigned",(e=>{const{conversationId:t,agentId:n}=e.data;u.setQueryData(["/api/conversations"],(e=>e&&e.conversations?{...e,conversations:e.conversations.map((e=>e.id===t?{...e,assignedToUserId:n}:e))}:e)),f({title:m("inbox.conversation_assigned","Conversation Assigned"),description:n?m("inbox.conversation_assigned_to_agent","Conversation has been assigned to an agent"):m("inbox.conversation_unassigned","Conversation has been unassigned")})}))),[y,u,f]),cs.useEffect((()=>y("conversationUnassigned",(e=>{const{conversationId:t}=e.data;u.setQueryData(["/api/conversations"],(e=>e&&e.conversations?{...e,conversations:e.conversations.map((e=>e.id===t?{...e,assignedToUserId:null}:e))}:e)),f({title:m("inbox.conversation_unassigned","Conversation Unassigned"),description:m("inbox.conversation_unassigned_desc","Conversation has been unassigned")})}))),[y,u,f]),cs.useEffect((()=>y("unreadCountUpdated",(e=>{const{conversationId:t,unreadCount:n}=e.data;u.setQueryData(["/api/conversations"],(e=>e&&e.conversations?{...e,conversations:e.conversations.map((e=>e.id===t?{...e,unreadCount:n}:e))}:e))}))),[y,u]),cs.useEffect((()=>y("newConversation",(e=>{const t=e.data;u.setQueryData(["/api/conversations"],(e=>{if(!e||!e.conversations)return{conversations:[t],total:1,page:1,limit:50,totalPages:1};return e.conversations.some((e=>e.id===t.id))?e:{...e,conversations:[t,...e.conversations],total:e.total+1}})),u.invalidateQueries({queryKey:["/api/conversations"]})}))),[y,u,f]),cs.useEffect((()=>y("conversationBotStatusUpdated",(e=>{const{conversationId:t,botDisabled:n,disabledAt:a,disableDuration:r,disableReason:s}=e.data;u.setQueryData(["bot-status",t],{conversationId:t,botDisabled:n,disabledAt:a,disableDuration:r,disableReason:s}),u.setQueryData(["/api/conversations"],(e=>e&&e.conversations?{...e,conversations:e.conversations.map((e=>e.id===t?{...e,botDisabled:n,disabledAt:a,disableDuration:r,disableReason:s}:e))}:e))}))),[y,u]);const M={activeConversationId:t,setActiveConversationId:n,activeChannelId:a,setActiveChannelId:r,conversations:j,contacts:N,messages:s,messagesPagination:o,isLoading:b||C,isWebSocketConnected:g,sendMessage:(e,t,n=!1)=>{g?x({type:"sendMessage",message:{conversationId:e,content:t,isFromBot:n}}):f({title:m("inbox.not_connected","Not Connected"),description:m("inbox.cannot_send_message","Cannot send message, not connected to server"),variant:"destructive"})},sendMediaMessage:async(e,t,n)=>{try{if(!g)throw f({title:m("inbox.not_connected","Not Connected"),description:m("inbox.cannot_send_media","Cannot send media, not connected to server"),variant:"destructive"}),new Error(m("inbox.not_connected_server","Not connected to server"));if(!j.find((t=>t.id===e)))throw new Error(m("inbox.conversation_not_found","Conversation not found"));const r=await new Promise(((a,r)=>{const s=new XMLHttpRequest,i=new FormData;i.append("file",t),n&&i.append("caption",n),s.onload=function(){s.status>=200&&s.status<300?a({ok:!0,status:s.status,statusText:s.statusText,json:()=>JSON.parse(s.responseText)}):a({ok:!1,status:s.status,statusText:s.statusText,json:()=>{try{return JSON.parse(s.responseText)}catch(e){return{error:s.statusText}}}})},s.onerror=function(){r(new Error(m("inbox.network_error","Network error")))},s.upload.onprogress=function(e){e.lengthComputable},s.open("POST",`/api/conversations/${e}/upload-media`,!0),s.withCredentials=!0,s.send(i)}));if(!r.ok)try{const e=await r.json();throw new Error(e.error||e.message||m("inbox.failed_send_media","Failed to send media message"))}catch(a){throw new Error(m("inbox.server_error","Server error ({{status}}): {{statusText}}",{status:r.status,statusText:r.statusText}))}return await r.json()}catch(pBe){throw f({title:m("common.error","Error"),description:pBe.message||m("inbox.failed_send_media","Failed to send media message"),variant:"destructive"}),pBe}},loadMoreMessages:async e=>{const t=o[e];t&&!t.loading&&t.hasMore&&await k(e,t.page+1,!0)},replyToMessage:c,setReplyToMessage:d};return vs.jsx(oR.Provider,{value:M,children:e})}function cR(){const e=cs.useContext(oR);if(void 0===e)throw new Error("useConversations must be used within a ConversationProvider");return e}function dR(e,t){try{e=e.replace("#","");let n=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16);return n=Math.max(0,Math.min(255,n+t)),a=Math.max(0,Math.min(255,a+t)),r=Math.max(0,Math.min(255,r+t)),`#${n.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}catch(n){return"#1f2937"}}function uR(){var e;const{toast:t}=Fy(),{t:n}=mk(),[a,r]=fx(),{user:s,company:i,logoutMutation:o,isImpersonating:l,returnFromImpersonationMutation:c}=xT(),{branding:d}=jT(),{PERMISSIONS:u}=rR(),f=cs.useRef(null),[m,p]=cs.useState(!1),[h,g]=cs.useState(0);let x=!0;try{const{isWebSocketConnected:e}=cR();x=e}catch{}const{searchQuery:y,isOpen:v,isLoading:b,results:w,handleSearch:j,clearSearch:N,closeDropdown:C,openDropdown:S}=function(e=300){const[t,n]=cs.useState(""),[a,r]=cs.useState(""),[s,i]=cs.useState(!1);cs.useEffect((()=>{const n=setTimeout((()=>{r(t)}),e);return()=>clearTimeout(n)}),[t,e]),cs.useEffect((()=>{t.trim()||i(!1)}),[t]);const{data:o,isLoading:l,error:c}=Sy({queryKey:["search",a],queryFn:async()=>{if(!a.trim()||a.length<2)return{conversations:[],contacts:[],templates:[]};const e=await fetch(`/api/search?q=${encodeURIComponent(a)}&limit=5`);if(!e.ok)throw new Error("Search failed");return e.json()},enabled:a.length>=2,staleTime:3e4,refetchOnWindowFocus:!1}),d=cs.useCallback((e=>{n(e),e.trim().length>=2&&i(!0)}),[]),u=cs.useCallback((()=>{n(""),r(""),i(!1)}),[]),f=cs.useCallback((()=>{i(!1)}),[]),m=cs.useCallback((()=>{t.trim().length>=2&&i(!0)}),[t]);return{searchQuery:t,debouncedQuery:a,isOpen:s,isLoading:l&&a.length>=2,error:c,results:o||{conversations:[],contacts:[],templates:[]},handleSearch:d,clearSearch:u,closeDropdown:f,openDropdown:m}}(300);cs.useEffect((()=>{const e=e=>{f.current&&!f.current.contains(e.target)&&C()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[C]),cs.useEffect((()=>{const e=()=>{g((e=>e+1))};return window.addEventListener("brandingUpdated",e),()=>window.removeEventListener("brandingUpdated",e)}),[]);const k=i?{headerBg:{backgroundColor:dR(i.primaryColor??"#1f2937",-40)},borderColor:{borderColor:dR(i.primaryColor??"#1f2937",-30)}}:{headerBg:{backgroundColor:"#1f2937"},borderColor:{borderColor:"#374151"}};return vs.jsxs("header",{className:"sticky top-0 z-10 text-white border-b px-4 py-2 grid grid-cols-3 items-center",style:{...k.headerBg,...k.borderColor},children:[vs.jsxs("div",{className:"flex items-center",children:[l&&vs.jsxs(lk,{variant:"brand",size:"sm",className:"btn-brand-primary mr-4 text-amber-600 border-amber-600 hover:bg-amber-50",onClick:async()=>{try{t({title:n("admin.returning_to_admin","Returning to admin account"),description:n("common.please_wait","Please wait...")}),c.mutate()}catch(e){t({title:n("admin.error_returning","Error returning to admin"),description:n("admin.trying_fallback","Trying fallback method..."),variant:"destructive"}),sessionStorage.removeItem("isImpersonating"),localStorage.removeItem("isImpersonating"),localStorage.removeItem("originalSuperAdminId");try{await fetch("/api/clear-session",{method:"POST"})}catch(a){}setTimeout((()=>{window.location.replace("/admin/login")}),1e3)}},disabled:c.isPending,children:[vs.jsx(yb,{className:"h-4 w-4 mr-1"}),c.isPending?n("admin.returning","Returning..."):n("admin.return_to_admin","Return to Admin")]}),vs.jsxs("div",{className:"flex items-center",children:[(null==i?void 0:i.logo)||d.logoUrl?vs.jsx("img",{src:(null==i?void 0:i.logo)||d.logoUrl,alt:(null==i?void 0:i.name)||d.appName,className:"h-8 w-8 object-contain"}):vs.jsx("svg",{className:"h-8 w-8 text-primary-600",fill:"currentColor",viewBox:"0 0 24 24",children:vs.jsx("path",{d:"M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8\r\n              S16.41,20,12,20z M14.59,8.59L16,10l-6,6l-4-4l1.41-1.41L10,13.17L14.59,8.59z"})}),vs.jsxs("span",{className:"ml-2 text-xl text-white",children:[(null==i?void 0:i.name)||d.appName,l&&vs.jsx("span",{className:"ml-2 text-xs px-2 py-1 bg-amber-100 text-amber-800 rounded-full",children:n("admin.impersonating","Impersonating")})]})]})]}),vs.jsx("div",{className:"flex justify-center",children:vs.jsxs("div",{className:"relative w-[400px] max-w-full hidden md:block",ref:f,children:[vs.jsx("form",{onSubmit:e=>{e.preventDefault()},children:vs.jsxs("div",{className:"relative",children:[vs.jsx("input",{type:"search",placeholder:n("common.search_placeholder","Search conversations, contacts, templates..."),className:"w-full px-4 py-2 pr-10 rounded-lg bg-gray-800 border border-gray-600 text-white placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:y,onChange:e=>j(e.target.value),onFocus:S}),y?vs.jsx("button",{type:"button",onClick:N,className:"absolute right-3 top-2.5 text-gray-400 hover:text-white",children:vs.jsx(yj,{className:"h-4 w-4"})}):vs.jsx(Ow,{className:"h-4 w-4 absolute right-3 top-2.5 text-gray-400"})]})}),vs.jsx(iR,{isOpen:v,isLoading:b,results:w,onClose:C,onSelect:N,query:y})]})}),vs.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[vs.jsx("button",{className:"md:hidden flex items-center justify-center h-8 w-8 rounded-full bg-gray-700 hover:bg-gray-600",onClick:()=>p(!0),children:vs.jsx(Ow,{className:"h-4 w-4 text-white"})}),vs.jsx("div",{className:"flex items-center",children:x?vs.jsxs("div",{className:"flex items-center space-x-1 text-green-400",title:"Real-time connection active",children:[vs.jsx(gj,{className:"h-4 w-4"}),vs.jsx("span",{className:"hidden sm:inline text-xs",children:"Connected"})]}):vs.jsxs("div",{className:"flex items-center space-x-1 text-red-400",title:"Real-time connection lost",children:[vs.jsx(hj,{className:"h-4 w-4"}),vs.jsx("span",{className:"hidden sm:inline text-xs",children:"Disconnected"})]})}),vs.jsx(eR,{variant:"compact"}),vs.jsx(sR,{permissions:[u.VIEW_SETTINGS,u.MANAGE_SETTINGS],children:vs.jsx("button",{className:"flex items-center justify-center h-8 w-8 rounded-full bg-gray-700 hover:bg-gray-600",onClick:()=>r("/settings"),children:vs.jsx("i",{className:"ri-settings-3-line text-white"})})}),vs.jsxs(YO,{children:[vs.jsxs(QO,{className:"flex items-center cursor-pointer hover:opacity-80",children:[vs.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-white font-medium",style:{backgroundColor:(null==i?void 0:i.primaryColor)||d.primaryColor},children:(null==(e=null==s?void 0:s.fullName)?void 0:e.split(" ").map((e=>e[0])).join(""))||"JD"}),vs.jsx("span",{className:"ml-2 hidden md:block text-white",children:(null==s?void 0:s.fullName)||"John Doe"})]}),vs.jsxs(KO,{align:"end",className:"w-56",children:[vs.jsxs("div",{className:"px-2 py-1.5 text-sm font-medium",children:[vs.jsx("div",{children:(null==s?void 0:s.fullName)||"John Doe"}),vs.jsx("div",{className:"text-xs text-muted-foreground",children:(null==s?void 0:s.email)||"email@example.com"}),i&&vs.jsxs("div",{className:"text-xs flex items-center mt-1 text-primary",children:[vs.jsx(jb,{className:"h-3 w-3 mr-1"}),i.name]})]}),vs.jsx(XO,{}),vs.jsxs(JO,{className:"cursor-pointer",onClick:()=>r("/profile"),children:[vs.jsx(uj,{className:"mr-2 h-4 w-4"}),vs.jsx("span",{children:n("nav.profile","Profile")})]}),vs.jsx(sR,{permissions:[u.VIEW_SETTINGS,u.MANAGE_SETTINGS],children:vs.jsxs(JO,{className:"cursor-pointer",onClick:()=>r("/settings"),children:[vs.jsx(Fw,{className:"mr-2 h-4 w-4"}),vs.jsx("span",{children:n("nav.settings","Settings")})]})}),vs.jsx(JO,{className:"p-0",children:vs.jsx(tR,{className:"w-full justify-start p-2"})}),vs.jsx(XO,{}),vs.jsxs(JO,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:()=>{sessionStorage.removeItem("isImpersonating"),localStorage.removeItem("isImpersonating"),localStorage.removeItem("originalSuperAdminId"),o.mutate()},disabled:o.isPending,children:[vs.jsx(pw,{className:"mr-2 h-4 w-4"}),vs.jsx("span",{children:o.isPending?n("auth.logging_out","Logging out..."):n("auth.logout","Logout")})]})]})]})]}),m&&vs.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[vs.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>p(!1)}),vs.jsxs("div",{className:"fixed top-0 left-0 right-0 border-b p-4",style:{...k.headerBg,...k.borderColor},children:[vs.jsxs("div",{className:"flex items-center space-x-3",children:[vs.jsx("button",{onClick:()=>p(!1),className:"flex items-center justify-center h-8 w-8 rounded-full bg-gray-700 hover:bg-gray-600",children:vs.jsx(yj,{className:"h-4 w-4 text-white"})}),vs.jsxs("div",{className:"flex-1 relative",children:[vs.jsx("input",{type:"search",placeholder:n("common.search_placeholder","Search conversations, contacts, templates..."),className:"w-full px-4 py-2 pr-10 rounded-lg bg-gray-800 border border-gray-600 text-white placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:y,onChange:e=>j(e.target.value),autoFocus:!0}),y?vs.jsx("button",{type:"button",onClick:N,className:"absolute right-3 top-2.5 text-gray-400 hover:text-white",children:vs.jsx(yj,{className:"h-4 w-4"})}):vs.jsx(Ow,{className:"h-4 w-4 absolute right-3 top-2.5 text-gray-400"})]})]}),vs.jsx("div",{className:"mt-4 max-h-96 overflow-y-auto",children:vs.jsx(iR,{isOpen:!0,isLoading:b,results:w,onClose:()=>p(!1),onSelect:()=>{N(),p(!1)},query:y})})]})]})]})}function fR({className:e="",showIcon:t=!1,variant:n="default"}){const{data:a,isLoading:r}=Sy({queryKey:["app-version"],queryFn:async()=>{const e=await fetch("/api/auto-update/version");if(!e.ok)throw new Error("Failed to fetch version");return e.json()},staleTime:3e5,refetchOnWindowFocus:!1});if(r)return vs.jsx("div",{className:`text-xs text-muted-foreground ${e}`,children:"Loading version..."});const s=(null==a?void 0:a.version)||"2.0.0";return vs.jsxs("div",{className:`flex items-center space-x-1 ${e}`,children:[vs.jsxs(dk,{variant:n,className:"text-xs text-white",children:["v",s]}),t&&vs.jsxs(ZS,{children:[vs.jsx(XS,{children:vs.jsx(ow,{className:"h-3 w-3 text-muted-foreground"})}),vs.jsx(ek,{children:vs.jsxs("p",{children:["Application Version: ",s]})})]})]})}const mR=fb("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),pR=cs.forwardRef((({className:e,variant:t,...n},a)=>vs.jsx("div",{ref:a,role:"alert",className:fN(mR({variant:t}),e),...n})));pR.displayName="Alert";const hR=cs.forwardRef((({className:e,...t},n)=>vs.jsx("h5",{ref:n,className:fN("mb-1 font-medium leading-none tracking-tight",e),...t})));hR.displayName="AlertTitle";const gR=cs.forwardRef((({className:e,...t},n)=>vs.jsx("div",{ref:n,className:fN("text-sm [&_p]:leading-relaxed",e),...t})));function xR({isCollapsed:e=!1}){const{company:t}=xT(),{t:n}=mk();if(!(null==t?void 0:t.isInTrial)||!(null==t?void 0:t.trialEndDate))return null;const a=new Date,r=new Date(t.trialEndDate),s=Math.ceil((r.getTime()-a.getTime())/864e5);if(s<=0)return null;const i=s<=3;return e?vs.jsx("div",{className:"px-2 py-2",children:vs.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center "+(i?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"),children:i?vs.jsx(nj,{className:"h-5 w-5"}):vs.jsx(Bb,{className:"h-5 w-5"})})}):vs.jsx("div",{className:"px-2 py-2",children:vs.jsx(pR,{className:""+(i?"border-red-200 bg-red-50 text-red-800":"border-blue-200 bg-blue-50 text-blue-800"),children:vs.jsxs("div",{className:"flex items-center gap-2",children:[i?vs.jsx(nj,{className:"h-4 w-4"}):vs.jsx(Bb,{className:"h-4 w-4"}),vs.jsxs("div",{className:"flex-1",children:[vs.jsx("div",{className:"font-medium text-sm",children:n("trial.status_title","Trial Period")}),vs.jsx(gR,{className:"text-xs mt-1",children:1===s?n("trial.expires_today","Expires today"):n("trial.days_remaining","{{days}} days remaining",{days:s})})]})]})})})}function yR(){const[e,t]=fx(),{setActiveChannelId:n,activeChannelId:a}=cR(),[r,s]=cs.useState(!1),[,i]=cs.useState(!1),{company:o}=xT(),{t:l}=mk(),{PERMISSIONS:c}=rR(),d=vy(),{onMessage:u}=yT("/ws");cs.useEffect((()=>{const e=u("channelConnectionCreated",(e=>{d.invalidateQueries({queryKey:["/api/channel-connections",null==o?void 0:o.id]})})),t=u("channelConnectionUpdated",(e=>{d.invalidateQueries({queryKey:["/api/channel-connections",null==o?void 0:o.id]})})),r=u("channelConnectionDeleted",(e=>{var t;(null==(t=e.data)?void 0:t.id)===a&&n(null),d.invalidateQueries({queryKey:["/api/channel-connections",null==o?void 0:o.id]})})),s=u("whatsappConnectionStatus",(e=>{d.invalidateQueries({queryKey:["/api/channel-connections",null==o?void 0:o.id]})})),i=u("instagramConnectionStatus",(e=>{d.invalidateQueries({queryKey:["/api/channel-connections",null==o?void 0:o.id]})})),l=u("messengerConnectionStatus",(e=>{d.invalidateQueries({queryKey:["/api/channel-connections",null==o?void 0:o.id]})}));return()=>{e(),t(),r(),s(),i(),l()}}),[u,d,null==o?void 0:o.id,a,n]),cs.useEffect((()=>{const e=()=>{i(window.innerWidth<768),window.innerWidth<768&&s(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const{data:f=[]}=Sy({queryKey:["/api/channel-connections",null==o?void 0:o.id],refetchOnWindowFocus:!0,refetchOnReconnect:!0,staleTime:12e4,enabled:!!o}),m=o?{sidebarBg:{backgroundColor:p(o.primaryColor??"#1f2937",-40)},sidebarHover:{backgroundColor:p(o.primaryColor??"#1f2937",-30)},activeItem:{backgroundColor:p(o.primaryColor??"#1f2937",-20)},toggleButton:{backgroundColor:p(o.primaryColor??"#1f2937",-30)},toggleButtonHover:{backgroundColor:p(o.primaryColor??"#1f2937",-20)},toggleButtonBorder:{borderColor:p(o.primaryColor??"#1f2937",-10)}}:{sidebarBg:{},activeItem:{},toggleButton:{},toggleButtonBorder:{}};function p(e,t){try{e=e.replace("#","");let n=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16);return n=Math.max(0,Math.min(255,n+t)),a=Math.max(0,Math.min(255,a+t)),r=Math.max(0,Math.min(255,r+t)),`#${n.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}catch(n){return"#1f2937"}}return vs.jsxs("nav",{className:`text-white ${r?"w-16":"w-64"} transition-all duration-300 ease-in-out flex-shrink-0 flex flex-col relative`,style:m.sidebarBg||{backgroundColor:"#1f2937"},children:[vs.jsx("button",{onClick:()=>{s(!r)},className:"absolute -right-3 top-6 text-white p-1 rounded-full border z-50 shadow-lg transition-colors",style:{...m.toggleButton,...m.toggleButtonBorder},"aria-label":r?"Expand sidebar":"Collapse sidebar",children:vs.jsx("i",{className:`ri-${r?"arrow-right":"arrow-left"}-s-line text-sm`})}),vs.jsxs("div",{className:"px-4 py-4 flex flex-col overflow-y-auto",children:[vs.jsxs("div",{className:"flex flex-col space-y-1",children:[vs.jsxs(yx,{href:"/inbox",className:"flex items-center px-2 py-2 rounded-lg "+("/inbox"===e?"text-white":"text-gray-400 hover:text-white"),style:"/inbox"===e?m.activeItem:{},children:[vs.jsx("i",{className:"ri-inbox-line text-xl"}),vs.jsx("span",{className:"ml-3 "+(r?"hidden":"block"),children:l("nav.inbox","Inbox")})]}),vs.jsx(sR,{permissions:[c.VIEW_FLOWS,c.MANAGE_FLOWS],children:vs.jsxs(yx,{href:"/flows",className:"flex items-center px-2 py-2 rounded-lg "+("/flows"===e?"text-white":"text-gray-400 hover:text-white"),style:"/flows"===e?m.activeItem:{},children:[vs.jsx("i",{className:"ri-flow-chart text-xl"}),vs.jsx("span",{className:"ml-3 "+(r?"hidden":"block"),children:l("nav.flow_builder","Flow Builder")})]})}),vs.jsx(sR,{permissions:[c.VIEW_CONTACTS,c.MANAGE_CONTACTS],children:vs.jsxs(yx,{href:"/contacts",className:"flex items-center px-2 py-2 rounded-lg "+("/contacts"===e?"text-white":"text-gray-400 hover:text-white"),style:"/contacts"===e?m.activeItem:{},children:[vs.jsx("i",{className:"ri-contacts-line text-xl"}),vs.jsx("span",{className:"ml-3 "+(r?"hidden":"block"),children:l("nav.contacts","Contacts")})]})}),vs.jsx(sR,{permissions:[c.VIEW_PIPELINE,c.MANAGE_PIPELINE],children:vs.jsxs(yx,{href:"/pipeline",className:"flex items-center px-2 py-2 rounded-lg "+("/pipeline"===e?"text-white":"text-gray-400 hover:text-white"),style:"/pipeline"===e?m.activeItem:{},children:[vs.jsx("i",{className:"ri-stack-line text-xl"}),vs.jsx("span",{className:"ml-3 "+(r?"hidden":"block"),children:l("nav.pipeline","Pipeline")})]})}),vs.jsx(sR,{permissions:[c.VIEW_CALENDAR,c.MANAGE_CALENDAR],children:vs.jsxs(yx,{href:"/calendar",className:"flex items-center px-2 py-2 rounded-lg "+("/calendar"===e?"text-white":"text-gray-400 hover:text-white"),style:"/calendar"===e?m.activeItem:{},children:[vs.jsx("i",{className:"ri-calendar-line text-xl"}),vs.jsx("span",{className:"ml-3 "+(r?"hidden":"block"),children:l("nav.calendar","Calendar")})]})}),vs.jsx(sR,{permissions:[c.VIEW_CAMPAIGNS,c.CREATE_CAMPAIGNS,c.EDIT_CAMPAIGNS,c.DELETE_CAMPAIGNS,c.MANAGE_TEMPLATES,c.MANAGE_SEGMENTS,c.VIEW_CAMPAIGN_ANALYTICS,c.MANAGE_WHATSAPP_ACCOUNTS,c.CONFIGURE_CHANNELS],children:vs.jsxs(yx,{href:"/campaigns",className:"flex items-center px-2 py-2 rounded-lg "+(e.startsWith("/campaigns")?"text-white":"text-gray-400 hover:text-white"),style:e.startsWith("/campaigns")?m.activeItem:{},children:[vs.jsx("i",{className:"ri-megaphone-line text-xl"}),vs.jsx("span",{className:"ml-3 "+(r?"hidden":"block"),children:l("nav.campaigns","Campaigns")})]})}),vs.jsx(sR,{permissions:[c.VIEW_ANALYTICS,c.VIEW_DETAILED_ANALYTICS],children:vs.jsxs(yx,{href:"/analytics",className:"flex items-center px-2 py-2 rounded-lg "+("/analytics"===e?"text-white":"text-gray-400 hover:text-white"),style:"/analytics"===e?m.activeItem:{},children:[vs.jsx("i",{className:"ri-bar-chart-line text-xl"}),vs.jsx("span",{className:"ml-3 "+(r?"hidden":"block"),children:l("nav.analytics","Analytics")})]})})]}),vs.jsx(sR,{permissions:[c.VIEW_CHANNELS,c.MANAGE_CHANNELS],children:vs.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-700",children:[vs.jsx("h3",{className:"text-xs uppercase tracking-wide text-gray-500 mb-2 "+(r?"hidden":"block"),children:l("nav.channels","Channels")}),vs.jsx("div",{className:"flex flex-col space-y-1",children:f.map((s=>{let i,o;switch(s.channelType){case"whatsapp_official":i="ri-whatsapp-line",o="#25D366";break;case"whatsapp_unofficial":i="ri-whatsapp-line",o="#F59E0B";break;case"messenger":i="ri-messenger-line",o="#1877F2";break;case"instagram":i="ri-instagram-line",o="#E4405F";break;default:i="ri-chat-1-line",o="#333235"}const l=a===s.id;return vs.jsxs("button",{className:"flex items-center px-2 py-2 rounded-lg w-full text-left "+(l?"bg-gray-800 text-white":"text-gray-400 hover:bg-gray-800 hover:text-white"),onClick:()=>{return r=s.id,n(a===r?null:r),void("/inbox"!==e&&t("/inbox"));var r},children:[vs.jsx("i",{className:i+" text-xl",style:{color:l?"white":o}}),vs.jsx("span",{className:`ml-3 ${r?"hidden":"block"} truncate`,children:s.accountName})]},s.id)}))})]})}),vs.jsxs("div",{className:"mt-auto pt-4",children:[vs.jsx(xR,{isCollapsed:r}),vs.jsx(sR,{permissions:[c.VIEW_SETTINGS,c.MANAGE_SETTINGS],children:vs.jsxs(yx,{href:"/settings",className:"flex items-center px-2 py-2 rounded-lg "+("/settings"===e?"text-white":"text-gray-400 hover:text-white"),style:"/settings"===e?m.activeItem:{},children:[vs.jsx("i",{className:"ri-settings-line text-xl"}),vs.jsx("span",{className:"ml-3 "+(r?"hidden":"block"),children:l("nav.settings","Settings")})]})}),vs.jsxs("a",{href:`https://docs.${window.location.hostname.replace(/^www\./,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-2 py-2 rounded-lg w-full text-left text-gray-400 hover:text-white",children:[vs.jsx("i",{className:"ri-question-line text-xl"}),vs.jsx("span",{className:"ml-3 "+(r?"hidden":"block"),children:l("nav.help_support","Help & Support")})]}),o&&vs.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700 text-xs text-gray-500 "+(r?"hidden":"block"),children:vs.jsxs("div",{className:"px-2 space-y-1",children:[vs.jsxs("div",{children:[l("nav.company","Company"),": ",o.name]}),vs.jsxs("div",{children:[l("nav.plan","Plan"),": ",vs.jsx("span",{className:"capitalize",children:o.plan})]}),vs.jsx("div",{className:"pt-2",children:vs.jsx(fR,{className:"text-xs",variant:"outline"})})]})})]})]})]})}function vR(){const[e,t]=fx(),{t:n}=mk();return cs.useEffect((()=>{t("/inbox")}),[t]),vs.jsxs("div",{className:"h-screen flex flex-col overflow-hidden font-sans text-gray-800",children:[vs.jsx(uR,{}),vs.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[vs.jsx(yR,{}),vs.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[vs.jsx("h1",{className:"text-2xl  mb-6",children:n("nav.dashboard","Dashboard")}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsx(ak,{children:n("dashboard.total_conversations","Total Conversations")})}),vs.jsx(sk,{children:vs.jsx("p",{className:"text-3xl font-bold",children:"15"})})]}),vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsx(ak,{children:n("dashboard.active_conversations","Active Conversations")})}),vs.jsx(sk,{children:vs.jsx("p",{className:"text-3xl font-bold",children:"8"})})]}),vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsx(ak,{children:n("dashboard.response_time","Response Time")})}),vs.jsx(sk,{children:vs.jsx("p",{className:"text-3xl font-bold",children:"5m"})})]})]})]})]})]})}function bR(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function wR(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function jR(e,t){const n=bR(e);return isNaN(t)?wR(e,NaN):t?(n.setDate(n.getDate()+t),n):n}function NR(e,t){const n=bR(e);if(isNaN(t))return wR(e,NaN);if(!t)return n;const a=n.getDate(),r=wR(e,n.getTime());r.setMonth(n.getMonth()+t+1,0);return a>=r.getDate()?r:(n.setFullYear(r.getFullYear(),r.getMonth(),a),n)}gR.displayName="AlertDescription";const CR=6048e5,SR=6e4,kR=36e5,MR=43200;function _R(e,t){return function(e,t){return wR(e,+bR(e)+t)}(e,t*kR)}let IR={};function AR(){return IR}function ER(e,t){var n,a,r,s;const i=AR(),o=(null==t?void 0:t.weekStartsOn)??(null==(a=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:a.weekStartsOn)??i.weekStartsOn??(null==(s=null==(r=i.locale)?void 0:r.options)?void 0:s.weekStartsOn)??0,l=bR(e),c=l.getDay(),d=(c<o?7:0)+c-o;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function LR(e){return ER(e,{weekStartsOn:1})}function TR(e){const t=bR(e),n=t.getFullYear(),a=wR(e,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const r=LR(a),s=wR(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const i=LR(s);return t.getTime()>=r.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function DR(e){const t=bR(e);return t.setHours(0,0,0,0),t}function PR(e){const t=bR(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function OR(e,t){const n=DR(e),a=DR(t),r=+n-PR(n),s=+a-PR(a);return Math.round((r-s)/864e5)}function RR(e,t){return jR(e,7*t)}function zR(e,t){return NR(e,12*t)}function FR(e,t){const n=bR(e),a=bR(t),r=n.getTime()-a.getTime();return r<0?-1:r>0?1:r}function BR(e){return wR(e,Date.now())}function UR(e,t){return+DR(e)===+DR(t)}function WR(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function GR(e,t){const n=bR(e),a=bR(t);return 12*(n.getFullYear()-a.getFullYear())+(n.getMonth()-a.getMonth())}function VR(e){const t=bR(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function HR(e){const t=bR(e);return+function(e){const t=bR(e);return t.setHours(23,59,59,999),t}(t)===+VR(t)}function qR(e,t,n){const a=function(e,t){return+bR(e)-+bR(t)}(e,t)/1e3;return(r=null==n?void 0:n.roundingMethod,e=>{const t=(r?Math[r]:Math.trunc)(e);return 0===t?0:t})(a);var r}function $R(e,t){const n=bR(e.start),a=bR(e.end);let r=+n>+a;const s=r?+n:+a,i=r?a:n;i.setHours(0,0,0,0);const o=[];for(;+i<=s;)o.push(bR(i)),i.setDate(i.getDate()+1),i.setHours(0,0,0,0);return r?o.reverse():o}function YR(e){const t=bR(e);return t.setDate(1),t.setHours(0,0,0,0),t}function QR(e){const t=bR(e),n=wR(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function KR(e,t){var n,a,r,s;const i=AR(),o=(null==t?void 0:t.weekStartsOn)??(null==(a=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:a.weekStartsOn)??i.weekStartsOn??(null==(s=null==(r=i.locale)?void 0:r.options)?void 0:s.weekStartsOn)??0,l=bR(e),c=l.getDay(),d=6+(c<o?-7:0)-(c-o);return l.setDate(l.getDate()+d),l.setHours(23,59,59,999),l}function JR(e){return KR(e,{weekStartsOn:1})}const ZR={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function XR(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const ez={date:XR({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:XR({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:XR({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},tz={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function nz(e){return(t,n)=>{let a;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,r=(null==n?void 0:n.width)?String(n.width):t;a=e.formattingValues[r]||e.formattingValues[t]}else{const t=e.defaultWidth,r=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;a=e.values[r]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}const az={ordinalNumber:(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:nz({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:nz({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:nz({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:nz({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:nz({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function rz(e){return(t,n={})=>{const a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;const i=s[0],o=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(i))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(i)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}const sz={ordinalNumber:(iz={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(iz.matchPattern);if(!n)return null;const a=n[0],r=e.match(iz.parsePattern);if(!r)return null;let s=iz.valueCallback?iz.valueCallback(r[0]):r[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(a.length)}}),era:rz({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:rz({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:rz({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:rz({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:rz({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var iz;const oz={code:"en-US",formatDistance:(e,t,n)=>{let a;const r=ZR[e];return a="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:ez,formatRelative:(e,t,n,a)=>tz[e],localize:az,match:sz,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lz(e){const t=bR(e),n=+LR(t)-+function(e){const t=TR(e),n=wR(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),LR(n)}(t);return Math.round(n/CR)+1}function cz(e,t){var n,a,r,s;const i=bR(e),o=i.getFullYear(),l=AR(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(a=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:a.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(s=null==(r=l.locale)?void 0:r.options)?void 0:s.firstWeekContainsDate)??1,d=wR(e,0);d.setFullYear(o+1,0,c),d.setHours(0,0,0,0);const u=ER(d,t),f=wR(e,0);f.setFullYear(o,0,c),f.setHours(0,0,0,0);const m=ER(f,t);return i.getTime()>=u.getTime()?o+1:i.getTime()>=m.getTime()?o:o-1}function dz(e,t){const n=bR(e),a=+ER(n,t)-+function(e,t){var n,a,r,s;const i=AR(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(a=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:a.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(s=null==(r=i.locale)?void 0:r.options)?void 0:s.firstWeekContainsDate)??1,l=cz(e,t),c=wR(e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),ER(c,t)}(n,t);return Math.round(a/CR)+1}function uz(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const fz={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return uz("yy"===t?a%100:a,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):uz(n+1,2)},d:(e,t)=>uz(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>uz(e.getHours()%12||12,t.length),H:(e,t)=>uz(e.getHours(),t.length),m:(e,t)=>uz(e.getMinutes(),t.length),s:(e,t)=>uz(e.getSeconds(),t.length),S(e,t){const n=t.length,a=e.getMilliseconds();return uz(Math.trunc(a*Math.pow(10,n-3)),t.length)}},mz="midnight",pz="noon",hz="morning",gz="afternoon",xz="evening",yz="night",vz={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return n.ordinalNumber(a,{unit:"year"})}return fz.y(e,t)},Y:function(e,t,n,a){const r=cz(e,a),s=r>0?r:1-r;if("YY"===t){return uz(s%100,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):uz(s,t.length)},R:function(e,t){return uz(TR(e),t.length)},u:function(e,t){return uz(e.getFullYear(),t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return uz(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return uz(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return fz.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return uz(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const r=dz(e,a);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):uz(r,t.length)},I:function(e,t,n){const a=lz(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):uz(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):fz.d(e,t)},D:function(e,t,n){const a=function(e){const t=bR(e);return OR(t,QR(t))+1}(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):uz(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return uz(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return uz(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),r=0===a?7:a;switch(t){case"i":return String(r);case"ii":return uz(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let r;switch(r=12===a?pz:0===a?mz:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let r;switch(r=a>=17?xz:a>=12?gz:a>=4?hz:yz,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return fz.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):fz.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):uz(a,t.length)},k:function(e,t,n){let a=e.getHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):uz(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):fz.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):fz.s(e,t)},S:function(e,t){return fz.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return wz(a);case"XXXX":case"XX":return jz(a);default:return jz(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return wz(a);case"xxxx":case"xx":return jz(a);default:return jz(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+bz(a,":");default:return"GMT"+jz(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+bz(a,":");default:return"GMT"+jz(a,":")}},t:function(e,t,n){return uz(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return uz(e.getTime(),t.length)}};function bz(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=Math.trunc(a/60),s=a%60;return 0===s?n+String(r):n+String(r)+t+uz(s,2)}function wz(e,t){if(e%60==0){return(e>0?"-":"+")+uz(Math.abs(e)/60,2)}return jz(e,t)}function jz(e,t=""){const n=e>0?"-":"+",a=Math.abs(e);return n+uz(Math.trunc(a/60),2)+t+uz(a%60,2)}const Nz=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Cz=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Sz={p:Cz,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],r=n[2];if(!r)return Nz(e,t);let s;switch(a){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",Nz(a,t)).replace("{{time}}",Cz(r,t))}},kz=/^D+$/,Mz=/^Y+$/,_z=["D","DD","YY","YYYY"];const Iz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Az=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ez=/^'([^]*?)'?$/,Lz=/''/g,Tz=/[a-zA-Z]/;function Dz(e,t,n){var a,r,s,i,o,l,c,d;const u=AR(),f=(null==n?void 0:n.locale)??u.locale??oz,m=(null==n?void 0:n.firstWeekContainsDate)??(null==(r=null==(a=null==n?void 0:n.locale)?void 0:a.options)?void 0:r.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(i=null==(s=u.locale)?void 0:s.options)?void 0:i.firstWeekContainsDate)??1,p=(null==n?void 0:n.weekStartsOn)??(null==(l=null==(o=null==n?void 0:n.locale)?void 0:o.options)?void 0:l.weekStartsOn)??u.weekStartsOn??(null==(d=null==(c=u.locale)?void 0:c.options)?void 0:d.weekStartsOn)??0,h=bR(e);if(!function(e){if(!WR(e)&&"number"!=typeof e)return!1;const t=bR(e);return!isNaN(Number(t))}(h))throw new RangeError("Invalid time value");let g=t.match(Az).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,Sz[t])(e,f.formatLong)}return e})).join("").match(Iz).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Pz(e)};if(vz[t])return{isToken:!0,value:e};if(t.match(Tz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));f.localize.preprocessor&&(g=f.localize.preprocessor(h,g));const x={firstWeekContainsDate:m,weekStartsOn:p,locale:f};return g.map((a=>{if(!a.isToken)return a.value;const r=a.value;(!(null==n?void 0:n.useAdditionalWeekYearTokens)&&function(e){return Mz.test(e)}(r)||!(null==n?void 0:n.useAdditionalDayOfYearTokens)&&function(e){return kz.test(e)}(r))&&function(e,t,n){const a=function(e,t,n){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(_z.includes(e))throw new RangeError(a)}(r,t,String(e));return(0,vz[r[0]])(h,r,f.localize,x)})).join("")}function Pz(e){const t=e.match(Ez);return t?t[1].replace(Lz,"'"):e}function Oz(e,t,n){const a=AR(),r=(null==n?void 0:n.locale)??a.locale??oz,s=FR(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const i=Object.assign({},n,{addSuffix:null==n?void 0:n.addSuffix,comparison:s});let o,l;s>0?(o=bR(t),l=bR(e)):(o=bR(e),l=bR(t));const c=qR(l,o),d=(PR(l)-PR(o))/1e3,u=Math.round((c-d)/60);let f;if(u<2)return(null==n?void 0:n.includeSeconds)?c<5?r.formatDistance("lessThanXSeconds",5,i):c<10?r.formatDistance("lessThanXSeconds",10,i):c<20?r.formatDistance("lessThanXSeconds",20,i):c<40?r.formatDistance("halfAMinute",0,i):c<60?r.formatDistance("lessThanXMinutes",1,i):r.formatDistance("xMinutes",1,i):0===u?r.formatDistance("lessThanXMinutes",1,i):r.formatDistance("xMinutes",u,i);if(u<45)return r.formatDistance("xMinutes",u,i);if(u<90)return r.formatDistance("aboutXHours",1,i);if(u<1440){const e=Math.round(u/60);return r.formatDistance("aboutXHours",e,i)}if(u<2520)return r.formatDistance("xDays",1,i);if(u<MR){const e=Math.round(u/1440);return r.formatDistance("xDays",e,i)}if(u<86400)return f=Math.round(u/MR),r.formatDistance("aboutXMonths",f,i);if(f=function(e,t){const n=bR(e),a=bR(t),r=FR(n,a),s=Math.abs(GR(n,a));let i;if(s<1)i=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*s);let t=FR(n,a)===-r;HR(bR(e))&&1===s&&1===FR(e,a)&&(t=!1),i=r*(s-Number(t))}return 0===i?0:i}(l,o),f<12){const e=Math.round(u/MR);return r.formatDistance("xMonths",e,i)}{const e=f%12,t=Math.trunc(f/12);return e<3?r.formatDistance("aboutXYears",t,i):e<9?r.formatDistance("overXYears",t,i):r.formatDistance("almostXYears",t+1,i)}}function Rz(e,t){return Oz(e,BR(e),t)}function zz(e,t){const n=bR(e);if(isNaN(n.getTime()))throw new RangeError("Invalid time value");let a="",r="";{const e=uz(n.getDate(),2),t=uz(n.getMonth()+1,2);a=`${uz(n.getFullYear(),4)}-${t}-${e}`}{const e=n.getTimezoneOffset();if(0!==e){const t=Math.abs(e);r=`${e<0?"+":"-"}${uz(Math.trunc(t/60),2)}:${uz(t%60,2)}`}else r="Z";a=`${a}${""===a?"":"T"}${[uz(n.getHours(),2),uz(n.getMinutes(),2),uz(n.getSeconds(),2)].join(":")}${r}`}return a}function Fz(e,t){return function(e,t,n){const a=ER(e,n),r=ER(t,n),s=+a-PR(a),i=+r-PR(r);return Math.round((s-i)/CR)}(function(e){const t=bR(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}(e),YR(e),t)+1}function Bz(e,t){const n=bR(e),a=bR(t);return n.getTime()>a.getTime()}function Uz(e,t){return+bR(e)<+bR(t)}function Wz(e,t){const n=bR(e),a=bR(t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function Gz(e){return UR(e,BR(e))}function Vz(e,t){return jR(e,-t)}function Hz(e,t){const n=function(e){const t={},n=e.split(qz.dateTimeDelimiter);let a;if(n.length>2)return t;/:/.test(n[0])?a=n[0]:(t.date=n[0],a=n[1],qz.timeZoneDelimiter.test(t.date)&&(t.date=e.split(qz.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length)));if(a){const e=qz.timezone.exec(a);e?(t.time=a.replace(e[1],""),t.timezone=e[1]):t.time=a}return t}(e);let a;if(n.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};const r=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:null===s?r:100*s,restDateString:e.slice((a[1]||a[2]).length)}}(n.date,2);a=function(e,t){if(null===t)return new Date(NaN);const n=e.match($z);if(!n)return new Date(NaN);const a=!!n[4],r=Kz(n[1]),s=Kz(n[2])-1,i=Kz(n[3]),o=Kz(n[4]),l=Kz(n[5])-1;if(a)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,o,l)?function(e,t,n){const a=new Date(0);a.setUTCFullYear(e,0,4);const r=a.getUTCDay()||7,s=7*(t-1)+n+1-r;return a.setUTCDate(a.getUTCDate()+s),a}(t,o,l):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Zz[t]||(Xz(e)?29:28))}(t,s,i)&&function(e,t){return t>=1&&t<=(Xz(e)?366:365)}(t,r)?(e.setUTCFullYear(t,s,Math.max(r,i)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const r=a.getTime();let s,i=0;if(n.time&&(i=function(e){const t=e.match(Yz);if(!t)return NaN;const n=Jz(t[1]),a=Jz(t[2]),r=Jz(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,a,r))return NaN;return n*kR+a*SR+1e3*r}(n.time),isNaN(i)))return new Date(NaN);if(!n.timezone){const e=new Date(r+i),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return s=function(e){if("Z"===e)return 0;const t=e.match(Qz);if(!t)return 0;const n="+"===t[1]?-1:1,a=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,r))return NaN;return n*(a*kR+r*SR)}(n.timezone),isNaN(s)?new Date(NaN):new Date(r+i+s)}const qz={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},$z=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Yz=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Qz=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Kz(e){return e?parseInt(e):1}function Jz(e){return e&&parseFloat(e.replace(",","."))||0}const Zz=[31,null,31,30,31,30,31,31,30,31,30,31];function Xz(e){return e%400==0||e%4==0&&e%100!=0}function eF(e,t){const n=bR(e),a=n.getFullYear(),r=n.getDate(),s=wR(e,0);s.setFullYear(a,t,15),s.setHours(0,0,0,0);const i=function(e){const t=bR(e),n=t.getFullYear(),a=t.getMonth(),r=wR(e,0);return r.setFullYear(n,a+1,0),r.setHours(0,0,0,0),r.getDate()}(s);return n.setMonth(t,Math.min(r,i)),n}function tF(e,t){const n=bR(e);return isNaN(+n)?wR(e,NaN):(n.setFullYear(t),n)}function nF(e,t){return NR(e,-1)}function aF(){return()=>{}}var rF="Avatar",[sF,iF]=Vy(rF),[oF,lF]=sF(rF),cF=cs.forwardRef(((e,t)=>{const{__scopeAvatar:n,...a}=e,[r,s]=cs.useState("idle");return vs.jsx(oF,{scope:n,imageLoadingStatus:r,onImageLoadingStatusChange:s,children:vs.jsx(Xy.span,{...a,ref:t})})}));cF.displayName=rF;var dF="AvatarImage",uF=cs.forwardRef(((e,t)=>{const{__scopeAvatar:n,src:a,onLoadingStatusChange:r=()=>{},...s}=e,i=lF(dF,n),o=function(e,{referrerPolicy:t,crossOrigin:n}){const a=Ug.useSyncExternalStore(aF,(()=>!0),(()=>!1)),r=cs.useRef(null),s=a?(r.current||(r.current=new window.Image),r.current):null,[i,o]=cs.useState((()=>pF(s,e)));return mv((()=>{o(pF(s,e))}),[s,e]),mv((()=>{const e=e=>()=>{o(e)};if(!s)return;const a=e("loaded"),r=e("error");return s.addEventListener("load",a),s.addEventListener("error",r),t&&(s.referrerPolicy=t),"string"==typeof n&&(s.crossOrigin=n),()=>{s.removeEventListener("load",a),s.removeEventListener("error",r)}}),[s,n,t]),i}(a,s),l=tv((e=>{r(e),i.onImageLoadingStatusChange(e)}));return mv((()=>{"idle"!==o&&l(o)}),[o,l]),"loaded"===o?vs.jsx(Xy.img,{...s,ref:t,src:a}):null}));uF.displayName=dF;var fF="AvatarFallback",mF=cs.forwardRef(((e,t)=>{const{__scopeAvatar:n,delayMs:a,...r}=e,s=lF(fF,n),[i,o]=cs.useState(void 0===a);return cs.useEffect((()=>{if(void 0!==a){const e=window.setTimeout((()=>o(!0)),a);return()=>window.clearTimeout(e)}}),[a]),i&&"loaded"!==s.imageLoadingStatus?vs.jsx(Xy.span,{...r,ref:t}):null}));function pF(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}mF.displayName=fF;var hF=cF,gF=uF,xF=mF;const yF=cs.forwardRef((({className:e,...t},n)=>vs.jsx(hF,{ref:n,className:fN("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t})));yF.displayName=hF.displayName;const vF=cs.forwardRef((({className:e,...t},n)=>vs.jsx(gF,{ref:n,className:fN("aspect-square h-full w-full",e),...t})));vF.displayName=gF.displayName;const bF=cs.forwardRef((({className:e,...t},n)=>vs.jsx(xF,{ref:n,className:fN("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t})));function wF(){const{toast:e}=Fy(),t=vy(),[n,a]=cs.useState(!1),r=ky({mutationFn:async({contactId:e,connectionId:t})=>{a(!0);try{const n=await _y("POST",`/api/contacts/${e}/update-profile-picture`,{connectionId:t});return await n.json()}finally{a(!1)}},onSuccess:(n,a)=>{t.invalidateQueries({queryKey:["/api/contacts"]}),t.invalidateQueries({queryKey:[`/api/contacts/${a.contactId}`]}),t.invalidateQueries({queryKey:["/api/conversations"]}),e({title:"Profile picture updated",description:"Successfully fetched the contact's WhatsApp profile picture."})},onError:t=>{e({title:"Failed to update profile picture",description:t.message,variant:"destructive"})}});return{updateProfilePicture:r.mutate,isUpdating:n,isError:r.isError,error:r.error}}function jF({contact:e,connectionId:t,size:n="md",showRefreshButton:a=!1,className:r}){const{updateProfilePicture:s,isUpdating:i}=wF(),{t:o}=mk(),[l,c]=cs.useState(!1),d={sm:"h-2.5 w-2.5",md:"h-3 w-3",lg:"h-4 w-4"};return vs.jsxs("div",{className:"relative group",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[vs.jsxs(yF,{className:fN({sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-16 w-16 text-lg"}[n],r),children:[vs.jsx(vF,{src:e.avatarUrl||"",alt:e.name}),vs.jsx(bF,{children:(u=e.name,u.split(" ").map((e=>e[0])).join("").toUpperCase().substring(0,2))})]}),a&&t&&vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:fN("absolute bottom-0 right-0 rounded-full bg-background shadow-md border border-border hover:bg-accent hover:text-accent-foreground transition-all duration-200 ease-in-out",{sm:"h-5 w-5",md:"h-6 w-6",lg:"h-8 w-8"}[n],l||i?"opacity-100 scale-100":"opacity-0 scale-95"),onClick:()=>{t&&!i&&s({contactId:e.id,connectionId:t})},disabled:i,children:i?vs.jsx(uw,{className:fN("animate-spin",d[n])}):vs.jsx(Lw,{className:d[n]})})}),vs.jsx(ek,{children:vs.jsx("p",{children:o("contacts.avatar.refresh_tooltip","Refresh WhatsApp profile picture")})})]})})]});var u}function NF({groupName:e,groupJid:t,connectionId:n,conversationId:a,size:r="md",showRefreshButton:s=!1,className:i,groupAvatarUrl:o,groupMetadata:l}){const{updateGroupProfilePicture:c,isUpdating:d}=function(){const{toast:e}=Fy(),t=vy(),[n,a]=cs.useState(!1),r=ky({mutationFn:async({conversationId:e,connectionId:t})=>{a(!0);try{const n=await _y("POST",`/api/conversations/${e}/update-group-picture`,{connectionId:t});return await n.json()}finally{a(!1)}},onSuccess:(n,a)=>{t.invalidateQueries({queryKey:["/api/conversations"]}),t.invalidateQueries({queryKey:[`/api/conversations/${a.conversationId}`]}),e({title:"Group picture updated",description:"Successfully fetched the group's WhatsApp profile picture."})},onError:t=>{e({title:"Failed to update group picture",description:t.message,variant:"destructive"})}});return{updateGroupProfilePicture:r.mutate,isUpdating:n,isError:r.isError,error:r.error}}(),{t:u}=mk(),[f,m]=cs.useState(!1),p=o||(null==l?void 0:l.profilePictureUrl),h={sm:"h-2.5 w-2.5",md:"h-3 w-3",lg:"h-4 w-4"};return vs.jsxs("div",{className:"relative group",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[vs.jsxs(yF,{className:fN({sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-16 w-16 text-lg"}[r],i),children:[vs.jsx(vF,{src:p||"",alt:e}),vs.jsx(bF,{className:"bg-blue-100 text-blue-700",children:e?(g=e,g.split(" ").map((e=>e[0])).join("").toUpperCase().substring(0,2)):vs.jsx(fj,{className:{sm:"h-4 w-4",md:"h-5 w-5",lg:"h-8 w-8"}[r]})})]}),s&&n&&a&&vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:fN("absolute bottom-0 right-0 rounded-full bg-background shadow-md border border-border hover:bg-accent hover:text-accent-foreground transition-all duration-200 ease-in-out",{sm:"h-5 w-5",md:"h-6 w-6",lg:"h-8 w-8"}[r],f||d?"opacity-100 scale-100":"opacity-0 scale-95"),onClick:()=>{n&&a&&!d&&c({conversationId:a,connectionId:n})},disabled:d,children:d?vs.jsx(uw,{className:fN("animate-spin",h[r])}):vs.jsx(Lw,{className:h[r]})})}),vs.jsx(ek,{children:vs.jsx("p",{children:u("groups.avatar.refresh_tooltip","Refresh group profile picture")})})]})})]});var g}function CF({conversationId:e,currentAssignedUserId:t,onAssignmentChange:n,variant:a="button"}){const[r,s]=cs.useState(!1),{canAssignConversations:i}=rR(),{toast:o}=Fy(),{t:l}=mk(),c=vy(),{data:d=[],isLoading:u,error:f}=Sy({queryKey:["/api/agents"],queryFn:async()=>{const e=await _y("GET","/api/agents");if(!e.ok){const t=await e.text();throw new Error(l("agents.fetch_failed",`Failed to fetch agents: ${e.status} ${t}`))}return await e.json()},retry:1,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),m=ky({mutationFn:async t=>{if(t){const n=await _y("POST",`/api/conversations/${e}/assign`,{agentId:t});if(!n.ok){const e=await n.json();throw new Error(e.error||l("agents.assign_failed","Failed to assign conversation"))}return n.json()}{const t=await _y("DELETE",`/api/conversations/${e}/assign`);if(!t.ok){const e=await t.json();throw new Error(e.error||l("agents.unassign_failed","Failed to unassign conversation"))}return t.json()}},onSuccess:(e,t)=>{var a;const r=t?null==(a=d.find((e=>e.id===t)))?void 0:a.fullName:null;o({title:t?l("agents.assigned_title","Conversation Assigned"):l("agents.unassigned_title","Conversation Unassigned"),description:t?l("agents.assigned_description",`Conversation assigned to ${r}`,{agentName:r}):l("agents.unassigned_description","Conversation has been unassigned")}),null==n||n(t),c.invalidateQueries({queryKey:["/api/conversations"]}),s(!1)},onError:e=>{o({title:l("agents.assignment_failed_title","Assignment Failed"),description:e.message||l("agents.assignment_failed_description","Failed to update assignment"),variant:"destructive"})}});if(!i())return null;const p=d.find((e=>e.id===t)),h=e=>{m.mutate(e)},g=e=>e.split(" ").map((e=>e[0])).join("").toUpperCase().slice(0,2);return"badge"===a?p?vs.jsx("div",{className:"agent-assignment-dropdown",children:vs.jsxs(YO,{open:r,onOpenChange:s,children:[vs.jsx(QO,{asChild:!0,children:vs.jsxs("button",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer transition-colors",children:[vs.jsxs(yF,{className:"w-4 h-4 mr-1",children:[vs.jsx(vF,{src:p.avatarUrl}),vs.jsx(bF,{className:"text-xs",children:g(p.fullName)})]}),p.fullName]})}),vs.jsxs(KO,{align:"start",className:"w-56",children:[vs.jsx(ZO,{children:l("agents.reassign_conversation","Reassign Conversation")}),vs.jsx(XO,{}),u?vs.jsxs(JO,{disabled:!0,children:[vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),l("agents.loading_agents","Loading agents...")]}):f?vs.jsxs(JO,{disabled:!0,children:[vs.jsx(fj,{className:"w-4 h-4 mr-2"}),l("agents.error_loading_agents","Error loading agents")]}):0===d.length?vs.jsxs(JO,{disabled:!0,children:[vs.jsx(fj,{className:"w-4 h-4 mr-2"}),l("agents.no_agents_available","No agents available")]}):vs.jsxs(vs.Fragment,{children:[d.map((e=>vs.jsxs(JO,{onClick:()=>h(e.id),disabled:m.isPending,className:"flex items-center",children:[vs.jsxs(yF,{className:"w-6 h-6 mr-2",children:[vs.jsx(vF,{src:e.avatarUrl}),vs.jsx(bF,{className:"text-xs",children:g(e.fullName)})]}),vs.jsxs("div",{className:"flex-1",children:[vs.jsx("div",{className:"font-medium",children:e.fullName}),vs.jsx("div",{className:"text-xs text-gray-500",children:e.role})]}),e.id===t&&vs.jsx(kb,{className:"w-4 h-4 text-green-600"})]},e.id))),vs.jsx(XO,{}),vs.jsxs(JO,{onClick:()=>h(null),disabled:m.isPending,className:"text-red-600",children:[vs.jsx(lj,{className:"w-4 h-4 mr-2"}),l("agents.unassign","Unassign")]})]})]})]})}):vs.jsx("div",{className:"agent-assignment-dropdown",children:vs.jsxs(YO,{open:r,onOpenChange:s,children:[vs.jsx(QO,{asChild:!0,children:vs.jsxs("button",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 cursor-pointer transition-colors",children:[vs.jsx(cj,{className:"w-3 h-3 mr-1"}),l("agents.unassigned","Unassigned")]})}),vs.jsxs(KO,{align:"start",className:"w-56",children:[vs.jsx(ZO,{children:l("agents.assign_conversation","Assign Conversation")}),vs.jsx(XO,{}),u?vs.jsxs(JO,{disabled:!0,children:[vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),l("agents.loading_agents","Loading agents...")]}):f?vs.jsxs(JO,{disabled:!0,children:[vs.jsx(fj,{className:"w-4 h-4 mr-2"}),l("agents.error_loading_agents","Error loading agents")]}):0===d.length?vs.jsxs(JO,{disabled:!0,children:[vs.jsx(fj,{className:"w-4 h-4 mr-2"}),l("agents.no_agents_available","No agents available")]}):d.map((e=>vs.jsxs(JO,{onClick:()=>h(e.id),disabled:m.isPending,className:"flex items-center",children:[vs.jsxs(yF,{className:"w-6 h-6 mr-2",children:[vs.jsx(vF,{src:e.avatarUrl}),vs.jsx(bF,{className:"text-xs",children:g(e.fullName)})]}),vs.jsxs("div",{className:"flex-1",children:[vs.jsx("div",{className:"font-medium",children:e.fullName}),vs.jsx("div",{className:"text-xs text-gray-500",children:e.role})]})]},e.id)))]})]})}):vs.jsx("div",{className:"agent-assignment-dropdown",children:vs.jsxs(YO,{open:r,onOpenChange:s,children:[vs.jsx(QO,{asChild:!0,children:vs.jsx(lk,{variant:p?"secondary":"outline",disabled:m.isPending,className:"flex items-center gap-2",children:m.isPending?vs.jsx(uw,{className:"w-4 h-4 animate-spin"}):p?vs.jsxs(vs.Fragment,{children:[vs.jsxs(yF,{className:"w-5 h-5",children:[vs.jsx(vF,{src:p.avatarUrl}),vs.jsx(bF,{className:"text-xs",children:g(p.fullName)})]}),vs.jsx("span",{className:"hidden sm:inline",children:p.fullName})]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(cj,{className:"w-4 h-4"}),vs.jsx("span",{className:"hidden sm:inline",children:l("agents.assign","Assign")})]})})}),vs.jsxs(KO,{align:"end",className:"w-56",children:[vs.jsx(ZO,{children:p?l("agents.reassign_conversation","Reassign Conversation"):l("agents.assign_conversation","Assign Conversation")}),vs.jsx(XO,{}),u?vs.jsxs(JO,{disabled:!0,children:[vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),l("agents.loading_agents","Loading agents...")]}):f?vs.jsxs(JO,{disabled:!0,children:[vs.jsx(fj,{className:"w-4 h-4 mr-2"}),l("agents.error_loading_agents","Error loading agents")]}):0===d.length?vs.jsxs(JO,{disabled:!0,children:[vs.jsx(fj,{className:"w-4 h-4 mr-2"}),l("agents.no_agents_available","No agents available")]}):vs.jsxs(vs.Fragment,{children:[d.map((e=>vs.jsxs(JO,{onClick:()=>h(e.id),disabled:m.isPending,className:"flex items-center",children:[vs.jsxs(yF,{className:"w-6 h-6 mr-2",children:[vs.jsx(vF,{src:e.avatarUrl}),vs.jsx(bF,{className:"text-xs",children:g(e.fullName)})]}),vs.jsxs("div",{className:"flex-1",children:[vs.jsx("div",{className:"font-medium",children:e.fullName}),vs.jsx("div",{className:"text-xs text-gray-500",children:e.role})]}),e.id===t&&vs.jsx(kb,{className:"w-4 h-4 text-green-600"})]},e.id))),p&&vs.jsxs(vs.Fragment,{children:[vs.jsx(XO,{}),vs.jsxs(JO,{onClick:()=>h(null),disabled:m.isPending,className:"text-red-600",children:[vs.jsx(lj,{className:"w-4 h-4 mr-2"}),l("agents.unassign","Unassign")]})]})]})]})]})})}bF.displayName=xF.displayName;const SF=e=>{if(!e)return e;return e.replace(/^> \*[^*]+\*\n\n/,"")};function kF(e){if(!e)return[];return MF(e,[{pattern:/`([^`]+)`/g,replacement:(e,t,n)=>vs.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-1.5 py-0.5 rounded text-sm font-mono border border-gray-200 dark:border-gray-600",children:t},`code-${n}`)},{pattern:/\*([^*]+)\*/g,replacement:(e,t,n)=>vs.jsx("strong",{className:"font-bold",children:t},`bold-${n}`)},{pattern:/_([^_]+)_/g,replacement:(e,t,n)=>vs.jsx("em",{className:"italic",children:t},`italic-${n}`)},{pattern:/~([^~]+)~/g,replacement:(e,t,n)=>vs.jsx("del",{className:"line-through",children:t},`strike-${n}`)}])}function MF(e,t,n=0){if(n>=t.length)return e?[e]:[];const a=t[n],r=[];let s,i=0;for(a.pattern.lastIndex=0;null!==(s=a.pattern.exec(e));){const o=s.index,l=a.pattern.lastIndex;if(o>i){const a=e.substring(i,o);r.push(...MF(a,t,n+1))}const c=a.replacement(s[0],s[1],r.length);r.push(c),i=l,o===l&&a.pattern.lastIndex++}if(i<e.length){const a=e.substring(i);r.push(...MF(a,t,n+1))}return r}const _F=e=>e?e.replace(/\*([^*]+)\*/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/~([^~]+)~/g,"$1").replace(/`([^`]+)`/g,"$1"):e,IF=({className:e="",size:t=16,color:n="currentColor"})=>vs.jsxs("svg",{fill:n,width:t,height:t,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:e,children:[vs.jsx("path",{d:"M21.928 11.607c-.202-.488-.635-.605-.928-.633V8c0-1.103-.897-2-2-2h-6V4.61c.305-.274.5-.668.5-1.11a1.5 1.5 0 0 0-3 0c0 .442.195.836.5 1.11V6H5c-1.103 0-2 .897-2 2v2.997l-.082.006A1 1 0 0 0 1.99 12v2a1 1 0 0 0 1 1H3v5c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5a1 1 0 0 0 1-1v-1.938a1.006 1.006 0 0 0-.072-.455zM5 20V8h14l.001 3.996L19 12v2l.001.005.001 5.995H5z"}),vs.jsx("ellipse",{cx:"8.5",cy:"12",rx:"1.5",ry:"2"}),vs.jsx("ellipse",{cx:"15.5",cy:"12",rx:"1.5",ry:"2"}),vs.jsx("path",{d:"M8 16h8v2H8z"})]});function AF({conversation:e,isActive:t,onClick:n,searchQuery:a}){const{contact:r}=e,s=new Date(e.lastMessageAt),[i,o]=cs.useState(e.assignedToUserId),[l,c]=cs.useState(e.unreadCount||0),{t:d}=mk();vy();const{onMessage:u}=yT("/ws"),f=()=>{n()},{data:m}=Sy({queryKey:["/api/channel-connections"]}),{data:p,isLoading:h}=Sy({queryKey:["/api/conversations",e.id,"latest-message"],queryFn:async()=>{var t;const n=await _y("GET",`/api/conversations/${e.id}/messages?limit=1`);return(null==(t=(await n.json()).messages)?void 0:t[0])||null},staleTime:3e4,refetchOnWindowFocus:!1}),g=(e=>{switch(e){case"whatsapp":case"whatsapp_unofficial":return{icon:"ri-whatsapp-line",color:"#25D366",name:d("conversations.item.channel.whatsapp","WhatsApp")};case"whatsapp_official":return{icon:"ri-whatsapp-line",color:"#25D366",name:d("conversations.item.channel.whatsapp_business","WhatsApp Business")};case"facebook":case"messenger":return{icon:"ri-messenger-line",color:"#1877F2",name:d("conversations.item.channel.messenger","Messenger")};case"instagram":return{icon:"ri-instagram-line",color:"#E4405F",name:d("conversations.item.channel.instagram","Instagram")};case"email":return{icon:"ri-mail-line",color:"#333235",name:d("conversations.item.channel.email","Email")};case"sms":return{icon:"ri-message-2-line",color:"#10B981",name:d("conversations.item.channel.sms","SMS")};case"webapp":return{icon:"ri-global-line",color:"#8B5CF6",name:d("conversations.item.channel.web_chat","Web Chat")};default:return{icon:"ri-chat-1-line",color:"#333235",name:d("conversations.item.channel.chat","Chat")}}})(e.channelType);cs.useEffect((()=>u("unreadCountUpdated",(t=>{t.data.conversationId===e.id&&c(t.data.unreadCount)}))),[u,e.id]),cs.useEffect((()=>{c(e.unreadCount||0)}),[e.unreadCount]);const x=cs.useMemo((()=>{const e=(null==p?void 0:p.createdAt)?new Date(p.createdAt):s;return Gz(e)?Dz(e,"HH:mm"):UR(t=e,Vz(BR(t),1))?d("conversations.item.yesterday","Yesterday"):Dz(e,"MMM dd");var t}),[p,s,d]);return vs.jsx("div",{className:`border-l-4 min-h-[88px] sm:min-h-[80px] ${t?"border-primary-500 bg-primary-50 hover:bg-primary-100":"border-transparent hover:bg-gray-50"} cursor-pointer transition-colors duration-150`,onClick:f,role:"button",tabIndex:0,"aria-label":`${d("conversations.item.conversation_with","Conversation with")} ${e.isGroup?e.groupName||d("groups.unnamed_group","Unnamed Group"):null==r?void 0:r.name}${l>0?`, ${l} ${d("conversations.item.unread_messages","unread messages")}`:""}`,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),f())},children:vs.jsxs("div",{className:"px-3 sm:px-4 py-3 sm:py-4",children:[vs.jsxs("div",{className:"flex justify-between items-start",children:[vs.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[vs.jsxs("div",{className:"relative flex-shrink-0",children:[e.isGroup?vs.jsx(NF,{groupName:e.groupName||"Group",groupJid:e.groupJid,connectionId:e.channelId,conversationId:e.id,groupMetadata:e.groupMetadata,size:"md",showRefreshButton:!1}):r?vs.jsx(jF,{contact:r,connectionId:e.channelId,showRefreshButton:!1,size:"md"}):vs.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-gray-200"}),!e.isGroup&&vs.jsx("span",{className:`absolute bottom-0 right-0 block h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full ${(null==r?void 0:r.isActive)?"bg-green-500":"bg-gray-300"} border-2 border-white`})]}),vs.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("p",{className:"font-medium text-sm sm:text-base truncate pr-2",children:e.isGroup?e.groupName||d("groups.unnamed_group","Unnamed Group"):null==r?void 0:r.name}),l>0&&vs.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-500 rounded-full min-w-[20px] h-5 flex-shrink-0","aria-label":`${l} ${d("conversations.item.unread_messages","unread messages")}`,children:l>99?"99+":l})]}),vs.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[vs.jsxs("span",{className:"flex items-center",children:[vs.jsx("i",{className:g.icon+" mr-1",style:{color:g.color}}),vs.jsx("span",{className:"truncate",children:g.name})]}),e.isGroup&&vs.jsxs(vs.Fragment,{children:[vs.jsx("span",{className:"mx-2",children:"•"}),vs.jsxs("span",{className:"truncate",children:[e.groupParticipantCount||0," ",d("groups.participants","participants")]})]})]})]})]}),vs.jsx("div",{className:"text-xs text-gray-500 ml-2 flex-shrink-0",children:x})]}),vs.jsx("div",{className:"mt-2 sm:mt-1",children:h?vs.jsx("div",{className:"animate-pulse",children:vs.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}):vs.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",children:(e=>{if(!e)return d("conversations.item.no_messages_yet","No messages yet");let t="";switch(e.type){case"image":t=e.isFromBot?d("conversations.item.sent_image","📷 Sent an image"):d("conversations.item.image","📷 Image");break;case"video":t=e.isFromBot?d("conversations.item.sent_video","🎥 Sent a video"):d("conversations.item.video","🎥 Video");break;case"audio":t=e.isFromBot?d("conversations.item.sent_audio","🎵 Sent an audio"):d("conversations.item.audio","🎵 Audio");break;case"document":t=e.isFromBot?d("conversations.item.sent_document","📄 Sent a document"):d("conversations.item.document","📄 Document");break;default:const n=SF(e.content||"");t=_F(n)}return t.length>50&&(t=t.substring(0,50)+"..."),t})(p)})}),(null==r?void 0:r.tags)&&r.tags.length>0&&vs.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:r.tags.slice(0,5).map(((e,t)=>{const n=a&&a.trim().length>0&&e.toLowerCase().includes(a.toLowerCase().trim());return vs.jsx("span",{className:"px-2 py-1 text-xs rounded-full truncate max-w-[80px] "+(n?"bg-yellow-200 text-yellow-900 ring-2 ring-yellow-400":"bg-blue-100 text-blue-800"),children:e},t)}))}),vs.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2",children:[vs.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:["open"===e.status&&!i&&vs.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800 whitespace-nowrap",children:d("conversations.item.new_lead","New Lead")}),"bot_active"===e.status&&vs.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-800 whitespace-nowrap",children:[vs.jsx(IF,{className:"mr-1",size:12,color:"#7c3aed"}),vs.jsx("span",{className:"hidden sm:inline",children:d("conversations.item.bot_active","Bot active")}),vs.jsx("span",{className:"sm:hidden",children:d("conversations.item.bot","Bot")})]}),e.botDisabled&&vs.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600 whitespace-nowrap",children:[vs.jsx(IF,{className:"mr-1 opacity-50",size:12,color:"#6b7280"}),vs.jsx("span",{className:"hidden sm:inline",children:d("conversations.item.bot_disabled","Bot disabled")}),vs.jsx("span",{className:"sm:hidden",children:d("conversations.item.bot_off","Bot off")})]}),"awaiting_reply"===e.status&&vs.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800 whitespace-nowrap",children:[vs.jsx("i",{className:"ri-time-line mr-1"}),vs.jsx("span",{className:"hidden sm:inline",children:d("conversations.item.awaiting_reply","Awaiting reply")}),vs.jsx("span",{className:"sm:hidden",children:d("conversations.item.waiting","Waiting")})]})]}),vs.jsx("div",{className:"flex items-center flex-shrink-0",onClick:e=>e.stopPropagation(),children:vs.jsx(CF,{conversationId:e.id,currentAssignedUserId:i,onAssignmentChange:o,variant:"badge",size:"sm"})})]})]})})}var EF="Dialog",[LF,TF]=Vy(EF),[DF,PF]=LF(EF),OF=e=>{const{__scopeDialog:t,children:n,open:a,defaultOpen:r,onOpenChange:s,modal:i=!0}=e,o=cs.useRef(null),l=cs.useRef(null),[c,d]=yv({prop:a,defaultProp:r??!1,onChange:s,caller:EF});return vs.jsx(DF,{scope:t,triggerRef:o,contentRef:l,contentId:SN(),titleId:SN(),descriptionId:SN(),open:c,onOpenChange:d,onOpenToggle:cs.useCallback((()=>d((e=>!e))),[d]),modal:i,children:n})};OF.displayName=EF;var RF="DialogTrigger",zF=cs.forwardRef(((e,t)=>{const{__scopeDialog:n,...a}=e,r=PF(RF,n),s=Gy(t,r.triggerRef);return vs.jsx(Xy.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":rB(r.open),...a,ref:s,onClick:By(e.onClick,r.onOpenToggle)})}));zF.displayName=RF;var FF="DialogPortal",[BF,UF]=LF(FF,{forceMount:void 0}),WF=e=>{const{__scopeDialog:t,forceMount:n,children:a,container:r}=e,s=PF(FF,t);return vs.jsx(BF,{scope:t,forceMount:n,children:cs.Children.map(a,(e=>vs.jsx(hv,{present:n||s.open,children:vs.jsx(pv,{asChild:!0,container:r,children:e})})))})};WF.displayName=FF;var GF="DialogOverlay",VF=cs.forwardRef(((e,t)=>{const n=UF(GF,e.__scopeDialog),{forceMount:a=n.forceMount,...r}=e,s=PF(GF,e.__scopeDialog);return s.modal?vs.jsx(hv,{present:a||s.open,children:vs.jsx(qF,{...r,ref:t})}):null}));VF.displayName=GF;var HF=qy("DialogOverlay.RemoveScroll"),qF=cs.forwardRef(((e,t)=>{const{__scopeDialog:n,...a}=e,r=PF(GF,n);return vs.jsx(KD,{as:HF,allowPinchZoom:!0,shards:[r.contentRef],children:vs.jsx(Xy.div,{"data-state":rB(r.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})})),$F="DialogContent",YF=cs.forwardRef(((e,t)=>{const n=UF($F,e.__scopeDialog),{forceMount:a=n.forceMount,...r}=e,s=PF($F,e.__scopeDialog);return vs.jsx(hv,{present:a||s.open,children:s.modal?vs.jsx(QF,{...r,ref:t}):vs.jsx(KF,{...r,ref:t})})}));YF.displayName=$F;var QF=cs.forwardRef(((e,t)=>{const n=PF($F,e.__scopeDialog),a=cs.useRef(null),r=Gy(t,n.contentRef,a);return cs.useEffect((()=>{const e=a.current;if(e)return cD(e)}),[]),vs.jsx(JF,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:By(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),null==(t=n.triggerRef.current)||t.focus()})),onPointerDownOutside:By(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()})),onFocusOutside:By(e.onFocusOutside,(e=>e.preventDefault()))})})),KF=cs.forwardRef(((e,t)=>{const n=PF($F,e.__scopeDialog),a=cs.useRef(!1),r=cs.useRef(!1);return vs.jsx(JF,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,i;null==(s=e.onCloseAutoFocus)||s.call(e,t),t.defaultPrevented||(a.current||null==(i=n.triggerRef.current)||i.focus(),t.preventDefault()),a.current=!1,r.current=!1},onInteractOutside:t=>{var s,i;null==(s=e.onInteractOutside)||s.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));const o=t.target;(null==(i=n.triggerRef.current)?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}})})),JF=cs.forwardRef(((e,t)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:r,onCloseAutoFocus:s,...i}=e,o=PF($F,n),l=cs.useRef(null),c=Gy(t,l);return MT(),vs.jsxs(vs.Fragment,{children:[vs.jsx(LT,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:r,onUnmountAutoFocus:s,children:vs.jsx(ov,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":rB(o.open),...i,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),vs.jsxs(vs.Fragment,{children:[vs.jsx(lB,{titleId:o.titleId}),vs.jsx(cB,{contentRef:l,descriptionId:o.descriptionId})]})]})})),ZF="DialogTitle",XF=cs.forwardRef(((e,t)=>{const{__scopeDialog:n,...a}=e,r=PF(ZF,n);return vs.jsx(Xy.h2,{id:r.titleId,...a,ref:t})}));XF.displayName=ZF;var eB="DialogDescription",tB=cs.forwardRef(((e,t)=>{const{__scopeDialog:n,...a}=e,r=PF(eB,n);return vs.jsx(Xy.p,{id:r.descriptionId,...a,ref:t})}));tB.displayName=eB;var nB="DialogClose",aB=cs.forwardRef(((e,t)=>{const{__scopeDialog:n,...a}=e,r=PF(nB,n);return vs.jsx(Xy.button,{type:"button",...a,ref:t,onClick:By(e.onClick,(()=>r.onOpenChange(!1)))})}));function rB(e){return e?"open":"closed"}aB.displayName=nB;var sB="DialogTitleWarning",[iB,oB]=function(e,t){const n=cs.createContext(t),a=e=>{const{children:t,...a}=e,r=cs.useMemo((()=>a),Object.values(a));return vs.jsx(n.Provider,{value:r,children:t})};return a.displayName=e+"Provider",[a,function(a){const r=cs.useContext(n);if(r)return r;if(void 0!==t)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}]}(sB,{contentName:$F,titleName:ZF,docsSlug:"dialog"}),lB=({titleId:e})=>{const t=oB(sB),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return cs.useEffect((()=>{if(e){document.getElementById(e)}}),[n,e]),null},cB=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${oB("DialogDescriptionWarning").contentName}}.`;return cs.useEffect((()=>{var n;const a=null==(n=e.current)?void 0:n.getAttribute("aria-describedby");if(t&&a){document.getElementById(t)}}),[n,e,t]),null},dB=OF,uB=zF,fB=WF,mB=VF,pB=YF,hB=XF,gB=tB,xB=aB;const yB=dB,vB=uB,bB=fB,wB=xB,jB=cs.forwardRef((({className:e,...t},n)=>vs.jsx(mB,{ref:n,className:fN("fixed inset-0 z-100 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t})));jB.displayName=mB.displayName;const NB=cs.forwardRef((({className:e,children:t,...n},a)=>vs.jsxs(bB,{children:[vs.jsx(jB,{}),vs.jsxs(pB,{ref:a,className:fN("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg max-h-[85vh] translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg overflow-y-auto",e),...n,children:[vs.jsx("div",{className:"overflow-y-auto pr-1",children:t}),vs.jsxs(xB,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[vs.jsx(yj,{className:"h-4 w-4"}),vs.jsx("span",{className:"sr-only",children:"Close"})]})]})]})));NB.displayName=pB.displayName;const CB=({className:e,...t})=>vs.jsx("div",{className:fN("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});CB.displayName="DialogHeader";const SB=({className:e,...t})=>vs.jsx("div",{className:fN("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});SB.displayName="DialogFooter";const kB=cs.forwardRef((({className:e,...t},n)=>vs.jsx(hB,{ref:n,className:fN("text-lg  leading-none tracking-tight",e),...t})));kB.displayName=hB.displayName;const MB=cs.forwardRef((({className:e,...t},n)=>vs.jsx(gB,{ref:n,className:fN("text-sm text-muted-foreground",e),...t})));MB.displayName=gB.displayName;var _B=cs.forwardRef(((e,t)=>vs.jsx(Xy.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null==(n=e.onMouseDown)||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));_B.displayName="Label";var IB=_B;const AB=fb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),EB=cs.forwardRef((({className:e,...t},n)=>vs.jsx(IB,{ref:n,className:fN(AB(),e),...t})));EB.displayName=IB.displayName;const LB=cs.forwardRef((({className:e,type:t,...n},a)=>vs.jsx("input",{type:t,className:fN("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...n})));LB.displayName="Input";const TB=cs.forwardRef((({className:e,...t},n)=>vs.jsx("textarea",{className:fN("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t})));function DB(e,[t,n]){return Math.min(n,Math.max(t,e))}function PB(e){const t=cs.useRef({value:e,previous:e});return cs.useMemo((()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous)),[e])}TB.displayName="Textarea";var OB=[" ","Enter","ArrowUp","ArrowDown"],RB=[" ","Enter"],zB="Select",[FB,BB,UB]=Zy(zB),[WB,GB]=Vy(zB,[UB,sS]),VB=sS(),[HB,qB]=WB(zB),[$B,YB]=WB(zB),QB=e=>{const{__scopeSelect:t,children:n,open:a,defaultOpen:r,onOpenChange:s,value:i,defaultValue:o,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:f,required:m,form:p}=e,h=VB(t),[g,x]=cs.useState(null),[y,v]=cs.useState(null),[b,w]=cs.useState(!1),j=ST(c),[N,C]=yv({prop:a,defaultProp:r??!1,onChange:s,caller:zB}),[S,k]=yv({prop:i,defaultProp:o,onChange:l,caller:zB}),M=cs.useRef(null),_=!g||(p||!!g.closest("form")),[I,A]=cs.useState(new Set),E=Array.from(I).map((e=>e.props.value)).join(";");return vs.jsx(wS,{...h,children:vs.jsxs(HB,{required:m,scope:t,trigger:g,onTriggerChange:x,valueNode:y,onValueNodeChange:v,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:SN(),value:S,onValueChange:k,open:N,onOpenChange:C,dir:j,triggerPointerDownPosRef:M,disabled:f,children:[vs.jsx(FB.Provider,{scope:t,children:vs.jsx($B,{scope:e.__scopeSelect,onNativeOptionAdd:cs.useCallback((e=>{A((t=>new Set(t).add(e)))}),[]),onNativeOptionRemove:cs.useCallback((e=>{A((t=>{const n=new Set(t);return n.delete(e),n}))}),[]),children:n})}),_?vs.jsxs(OU,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:u,value:S,onChange:e=>k(e.target.value),disabled:f,form:p,children:[void 0===S?vs.jsx("option",{value:""}):null,Array.from(I)]},E):null]})})};QB.displayName=zB;var KB="SelectTrigger",JB=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,disabled:a=!1,...r}=e,s=VB(n),i=qB(KB,n),o=i.disabled||a,l=Gy(t,i.onTriggerChange),c=BB(n),d=cs.useRef("touch"),[u,f,m]=zU((e=>{const t=c().filter((e=>!e.disabled)),n=t.find((e=>e.value===i.value)),a=FU(t,e,n);void 0!==a&&i.onValueChange(a.value)})),p=e=>{o||(i.onOpenChange(!0),m()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return vs.jsx(jS,{asChild:!0,...s,children:vs.jsx(Xy.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":RU(i.value)?"":void 0,...r,ref:l,onClick:By(r.onClick,(e=>{e.currentTarget.focus(),"mouse"!==d.current&&p(e)})),onPointerDown:By(r.onPointerDown,(e=>{d.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(p(e),e.preventDefault())})),onKeyDown:By(r.onKeyDown,(e=>{const t=""!==u.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||f(e.key),t&&" "===e.key||OB.includes(e.key)&&(p(),e.preventDefault())}))})})}));JB.displayName=KB;var ZB="SelectValue",XB=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,className:a,style:r,children:s,placeholder:i="",...o}=e,l=qB(ZB,n),{onValueNodeHasChildrenChange:c}=l,d=void 0!==s,u=Gy(t,l.onValueNodeChange);return mv((()=>{c(d)}),[c,d]),vs.jsx(Xy.span,{...o,ref:u,style:{pointerEvents:"none"},children:RU(l.value)?vs.jsx(vs.Fragment,{children:i}):s})}));XB.displayName=ZB;var eU=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,children:a,...r}=e;return vs.jsx(Xy.span,{"aria-hidden":!0,...r,ref:t,children:a||"▼"})}));eU.displayName="SelectIcon";var tU=e=>vs.jsx(pv,{asChild:!0,...e});tU.displayName="SelectPortal";var nU="SelectContent",aU=cs.forwardRef(((e,t)=>{const n=qB(nU,e.__scopeSelect),[a,r]=cs.useState();if(mv((()=>{r(new DocumentFragment)}),[]),!n.open){const t=a;return t?Sg.createPortal(vs.jsx(sU,{scope:e.__scopeSelect,children:vs.jsx(FB.Slot,{scope:e.__scopeSelect,children:vs.jsx("div",{children:e.children})})}),t):null}return vs.jsx(lU,{...e,ref:t})}));aU.displayName=nU;var rU=10,[sU,iU]=WB(nU),oU=qy("SelectContent.RemoveScroll"),lU=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,position:a="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:i,side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:m,sticky:p,hideWhenDetached:h,avoidCollisions:g,...x}=e,y=qB(nU,n),[v,b]=cs.useState(null),[w,j]=cs.useState(null),N=Gy(t,(e=>b(e))),[C,S]=cs.useState(null),[k,M]=cs.useState(null),_=BB(n),[I,A]=cs.useState(!1),E=cs.useRef(!1);cs.useEffect((()=>{if(v)return cD(v)}),[v]),MT();const L=cs.useCallback((e=>{const[t,...n]=_().map((e=>e.ref.current)),[a]=n.slice(-1),r=document.activeElement;for(const s of e){if(s===r)return;if(null==s||s.scrollIntoView({block:"nearest"}),s===t&&w&&(w.scrollTop=0),s===a&&w&&(w.scrollTop=w.scrollHeight),null==s||s.focus(),document.activeElement!==r)return}}),[_,w]),T=cs.useCallback((()=>L([C,v])),[L,C,v]);cs.useEffect((()=>{I&&T()}),[I,T]);const{onOpenChange:D,triggerPointerDownPosRef:P}=y;cs.useEffect((()=>{if(v){let e={x:0,y:0};const t=t=>{var n,a;e={x:Math.abs(Math.round(t.pageX)-((null==(n=P.current)?void 0:n.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(a=P.current)?void 0:a.y)??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():v.contains(n.target)||D(!1),document.removeEventListener("pointermove",t),P.current=null};return null!==P.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}}),[v,D,P]),cs.useEffect((()=>{const e=()=>D(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}}),[D]);const[O,R]=zU((e=>{const t=_().filter((e=>!e.disabled)),n=t.find((e=>e.ref.current===document.activeElement)),a=FU(t,e,n);a&&setTimeout((()=>a.ref.current.focus()))})),z=cs.useCallback(((e,t,n)=>{const a=!E.current&&!n;(void 0!==y.value&&y.value===t||a)&&(S(e),a&&(E.current=!0))}),[y.value]),F=cs.useCallback((()=>null==v?void 0:v.focus()),[v]),B=cs.useCallback(((e,t,n)=>{const a=!E.current&&!n;(void 0!==y.value&&y.value===t||a)&&M(e)}),[y.value]),U="popper"===a?dU:cU,W=U===dU?{side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:m,sticky:p,hideWhenDetached:h,avoidCollisions:g}:{};return vs.jsx(sU,{scope:n,content:v,viewport:w,onViewportChange:j,itemRefCallback:z,selectedItem:C,onItemLeave:F,itemTextRefCallback:B,focusSelectedItem:T,selectedItemText:k,position:a,isPositioned:I,searchRef:O,children:vs.jsx(KD,{as:oU,allowPinchZoom:!0,children:vs.jsx(LT,{asChild:!0,trapped:y.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:By(r,(e=>{var t;null==(t=y.trigger)||t.focus({preventScroll:!0}),e.preventDefault()})),children:vs.jsx(ov,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:vs.jsx(U,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:e=>e.preventDefault(),...x,...W,onPlaced:()=>A(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:By(x.onKeyDown,(e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||R(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=_().filter((e=>!e.disabled)).map((e=>e.ref.current));if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,a=t.indexOf(n);t=t.slice(a+1)}setTimeout((()=>L(t))),e.preventDefault()}}))})})})})})}));lU.displayName="SelectContentImpl";var cU=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,onPlaced:a,...r}=e,s=qB(nU,n),i=iU(nU,n),[o,l]=cs.useState(null),[c,d]=cs.useState(null),u=Gy(t,(e=>d(e))),f=BB(n),m=cs.useRef(!1),p=cs.useRef(!0),{viewport:h,selectedItem:g,selectedItemText:x,focusSelectedItem:y}=i,v=cs.useCallback((()=>{if(s.trigger&&s.valueNode&&o&&c&&h&&g&&x){const e=s.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),n=s.valueNode.getBoundingClientRect(),r=x.getBoundingClientRect();if("rtl"!==s.dir){const a=r.left-t.left,s=n.left-a,i=e.left-s,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-rU,u=DB(s,[rU,Math.max(rU,d-c)]);o.style.minWidth=l+"px",o.style.left=u+"px"}else{const a=t.right-r.right,s=window.innerWidth-n.right-a,i=window.innerWidth-e.right-s,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-rU,u=DB(s,[rU,Math.max(rU,d-c)]);o.style.minWidth=l+"px",o.style.right=u+"px"}const i=f(),l=window.innerHeight-2*rU,d=h.scrollHeight,u=window.getComputedStyle(c),p=parseInt(u.borderTopWidth,10),y=parseInt(u.paddingTop,10),v=parseInt(u.borderBottomWidth,10),b=p+y+d+parseInt(u.paddingBottom,10)+v,w=Math.min(5*g.offsetHeight,b),j=window.getComputedStyle(h),N=parseInt(j.paddingTop,10),C=parseInt(j.paddingBottom,10),S=e.top+e.height/2-rU,k=l-S,M=g.offsetHeight/2,_=p+y+(g.offsetTop+M),I=b-_;if(_<=S){const e=i.length>0&&g===i[i.length-1].ref.current;o.style.bottom="0px";const t=c.clientHeight-h.offsetTop-h.offsetHeight,n=_+Math.max(k,M+(e?C:0)+t+v);o.style.height=n+"px"}else{const e=i.length>0&&g===i[0].ref.current;o.style.top="0px";const t=Math.max(S,p+h.offsetTop+(e?N:0)+M)+I;o.style.height=t+"px",h.scrollTop=_-S+h.offsetTop}o.style.margin=`${rU}px 0`,o.style.minHeight=w+"px",o.style.maxHeight=l+"px",null==a||a(),requestAnimationFrame((()=>m.current=!0))}}),[f,s.trigger,s.valueNode,o,c,h,g,x,s.dir,a]);mv((()=>v()),[v]);const[b,w]=cs.useState();mv((()=>{c&&w(window.getComputedStyle(c).zIndex)}),[c]);const j=cs.useCallback((e=>{e&&!0===p.current&&(v(),null==y||y(),p.current=!1)}),[v,y]);return vs.jsx(uU,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:j,children:vs.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:vs.jsx(Xy.div,{...r,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})}));cU.displayName="SelectItemAlignedPosition";var dU=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,align:a="start",collisionPadding:r=rU,...s}=e,i=VB(n);return vs.jsx(NS,{...i,...s,ref:t,align:a,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})}));dU.displayName="SelectPopperPosition";var[uU,fU]=WB(nU,{}),mU="SelectViewport",pU=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,nonce:a,...r}=e,s=iU(mU,n),i=fU(mU,n),o=Gy(t,s.onViewportChange),l=cs.useRef(0);return vs.jsxs(vs.Fragment,{children:[vs.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),vs.jsx(FB.Slot,{scope:n,children:vs.jsx(Xy.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:By(r.onScroll,(e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:a}=i;if((null==a?void 0:a.current)&&n){const e=Math.abs(l.current-t.scrollTop);if(e>0){const a=window.innerHeight-2*rU,r=parseFloat(n.style.minHeight),s=parseFloat(n.style.height),i=Math.max(r,s);if(i<a){const r=i+e,s=Math.min(a,r),o=r-s;n.style.height=s+"px","0px"===n.style.bottom&&(t.scrollTop=o>0?o:0,n.style.justifyContent="flex-end")}}}l.current=t.scrollTop}))})})]})}));pU.displayName=mU;var hU="SelectGroup",[gU,xU]=WB(hU),yU=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,...a}=e,r=SN();return vs.jsx(gU,{scope:n,id:r,children:vs.jsx(Xy.div,{role:"group","aria-labelledby":r,...a,ref:t})})}));yU.displayName=hU;var vU="SelectLabel",bU=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,...a}=e,r=xU(vU,n);return vs.jsx(Xy.div,{id:r.id,...a,ref:t})}));bU.displayName=vU;var wU="SelectItem",[jU,NU]=WB(wU),CU=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,value:a,disabled:r=!1,textValue:s,...i}=e,o=qB(wU,n),l=iU(wU,n),c=o.value===a,[d,u]=cs.useState(s??""),[f,m]=cs.useState(!1),p=Gy(t,(e=>{var t;return null==(t=l.itemRefCallback)?void 0:t.call(l,e,a,r)})),h=SN(),g=cs.useRef("touch"),x=()=>{r||(o.onValueChange(a),o.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return vs.jsx(jU,{scope:n,value:a,disabled:r,textId:h,isSelected:c,onItemTextChange:cs.useCallback((e=>{u((t=>t||((null==e?void 0:e.textContent)??"").trim()))}),[]),children:vs.jsx(FB.ItemSlot,{scope:n,value:a,disabled:r,textValue:d,children:vs.jsx(Xy.div,{role:"option","aria-labelledby":h,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...i,ref:p,onFocus:By(i.onFocus,(()=>m(!0))),onBlur:By(i.onBlur,(()=>m(!1))),onClick:By(i.onClick,(()=>{"mouse"!==g.current&&x()})),onPointerUp:By(i.onPointerUp,(()=>{"mouse"===g.current&&x()})),onPointerDown:By(i.onPointerDown,(e=>{g.current=e.pointerType})),onPointerMove:By(i.onPointerMove,(e=>{var t;g.current=e.pointerType,r?null==(t=l.onItemLeave)||t.call(l):"mouse"===g.current&&e.currentTarget.focus({preventScroll:!0})})),onPointerLeave:By(i.onPointerLeave,(e=>{var t;e.currentTarget===document.activeElement&&(null==(t=l.onItemLeave)||t.call(l))})),onKeyDown:By(i.onKeyDown,(e=>{var t;""!==(null==(t=l.searchRef)?void 0:t.current)&&" "===e.key||(RB.includes(e.key)&&x()," "===e.key&&e.preventDefault())}))})})})}));CU.displayName=wU;var SU="SelectItemText",kU=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,className:a,style:r,...s}=e,i=qB(SU,n),o=iU(SU,n),l=NU(SU,n),c=YB(SU,n),[d,u]=cs.useState(null),f=Gy(t,(e=>u(e)),l.onItemTextChange,(e=>{var t;return null==(t=o.itemTextRefCallback)?void 0:t.call(o,e,l.value,l.disabled)})),m=null==d?void 0:d.textContent,p=cs.useMemo((()=>vs.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value)),[l.disabled,l.value,m]),{onNativeOptionAdd:h,onNativeOptionRemove:g}=c;return mv((()=>(h(p),()=>g(p))),[h,g,p]),vs.jsxs(vs.Fragment,{children:[vs.jsx(Xy.span,{id:l.textId,...s,ref:f}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Sg.createPortal(s.children,i.valueNode):null]})}));kU.displayName=SU;var MU="SelectItemIndicator",_U=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,...a}=e;return NU(MU,n).isSelected?vs.jsx(Xy.span,{"aria-hidden":!0,...a,ref:t}):null}));_U.displayName=MU;var IU="SelectScrollUpButton",AU=cs.forwardRef(((e,t)=>{const n=iU(IU,e.__scopeSelect),a=fU(IU,e.__scopeSelect),[r,s]=cs.useState(!1),i=Gy(t,a.onScrollButtonChange);return mv((()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[n.viewport,n.isPositioned]),r?vs.jsx(TU,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null}));AU.displayName=IU;var EU="SelectScrollDownButton",LU=cs.forwardRef(((e,t)=>{const n=iU(EU,e.__scopeSelect),a=fU(EU,e.__scopeSelect),[r,s]=cs.useState(!1),i=Gy(t,a.onScrollButtonChange);return mv((()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;s(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[n.viewport,n.isPositioned]),r?vs.jsx(TU,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null}));LU.displayName=EU;var TU=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,onAutoScroll:a,...r}=e,s=iU("SelectScrollButton",n),i=cs.useRef(null),o=BB(n),l=cs.useCallback((()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)}),[]);return cs.useEffect((()=>()=>l()),[l]),mv((()=>{var e;const t=o().find((e=>e.ref.current===document.activeElement));null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})}),[o]),vs.jsx(Xy.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:By(r.onPointerDown,(()=>{null===i.current&&(i.current=window.setInterval(a,50))})),onPointerMove:By(r.onPointerMove,(()=>{var e;null==(e=s.onItemLeave)||e.call(s),null===i.current&&(i.current=window.setInterval(a,50))})),onPointerLeave:By(r.onPointerLeave,(()=>{l()}))})})),DU=cs.forwardRef(((e,t)=>{const{__scopeSelect:n,...a}=e;return vs.jsx(Xy.div,{"aria-hidden":!0,...a,ref:t})}));DU.displayName="SelectSeparator";var PU="SelectArrow";cs.forwardRef(((e,t)=>{const{__scopeSelect:n,...a}=e,r=VB(n),s=qB(PU,n),i=iU(PU,n);return s.open&&"popper"===i.position?vs.jsx(CS,{...r,...a,ref:t}):null})).displayName=PU;var OU=cs.forwardRef((({__scopeSelect:e,value:t,...n},a)=>{const r=cs.useRef(null),s=Gy(a,r),i=PB(t);return cs.useEffect((()=>{const e=r.current;if(!e)return;const n=window.HTMLSelectElement.prototype,a=Object.getOwnPropertyDescriptor(n,"value").set;if(i!==t&&a){const n=new Event("change",{bubbles:!0});a.call(e,t),e.dispatchEvent(n)}}),[i,t]),vs.jsx(Xy.select,{...n,style:{...vv,...n.style},ref:s,defaultValue:t})}));function RU(e){return""===e||void 0===e}function zU(e){const t=tv(e),n=cs.useRef(""),a=cs.useRef(0),r=cs.useCallback((e=>{const r=n.current+e;t(r),function e(t){n.current=t,window.clearTimeout(a.current),""!==t&&(a.current=window.setTimeout((()=>e("")),1e3))}(r)}),[t]),s=cs.useCallback((()=>{n.current="",window.clearTimeout(a.current)}),[]);return cs.useEffect((()=>()=>window.clearTimeout(a.current)),[]),[n,r,s]}function FU(e,t,n){const a=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,r=n?e.indexOf(n):-1;let s=(i=e,o=Math.max(r,0),i.map(((e,t)=>i[(o+t)%i.length])));var i,o;1===a.length&&(s=s.filter((e=>e!==n)));const l=s.find((e=>e.textValue.toLowerCase().startsWith(a.toLowerCase())));return l!==n?l:void 0}OU.displayName="SelectBubbleInput";var BU=JB,UU=eU,WU=tU,GU=aU,VU=pU,HU=bU,qU=CU,$U=kU,YU=_U,QU=AU,KU=LU,JU=DU;const ZU=QB,XU=yU,eW=XB,tW=cs.forwardRef((({className:e,children:t,...n},a)=>vs.jsxs(BU,{ref:a,className:fN("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,vs.jsx(UU,{asChild:!0,children:vs.jsx(Mb,{className:"h-4 w-4 opacity-50"})})]})));tW.displayName=BU.displayName;const nW=cs.forwardRef((({className:e,...t},n)=>vs.jsx(QU,{ref:n,className:fN("flex cursor-default items-center justify-center py-1",e),...t,children:vs.jsx(Ab,{className:"h-4 w-4"})})));nW.displayName=QU.displayName;const aW=cs.forwardRef((({className:e,...t},n)=>vs.jsx(KU,{ref:n,className:fN("flex cursor-default items-center justify-center py-1",e),...t,children:vs.jsx(Mb,{className:"h-4 w-4"})})));aW.displayName=KU.displayName;const rW=cs.forwardRef((({className:e,children:t,position:n="popper",...a},r)=>vs.jsx(WU,{children:vs.jsxs(GU,{ref:r,className:fN("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...a,children:[vs.jsx(nW,{}),vs.jsx(VU,{className:fN("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),vs.jsx(aW,{})]})})));rW.displayName=GU.displayName;cs.forwardRef((({className:e,...t},n)=>vs.jsx(HU,{ref:n,className:fN("py-1.5 pl-8 pr-2 text-sm ",e),...t}))).displayName=HU.displayName;const sW=cs.forwardRef((({className:e,children:t,...n},a)=>vs.jsxs(qU,{ref:a,className:fN("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[vs.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:vs.jsx(YU,{children:vs.jsx(kb,{className:"h-4 w-4"})})}),vs.jsx($U,{children:t})]})));sW.displayName=qU.displayName;function iW({isOpen:e,onClose:t,onConversationCreated:n}){const[a,r]=cs.useState(""),[s,i]=cs.useState(""),[o,l]=cs.useState(null),[c,d]=cs.useState(""),[u,f]=cs.useState(!1),[m,p]=cs.useState([]),{toast:h}=Fy(),{t:g}=mk(),x=vy(),{data:y=[],isLoading:v}=Sy({queryKey:["/api/channel-connections"],staleTime:3e5}),b=y.filter((e=>("whatsapp_unofficial"===e.channelType||"whatsapp"===e.channelType)&&"active"===e.status));cs.useEffect((()=>{b.length>0&&!o&&l(b[0].id)}),[b,o]);const w=ky({mutationFn:async e=>{const t=await _y("POST","/api/conversations/whatsapp/initiate",e);if(!t.ok){const e=await t.json();throw new Error(e.message||g("new_conversation.create_failed","Failed to create conversation"))}return t.json()},onSuccess:e=>{h({title:g("common.success","Success"),description:g("new_conversation.success_message","WhatsApp conversation initiated successfully.")}),x.invalidateQueries({queryKey:["/api/conversations"]}),n&&n(e.conversation),j(),t()},onError:e=>{h({title:g("common.error","Error"),description:e.message||g("new_conversation.create_error","Failed to create conversation. Please try again."),variant:"destructive"})},onSettled:()=>{f(!1)}}),j=()=>{r(""),i(""),d(""),p([]),l(b.length>0?b[0].id:null)},N=()=>{u||(j(),t())};return vs.jsx(yB,{open:e,onOpenChange:e=>!e&&N(),children:vs.jsxs(NB,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto z-[9999]",children:[vs.jsxs(CB,{children:[vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx(yw,{className:"w-5 h-5 text-green-600"}),g("new_conversation.title","Start New WhatsApp Conversation")]}),vs.jsx(MB,{children:g("new_conversation.description","Enter contact details to initiate a new WhatsApp conversation.")})]}),m.length>0&&vs.jsx(pR,{variant:"destructive",children:vs.jsx(gR,{children:vs.jsx("ul",{className:"list-disc list-inside space-y-1",children:m.map(((e,t)=>vs.jsx("li",{children:e},t)))})})}),!v&&0===b.length&&vs.jsx(pR,{children:vs.jsx(gR,{children:g("new_conversation.no_connections","No active WhatsApp connections found. Please connect WhatsApp in Settings first.")})}),vs.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e=[];a.trim()||e.push(g("new_conversation.name_required","Contact name is required")),s.trim()?s.replace(/\D/g,"").length<10&&e.push(g("new_conversation.phone_invalid","Please enter a valid phone number with at least 10 digits")):e.push(g("new_conversation.phone_required","Phone number is required"));return o||e.push(g("new_conversation.connection_required","Please select a WhatsApp connection")),0===b.length&&e.push(g("new_conversation.no_connections","No active WhatsApp connections found. Please connect WhatsApp in Settings first.")),p(e),0===e.length})())if(o)try{f(!0),await w.mutateAsync({name:a.trim(),phoneNumber:s.trim(),channelConnectionId:o,initialMessage:c.trim()||void 0})}catch(t){}else h({title:g("new_conversation.no_connection_selected","No Connection Selected"),description:g("new_conversation.select_connection","Please select a WhatsApp connection."),variant:"destructive"})},className:"space-y-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs(EB,{htmlFor:"name",className:"flex items-center gap-2",children:[vs.jsx(uj,{className:"w-4 h-4"}),g("new_conversation.contact_name_required","Contact Name *")]}),vs.jsx(LB,{id:"name",value:a,onChange:e=>{r(e.target.value),m.length>0&&p([])},placeholder:g("new_conversation.enter_contact_name","Enter contact's full name"),required:!0,disabled:u})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs(EB,{htmlFor:"phone",className:"flex items-center gap-2",children:[vs.jsx(Mw,{className:"w-4 h-4"}),g("new_conversation.phone_number_required","Phone Number *")]}),vs.jsx(LB,{id:"phone",type:"tel",value:s,onChange:e=>{const t=e.target.value.replace(/[^\d\s\-\(\)\+]/g,"");i(t),m.length>0&&p([])},placeholder:g("new_conversation.enter_phone_number","Enter phone number (e.g., +1234567890)"),required:!0,disabled:u}),vs.jsx("p",{className:"text-sm text-gray-500",children:g("new_conversation.include_country_code","Include country code for international numbers")})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs(EB,{htmlFor:"connection",className:"flex items-center gap-2",children:[vs.jsx("i",{className:"ri-whatsapp-line w-4 h-4 text-green-600"}),g("new_conversation.whatsapp_connection_required","WhatsApp Connection *")]}),v?vs.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[vs.jsx(uw,{className:"w-4 h-4 animate-spin"}),g("new_conversation.loading_connections","Loading connections...")]}):b.length>0?vs.jsxs(ZU,{value:(null==o?void 0:o.toString())||"",onValueChange:e=>l(parseInt(e)),disabled:u,children:[vs.jsx(tW,{children:vs.jsx(eW,{placeholder:g("new_conversation.select_whatsapp_connection","Select WhatsApp connection")})}),vs.jsx(rW,{children:b.map((e=>vs.jsx(sW,{value:e.id.toString(),children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.accountName||`WhatsApp ${e.id}`,vs.jsxs("span",{className:"text-xs text-gray-500",children:["(",e.channelType,")"]})]})},e.id)))})]}):vs.jsx("div",{className:"p-2 border rounded bg-gray-50 text-gray-600 text-sm",children:g("new_conversation.no_connections_available","No active WhatsApp connections available")})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs(EB,{htmlFor:"message",className:"flex items-center gap-2",children:[vs.jsx(yw,{className:"w-4 h-4"}),g("new_conversation.initial_message_optional","Initial Message (Optional)")]}),vs.jsx(TB,{id:"message",value:c,onChange:e=>d(e.target.value),placeholder:g("new_conversation.enter_initial_message","Enter an optional first message to send..."),rows:3,disabled:u}),vs.jsx("p",{className:"text-sm text-gray-500",children:g("new_conversation.initial_message_help","This message will be sent immediately after creating the conversation")})]}),vs.jsxs(SB,{className:"flex flex-col sm:flex-row gap-2",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:N,disabled:u,className:"w-full sm:w-auto",children:g("common.cancel","Cancel")}),vs.jsx(lk,{type:"submit",disabled:u||0===b.length,className:"w-full sm:w-auto btn-brand-primary",children:u?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),g("new_conversation.creating","Creating...")]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(yw,{className:"w-4 h-4 mr-2"}),g("new_conversation.start_conversation","Start Conversation")]})})]})]})]})})}cs.forwardRef((({className:e,...t},n)=>vs.jsx(JU,{ref:n,className:fN("-mx-1 my-1 h-px bg-muted",e),...t}))).displayName=JU.displayName;const oW=cs.createContext(void 0);function lW({children:e}){const[t,n]=cs.useState(!1),[a,r]=cs.useState(!1),[s,i]=cs.useState(!0),[o,l]=cs.useState(!1),[c,d]=cs.useState(!1);cs.useEffect((()=>{const e=()=>{const e=window.innerWidth,t=e<768,a=e>=768&&e<1024,s=e>=1024;n(t),r(a),i(s),t?(l(!1),d(!1)):s&&(l(!0),d(!1))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const u=e=>{l(e),e&&t&&d(!1)},f=e=>{d(e),e&&t&&l(!1)},m={isMobile:t,isTablet:a,isDesktop:s,isConversationListOpen:o,isContactDetailsOpen:c,setConversationListOpen:u,setContactDetailsOpen:f,toggleConversationList:()=>{u(!o)},toggleContactDetails:()=>{f(!c)},closeAllPanels:()=>{l(!1),d(!1)}};return vs.jsx(oW.Provider,{value:m,children:e})}function cW(){const e=cs.useContext(oW);if(void 0===e)throw new Error("useMobileLayout must be used within a MobileLayoutProvider");return e}function dW(){const{conversations:e,isLoading:t,activeConversationId:n,setActiveConversationId:a,activeChannelId:r,setActiveChannelId:s}=cR(),{t:i}=mk(),[o,l]=cs.useState("all"),[c,d]=cs.useState(""),[u,f]=cs.useState(!1),{user:m}=xT(),{canViewAllConversations:p,canOnlyViewAssignedConversations:h}=rR(),{isMobile:g,isTablet:x,toggleConversationList:y,setConversationListOpen:v}=cW(),{data:b}=Sy({queryKey:["/api/users/me"]});cs.useEffect((()=>{h()&&!(null==m?void 0:m.isSuperAdmin)&&l("assigned_to_me")}),[h,null==m?void 0:m.isSuperAdmin]);if(t)return vs.jsxs("div",{className:`\n        ${g?"w-full":"w-72 lg:w-80"}\n        border-r border-gray-200 bg-white flex-shrink-0 overflow-hidden flex flex-col\n        ${g?"h-full":""}\n      `,children:[vs.jsx("div",{className:"p-3 sm:p-4 border-b border-gray-200",children:vs.jsx("h2",{className:"text-lg font-medium",children:i("inbox.conversations","Conversations")})}),vs.jsx("div",{className:"flex-1 flex items-center justify-center",children:vs.jsxs("div",{className:"animate-pulse flex flex-col w-full p-3 sm:p-4 space-y-3",children:[vs.jsx("div",{className:"h-10 sm:h-12 bg-gray-200 rounded w-full"}),vs.jsx("div",{className:"h-16 sm:h-20 bg-gray-200 rounded w-full"}),vs.jsx("div",{className:"h-16 sm:h-20 bg-gray-200 rounded w-full"}),vs.jsx("div",{className:"h-16 sm:h-20 bg-gray-200 rounded w-full"})]})})]});const w=e.filter((e=>null===r||e.channelId===r)).filter((e=>!(h()&&!(null==m?void 0:m.isSuperAdmin)&&e.assignedToUserId!==(null==b?void 0:b.id))&&("all"===o||("assigned"===o?null!==e.assignedToUserId:"unassigned"===o?null===e.assignedToUserId:"assigned_to_me"!==o||e.assignedToUserId===(null==b?void 0:b.id))))).filter((e=>{var t,n,a;if(!c)return!0;const r=c.toLowerCase().trim(),s=e.contact;return!!s&&(!!(null==(t=s.name)?void 0:t.toLowerCase().includes(r))||(!!(null==(n=s.phone)?void 0:n.toLowerCase().includes(r))||(!!(null==(a=s.email)?void 0:a.toLowerCase().includes(r))||!(!s.tags||!Array.isArray(s.tags))&&s.tags.some((e=>e.toLowerCase().includes(r))))))})).sort(((e,t)=>new Date(t.lastMessageAt).getTime()-new Date(e.lastMessageAt).getTime()));return vs.jsxs("div",{className:`\n        ${g?"w-full":"w-72 lg:w-80"}\n        border-r border-gray-200 bg-white flex-shrink-0 overflow-hidden flex flex-col\n        ${g?"h-full":""}\n      `,onClick:e=>e.stopPropagation(),children:[vs.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-200 flex justify-between items-center",children:[vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[g&&vs.jsx("button",{onClick:y,className:"p-2 rounded-md hover:bg-gray-100 lg:hidden","aria-label":i("inbox.close_conversations","Close conversations"),children:vs.jsx("i",{className:"ri-close-line text-lg text-gray-600"})}),vs.jsx("h2",{className:"text-lg font-medium truncate",children:i("inbox.conversations","Conversations")})]}),r&&vs.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[vs.jsx("span",{className:"truncate",children:i("inbox.filtered_by_channel","Filtered by channel")}),vs.jsx("button",{onClick:()=>s(null),className:"ml-2 p-1 text-primary-600 hover:text-primary-800 rounded-full min-h-[44px] min-w-[44px] flex items-center justify-center",title:i("inbox.clear_channel_filter","Clear channel filter"),children:vs.jsx("i",{className:"ri-close-line text-xs"})})]})]}),vs.jsx("div",{className:"flex space-x-2 ml-2",children:vs.jsx("button",{className:"p-2 sm:p-1.5 rounded-md bg-primary-50 text-primary-600 hover:bg-primary-100 min-h-[44px] min-w-[44px] flex items-center justify-center",onClick:()=>f(!0),title:i("inbox.start_new_conversation","Start new conversation"),children:vs.jsx("i",{className:"ri-user-add-line text-lg sm:text-base"})})})]}),vs.jsx("div",{className:"p-3 sm:p-4 border-b border-gray-200 flex items-center bg-gray-50",children:vs.jsxs("div",{className:"relative flex-1",children:[vs.jsx("input",{type:"search",placeholder:i("inbox.search_conversations_enhanced","Search by name, tag, phone, email..."),className:"w-full pl-9 pr-4 py-3 sm:py-2 rounded-lg border border-gray-300 bg-white text-base sm:text-sm",value:c,onChange:e=>d(e.target.value)}),vs.jsx("i",{className:"ri-search-line absolute left-3 top-3.5 sm:top-2.5 text-gray-400"})]})}),vs.jsxs("div",{className:"flex px-3 sm:px-4 py-2 border-b border-gray-200 space-x-1 overflow-x-auto scrollbar-hide",children:[(p()||(null==m?void 0:m.isSuperAdmin))&&vs.jsx("button",{className:"px-3 sm:px-4 py-2 sm:py-1 rounded-full text-sm font-medium whitespace-nowrap min-h-[23px] sm:min-h-auto flex items-center "+("all"===o?"bg-primary-100 text-primary-700":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),onClick:()=>l("all"),children:i("inbox.filter.all","All")}),(p()||(null==m?void 0:m.isSuperAdmin))&&vs.jsx("button",{className:"px-3 sm:px-4 py-2 sm:py-1 rounded-full text-sm font-medium whitespace-nowrap min-h-[23px] sm:min-h-auto flex items-center "+("unassigned"===o?"bg-primary-100 text-primary-700":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),onClick:()=>l("unassigned"),children:i("inbox.filter.unassigned","Unassigned")}),vs.jsx("button",{className:"px-3 sm:px-4 py-2 sm:py-1 rounded-full text-sm font-medium whitespace-nowrap min-h-[23px] sm:min-h-auto flex items-center "+("assigned_to_me"===o?"bg-primary-100 text-primary-700":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),onClick:()=>l("assigned_to_me"),children:i("inbox.filter.my_chats","My Chats")}),(p()||(null==m?void 0:m.isSuperAdmin))&&vs.jsx("button",{className:"px-3 sm:px-4 py-2 sm:py-1 rounded-full text-sm font-medium whitespace-nowrap min-h-[23px] sm:min-h-auto flex items-center "+("assigned"===o?"bg-primary-100 text-primary-700":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),onClick:()=>l("assigned"),children:i("inbox.filter.assigned","Assigned")})]}),vs.jsx("div",{className:"overflow-y-auto flex-1 scrollbar-hide",children:0===w.length?vs.jsx("div",{className:"p-4 sm:p-6 text-center text-gray-500",children:vs.jsx("div",{className:"text-sm sm:text-base",children:i("inbox.no_conversations_found","No conversations found")})}):w.map((e=>vs.jsx(AF,{conversation:e,isActive:e.id===n,onClick:()=>{return t=e.id,a(t),void(g&&v(!1));var t},searchQuery:c},e.id)))}),vs.jsx(iW,{isOpen:u,onClose:()=>f(!1),onConversationCreated:e=>{e&&e.id&&(a(e.id),g&&v(!1))}})]})}function uW(e){const[t,n]=cs.useState(!1),{toast:a}=Fy(),{t:r}=mk(),s=vy(),{data:i,isLoading:o,error:l,refetch:c}=Sy({queryKey:["bot-status",e],queryFn:async()=>{if(!e)throw new Error("No conversation ID provided");const t=await _y("GET",`/api/conversations/${e}/bot-status`);if(!t.ok)throw new Error("Failed to fetch bot status");return t.json()},enabled:!!e,staleTime:3e4,refetchOnWindowFocus:!1}),d=(null==i?void 0:i.botDisabled)??!1,u=cs.useCallback((async()=>{if(e&&!t){n(!0);try{const t=!d,n=await _y("PATCH",`/api/conversations/${e}/bot-status`,{botDisabled:t});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to update bot status")}const i=await n.json();s.setQueryData(["bot-status",e],i),s.invalidateQueries({queryKey:["/api/conversations"]}),a({title:t?r("bot.disabled.title","Bot Disabled"):r("bot.enabled.title","Bot Enabled"),description:t?r("bot.disabled.description","Automated responses are now disabled for this conversation"):r("bot.enabled.description","Automated responses are now enabled for this conversation"),variant:"default"})}catch(i){a({title:r("common.error","Error"),description:i.message||r("bot.toggle.error","Failed to update bot status"),variant:"destructive"})}finally{n(!1)}}}),[e,d,t,s,a,r]),f=cs.useCallback((async()=>{if(e&&!t){n(!0);try{const t=await _y("PATCH",`/api/conversations/${e}/bot-status`,{botDisabled:!1});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to enable bot")}const n=await t.json();s.setQueryData(["bot-status",e],n),s.invalidateQueries({queryKey:["/api/conversations"]}),a({title:r("bot.enabled.title","Bot Enabled"),description:r("bot.enabled.description","Automated responses are now enabled for this conversation"),variant:"default"})}catch(i){a({title:r("common.error","Error"),description:i.message||r("bot.enable.error","Failed to enable bot"),variant:"destructive"})}finally{n(!1)}}}),[e,t,s,a,r]),m=cs.useCallback((async(i,o)=>{if(e&&!t){n(!0);try{const t=await _y("PATCH",`/api/conversations/${e}/bot-status`,{botDisabled:!0,disableDuration:i,disableReason:o});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to disable bot")}const n=await t.json();s.setQueryData(["bot-status",e],n),s.invalidateQueries({queryKey:["/api/conversations"]});const l=i?r("bot.disabled.with_duration",`for ${i} minutes`):r("bot.disabled.indefinitely","indefinitely");a({title:r("bot.disabled.title","Bot Disabled"),description:r("bot.disabled.description_with_duration",`Automated responses are now disabled ${l}`),variant:"default"})}catch(l){a({title:r("common.error","Error"),description:l.message||r("bot.disable.error","Failed to disable bot"),variant:"destructive"})}finally{n(!1)}}}),[e,t,s,a,r]);return cs.useEffect((()=>()=>{n(!1)}),[e]),{isBotDisabled:d,isLoading:o,error:l,toggleBot:u,enableBot:f,disableBot:m,isToggling:t}}const fW=({quotedMessageId:e,isInbound:t,onQuotedMessageClick:n})=>{const[a,r]=cs.useState(null),[s,i]=cs.useState(!0),[o,l]=cs.useState(null),{t:c}=mk();cs.useEffect((()=>{(async()=>{if(e)try{i(!0),l(null);const t=await fetch(`/api/messages/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch quoted message");const n=await t.json();r(n)}catch(pBe){l(pBe.message)}finally{i(!1)}else i(!1)})()}),[e]);return s?vs.jsxs("div",{className:`quoted-message-preview ${t?"inbound":"outbound"} loading`,children:[vs.jsx("div",{className:"quoted-border"}),vs.jsxs("div",{className:"quoted-content",children:[vs.jsx("div",{className:"quoted-sender",children:vs.jsx("div",{className:"loading-shimmer h-3 w-16 rounded"})}),vs.jsx("div",{className:"quoted-text",children:vs.jsx("div",{className:"loading-shimmer h-4 w-32 rounded"})})]})]}):o||!a?vs.jsxs("div",{className:`quoted-message-preview ${t?"inbound":"outbound"} error`,children:[vs.jsx("div",{className:"quoted-border"}),vs.jsxs("div",{className:"quoted-content",children:[vs.jsx("div",{className:"quoted-sender text-gray-500",children:c("quoted_message.deleted_sender","Unknown")}),vs.jsx("div",{className:"quoted-text text-gray-500 italic",children:c("quoted_message.deleted_message","This message was deleted")})]})]}):vs.jsxs("div",{className:`quoted-message-preview ${t?"inbound":"outbound"} ${n?"clickable":""}`,onClick:()=>{n&&n(e)},children:[vs.jsx("div",{className:"quoted-border"}),vs.jsxs("div",{className:"quoted-content",children:[vs.jsx("div",{className:"quoted-sender",children:a?"outbound"===a.direction?"user"===a.senderType?c("quoted_message.you","You"):c("quoted_message.assistant","Assistant"):"contact"===a.senderType?c("quoted_message.contact","Contact"):c("quoted_message.unknown_sender","Unknown"):c("quoted_message.unknown_sender","Unknown")}),vs.jsx("div",{className:"quoted-text",children:(()=>{if(!a)return"";const{type:e,content:t}=a;switch(e){case"image":return c("quoted_message.image","📷 Image");case"video":return c("quoted_message.video","🎥 Video");case"audio":return c("quoted_message.audio","🎵 Audio");case"document":return c("quoted_message.document","📄 Document");default:if(t&&"string"==typeof t&&t.trim().length>0){const e=SF(t),n=_F(e);return n.length>50?n.substring(0,50)+"...":n}return c("quoted_message.message","Message")}})()})]})]})};function mW({message:e,mediaUrl:t,onDownload:n,isDownloading:a=!1}){const{t:r}=mk(),[s,i]=cs.useState(!1),[o,l]=cs.useState(null),[c,d]=cs.useState(!0);cs.useEffect((()=>{t?u(t):d(!1)}),[t]);const u=async e=>{try{const t=(await fetch(e,{method:"HEAD"})).headers.get("content-length");if(t){const e=parseInt(t,10);l(e),i(e<=512e3)}else i(!0)}catch(t){i(!0)}finally{d(!1)}},f=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},m=e=>{var t;switch(null==(t=e.split(".").pop())?void 0:t.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":case"webp":return"Image";case"mp4":case"avi":case"mov":case"wmv":return"Video";case"mp3":case"wav":case"ogg":case"aac":return"Audio";case"pdf":return"PDF";case"doc":case"docx":return"Document";default:return"File"}};return(()=>{const{type:i="text",content:l}=e;if(c)return vs.jsx("div",{className:"flex items-center justify-center h-32 w-full bg-gray-100 rounded-md",children:vs.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin"}),vs.jsx("span",{className:"text-sm",children:r("media.checking_size","Checking file size...")})]})});switch(i){case"image":return s&&t?vs.jsxs("div",{className:"message-media",children:[vs.jsx("div",{className:"relative rounded-md overflow-hidden bg-gray-100 mb-2",children:vs.jsx("img",{src:t,alt:r("message_bubble.image_message","Image message"),className:"max-w-full rounded-md object-contain",style:{maxHeight:"240px"},onError:e=>{var t,n;e.currentTarget.style.display="none",null==(t=e.currentTarget.parentElement)||t.classList.add("flex","items-center","justify-center","h-40");const a=document.createElement("i");a.className="ri-image-line text-4xl text-gray-400",null==(n=e.currentTarget.parentElement)||n.appendChild(a)}})}),l&&vs.jsx("p",{className:"whitespace-pre-wrap text-sm",children:l})]}):vs.jsxs("div",{className:"message-media",children:[vs.jsxs("div",{className:"flex flex-col items-center justify-center h-40 w-full bg-gray-200 rounded-md relative group",children:[vs.jsx("i",{className:"ri-image-line text-4xl text-gray-400 mb-2"}),vs.jsxs("div",{className:"text-center mb-3",children:[vs.jsx("p",{className:"text-sm text-gray-600 font-medium",children:m(t||"")}),o&&vs.jsx("p",{className:"text-xs text-gray-500",children:f(o)})]}),vs.jsx("button",{onClick:n,className:"flex items-center gap-2 bg-sky-500 hover:bg-sky-600 text-white py-2 px-4 rounded-md text-sm transition-all",disabled:a,children:a?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin"}),vs.jsx("span",{children:r("message_bubble.downloading","Downloading...")})]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Hb,{className:"h-4 w-4"}),vs.jsx("span",{children:r("message_bubble.download_image","Download Image")})]})})]}),l&&vs.jsx("p",{className:"whitespace-pre-wrap text-sm mt-2",children:l})]});case"video":return s&&t?vs.jsxs("div",{className:"message-media",children:[vs.jsxs("video",{controls:!0,className:"max-w-full rounded-md",style:{maxHeight:"240px"},children:[vs.jsx("source",{src:t,type:"video/mp4"}),r("message_bubble.video_not_supported","Your browser does not support the video element.")]}),l&&vs.jsx("p",{className:"whitespace-pre-wrap text-sm mt-2",children:l})]}):vs.jsxs("div",{className:"message-media",children:[vs.jsxs("div",{className:"flex flex-col items-center justify-center h-40 w-full bg-gray-200 rounded-md",children:[vs.jsx("i",{className:"ri-video-line text-4xl text-gray-400 mb-2"}),vs.jsxs("div",{className:"text-center mb-3",children:[vs.jsx("p",{className:"text-sm text-gray-600 font-medium",children:m(t||"")}),o&&vs.jsx("p",{className:"text-xs text-gray-500",children:f(o)})]}),vs.jsx("button",{onClick:n,className:"flex items-center gap-2 bg-sky-500 hover:bg-sky-600 text-white py-2 px-4 rounded-md text-sm transition-all",disabled:a,children:a?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin"}),vs.jsx("span",{children:r("message_bubble.downloading","Downloading...")})]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Hb,{className:"h-4 w-4"}),vs.jsx("span",{children:r("message_bubble.download_video","Download Video")})]})})]}),l&&vs.jsx("p",{className:"whitespace-pre-wrap text-sm mt-2",children:l})]});case"audio":if(s&&t){const e=(e=>{var t;switch(null==(t=e.split(".").pop())?void 0:t.toLowerCase()){case"mp3":default:return"audio/mpeg";case"ogg":return"audio/ogg";case"webm":return"audio/webm";case"aac":return"audio/aac";case"m4a":return"audio/mp4";case"wav":return"audio/wav"}})(t);return vs.jsxs("div",{className:"message-media",children:[vs.jsxs("audio",{controls:!0,className:"max-w-full",children:[vs.jsx("source",{src:t,type:e}),vs.jsx("source",{src:t,type:"audio/mpeg"}),vs.jsx("source",{src:t,type:"audio/ogg"}),vs.jsx("source",{src:t,type:"audio/webm"}),r("message_bubble.audio_not_supported","Your browser does not support the audio element.")]}),l&&vs.jsx("p",{className:"whitespace-pre-wrap text-sm mt-2",children:l})]})}return vs.jsx("div",{className:"message-media",children:vs.jsxs("div",{className:"flex items-center justify-between rounded-md bg-gray-100 p-3 w-full",children:[vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("i",{className:"ri-file-music-line text-xl mr-3 text-gray-500"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm font-medium text-gray-700",children:m(t||"")}),o&&vs.jsx("p",{className:"text-xs text-gray-500",children:f(o)})]})]}),vs.jsx("button",{onClick:n,className:"flex items-center gap-1 bg-sky-500 hover:bg-sky-600 text-white py-1 px-3 rounded-md text-xs transition-all ml-3",disabled:a,children:a?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"h-3 w-3 animate-spin"}),vs.jsx("span",{children:r("message_bubble.loading","Loading...")})]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Hb,{className:"h-3 w-3"}),vs.jsx("span",{children:r("message_bubble.download","Download")})]})})]})});case"document":return vs.jsxs("div",{className:"flex items-center justify-between rounded-md bg-gray-100 p-3 w-full",children:[vs.jsxs("div",{className:"flex items-center max-w-[70%]",children:[vs.jsx("i",{className:"ri-file-text-line text-xl mr-3 text-gray-500 flex-shrink-0"}),vs.jsxs("div",{className:"overflow-hidden",children:[vs.jsx("p",{className:"text-sm font-medium text-gray-700 truncate",children:l||r("message_bubble.document","Document")}),o&&vs.jsx("p",{className:"text-xs text-gray-500",children:f(o)})]})]}),t?vs.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 bg-sky-500 hover:bg-sky-600 text-white py-1 px-3 rounded-md text-xs transition-all ml-2 flex-shrink-0",children:[vs.jsx("i",{className:"ri-external-link-line"}),vs.jsx("span",{children:r("message_bubble.open","Open")})]}):vs.jsx("button",{onClick:n,className:"flex items-center gap-1 bg-sky-500 hover:bg-sky-600 text-white py-1 px-3 rounded-md text-xs transition-all ml-2 flex-shrink-0",disabled:a,children:a?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"h-3 w-3 animate-spin"}),vs.jsx("span",{children:r("message_bubble.loading","Loading...")})]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Hb,{className:"h-3 w-3"}),vs.jsx("span",{children:r("message_bubble.download","Download")})]})})]});case"sticker":return s&&t?vs.jsx("div",{className:"message-media",children:vs.jsx("img",{src:t,alt:r("message_bubble.sticker","Sticker"),className:"max-w-[120px] max-h-[120px]"})}):vs.jsx("div",{className:"message-media",children:vs.jsxs("div",{className:"flex items-center justify-between rounded-md bg-gray-100 p-3 w-full",children:[vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("i",{className:"ri-sticky-note-line text-xl mr-3 text-gray-500"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm font-medium text-gray-700",children:r("message_bubble.sticker","Sticker")}),o&&vs.jsx("p",{className:"text-xs text-gray-500",children:f(o)})]})]}),vs.jsx("button",{onClick:n,className:"flex items-center gap-1 bg-sky-500 hover:bg-sky-600 text-white py-1 px-3 rounded-md text-xs transition-all ml-3",disabled:a,children:a?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"h-3 w-3 animate-spin"}),vs.jsx("span",{children:r("message_bubble.loading","Loading...")})]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Hb,{className:"h-3 w-3"}),vs.jsx("span",{children:r("message_bubble.download","Download")})]})})]})});default:return vs.jsx("p",{className:"whitespace-pre-wrap",children:l})}})()}function pW({participantJid:e,participantName:t,connectionId:n,size:a="sm",className:r,avatarUrl:s,enableAutoFetch:i=!0}){const{profilePictureUrl:o}=function(e,t){Fy();const{data:n,isLoading:a,error:r,refetch:s}=Sy({queryKey:["participant-profile-picture",e,t],queryFn:async()=>{if(!e||!t)return null;try{const n=await _y("GET",`/api/whatsapp/participant-picture/${e}/${encodeURIComponent(t)}`),a=await n.json();return a.success?a.url:null}catch(n){return null}},enabled:!!e&&!!t,staleTime:3e5,cacheTime:18e5,retry:1});return{profilePictureUrl:n,isLoading:a,error:r,refetch:s}}(i&&!s?n:void 0,i&&!s?e:void 0),l=s||o||"",c=t||e.split("@")[0];return vs.jsxs(yF,{className:fN({sm:"h-6 w-6 text-xs",md:"h-8 w-8 text-sm",lg:"h-10 w-10 text-base"}[a],r),children:[vs.jsx(vF,{src:l,alt:c}),vs.jsx(bF,{className:"bg-green-100 text-green-700 text-xs",children:((e,t)=>{if(e)return e.split(" ").map((e=>e[0])).join("").toUpperCase().substring(0,2);if(t){return t.split("@")[0].substring(0,2)}return"??"})(t,e)})]})}function hW({message:e,contact:t,channelType:n,onReply:a,onQuotedMessageClick:r,conversation:s}){var i;const[o,l]=cs.useState(!1),[c,d]=cs.useState(null),[u,f]=cs.useState(!1),[m,p]=cs.useState(!1),[h,g]=cs.useState(!1),[x,y]=cs.useState(null),[v,b]=cs.useState(!1),[w,j]=cs.useState([]),[N,C]=cs.useState(!1),{toast:S}=Fy(),{t:k}=mk(),{branding:M}=jT(),{activeConversationId:_}=cR(),I="inbound"===e.direction,A=e.isFromBot||null===e.senderId&&null===e.senderType&&"outbound"===e.direction,E=e.sentAt||((null==(i=e.metadata)?void 0:i.timestamp)?new Date(e.metadata.timestamp):e.createdAt),L=Dz(new Date(E),"h:mm a");cs.useEffect((()=>{(async()=>{if(_){b(!0);try{const e=await fetch(`/api/conversations/${_}/capabilities`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json();y(t.capabilities)}else y({supportsReply:!0,supportsDelete:!0,supportsQuotedMessages:!1,replyFormat:"mention"})}catch(e){y({supportsReply:!0,supportsDelete:!0,supportsQuotedMessages:!1,replyFormat:"mention"})}finally{b(!1)}}})()}),[_]),cs.useEffect((()=>{(async()=>{if("email"===n&&e.id){C(!0);try{const t=await fetch(`/api/v1/messages/${e.id}/email-attachments`);if(t.ok){const e=await t.json();j(e.attachments||[])}}catch(t){}finally{C(!1)}}})()}),[n,e.id]);const T=async()=>{if(!o){l(!0);try{const t=await fetch(`/api/messages/${e.id}/download-media`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.error||k("message_bubble.download_failed","Failed to download media"))}const n=await t.json();d(n.mediaUrl),S({title:k("message_bubble.media_downloaded","Media downloaded"),description:k("message_bubble.download_success","Media has been downloaded successfully"),variant:"default"})}catch(pBe){const t=pBe instanceof Error?pBe.message:k("message_bubble.download_failed","Failed to download media");S({title:k("message_bubble.download_failed_title","Download failed"),description:t,variant:"destructive"})}finally{l(!1)}}},D=()=>{a&&a(e)},{canReply:P,canDelete:O}=(()=>{if(!x)return{canReply:!1,canDelete:!1};return{canReply:x.supportsReply,canDelete:x.supportsDelete&&!((null==x?void 0:x.deleteTimeLimit)&&Date.now()-new Date(e.sentAt||e.createdAt).getTime()>60*x.deleteTimeLimit*1e3)}})(),R=(()=>{try{if(!e.metadata)return null;let t;return t="string"==typeof e.metadata?JSON.parse(e.metadata):e.metadata,t.isQuotedMessage&&t.quotedMessageId?{isQuotedMessage:!0,quotedMessageId:t.quotedMessageId}:null}catch(t){return null}})(),z=()=>{g(!0)},F=()=>"whatsapp"===n||"whatsapp_unofficial"===n,B=()=>!0===(null==s?void 0:s.isGroup),U=e=>{if(!e)return"";if(e.name&&e.name!==e.phone)return e.name;const t=e.phone;return t&&t.length>10?`+${t.slice(0,-10)} ${t.slice(-10,-7)} ${t.slice(-7,-4)} ${t.slice(-4)}`:t||e.jid||k("groups.unknown_participant","Unknown Participant")},W=()=>{const{type:t="text",content:n,channelType:a}=e,r=e.mediaUrl||c||(()=>{if(!e.metadata)return null;try{return("string"==typeof e.metadata?JSON.parse(e.metadata):e.metadata).mediaUrl||null}catch(t){return null}})();if("email"===a&&(e.emailHtml||e.emailPlainText||e.emailSubject))return(()=>{const{emailSubject:t,emailHtml:n,emailPlainText:a,emailFrom:r,emailTo:s,emailInReplyTo:i,emailReferences:o}=e,l=i||o&&o.length>0,c=t&&(t.startsWith("Re:")||t.startsWith("RE:"));return vs.jsxs("div",{className:"email-message",children:[l&&vs.jsxs("div",{className:"email-thread-indicator mb-2 flex items-center gap-2 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[vs.jsx(hw,{className:"w-3 h-3"}),vs.jsx(vb,{className:"w-3 h-3"}),vs.jsx("span",{children:c?k("message_bubble.email.reply_in_thread","Reply in thread"):k("message_bubble.email.part_of_thread","Part of email thread")})]}),t&&vs.jsx("div",{className:"email-subject mb-2 pb-2 border-b border-gray-200",children:vs.jsxs("h4",{className:"font-semibold text-sm text-gray-800 flex items-center gap-2",children:[c&&vs.jsx(Tw,{className:"w-4 h-4 text-blue-600"}),t]})}),vs.jsxs("div",{className:"email-headers mb-3 text-xs text-gray-600 space-y-1",children:[r&&vs.jsxs("div",{children:[vs.jsxs("span",{className:"font-medium",children:[k("message_bubble.email.from","From"),":"]})," ",r]}),s&&vs.jsxs("div",{children:[vs.jsxs("span",{className:"font-medium",children:[k("message_bubble.email.to","To"),":"]})," ",s]}),l&&i&&vs.jsxs("div",{className:"text-blue-600",children:[vs.jsxs("span",{className:"font-medium",children:[k("message_bubble.email.in_reply_to","In reply to"),":"]})," ",i]})]}),vs.jsx("div",{className:"email-content",children:n?vs.jsx("div",{className:"email-html-content prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:n.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}):a?vs.jsx("div",{className:"whitespace-pre-wrap break-words text-sm",children:a}):vs.jsx("div",{className:"whitespace-pre-wrap break-words text-sm",children:SF(e.content||"")})}),w.length>0&&vs.jsxs("div",{className:"email-attachments mt-3 pt-3 border-t border-gray-200",children:[vs.jsxs("div",{className:"text-xs text-gray-600 mb-2 font-medium",children:[vs.jsx("i",{className:"ri-attachment-line mr-1"}),k("message_bubble.email.attachments","Attachments")," (",w.length,")"]}),vs.jsx("div",{className:"space-y-2",children:w.map(((e,t)=>vs.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded text-xs",children:[vs.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[vs.jsx("i",{className:"ri-file-line mr-2 text-gray-500 flex-shrink-0"}),vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsx("div",{className:"font-medium truncate",children:e.filename}),vs.jsxs("div",{className:"text-gray-500",children:[e.contentType," • ",Math.round(e.size/1024),"KB"]})]})]}),vs.jsxs("a",{href:e.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white py-1 px-2 rounded text-xs transition-all ml-2 flex-shrink-0",children:[vs.jsx(Hb,{className:"h-3 w-3"}),vs.jsx("span",{children:k("message_bubble.download","Download")})]})]},t)))})]}),N&&vs.jsx("div",{className:"email-attachments mt-3 pt-3 border-t border-gray-200",children:vs.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[vs.jsx(uw,{className:"h-3 w-3 animate-spin mr-2"}),k("message_bubble.email.loading_attachments","Loading attachments...")]})})]})})();const s=SF(n||"");if(["image","video","audio","document","sticker"].includes(t))return vs.jsx(mW,{message:e,mediaUrl:r,onDownload:T,isDownloading:o});if((i=s)&&[/\*[^*]+\*/,/_[^_]+_/,/~[^~]+~/,/`[^`]+`/,/(https?:\/\/[^\s]+)/].some((e=>e.test(i)))){const e=(e=>{if(!e)return[];const t=/(https?:\/\/[^\s]+)/g,n=[];let a,r=0;for(t.lastIndex=0;null!==(a=t.exec(e));){const s=a.index,i=t.lastIndex;if(s>r){const t=e.substring(r,s);n.push(...kF(t))}const o=a[1];/\.(jpeg|jpg|gif|png)$/i.test(o)?n.push(vs.jsx("div",{className:"mb-2",children:vs.jsx("img",{src:o,alt:"Link preview",className:"max-w-full rounded-md object-contain",style:{maxHeight:"240px"},onError:e=>{e.currentTarget.style.display="none"}})},`img-${n.length}`)):n.push(vs.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all dark:text-blue-400",children:o},`url-${n.length}`)),r=i}if(r<e.length){const t=e.substring(r);n.push(...kF(t))}return 0===n.length?kF(e):n})(s);return vs.jsx("div",{className:"whitespace-pre-wrap break-words",children:e.map(((e,t)=>vs.jsx("span",{children:e},t)))})}return vs.jsx("p",{className:"whitespace-pre-wrap break-words",children:s});var i};if(I){const n=B()&&I?{jid:e.groupParticipantJid,name:e.groupParticipantName,phone:null==(G=e.groupParticipantJid)?void 0:G.split("@")[0]}:null;return vs.jsxs("div",{className:"flex mb-4","data-external-id":e.externalId,children:[vs.jsx("div",{className:"flex-shrink-0 mr-2",children:B()&&n?vs.jsx(pW,{participantJid:n.jid,participantName:n.name,connectionId:null==s?void 0:s.channelId,size:"md",enableAutoFetch:!0}):vs.jsx("img",{src:(null==t?void 0:t.avatarUrl)||`https://ui-avatars.com/api/?name=${encodeURIComponent((null==t?void 0:t.name)||"User")}&background=random`,alt:(null==t?void 0:t.name)||k("message_bubble.contact_avatar","Contact avatar"),className:"w-8 h-8 rounded-full"})}),vs.jsxs("div",{className:"max-w-[75%] md:max-w-[70%]",children:[B()&&n&&vs.jsx("div",{className:"mb-1",children:vs.jsx("span",{className:"text-xs font-medium text-gray-600",children:U(n)})}),vs.jsxs("div",{className:"relative group",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[vs.jsxs("div",{className:"bg-white p-3 rounded-lg chat-bubble-contact shadow-sm",children:[R&&vs.jsx(fW,{quotedMessageId:R.quotedMessageId,isInbound:!0,onQuotedMessageClick:r}),W(),e.status&&"delivered"!==e.status&&vs.jsx("div",{className:"text-right mt-1",children:vs.jsxs("span",{className:"text-xs text-gray-400",children:["read"===e.status&&vs.jsx("i",{className:"ri-eye-line"}),"failed"===e.status&&vs.jsx("i",{className:"ri-error-warning-line text-red-500"})]})})]}),(u||h)&&(P||O)&&vs.jsxs("div",{className:"absolute top-13 right-0 flex items-center gap-1 bg-white rounded-lg shadow-lg border border-gray-200 p-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:[P&&vs.jsx("button",{onClick:D,className:"p-1.5 rounded-md hover:bg-gray-100 text-gray-600 hover:text-blue-600 transition-colors min-h-[32px] min-w-[32px] flex items-center justify-center",title:k("message_bubble.reply","Reply to this message"),"aria-label":k("message_bubble.reply","Reply to this message"),children:vs.jsx(Tw,{className:"h-4 w-4"})}),O&&vs.jsx("button",{onClick:z,className:"p-1.5 rounded-md hover:bg-gray-100 text-gray-600 hover:text-red-600 transition-colors min-h-[32px] min-w-[32px] flex items-center justify-center",title:k("message_bubble.delete","Delete this message"),"aria-label":k("message_bubble.delete","Delete this message"),children:vs.jsx(Zw,{className:"h-4 w-4"})})]})]}),vs.jsx("div",{className:"mt-1 text-xs text-gray-500",children:L})]})]})}var G;return vs.jsxs("div",{className:"flex mb-4 justify-end","data-external-id":e.externalId,children:[vs.jsxs("div",{className:"max-w-[75%] md:max-w-[70%]",children:[vs.jsxs("div",{className:"relative group",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[vs.jsxs("div",{className:"bg-sky-500 p-3 rounded-lg chat-bubble-user text-white shadow-sm",children:[R&&vs.jsx(fW,{quotedMessageId:R.quotedMessageId,isInbound:!1,onQuotedMessageClick:r}),W(),e.status&&"sent"!==e.status&&vs.jsx("div",{className:"text-right mt-1",children:vs.jsxs("span",{className:"text-xs text-sky-100",children:["delivered"===e.status&&vs.jsx("i",{className:"ri-check-double-line"}),"read"===e.status&&vs.jsx("i",{className:"ri-check-double-line font-bold"}),"sending"===e.status&&vs.jsx("i",{className:"ri-time-line"}),"failed"===e.status&&vs.jsx("i",{className:"ri-error-warning-line"})]})})]}),(u||h)&&(P||O)&&vs.jsxs("div",{className:"absolute top-13 left-2 flex items-center gap-1 bg-white rounded-lg shadow-lg border border-gray-200 p-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:[P&&vs.jsx("button",{onClick:D,className:"p-1.5 rounded-md hover:bg-gray-100 text-gray-600 hover:text-blue-600 transition-colors min-h-[32px] min-w-[32px] flex items-center justify-center",title:k("message_bubble.reply","Reply to this message"),"aria-label":k("message_bubble.reply","Reply to this message"),children:vs.jsx(Tw,{className:"h-4 w-4"})}),O&&vs.jsx("button",{onClick:z,className:"p-1.5 rounded-md hover:bg-gray-100 text-gray-600 hover:text-red-600 transition-colors min-h-[32px] min-w-[32px] flex items-center justify-center",title:k("message_bubble.delete","Delete this message"),"aria-label":k("message_bubble.delete","Delete this message"),children:vs.jsx(Zw,{className:"h-4 w-4"})})]})]}),vs.jsx("div",{className:"mt-1 text-xs text-gray-500 text-right",children:L})]}),vs.jsx("div",{className:"flex-shrink-0 ml-2",children:A?vs.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center",children:vs.jsx(IF,{size:16,color:"#7c3aed"})}):"user"===e.senderType?vs.jsx("div",{className:"w-8 h-8 rounded-full bg-sky-200 flex items-center justify-center text-sky-700 font-medium",children:vs.jsx("span",{children:"A"})}):vs.jsx("div",{className:"w-8 h-8 rounded-full bg-sky-100 flex items-center justify-center",children:vs.jsx("i",{className:"ri-customer-service-2-line text-sky-600"})})}),h&&vs.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:vs.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:vs.jsxs("div",{className:"p-6",children:[vs.jsxs("div",{className:"flex items-center mb-4",children:[vs.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:vs.jsx(Zw,{className:"h-5 w-5 text-red-600"})}),vs.jsxs("div",{className:"ml-4",children:[vs.jsx("h3",{className:"text-lg font-medium text-gray-900",children:F()?B()?k("message_bubble.confirm_delete_whatsapp_group_title","Delete Group Message for Everyone"):k("message_bubble.confirm_delete_whatsapp_title","Delete Message for Everyone"):k("message_bubble.confirm_delete_title","Delete Message")}),vs.jsx("p",{className:"text-sm text-gray-500",children:F()?(()=>{if(!e.createdAt)return!1;return Date.now()-new Date(e.createdAt).getTime()>432e4})()?B()?k("message_bubble.confirm_delete_whatsapp_group_old",`This group message is too old to be deleted from WhatsApp (72-minute limit). It will only be deleted from ${M.appName}.`,{appName:M.appName}):k("message_bubble.confirm_delete_whatsapp_old",`This message is too old to be deleted from WhatsApp (72-minute limit). It will only be deleted from ${M.appName}.`,{appName:M.appName}):B()?k("message_bubble.confirm_delete_whatsapp_group_message",`This message will be deleted from both ${M.appName} and all group participants' WhatsApp chats. This action cannot be undone.`,{appName:M.appName}):k("message_bubble.confirm_delete_whatsapp_message",`This message will be deleted from both ${M.appName} and the recipient's WhatsApp chat. This action cannot be undone.`,{appName:M.appName}):k("message_bubble.confirm_delete_message","Are you sure you want to delete this message? This action cannot be undone.")})]})]}),vs.jsx("div",{className:"bg-gray-50 p-3 rounded-md mb-4",children:vs.jsx("p",{className:"text-sm text-gray-700 line-clamp-3",children:SF(e.content||"")||k("message_bubble.media_message","Media message")})}),vs.jsxs("div",{className:"flex justify-end space-x-3",children:[vs.jsx("button",{onClick:()=>{g(!1)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:m,children:k("common.cancel","Cancel")}),vs.jsx("button",{onClick:async()=>{if(e.id){p(!0);try{const t=await fetch(`/api/messages/${e.id}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.error||k("message_bubble.delete_failed","Failed to delete message"))}S({title:k("message_bubble.message_deleted","Message deleted"),description:k("message_bubble.delete_success","Message has been deleted successfully"),variant:"default"}),g(!1)}catch(pBe){const t=pBe instanceof Error?pBe.message:k("message_bubble.delete_failed","Failed to delete message");S({title:k("message_bubble.delete_failed_title","Delete failed"),description:t,variant:"destructive"})}finally{p(!1)}}},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",disabled:m,children:m?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin mr-2"}),k("message_bubble.deleting","Deleting...")]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Zw,{className:"h-4 w-4 mr-2"}),k("message_bubble.delete_confirm","Delete")]})})]})]})})})]})}function gW({conversationId:e,isOpen:t,onClose:n,file:a}){const[r,s]=cs.useState(""),[i,o]=cs.useState(!1),[l,c]=cs.useState(null),{toast:d}=Fy(),{t:u}=mk(),{sendMediaMessage:f}=cR();cs.useEffect((()=>{if(!a)return void c(null);const e=URL.createObjectURL(a);return c(e),()=>{e&&URL.revokeObjectURL(e)}}),[a]);return vs.jsx(yB,{open:t,onOpenChange:e=>!e&&n(),children:vs.jsxs(NB,{className:"sm:max-w-md",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:u("media_upload.title","Send Media")}),vs.jsx(MB,{children:u("media_upload.description","Preview and send media files through WhatsApp")}),vs.jsx(lk,{variant:"ghost",size:"icon",className:"absolute right-2 top-2",onClick:n,children:vs.jsx(yj,{className:"h-4 w-4"})})]}),vs.jsx("div",{className:"flex flex-col gap-4 py-4",children:a?vs.jsxs(vs.Fragment,{children:[vs.jsx("div",{className:"flex justify-center",children:(()=>{if(!a||!l)return null;const e=a.type;return e.startsWith("image/")?vs.jsx("img",{src:l,alt:u("media_upload.image_preview","Image preview"),className:"max-h-64 max-w-full object-contain rounded-lg"}):e.startsWith("video/")?vs.jsx("video",{src:l,controls:!0,className:"max-h-64 max-w-full rounded-lg"}):e.startsWith("audio/")?vs.jsx("audio",{src:l,controls:!0,className:"w-full"}):vs.jsx("div",{className:"flex items-center justify-center p-6 bg-gray-100 rounded-lg w-full",children:vs.jsxs("div",{className:"text-center",children:[vs.jsx("i",{className:"ri-file-line text-4xl text-gray-600 mb-2"}),vs.jsx("p",{className:"text-sm text-gray-600 break-all",children:a.name}),vs.jsx("p",{className:"text-xs text-gray-500 mt-1",children:u("media_upload.file_size_kb","{{size}} KB",{size:(a.size/1024).toFixed(2)})})]})})})()}),vs.jsxs("div",{className:"text-sm text-muted-foreground",children:[vs.jsx("span",{className:"font-medium",children:a.name})," (",u("media_upload.file_size_kb","{{size}} KB",{size:(a.size/1024).toFixed(2)}),")"]}),vs.jsx(TB,{placeholder:u("media_upload.caption_placeholder","Add a caption (optional)"),value:r,onChange:e=>s(e.target.value),className:"min-h-24"})]}):vs.jsx("div",{className:"text-center py-6",children:vs.jsx("p",{className:"text-muted-foreground",children:u("media_upload.no_file_selected","No media file selected")})})}),vs.jsxs(SB,{className:"flex-col sm:flex-row sm:justify-end gap-2",children:[vs.jsx(lk,{variant:"outline",onClick:n,disabled:i,children:u("common.cancel","Cancel")}),vs.jsx(lk,{onClick:async()=>{if(a){o(!0);try{await f(e,a,r),d({title:u("common.success","Success"),description:u("media_upload.sent_successfully","Media message sent successfully")}),n()}catch(t){d({title:u("media_upload.error_sending","Error Sending Media"),description:t.message||u("media_upload.send_failed","Failed to send media message"),variant:"destructive"})}finally{o(!1)}}else d({title:u("common.error","Error"),description:u("media_upload.no_file_selected","No media file selected"),variant:"destructive"})},disabled:!a||i,children:i?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),u("media_upload.sending","Sending...")]}):u("media_upload.send","Send")})]})]})})}function xW(e){return[].concat(e)}function yW(e){return e.startsWith(":")}function vW(e){return NW(e)&&("*"===e||e.length>1&&":>~.+*".includes(e.slice(0,1))||CW(e))}function bW(e,t){return(NW(t)||"number"==typeof t)&&!jW(e)&&!yW(e)&&!wW(e)}function wW(e){return e.startsWith("@media")}function jW(e){return"--"===e}function NW(e){return e+""===e}function CW(e){return NW(e)&&(e.startsWith("&")||yW(e))}function SW(e,t=""){return e.filter(Boolean).join(t)}function kW(e,t){let n=0;if(0===t.length)return n.toString();for(let a=0;a<t.length;a++){n=(n<<5)-n+t.charCodeAt(a),n&=n}return`${e??"cl"}_${n.toString(36)}`}function MW(e,t){return`${e}:${t}`}var _W=class e{constructor(e,t,n,a){this.sheet=e,this.property=t,this.value=n,this.selector=a,this.property=t,this.value=n,this.joined=MW(t,n);const r=this.selector.preconditions.concat(this.selector.postconditions);this.hash=this.selector.hasConditions?this.selector.scopeClassName:kW(this.sheet.name,this.joined),this.key=SW([this.joined,r,this.hash])}toString(){let t=IW(this.selector.preconditions,{right:this.hash});return t=IW(this.selector.postconditions,{left:t}),`${t} {${e.genRule(this.property,this.value)}}`}static genRule(e,t){return MW(e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),function(e,t){return"content"===e?`"${t}"`:t}(e,t))+";"}};function IW(e,{left:t="",right:n=""}={}){const a=e.reduce(((e,t)=>yW(t)?e+t:CW(t)?e+t.slice(1):SW([e,t]," ")),t);return SW([a,(r=n,r?`.${r}`:"")]," ");var r}var AW,EW,LW=class e{constructor(e,t=null,{preconditions:n,postconditions:a}={}){this.sheet=e,this.preconditions=[],this.scopeClassName=null,this.scopeName=null,this.postconditions=[],this.preconditions=n?xW(n):[],this.postconditions=a?xW(a):[],this.setScope(t)}setScope(e){return e?(this.scopeClassName||(this.scopeName=e,this.scopeClassName=kW(this.sheet.name,e+this.sheet.count)),this):this}get hasConditions(){return this.preconditions.length>0||this.postconditions.length>0}addScope(t){return new e(this.sheet,t,{preconditions:this.preconditions,postconditions:this.postconditions})}addPrecondition(t){return new e(this.sheet,this.scopeClassName,{postconditions:this.postconditions,preconditions:this.preconditions.concat(t)})}addPostcondition(t){return new e(this.sheet,this.scopeClassName,{preconditions:this.preconditions,postconditions:this.postconditions.concat(t)})}createRule(e,t){return new _W(this.sheet,e,t,this)}},TW=class{constructor(e,t){this.name=e,this.rootNode=t,this.storedStyles={},this.storedClasses={},this.style="",this.count=0,this.id=`flairup-${e}`,this.styleTag=this.createStyleTag()}getStyle(){return this.style}append(e){var t,n;this.style=(t=this.style,n=e,t?`${t}\n${n}`:n)}apply(){this.count++,this.styleTag&&(this.styleTag.innerHTML=this.style)}isApplied(){return!!this.styleTag}createStyleTag(){if("undefined"==typeof document||this.isApplied()||null===this.rootNode)return this.styleTag;const e=document.createElement("style");return e.type="text/css",e.id=this.id,(this.rootNode??document.head).appendChild(e),e}addRule(e){const t=this.storedClasses[e.key];return NW(t)?t:(this.storedClasses[e.key]=e.hash,this.storedStyles[e.hash]=[e.property,e.value],this.append(e.toString()),e.hash)}};function DW(e,t){for(const n in e)t(n.trim(),e[n])}function PW(...e){return SW(e.reduce(((e,t)=>(t instanceof Set?e.push(...t):"string"==typeof t?e.push(t):Array.isArray(t)?e.push(PW(...t)):"object"==typeof t&&Object.entries(t).forEach((([t,n])=>{n&&e.push(t)})),e)),[])," ").trim()}function OW(e,t){const n=new TW(e,t);return{create:function(e){const t={};return RW(n,e,new LW(n)).forEach((([e,a,r])=>{zW(n,a,r).forEach((n=>{!function(e,n){t[e]=t[e]??new Set,t[e].add(n)}(e,n)}))})),n.apply(),t},getStyle:n.getStyle.bind(n),isApplied:n.isApplied.bind(n)}}function RW(e,t,n){const a=[];return DW(t,((r,s)=>{if(vW(r))return RW(e,s,n.addPrecondition(r)).forEach((e=>a.push(e)));a.push([r,t[r],n.addScope(r)])})),a}function zW(e,t,n){const a=new Set;return DW(t,((t,r)=>{let s=[];if(vW(t))s=zW(e,r,n.addPostcondition(t));else if(function(e){return"."===e}(t))s=xW(r);else if(wW(t))s=function(e,t,n,a){e.append(n+" {");const r=zW(e,t,a);return e.append("}"),r}(e,r,t,n);else if(jW(t))s=function(e,t,n){const a=new Set,r=[];if(DW(t,((t,s)=>{if(bW(t,s))return void r.push(_W.genRule(t,s));FW(zW(e,s??{},n),a)})),!n.scopeClassName)return a;if(r.length){const t=r.join(" ");e.append(`${IW(n.preconditions,{right:n.scopeClassName})} {${t}}`)}return a.add(n.scopeClassName),a}(e,r,n);else if(bW(t,r)){const s=n.createRule(t,r);e.addRule(s),a.add(s.hash)}return FW(s,a)})),a}function FW(e,t){return e.forEach((e=>t.add(e))),t}function BW(){return BW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},BW.apply(this,arguments)}function UW(e,t){return(UW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WW(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}function GW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function VW(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return GW(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GW(e,t):void 0}}(e))||t){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function HW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return"."+e})).join("")}(EW=AW||(AW={})).hiddenOnSearch="epr-hidden-on-search",EW.searchActive="epr-search-active",EW.hidden="epr-hidden",EW.visible="epr-visible",EW.active="epr-active",EW.emoji="epr-emoji",EW.category="epr-emoji-category",EW.label="epr-emoji-category-label",EW.categoryContent="epr-emoji-category-content",EW.emojiHasVariations="epr-emoji-has-variations",EW.scrollBody="epr-body",EW.emojiList="epr-emoji-list",EW.external="__EmojiPicker__",EW.emojiPicker="EmojiPickerReact",EW.open="epr-open",EW.vertical="epr-vertical",EW.horizontal="epr-horizontal",EW.variationPicker="epr-emoji-variation-picker",EW.darkTheme="epr-dark-theme",EW.autoTheme="epr-auto-theme";var qW=OW("epr",null),$W={display:"none",opacity:"0",pointerEvents:"none",visibility:"hidden",overflow:"hidden"},YW=qW.create({hidden:BW({".":AW.hidden},$W)}),QW=cs.memo((function(){return cs.createElement("style",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:qW.getStyle()}})})),KW=qW.create({".epr-main":{":has(input:not(:placeholder-shown))":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},hiddenOnSearch:BW({".":AW.hiddenOnSearch},$W)},":has(input(:placeholder-shown))":{visibleOnSearchOnly:$W}},hiddenOnReactions:{transition:"all 0.5s ease-in-out"},".epr-reactions":{hiddenOnReactions:{height:"0px",width:"0px",opacity:"0",pointerEvents:"none",overflow:"hidden"}},".EmojiPickerReact:not(.epr-search-active)":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"},"&.epr-active":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},visibleOnSearchOnly:BW({".":"epr-visible-on-search-only"},$W)}});function JW(e,t){var n,a;return{".epr-dark-theme":(n={},n[e]=t,n),".epr-auto-theme":(a={},a[e]={"@media (prefers-color-scheme: dark)":t},a)}}function ZW(e,t){var n,a,r=null!=(n=e.customEmojis)?n:[],s=null!=(a=t.customEmojis)?a:[];return e.open===t.open&&e.emojiVersion===t.emojiVersion&&e.reactionsDefaultOpen===t.reactionsDefaultOpen&&e.searchPlaceHolder===t.searchPlaceHolder&&e.searchPlaceholder===t.searchPlaceholder&&e.defaultSkinTone===t.defaultSkinTone&&e.skinTonesDisabled===t.skinTonesDisabled&&e.autoFocusSearch===t.autoFocusSearch&&e.emojiStyle===t.emojiStyle&&e.theme===t.theme&&e.suggestedEmojisMode===t.suggestedEmojisMode&&e.lazyLoadEmojis===t.lazyLoadEmojis&&e.className===t.className&&e.height===t.height&&e.width===t.width&&e.style===t.style&&e.searchDisabled===t.searchDisabled&&e.skinTonePickerLocation===t.skinTonePickerLocation&&r.length===s.length}var XW,eG,tG,nG,aG,rG,sG,iG,oG,lG,cG,dG,uG,fG=["1f44d","2764-fe0f","1f603","1f622","1f64f","1f44e","1f621"];(eG=XW||(XW={})).RECENT="recent",eG.FREQUENT="frequent",(nG=tG||(tG={})).NATIVE="native",nG.APPLE="apple",nG.TWITTER="twitter",nG.GOOGLE="google",nG.FACEBOOK="facebook",(rG=aG||(aG={})).DARK="dark",rG.LIGHT="light",rG.AUTO="auto",(iG=sG||(sG={})).NEUTRAL="neutral",iG.LIGHT="1f3fb",iG.MEDIUM_LIGHT="1f3fc",iG.MEDIUM="1f3fd",iG.MEDIUM_DARK="1f3fe",iG.DARK="1f3ff",(lG=oG||(oG={})).SUGGESTED="suggested",lG.CUSTOM="custom",lG.SMILEYS_PEOPLE="smileys_people",lG.ANIMALS_NATURE="animals_nature",lG.FOOD_DRINK="food_drink",lG.TRAVEL_PLACES="travel_places",lG.ACTIVITIES="activities",lG.OBJECTS="objects",lG.SYMBOLS="symbols",lG.FLAGS="flags",(dG=cG||(cG={})).SEARCH="SEARCH",dG.PREVIEW="PREVIEW";var mG=[oG.SUGGESTED,oG.CUSTOM,oG.SMILEYS_PEOPLE,oG.ANIMALS_NATURE,oG.FOOD_DRINK,oG.TRAVEL_PLACES,oG.ACTIVITIES,oG.OBJECTS,oG.SYMBOLS,oG.FLAGS],pG={name:"Recently Used",category:oG.SUGGESTED},hG=((uG={})[oG.SUGGESTED]={category:oG.SUGGESTED,name:"Frequently Used"},uG[oG.CUSTOM]={category:oG.CUSTOM,name:"Custom Emojis"},uG[oG.SMILEYS_PEOPLE]={category:oG.SMILEYS_PEOPLE,name:"Smileys & People"},uG[oG.ANIMALS_NATURE]={category:oG.ANIMALS_NATURE,name:"Animals & Nature"},uG[oG.FOOD_DRINK]={category:oG.FOOD_DRINK,name:"Food & Drink"},uG[oG.TRAVEL_PLACES]={category:oG.TRAVEL_PLACES,name:"Travel & Places"},uG[oG.ACTIVITIES]={category:oG.ACTIVITIES,name:"Activities"},uG[oG.OBJECTS]={category:oG.OBJECTS,name:"Objects"},uG[oG.SYMBOLS]={category:oG.SYMBOLS,name:"Symbols"},uG[oG.FLAGS]={category:oG.FLAGS,name:"Flags"},uG);function gG(e){return mG.map((function(t){return BW({},hG[t],e&&e[t]&&e[t])}))}function xG(e){return e.category}function yG(e){return e.name}function vG(e,t){return void 0===t&&(t={}),Object.assign(hG[e],t)}var bG,wG,jG={custom:[],smileys_people:[{n:["grinning","grinning face"],u:"1f600",a:"1.0"},{n:["smiley","smiling face with open mouth"],u:"1f603",a:"0.6"},{n:["smile","smiling face with open mouth and smiling eyes"],u:"1f604",a:"0.6"},{n:["grin","grinning face with smiling eyes"],u:"1f601",a:"0.6"},{n:["laughing","satisfied","smiling face with open mouth and tightly-closed eyes"],u:"1f606",a:"0.6"},{n:["sweat smile","smiling face with open mouth and cold sweat"],u:"1f605",a:"0.6"},{n:["rolling on the floor laughing"],u:"1f923",a:"3.0"},{n:["joy","face with tears of joy"],u:"1f602",a:"0.6"},{n:["slightly smiling face"],u:"1f642",a:"1.0"},{n:["upside-down face","upside down face"],u:"1f643",a:"1.0"},{n:["melting face"],u:"1fae0",a:"14.0"},{n:["wink","winking face"],u:"1f609",a:"0.6"},{n:["blush","smiling face with smiling eyes"],u:"1f60a",a:"0.6"},{n:["innocent","smiling face with halo"],u:"1f607",a:"1.0"},{n:["smiling face with 3 hearts","smiling face with smiling eyes and three hearts"],u:"1f970",a:"11.0"},{n:["heart eyes","smiling face with heart-shaped eyes"],u:"1f60d",a:"0.6"},{n:["star-struck","grinning face with star eyes"],u:"1f929",a:"5.0"},{n:["kissing heart","face throwing a kiss"],u:"1f618",a:"0.6"},{n:["kissing","kissing face"],u:"1f617",a:"1.0"},{n:["relaxed","white smiling face"],u:"263a-fe0f",a:"0.6"},{n:["kissing closed eyes","kissing face with closed eyes"],u:"1f61a",a:"0.6"},{n:["kissing smiling eyes","kissing face with smiling eyes"],u:"1f619",a:"1.0"},{n:["smiling face with tear"],u:"1f972",a:"13.0"},{n:["yum","face savouring delicious food"],u:"1f60b",a:"0.6"},{n:["stuck out tongue","face with stuck-out tongue"],u:"1f61b",a:"1.0"},{n:["stuck out tongue winking eye","face with stuck-out tongue and winking eye"],u:"1f61c",a:"0.6"},{n:["zany face","grinning face with one large and one small eye"],u:"1f92a",a:"5.0"},{n:["stuck out tongue closed eyes","face with stuck-out tongue and tightly-closed eyes"],u:"1f61d",a:"0.6"},{n:["money-mouth face","money mouth face"],u:"1f911",a:"1.0"},{n:["hugging face"],u:"1f917",a:"1.0"},{n:["face with hand over mouth","smiling face with smiling eyes and hand covering mouth"],u:"1f92d",a:"5.0"},{n:["face with open eyes and hand over mouth"],u:"1fae2",a:"14.0"},{n:["face with peeking eye"],u:"1fae3",a:"14.0"},{n:["shushing face","face with finger covering closed lips"],u:"1f92b",a:"5.0"},{n:["thinking face"],u:"1f914",a:"1.0"},{n:["saluting face"],u:"1fae1",a:"14.0"},{n:["zipper-mouth face","zipper mouth face"],u:"1f910",a:"1.0"},{n:["face with raised eyebrow","face with one eyebrow raised"],u:"1f928",a:"5.0"},{n:["neutral face"],u:"1f610",a:"0.7"},{n:["expressionless","expressionless face"],u:"1f611",a:"1.0"},{n:["no mouth","face without mouth"],u:"1f636",a:"1.0"},{n:["dotted line face"],u:"1fae5",a:"14.0"},{n:["face in clouds"],u:"1f636-200d-1f32b-fe0f",a:"13.1"},{n:["smirk","smirking face"],u:"1f60f",a:"0.6"},{n:["unamused","unamused face"],u:"1f612",a:"0.6"},{n:["face with rolling eyes"],u:"1f644",a:"1.0"},{n:["grimacing","grimacing face"],u:"1f62c",a:"1.0"},{n:["face exhaling"],u:"1f62e-200d-1f4a8",a:"13.1"},{n:["lying face"],u:"1f925",a:"3.0"},{n:["relieved","relieved face"],u:"1f60c",a:"0.6"},{n:["pensive","pensive face"],u:"1f614",a:"0.6"},{n:["sleepy","sleepy face"],u:"1f62a",a:"0.6"},{n:["drooling face"],u:"1f924",a:"3.0"},{n:["sleeping","sleeping face"],u:"1f634",a:"1.0"},{n:["mask","face with medical mask"],u:"1f637",a:"0.6"},{n:["face with thermometer"],u:"1f912",a:"1.0"},{n:["face with head-bandage","face with head bandage"],u:"1f915",a:"1.0"},{n:["nauseated face"],u:"1f922",a:"3.0"},{n:["face vomiting","face with open mouth vomiting"],u:"1f92e",a:"5.0"},{n:["sneezing face"],u:"1f927",a:"3.0"},{n:["hot face","overheated face"],u:"1f975",a:"11.0"},{n:["cold face","freezing face"],u:"1f976",a:"11.0"},{n:["woozy face","face with uneven eyes and wavy mouth"],u:"1f974",a:"11.0"},{n:["dizzy face"],u:"1f635",a:"0.6"},{n:["face with spiral eyes"],u:"1f635-200d-1f4ab",a:"13.1"},{n:["exploding head","shocked face with exploding head"],u:"1f92f",a:"5.0"},{n:["face with cowboy hat"],u:"1f920",a:"3.0"},{n:["partying face","face with party horn and party hat"],u:"1f973",a:"11.0"},{n:["disguised face"],u:"1f978",a:"13.0"},{n:["sunglasses","smiling face with sunglasses"],u:"1f60e",a:"1.0"},{n:["nerd face"],u:"1f913",a:"1.0"},{n:["face with monocle"],u:"1f9d0",a:"5.0"},{n:["confused","confused face"],u:"1f615",a:"1.0"},{n:["face with diagonal mouth"],u:"1fae4",a:"14.0"},{n:["worried","worried face"],u:"1f61f",a:"1.0"},{n:["slightly frowning face"],u:"1f641",a:"1.0"},{n:["frowning face","white frowning face"],u:"2639-fe0f",a:"0.7"},{n:["open mouth","face with open mouth"],u:"1f62e",a:"1.0"},{n:["hushed","hushed face"],u:"1f62f",a:"1.0"},{n:["astonished","astonished face"],u:"1f632",a:"0.6"},{n:["flushed","flushed face"],u:"1f633",a:"0.6"},{n:["pleading face","face with pleading eyes"],u:"1f97a",a:"11.0"},{n:["face holding back tears"],u:"1f979",a:"14.0"},{n:["frowning","frowning face with open mouth"],u:"1f626",a:"1.0"},{n:["anguished","anguished face"],u:"1f627",a:"1.0"},{n:["fearful","fearful face"],u:"1f628",a:"0.6"},{n:["cold sweat","face with open mouth and cold sweat"],u:"1f630",a:"0.6"},{n:["disappointed relieved","disappointed but relieved face"],u:"1f625",a:"0.6"},{n:["cry","crying face"],u:"1f622",a:"0.6"},{n:["sob","loudly crying face"],u:"1f62d",a:"0.6"},{n:["scream","face screaming in fear"],u:"1f631",a:"0.6"},{n:["confounded","confounded face"],u:"1f616",a:"0.6"},{n:["persevere","persevering face"],u:"1f623",a:"0.6"},{n:["disappointed","disappointed face"],u:"1f61e",a:"0.6"},{n:["sweat","face with cold sweat"],u:"1f613",a:"0.6"},{n:["weary","weary face"],u:"1f629",a:"0.6"},{n:["tired face"],u:"1f62b",a:"0.6"},{n:["yawning face"],u:"1f971",a:"12.0"},{n:["triumph","face with look of triumph"],u:"1f624",a:"0.6"},{n:["rage","pouting face"],u:"1f621",a:"0.6"},{n:["angry","angry face"],u:"1f620",a:"0.6"},{n:["face with symbols on mouth","serious face with symbols covering mouth"],u:"1f92c",a:"5.0"},{n:["smiling imp","smiling face with horns"],u:"1f608",a:"1.0"},{n:["imp"],u:"1f47f",a:"0.6"},{n:["skull"],u:"1f480",a:"0.6"},{n:["skull and crossbones"],u:"2620-fe0f",a:"1.0"},{n:["poop","shit","hankey","pile of poo"],u:"1f4a9",a:"0.6"},{n:["clown face"],u:"1f921",a:"3.0"},{n:["japanese ogre"],u:"1f479",a:"0.6"},{n:["japanese goblin"],u:"1f47a",a:"0.6"},{n:["ghost"],u:"1f47b",a:"0.6"},{n:["alien","extraterrestrial alien"],u:"1f47d",a:"0.6"},{n:["alien monster","space invader"],u:"1f47e",a:"0.6"},{n:["robot face"],u:"1f916",a:"1.0"},{n:["smiley cat","smiling cat face with open mouth"],u:"1f63a",a:"0.6"},{n:["smile cat","grinning cat face with smiling eyes"],u:"1f638",a:"0.6"},{n:["joy cat","cat face with tears of joy"],u:"1f639",a:"0.6"},{n:["heart eyes cat","smiling cat face with heart-shaped eyes"],u:"1f63b",a:"0.6"},{n:["smirk cat","cat face with wry smile"],u:"1f63c",a:"0.6"},{n:["kissing cat","kissing cat face with closed eyes"],u:"1f63d",a:"0.6"},{n:["scream cat","weary cat face"],u:"1f640",a:"0.6"},{n:["crying cat face"],u:"1f63f",a:"0.6"},{n:["pouting cat","pouting cat face"],u:"1f63e",a:"0.6"},{n:["see no evil","see-no-evil monkey"],u:"1f648",a:"0.6"},{n:["hear no evil","hear-no-evil monkey"],u:"1f649",a:"0.6"},{n:["speak no evil","speak-no-evil monkey"],u:"1f64a",a:"0.6"},{n:["kiss","kiss mark"],u:"1f48b",a:"0.6"},{n:["love letter"],u:"1f48c",a:"0.6"},{n:["cupid","heart with arrow"],u:"1f498",a:"0.6"},{n:["gift heart","heart with ribbon"],u:"1f49d",a:"0.6"},{n:["sparkling heart"],u:"1f496",a:"0.6"},{n:["heartpulse","growing heart"],u:"1f497",a:"0.6"},{n:["heartbeat","beating heart"],u:"1f493",a:"0.6"},{n:["revolving hearts"],u:"1f49e",a:"0.6"},{n:["two hearts"],u:"1f495",a:"0.6"},{n:["heart decoration"],u:"1f49f",a:"0.6"},{n:["heart exclamation","heavy heart exclamation mark ornament"],u:"2763-fe0f",a:"1.0"},{n:["broken heart"],u:"1f494",a:"0.6"},{n:["heart on fire"],u:"2764-fe0f-200d-1f525",a:"13.1"},{n:["mending heart"],u:"2764-fe0f-200d-1fa79",a:"13.1"},{n:["heart","heavy black heart"],u:"2764-fe0f",a:"0.6"},{n:["orange heart"],u:"1f9e1",a:"5.0"},{n:["yellow heart"],u:"1f49b",a:"0.6"},{n:["green heart"],u:"1f49a",a:"0.6"},{n:["blue heart"],u:"1f499",a:"0.6"},{n:["purple heart"],u:"1f49c",a:"0.6"},{n:["brown heart"],u:"1f90e",a:"12.0"},{n:["black heart"],u:"1f5a4",a:"3.0"},{n:["white heart"],u:"1f90d",a:"12.0"},{n:["100","hundred points symbol"],u:"1f4af",a:"0.6"},{n:["anger","anger symbol"],u:"1f4a2",a:"0.6"},{n:["boom","collision","collision symbol"],u:"1f4a5",a:"0.6"},{n:["dizzy","dizzy symbol"],u:"1f4ab",a:"0.6"},{n:["sweat drops","splashing sweat symbol"],u:"1f4a6",a:"0.6"},{n:["dash","dash symbol"],u:"1f4a8",a:"0.6"},{n:["hole"],u:"1f573-fe0f",a:"0.7"},{n:["bomb"],u:"1f4a3",a:"0.6"},{n:["speech balloon"],u:"1f4ac",a:"0.6"},{n:["eye in speech bubble","eye-in-speech-bubble"],u:"1f441-fe0f-200d-1f5e8-fe0f",a:"2.0"},{n:["left speech bubble"],u:"1f5e8-fe0f",a:"2.0"},{n:["right anger bubble"],u:"1f5ef-fe0f",a:"0.7"},{n:["thought balloon"],u:"1f4ad",a:"1.0"},{n:["zzz","sleeping symbol"],u:"1f4a4",a:"0.6"},{n:["wave","waving hand sign"],u:"1f44b",v:["1f44b-1f3fb","1f44b-1f3fc","1f44b-1f3fd","1f44b-1f3fe","1f44b-1f3ff"],a:"0.6"},{n:["raised back of hand"],u:"1f91a",v:["1f91a-1f3fb","1f91a-1f3fc","1f91a-1f3fd","1f91a-1f3fe","1f91a-1f3ff"],a:"3.0"},{n:["hand with fingers splayed","raised hand with fingers splayed"],u:"1f590-fe0f",v:["1f590-1f3fb","1f590-1f3fc","1f590-1f3fd","1f590-1f3fe","1f590-1f3ff"],a:"0.7"},{n:["hand","raised hand"],u:"270b",v:["270b-1f3fb","270b-1f3fc","270b-1f3fd","270b-1f3fe","270b-1f3ff"],a:"0.6"},{n:["spock-hand","raised hand with part between middle and ring fingers"],u:"1f596",v:["1f596-1f3fb","1f596-1f3fc","1f596-1f3fd","1f596-1f3fe","1f596-1f3ff"],a:"1.0"},{n:["rightwards hand"],u:"1faf1",v:["1faf1-1f3fb","1faf1-1f3fc","1faf1-1f3fd","1faf1-1f3fe","1faf1-1f3ff"],a:"14.0"},{n:["leftwards hand"],u:"1faf2",v:["1faf2-1f3fb","1faf2-1f3fc","1faf2-1f3fd","1faf2-1f3fe","1faf2-1f3ff"],a:"14.0"},{n:["palm down hand"],u:"1faf3",v:["1faf3-1f3fb","1faf3-1f3fc","1faf3-1f3fd","1faf3-1f3fe","1faf3-1f3ff"],a:"14.0"},{n:["palm up hand"],u:"1faf4",v:["1faf4-1f3fb","1faf4-1f3fc","1faf4-1f3fd","1faf4-1f3fe","1faf4-1f3ff"],a:"14.0"},{n:["ok hand","ok hand sign"],u:"1f44c",v:["1f44c-1f3fb","1f44c-1f3fc","1f44c-1f3fd","1f44c-1f3fe","1f44c-1f3ff"],a:"0.6"},{n:["pinched fingers"],u:"1f90c",v:["1f90c-1f3fb","1f90c-1f3fc","1f90c-1f3fd","1f90c-1f3fe","1f90c-1f3ff"],a:"13.0"},{n:["pinching hand"],u:"1f90f",v:["1f90f-1f3fb","1f90f-1f3fc","1f90f-1f3fd","1f90f-1f3fe","1f90f-1f3ff"],a:"12.0"},{n:["v","victory hand"],u:"270c-fe0f",v:["270c-1f3fb","270c-1f3fc","270c-1f3fd","270c-1f3fe","270c-1f3ff"],a:"0.6"},{n:["crossed fingers","hand with index and middle fingers crossed"],u:"1f91e",v:["1f91e-1f3fb","1f91e-1f3fc","1f91e-1f3fd","1f91e-1f3fe","1f91e-1f3ff"],a:"3.0"},{n:["hand with index finger and thumb crossed"],u:"1faf0",v:["1faf0-1f3fb","1faf0-1f3fc","1faf0-1f3fd","1faf0-1f3fe","1faf0-1f3ff"],a:"14.0"},{n:["i love you hand sign"],u:"1f91f",v:["1f91f-1f3fb","1f91f-1f3fc","1f91f-1f3fd","1f91f-1f3fe","1f91f-1f3ff"],a:"5.0"},{n:["the horns","sign of the horns"],u:"1f918",v:["1f918-1f3fb","1f918-1f3fc","1f918-1f3fd","1f918-1f3fe","1f918-1f3ff"],a:"1.0"},{n:["call me hand"],u:"1f919",v:["1f919-1f3fb","1f919-1f3fc","1f919-1f3fd","1f919-1f3fe","1f919-1f3ff"],a:"3.0"},{n:["point left","white left pointing backhand index"],u:"1f448",v:["1f448-1f3fb","1f448-1f3fc","1f448-1f3fd","1f448-1f3fe","1f448-1f3ff"],a:"0.6"},{n:["point right","white right pointing backhand index"],u:"1f449",v:["1f449-1f3fb","1f449-1f3fc","1f449-1f3fd","1f449-1f3fe","1f449-1f3ff"],a:"0.6"},{n:["point up 2","white up pointing backhand index"],u:"1f446",v:["1f446-1f3fb","1f446-1f3fc","1f446-1f3fd","1f446-1f3fe","1f446-1f3ff"],a:"0.6"},{n:["middle finger","reversed hand with middle finger extended"],u:"1f595",v:["1f595-1f3fb","1f595-1f3fc","1f595-1f3fd","1f595-1f3fe","1f595-1f3ff"],a:"1.0"},{n:["point down","white down pointing backhand index"],u:"1f447",v:["1f447-1f3fb","1f447-1f3fc","1f447-1f3fd","1f447-1f3fe","1f447-1f3ff"],a:"0.6"},{n:["point up","white up pointing index"],u:"261d-fe0f",v:["261d-1f3fb","261d-1f3fc","261d-1f3fd","261d-1f3fe","261d-1f3ff"],a:"0.6"},{n:["index pointing at the viewer"],u:"1faf5",v:["1faf5-1f3fb","1faf5-1f3fc","1faf5-1f3fd","1faf5-1f3fe","1faf5-1f3ff"],a:"14.0"},{n:["+1","thumbsup","thumbs up sign"],u:"1f44d",v:["1f44d-1f3fb","1f44d-1f3fc","1f44d-1f3fd","1f44d-1f3fe","1f44d-1f3ff"],a:"0.6"},{n:["-1","thumbsdown","thumbs down sign"],u:"1f44e",v:["1f44e-1f3fb","1f44e-1f3fc","1f44e-1f3fd","1f44e-1f3fe","1f44e-1f3ff"],a:"0.6"},{n:["fist","raised fist"],u:"270a",v:["270a-1f3fb","270a-1f3fc","270a-1f3fd","270a-1f3fe","270a-1f3ff"],a:"0.6"},{n:["punch","facepunch","fisted hand sign"],u:"1f44a",v:["1f44a-1f3fb","1f44a-1f3fc","1f44a-1f3fd","1f44a-1f3fe","1f44a-1f3ff"],a:"0.6"},{n:["left-facing fist"],u:"1f91b",v:["1f91b-1f3fb","1f91b-1f3fc","1f91b-1f3fd","1f91b-1f3fe","1f91b-1f3ff"],a:"3.0"},{n:["right-facing fist"],u:"1f91c",v:["1f91c-1f3fb","1f91c-1f3fc","1f91c-1f3fd","1f91c-1f3fe","1f91c-1f3ff"],a:"3.0"},{n:["clap","clapping hands sign"],u:"1f44f",v:["1f44f-1f3fb","1f44f-1f3fc","1f44f-1f3fd","1f44f-1f3fe","1f44f-1f3ff"],a:"0.6"},{n:["raised hands","person raising both hands in celebration"],u:"1f64c",v:["1f64c-1f3fb","1f64c-1f3fc","1f64c-1f3fd","1f64c-1f3fe","1f64c-1f3ff"],a:"0.6"},{n:["heart hands"],u:"1faf6",v:["1faf6-1f3fb","1faf6-1f3fc","1faf6-1f3fd","1faf6-1f3fe","1faf6-1f3ff"],a:"14.0"},{n:["open hands","open hands sign"],u:"1f450",v:["1f450-1f3fb","1f450-1f3fc","1f450-1f3fd","1f450-1f3fe","1f450-1f3ff"],a:"0.6"},{n:["palms up together"],u:"1f932",v:["1f932-1f3fb","1f932-1f3fc","1f932-1f3fd","1f932-1f3fe","1f932-1f3ff"],a:"5.0"},{n:["handshake"],u:"1f91d",v:["1f91d-1f3fb","1f91d-1f3fc","1f91d-1f3fd","1f91d-1f3fe","1f91d-1f3ff","1faf1-1f3fb-200d-1faf2-1f3fc","1faf1-1f3fb-200d-1faf2-1f3fd","1faf1-1f3fb-200d-1faf2-1f3fe","1faf1-1f3fb-200d-1faf2-1f3ff","1faf1-1f3fc-200d-1faf2-1f3fb","1faf1-1f3fc-200d-1faf2-1f3fd","1faf1-1f3fc-200d-1faf2-1f3fe","1faf1-1f3fc-200d-1faf2-1f3ff","1faf1-1f3fd-200d-1faf2-1f3fb","1faf1-1f3fd-200d-1faf2-1f3fc","1faf1-1f3fd-200d-1faf2-1f3fe","1faf1-1f3fd-200d-1faf2-1f3ff","1faf1-1f3fe-200d-1faf2-1f3fb","1faf1-1f3fe-200d-1faf2-1f3fc","1faf1-1f3fe-200d-1faf2-1f3fd","1faf1-1f3fe-200d-1faf2-1f3ff","1faf1-1f3ff-200d-1faf2-1f3fb","1faf1-1f3ff-200d-1faf2-1f3fc","1faf1-1f3ff-200d-1faf2-1f3fd","1faf1-1f3ff-200d-1faf2-1f3fe"],a:"3.0"},{n:["pray","person with folded hands"],u:"1f64f",v:["1f64f-1f3fb","1f64f-1f3fc","1f64f-1f3fd","1f64f-1f3fe","1f64f-1f3ff"],a:"0.6"},{n:["writing hand"],u:"270d-fe0f",v:["270d-1f3fb","270d-1f3fc","270d-1f3fd","270d-1f3fe","270d-1f3ff"],a:"0.7"},{n:["nail care","nail polish"],u:"1f485",v:["1f485-1f3fb","1f485-1f3fc","1f485-1f3fd","1f485-1f3fe","1f485-1f3ff"],a:"0.6"},{n:["selfie"],u:"1f933",v:["1f933-1f3fb","1f933-1f3fc","1f933-1f3fd","1f933-1f3fe","1f933-1f3ff"],a:"3.0"},{n:["muscle","flexed biceps"],u:"1f4aa",v:["1f4aa-1f3fb","1f4aa-1f3fc","1f4aa-1f3fd","1f4aa-1f3fe","1f4aa-1f3ff"],a:"0.6"},{n:["mechanical arm"],u:"1f9be",a:"12.0"},{n:["mechanical leg"],u:"1f9bf",a:"12.0"},{n:["leg"],u:"1f9b5",v:["1f9b5-1f3fb","1f9b5-1f3fc","1f9b5-1f3fd","1f9b5-1f3fe","1f9b5-1f3ff"],a:"11.0"},{n:["foot"],u:"1f9b6",v:["1f9b6-1f3fb","1f9b6-1f3fc","1f9b6-1f3fd","1f9b6-1f3fe","1f9b6-1f3ff"],a:"11.0"},{n:["ear"],u:"1f442",v:["1f442-1f3fb","1f442-1f3fc","1f442-1f3fd","1f442-1f3fe","1f442-1f3ff"],a:"0.6"},{n:["ear with hearing aid"],u:"1f9bb",v:["1f9bb-1f3fb","1f9bb-1f3fc","1f9bb-1f3fd","1f9bb-1f3fe","1f9bb-1f3ff"],a:"12.0"},{n:["nose"],u:"1f443",v:["1f443-1f3fb","1f443-1f3fc","1f443-1f3fd","1f443-1f3fe","1f443-1f3ff"],a:"0.6"},{n:["brain"],u:"1f9e0",a:"5.0"},{n:["anatomical heart"],u:"1fac0",a:"13.0"},{n:["lungs"],u:"1fac1",a:"13.0"},{n:["tooth"],u:"1f9b7",a:"11.0"},{n:["bone"],u:"1f9b4",a:"11.0"},{n:["eyes"],u:"1f440",a:"0.6"},{n:["eye"],u:"1f441-fe0f",a:"0.7"},{n:["tongue"],u:"1f445",a:"0.6"},{n:["lips","mouth"],u:"1f444",a:"0.6"},{n:["biting lip"],u:"1fae6",a:"14.0"},{n:["baby"],u:"1f476",v:["1f476-1f3fb","1f476-1f3fc","1f476-1f3fd","1f476-1f3fe","1f476-1f3ff"],a:"0.6"},{n:["child"],u:"1f9d2",v:["1f9d2-1f3fb","1f9d2-1f3fc","1f9d2-1f3fd","1f9d2-1f3fe","1f9d2-1f3ff"],a:"5.0"},{n:["boy"],u:"1f466",v:["1f466-1f3fb","1f466-1f3fc","1f466-1f3fd","1f466-1f3fe","1f466-1f3ff"],a:"0.6"},{n:["girl"],u:"1f467",v:["1f467-1f3fb","1f467-1f3fc","1f467-1f3fd","1f467-1f3fe","1f467-1f3ff"],a:"0.6"},{n:["adult"],u:"1f9d1",v:["1f9d1-1f3fb","1f9d1-1f3fc","1f9d1-1f3fd","1f9d1-1f3fe","1f9d1-1f3ff"],a:"5.0"},{n:["person with blond hair"],u:"1f471",v:["1f471-1f3fb","1f471-1f3fc","1f471-1f3fd","1f471-1f3fe","1f471-1f3ff"],a:"0.6"},{n:["man"],u:"1f468",v:["1f468-1f3fb","1f468-1f3fc","1f468-1f3fd","1f468-1f3fe","1f468-1f3ff"],a:"0.6"},{n:["bearded person"],u:"1f9d4",v:["1f9d4-1f3fb","1f9d4-1f3fc","1f9d4-1f3fd","1f9d4-1f3fe","1f9d4-1f3ff"],a:"5.0"},{n:["man: beard","man with beard"],u:"1f9d4-200d-2642-fe0f",v:["1f9d4-1f3fb-200d-2642-fe0f","1f9d4-1f3fc-200d-2642-fe0f","1f9d4-1f3fd-200d-2642-fe0f","1f9d4-1f3fe-200d-2642-fe0f","1f9d4-1f3ff-200d-2642-fe0f"],a:"13.1"},{n:["woman: beard","woman with beard"],u:"1f9d4-200d-2640-fe0f",v:["1f9d4-1f3fb-200d-2640-fe0f","1f9d4-1f3fc-200d-2640-fe0f","1f9d4-1f3fd-200d-2640-fe0f","1f9d4-1f3fe-200d-2640-fe0f","1f9d4-1f3ff-200d-2640-fe0f"],a:"13.1"},{n:["man: red hair","red haired man"],u:"1f468-200d-1f9b0",v:["1f468-1f3fb-200d-1f9b0","1f468-1f3fc-200d-1f9b0","1f468-1f3fd-200d-1f9b0","1f468-1f3fe-200d-1f9b0","1f468-1f3ff-200d-1f9b0"],a:"11.0"},{n:["man: curly hair","curly haired man"],u:"1f468-200d-1f9b1",v:["1f468-1f3fb-200d-1f9b1","1f468-1f3fc-200d-1f9b1","1f468-1f3fd-200d-1f9b1","1f468-1f3fe-200d-1f9b1","1f468-1f3ff-200d-1f9b1"],a:"11.0"},{n:["man: white hair","white haired man"],u:"1f468-200d-1f9b3",v:["1f468-1f3fb-200d-1f9b3","1f468-1f3fc-200d-1f9b3","1f468-1f3fd-200d-1f9b3","1f468-1f3fe-200d-1f9b3","1f468-1f3ff-200d-1f9b3"],a:"11.0"},{n:["bald man","man: bald"],u:"1f468-200d-1f9b2",v:["1f468-1f3fb-200d-1f9b2","1f468-1f3fc-200d-1f9b2","1f468-1f3fd-200d-1f9b2","1f468-1f3fe-200d-1f9b2","1f468-1f3ff-200d-1f9b2"],a:"11.0"},{n:["woman"],u:"1f469",v:["1f469-1f3fb","1f469-1f3fc","1f469-1f3fd","1f469-1f3fe","1f469-1f3ff"],a:"0.6"},{n:["woman: red hair","red haired woman"],u:"1f469-200d-1f9b0",v:["1f469-1f3fb-200d-1f9b0","1f469-1f3fc-200d-1f9b0","1f469-1f3fd-200d-1f9b0","1f469-1f3fe-200d-1f9b0","1f469-1f3ff-200d-1f9b0"],a:"11.0"},{n:["person: red hair","red haired person"],u:"1f9d1-200d-1f9b0",v:["1f9d1-1f3fb-200d-1f9b0","1f9d1-1f3fc-200d-1f9b0","1f9d1-1f3fd-200d-1f9b0","1f9d1-1f3fe-200d-1f9b0","1f9d1-1f3ff-200d-1f9b0"],a:"12.1"},{n:["woman: curly hair","curly haired woman"],u:"1f469-200d-1f9b1",v:["1f469-1f3fb-200d-1f9b1","1f469-1f3fc-200d-1f9b1","1f469-1f3fd-200d-1f9b1","1f469-1f3fe-200d-1f9b1","1f469-1f3ff-200d-1f9b1"],a:"11.0"},{n:["person: curly hair","curly haired person"],u:"1f9d1-200d-1f9b1",v:["1f9d1-1f3fb-200d-1f9b1","1f9d1-1f3fc-200d-1f9b1","1f9d1-1f3fd-200d-1f9b1","1f9d1-1f3fe-200d-1f9b1","1f9d1-1f3ff-200d-1f9b1"],a:"12.1"},{n:["woman: white hair","white haired woman"],u:"1f469-200d-1f9b3",v:["1f469-1f3fb-200d-1f9b3","1f469-1f3fc-200d-1f9b3","1f469-1f3fd-200d-1f9b3","1f469-1f3fe-200d-1f9b3","1f469-1f3ff-200d-1f9b3"],a:"11.0"},{n:["person: white hair","white haired person"],u:"1f9d1-200d-1f9b3",v:["1f9d1-1f3fb-200d-1f9b3","1f9d1-1f3fc-200d-1f9b3","1f9d1-1f3fd-200d-1f9b3","1f9d1-1f3fe-200d-1f9b3","1f9d1-1f3ff-200d-1f9b3"],a:"12.1"},{n:["bald woman","woman: bald"],u:"1f469-200d-1f9b2",v:["1f469-1f3fb-200d-1f9b2","1f469-1f3fc-200d-1f9b2","1f469-1f3fd-200d-1f9b2","1f469-1f3fe-200d-1f9b2","1f469-1f3ff-200d-1f9b2"],a:"11.0"},{n:["bald person","person: bald"],u:"1f9d1-200d-1f9b2",v:["1f9d1-1f3fb-200d-1f9b2","1f9d1-1f3fc-200d-1f9b2","1f9d1-1f3fd-200d-1f9b2","1f9d1-1f3fe-200d-1f9b2","1f9d1-1f3ff-200d-1f9b2"],a:"12.1"},{n:["woman: blond hair","blond-haired-woman"],u:"1f471-200d-2640-fe0f",v:["1f471-1f3fb-200d-2640-fe0f","1f471-1f3fc-200d-2640-fe0f","1f471-1f3fd-200d-2640-fe0f","1f471-1f3fe-200d-2640-fe0f","1f471-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man: blond hair","blond-haired-man"],u:"1f471-200d-2642-fe0f",v:["1f471-1f3fb-200d-2642-fe0f","1f471-1f3fc-200d-2642-fe0f","1f471-1f3fd-200d-2642-fe0f","1f471-1f3fe-200d-2642-fe0f","1f471-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["older adult"],u:"1f9d3",v:["1f9d3-1f3fb","1f9d3-1f3fc","1f9d3-1f3fd","1f9d3-1f3fe","1f9d3-1f3ff"],a:"5.0"},{n:["older man"],u:"1f474",v:["1f474-1f3fb","1f474-1f3fc","1f474-1f3fd","1f474-1f3fe","1f474-1f3ff"],a:"0.6"},{n:["older woman"],u:"1f475",v:["1f475-1f3fb","1f475-1f3fc","1f475-1f3fd","1f475-1f3fe","1f475-1f3ff"],a:"0.6"},{n:["person frowning"],u:"1f64d",v:["1f64d-1f3fb","1f64d-1f3fc","1f64d-1f3fd","1f64d-1f3fe","1f64d-1f3ff"],a:"0.6"},{n:["man frowning","man-frowning"],u:"1f64d-200d-2642-fe0f",v:["1f64d-1f3fb-200d-2642-fe0f","1f64d-1f3fc-200d-2642-fe0f","1f64d-1f3fd-200d-2642-fe0f","1f64d-1f3fe-200d-2642-fe0f","1f64d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman frowning","woman-frowning"],u:"1f64d-200d-2640-fe0f",v:["1f64d-1f3fb-200d-2640-fe0f","1f64d-1f3fc-200d-2640-fe0f","1f64d-1f3fd-200d-2640-fe0f","1f64d-1f3fe-200d-2640-fe0f","1f64d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with pouting face"],u:"1f64e",v:["1f64e-1f3fb","1f64e-1f3fc","1f64e-1f3fd","1f64e-1f3fe","1f64e-1f3ff"],a:"0.6"},{n:["man pouting","man-pouting"],u:"1f64e-200d-2642-fe0f",v:["1f64e-1f3fb-200d-2642-fe0f","1f64e-1f3fc-200d-2642-fe0f","1f64e-1f3fd-200d-2642-fe0f","1f64e-1f3fe-200d-2642-fe0f","1f64e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman pouting","woman-pouting"],u:"1f64e-200d-2640-fe0f",v:["1f64e-1f3fb-200d-2640-fe0f","1f64e-1f3fc-200d-2640-fe0f","1f64e-1f3fd-200d-2640-fe0f","1f64e-1f3fe-200d-2640-fe0f","1f64e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["no good","face with no good gesture"],u:"1f645",v:["1f645-1f3fb","1f645-1f3fc","1f645-1f3fd","1f645-1f3fe","1f645-1f3ff"],a:"0.6"},{n:["man gesturing no","man-gesturing-no"],u:"1f645-200d-2642-fe0f",v:["1f645-1f3fb-200d-2642-fe0f","1f645-1f3fc-200d-2642-fe0f","1f645-1f3fd-200d-2642-fe0f","1f645-1f3fe-200d-2642-fe0f","1f645-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing no","woman-gesturing-no"],u:"1f645-200d-2640-fe0f",v:["1f645-1f3fb-200d-2640-fe0f","1f645-1f3fc-200d-2640-fe0f","1f645-1f3fd-200d-2640-fe0f","1f645-1f3fe-200d-2640-fe0f","1f645-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ok woman","face with ok gesture"],u:"1f646",v:["1f646-1f3fb","1f646-1f3fc","1f646-1f3fd","1f646-1f3fe","1f646-1f3ff"],a:"0.6"},{n:["man gesturing ok","man-gesturing-ok"],u:"1f646-200d-2642-fe0f",v:["1f646-1f3fb-200d-2642-fe0f","1f646-1f3fc-200d-2642-fe0f","1f646-1f3fd-200d-2642-fe0f","1f646-1f3fe-200d-2642-fe0f","1f646-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing ok","woman-gesturing-ok"],u:"1f646-200d-2640-fe0f",v:["1f646-1f3fb-200d-2640-fe0f","1f646-1f3fc-200d-2640-fe0f","1f646-1f3fd-200d-2640-fe0f","1f646-1f3fe-200d-2640-fe0f","1f646-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["information desk person"],u:"1f481",v:["1f481-1f3fb","1f481-1f3fc","1f481-1f3fd","1f481-1f3fe","1f481-1f3ff"],a:"0.6"},{n:["man tipping hand","man-tipping-hand"],u:"1f481-200d-2642-fe0f",v:["1f481-1f3fb-200d-2642-fe0f","1f481-1f3fc-200d-2642-fe0f","1f481-1f3fd-200d-2642-fe0f","1f481-1f3fe-200d-2642-fe0f","1f481-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman tipping hand","woman-tipping-hand"],u:"1f481-200d-2640-fe0f",v:["1f481-1f3fb-200d-2640-fe0f","1f481-1f3fc-200d-2640-fe0f","1f481-1f3fd-200d-2640-fe0f","1f481-1f3fe-200d-2640-fe0f","1f481-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["raising hand","happy person raising one hand"],u:"1f64b",v:["1f64b-1f3fb","1f64b-1f3fc","1f64b-1f3fd","1f64b-1f3fe","1f64b-1f3ff"],a:"0.6"},{n:["man raising hand","man-raising-hand"],u:"1f64b-200d-2642-fe0f",v:["1f64b-1f3fb-200d-2642-fe0f","1f64b-1f3fc-200d-2642-fe0f","1f64b-1f3fd-200d-2642-fe0f","1f64b-1f3fe-200d-2642-fe0f","1f64b-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman raising hand","woman-raising-hand"],u:"1f64b-200d-2640-fe0f",v:["1f64b-1f3fb-200d-2640-fe0f","1f64b-1f3fc-200d-2640-fe0f","1f64b-1f3fd-200d-2640-fe0f","1f64b-1f3fe-200d-2640-fe0f","1f64b-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["deaf person"],u:"1f9cf",v:["1f9cf-1f3fb","1f9cf-1f3fc","1f9cf-1f3fd","1f9cf-1f3fe","1f9cf-1f3ff"],a:"12.0"},{n:["deaf man"],u:"1f9cf-200d-2642-fe0f",v:["1f9cf-1f3fb-200d-2642-fe0f","1f9cf-1f3fc-200d-2642-fe0f","1f9cf-1f3fd-200d-2642-fe0f","1f9cf-1f3fe-200d-2642-fe0f","1f9cf-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["deaf woman"],u:"1f9cf-200d-2640-fe0f",v:["1f9cf-1f3fb-200d-2640-fe0f","1f9cf-1f3fc-200d-2640-fe0f","1f9cf-1f3fd-200d-2640-fe0f","1f9cf-1f3fe-200d-2640-fe0f","1f9cf-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["bow","person bowing deeply"],u:"1f647",v:["1f647-1f3fb","1f647-1f3fc","1f647-1f3fd","1f647-1f3fe","1f647-1f3ff"],a:"0.6"},{n:["man bowing","man-bowing"],u:"1f647-200d-2642-fe0f",v:["1f647-1f3fb-200d-2642-fe0f","1f647-1f3fc-200d-2642-fe0f","1f647-1f3fd-200d-2642-fe0f","1f647-1f3fe-200d-2642-fe0f","1f647-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bowing","woman-bowing"],u:"1f647-200d-2640-fe0f",v:["1f647-1f3fb-200d-2640-fe0f","1f647-1f3fc-200d-2640-fe0f","1f647-1f3fd-200d-2640-fe0f","1f647-1f3fe-200d-2640-fe0f","1f647-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["face palm"],u:"1f926",v:["1f926-1f3fb","1f926-1f3fc","1f926-1f3fd","1f926-1f3fe","1f926-1f3ff"],a:"3.0"},{n:["man facepalming","man-facepalming"],u:"1f926-200d-2642-fe0f",v:["1f926-1f3fb-200d-2642-fe0f","1f926-1f3fc-200d-2642-fe0f","1f926-1f3fd-200d-2642-fe0f","1f926-1f3fe-200d-2642-fe0f","1f926-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman facepalming","woman-facepalming"],u:"1f926-200d-2640-fe0f",v:["1f926-1f3fb-200d-2640-fe0f","1f926-1f3fc-200d-2640-fe0f","1f926-1f3fd-200d-2640-fe0f","1f926-1f3fe-200d-2640-fe0f","1f926-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["shrug"],u:"1f937",v:["1f937-1f3fb","1f937-1f3fc","1f937-1f3fd","1f937-1f3fe","1f937-1f3ff"],a:"3.0"},{n:["man shrugging","man-shrugging"],u:"1f937-200d-2642-fe0f",v:["1f937-1f3fb-200d-2642-fe0f","1f937-1f3fc-200d-2642-fe0f","1f937-1f3fd-200d-2642-fe0f","1f937-1f3fe-200d-2642-fe0f","1f937-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman shrugging","woman-shrugging"],u:"1f937-200d-2640-fe0f",v:["1f937-1f3fb-200d-2640-fe0f","1f937-1f3fc-200d-2640-fe0f","1f937-1f3fd-200d-2640-fe0f","1f937-1f3fe-200d-2640-fe0f","1f937-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["health worker"],u:"1f9d1-200d-2695-fe0f",v:["1f9d1-1f3fb-200d-2695-fe0f","1f9d1-1f3fc-200d-2695-fe0f","1f9d1-1f3fd-200d-2695-fe0f","1f9d1-1f3fe-200d-2695-fe0f","1f9d1-1f3ff-200d-2695-fe0f"],a:"12.1"},{n:["male-doctor","man health worker"],u:"1f468-200d-2695-fe0f",v:["1f468-1f3fb-200d-2695-fe0f","1f468-1f3fc-200d-2695-fe0f","1f468-1f3fd-200d-2695-fe0f","1f468-1f3fe-200d-2695-fe0f","1f468-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["female-doctor","woman health worker"],u:"1f469-200d-2695-fe0f",v:["1f469-1f3fb-200d-2695-fe0f","1f469-1f3fc-200d-2695-fe0f","1f469-1f3fd-200d-2695-fe0f","1f469-1f3fe-200d-2695-fe0f","1f469-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["student"],u:"1f9d1-200d-1f393",v:["1f9d1-1f3fb-200d-1f393","1f9d1-1f3fc-200d-1f393","1f9d1-1f3fd-200d-1f393","1f9d1-1f3fe-200d-1f393","1f9d1-1f3ff-200d-1f393"],a:"12.1"},{n:["man student","male-student"],u:"1f468-200d-1f393",v:["1f468-1f3fb-200d-1f393","1f468-1f3fc-200d-1f393","1f468-1f3fd-200d-1f393","1f468-1f3fe-200d-1f393","1f468-1f3ff-200d-1f393"],a:"4.0"},{n:["woman student","female-student"],u:"1f469-200d-1f393",v:["1f469-1f3fb-200d-1f393","1f469-1f3fc-200d-1f393","1f469-1f3fd-200d-1f393","1f469-1f3fe-200d-1f393","1f469-1f3ff-200d-1f393"],a:"4.0"},{n:["teacher"],u:"1f9d1-200d-1f3eb",v:["1f9d1-1f3fb-200d-1f3eb","1f9d1-1f3fc-200d-1f3eb","1f9d1-1f3fd-200d-1f3eb","1f9d1-1f3fe-200d-1f3eb","1f9d1-1f3ff-200d-1f3eb"],a:"12.1"},{n:["man teacher","male-teacher"],u:"1f468-200d-1f3eb",v:["1f468-1f3fb-200d-1f3eb","1f468-1f3fc-200d-1f3eb","1f468-1f3fd-200d-1f3eb","1f468-1f3fe-200d-1f3eb","1f468-1f3ff-200d-1f3eb"],a:"4.0"},{n:["woman teacher","female-teacher"],u:"1f469-200d-1f3eb",v:["1f469-1f3fb-200d-1f3eb","1f469-1f3fc-200d-1f3eb","1f469-1f3fd-200d-1f3eb","1f469-1f3fe-200d-1f3eb","1f469-1f3ff-200d-1f3eb"],a:"4.0"},{n:["judge"],u:"1f9d1-200d-2696-fe0f",v:["1f9d1-1f3fb-200d-2696-fe0f","1f9d1-1f3fc-200d-2696-fe0f","1f9d1-1f3fd-200d-2696-fe0f","1f9d1-1f3fe-200d-2696-fe0f","1f9d1-1f3ff-200d-2696-fe0f"],a:"12.1"},{n:["man judge","male-judge"],u:"1f468-200d-2696-fe0f",v:["1f468-1f3fb-200d-2696-fe0f","1f468-1f3fc-200d-2696-fe0f","1f468-1f3fd-200d-2696-fe0f","1f468-1f3fe-200d-2696-fe0f","1f468-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["woman judge","female-judge"],u:"1f469-200d-2696-fe0f",v:["1f469-1f3fb-200d-2696-fe0f","1f469-1f3fc-200d-2696-fe0f","1f469-1f3fd-200d-2696-fe0f","1f469-1f3fe-200d-2696-fe0f","1f469-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["farmer"],u:"1f9d1-200d-1f33e",v:["1f9d1-1f3fb-200d-1f33e","1f9d1-1f3fc-200d-1f33e","1f9d1-1f3fd-200d-1f33e","1f9d1-1f3fe-200d-1f33e","1f9d1-1f3ff-200d-1f33e"],a:"12.1"},{n:["man farmer","male-farmer"],u:"1f468-200d-1f33e",v:["1f468-1f3fb-200d-1f33e","1f468-1f3fc-200d-1f33e","1f468-1f3fd-200d-1f33e","1f468-1f3fe-200d-1f33e","1f468-1f3ff-200d-1f33e"],a:"4.0"},{n:["woman farmer","female-farmer"],u:"1f469-200d-1f33e",v:["1f469-1f3fb-200d-1f33e","1f469-1f3fc-200d-1f33e","1f469-1f3fd-200d-1f33e","1f469-1f3fe-200d-1f33e","1f469-1f3ff-200d-1f33e"],a:"4.0"},{n:["cook"],u:"1f9d1-200d-1f373",v:["1f9d1-1f3fb-200d-1f373","1f9d1-1f3fc-200d-1f373","1f9d1-1f3fd-200d-1f373","1f9d1-1f3fe-200d-1f373","1f9d1-1f3ff-200d-1f373"],a:"12.1"},{n:["man cook","male-cook"],u:"1f468-200d-1f373",v:["1f468-1f3fb-200d-1f373","1f468-1f3fc-200d-1f373","1f468-1f3fd-200d-1f373","1f468-1f3fe-200d-1f373","1f468-1f3ff-200d-1f373"],a:"4.0"},{n:["woman cook","female-cook"],u:"1f469-200d-1f373",v:["1f469-1f3fb-200d-1f373","1f469-1f3fc-200d-1f373","1f469-1f3fd-200d-1f373","1f469-1f3fe-200d-1f373","1f469-1f3ff-200d-1f373"],a:"4.0"},{n:["mechanic"],u:"1f9d1-200d-1f527",v:["1f9d1-1f3fb-200d-1f527","1f9d1-1f3fc-200d-1f527","1f9d1-1f3fd-200d-1f527","1f9d1-1f3fe-200d-1f527","1f9d1-1f3ff-200d-1f527"],a:"12.1"},{n:["man mechanic","male-mechanic"],u:"1f468-200d-1f527",v:["1f468-1f3fb-200d-1f527","1f468-1f3fc-200d-1f527","1f468-1f3fd-200d-1f527","1f468-1f3fe-200d-1f527","1f468-1f3ff-200d-1f527"],a:"4.0"},{n:["woman mechanic","female-mechanic"],u:"1f469-200d-1f527",v:["1f469-1f3fb-200d-1f527","1f469-1f3fc-200d-1f527","1f469-1f3fd-200d-1f527","1f469-1f3fe-200d-1f527","1f469-1f3ff-200d-1f527"],a:"4.0"},{n:["factory worker"],u:"1f9d1-200d-1f3ed",v:["1f9d1-1f3fb-200d-1f3ed","1f9d1-1f3fc-200d-1f3ed","1f9d1-1f3fd-200d-1f3ed","1f9d1-1f3fe-200d-1f3ed","1f9d1-1f3ff-200d-1f3ed"],a:"12.1"},{n:["man factory worker","male-factory-worker"],u:"1f468-200d-1f3ed",v:["1f468-1f3fb-200d-1f3ed","1f468-1f3fc-200d-1f3ed","1f468-1f3fd-200d-1f3ed","1f468-1f3fe-200d-1f3ed","1f468-1f3ff-200d-1f3ed"],a:"4.0"},{n:["woman factory worker","female-factory-worker"],u:"1f469-200d-1f3ed",v:["1f469-1f3fb-200d-1f3ed","1f469-1f3fc-200d-1f3ed","1f469-1f3fd-200d-1f3ed","1f469-1f3fe-200d-1f3ed","1f469-1f3ff-200d-1f3ed"],a:"4.0"},{n:["office worker"],u:"1f9d1-200d-1f4bc",v:["1f9d1-1f3fb-200d-1f4bc","1f9d1-1f3fc-200d-1f4bc","1f9d1-1f3fd-200d-1f4bc","1f9d1-1f3fe-200d-1f4bc","1f9d1-1f3ff-200d-1f4bc"],a:"12.1"},{n:["man office worker","male-office-worker"],u:"1f468-200d-1f4bc",v:["1f468-1f3fb-200d-1f4bc","1f468-1f3fc-200d-1f4bc","1f468-1f3fd-200d-1f4bc","1f468-1f3fe-200d-1f4bc","1f468-1f3ff-200d-1f4bc"],a:"4.0"},{n:["woman office worker","female-office-worker"],u:"1f469-200d-1f4bc",v:["1f469-1f3fb-200d-1f4bc","1f469-1f3fc-200d-1f4bc","1f469-1f3fd-200d-1f4bc","1f469-1f3fe-200d-1f4bc","1f469-1f3ff-200d-1f4bc"],a:"4.0"},{n:["scientist"],u:"1f9d1-200d-1f52c",v:["1f9d1-1f3fb-200d-1f52c","1f9d1-1f3fc-200d-1f52c","1f9d1-1f3fd-200d-1f52c","1f9d1-1f3fe-200d-1f52c","1f9d1-1f3ff-200d-1f52c"],a:"12.1"},{n:["man scientist","male-scientist"],u:"1f468-200d-1f52c",v:["1f468-1f3fb-200d-1f52c","1f468-1f3fc-200d-1f52c","1f468-1f3fd-200d-1f52c","1f468-1f3fe-200d-1f52c","1f468-1f3ff-200d-1f52c"],a:"4.0"},{n:["woman scientist","female-scientist"],u:"1f469-200d-1f52c",v:["1f469-1f3fb-200d-1f52c","1f469-1f3fc-200d-1f52c","1f469-1f3fd-200d-1f52c","1f469-1f3fe-200d-1f52c","1f469-1f3ff-200d-1f52c"],a:"4.0"},{n:["technologist"],u:"1f9d1-200d-1f4bb",v:["1f9d1-1f3fb-200d-1f4bb","1f9d1-1f3fc-200d-1f4bb","1f9d1-1f3fd-200d-1f4bb","1f9d1-1f3fe-200d-1f4bb","1f9d1-1f3ff-200d-1f4bb"],a:"12.1"},{n:["man technologist","male-technologist"],u:"1f468-200d-1f4bb",v:["1f468-1f3fb-200d-1f4bb","1f468-1f3fc-200d-1f4bb","1f468-1f3fd-200d-1f4bb","1f468-1f3fe-200d-1f4bb","1f468-1f3ff-200d-1f4bb"],a:"4.0"},{n:["woman technologist","female-technologist"],u:"1f469-200d-1f4bb",v:["1f469-1f3fb-200d-1f4bb","1f469-1f3fc-200d-1f4bb","1f469-1f3fd-200d-1f4bb","1f469-1f3fe-200d-1f4bb","1f469-1f3ff-200d-1f4bb"],a:"4.0"},{n:["singer"],u:"1f9d1-200d-1f3a4",v:["1f9d1-1f3fb-200d-1f3a4","1f9d1-1f3fc-200d-1f3a4","1f9d1-1f3fd-200d-1f3a4","1f9d1-1f3fe-200d-1f3a4","1f9d1-1f3ff-200d-1f3a4"],a:"12.1"},{n:["man singer","male-singer"],u:"1f468-200d-1f3a4",v:["1f468-1f3fb-200d-1f3a4","1f468-1f3fc-200d-1f3a4","1f468-1f3fd-200d-1f3a4","1f468-1f3fe-200d-1f3a4","1f468-1f3ff-200d-1f3a4"],a:"4.0"},{n:["woman singer","female-singer"],u:"1f469-200d-1f3a4",v:["1f469-1f3fb-200d-1f3a4","1f469-1f3fc-200d-1f3a4","1f469-1f3fd-200d-1f3a4","1f469-1f3fe-200d-1f3a4","1f469-1f3ff-200d-1f3a4"],a:"4.0"},{n:["artist"],u:"1f9d1-200d-1f3a8",v:["1f9d1-1f3fb-200d-1f3a8","1f9d1-1f3fc-200d-1f3a8","1f9d1-1f3fd-200d-1f3a8","1f9d1-1f3fe-200d-1f3a8","1f9d1-1f3ff-200d-1f3a8"],a:"12.1"},{n:["man artist","male-artist"],u:"1f468-200d-1f3a8",v:["1f468-1f3fb-200d-1f3a8","1f468-1f3fc-200d-1f3a8","1f468-1f3fd-200d-1f3a8","1f468-1f3fe-200d-1f3a8","1f468-1f3ff-200d-1f3a8"],a:"4.0"},{n:["woman artist","female-artist"],u:"1f469-200d-1f3a8",v:["1f469-1f3fb-200d-1f3a8","1f469-1f3fc-200d-1f3a8","1f469-1f3fd-200d-1f3a8","1f469-1f3fe-200d-1f3a8","1f469-1f3ff-200d-1f3a8"],a:"4.0"},{n:["pilot"],u:"1f9d1-200d-2708-fe0f",v:["1f9d1-1f3fb-200d-2708-fe0f","1f9d1-1f3fc-200d-2708-fe0f","1f9d1-1f3fd-200d-2708-fe0f","1f9d1-1f3fe-200d-2708-fe0f","1f9d1-1f3ff-200d-2708-fe0f"],a:"12.1"},{n:["man pilot","male-pilot"],u:"1f468-200d-2708-fe0f",v:["1f468-1f3fb-200d-2708-fe0f","1f468-1f3fc-200d-2708-fe0f","1f468-1f3fd-200d-2708-fe0f","1f468-1f3fe-200d-2708-fe0f","1f468-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["woman pilot","female-pilot"],u:"1f469-200d-2708-fe0f",v:["1f469-1f3fb-200d-2708-fe0f","1f469-1f3fc-200d-2708-fe0f","1f469-1f3fd-200d-2708-fe0f","1f469-1f3fe-200d-2708-fe0f","1f469-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["astronaut"],u:"1f9d1-200d-1f680",v:["1f9d1-1f3fb-200d-1f680","1f9d1-1f3fc-200d-1f680","1f9d1-1f3fd-200d-1f680","1f9d1-1f3fe-200d-1f680","1f9d1-1f3ff-200d-1f680"],a:"12.1"},{n:["man astronaut","male-astronaut"],u:"1f468-200d-1f680",v:["1f468-1f3fb-200d-1f680","1f468-1f3fc-200d-1f680","1f468-1f3fd-200d-1f680","1f468-1f3fe-200d-1f680","1f468-1f3ff-200d-1f680"],a:"4.0"},{n:["woman astronaut","female-astronaut"],u:"1f469-200d-1f680",v:["1f469-1f3fb-200d-1f680","1f469-1f3fc-200d-1f680","1f469-1f3fd-200d-1f680","1f469-1f3fe-200d-1f680","1f469-1f3ff-200d-1f680"],a:"4.0"},{n:["firefighter"],u:"1f9d1-200d-1f692",v:["1f9d1-1f3fb-200d-1f692","1f9d1-1f3fc-200d-1f692","1f9d1-1f3fd-200d-1f692","1f9d1-1f3fe-200d-1f692","1f9d1-1f3ff-200d-1f692"],a:"12.1"},{n:["man firefighter","male-firefighter"],u:"1f468-200d-1f692",v:["1f468-1f3fb-200d-1f692","1f468-1f3fc-200d-1f692","1f468-1f3fd-200d-1f692","1f468-1f3fe-200d-1f692","1f468-1f3ff-200d-1f692"],a:"4.0"},{n:["woman firefighter","female-firefighter"],u:"1f469-200d-1f692",v:["1f469-1f3fb-200d-1f692","1f469-1f3fc-200d-1f692","1f469-1f3fd-200d-1f692","1f469-1f3fe-200d-1f692","1f469-1f3ff-200d-1f692"],a:"4.0"},{n:["cop","police officer"],u:"1f46e",v:["1f46e-1f3fb","1f46e-1f3fc","1f46e-1f3fd","1f46e-1f3fe","1f46e-1f3ff"],a:"0.6"},{n:["man police officer","male-police-officer"],u:"1f46e-200d-2642-fe0f",v:["1f46e-1f3fb-200d-2642-fe0f","1f46e-1f3fc-200d-2642-fe0f","1f46e-1f3fd-200d-2642-fe0f","1f46e-1f3fe-200d-2642-fe0f","1f46e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman police officer","female-police-officer"],u:"1f46e-200d-2640-fe0f",v:["1f46e-1f3fb-200d-2640-fe0f","1f46e-1f3fc-200d-2640-fe0f","1f46e-1f3fd-200d-2640-fe0f","1f46e-1f3fe-200d-2640-fe0f","1f46e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["detective","sleuth or spy"],u:"1f575-fe0f",v:["1f575-1f3fb","1f575-1f3fc","1f575-1f3fd","1f575-1f3fe","1f575-1f3ff"],a:"0.7"},{n:["man detective","male-detective"],u:"1f575-fe0f-200d-2642-fe0f",v:["1f575-1f3fb-200d-2642-fe0f","1f575-1f3fc-200d-2642-fe0f","1f575-1f3fd-200d-2642-fe0f","1f575-1f3fe-200d-2642-fe0f","1f575-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman detective","female-detective"],u:"1f575-fe0f-200d-2640-fe0f",v:["1f575-1f3fb-200d-2640-fe0f","1f575-1f3fc-200d-2640-fe0f","1f575-1f3fd-200d-2640-fe0f","1f575-1f3fe-200d-2640-fe0f","1f575-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["guardsman"],u:"1f482",v:["1f482-1f3fb","1f482-1f3fc","1f482-1f3fd","1f482-1f3fe","1f482-1f3ff"],a:"0.6"},{n:["man guard","male-guard"],u:"1f482-200d-2642-fe0f",v:["1f482-1f3fb-200d-2642-fe0f","1f482-1f3fc-200d-2642-fe0f","1f482-1f3fd-200d-2642-fe0f","1f482-1f3fe-200d-2642-fe0f","1f482-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman guard","female-guard"],u:"1f482-200d-2640-fe0f",v:["1f482-1f3fb-200d-2640-fe0f","1f482-1f3fc-200d-2640-fe0f","1f482-1f3fd-200d-2640-fe0f","1f482-1f3fe-200d-2640-fe0f","1f482-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ninja"],u:"1f977",v:["1f977-1f3fb","1f977-1f3fc","1f977-1f3fd","1f977-1f3fe","1f977-1f3ff"],a:"13.0"},{n:["construction worker"],u:"1f477",v:["1f477-1f3fb","1f477-1f3fc","1f477-1f3fd","1f477-1f3fe","1f477-1f3ff"],a:"0.6"},{n:["man construction worker","male-construction-worker"],u:"1f477-200d-2642-fe0f",v:["1f477-1f3fb-200d-2642-fe0f","1f477-1f3fc-200d-2642-fe0f","1f477-1f3fd-200d-2642-fe0f","1f477-1f3fe-200d-2642-fe0f","1f477-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman construction worker","female-construction-worker"],u:"1f477-200d-2640-fe0f",v:["1f477-1f3fb-200d-2640-fe0f","1f477-1f3fc-200d-2640-fe0f","1f477-1f3fd-200d-2640-fe0f","1f477-1f3fe-200d-2640-fe0f","1f477-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with crown"],u:"1fac5",v:["1fac5-1f3fb","1fac5-1f3fc","1fac5-1f3fd","1fac5-1f3fe","1fac5-1f3ff"],a:"14.0"},{n:["prince"],u:"1f934",v:["1f934-1f3fb","1f934-1f3fc","1f934-1f3fd","1f934-1f3fe","1f934-1f3ff"],a:"3.0"},{n:["princess"],u:"1f478",v:["1f478-1f3fb","1f478-1f3fc","1f478-1f3fd","1f478-1f3fe","1f478-1f3ff"],a:"0.6"},{n:["man with turban"],u:"1f473",v:["1f473-1f3fb","1f473-1f3fc","1f473-1f3fd","1f473-1f3fe","1f473-1f3ff"],a:"0.6"},{n:["man wearing turban","man-wearing-turban"],u:"1f473-200d-2642-fe0f",v:["1f473-1f3fb-200d-2642-fe0f","1f473-1f3fc-200d-2642-fe0f","1f473-1f3fd-200d-2642-fe0f","1f473-1f3fe-200d-2642-fe0f","1f473-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman wearing turban","woman-wearing-turban"],u:"1f473-200d-2640-fe0f",v:["1f473-1f3fb-200d-2640-fe0f","1f473-1f3fc-200d-2640-fe0f","1f473-1f3fd-200d-2640-fe0f","1f473-1f3fe-200d-2640-fe0f","1f473-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man with gua pi mao"],u:"1f472",v:["1f472-1f3fb","1f472-1f3fc","1f472-1f3fd","1f472-1f3fe","1f472-1f3ff"],a:"0.6"},{n:["person with headscarf"],u:"1f9d5",v:["1f9d5-1f3fb","1f9d5-1f3fc","1f9d5-1f3fd","1f9d5-1f3fe","1f9d5-1f3ff"],a:"5.0"},{n:["man in tuxedo","person in tuxedo"],u:"1f935",v:["1f935-1f3fb","1f935-1f3fc","1f935-1f3fd","1f935-1f3fe","1f935-1f3ff"],a:"3.0"},{n:["man in tuxedo"],u:"1f935-200d-2642-fe0f",v:["1f935-1f3fb-200d-2642-fe0f","1f935-1f3fc-200d-2642-fe0f","1f935-1f3fd-200d-2642-fe0f","1f935-1f3fe-200d-2642-fe0f","1f935-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman in tuxedo"],u:"1f935-200d-2640-fe0f",v:["1f935-1f3fb-200d-2640-fe0f","1f935-1f3fc-200d-2640-fe0f","1f935-1f3fd-200d-2640-fe0f","1f935-1f3fe-200d-2640-fe0f","1f935-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["bride with veil"],u:"1f470",v:["1f470-1f3fb","1f470-1f3fc","1f470-1f3fd","1f470-1f3fe","1f470-1f3ff"],a:"0.6"},{n:["man with veil"],u:"1f470-200d-2642-fe0f",v:["1f470-1f3fb-200d-2642-fe0f","1f470-1f3fc-200d-2642-fe0f","1f470-1f3fd-200d-2642-fe0f","1f470-1f3fe-200d-2642-fe0f","1f470-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman with veil"],u:"1f470-200d-2640-fe0f",v:["1f470-1f3fb-200d-2640-fe0f","1f470-1f3fc-200d-2640-fe0f","1f470-1f3fd-200d-2640-fe0f","1f470-1f3fe-200d-2640-fe0f","1f470-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["pregnant woman"],u:"1f930",v:["1f930-1f3fb","1f930-1f3fc","1f930-1f3fd","1f930-1f3fe","1f930-1f3ff"],a:"3.0"},{n:["pregnant man"],u:"1fac3",v:["1fac3-1f3fb","1fac3-1f3fc","1fac3-1f3fd","1fac3-1f3fe","1fac3-1f3ff"],a:"14.0"},{n:["pregnant person"],u:"1fac4",v:["1fac4-1f3fb","1fac4-1f3fc","1fac4-1f3fd","1fac4-1f3fe","1fac4-1f3ff"],a:"14.0"},{n:["breast-feeding"],u:"1f931",v:["1f931-1f3fb","1f931-1f3fc","1f931-1f3fd","1f931-1f3fe","1f931-1f3ff"],a:"5.0"},{n:["woman feeding baby"],u:"1f469-200d-1f37c",v:["1f469-1f3fb-200d-1f37c","1f469-1f3fc-200d-1f37c","1f469-1f3fd-200d-1f37c","1f469-1f3fe-200d-1f37c","1f469-1f3ff-200d-1f37c"],a:"13.0"},{n:["man feeding baby"],u:"1f468-200d-1f37c",v:["1f468-1f3fb-200d-1f37c","1f468-1f3fc-200d-1f37c","1f468-1f3fd-200d-1f37c","1f468-1f3fe-200d-1f37c","1f468-1f3ff-200d-1f37c"],a:"13.0"},{n:["person feeding baby"],u:"1f9d1-200d-1f37c",v:["1f9d1-1f3fb-200d-1f37c","1f9d1-1f3fc-200d-1f37c","1f9d1-1f3fd-200d-1f37c","1f9d1-1f3fe-200d-1f37c","1f9d1-1f3ff-200d-1f37c"],a:"13.0"},{n:["angel","baby angel"],u:"1f47c",v:["1f47c-1f3fb","1f47c-1f3fc","1f47c-1f3fd","1f47c-1f3fe","1f47c-1f3ff"],a:"0.6"},{n:["santa","father christmas"],u:"1f385",v:["1f385-1f3fb","1f385-1f3fc","1f385-1f3fd","1f385-1f3fe","1f385-1f3ff"],a:"0.6"},{n:["mrs claus","mother christmas"],u:"1f936",v:["1f936-1f3fb","1f936-1f3fc","1f936-1f3fd","1f936-1f3fe","1f936-1f3ff"],a:"3.0"},{n:["mx claus"],u:"1f9d1-200d-1f384",v:["1f9d1-1f3fb-200d-1f384","1f9d1-1f3fc-200d-1f384","1f9d1-1f3fd-200d-1f384","1f9d1-1f3fe-200d-1f384","1f9d1-1f3ff-200d-1f384"],a:"13.0"},{n:["superhero"],u:"1f9b8",v:["1f9b8-1f3fb","1f9b8-1f3fc","1f9b8-1f3fd","1f9b8-1f3fe","1f9b8-1f3ff"],a:"11.0"},{n:["man superhero","male superhero"],u:"1f9b8-200d-2642-fe0f",v:["1f9b8-1f3fb-200d-2642-fe0f","1f9b8-1f3fc-200d-2642-fe0f","1f9b8-1f3fd-200d-2642-fe0f","1f9b8-1f3fe-200d-2642-fe0f","1f9b8-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman superhero","female superhero"],u:"1f9b8-200d-2640-fe0f",v:["1f9b8-1f3fb-200d-2640-fe0f","1f9b8-1f3fc-200d-2640-fe0f","1f9b8-1f3fd-200d-2640-fe0f","1f9b8-1f3fe-200d-2640-fe0f","1f9b8-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["supervillain"],u:"1f9b9",v:["1f9b9-1f3fb","1f9b9-1f3fc","1f9b9-1f3fd","1f9b9-1f3fe","1f9b9-1f3ff"],a:"11.0"},{n:["man supervillain","male supervillain"],u:"1f9b9-200d-2642-fe0f",v:["1f9b9-1f3fb-200d-2642-fe0f","1f9b9-1f3fc-200d-2642-fe0f","1f9b9-1f3fd-200d-2642-fe0f","1f9b9-1f3fe-200d-2642-fe0f","1f9b9-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman supervillain","female supervillain"],u:"1f9b9-200d-2640-fe0f",v:["1f9b9-1f3fb-200d-2640-fe0f","1f9b9-1f3fc-200d-2640-fe0f","1f9b9-1f3fd-200d-2640-fe0f","1f9b9-1f3fe-200d-2640-fe0f","1f9b9-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["mage"],u:"1f9d9",v:["1f9d9-1f3fb","1f9d9-1f3fc","1f9d9-1f3fd","1f9d9-1f3fe","1f9d9-1f3ff"],a:"5.0"},{n:["man mage","male mage"],u:"1f9d9-200d-2642-fe0f",v:["1f9d9-1f3fb-200d-2642-fe0f","1f9d9-1f3fc-200d-2642-fe0f","1f9d9-1f3fd-200d-2642-fe0f","1f9d9-1f3fe-200d-2642-fe0f","1f9d9-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman mage","female mage"],u:"1f9d9-200d-2640-fe0f",v:["1f9d9-1f3fb-200d-2640-fe0f","1f9d9-1f3fc-200d-2640-fe0f","1f9d9-1f3fd-200d-2640-fe0f","1f9d9-1f3fe-200d-2640-fe0f","1f9d9-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fairy"],u:"1f9da",v:["1f9da-1f3fb","1f9da-1f3fc","1f9da-1f3fd","1f9da-1f3fe","1f9da-1f3ff"],a:"5.0"},{n:["man fairy","male fairy"],u:"1f9da-200d-2642-fe0f",v:["1f9da-1f3fb-200d-2642-fe0f","1f9da-1f3fc-200d-2642-fe0f","1f9da-1f3fd-200d-2642-fe0f","1f9da-1f3fe-200d-2642-fe0f","1f9da-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman fairy","female fairy"],u:"1f9da-200d-2640-fe0f",v:["1f9da-1f3fb-200d-2640-fe0f","1f9da-1f3fc-200d-2640-fe0f","1f9da-1f3fd-200d-2640-fe0f","1f9da-1f3fe-200d-2640-fe0f","1f9da-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["vampire"],u:"1f9db",v:["1f9db-1f3fb","1f9db-1f3fc","1f9db-1f3fd","1f9db-1f3fe","1f9db-1f3ff"],a:"5.0"},{n:["man vampire","male vampire"],u:"1f9db-200d-2642-fe0f",v:["1f9db-1f3fb-200d-2642-fe0f","1f9db-1f3fc-200d-2642-fe0f","1f9db-1f3fd-200d-2642-fe0f","1f9db-1f3fe-200d-2642-fe0f","1f9db-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman vampire","female vampire"],u:"1f9db-200d-2640-fe0f",v:["1f9db-1f3fb-200d-2640-fe0f","1f9db-1f3fc-200d-2640-fe0f","1f9db-1f3fd-200d-2640-fe0f","1f9db-1f3fe-200d-2640-fe0f","1f9db-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["merperson"],u:"1f9dc",v:["1f9dc-1f3fb","1f9dc-1f3fc","1f9dc-1f3fd","1f9dc-1f3fe","1f9dc-1f3ff"],a:"5.0"},{n:["merman"],u:"1f9dc-200d-2642-fe0f",v:["1f9dc-1f3fb-200d-2642-fe0f","1f9dc-1f3fc-200d-2642-fe0f","1f9dc-1f3fd-200d-2642-fe0f","1f9dc-1f3fe-200d-2642-fe0f","1f9dc-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["mermaid"],u:"1f9dc-200d-2640-fe0f",v:["1f9dc-1f3fb-200d-2640-fe0f","1f9dc-1f3fc-200d-2640-fe0f","1f9dc-1f3fd-200d-2640-fe0f","1f9dc-1f3fe-200d-2640-fe0f","1f9dc-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["elf"],u:"1f9dd",v:["1f9dd-1f3fb","1f9dd-1f3fc","1f9dd-1f3fd","1f9dd-1f3fe","1f9dd-1f3ff"],a:"5.0"},{n:["man elf","male elf"],u:"1f9dd-200d-2642-fe0f",v:["1f9dd-1f3fb-200d-2642-fe0f","1f9dd-1f3fc-200d-2642-fe0f","1f9dd-1f3fd-200d-2642-fe0f","1f9dd-1f3fe-200d-2642-fe0f","1f9dd-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman elf","female elf"],u:"1f9dd-200d-2640-fe0f",v:["1f9dd-1f3fb-200d-2640-fe0f","1f9dd-1f3fc-200d-2640-fe0f","1f9dd-1f3fd-200d-2640-fe0f","1f9dd-1f3fe-200d-2640-fe0f","1f9dd-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["genie"],u:"1f9de",a:"5.0"},{n:["man genie","male genie"],u:"1f9de-200d-2642-fe0f",a:"5.0"},{n:["woman genie","female genie"],u:"1f9de-200d-2640-fe0f",a:"5.0"},{n:["zombie"],u:"1f9df",a:"5.0"},{n:["man zombie","male zombie"],u:"1f9df-200d-2642-fe0f",a:"5.0"},{n:["woman zombie","female zombie"],u:"1f9df-200d-2640-fe0f",a:"5.0"},{n:["troll"],u:"1f9cc",a:"14.0"},{n:["massage","face massage"],u:"1f486",v:["1f486-1f3fb","1f486-1f3fc","1f486-1f3fd","1f486-1f3fe","1f486-1f3ff"],a:"0.6"},{n:["man getting massage","man-getting-massage"],u:"1f486-200d-2642-fe0f",v:["1f486-1f3fb-200d-2642-fe0f","1f486-1f3fc-200d-2642-fe0f","1f486-1f3fd-200d-2642-fe0f","1f486-1f3fe-200d-2642-fe0f","1f486-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting massage","woman-getting-massage"],u:"1f486-200d-2640-fe0f",v:["1f486-1f3fb-200d-2640-fe0f","1f486-1f3fc-200d-2640-fe0f","1f486-1f3fd-200d-2640-fe0f","1f486-1f3fe-200d-2640-fe0f","1f486-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["haircut"],u:"1f487",v:["1f487-1f3fb","1f487-1f3fc","1f487-1f3fd","1f487-1f3fe","1f487-1f3ff"],a:"0.6"},{n:["man getting haircut","man-getting-haircut"],u:"1f487-200d-2642-fe0f",v:["1f487-1f3fb-200d-2642-fe0f","1f487-1f3fc-200d-2642-fe0f","1f487-1f3fd-200d-2642-fe0f","1f487-1f3fe-200d-2642-fe0f","1f487-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting haircut","woman-getting-haircut"],u:"1f487-200d-2640-fe0f",v:["1f487-1f3fb-200d-2640-fe0f","1f487-1f3fc-200d-2640-fe0f","1f487-1f3fd-200d-2640-fe0f","1f487-1f3fe-200d-2640-fe0f","1f487-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["walking","pedestrian"],u:"1f6b6",v:["1f6b6-1f3fb","1f6b6-1f3fc","1f6b6-1f3fd","1f6b6-1f3fe","1f6b6-1f3ff"],a:"0.6"},{n:["man walking","man-walking"],u:"1f6b6-200d-2642-fe0f",v:["1f6b6-1f3fb-200d-2642-fe0f","1f6b6-1f3fc-200d-2642-fe0f","1f6b6-1f3fd-200d-2642-fe0f","1f6b6-1f3fe-200d-2642-fe0f","1f6b6-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman walking","woman-walking"],u:"1f6b6-200d-2640-fe0f",v:["1f6b6-1f3fb-200d-2640-fe0f","1f6b6-1f3fc-200d-2640-fe0f","1f6b6-1f3fd-200d-2640-fe0f","1f6b6-1f3fe-200d-2640-fe0f","1f6b6-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["standing person"],u:"1f9cd",v:["1f9cd-1f3fb","1f9cd-1f3fc","1f9cd-1f3fd","1f9cd-1f3fe","1f9cd-1f3ff"],a:"12.0"},{n:["man standing"],u:"1f9cd-200d-2642-fe0f",v:["1f9cd-1f3fb-200d-2642-fe0f","1f9cd-1f3fc-200d-2642-fe0f","1f9cd-1f3fd-200d-2642-fe0f","1f9cd-1f3fe-200d-2642-fe0f","1f9cd-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman standing"],u:"1f9cd-200d-2640-fe0f",v:["1f9cd-1f3fb-200d-2640-fe0f","1f9cd-1f3fc-200d-2640-fe0f","1f9cd-1f3fd-200d-2640-fe0f","1f9cd-1f3fe-200d-2640-fe0f","1f9cd-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["kneeling person"],u:"1f9ce",v:["1f9ce-1f3fb","1f9ce-1f3fc","1f9ce-1f3fd","1f9ce-1f3fe","1f9ce-1f3ff"],a:"12.0"},{n:["man kneeling"],u:"1f9ce-200d-2642-fe0f",v:["1f9ce-1f3fb-200d-2642-fe0f","1f9ce-1f3fc-200d-2642-fe0f","1f9ce-1f3fd-200d-2642-fe0f","1f9ce-1f3fe-200d-2642-fe0f","1f9ce-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman kneeling"],u:"1f9ce-200d-2640-fe0f",v:["1f9ce-1f3fb-200d-2640-fe0f","1f9ce-1f3fc-200d-2640-fe0f","1f9ce-1f3fd-200d-2640-fe0f","1f9ce-1f3fe-200d-2640-fe0f","1f9ce-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["person with white cane","person with probing cane"],u:"1f9d1-200d-1f9af",v:["1f9d1-1f3fb-200d-1f9af","1f9d1-1f3fc-200d-1f9af","1f9d1-1f3fd-200d-1f9af","1f9d1-1f3fe-200d-1f9af","1f9d1-1f3ff-200d-1f9af"],a:"12.1"},{n:["man with white cane","man with probing cane"],u:"1f468-200d-1f9af",v:["1f468-1f3fb-200d-1f9af","1f468-1f3fc-200d-1f9af","1f468-1f3fd-200d-1f9af","1f468-1f3fe-200d-1f9af","1f468-1f3ff-200d-1f9af"],a:"12.0"},{n:["woman with white cane","woman with probing cane"],u:"1f469-200d-1f9af",v:["1f469-1f3fb-200d-1f9af","1f469-1f3fc-200d-1f9af","1f469-1f3fd-200d-1f9af","1f469-1f3fe-200d-1f9af","1f469-1f3ff-200d-1f9af"],a:"12.0"},{n:["person in motorized wheelchair"],u:"1f9d1-200d-1f9bc",v:["1f9d1-1f3fb-200d-1f9bc","1f9d1-1f3fc-200d-1f9bc","1f9d1-1f3fd-200d-1f9bc","1f9d1-1f3fe-200d-1f9bc","1f9d1-1f3ff-200d-1f9bc"],a:"12.1"},{n:["man in motorized wheelchair"],u:"1f468-200d-1f9bc",v:["1f468-1f3fb-200d-1f9bc","1f468-1f3fc-200d-1f9bc","1f468-1f3fd-200d-1f9bc","1f468-1f3fe-200d-1f9bc","1f468-1f3ff-200d-1f9bc"],a:"12.0"},{n:["woman in motorized wheelchair"],u:"1f469-200d-1f9bc",v:["1f469-1f3fb-200d-1f9bc","1f469-1f3fc-200d-1f9bc","1f469-1f3fd-200d-1f9bc","1f469-1f3fe-200d-1f9bc","1f469-1f3ff-200d-1f9bc"],a:"12.0"},{n:["person in manual wheelchair"],u:"1f9d1-200d-1f9bd",v:["1f9d1-1f3fb-200d-1f9bd","1f9d1-1f3fc-200d-1f9bd","1f9d1-1f3fd-200d-1f9bd","1f9d1-1f3fe-200d-1f9bd","1f9d1-1f3ff-200d-1f9bd"],a:"12.1"},{n:["man in manual wheelchair"],u:"1f468-200d-1f9bd",v:["1f468-1f3fb-200d-1f9bd","1f468-1f3fc-200d-1f9bd","1f468-1f3fd-200d-1f9bd","1f468-1f3fe-200d-1f9bd","1f468-1f3ff-200d-1f9bd"],a:"12.0"},{n:["woman in manual wheelchair"],u:"1f469-200d-1f9bd",v:["1f469-1f3fb-200d-1f9bd","1f469-1f3fc-200d-1f9bd","1f469-1f3fd-200d-1f9bd","1f469-1f3fe-200d-1f9bd","1f469-1f3ff-200d-1f9bd"],a:"12.0"},{n:["runner","running"],u:"1f3c3",v:["1f3c3-1f3fb","1f3c3-1f3fc","1f3c3-1f3fd","1f3c3-1f3fe","1f3c3-1f3ff"],a:"0.6"},{n:["man running","man-running"],u:"1f3c3-200d-2642-fe0f",v:["1f3c3-1f3fb-200d-2642-fe0f","1f3c3-1f3fc-200d-2642-fe0f","1f3c3-1f3fd-200d-2642-fe0f","1f3c3-1f3fe-200d-2642-fe0f","1f3c3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman running","woman-running"],u:"1f3c3-200d-2640-fe0f",v:["1f3c3-1f3fb-200d-2640-fe0f","1f3c3-1f3fc-200d-2640-fe0f","1f3c3-1f3fd-200d-2640-fe0f","1f3c3-1f3fe-200d-2640-fe0f","1f3c3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["dancer"],u:"1f483",v:["1f483-1f3fb","1f483-1f3fc","1f483-1f3fd","1f483-1f3fe","1f483-1f3ff"],a:"0.6"},{n:["man dancing"],u:"1f57a",v:["1f57a-1f3fb","1f57a-1f3fc","1f57a-1f3fd","1f57a-1f3fe","1f57a-1f3ff"],a:"3.0"},{n:["person in suit levitating","man in business suit levitating"],u:"1f574-fe0f",v:["1f574-1f3fb","1f574-1f3fc","1f574-1f3fd","1f574-1f3fe","1f574-1f3ff"],a:"0.7"},{n:["dancers","woman with bunny ears"],u:"1f46f",a:"0.6"},{n:["men with bunny ears","men-with-bunny-ears-partying","man-with-bunny-ears-partying"],u:"1f46f-200d-2642-fe0f",a:"4.0"},{n:["women with bunny ears","women-with-bunny-ears-partying","woman-with-bunny-ears-partying"],u:"1f46f-200d-2640-fe0f",a:"4.0"},{n:["person in steamy room"],u:"1f9d6",v:["1f9d6-1f3fb","1f9d6-1f3fc","1f9d6-1f3fd","1f9d6-1f3fe","1f9d6-1f3ff"],a:"5.0"},{n:["man in steamy room"],u:"1f9d6-200d-2642-fe0f",v:["1f9d6-1f3fb-200d-2642-fe0f","1f9d6-1f3fc-200d-2642-fe0f","1f9d6-1f3fd-200d-2642-fe0f","1f9d6-1f3fe-200d-2642-fe0f","1f9d6-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in steamy room"],u:"1f9d6-200d-2640-fe0f",v:["1f9d6-1f3fb-200d-2640-fe0f","1f9d6-1f3fc-200d-2640-fe0f","1f9d6-1f3fd-200d-2640-fe0f","1f9d6-1f3fe-200d-2640-fe0f","1f9d6-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["person climbing"],u:"1f9d7",v:["1f9d7-1f3fb","1f9d7-1f3fc","1f9d7-1f3fd","1f9d7-1f3fe","1f9d7-1f3ff"],a:"5.0"},{n:["man climbing"],u:"1f9d7-200d-2642-fe0f",v:["1f9d7-1f3fb-200d-2642-fe0f","1f9d7-1f3fc-200d-2642-fe0f","1f9d7-1f3fd-200d-2642-fe0f","1f9d7-1f3fe-200d-2642-fe0f","1f9d7-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman climbing"],u:"1f9d7-200d-2640-fe0f",v:["1f9d7-1f3fb-200d-2640-fe0f","1f9d7-1f3fc-200d-2640-fe0f","1f9d7-1f3fd-200d-2640-fe0f","1f9d7-1f3fe-200d-2640-fe0f","1f9d7-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fencer"],u:"1f93a",a:"3.0"},{n:["horse racing"],u:"1f3c7",v:["1f3c7-1f3fb","1f3c7-1f3fc","1f3c7-1f3fd","1f3c7-1f3fe","1f3c7-1f3ff"],a:"1.0"},{n:["skier"],u:"26f7-fe0f",a:"0.7"},{n:["snowboarder"],u:"1f3c2",v:["1f3c2-1f3fb","1f3c2-1f3fc","1f3c2-1f3fd","1f3c2-1f3fe","1f3c2-1f3ff"],a:"0.6"},{n:["golfer","person golfing"],u:"1f3cc-fe0f",v:["1f3cc-1f3fb","1f3cc-1f3fc","1f3cc-1f3fd","1f3cc-1f3fe","1f3cc-1f3ff"],a:"0.7"},{n:["man golfing","man-golfing"],u:"1f3cc-fe0f-200d-2642-fe0f",v:["1f3cc-1f3fb-200d-2642-fe0f","1f3cc-1f3fc-200d-2642-fe0f","1f3cc-1f3fd-200d-2642-fe0f","1f3cc-1f3fe-200d-2642-fe0f","1f3cc-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman golfing","woman-golfing"],u:"1f3cc-fe0f-200d-2640-fe0f",v:["1f3cc-1f3fb-200d-2640-fe0f","1f3cc-1f3fc-200d-2640-fe0f","1f3cc-1f3fd-200d-2640-fe0f","1f3cc-1f3fe-200d-2640-fe0f","1f3cc-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["surfer"],u:"1f3c4",v:["1f3c4-1f3fb","1f3c4-1f3fc","1f3c4-1f3fd","1f3c4-1f3fe","1f3c4-1f3ff"],a:"0.6"},{n:["man surfing","man-surfing"],u:"1f3c4-200d-2642-fe0f",v:["1f3c4-1f3fb-200d-2642-fe0f","1f3c4-1f3fc-200d-2642-fe0f","1f3c4-1f3fd-200d-2642-fe0f","1f3c4-1f3fe-200d-2642-fe0f","1f3c4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman surfing","woman-surfing"],u:"1f3c4-200d-2640-fe0f",v:["1f3c4-1f3fb-200d-2640-fe0f","1f3c4-1f3fc-200d-2640-fe0f","1f3c4-1f3fd-200d-2640-fe0f","1f3c4-1f3fe-200d-2640-fe0f","1f3c4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["rowboat"],u:"1f6a3",v:["1f6a3-1f3fb","1f6a3-1f3fc","1f6a3-1f3fd","1f6a3-1f3fe","1f6a3-1f3ff"],a:"1.0"},{n:["man rowing boat","man-rowing-boat"],u:"1f6a3-200d-2642-fe0f",v:["1f6a3-1f3fb-200d-2642-fe0f","1f6a3-1f3fc-200d-2642-fe0f","1f6a3-1f3fd-200d-2642-fe0f","1f6a3-1f3fe-200d-2642-fe0f","1f6a3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman rowing boat","woman-rowing-boat"],u:"1f6a3-200d-2640-fe0f",v:["1f6a3-1f3fb-200d-2640-fe0f","1f6a3-1f3fc-200d-2640-fe0f","1f6a3-1f3fd-200d-2640-fe0f","1f6a3-1f3fe-200d-2640-fe0f","1f6a3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["swimmer"],u:"1f3ca",v:["1f3ca-1f3fb","1f3ca-1f3fc","1f3ca-1f3fd","1f3ca-1f3fe","1f3ca-1f3ff"],a:"0.6"},{n:["man swimming","man-swimming"],u:"1f3ca-200d-2642-fe0f",v:["1f3ca-1f3fb-200d-2642-fe0f","1f3ca-1f3fc-200d-2642-fe0f","1f3ca-1f3fd-200d-2642-fe0f","1f3ca-1f3fe-200d-2642-fe0f","1f3ca-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman swimming","woman-swimming"],u:"1f3ca-200d-2640-fe0f",v:["1f3ca-1f3fb-200d-2640-fe0f","1f3ca-1f3fc-200d-2640-fe0f","1f3ca-1f3fd-200d-2640-fe0f","1f3ca-1f3fe-200d-2640-fe0f","1f3ca-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with ball","person bouncing ball"],u:"26f9-fe0f",v:["26f9-1f3fb","26f9-1f3fc","26f9-1f3fd","26f9-1f3fe","26f9-1f3ff"],a:"0.7"},{n:["man bouncing ball","man-bouncing-ball"],u:"26f9-fe0f-200d-2642-fe0f",v:["26f9-1f3fb-200d-2642-fe0f","26f9-1f3fc-200d-2642-fe0f","26f9-1f3fd-200d-2642-fe0f","26f9-1f3fe-200d-2642-fe0f","26f9-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bouncing ball","woman-bouncing-ball"],u:"26f9-fe0f-200d-2640-fe0f",v:["26f9-1f3fb-200d-2640-fe0f","26f9-1f3fc-200d-2640-fe0f","26f9-1f3fd-200d-2640-fe0f","26f9-1f3fe-200d-2640-fe0f","26f9-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["weight lifter","person lifting weights"],u:"1f3cb-fe0f",v:["1f3cb-1f3fb","1f3cb-1f3fc","1f3cb-1f3fd","1f3cb-1f3fe","1f3cb-1f3ff"],a:"0.7"},{n:["man lifting weights","man-lifting-weights"],u:"1f3cb-fe0f-200d-2642-fe0f",v:["1f3cb-1f3fb-200d-2642-fe0f","1f3cb-1f3fc-200d-2642-fe0f","1f3cb-1f3fd-200d-2642-fe0f","1f3cb-1f3fe-200d-2642-fe0f","1f3cb-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman lifting weights","woman-lifting-weights"],u:"1f3cb-fe0f-200d-2640-fe0f",v:["1f3cb-1f3fb-200d-2640-fe0f","1f3cb-1f3fc-200d-2640-fe0f","1f3cb-1f3fd-200d-2640-fe0f","1f3cb-1f3fe-200d-2640-fe0f","1f3cb-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["bicyclist"],u:"1f6b4",v:["1f6b4-1f3fb","1f6b4-1f3fc","1f6b4-1f3fd","1f6b4-1f3fe","1f6b4-1f3ff"],a:"1.0"},{n:["man biking","man-biking"],u:"1f6b4-200d-2642-fe0f",v:["1f6b4-1f3fb-200d-2642-fe0f","1f6b4-1f3fc-200d-2642-fe0f","1f6b4-1f3fd-200d-2642-fe0f","1f6b4-1f3fe-200d-2642-fe0f","1f6b4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman biking","woman-biking"],u:"1f6b4-200d-2640-fe0f",v:["1f6b4-1f3fb-200d-2640-fe0f","1f6b4-1f3fc-200d-2640-fe0f","1f6b4-1f3fd-200d-2640-fe0f","1f6b4-1f3fe-200d-2640-fe0f","1f6b4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["mountain bicyclist"],u:"1f6b5",v:["1f6b5-1f3fb","1f6b5-1f3fc","1f6b5-1f3fd","1f6b5-1f3fe","1f6b5-1f3ff"],a:"1.0"},{n:["man mountain biking","man-mountain-biking"],u:"1f6b5-200d-2642-fe0f",v:["1f6b5-1f3fb-200d-2642-fe0f","1f6b5-1f3fc-200d-2642-fe0f","1f6b5-1f3fd-200d-2642-fe0f","1f6b5-1f3fe-200d-2642-fe0f","1f6b5-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman mountain biking","woman-mountain-biking"],u:"1f6b5-200d-2640-fe0f",v:["1f6b5-1f3fb-200d-2640-fe0f","1f6b5-1f3fc-200d-2640-fe0f","1f6b5-1f3fd-200d-2640-fe0f","1f6b5-1f3fe-200d-2640-fe0f","1f6b5-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person doing cartwheel"],u:"1f938",v:["1f938-1f3fb","1f938-1f3fc","1f938-1f3fd","1f938-1f3fe","1f938-1f3ff"],a:"3.0"},{n:["man cartwheeling","man-cartwheeling"],u:"1f938-200d-2642-fe0f",v:["1f938-1f3fb-200d-2642-fe0f","1f938-1f3fc-200d-2642-fe0f","1f938-1f3fd-200d-2642-fe0f","1f938-1f3fe-200d-2642-fe0f","1f938-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman cartwheeling","woman-cartwheeling"],u:"1f938-200d-2640-fe0f",v:["1f938-1f3fb-200d-2640-fe0f","1f938-1f3fc-200d-2640-fe0f","1f938-1f3fd-200d-2640-fe0f","1f938-1f3fe-200d-2640-fe0f","1f938-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["wrestlers"],u:"1f93c",a:"3.0"},{n:["men wrestling","man-wrestling"],u:"1f93c-200d-2642-fe0f",a:"4.0"},{n:["women wrestling","woman-wrestling"],u:"1f93c-200d-2640-fe0f",a:"4.0"},{n:["water polo"],u:"1f93d",v:["1f93d-1f3fb","1f93d-1f3fc","1f93d-1f3fd","1f93d-1f3fe","1f93d-1f3ff"],a:"3.0"},{n:["man playing water polo","man-playing-water-polo"],u:"1f93d-200d-2642-fe0f",v:["1f93d-1f3fb-200d-2642-fe0f","1f93d-1f3fc-200d-2642-fe0f","1f93d-1f3fd-200d-2642-fe0f","1f93d-1f3fe-200d-2642-fe0f","1f93d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing water polo","woman-playing-water-polo"],u:"1f93d-200d-2640-fe0f",v:["1f93d-1f3fb-200d-2640-fe0f","1f93d-1f3fc-200d-2640-fe0f","1f93d-1f3fd-200d-2640-fe0f","1f93d-1f3fe-200d-2640-fe0f","1f93d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["handball"],u:"1f93e",v:["1f93e-1f3fb","1f93e-1f3fc","1f93e-1f3fd","1f93e-1f3fe","1f93e-1f3ff"],a:"3.0"},{n:["man playing handball","man-playing-handball"],u:"1f93e-200d-2642-fe0f",v:["1f93e-1f3fb-200d-2642-fe0f","1f93e-1f3fc-200d-2642-fe0f","1f93e-1f3fd-200d-2642-fe0f","1f93e-1f3fe-200d-2642-fe0f","1f93e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing handball","woman-playing-handball"],u:"1f93e-200d-2640-fe0f",v:["1f93e-1f3fb-200d-2640-fe0f","1f93e-1f3fc-200d-2640-fe0f","1f93e-1f3fd-200d-2640-fe0f","1f93e-1f3fe-200d-2640-fe0f","1f93e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["juggling"],u:"1f939",v:["1f939-1f3fb","1f939-1f3fc","1f939-1f3fd","1f939-1f3fe","1f939-1f3ff"],a:"3.0"},{n:["man juggling","man-juggling"],u:"1f939-200d-2642-fe0f",v:["1f939-1f3fb-200d-2642-fe0f","1f939-1f3fc-200d-2642-fe0f","1f939-1f3fd-200d-2642-fe0f","1f939-1f3fe-200d-2642-fe0f","1f939-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman juggling","woman-juggling"],u:"1f939-200d-2640-fe0f",v:["1f939-1f3fb-200d-2640-fe0f","1f939-1f3fc-200d-2640-fe0f","1f939-1f3fd-200d-2640-fe0f","1f939-1f3fe-200d-2640-fe0f","1f939-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person in lotus position"],u:"1f9d8",v:["1f9d8-1f3fb","1f9d8-1f3fc","1f9d8-1f3fd","1f9d8-1f3fe","1f9d8-1f3ff"],a:"5.0"},{n:["man in lotus position"],u:"1f9d8-200d-2642-fe0f",v:["1f9d8-1f3fb-200d-2642-fe0f","1f9d8-1f3fc-200d-2642-fe0f","1f9d8-1f3fd-200d-2642-fe0f","1f9d8-1f3fe-200d-2642-fe0f","1f9d8-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in lotus position"],u:"1f9d8-200d-2640-fe0f",v:["1f9d8-1f3fb-200d-2640-fe0f","1f9d8-1f3fc-200d-2640-fe0f","1f9d8-1f3fd-200d-2640-fe0f","1f9d8-1f3fe-200d-2640-fe0f","1f9d8-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["bath"],u:"1f6c0",v:["1f6c0-1f3fb","1f6c0-1f3fc","1f6c0-1f3fd","1f6c0-1f3fe","1f6c0-1f3ff"],a:"0.6"},{n:["sleeping accommodation"],u:"1f6cc",v:["1f6cc-1f3fb","1f6cc-1f3fc","1f6cc-1f3fd","1f6cc-1f3fe","1f6cc-1f3ff"],a:"1.0"},{n:["people holding hands"],u:"1f9d1-200d-1f91d-200d-1f9d1",v:["1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff"],a:"12.0"},{n:["women holding hands","two women holding hands"],u:"1f46d",v:["1f46d-1f3fb","1f46d-1f3fc","1f46d-1f3fd","1f46d-1f3fe","1f46d-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe"],a:"1.0"},{n:["couple","man and woman holding hands","woman and man holding hands"],u:"1f46b",v:["1f46b-1f3fb","1f46b-1f3fc","1f46b-1f3fd","1f46b-1f3fe","1f46b-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"0.6"},{n:["men holding hands","two men holding hands"],u:"1f46c",v:["1f46c-1f3fb","1f46c-1f3fc","1f46c-1f3fd","1f46c-1f3fe","1f46c-1f3ff","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"1.0"},{n:["kiss","couplekiss"],u:"1f48f",v:["1f48f-1f3fb","1f48f-1f3fc","1f48f-1f3fd","1f48f-1f3fe","1f48f-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-kiss-man","kiss: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["man-kiss-man","kiss: man, man"],u:"1f468-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-kiss-woman","kiss: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff"],a:"2.0"},{n:["couple with heart"],u:"1f491",v:["1f491-1f3fb","1f491-1f3fc","1f491-1f3fd","1f491-1f3fe","1f491-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-heart-man","couple with heart: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["man-heart-man","couple with heart: man, man"],u:"1f468-200d-2764-fe0f-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-heart-woman","couple with heart: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3ff"],a:"2.0"},{n:["family"],u:"1f46a",a:"0.6"},{n:["man-woman-boy","family: man, woman, boy"],u:"1f468-200d-1f469-200d-1f466",a:"2.0"},{n:["man-woman-girl","family: man, woman, girl"],u:"1f468-200d-1f469-200d-1f467",a:"2.0"},{n:["man-woman-girl-boy","family: man, woman, girl, boy"],u:"1f468-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["man-woman-boy-boy","family: man, woman, boy, boy"],u:"1f468-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["man-woman-girl-girl","family: man, woman, girl, girl"],u:"1f468-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-man-boy","family: man, man, boy"],u:"1f468-200d-1f468-200d-1f466",a:"2.0"},{n:["man-man-girl","family: man, man, girl"],u:"1f468-200d-1f468-200d-1f467",a:"2.0"},{n:["man-man-girl-boy","family: man, man, girl, boy"],u:"1f468-200d-1f468-200d-1f467-200d-1f466",a:"2.0"},{n:["man-man-boy-boy","family: man, man, boy, boy"],u:"1f468-200d-1f468-200d-1f466-200d-1f466",a:"2.0"},{n:["man-man-girl-girl","family: man, man, girl, girl"],u:"1f468-200d-1f468-200d-1f467-200d-1f467",a:"2.0"},{n:["woman-woman-boy","family: woman, woman, boy"],u:"1f469-200d-1f469-200d-1f466",a:"2.0"},{n:["woman-woman-girl","family: woman, woman, girl"],u:"1f469-200d-1f469-200d-1f467",a:"2.0"},{n:["woman-woman-girl-boy","family: woman, woman, girl, boy"],u:"1f469-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["woman-woman-boy-boy","family: woman, woman, boy, boy"],u:"1f469-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["woman-woman-girl-girl","family: woman, woman, girl, girl"],u:"1f469-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-boy","family: man, boy"],u:"1f468-200d-1f466",a:"4.0"},{n:["man-boy-boy","family: man, boy, boy"],u:"1f468-200d-1f466-200d-1f466",a:"4.0"},{n:["man-girl","family: man, girl"],u:"1f468-200d-1f467",a:"4.0"},{n:["man-girl-boy","family: man, girl, boy"],u:"1f468-200d-1f467-200d-1f466",a:"4.0"},{n:["man-girl-girl","family: man, girl, girl"],u:"1f468-200d-1f467-200d-1f467",a:"4.0"},{n:["woman-boy","family: woman, boy"],u:"1f469-200d-1f466",a:"4.0"},{n:["woman-boy-boy","family: woman, boy, boy"],u:"1f469-200d-1f466-200d-1f466",a:"4.0"},{n:["woman-girl","family: woman, girl"],u:"1f469-200d-1f467",a:"4.0"},{n:["woman-girl-boy","family: woman, girl, boy"],u:"1f469-200d-1f467-200d-1f466",a:"4.0"},{n:["woman-girl-girl","family: woman, girl, girl"],u:"1f469-200d-1f467-200d-1f467",a:"4.0"},{n:["speaking head","speaking head in silhouette"],u:"1f5e3-fe0f",a:"0.7"},{n:["bust in silhouette"],u:"1f464",a:"0.6"},{n:["busts in silhouette"],u:"1f465",a:"1.0"},{n:["people hugging"],u:"1fac2",a:"13.0"},{n:["footprints"],u:"1f463",a:"0.6"}],animals_nature:[{n:["monkey face"],u:"1f435",a:"0.6"},{n:["monkey"],u:"1f412",a:"0.6"},{n:["gorilla"],u:"1f98d",a:"3.0"},{n:["orangutan"],u:"1f9a7",a:"12.0"},{n:["dog","dog face"],u:"1f436",a:"0.6"},{n:["dog","dog2"],u:"1f415",a:"0.7"},{n:["guide dog"],u:"1f9ae",a:"12.0"},{n:["service dog"],u:"1f415-200d-1f9ba",a:"12.0"},{n:["poodle"],u:"1f429",a:"0.6"},{n:["wolf","wolf face"],u:"1f43a",a:"0.6"},{n:["fox face"],u:"1f98a",a:"3.0"},{n:["raccoon"],u:"1f99d",a:"11.0"},{n:["cat","cat face"],u:"1f431",a:"0.6"},{n:["cat","cat2"],u:"1f408",a:"0.7"},{n:["black cat"],u:"1f408-200d-2b1b",a:"13.0"},{n:["lion face"],u:"1f981",a:"1.0"},{n:["tiger","tiger face"],u:"1f42f",a:"0.6"},{n:["tiger","tiger2"],u:"1f405",a:"1.0"},{n:["leopard"],u:"1f406",a:"1.0"},{n:["horse","horse face"],u:"1f434",a:"0.6"},{n:["horse","racehorse"],u:"1f40e",a:"0.6"},{n:["unicorn face"],u:"1f984",a:"1.0"},{n:["zebra face"],u:"1f993",a:"5.0"},{n:["deer"],u:"1f98c",a:"3.0"},{n:["bison"],u:"1f9ac",a:"13.0"},{n:["cow","cow face"],u:"1f42e",a:"0.6"},{n:["ox"],u:"1f402",a:"1.0"},{n:["water buffalo"],u:"1f403",a:"1.0"},{n:["cow","cow2"],u:"1f404",a:"1.0"},{n:["pig","pig face"],u:"1f437",a:"0.6"},{n:["pig","pig2"],u:"1f416",a:"1.0"},{n:["boar"],u:"1f417",a:"0.6"},{n:["pig nose"],u:"1f43d",a:"0.6"},{n:["ram"],u:"1f40f",a:"1.0"},{n:["sheep"],u:"1f411",a:"0.6"},{n:["goat"],u:"1f410",a:"1.0"},{n:["dromedary camel"],u:"1f42a",a:"1.0"},{n:["camel","bactrian camel"],u:"1f42b",a:"0.6"},{n:["llama"],u:"1f999",a:"11.0"},{n:["giraffe face"],u:"1f992",a:"5.0"},{n:["elephant"],u:"1f418",a:"0.6"},{n:["mammoth"],u:"1f9a3",a:"13.0"},{n:["rhinoceros"],u:"1f98f",a:"3.0"},{n:["hippopotamus"],u:"1f99b",a:"11.0"},{n:["mouse","mouse face"],u:"1f42d",a:"0.6"},{n:["mouse","mouse2"],u:"1f401",a:"1.0"},{n:["rat"],u:"1f400",a:"1.0"},{n:["hamster","hamster face"],u:"1f439",a:"0.6"},{n:["rabbit","rabbit face"],u:"1f430",a:"0.6"},{n:["rabbit","rabbit2"],u:"1f407",a:"1.0"},{n:["chipmunk"],u:"1f43f-fe0f",a:"0.7"},{n:["beaver"],u:"1f9ab",a:"13.0"},{n:["hedgehog"],u:"1f994",a:"5.0"},{n:["bat"],u:"1f987",a:"3.0"},{n:["bear","bear face"],u:"1f43b",a:"0.6"},{n:["polar bear"],u:"1f43b-200d-2744-fe0f",a:"13.0"},{n:["koala"],u:"1f428",a:"0.6"},{n:["panda face"],u:"1f43c",a:"0.6"},{n:["sloth"],u:"1f9a5",a:"12.0"},{n:["otter"],u:"1f9a6",a:"12.0"},{n:["skunk"],u:"1f9a8",a:"12.0"},{n:["kangaroo"],u:"1f998",a:"11.0"},{n:["badger"],u:"1f9a1",a:"11.0"},{n:["feet","paw prints"],u:"1f43e",a:"0.6"},{n:["turkey"],u:"1f983",a:"1.0"},{n:["chicken"],u:"1f414",a:"0.6"},{n:["rooster"],u:"1f413",a:"1.0"},{n:["hatching chick"],u:"1f423",a:"0.6"},{n:["baby chick"],u:"1f424",a:"0.6"},{n:["hatched chick","front-facing baby chick"],u:"1f425",a:"0.6"},{n:["bird"],u:"1f426",a:"0.6"},{n:["penguin"],u:"1f427",a:"0.6"},{n:["dove","dove of peace"],u:"1f54a-fe0f",a:"0.7"},{n:["eagle"],u:"1f985",a:"3.0"},{n:["duck"],u:"1f986",a:"3.0"},{n:["swan"],u:"1f9a2",a:"11.0"},{n:["owl"],u:"1f989",a:"3.0"},{n:["dodo"],u:"1f9a4",a:"13.0"},{n:["feather"],u:"1fab6",a:"13.0"},{n:["flamingo"],u:"1f9a9",a:"12.0"},{n:["peacock"],u:"1f99a",a:"11.0"},{n:["parrot"],u:"1f99c",a:"11.0"},{n:["frog","frog face"],u:"1f438",a:"0.6"},{n:["crocodile"],u:"1f40a",a:"1.0"},{n:["turtle"],u:"1f422",a:"0.6"},{n:["lizard"],u:"1f98e",a:"3.0"},{n:["snake"],u:"1f40d",a:"0.6"},{n:["dragon face"],u:"1f432",a:"0.6"},{n:["dragon"],u:"1f409",a:"1.0"},{n:["sauropod"],u:"1f995",a:"5.0"},{n:["t-rex"],u:"1f996",a:"5.0"},{n:["whale","spouting whale"],u:"1f433",a:"0.6"},{n:["whale","whale2"],u:"1f40b",a:"1.0"},{n:["dolphin","flipper"],u:"1f42c",a:"0.6"},{n:["seal"],u:"1f9ad",a:"13.0"},{n:["fish"],u:"1f41f",a:"0.6"},{n:["tropical fish"],u:"1f420",a:"0.6"},{n:["blowfish"],u:"1f421",a:"0.6"},{n:["shark"],u:"1f988",a:"3.0"},{n:["octopus"],u:"1f419",a:"0.6"},{n:["shell","spiral shell"],u:"1f41a",a:"0.6"},{n:["coral"],u:"1fab8",a:"14.0"},{n:["snail"],u:"1f40c",a:"0.6"},{n:["butterfly"],u:"1f98b",a:"3.0"},{n:["bug"],u:"1f41b",a:"0.6"},{n:["ant"],u:"1f41c",a:"0.6"},{n:["bee","honeybee"],u:"1f41d",a:"0.6"},{n:["beetle"],u:"1fab2",a:"13.0"},{n:["ladybug","lady beetle"],u:"1f41e",a:"0.6"},{n:["cricket"],u:"1f997",a:"5.0"},{n:["cockroach"],u:"1fab3",a:"13.0"},{n:["spider"],u:"1f577-fe0f",a:"0.7"},{n:["spider web"],u:"1f578-fe0f",a:"0.7"},{n:["scorpion"],u:"1f982",a:"1.0"},{n:["mosquito"],u:"1f99f",a:"11.0"},{n:["fly"],u:"1fab0",a:"13.0"},{n:["worm"],u:"1fab1",a:"13.0"},{n:["microbe"],u:"1f9a0",a:"11.0"},{n:["bouquet"],u:"1f490",a:"0.6"},{n:["cherry blossom"],u:"1f338",a:"0.6"},{n:["white flower"],u:"1f4ae",a:"0.6"},{n:["lotus"],u:"1fab7",a:"14.0"},{n:["rosette"],u:"1f3f5-fe0f",a:"0.7"},{n:["rose"],u:"1f339",a:"0.6"},{n:["wilted flower"],u:"1f940",a:"3.0"},{n:["hibiscus"],u:"1f33a",a:"0.6"},{n:["sunflower"],u:"1f33b",a:"0.6"},{n:["blossom"],u:"1f33c",a:"0.6"},{n:["tulip"],u:"1f337",a:"0.6"},{n:["seedling"],u:"1f331",a:"0.6"},{n:["potted plant"],u:"1fab4",a:"13.0"},{n:["evergreen tree"],u:"1f332",a:"1.0"},{n:["deciduous tree"],u:"1f333",a:"1.0"},{n:["palm tree"],u:"1f334",a:"0.6"},{n:["cactus"],u:"1f335",a:"0.6"},{n:["ear of rice"],u:"1f33e",a:"0.6"},{n:["herb"],u:"1f33f",a:"0.6"},{n:["shamrock"],u:"2618-fe0f",a:"1.0"},{n:["four leaf clover"],u:"1f340",a:"0.6"},{n:["maple leaf"],u:"1f341",a:"0.6"},{n:["fallen leaf"],u:"1f342",a:"0.6"},{n:["leaves","leaf fluttering in wind"],u:"1f343",a:"0.6"},{n:["empty nest"],u:"1fab9",a:"14.0"},{n:["nest with eggs"],u:"1faba",a:"14.0"}],food_drink:[{n:["grapes"],u:"1f347",a:"0.6"},{n:["melon"],u:"1f348",a:"0.6"},{n:["watermelon"],u:"1f349",a:"0.6"},{n:["tangerine"],u:"1f34a",a:"0.6"},{n:["lemon"],u:"1f34b",a:"1.0"},{n:["banana"],u:"1f34c",a:"0.6"},{n:["pineapple"],u:"1f34d",a:"0.6"},{n:["mango"],u:"1f96d",a:"11.0"},{n:["apple","red apple"],u:"1f34e",a:"0.6"},{n:["green apple"],u:"1f34f",a:"0.6"},{n:["pear"],u:"1f350",a:"1.0"},{n:["peach"],u:"1f351",a:"0.6"},{n:["cherries"],u:"1f352",a:"0.6"},{n:["strawberry"],u:"1f353",a:"0.6"},{n:["blueberries"],u:"1fad0",a:"13.0"},{n:["kiwifruit"],u:"1f95d",a:"3.0"},{n:["tomato"],u:"1f345",a:"0.6"},{n:["olive"],u:"1fad2",a:"13.0"},{n:["coconut"],u:"1f965",a:"5.0"},{n:["avocado"],u:"1f951",a:"3.0"},{n:["eggplant","aubergine"],u:"1f346",a:"0.6"},{n:["potato"],u:"1f954",a:"3.0"},{n:["carrot"],u:"1f955",a:"3.0"},{n:["corn","ear of maize"],u:"1f33d",a:"0.6"},{n:["hot pepper"],u:"1f336-fe0f",a:"0.7"},{n:["bell pepper"],u:"1fad1",a:"13.0"},{n:["cucumber"],u:"1f952",a:"3.0"},{n:["leafy green"],u:"1f96c",a:"11.0"},{n:["broccoli"],u:"1f966",a:"5.0"},{n:["garlic"],u:"1f9c4",a:"12.0"},{n:["onion"],u:"1f9c5",a:"12.0"},{n:["mushroom"],u:"1f344",a:"0.6"},{n:["peanuts"],u:"1f95c",a:"3.0"},{n:["beans"],u:"1fad8",a:"14.0"},{n:["chestnut"],u:"1f330",a:"0.6"},{n:["bread"],u:"1f35e",a:"0.6"},{n:["croissant"],u:"1f950",a:"3.0"},{n:["baguette bread"],u:"1f956",a:"3.0"},{n:["flatbread"],u:"1fad3",a:"13.0"},{n:["pretzel"],u:"1f968",a:"5.0"},{n:["bagel"],u:"1f96f",a:"11.0"},{n:["pancakes"],u:"1f95e",a:"3.0"},{n:["waffle"],u:"1f9c7",a:"12.0"},{n:["cheese wedge"],u:"1f9c0",a:"1.0"},{n:["meat on bone"],u:"1f356",a:"0.6"},{n:["poultry leg"],u:"1f357",a:"0.6"},{n:["cut of meat"],u:"1f969",a:"5.0"},{n:["bacon"],u:"1f953",a:"3.0"},{n:["hamburger"],u:"1f354",a:"0.6"},{n:["fries","french fries"],u:"1f35f",a:"0.6"},{n:["pizza","slice of pizza"],u:"1f355",a:"0.6"},{n:["hotdog","hot dog"],u:"1f32d",a:"1.0"},{n:["sandwich"],u:"1f96a",a:"5.0"},{n:["taco"],u:"1f32e",a:"1.0"},{n:["burrito"],u:"1f32f",a:"1.0"},{n:["tamale"],u:"1fad4",a:"13.0"},{n:["stuffed flatbread"],u:"1f959",a:"3.0"},{n:["falafel"],u:"1f9c6",a:"12.0"},{n:["egg"],u:"1f95a",a:"3.0"},{n:["cooking","fried egg"],u:"1f373",a:"0.6"},{n:["shallow pan of food"],u:"1f958",a:"3.0"},{n:["stew","pot of food"],u:"1f372",a:"0.6"},{n:["fondue"],u:"1fad5",a:"13.0"},{n:["bowl with spoon"],u:"1f963",a:"5.0"},{n:["green salad"],u:"1f957",a:"3.0"},{n:["popcorn"],u:"1f37f",a:"1.0"},{n:["butter"],u:"1f9c8",a:"12.0"},{n:["salt","salt shaker"],u:"1f9c2",a:"11.0"},{n:["canned food"],u:"1f96b",a:"5.0"},{n:["bento","bento box"],u:"1f371",a:"0.6"},{n:["rice cracker"],u:"1f358",a:"0.6"},{n:["rice ball"],u:"1f359",a:"0.6"},{n:["rice","cooked rice"],u:"1f35a",a:"0.6"},{n:["curry","curry and rice"],u:"1f35b",a:"0.6"},{n:["ramen","steaming bowl"],u:"1f35c",a:"0.6"},{n:["spaghetti"],u:"1f35d",a:"0.6"},{n:["sweet potato","roasted sweet potato"],u:"1f360",a:"0.6"},{n:["oden"],u:"1f362",a:"0.6"},{n:["sushi"],u:"1f363",a:"0.6"},{n:["fried shrimp"],u:"1f364",a:"0.6"},{n:["fish cake","fish cake with swirl design"],u:"1f365",a:"0.6"},{n:["moon cake"],u:"1f96e",a:"11.0"},{n:["dango"],u:"1f361",a:"0.6"},{n:["dumpling"],u:"1f95f",a:"5.0"},{n:["fortune cookie"],u:"1f960",a:"5.0"},{n:["takeout box"],u:"1f961",a:"5.0"},{n:["crab"],u:"1f980",a:"1.0"},{n:["lobster"],u:"1f99e",a:"11.0"},{n:["shrimp"],u:"1f990",a:"3.0"},{n:["squid"],u:"1f991",a:"3.0"},{n:["oyster"],u:"1f9aa",a:"12.0"},{n:["icecream","soft ice cream"],u:"1f366",a:"0.6"},{n:["shaved ice"],u:"1f367",a:"0.6"},{n:["ice cream"],u:"1f368",a:"0.6"},{n:["doughnut"],u:"1f369",a:"0.6"},{n:["cookie"],u:"1f36a",a:"0.6"},{n:["birthday","birthday cake"],u:"1f382",a:"0.6"},{n:["cake","shortcake"],u:"1f370",a:"0.6"},{n:["cupcake"],u:"1f9c1",a:"11.0"},{n:["pie"],u:"1f967",a:"5.0"},{n:["chocolate bar"],u:"1f36b",a:"0.6"},{n:["candy"],u:"1f36c",a:"0.6"},{n:["lollipop"],u:"1f36d",a:"0.6"},{n:["custard"],u:"1f36e",a:"0.6"},{n:["honey pot"],u:"1f36f",a:"0.6"},{n:["baby bottle"],u:"1f37c",a:"1.0"},{n:["glass of milk"],u:"1f95b",a:"3.0"},{n:["coffee","hot beverage"],u:"2615",a:"0.6"},{n:["teapot"],u:"1fad6",a:"13.0"},{n:["tea","teacup without handle"],u:"1f375",a:"0.6"},{n:["sake","sake bottle and cup"],u:"1f376",a:"0.6"},{n:["champagne","bottle with popping cork"],u:"1f37e",a:"1.0"},{n:["wine glass"],u:"1f377",a:"0.6"},{n:["cocktail","cocktail glass"],u:"1f378",a:"0.6"},{n:["tropical drink"],u:"1f379",a:"0.6"},{n:["beer","beer mug"],u:"1f37a",a:"0.6"},{n:["beers","clinking beer mugs"],u:"1f37b",a:"0.6"},{n:["clinking glasses"],u:"1f942",a:"3.0"},{n:["tumbler glass"],u:"1f943",a:"3.0"},{n:["pouring liquid"],u:"1fad7",a:"14.0"},{n:["cup with straw"],u:"1f964",a:"5.0"},{n:["bubble tea"],u:"1f9cb",a:"13.0"},{n:["beverage box"],u:"1f9c3",a:"12.0"},{n:["mate drink"],u:"1f9c9",a:"12.0"},{n:["ice cube"],u:"1f9ca",a:"12.0"},{n:["chopsticks"],u:"1f962",a:"5.0"},{n:["knife fork plate","fork and knife with plate"],u:"1f37d-fe0f",a:"0.7"},{n:["fork and knife"],u:"1f374",a:"0.6"},{n:["spoon"],u:"1f944",a:"3.0"},{n:["hocho","knife"],u:"1f52a",a:"0.6"},{n:["jar"],u:"1fad9",a:"14.0"},{n:["amphora"],u:"1f3fa",a:"1.0"}],travel_places:[{n:["earth africa","earth globe europe-africa"],u:"1f30d",a:"0.7"},{n:["earth americas","earth globe americas"],u:"1f30e",a:"0.7"},{n:["earth asia","earth globe asia-australia"],u:"1f30f",a:"0.6"},{n:["globe with meridians"],u:"1f310",a:"1.0"},{n:["world map"],u:"1f5fa-fe0f",a:"0.7"},{n:["japan","silhouette of japan"],u:"1f5fe",a:"0.6"},{n:["compass"],u:"1f9ed",a:"11.0"},{n:["snow-capped mountain","snow capped mountain"],u:"1f3d4-fe0f",a:"0.7"},{n:["mountain"],u:"26f0-fe0f",a:"0.7"},{n:["volcano"],u:"1f30b",a:"0.6"},{n:["mount fuji"],u:"1f5fb",a:"0.6"},{n:["camping"],u:"1f3d5-fe0f",a:"0.7"},{n:["beach with umbrella"],u:"1f3d6-fe0f",a:"0.7"},{n:["desert"],u:"1f3dc-fe0f",a:"0.7"},{n:["desert island"],u:"1f3dd-fe0f",a:"0.7"},{n:["national park"],u:"1f3de-fe0f",a:"0.7"},{n:["stadium"],u:"1f3df-fe0f",a:"0.7"},{n:["classical building"],u:"1f3db-fe0f",a:"0.7"},{n:["building construction"],u:"1f3d7-fe0f",a:"0.7"},{n:["brick","bricks"],u:"1f9f1",a:"11.0"},{n:["rock"],u:"1faa8",a:"13.0"},{n:["wood"],u:"1fab5",a:"13.0"},{n:["hut"],u:"1f6d6",a:"13.0"},{n:["houses","house buildings"],u:"1f3d8-fe0f",a:"0.7"},{n:["derelict house","derelict house building"],u:"1f3da-fe0f",a:"0.7"},{n:["house","house building"],u:"1f3e0",a:"0.6"},{n:["house with garden"],u:"1f3e1",a:"0.6"},{n:["office","office building"],u:"1f3e2",a:"0.6"},{n:["post office","japanese post office"],u:"1f3e3",a:"0.6"},{n:["european post office"],u:"1f3e4",a:"1.0"},{n:["hospital"],u:"1f3e5",a:"0.6"},{n:["bank"],u:"1f3e6",a:"0.6"},{n:["hotel"],u:"1f3e8",a:"0.6"},{n:["love hotel"],u:"1f3e9",a:"0.6"},{n:["convenience store"],u:"1f3ea",a:"0.6"},{n:["school"],u:"1f3eb",a:"0.6"},{n:["department store"],u:"1f3ec",a:"0.6"},{n:["factory"],u:"1f3ed",a:"0.6"},{n:["japanese castle"],u:"1f3ef",a:"0.6"},{n:["european castle"],u:"1f3f0",a:"0.6"},{n:["wedding"],u:"1f492",a:"0.6"},{n:["tokyo tower"],u:"1f5fc",a:"0.6"},{n:["statue of liberty"],u:"1f5fd",a:"0.6"},{n:["church"],u:"26ea",a:"0.6"},{n:["mosque"],u:"1f54c",a:"1.0"},{n:["hindu temple"],u:"1f6d5",a:"12.0"},{n:["synagogue"],u:"1f54d",a:"1.0"},{n:["shinto shrine"],u:"26e9-fe0f",a:"0.7"},{n:["kaaba"],u:"1f54b",a:"1.0"},{n:["fountain"],u:"26f2",a:"0.6"},{n:["tent"],u:"26fa",a:"0.6"},{n:["foggy"],u:"1f301",a:"0.6"},{n:["night with stars"],u:"1f303",a:"0.6"},{n:["cityscape"],u:"1f3d9-fe0f",a:"0.7"},{n:["sunrise over mountains"],u:"1f304",a:"0.6"},{n:["sunrise"],u:"1f305",a:"0.6"},{n:["city sunset","cityscape at dusk"],u:"1f306",a:"0.6"},{n:["city sunrise","sunset over buildings"],u:"1f307",a:"0.6"},{n:["bridge at night"],u:"1f309",a:"0.6"},{n:["hotsprings","hot springs"],u:"2668-fe0f",a:"0.6"},{n:["carousel horse"],u:"1f3a0",a:"0.6"},{n:["playground slide"],u:"1f6dd",a:"14.0"},{n:["ferris wheel"],u:"1f3a1",a:"0.6"},{n:["roller coaster"],u:"1f3a2",a:"0.6"},{n:["barber","barber pole"],u:"1f488",a:"0.6"},{n:["circus tent"],u:"1f3aa",a:"0.6"},{n:["steam locomotive"],u:"1f682",a:"1.0"},{n:["railway car"],u:"1f683",a:"0.6"},{n:["high-speed train","bullettrain side"],u:"1f684",a:"0.6"},{n:["bullettrain front","high-speed train with bullet nose"],u:"1f685",a:"0.6"},{n:["train","train2"],u:"1f686",a:"1.0"},{n:["metro"],u:"1f687",a:"0.6"},{n:["light rail"],u:"1f688",a:"1.0"},{n:["station"],u:"1f689",a:"0.6"},{n:["tram"],u:"1f68a",a:"1.0"},{n:["monorail"],u:"1f69d",a:"1.0"},{n:["mountain railway"],u:"1f69e",a:"1.0"},{n:["train","tram car"],u:"1f68b",a:"1.0"},{n:["bus"],u:"1f68c",a:"0.6"},{n:["oncoming bus"],u:"1f68d",a:"0.7"},{n:["trolleybus"],u:"1f68e",a:"1.0"},{n:["minibus"],u:"1f690",a:"1.0"},{n:["ambulance"],u:"1f691",a:"0.6"},{n:["fire engine"],u:"1f692",a:"0.6"},{n:["police car"],u:"1f693",a:"0.6"},{n:["oncoming police car"],u:"1f694",a:"0.7"},{n:["taxi"],u:"1f695",a:"0.6"},{n:["oncoming taxi"],u:"1f696",a:"1.0"},{n:["car","red car","automobile"],u:"1f697",a:"0.6"},{n:["oncoming automobile"],u:"1f698",a:"0.7"},{n:["blue car","recreational vehicle"],u:"1f699",a:"0.6"},{n:["pickup truck"],u:"1f6fb",a:"13.0"},{n:["truck","delivery truck"],u:"1f69a",a:"0.6"},{n:["articulated lorry"],u:"1f69b",a:"1.0"},{n:["tractor"],u:"1f69c",a:"1.0"},{n:["racing car"],u:"1f3ce-fe0f",a:"0.7"},{n:["motorcycle","racing motorcycle"],u:"1f3cd-fe0f",a:"0.7"},{n:["motor scooter"],u:"1f6f5",a:"3.0"},{n:["manual wheelchair"],u:"1f9bd",a:"12.0"},{n:["motorized wheelchair"],u:"1f9bc",a:"12.0"},{n:["auto rickshaw"],u:"1f6fa",a:"12.0"},{n:["bike","bicycle"],u:"1f6b2",a:"0.6"},{n:["scooter"],u:"1f6f4",a:"3.0"},{n:["skateboard"],u:"1f6f9",a:"11.0"},{n:["roller skate"],u:"1f6fc",a:"13.0"},{n:["busstop","bus stop"],u:"1f68f",a:"0.6"},{n:["motorway"],u:"1f6e3-fe0f",a:"0.7"},{n:["railway track"],u:"1f6e4-fe0f",a:"0.7"},{n:["oil drum"],u:"1f6e2-fe0f",a:"0.7"},{n:["fuelpump","fuel pump"],u:"26fd",a:"0.6"},{n:["wheel"],u:"1f6de",a:"14.0"},{n:["rotating light","police cars revolving light"],u:"1f6a8",a:"0.6"},{n:["traffic light","horizontal traffic light"],u:"1f6a5",a:"0.6"},{n:["vertical traffic light"],u:"1f6a6",a:"1.0"},{n:["octagonal sign"],u:"1f6d1",a:"3.0"},{n:["construction","construction sign"],u:"1f6a7",a:"0.6"},{n:["anchor"],u:"2693",a:"0.6"},{n:["ring buoy"],u:"1f6df",a:"14.0"},{n:["boat","sailboat"],u:"26f5",a:"0.6"},{n:["canoe"],u:"1f6f6",a:"3.0"},{n:["speedboat"],u:"1f6a4",a:"0.6"},{n:["passenger ship"],u:"1f6f3-fe0f",a:"0.7"},{n:["ferry"],u:"26f4-fe0f",a:"0.7"},{n:["motor boat"],u:"1f6e5-fe0f",a:"0.7"},{n:["ship"],u:"1f6a2",a:"0.6"},{n:["airplane"],u:"2708-fe0f",a:"0.6"},{n:["small airplane"],u:"1f6e9-fe0f",a:"0.7"},{n:["airplane departure"],u:"1f6eb",a:"1.0"},{n:["airplane arriving"],u:"1f6ec",a:"1.0"},{n:["parachute"],u:"1fa82",a:"12.0"},{n:["seat"],u:"1f4ba",a:"0.6"},{n:["helicopter"],u:"1f681",a:"1.0"},{n:["suspension railway"],u:"1f69f",a:"1.0"},{n:["mountain cableway"],u:"1f6a0",a:"1.0"},{n:["aerial tramway"],u:"1f6a1",a:"1.0"},{n:["satellite"],u:"1f6f0-fe0f",a:"0.7"},{n:["rocket"],u:"1f680",a:"0.6"},{n:["flying saucer"],u:"1f6f8",a:"5.0"},{n:["bellhop bell"],u:"1f6ce-fe0f",a:"0.7"},{n:["luggage"],u:"1f9f3",a:"11.0"},{n:["hourglass"],u:"231b",a:"0.6"},{n:["hourglass flowing sand","hourglass with flowing sand"],u:"23f3",a:"0.6"},{n:["watch"],u:"231a",a:"0.6"},{n:["alarm clock"],u:"23f0",a:"0.6"},{n:["stopwatch"],u:"23f1-fe0f",a:"1.0"},{n:["timer clock"],u:"23f2-fe0f",a:"1.0"},{n:["mantelpiece clock"],u:"1f570-fe0f",a:"0.7"},{n:["clock12","clock face twelve oclock"],u:"1f55b",a:"0.6"},{n:["clock1230","clock face twelve-thirty"],u:"1f567",a:"0.7"},{n:["clock1","clock face one oclock"],u:"1f550",a:"0.6"},{n:["clock130","clock face one-thirty"],u:"1f55c",a:"0.7"},{n:["clock2","clock face two oclock"],u:"1f551",a:"0.6"},{n:["clock230","clock face two-thirty"],u:"1f55d",a:"0.7"},{n:["clock3","clock face three oclock"],u:"1f552",a:"0.6"},{n:["clock330","clock face three-thirty"],u:"1f55e",a:"0.7"},{n:["clock4","clock face four oclock"],u:"1f553",a:"0.6"},{n:["clock430","clock face four-thirty"],u:"1f55f",a:"0.7"},{n:["clock5","clock face five oclock"],u:"1f554",a:"0.6"},{n:["clock530","clock face five-thirty"],u:"1f560",a:"0.7"},{n:["clock6","clock face six oclock"],u:"1f555",a:"0.6"},{n:["clock630","clock face six-thirty"],u:"1f561",a:"0.7"},{n:["clock7","clock face seven oclock"],u:"1f556",a:"0.6"},{n:["clock730","clock face seven-thirty"],u:"1f562",a:"0.7"},{n:["clock8","clock face eight oclock"],u:"1f557",a:"0.6"},{n:["clock830","clock face eight-thirty"],u:"1f563",a:"0.7"},{n:["clock9","clock face nine oclock"],u:"1f558",a:"0.6"},{n:["clock930","clock face nine-thirty"],u:"1f564",a:"0.7"},{n:["clock10","clock face ten oclock"],u:"1f559",a:"0.6"},{n:["clock1030","clock face ten-thirty"],u:"1f565",a:"0.7"},{n:["clock11","clock face eleven oclock"],u:"1f55a",a:"0.6"},{n:["clock1130","clock face eleven-thirty"],u:"1f566",a:"0.7"},{n:["new moon","new moon symbol"],u:"1f311",a:"0.6"},{n:["waxing crescent moon","waxing crescent moon symbol"],u:"1f312",a:"1.0"},{n:["first quarter moon","first quarter moon symbol"],u:"1f313",a:"0.6"},{n:["moon","waxing gibbous moon","waxing gibbous moon symbol"],u:"1f314",a:"0.6"},{n:["full moon","full moon symbol"],u:"1f315",a:"0.6"},{n:["waning gibbous moon","waning gibbous moon symbol"],u:"1f316",a:"1.0"},{n:["last quarter moon","last quarter moon symbol"],u:"1f317",a:"1.0"},{n:["waning crescent moon","waning crescent moon symbol"],u:"1f318",a:"1.0"},{n:["crescent moon"],u:"1f319",a:"0.6"},{n:["new moon with face"],u:"1f31a",a:"1.0"},{n:["first quarter moon with face"],u:"1f31b",a:"0.6"},{n:["last quarter moon with face"],u:"1f31c",a:"0.7"},{n:["thermometer"],u:"1f321-fe0f",a:"0.7"},{n:["sunny","black sun with rays"],u:"2600-fe0f",a:"0.6"},{n:["full moon with face"],u:"1f31d",a:"1.0"},{n:["sun with face"],u:"1f31e",a:"1.0"},{n:["ringed planet"],u:"1fa90",a:"12.0"},{n:["star","white medium star"],u:"2b50",a:"0.6"},{n:["star2","glowing star"],u:"1f31f",a:"0.6"},{n:["stars","shooting star"],u:"1f320",a:"0.6"},{n:["milky way"],u:"1f30c",a:"0.6"},{n:["cloud"],u:"2601-fe0f",a:"0.6"},{n:["partly sunny","sun behind cloud"],u:"26c5",a:"0.6"},{n:["thunder cloud and rain","cloud with lightning and rain"],u:"26c8-fe0f",a:"0.7"},{n:["mostly sunny","sun small cloud","sun behind small cloud"],u:"1f324-fe0f",a:"0.7"},{n:["barely sunny","sun behind cloud","sun behind large cloud"],u:"1f325-fe0f",a:"0.7"},{n:["partly sunny rain","sun behind rain cloud"],u:"1f326-fe0f",a:"0.7"},{n:["rain cloud","cloud with rain"],u:"1f327-fe0f",a:"0.7"},{n:["snow cloud","cloud with snow"],u:"1f328-fe0f",a:"0.7"},{n:["lightning","lightning cloud","cloud with lightning"],u:"1f329-fe0f",a:"0.7"},{n:["tornado","tornado cloud"],u:"1f32a-fe0f",a:"0.7"},{n:["fog"],u:"1f32b-fe0f",a:"0.7"},{n:["wind face","wind blowing face"],u:"1f32c-fe0f",a:"0.7"},{n:["cyclone"],u:"1f300",a:"0.6"},{n:["rainbow"],u:"1f308",a:"0.6"},{n:["closed umbrella"],u:"1f302",a:"0.6"},{n:["umbrella"],u:"2602-fe0f",a:"0.7"},{n:["umbrella with rain drops"],u:"2614",a:"0.6"},{n:["umbrella on ground"],u:"26f1-fe0f",a:"0.7"},{n:["zap","high voltage sign"],u:"26a1",a:"0.6"},{n:["snowflake"],u:"2744-fe0f",a:"0.6"},{n:["snowman"],u:"2603-fe0f",a:"0.7"},{n:["snowman without snow"],u:"26c4",a:"0.6"},{n:["comet"],u:"2604-fe0f",a:"1.0"},{n:["fire"],u:"1f525",a:"0.6"},{n:["droplet"],u:"1f4a7",a:"0.6"},{n:["ocean","water wave"],u:"1f30a",a:"0.6"}],activities:[{n:["jack-o-lantern","jack o lantern"],u:"1f383",a:"0.6"},{n:["christmas tree"],u:"1f384",a:"0.6"},{n:["fireworks"],u:"1f386",a:"0.6"},{n:["sparkler","firework sparkler"],u:"1f387",a:"0.6"},{n:["firecracker"],u:"1f9e8",a:"11.0"},{n:["sparkles"],u:"2728",a:"0.6"},{n:["balloon"],u:"1f388",a:"0.6"},{n:["tada","party popper"],u:"1f389",a:"0.6"},{n:["confetti ball"],u:"1f38a",a:"0.6"},{n:["tanabata tree"],u:"1f38b",a:"0.6"},{n:["bamboo","pine decoration"],u:"1f38d",a:"0.6"},{n:["dolls","japanese dolls"],u:"1f38e",a:"0.6"},{n:["flags","carp streamer"],u:"1f38f",a:"0.6"},{n:["wind chime"],u:"1f390",a:"0.6"},{n:["rice scene","moon viewing ceremony"],u:"1f391",a:"0.6"},{n:["red envelope","red gift envelope"],u:"1f9e7",a:"11.0"},{n:["ribbon"],u:"1f380",a:"0.6"},{n:["gift","wrapped present"],u:"1f381",a:"0.6"},{n:["reminder ribbon"],u:"1f397-fe0f",a:"0.7"},{n:["admission tickets"],u:"1f39f-fe0f",a:"0.7"},{n:["ticket"],u:"1f3ab",a:"0.6"},{n:["medal","military medal"],u:"1f396-fe0f",a:"0.7"},{n:["trophy"],u:"1f3c6",a:"0.6"},{n:["sports medal"],u:"1f3c5",a:"1.0"},{n:["first place medal"],u:"1f947",a:"3.0"},{n:["second place medal"],u:"1f948",a:"3.0"},{n:["third place medal"],u:"1f949",a:"3.0"},{n:["soccer","soccer ball"],u:"26bd",a:"0.6"},{n:["baseball"],u:"26be",a:"0.6"},{n:["softball"],u:"1f94e",a:"11.0"},{n:["basketball","basketball and hoop"],u:"1f3c0",a:"0.6"},{n:["volleyball"],u:"1f3d0",a:"1.0"},{n:["football","american football"],u:"1f3c8",a:"0.6"},{n:["rugby football"],u:"1f3c9",a:"1.0"},{n:["tennis","tennis racquet and ball"],u:"1f3be",a:"0.6"},{n:["flying disc"],u:"1f94f",a:"11.0"},{n:["bowling"],u:"1f3b3",a:"0.6"},{n:["cricket bat and ball"],u:"1f3cf",a:"1.0"},{n:["field hockey stick and ball"],u:"1f3d1",a:"1.0"},{n:["ice hockey stick and puck"],u:"1f3d2",a:"1.0"},{n:["lacrosse","lacrosse stick and ball"],u:"1f94d",a:"11.0"},{n:["table tennis paddle and ball"],u:"1f3d3",a:"1.0"},{n:["badminton racquet and shuttlecock"],u:"1f3f8",a:"1.0"},{n:["boxing glove"],u:"1f94a",a:"3.0"},{n:["martial arts uniform"],u:"1f94b",a:"3.0"},{n:["goal net"],u:"1f945",a:"3.0"},{n:["golf","flag in hole"],u:"26f3",a:"0.6"},{n:["ice skate"],u:"26f8-fe0f",a:"0.7"},{n:["fishing pole and fish"],u:"1f3a3",a:"0.6"},{n:["diving mask"],u:"1f93f",a:"12.0"},{n:["running shirt with sash"],u:"1f3bd",a:"0.6"},{n:["ski","ski and ski boot"],u:"1f3bf",a:"0.6"},{n:["sled"],u:"1f6f7",a:"5.0"},{n:["curling stone"],u:"1f94c",a:"5.0"},{n:["dart","direct hit"],u:"1f3af",a:"0.6"},{n:["yo-yo"],u:"1fa80",a:"12.0"},{n:["kite"],u:"1fa81",a:"12.0"},{n:["8ball","billiards"],u:"1f3b1",a:"0.6"},{n:["crystal ball"],u:"1f52e",a:"0.6"},{n:["magic wand"],u:"1fa84",a:"13.0"},{n:["nazar amulet"],u:"1f9ff",a:"11.0"},{n:["hamsa"],u:"1faac",a:"14.0"},{n:["video game"],u:"1f3ae",a:"0.6"},{n:["joystick"],u:"1f579-fe0f",a:"0.7"},{n:["slot machine"],u:"1f3b0",a:"0.6"},{n:["game die"],u:"1f3b2",a:"0.6"},{n:["jigsaw","jigsaw puzzle piece"],u:"1f9e9",a:"11.0"},{n:["teddy bear"],u:"1f9f8",a:"11.0"},{n:["pinata"],u:"1fa85",a:"13.0"},{n:["mirror ball"],u:"1faa9",a:"14.0"},{n:["nesting dolls"],u:"1fa86",a:"13.0"},{n:["spades","black spade suit"],u:"2660-fe0f",a:"0.6"},{n:["hearts","black heart suit"],u:"2665-fe0f",a:"0.6"},{n:["diamonds","black diamond suit"],u:"2666-fe0f",a:"0.6"},{n:["clubs","black club suit"],u:"2663-fe0f",a:"0.6"},{n:["chess pawn"],u:"265f-fe0f",a:"11.0"},{n:["black joker","playing card black joker"],u:"1f0cf",a:"0.6"},{n:["mahjong","mahjong tile red dragon"],u:"1f004",a:"0.6"},{n:["flower playing cards"],u:"1f3b4",a:"0.6"},{n:["performing arts"],u:"1f3ad",a:"0.6"},{n:["framed picture","frame with picture"],u:"1f5bc-fe0f",a:"0.7"},{n:["art","artist palette"],u:"1f3a8",a:"0.6"},{n:["thread","spool of thread"],u:"1f9f5",a:"11.0"},{n:["sewing needle"],u:"1faa1",a:"13.0"},{n:["yarn","ball of yarn"],u:"1f9f6",a:"11.0"},{n:["knot"],u:"1faa2",a:"13.0"}],objects:[{n:["eyeglasses"],u:"1f453",a:"0.6"},{n:["sunglasses","dark sunglasses"],u:"1f576-fe0f",a:"0.7"},{n:["goggles"],u:"1f97d",a:"11.0"},{n:["lab coat"],u:"1f97c",a:"11.0"},{n:["safety vest"],u:"1f9ba",a:"12.0"},{n:["necktie"],u:"1f454",a:"0.6"},{n:["shirt","tshirt","t-shirt"],u:"1f455",a:"0.6"},{n:["jeans"],u:"1f456",a:"0.6"},{n:["scarf"],u:"1f9e3",a:"5.0"},{n:["gloves"],u:"1f9e4",a:"5.0"},{n:["coat"],u:"1f9e5",a:"5.0"},{n:["socks"],u:"1f9e6",a:"5.0"},{n:["dress"],u:"1f457",a:"0.6"},{n:["kimono"],u:"1f458",a:"0.6"},{n:["sari"],u:"1f97b",a:"12.0"},{n:["one-piece swimsuit"],u:"1fa71",a:"12.0"},{n:["briefs"],u:"1fa72",a:"12.0"},{n:["shorts"],u:"1fa73",a:"12.0"},{n:["bikini"],u:"1f459",a:"0.6"},{n:["womans clothes"],u:"1f45a",a:"0.6"},{n:["purse"],u:"1f45b",a:"0.6"},{n:["handbag"],u:"1f45c",a:"0.6"},{n:["pouch"],u:"1f45d",a:"0.6"},{n:["shopping bags"],u:"1f6cd-fe0f",a:"0.7"},{n:["school satchel"],u:"1f392",a:"0.6"},{n:["thong sandal"],u:"1fa74",a:"13.0"},{n:["shoe","mans shoe"],u:"1f45e",a:"0.6"},{n:["athletic shoe"],u:"1f45f",a:"0.6"},{n:["hiking boot"],u:"1f97e",a:"11.0"},{n:["flat shoe","womans flat shoe"],u:"1f97f",a:"11.0"},{n:["high heel","high-heeled shoe"],u:"1f460",a:"0.6"},{n:["sandal","womans sandal"],u:"1f461",a:"0.6"},{n:["ballet shoes"],u:"1fa70",a:"12.0"},{n:["boot","womans boots"],u:"1f462",a:"0.6"},{n:["crown"],u:"1f451",a:"0.6"},{n:["womans hat"],u:"1f452",a:"0.6"},{n:["tophat","top hat"],u:"1f3a9",a:"0.6"},{n:["mortar board","graduation cap"],u:"1f393",a:"0.6"},{n:["billed cap"],u:"1f9e2",a:"5.0"},{n:["military helmet"],u:"1fa96",a:"13.0"},{n:["rescue worker’s helmet","helmet with white cross"],u:"26d1-fe0f",a:"0.7"},{n:["prayer beads"],u:"1f4ff",a:"1.0"},{n:["lipstick"],u:"1f484",a:"0.6"},{n:["ring"],u:"1f48d",a:"0.6"},{n:["gem","gem stone"],u:"1f48e",a:"0.6"},{n:["mute","speaker with cancellation stroke"],u:"1f507",a:"1.0"},{n:["speaker"],u:"1f508",a:"0.7"},{n:["sound","speaker with one sound wave"],u:"1f509",a:"1.0"},{n:["loud sound","speaker with three sound waves"],u:"1f50a",a:"0.6"},{n:["loudspeaker","public address loudspeaker"],u:"1f4e2",a:"0.6"},{n:["mega","cheering megaphone"],u:"1f4e3",a:"0.6"},{n:["postal horn"],u:"1f4ef",a:"1.0"},{n:["bell"],u:"1f514",a:"0.6"},{n:["no bell","bell with cancellation stroke"],u:"1f515",a:"1.0"},{n:["musical score"],u:"1f3bc",a:"0.6"},{n:["musical note"],u:"1f3b5",a:"0.6"},{n:["notes","multiple musical notes"],u:"1f3b6",a:"0.6"},{n:["studio microphone"],u:"1f399-fe0f",a:"0.7"},{n:["level slider"],u:"1f39a-fe0f",a:"0.7"},{n:["control knobs"],u:"1f39b-fe0f",a:"0.7"},{n:["microphone"],u:"1f3a4",a:"0.6"},{n:["headphone","headphones"],u:"1f3a7",a:"0.6"},{n:["radio"],u:"1f4fb",a:"0.6"},{n:["saxophone"],u:"1f3b7",a:"0.6"},{n:["accordion"],u:"1fa97",a:"13.0"},{n:["guitar"],u:"1f3b8",a:"0.6"},{n:["musical keyboard"],u:"1f3b9",a:"0.6"},{n:["trumpet"],u:"1f3ba",a:"0.6"},{n:["violin"],u:"1f3bb",a:"0.6"},{n:["banjo"],u:"1fa95",a:"12.0"},{n:["drum with drumsticks"],u:"1f941",a:"3.0"},{n:["long drum"],u:"1fa98",a:"13.0"},{n:["iphone","mobile phone"],u:"1f4f1",a:"0.6"},{n:["calling","mobile phone with rightwards arrow at left"],u:"1f4f2",a:"0.6"},{n:["phone","telephone","black telephone"],u:"260e-fe0f",a:"0.6"},{n:["telephone receiver"],u:"1f4de",a:"0.6"},{n:["pager"],u:"1f4df",a:"0.6"},{n:["fax","fax machine"],u:"1f4e0",a:"0.6"},{n:["battery"],u:"1f50b",a:"0.6"},{n:["low battery"],u:"1faab",a:"14.0"},{n:["electric plug"],u:"1f50c",a:"0.6"},{n:["computer","personal computer"],u:"1f4bb",a:"0.6"},{n:["desktop computer"],u:"1f5a5-fe0f",a:"0.7"},{n:["printer"],u:"1f5a8-fe0f",a:"0.7"},{n:["keyboard"],u:"2328-fe0f",a:"1.0"},{n:["computer mouse","three button mouse"],u:"1f5b1-fe0f",a:"0.7"},{n:["trackball"],u:"1f5b2-fe0f",a:"0.7"},{n:["minidisc"],u:"1f4bd",a:"0.6"},{n:["floppy disk"],u:"1f4be",a:"0.6"},{n:["cd","optical disc"],u:"1f4bf",a:"0.6"},{n:["dvd"],u:"1f4c0",a:"0.6"},{n:["abacus"],u:"1f9ee",a:"11.0"},{n:["movie camera"],u:"1f3a5",a:"0.6"},{n:["film frames"],u:"1f39e-fe0f",a:"0.7"},{n:["film projector"],u:"1f4fd-fe0f",a:"0.7"},{n:["clapper","clapper board"],u:"1f3ac",a:"0.6"},{n:["tv","television"],u:"1f4fa",a:"0.6"},{n:["camera"],u:"1f4f7",a:"0.6"},{n:["camera with flash"],u:"1f4f8",a:"1.0"},{n:["video camera"],u:"1f4f9",a:"0.6"},{n:["vhs","videocassette"],u:"1f4fc",a:"0.6"},{n:["mag","left-pointing magnifying glass"],u:"1f50d",a:"0.6"},{n:["mag right","right-pointing magnifying glass"],u:"1f50e",a:"0.6"},{n:["candle"],u:"1f56f-fe0f",a:"0.7"},{n:["bulb","electric light bulb"],u:"1f4a1",a:"0.6"},{n:["flashlight","electric torch"],u:"1f526",a:"0.6"},{n:["lantern","izakaya lantern"],u:"1f3ee",a:"0.6"},{n:["diya lamp"],u:"1fa94",a:"12.0"},{n:["notebook with decorative cover"],u:"1f4d4",a:"0.6"},{n:["closed book"],u:"1f4d5",a:"0.6"},{n:["book","open book"],u:"1f4d6",a:"0.6"},{n:["green book"],u:"1f4d7",a:"0.6"},{n:["blue book"],u:"1f4d8",a:"0.6"},{n:["orange book"],u:"1f4d9",a:"0.6"},{n:["books"],u:"1f4da",a:"0.6"},{n:["notebook"],u:"1f4d3",a:"0.6"},{n:["ledger"],u:"1f4d2",a:"0.6"},{n:["page with curl"],u:"1f4c3",a:"0.6"},{n:["scroll"],u:"1f4dc",a:"0.6"},{n:["page facing up"],u:"1f4c4",a:"0.6"},{n:["newspaper"],u:"1f4f0",a:"0.6"},{n:["rolled-up newspaper","rolled up newspaper"],u:"1f5de-fe0f",a:"0.7"},{n:["bookmark tabs"],u:"1f4d1",a:"0.6"},{n:["bookmark"],u:"1f516",a:"0.6"},{n:["label"],u:"1f3f7-fe0f",a:"0.7"},{n:["moneybag","money bag"],u:"1f4b0",a:"0.6"},{n:["coin"],u:"1fa99",a:"13.0"},{n:["yen","banknote with yen sign"],u:"1f4b4",a:"0.6"},{n:["dollar","banknote with dollar sign"],u:"1f4b5",a:"0.6"},{n:["euro","banknote with euro sign"],u:"1f4b6",a:"1.0"},{n:["pound","banknote with pound sign"],u:"1f4b7",a:"1.0"},{n:["money with wings"],u:"1f4b8",a:"0.6"},{n:["credit card"],u:"1f4b3",a:"0.6"},{n:["receipt"],u:"1f9fe",a:"11.0"},{n:["chart","chart with upwards trend and yen sign"],u:"1f4b9",a:"0.6"},{n:["email","envelope"],u:"2709-fe0f",a:"0.6"},{n:["e-mail","e-mail symbol"],u:"1f4e7",a:"0.6"},{n:["incoming envelope"],u:"1f4e8",a:"0.6"},{n:["envelope with arrow","envelope with downwards arrow above"],u:"1f4e9",a:"0.6"},{n:["outbox tray"],u:"1f4e4",a:"0.6"},{n:["inbox tray"],u:"1f4e5",a:"0.6"},{n:["package"],u:"1f4e6",a:"0.6"},{n:["mailbox","closed mailbox with raised flag"],u:"1f4eb",a:"0.6"},{n:["mailbox closed","closed mailbox with lowered flag"],u:"1f4ea",a:"0.6"},{n:["mailbox with mail","open mailbox with raised flag"],u:"1f4ec",a:"0.7"},{n:["mailbox with no mail","open mailbox with lowered flag"],u:"1f4ed",a:"0.7"},{n:["postbox"],u:"1f4ee",a:"0.6"},{n:["ballot box with ballot"],u:"1f5f3-fe0f",a:"0.7"},{n:["pencil","pencil2"],u:"270f-fe0f",a:"0.6"},{n:["black nib"],u:"2712-fe0f",a:"0.6"},{n:["fountain pen","lower left fountain pen"],u:"1f58b-fe0f",a:"0.7"},{n:["pen","lower left ballpoint pen"],u:"1f58a-fe0f",a:"0.7"},{n:["paintbrush","lower left paintbrush"],u:"1f58c-fe0f",a:"0.7"},{n:["crayon","lower left crayon"],u:"1f58d-fe0f",a:"0.7"},{n:["memo","pencil"],u:"1f4dd",a:"0.6"},{n:["briefcase"],u:"1f4bc",a:"0.6"},{n:["file folder"],u:"1f4c1",a:"0.6"},{n:["open file folder"],u:"1f4c2",a:"0.6"},{n:["card index dividers"],u:"1f5c2-fe0f",a:"0.7"},{n:["date","calendar"],u:"1f4c5",a:"0.6"},{n:["calendar","tear-off calendar"],u:"1f4c6",a:"0.6"},{n:["spiral notepad","spiral note pad"],u:"1f5d2-fe0f",a:"0.7"},{n:["spiral calendar","spiral calendar pad"],u:"1f5d3-fe0f",a:"0.7"},{n:["card index"],u:"1f4c7",a:"0.6"},{n:["chart with upwards trend"],u:"1f4c8",a:"0.6"},{n:["chart with downwards trend"],u:"1f4c9",a:"0.6"},{n:["bar chart"],u:"1f4ca",a:"0.6"},{n:["clipboard"],u:"1f4cb",a:"0.6"},{n:["pushpin"],u:"1f4cc",a:"0.6"},{n:["round pushpin"],u:"1f4cd",a:"0.6"},{n:["paperclip"],u:"1f4ce",a:"0.6"},{n:["linked paperclips"],u:"1f587-fe0f",a:"0.7"},{n:["straight ruler"],u:"1f4cf",a:"0.6"},{n:["triangular ruler"],u:"1f4d0",a:"0.6"},{n:["scissors","black scissors"],u:"2702-fe0f",a:"0.6"},{n:["card file box"],u:"1f5c3-fe0f",a:"0.7"},{n:["file cabinet"],u:"1f5c4-fe0f",a:"0.7"},{n:["wastebasket"],u:"1f5d1-fe0f",a:"0.7"},{n:["lock"],u:"1f512",a:"0.6"},{n:["unlock","open lock"],u:"1f513",a:"0.6"},{n:["lock with ink pen"],u:"1f50f",a:"0.6"},{n:["closed lock with key"],u:"1f510",a:"0.6"},{n:["key"],u:"1f511",a:"0.6"},{n:["old key"],u:"1f5dd-fe0f",a:"0.7"},{n:["hammer"],u:"1f528",a:"0.6"},{n:["axe"],u:"1fa93",a:"12.0"},{n:["pick"],u:"26cf-fe0f",a:"0.7"},{n:["hammer and pick"],u:"2692-fe0f",a:"1.0"},{n:["hammer and wrench"],u:"1f6e0-fe0f",a:"0.7"},{n:["dagger","dagger knife"],u:"1f5e1-fe0f",a:"0.7"},{n:["crossed swords"],u:"2694-fe0f",a:"1.0"},{n:["gun","pistol"],u:"1f52b",a:"0.6"},{n:["boomerang"],u:"1fa83",a:"13.0"},{n:["bow and arrow"],u:"1f3f9",a:"1.0"},{n:["shield"],u:"1f6e1-fe0f",a:"0.7"},{n:["carpentry saw"],u:"1fa9a",a:"13.0"},{n:["wrench"],u:"1f527",a:"0.6"},{n:["screwdriver"],u:"1fa9b",a:"13.0"},{n:["nut and bolt"],u:"1f529",a:"0.6"},{n:["gear"],u:"2699-fe0f",a:"1.0"},{n:["clamp","compression"],u:"1f5dc-fe0f",a:"0.7"},{n:["scales","balance scale"],u:"2696-fe0f",a:"1.0"},{n:["probing cane"],u:"1f9af",a:"12.0"},{n:["link","link symbol"],u:"1f517",a:"0.6"},{n:["chains"],u:"26d3-fe0f",a:"0.7"},{n:["hook"],u:"1fa9d",a:"13.0"},{n:["toolbox"],u:"1f9f0",a:"11.0"},{n:["magnet"],u:"1f9f2",a:"11.0"},{n:["ladder"],u:"1fa9c",a:"13.0"},{n:["alembic"],u:"2697-fe0f",a:"1.0"},{n:["test tube"],u:"1f9ea",a:"11.0"},{n:["petri dish"],u:"1f9eb",a:"11.0"},{n:["dna","dna double helix"],u:"1f9ec",a:"11.0"},{n:["microscope"],u:"1f52c",a:"1.0"},{n:["telescope"],u:"1f52d",a:"1.0"},{n:["satellite antenna"],u:"1f4e1",a:"0.6"},{n:["syringe"],u:"1f489",a:"0.6"},{n:["drop of blood"],u:"1fa78",a:"12.0"},{n:["pill"],u:"1f48a",a:"0.6"},{n:["adhesive bandage"],u:"1fa79",a:"12.0"},{n:["crutch"],u:"1fa7c",a:"14.0"},{n:["stethoscope"],u:"1fa7a",a:"12.0"},{n:["x-ray"],u:"1fa7b",a:"14.0"},{n:["door"],u:"1f6aa",a:"0.6"},{n:["elevator"],u:"1f6d7",a:"13.0"},{n:["mirror"],u:"1fa9e",a:"13.0"},{n:["window"],u:"1fa9f",a:"13.0"},{n:["bed"],u:"1f6cf-fe0f",a:"0.7"},{n:["couch and lamp"],u:"1f6cb-fe0f",a:"0.7"},{n:["chair"],u:"1fa91",a:"12.0"},{n:["toilet"],u:"1f6bd",a:"0.6"},{n:["plunger"],u:"1faa0",a:"13.0"},{n:["shower"],u:"1f6bf",a:"1.0"},{n:["bathtub"],u:"1f6c1",a:"1.0"},{n:["mouse trap"],u:"1faa4",a:"13.0"},{n:["razor"],u:"1fa92",a:"12.0"},{n:["lotion bottle"],u:"1f9f4",a:"11.0"},{n:["safety pin"],u:"1f9f7",a:"11.0"},{n:["broom"],u:"1f9f9",a:"11.0"},{n:["basket"],u:"1f9fa",a:"11.0"},{n:["roll of paper"],u:"1f9fb",a:"11.0"},{n:["bucket"],u:"1faa3",a:"13.0"},{n:["soap","bar of soap"],u:"1f9fc",a:"11.0"},{n:["bubbles"],u:"1fae7",a:"14.0"},{n:["toothbrush"],u:"1faa5",a:"13.0"},{n:["sponge"],u:"1f9fd",a:"11.0"},{n:["fire extinguisher"],u:"1f9ef",a:"11.0"},{n:["shopping trolley"],u:"1f6d2",a:"3.0"},{n:["smoking","smoking symbol"],u:"1f6ac",a:"0.6"},{n:["coffin"],u:"26b0-fe0f",a:"1.0"},{n:["headstone"],u:"1faa6",a:"13.0"},{n:["funeral urn"],u:"26b1-fe0f",a:"1.0"},{n:["moyai"],u:"1f5ff",a:"0.6"},{n:["placard"],u:"1faa7",a:"13.0"},{n:["identification card"],u:"1faaa",a:"14.0"}],symbols:[{n:["atm","automated teller machine"],u:"1f3e7",a:"0.6"},{n:["put litter in its place","put litter in its place symbol"],u:"1f6ae",a:"1.0"},{n:["potable water","potable water symbol"],u:"1f6b0",a:"1.0"},{n:["wheelchair","wheelchair symbol"],u:"267f",a:"0.6"},{n:["mens","mens symbol"],u:"1f6b9",a:"0.6"},{n:["womens","womens symbol"],u:"1f6ba",a:"0.6"},{n:["restroom"],u:"1f6bb",a:"0.6"},{n:["baby symbol"],u:"1f6bc",a:"0.6"},{n:["wc","water closet"],u:"1f6be",a:"0.6"},{n:["passport control"],u:"1f6c2",a:"1.0"},{n:["customs"],u:"1f6c3",a:"1.0"},{n:["baggage claim"],u:"1f6c4",a:"1.0"},{n:["left luggage"],u:"1f6c5",a:"1.0"},{n:["warning","warning sign"],u:"26a0-fe0f",a:"0.6"},{n:["children crossing"],u:"1f6b8",a:"1.0"},{n:["no entry"],u:"26d4",a:"0.6"},{n:["no entry sign"],u:"1f6ab",a:"0.6"},{n:["no bicycles"],u:"1f6b3",a:"1.0"},{n:["no smoking","no smoking symbol"],u:"1f6ad",a:"0.6"},{n:["do not litter","do not litter symbol"],u:"1f6af",a:"1.0"},{n:["non-potable water","non-potable water symbol"],u:"1f6b1",a:"1.0"},{n:["no pedestrians"],u:"1f6b7",a:"1.0"},{n:["no mobile phones"],u:"1f4f5",a:"1.0"},{n:["underage","no one under eighteen symbol"],u:"1f51e",a:"0.6"},{n:["radioactive","radioactive sign"],u:"2622-fe0f",a:"1.0"},{n:["biohazard","biohazard sign"],u:"2623-fe0f",a:"1.0"},{n:["arrow up","upwards black arrow"],u:"2b06-fe0f",a:"0.6"},{n:["north east arrow","arrow upper right"],u:"2197-fe0f",a:"0.6"},{n:["arrow right","black rightwards arrow"],u:"27a1-fe0f",a:"0.6"},{n:["south east arrow","arrow lower right"],u:"2198-fe0f",a:"0.6"},{n:["arrow down","downwards black arrow"],u:"2b07-fe0f",a:"0.6"},{n:["south west arrow","arrow lower left"],u:"2199-fe0f",a:"0.6"},{n:["arrow left","leftwards black arrow"],u:"2b05-fe0f",a:"0.6"},{n:["north west arrow","arrow upper left"],u:"2196-fe0f",a:"0.6"},{n:["up down arrow","arrow up down"],u:"2195-fe0f",a:"0.6"},{n:["left right arrow"],u:"2194-fe0f",a:"0.6"},{n:["leftwards arrow with hook"],u:"21a9-fe0f",a:"0.6"},{n:["arrow right hook","rightwards arrow with hook"],u:"21aa-fe0f",a:"0.6"},{n:["arrow heading up","arrow pointing rightwards then curving upwards"],u:"2934-fe0f",a:"0.6"},{n:["arrow heading down","arrow pointing rightwards then curving downwards"],u:"2935-fe0f",a:"0.6"},{n:["arrows clockwise","clockwise downwards and upwards open circle arrows"],u:"1f503",a:"0.6"},{n:["arrows counterclockwise","anticlockwise downwards and upwards open circle arrows"],u:"1f504",a:"1.0"},{n:["back","back with leftwards arrow above"],u:"1f519",a:"0.6"},{n:["end","end with leftwards arrow above"],u:"1f51a",a:"0.6"},{n:["on","on with exclamation mark with left right arrow above"],u:"1f51b",a:"0.6"},{n:["soon","soon with rightwards arrow above"],u:"1f51c",a:"0.6"},{n:["top","top with upwards arrow above"],u:"1f51d",a:"0.6"},{n:["place of worship"],u:"1f6d0",a:"1.0"},{n:["atom symbol"],u:"269b-fe0f",a:"1.0"},{n:["om","om symbol"],u:"1f549-fe0f",a:"0.7"},{n:["star of david"],u:"2721-fe0f",a:"0.7"},{n:["wheel of dharma"],u:"2638-fe0f",a:"0.7"},{n:["yin yang"],u:"262f-fe0f",a:"0.7"},{n:["latin cross"],u:"271d-fe0f",a:"0.7"},{n:["orthodox cross"],u:"2626-fe0f",a:"1.0"},{n:["star and crescent"],u:"262a-fe0f",a:"0.7"},{n:["peace symbol"],u:"262e-fe0f",a:"1.0"},{n:["menorah with nine branches"],u:"1f54e",a:"1.0"},{n:["six pointed star","six pointed star with middle dot"],u:"1f52f",a:"0.6"},{n:["aries"],u:"2648",a:"0.6"},{n:["taurus"],u:"2649",a:"0.6"},{n:["gemini"],u:"264a",a:"0.6"},{n:["cancer"],u:"264b",a:"0.6"},{n:["leo"],u:"264c",a:"0.6"},{n:["virgo"],u:"264d",a:"0.6"},{n:["libra"],u:"264e",a:"0.6"},{n:["scorpius"],u:"264f",a:"0.6"},{n:["sagittarius"],u:"2650",a:"0.6"},{n:["capricorn"],u:"2651",a:"0.6"},{n:["aquarius"],u:"2652",a:"0.6"},{n:["pisces"],u:"2653",a:"0.6"},{n:["ophiuchus"],u:"26ce",a:"0.6"},{n:["twisted rightwards arrows"],u:"1f500",a:"1.0"},{n:["repeat","clockwise rightwards and leftwards open circle arrows"],u:"1f501",a:"1.0"},{n:["repeat one","clockwise rightwards and leftwards open circle arrows with circled one overlay"],u:"1f502",a:"1.0"},{n:["arrow forward","black right-pointing triangle"],u:"25b6-fe0f",a:"0.6"},{n:["fast forward","black right-pointing double triangle"],u:"23e9",a:"0.6"},{n:["next track button","black right pointing double triangle with vertical bar"],u:"23ed-fe0f",a:"0.7"},{n:["play or pause button","black right pointing triangle with double vertical bar"],u:"23ef-fe0f",a:"1.0"},{n:["arrow backward","black left-pointing triangle"],u:"25c0-fe0f",a:"0.6"},{n:["rewind","black left-pointing double triangle"],u:"23ea",a:"0.6"},{n:["last track button","black left pointing double triangle with vertical bar"],u:"23ee-fe0f",a:"0.7"},{n:["arrow up small","up-pointing small red triangle"],u:"1f53c",a:"0.6"},{n:["arrow double up","black up-pointing double triangle"],u:"23eb",a:"0.6"},{n:["arrow down small","down-pointing small red triangle"],u:"1f53d",a:"0.6"},{n:["arrow double down","black down-pointing double triangle"],u:"23ec",a:"0.6"},{n:["pause button","double vertical bar"],u:"23f8-fe0f",a:"0.7"},{n:["stop button","black square for stop"],u:"23f9-fe0f",a:"0.7"},{n:["record button","black circle for record"],u:"23fa-fe0f",a:"0.7"},{n:["eject","eject button"],u:"23cf-fe0f",a:"1.0"},{n:["cinema"],u:"1f3a6",a:"0.6"},{n:["low brightness","low brightness symbol"],u:"1f505",a:"1.0"},{n:["high brightness","high brightness symbol"],u:"1f506",a:"1.0"},{n:["signal strength","antenna with bars"],u:"1f4f6",a:"0.6"},{n:["vibration mode"],u:"1f4f3",a:"0.6"},{n:["mobile phone off"],u:"1f4f4",a:"0.6"},{n:["female sign"],u:"2640-fe0f",a:"4.0"},{n:["male sign"],u:"2642-fe0f",a:"4.0"},{n:["transgender symbol"],u:"26a7-fe0f",a:"13.0"},{n:["heavy multiplication x"],u:"2716-fe0f",a:"0.6"},{n:["heavy plus sign"],u:"2795",a:"0.6"},{n:["heavy minus sign"],u:"2796",a:"0.6"},{n:["heavy division sign"],u:"2797",a:"0.6"},{n:["heavy equals sign"],u:"1f7f0",a:"14.0"},{n:["infinity"],u:"267e-fe0f",a:"11.0"},{n:["bangbang","double exclamation mark"],u:"203c-fe0f",a:"0.6"},{n:["interrobang","exclamation question mark"],u:"2049-fe0f",a:"0.6"},{n:["question","black question mark ornament"],u:"2753",a:"0.6"},{n:["grey question","white question mark ornament"],u:"2754",a:"0.6"},{n:["grey exclamation","white exclamation mark ornament"],u:"2755",a:"0.6"},{n:["exclamation","heavy exclamation mark","heavy exclamation mark symbol"],u:"2757",a:"0.6"},{n:["wavy dash"],u:"3030-fe0f",a:"0.6"},{n:["currency exchange"],u:"1f4b1",a:"0.6"},{n:["heavy dollar sign"],u:"1f4b2",a:"0.6"},{n:["medical symbol","staff of aesculapius"],u:"2695-fe0f",a:"4.0"},{n:["recycle","black universal recycling symbol"],u:"267b-fe0f",a:"0.6"},{n:["fleur-de-lis","fleur de lis"],u:"269c-fe0f",a:"1.0"},{n:["trident","trident emblem"],u:"1f531",a:"0.6"},{n:["name badge"],u:"1f4db",a:"0.6"},{n:["beginner","japanese symbol for beginner"],u:"1f530",a:"0.6"},{n:["o","heavy large circle"],u:"2b55",a:"0.6"},{n:["white check mark","white heavy check mark"],u:"2705",a:"0.6"},{n:["ballot box with check"],u:"2611-fe0f",a:"0.6"},{n:["heavy check mark"],u:"2714-fe0f",a:"0.6"},{n:["x","cross mark"],u:"274c",a:"0.6"},{n:["negative squared cross mark"],u:"274e",a:"0.6"},{n:["curly loop"],u:"27b0",a:"0.6"},{n:["loop","double curly loop"],u:"27bf",a:"1.0"},{n:["part alternation mark"],u:"303d-fe0f",a:"0.6"},{n:["eight spoked asterisk"],u:"2733-fe0f",a:"0.6"},{n:["eight pointed black star"],u:"2734-fe0f",a:"0.6"},{n:["sparkle"],u:"2747-fe0f",a:"0.6"},{n:["copyright","copyright sign"],u:"00a9-fe0f",a:"0.6"},{n:["registered","registered sign"],u:"00ae-fe0f",a:"0.6"},{n:["tm","trade mark sign"],u:"2122-fe0f",a:"0.6"},{n:["hash","hash key"],u:"0023-fe0f-20e3",a:"0.6"},{n:["keycap: *","keycap star"],u:"002a-fe0f-20e3",a:"2.0"},{n:["zero","keycap 0"],u:"0030-fe0f-20e3",a:"0.6"},{n:["one","keycap 1"],u:"0031-fe0f-20e3",a:"0.6"},{n:["two","keycap 2"],u:"0032-fe0f-20e3",a:"0.6"},{n:["three","keycap 3"],u:"0033-fe0f-20e3",a:"0.6"},{n:["four","keycap 4"],u:"0034-fe0f-20e3",a:"0.6"},{n:["five","keycap 5"],u:"0035-fe0f-20e3",a:"0.6"},{n:["six","keycap 6"],u:"0036-fe0f-20e3",a:"0.6"},{n:["seven","keycap 7"],u:"0037-fe0f-20e3",a:"0.6"},{n:["eight","keycap 8"],u:"0038-fe0f-20e3",a:"0.6"},{n:["nine","keycap 9"],u:"0039-fe0f-20e3",a:"0.6"},{n:["keycap ten"],u:"1f51f",a:"0.6"},{n:["capital abcd","input symbol for latin capital letters"],u:"1f520",a:"0.6"},{n:["abcd","input symbol for latin small letters"],u:"1f521",a:"0.6"},{n:["1234","input symbol for numbers"],u:"1f522",a:"0.6"},{n:["symbols","input symbol for symbols"],u:"1f523",a:"0.6"},{n:["abc","input symbol for latin letters"],u:"1f524",a:"0.6"},{n:["a","negative squared latin capital letter a"],u:"1f170-fe0f",a:"0.6"},{n:["ab","negative squared ab"],u:"1f18e",a:"0.6"},{n:["b","negative squared latin capital letter b"],u:"1f171-fe0f",a:"0.6"},{n:["cl","squared cl"],u:"1f191",a:"0.6"},{n:["cool","squared cool"],u:"1f192",a:"0.6"},{n:["free","squared free"],u:"1f193",a:"0.6"},{n:["information source"],u:"2139-fe0f",a:"0.6"},{n:["id","squared id"],u:"1f194",a:"0.6"},{n:["m","circled latin capital letter m"],u:"24c2-fe0f",a:"0.6"},{n:["new","squared new"],u:"1f195",a:"0.6"},{n:["ng","squared ng"],u:"1f196",a:"0.6"},{n:["o2","negative squared latin capital letter o"],u:"1f17e-fe0f",a:"0.6"},{n:["ok","squared ok"],u:"1f197",a:"0.6"},{n:["parking","negative squared latin capital letter p"],u:"1f17f-fe0f",a:"0.6"},{n:["sos","squared sos"],u:"1f198",a:"0.6"},{n:["up","squared up with exclamation mark"],u:"1f199",a:"0.6"},{n:["vs","squared vs"],u:"1f19a",a:"0.6"},{n:["koko","squared katakana koko"],u:"1f201",a:"0.6"},{n:["sa","squared katakana sa"],u:"1f202-fe0f",a:"0.6"},{n:["u6708","squared cjk unified ideograph-6708"],u:"1f237-fe0f",a:"0.6"},{n:["u6709","squared cjk unified ideograph-6709"],u:"1f236",a:"0.6"},{n:["u6307","squared cjk unified ideograph-6307"],u:"1f22f",a:"0.6"},{n:["ideograph advantage","circled ideograph advantage"],u:"1f250",a:"0.6"},{n:["u5272","squared cjk unified ideograph-5272"],u:"1f239",a:"0.6"},{n:["u7121","squared cjk unified ideograph-7121"],u:"1f21a",a:"0.6"},{n:["u7981","squared cjk unified ideograph-7981"],u:"1f232",a:"0.6"},{n:["accept","circled ideograph accept"],u:"1f251",a:"0.6"},{n:["u7533","squared cjk unified ideograph-7533"],u:"1f238",a:"0.6"},{n:["u5408","squared cjk unified ideograph-5408"],u:"1f234",a:"0.6"},{n:["u7a7a","squared cjk unified ideograph-7a7a"],u:"1f233",a:"0.6"},{n:["congratulations","circled ideograph congratulation"],u:"3297-fe0f",a:"0.6"},{n:["secret","circled ideograph secret"],u:"3299-fe0f",a:"0.6"},{n:["u55b6","squared cjk unified ideograph-55b6"],u:"1f23a",a:"0.6"},{n:["u6e80","squared cjk unified ideograph-6e80"],u:"1f235",a:"0.6"},{n:["red circle","large red circle"],u:"1f534",a:"0.6"},{n:["large orange circle"],u:"1f7e0",a:"12.0"},{n:["large yellow circle"],u:"1f7e1",a:"12.0"},{n:["large green circle"],u:"1f7e2",a:"12.0"},{n:["large blue circle"],u:"1f535",a:"0.6"},{n:["large purple circle"],u:"1f7e3",a:"12.0"},{n:["large brown circle"],u:"1f7e4",a:"12.0"},{n:["black circle","medium black circle"],u:"26ab",a:"0.6"},{n:["white circle","medium white circle"],u:"26aa",a:"0.6"},{n:["large red square"],u:"1f7e5",a:"12.0"},{n:["large orange square"],u:"1f7e7",a:"12.0"},{n:["large yellow square"],u:"1f7e8",a:"12.0"},{n:["large green square"],u:"1f7e9",a:"12.0"},{n:["large blue square"],u:"1f7e6",a:"12.0"},{n:["large purple square"],u:"1f7ea",a:"12.0"},{n:["large brown square"],u:"1f7eb",a:"12.0"},{n:["black large square"],u:"2b1b",a:"0.6"},{n:["white large square"],u:"2b1c",a:"0.6"},{n:["black medium square"],u:"25fc-fe0f",a:"0.6"},{n:["white medium square"],u:"25fb-fe0f",a:"0.6"},{n:["black medium small square"],u:"25fe",a:"0.6"},{n:["white medium small square"],u:"25fd",a:"0.6"},{n:["black small square"],u:"25aa-fe0f",a:"0.6"},{n:["white small square"],u:"25ab-fe0f",a:"0.6"},{n:["large orange diamond"],u:"1f536",a:"0.6"},{n:["large blue diamond"],u:"1f537",a:"0.6"},{n:["small orange diamond"],u:"1f538",a:"0.6"},{n:["small blue diamond"],u:"1f539",a:"0.6"},{n:["small red triangle","up-pointing red triangle"],u:"1f53a",a:"0.6"},{n:["small red triangle down","down-pointing red triangle"],u:"1f53b",a:"0.6"},{n:["diamond shape with a dot inside"],u:"1f4a0",a:"0.6"},{n:["radio button"],u:"1f518",a:"0.6"},{n:["white square button"],u:"1f533",a:"0.6"},{n:["black square button"],u:"1f532",a:"0.6"}],flags:[{n:["chequered flag","checkered flag"],u:"1f3c1",a:"0.6"},{n:["triangular flag on post"],u:"1f6a9",a:"0.6"},{n:["crossed flags"],u:"1f38c",a:"0.6"},{n:["waving black flag"],u:"1f3f4",a:"1.0"},{n:["white flag","waving white flag"],u:"1f3f3-fe0f",a:"0.7"},{n:["rainbow flag","rainbow-flag"],u:"1f3f3-fe0f-200d-1f308",a:"4.0"},{n:["transgender flag"],u:"1f3f3-fe0f-200d-26a7-fe0f",a:"13.0"},{n:["pirate flag"],u:"1f3f4-200d-2620-fe0f",a:"11.0"},{n:["flag-ac","ascension island flag"],u:"1f1e6-1f1e8",a:"2.0"},{n:["flag-ad","andorra flag"],u:"1f1e6-1f1e9",a:"2.0"},{n:["flag-ae","united arab emirates flag"],u:"1f1e6-1f1ea",a:"2.0"},{n:["flag-af","afghanistan flag"],u:"1f1e6-1f1eb",a:"2.0"},{n:["flag-ag","antigua & barbuda flag"],u:"1f1e6-1f1ec",a:"2.0"},{n:["flag-ai","anguilla flag"],u:"1f1e6-1f1ee",a:"2.0"},{n:["flag-al","albania flag"],u:"1f1e6-1f1f1",a:"2.0"},{n:["flag-am","armenia flag"],u:"1f1e6-1f1f2",a:"2.0"},{n:["flag-ao","angola flag"],u:"1f1e6-1f1f4",a:"2.0"},{n:["flag-aq","antarctica flag"],u:"1f1e6-1f1f6",a:"2.0"},{n:["flag-ar","argentina flag"],u:"1f1e6-1f1f7",a:"2.0"},{n:["flag-as","american samoa flag"],u:"1f1e6-1f1f8",a:"2.0"},{n:["flag-at","austria flag"],u:"1f1e6-1f1f9",a:"2.0"},{n:["flag-au","australia flag"],u:"1f1e6-1f1fa",a:"2.0"},{n:["flag-aw","aruba flag"],u:"1f1e6-1f1fc",a:"2.0"},{n:["flag-ax","åland islands flag"],u:"1f1e6-1f1fd",a:"2.0"},{n:["flag-az","azerbaijan flag"],u:"1f1e6-1f1ff",a:"2.0"},{n:["flag-ba","bosnia & herzegovina flag"],u:"1f1e7-1f1e6",a:"2.0"},{n:["flag-bb","barbados flag"],u:"1f1e7-1f1e7",a:"2.0"},{n:["flag-bd","bangladesh flag"],u:"1f1e7-1f1e9",a:"2.0"},{n:["flag-be","belgium flag"],u:"1f1e7-1f1ea",a:"2.0"},{n:["flag-bf","burkina faso flag"],u:"1f1e7-1f1eb",a:"2.0"},{n:["flag-bg","bulgaria flag"],u:"1f1e7-1f1ec",a:"2.0"},{n:["flag-bh","bahrain flag"],u:"1f1e7-1f1ed",a:"2.0"},{n:["flag-bi","burundi flag"],u:"1f1e7-1f1ee",a:"2.0"},{n:["flag-bj","benin flag"],u:"1f1e7-1f1ef",a:"2.0"},{n:["flag-bl","st. barthélemy flag"],u:"1f1e7-1f1f1",a:"2.0"},{n:["flag-bm","bermuda flag"],u:"1f1e7-1f1f2",a:"2.0"},{n:["flag-bn","brunei flag"],u:"1f1e7-1f1f3",a:"2.0"},{n:["flag-bo","bolivia flag"],u:"1f1e7-1f1f4",a:"2.0"},{n:["flag-bq","caribbean netherlands flag"],u:"1f1e7-1f1f6",a:"2.0"},{n:["flag-br","brazil flag"],u:"1f1e7-1f1f7",a:"2.0"},{n:["flag-bs","bahamas flag"],u:"1f1e7-1f1f8",a:"2.0"},{n:["flag-bt","bhutan flag"],u:"1f1e7-1f1f9",a:"2.0"},{n:["flag-bv","bouvet island flag"],u:"1f1e7-1f1fb",a:"2.0"},{n:["flag-bw","botswana flag"],u:"1f1e7-1f1fc",a:"2.0"},{n:["flag-by","belarus flag"],u:"1f1e7-1f1fe",a:"2.0"},{n:["flag-bz","belize flag"],u:"1f1e7-1f1ff",a:"2.0"},{n:["flag-ca","canada flag"],u:"1f1e8-1f1e6",a:"2.0"},{n:["flag-cc","cocos (keeling) islands flag"],u:"1f1e8-1f1e8",a:"2.0"},{n:["flag-cd","congo - kinshasa flag"],u:"1f1e8-1f1e9",a:"2.0"},{n:["flag-cf","central african republic flag"],u:"1f1e8-1f1eb",a:"2.0"},{n:["flag-cg","congo - brazzaville flag"],u:"1f1e8-1f1ec",a:"2.0"},{n:["flag-ch","switzerland flag"],u:"1f1e8-1f1ed",a:"2.0"},{n:["flag-ci","côte d’ivoire flag"],u:"1f1e8-1f1ee",a:"2.0"},{n:["flag-ck","cook islands flag"],u:"1f1e8-1f1f0",a:"2.0"},{n:["flag-cl","chile flag"],u:"1f1e8-1f1f1",a:"2.0"},{n:["flag-cm","cameroon flag"],u:"1f1e8-1f1f2",a:"2.0"},{n:["cn","flag-cn","china flag"],u:"1f1e8-1f1f3",a:"0.6"},{n:["flag-co","colombia flag"],u:"1f1e8-1f1f4",a:"2.0"},{n:["flag-cp","clipperton island flag"],u:"1f1e8-1f1f5",a:"2.0"},{n:["flag-cr","costa rica flag"],u:"1f1e8-1f1f7",a:"2.0"},{n:["flag-cu","cuba flag"],u:"1f1e8-1f1fa",a:"2.0"},{n:["flag-cv","cape verde flag"],u:"1f1e8-1f1fb",a:"2.0"},{n:["flag-cw","curaçao flag"],u:"1f1e8-1f1fc",a:"2.0"},{n:["flag-cx","christmas island flag"],u:"1f1e8-1f1fd",a:"2.0"},{n:["flag-cy","cyprus flag"],u:"1f1e8-1f1fe",a:"2.0"},{n:["flag-cz","czechia flag"],u:"1f1e8-1f1ff",a:"2.0"},{n:["de","flag-de","germany flag"],u:"1f1e9-1f1ea",a:"0.6"},{n:["flag-dg","diego garcia flag"],u:"1f1e9-1f1ec",a:"2.0"},{n:["flag-dj","djibouti flag"],u:"1f1e9-1f1ef",a:"2.0"},{n:["flag-dk","denmark flag"],u:"1f1e9-1f1f0",a:"2.0"},{n:["flag-dm","dominica flag"],u:"1f1e9-1f1f2",a:"2.0"},{n:["flag-do","dominican republic flag"],u:"1f1e9-1f1f4",a:"2.0"},{n:["flag-dz","algeria flag"],u:"1f1e9-1f1ff",a:"2.0"},{n:["flag-ea","ceuta & melilla flag"],u:"1f1ea-1f1e6",a:"2.0"},{n:["flag-ec","ecuador flag"],u:"1f1ea-1f1e8",a:"2.0"},{n:["flag-ee","estonia flag"],u:"1f1ea-1f1ea",a:"2.0"},{n:["flag-eg","egypt flag"],u:"1f1ea-1f1ec",a:"2.0"},{n:["flag-eh","western sahara flag"],u:"1f1ea-1f1ed",a:"2.0"},{n:["flag-er","eritrea flag"],u:"1f1ea-1f1f7",a:"2.0"},{n:["es","flag-es","spain flag"],u:"1f1ea-1f1f8",a:"0.6"},{n:["flag-et","ethiopia flag"],u:"1f1ea-1f1f9",a:"2.0"},{n:["flag-eu","european union flag"],u:"1f1ea-1f1fa",a:"2.0"},{n:["flag-fi","finland flag"],u:"1f1eb-1f1ee",a:"2.0"},{n:["flag-fj","fiji flag"],u:"1f1eb-1f1ef",a:"2.0"},{n:["flag-fk","falkland islands flag"],u:"1f1eb-1f1f0",a:"2.0"},{n:["flag-fm","micronesia flag"],u:"1f1eb-1f1f2",a:"2.0"},{n:["flag-fo","faroe islands flag"],u:"1f1eb-1f1f4",a:"2.0"},{n:["fr","flag-fr","france flag"],u:"1f1eb-1f1f7",a:"0.6"},{n:["flag-ga","gabon flag"],u:"1f1ec-1f1e6",a:"2.0"},{n:["gb","uk","flag-gb","united kingdom flag"],u:"1f1ec-1f1e7",a:"0.6"},{n:["flag-gd","grenada flag"],u:"1f1ec-1f1e9",a:"2.0"},{n:["flag-ge","georgia flag"],u:"1f1ec-1f1ea",a:"2.0"},{n:["flag-gf","french guiana flag"],u:"1f1ec-1f1eb",a:"2.0"},{n:["flag-gg","guernsey flag"],u:"1f1ec-1f1ec",a:"2.0"},{n:["flag-gh","ghana flag"],u:"1f1ec-1f1ed",a:"2.0"},{n:["flag-gi","gibraltar flag"],u:"1f1ec-1f1ee",a:"2.0"},{n:["flag-gl","greenland flag"],u:"1f1ec-1f1f1",a:"2.0"},{n:["flag-gm","gambia flag"],u:"1f1ec-1f1f2",a:"2.0"},{n:["flag-gn","guinea flag"],u:"1f1ec-1f1f3",a:"2.0"},{n:["flag-gp","guadeloupe flag"],u:"1f1ec-1f1f5",a:"2.0"},{n:["flag-gq","equatorial guinea flag"],u:"1f1ec-1f1f6",a:"2.0"},{n:["flag-gr","greece flag"],u:"1f1ec-1f1f7",a:"2.0"},{n:["flag-gs","south georgia & south sandwich islands flag"],u:"1f1ec-1f1f8",a:"2.0"},{n:["flag-gt","guatemala flag"],u:"1f1ec-1f1f9",a:"2.0"},{n:["flag-gu","guam flag"],u:"1f1ec-1f1fa",a:"2.0"},{n:["flag-gw","guinea-bissau flag"],u:"1f1ec-1f1fc",a:"2.0"},{n:["flag-gy","guyana flag"],u:"1f1ec-1f1fe",a:"2.0"},{n:["flag-hk","hong kong sar china flag"],u:"1f1ed-1f1f0",a:"2.0"},{n:["flag-hm","heard & mcdonald islands flag"],u:"1f1ed-1f1f2",a:"2.0"},{n:["flag-hn","honduras flag"],u:"1f1ed-1f1f3",a:"2.0"},{n:["flag-hr","croatia flag"],u:"1f1ed-1f1f7",a:"2.0"},{n:["flag-ht","haiti flag"],u:"1f1ed-1f1f9",a:"2.0"},{n:["flag-hu","hungary flag"],u:"1f1ed-1f1fa",a:"2.0"},{n:["flag-ic","canary islands flag"],u:"1f1ee-1f1e8",a:"2.0"},{n:["flag-id","indonesia flag"],u:"1f1ee-1f1e9",a:"2.0"},{n:["flag-ie","ireland flag"],u:"1f1ee-1f1ea",a:"2.0"},{n:["flag-il","israel flag"],u:"1f1ee-1f1f1",a:"2.0"},{n:["flag-im","isle of man flag"],u:"1f1ee-1f1f2",a:"2.0"},{n:["flag-in","india flag"],u:"1f1ee-1f1f3",a:"2.0"},{n:["flag-io","british indian ocean territory flag"],u:"1f1ee-1f1f4",a:"2.0"},{n:["flag-iq","iraq flag"],u:"1f1ee-1f1f6",a:"2.0"},{n:["flag-ir","iran flag"],u:"1f1ee-1f1f7",a:"2.0"},{n:["flag-is","iceland flag"],u:"1f1ee-1f1f8",a:"2.0"},{n:["it","flag-it","italy flag"],u:"1f1ee-1f1f9",a:"0.6"},{n:["flag-je","jersey flag"],u:"1f1ef-1f1ea",a:"2.0"},{n:["flag-jm","jamaica flag"],u:"1f1ef-1f1f2",a:"2.0"},{n:["flag-jo","jordan flag"],u:"1f1ef-1f1f4",a:"2.0"},{n:["jp","flag-jp","japan flag"],u:"1f1ef-1f1f5",a:"0.6"},{n:["flag-ke","kenya flag"],u:"1f1f0-1f1ea",a:"2.0"},{n:["flag-kg","kyrgyzstan flag"],u:"1f1f0-1f1ec",a:"2.0"},{n:["flag-kh","cambodia flag"],u:"1f1f0-1f1ed",a:"2.0"},{n:["flag-ki","kiribati flag"],u:"1f1f0-1f1ee",a:"2.0"},{n:["flag-km","comoros flag"],u:"1f1f0-1f1f2",a:"2.0"},{n:["flag-kn","st. kitts & nevis flag"],u:"1f1f0-1f1f3",a:"2.0"},{n:["flag-kp","north korea flag"],u:"1f1f0-1f1f5",a:"2.0"},{n:["kr","flag-kr","south korea flag"],u:"1f1f0-1f1f7",a:"0.6"},{n:["flag-kw","kuwait flag"],u:"1f1f0-1f1fc",a:"2.0"},{n:["flag-ky","cayman islands flag"],u:"1f1f0-1f1fe",a:"2.0"},{n:["flag-kz","kazakhstan flag"],u:"1f1f0-1f1ff",a:"2.0"},{n:["flag-la","laos flag"],u:"1f1f1-1f1e6",a:"2.0"},{n:["flag-lb","lebanon flag"],u:"1f1f1-1f1e7",a:"2.0"},{n:["flag-lc","st. lucia flag"],u:"1f1f1-1f1e8",a:"2.0"},{n:["flag-li","liechtenstein flag"],u:"1f1f1-1f1ee",a:"2.0"},{n:["flag-lk","sri lanka flag"],u:"1f1f1-1f1f0",a:"2.0"},{n:["flag-lr","liberia flag"],u:"1f1f1-1f1f7",a:"2.0"},{n:["flag-ls","lesotho flag"],u:"1f1f1-1f1f8",a:"2.0"},{n:["flag-lt","lithuania flag"],u:"1f1f1-1f1f9",a:"2.0"},{n:["flag-lu","luxembourg flag"],u:"1f1f1-1f1fa",a:"2.0"},{n:["flag-lv","latvia flag"],u:"1f1f1-1f1fb",a:"2.0"},{n:["flag-ly","libya flag"],u:"1f1f1-1f1fe",a:"2.0"},{n:["flag-ma","morocco flag"],u:"1f1f2-1f1e6",a:"2.0"},{n:["flag-mc","monaco flag"],u:"1f1f2-1f1e8",a:"2.0"},{n:["flag-md","moldova flag"],u:"1f1f2-1f1e9",a:"2.0"},{n:["flag-me","montenegro flag"],u:"1f1f2-1f1ea",a:"2.0"},{n:["flag-mf","st. martin flag"],u:"1f1f2-1f1eb",a:"2.0"},{n:["flag-mg","madagascar flag"],u:"1f1f2-1f1ec",a:"2.0"},{n:["flag-mh","marshall islands flag"],u:"1f1f2-1f1ed",a:"2.0"},{n:["flag-mk","north macedonia flag"],u:"1f1f2-1f1f0",a:"2.0"},{n:["flag-ml","mali flag"],u:"1f1f2-1f1f1",a:"2.0"},{n:["flag-mm","myanmar (burma) flag"],u:"1f1f2-1f1f2",a:"2.0"},{n:["flag-mn","mongolia flag"],u:"1f1f2-1f1f3",a:"2.0"},{n:["flag-mo","macao sar china flag"],u:"1f1f2-1f1f4",a:"2.0"},{n:["flag-mp","northern mariana islands flag"],u:"1f1f2-1f1f5",a:"2.0"},{n:["flag-mq","martinique flag"],u:"1f1f2-1f1f6",a:"2.0"},{n:["flag-mr","mauritania flag"],u:"1f1f2-1f1f7",a:"2.0"},{n:["flag-ms","montserrat flag"],u:"1f1f2-1f1f8",a:"2.0"},{n:["flag-mt","malta flag"],u:"1f1f2-1f1f9",a:"2.0"},{n:["flag-mu","mauritius flag"],u:"1f1f2-1f1fa",a:"2.0"},{n:["flag-mv","maldives flag"],u:"1f1f2-1f1fb",a:"2.0"},{n:["flag-mw","malawi flag"],u:"1f1f2-1f1fc",a:"2.0"},{n:["flag-mx","mexico flag"],u:"1f1f2-1f1fd",a:"2.0"},{n:["flag-my","malaysia flag"],u:"1f1f2-1f1fe",a:"2.0"},{n:["flag-mz","mozambique flag"],u:"1f1f2-1f1ff",a:"2.0"},{n:["flag-na","namibia flag"],u:"1f1f3-1f1e6",a:"2.0"},{n:["flag-nc","new caledonia flag"],u:"1f1f3-1f1e8",a:"2.0"},{n:["flag-ne","niger flag"],u:"1f1f3-1f1ea",a:"2.0"},{n:["flag-nf","norfolk island flag"],u:"1f1f3-1f1eb",a:"2.0"},{n:["flag-ng","nigeria flag"],u:"1f1f3-1f1ec",a:"2.0"},{n:["flag-ni","nicaragua flag"],u:"1f1f3-1f1ee",a:"2.0"},{n:["flag-nl","netherlands flag"],u:"1f1f3-1f1f1",a:"2.0"},{n:["flag-no","norway flag"],u:"1f1f3-1f1f4",a:"2.0"},{n:["flag-np","nepal flag"],u:"1f1f3-1f1f5",a:"2.0"},{n:["flag-nr","nauru flag"],u:"1f1f3-1f1f7",a:"2.0"},{n:["flag-nu","niue flag"],u:"1f1f3-1f1fa",a:"2.0"},{n:["flag-nz","new zealand flag"],u:"1f1f3-1f1ff",a:"2.0"},{n:["flag-om","oman flag"],u:"1f1f4-1f1f2",a:"2.0"},{n:["flag-pa","panama flag"],u:"1f1f5-1f1e6",a:"2.0"},{n:["flag-pe","peru flag"],u:"1f1f5-1f1ea",a:"2.0"},{n:["flag-pf","french polynesia flag"],u:"1f1f5-1f1eb",a:"2.0"},{n:["flag-pg","papua new guinea flag"],u:"1f1f5-1f1ec",a:"2.0"},{n:["flag-ph","philippines flag"],u:"1f1f5-1f1ed",a:"2.0"},{n:["flag-pk","pakistan flag"],u:"1f1f5-1f1f0",a:"2.0"},{n:["flag-pl","poland flag"],u:"1f1f5-1f1f1",a:"2.0"},{n:["flag-pm","st. pierre & miquelon flag"],u:"1f1f5-1f1f2",a:"2.0"},{n:["flag-pn","pitcairn islands flag"],u:"1f1f5-1f1f3",a:"2.0"},{n:["flag-pr","puerto rico flag"],u:"1f1f5-1f1f7",a:"2.0"},{n:["flag-ps","palestinian territories flag"],u:"1f1f5-1f1f8",a:"2.0"},{n:["flag-pt","portugal flag"],u:"1f1f5-1f1f9",a:"2.0"},{n:["flag-pw","palau flag"],u:"1f1f5-1f1fc",a:"2.0"},{n:["flag-py","paraguay flag"],u:"1f1f5-1f1fe",a:"2.0"},{n:["flag-qa","qatar flag"],u:"1f1f6-1f1e6",a:"2.0"},{n:["flag-re","réunion flag"],u:"1f1f7-1f1ea",a:"2.0"},{n:["flag-ro","romania flag"],u:"1f1f7-1f1f4",a:"2.0"},{n:["flag-rs","serbia flag"],u:"1f1f7-1f1f8",a:"2.0"},{n:["ru","flag-ru","russia flag"],u:"1f1f7-1f1fa",a:"0.6"},{n:["flag-rw","rwanda flag"],u:"1f1f7-1f1fc",a:"2.0"},{n:["flag-sa","saudi arabia flag"],u:"1f1f8-1f1e6",a:"2.0"},{n:["flag-sb","solomon islands flag"],u:"1f1f8-1f1e7",a:"2.0"},{n:["flag-sc","seychelles flag"],u:"1f1f8-1f1e8",a:"2.0"},{n:["flag-sd","sudan flag"],u:"1f1f8-1f1e9",a:"2.0"},{n:["flag-se","sweden flag"],u:"1f1f8-1f1ea",a:"2.0"},{n:["flag-sg","singapore flag"],u:"1f1f8-1f1ec",a:"2.0"},{n:["flag-sh","st. helena flag"],u:"1f1f8-1f1ed",a:"2.0"},{n:["flag-si","slovenia flag"],u:"1f1f8-1f1ee",a:"2.0"},{n:["flag-sj","svalbard & jan mayen flag"],u:"1f1f8-1f1ef",a:"2.0"},{n:["flag-sk","slovakia flag"],u:"1f1f8-1f1f0",a:"2.0"},{n:["flag-sl","sierra leone flag"],u:"1f1f8-1f1f1",a:"2.0"},{n:["flag-sm","san marino flag"],u:"1f1f8-1f1f2",a:"2.0"},{n:["flag-sn","senegal flag"],u:"1f1f8-1f1f3",a:"2.0"},{n:["flag-so","somalia flag"],u:"1f1f8-1f1f4",a:"2.0"},{n:["flag-sr","suriname flag"],u:"1f1f8-1f1f7",a:"2.0"},{n:["flag-ss","south sudan flag"],u:"1f1f8-1f1f8",a:"2.0"},{n:["flag-st","são tomé & príncipe flag"],u:"1f1f8-1f1f9",a:"2.0"},{n:["flag-sv","el salvador flag"],u:"1f1f8-1f1fb",a:"2.0"},{n:["flag-sx","sint maarten flag"],u:"1f1f8-1f1fd",a:"2.0"},{n:["flag-sy","syria flag"],u:"1f1f8-1f1fe",a:"2.0"},{n:["flag-sz","eswatini flag"],u:"1f1f8-1f1ff",a:"2.0"},{n:["flag-ta","tristan da cunha flag"],u:"1f1f9-1f1e6",a:"2.0"},{n:["flag-tc","turks & caicos islands flag"],u:"1f1f9-1f1e8",a:"2.0"},{n:["flag-td","chad flag"],u:"1f1f9-1f1e9",a:"2.0"},{n:["flag-tf","french southern territories flag"],u:"1f1f9-1f1eb",a:"2.0"},{n:["flag-tg","togo flag"],u:"1f1f9-1f1ec",a:"2.0"},{n:["flag-th","thailand flag"],u:"1f1f9-1f1ed",a:"2.0"},{n:["flag-tj","tajikistan flag"],u:"1f1f9-1f1ef",a:"2.0"},{n:["flag-tk","tokelau flag"],u:"1f1f9-1f1f0",a:"2.0"},{n:["flag-tl","timor-leste flag"],u:"1f1f9-1f1f1",a:"2.0"},{n:["flag-tm","turkmenistan flag"],u:"1f1f9-1f1f2",a:"2.0"},{n:["flag-tn","tunisia flag"],u:"1f1f9-1f1f3",a:"2.0"},{n:["flag-to","tonga flag"],u:"1f1f9-1f1f4",a:"2.0"},{n:["flag-tr","turkey flag"],u:"1f1f9-1f1f7",a:"2.0"},{n:["flag-tt","trinidad & tobago flag"],u:"1f1f9-1f1f9",a:"2.0"},{n:["flag-tv","tuvalu flag"],u:"1f1f9-1f1fb",a:"2.0"},{n:["flag-tw","taiwan flag"],u:"1f1f9-1f1fc",a:"2.0"},{n:["flag-tz","tanzania flag"],u:"1f1f9-1f1ff",a:"2.0"},{n:["flag-ua","ukraine flag"],u:"1f1fa-1f1e6",a:"2.0"},{n:["flag-ug","uganda flag"],u:"1f1fa-1f1ec",a:"2.0"},{n:["flag-um","u.s. outlying islands flag"],u:"1f1fa-1f1f2",a:"2.0"},{n:["flag-un","united nations flag"],u:"1f1fa-1f1f3",a:"4.0"},{n:["us","flag-us","united states flag"],u:"1f1fa-1f1f8",a:"0.6"},{n:["flag-uy","uruguay flag"],u:"1f1fa-1f1fe",a:"2.0"},{n:["flag-uz","uzbekistan flag"],u:"1f1fa-1f1ff",a:"2.0"},{n:["flag-va","vatican city flag"],u:"1f1fb-1f1e6",a:"2.0"},{n:["flag-vc","st. vincent & grenadines flag"],u:"1f1fb-1f1e8",a:"2.0"},{n:["flag-ve","venezuela flag"],u:"1f1fb-1f1ea",a:"2.0"},{n:["flag-vg","british virgin islands flag"],u:"1f1fb-1f1ec",a:"2.0"},{n:["flag-vi","u.s. virgin islands flag"],u:"1f1fb-1f1ee",a:"2.0"},{n:["flag-vn","vietnam flag"],u:"1f1fb-1f1f3",a:"2.0"},{n:["flag-vu","vanuatu flag"],u:"1f1fb-1f1fa",a:"2.0"},{n:["flag-wf","wallis & futuna flag"],u:"1f1fc-1f1eb",a:"2.0"},{n:["flag-ws","samoa flag"],u:"1f1fc-1f1f8",a:"2.0"},{n:["flag-xk","kosovo flag"],u:"1f1fd-1f1f0",a:"2.0"},{n:["flag-ye","yemen flag"],u:"1f1fe-1f1ea",a:"2.0"},{n:["flag-yt","mayotte flag"],u:"1f1fe-1f1f9",a:"2.0"},{n:["flag-za","south africa flag"],u:"1f1ff-1f1e6",a:"2.0"},{n:["flag-zm","zambia flag"],u:"1f1ff-1f1f2",a:"2.0"},{n:["flag-zw","zimbabwe flag"],u:"1f1ff-1f1fc",a:"2.0"},{n:["england flag","flag-england"],u:"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f",a:"5.0"},{n:["scotland flag","flag-scotland"],u:"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f",a:"5.0"},{n:["wales flag","flag-wales"],u:"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f",a:"5.0"}]},NG=[sG.NEUTRAL,sG.LIGHT,sG.MEDIUM_LIGHT,sG.MEDIUM,sG.MEDIUM_DARK,sG.DARK],CG=Object.entries(sG).reduce((function(e,t){var n=t[0];return e[t[1]]=n,e}),{}),SG=NG.reduce((function(e,t){var n;return Object.assign(e,((n={})[t]=t,n))}),{});(wG=bG||(bG={})).name="n",wG.unified="u",wG.variations="v",wG.added_in="a",wG.imgUrl="imgUrl";var kG={};function MG(e){_G(e).flat().join("").toLowerCase().replace(/[^a-zA-Z\d]/g,"").split("").forEach((function(t){var n;kG[t]=null!=(n=kG[t])?n:{},kG[t][EG(e)]=e}))}function _G(e){var t;return null!=(t=e[bG.name])?t:[]}function IG(e){return e?_G(e)[0]:""}function AG(e){var t=e.split("-"),n=t.splice(1,1)[0];return SG[n]?t.join("-"):e}function EG(e,t){var n,a=e[bG.unified];return t&&DG(e)&&null!=(n=function(e,t){return t?TG(e).find((function(e){return e.includes(t)})):EG(e)}(e,t))?n:a}function LG(e,t){return""+function(e){switch(e){case tG.TWITTER:return"https://cdn.jsdelivr.net/npm/emoji-datasource-twitter/img/twitter/64/";case tG.GOOGLE:return"https://cdn.jsdelivr.net/npm/emoji-datasource-google/img/google/64/";case tG.FACEBOOK:return"https://cdn.jsdelivr.net/npm/emoji-datasource-facebook/img/facebook/64/";case tG.APPLE:default:return"https://cdn.jsdelivr.net/npm/emoji-datasource-apple/img/apple/64/"}}(t)+e+".png"}function TG(e){var t;return null!=(t=e[bG.variations])?t:[]}function DG(e){return TG(e).length>0}function PG(e){if(e){if(zG[e])return zG[e];var t=AG(e);return zG[t]}}setTimeout((function(){OG.reduce((function(e,t){return MG(t),e}),kG)}));var OG=Object.values(jG).flat();function RG(e){jG[oG.CUSTOM].length=0,e.forEach((function(e){var t=function(e){var t;return(t={})[bG.name]=e.names.map((function(e){return e.toLowerCase()})),t[bG.unified]=e.id.toLowerCase(),t[bG.added_in]="0",t[bG.imgUrl]=e.imgUrl,t}(e);jG[oG.CUSTOM].push(t),zG[t[bG.unified]]||(OG.push(t),zG[t[bG.unified]]=t,MG(t))}))}var zG={};setTimeout((function(){OG.reduce((function(e,t){return e[EG(t)]=t,DG(t)&&TG(t).forEach((function(n){e[n]=t})),e}),zG)}));var FG=["2640-fe0f","2642-fe0f","2695-fe0f"],BG="Search",UG=" found. Use up and down arrow keys to navigate.",WG="1 result"+UG,GG="%n results"+UG;function VG(e){var t,n;void 0===e&&(e={});var a=HG(),r=Object.assign(a.previewConfig,null!=(t=e.previewConfig)?t:{}),s=Object.assign(a,e),i=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t={});var a={};t.suggestionMode===XW.RECENT&&(a[oG.SUGGESTED]=pG);var r=gG(a);return null!=(n=e)&&n.length?e.map((function(e){return"string"==typeof e?vG(e,a[e]):BW({},vG(e.category,a[e.category]),e)})):r}(e.categories,{suggestionMode:s.suggestedEmojisMode});s.hiddenEmojis.forEach((function(e){s.unicodeToHide.add(e)})),RG(null!=(n=s.customEmojis)?n:[]);var o=s.searchDisabled?cG.PREVIEW:s.skinTonePickerLocation;return BW({},s,{categories:i,previewConfig:r,skinTonePickerLocation:o})}function HG(){return{autoFocusSearch:!0,categories:gG(),className:"",customEmojis:[],defaultSkinTone:sG.NEUTRAL,emojiStyle:tG.APPLE,emojiVersion:null,getEmojiUrl:LG,height:450,lazyLoadEmojis:!1,previewConfig:BW({},qG),searchDisabled:!1,searchPlaceHolder:BG,searchPlaceholder:BG,skinTonePickerLocation:cG.SEARCH,skinTonesDisabled:!1,style:{},suggestedEmojisMode:XW.FREQUENT,theme:aG.LIGHT,unicodeToHide:new Set(FG),width:350,reactionsDefaultOpen:!1,reactions:fG,open:!0,allowExpandReactions:!0,hiddenEmojis:[]}}var qG={defaultEmoji:"1f60a",defaultCaption:"What's your mood?",showPreview:!0},$G=["children"],YG=cs.createContext(HG());function QG(e){var t=e.children,n=function(e){var t,n=cs.useState((function(){return VG(e)})),a=n[0],r=n[1];return cs.useEffect((function(){ZW(a,e)||r(VG(e))}),[null==(t=e.customEmojis)?void 0:t.length,e.open,e.emojiVersion,e.reactionsDefaultOpen,e.searchPlaceHolder,e.searchPlaceholder,e.defaultSkinTone,e.skinTonesDisabled,e.autoFocusSearch,e.emojiStyle,e.theme,e.suggestedEmojisMode,e.lazyLoadEmojis,e.className,e.height,e.width,e.searchDisabled,e.skinTonePickerLocation,e.allowExpandReactions]),a}(WW(e,$G));return cs.createElement(YG.Provider,{value:n},t)}function KG(){return cs.useContext(YG)}var JG,ZG,XG=ds.createContext({});function eV(){return ds.useContext(XG)}function tV(){}function nV(){return KG().allowExpandReactions}function aV(){return KG().skinTonesDisabled}function rV(){return KG().emojiStyle}function sV(){return KG().categories}function iV(){return KG().previewConfig}function oV(){return KG().searchDisabled}function lV(){return KG().skinTonePickerLocation}function cV(){return KG().getEmojiUrl}function dV(e){return"number"==typeof e?e+"px":e}function uV(e,t){void 0===t&&(t=0);var n=cs.useState(e),a=n[0],r=n[1],s=cs.useRef(null);return[a,function(e){return new Promise((function(n){var a;s.current&&clearTimeout(s.current),s.current=null==(a=window)?void 0:a.setTimeout((function(){r(e),n(e)}),t)}))}]}function fV(){var e=KG().unicodeToHide;return function(t){return e.has(t)}}function mV(){var e=cs.useRef({}),t=KG().emojiVersion;return cs.useMemo((function(){var n=parseFloat(""+t);return!t||Number.isNaN(n)?e.current:OG.reduce((function(e,t){return function(e,t){return function(e){return parseFloat(e[bG.added_in])}(e)>t}(t,n)&&(e[EG(t)]=!0),e}),e.current)}),[t])}function pV(e){var t,n=e.children,a=mV(),r=KG().defaultSkinTone,s=KG().reactionsDefaultOpen,i=cs.useRef(kG),o=cs.useRef(!1),l=cs.useRef(!1),c=cs.useRef(a),d=uV(Date.now(),200),u=uV("",100),f=cs.useState(!1),m=cs.useState(r),p=cs.useState(null),h=cs.useState(new Set),g=cs.useState(null),x=cs.useState(s),y=cs.useState(!1),v=y[0],b=y[1];return t=b,cs.useEffect((function(){t(!0)}),[t]),cs.createElement(hV.Provider,{value:{activeCategoryState:p,activeSkinTone:m,disallowClickRef:o,disallowMouseRef:l,disallowedEmojisRef:c,emojiVariationPickerState:g,emojisThatFailedToLoadState:h,filterRef:i,isPastInitialLoad:v,searchTerm:u,skinToneFanOpenState:f,suggestedUpdateState:d,reactionsModeState:x}},n)}(ZG=JG||(JG={})).REACTIONS="reactions",ZG.PICKER="picker";var hV=cs.createContext({activeCategoryState:[null,function(){}],activeSkinTone:[sG.NEUTRAL,function(){}],disallowClickRef:{current:!1},disallowMouseRef:{current:!1},disallowedEmojisRef:{current:{}},emojiVariationPickerState:[null,function(){}],emojisThatFailedToLoadState:[new Set,function(){}],filterRef:{current:{}},isPastInitialLoad:!0,searchTerm:["",function(){return new Promise((function(){}))}],skinToneFanOpenState:[!1,function(){}],suggestedUpdateState:[Date.now(),function(){}],reactionsModeState:[!1,function(){}]});function gV(){return cs.useContext(hV).filterRef}function xV(){return cs.useContext(hV).disallowMouseRef}function yV(){return cs.useContext(hV).reactionsModeState}function vV(){return cs.useContext(hV).searchTerm}function bV(){return cs.useContext(hV).activeSkinTone}function wV(){return cs.useContext(hV).emojisThatFailedToLoadState}function jV(){return cs.useContext(hV).emojiVariationPickerState}function NV(){return cs.useContext(hV).skinToneFanOpenState}function CV(){var e=cs.useContext(hV).suggestedUpdateState,t=e[0],n=e[1];return[t,function(){n(Date.now())}]}function SV(){return!!vV()[0]}function kV(e){e&&requestAnimationFrame((function(){e.focus()}))}function MV(e){e&&kV(e.previousElementSibling)}function _V(e){e&&kV(e.nextElementSibling)}function IV(e){e&&kV(e.firstElementChild)}function AV(){return document.activeElement}function EV(e){var t=e.children,n=cs.useRef(null),a=cs.useRef(null),r=cs.useRef(null),s=cs.useRef(null),i=cs.useRef(null),o=cs.useRef(null),l=cs.useRef(null),c=cs.useRef(null);return cs.createElement(DV.Provider,{value:{AnchoredEmojiRef:a,BodyRef:r,CategoryNavigationRef:o,PickerMainRef:n,SearchInputRef:s,SkinTonePickerRef:i,VariationPickerRef:l,ReactionsRef:c}},t)}var LV,TV,DV=cs.createContext({AnchoredEmojiRef:cs.createRef(),BodyRef:cs.createRef(),CategoryNavigationRef:cs.createRef(),PickerMainRef:cs.createRef(),SearchInputRef:cs.createRef(),SkinTonePickerRef:cs.createRef(),VariationPickerRef:cs.createRef(),ReactionsRef:cs.createRef()});function PV(){return cs.useContext(DV)}function OV(){return PV().PickerMainRef}function RV(){return PV().AnchoredEmojiRef}function zV(){var e=RV();return function(t){null===t&&null!==e.current&&kV(e.current),e.current=t}}function FV(){return PV().BodyRef}function BV(){return PV().SearchInputRef}function UV(){return PV().SkinTonePickerRef}function WV(){return PV().CategoryNavigationRef}function GV(e,t){void 0===t&&(t=0);var n=OH(e);n&&requestAnimationFrame((function(){n.scrollTop=t}))}function VV(e){if(e&&function(e){if(!e)return!1;return RH(e)<PH(XH(e))}(e)&&!e.closest(HW(AW.variationPicker))){var t=zH(e),n=RH(e);!function(e,t){var n=OH(e);n&&requestAnimationFrame((function(){n.scrollTop=n.scrollTop+t}))}(t,-(PH(XH(e))-n))}}function HV(e){var t=KH(e);kV(t),VV(t)}function qV(e){if(e){var t=YH(e);if(!t)return HV(ZH(e));kV(t),VV(t)}}function $V(e){if(e){var t=QH(e);if(t)kV(t),VV(t);else kV($H(JH(e)))}}function YV(e,t){if(e){var n=function(e){if(!e)return null;var t=eq(e),n=XH(t),a=CH(t,e),r=SH(t,e),s=NH(t,e);if(0===r){var i=JH(n);return i?MH(qH(i),-1,s,a):null}return o=qH(t),l=r,c=s,d=a,u=kH(o,l-1,c),u[d]||u[u.length-1]||null;var o,l,c,d,u}(e);if(!n)return t();kV(n),VV(n)}}function QV(e){if(e){var t=function(e){if(!e)return null;var t=eq(e),n=XH(t),a=CH(t,e),r=SH(t,e),s=NH(t,e);if(!function(e,t){if(!e||!t)return!1;var n=t.getBoundingClientRect().height,a=t.getBoundingClientRect().top,r=e.getBoundingClientRect().top,s=e.getBoundingClientRect().height;return Math.round(a-r+n)<s}(t,e)){var i=ZH(n);return i?MH(qH(i),0,s,a):null}return o=qH(t),l=r,c=s,d=a,u=function(e,t,n){var a=t+1;return a*n>e.length?[]:kH(e,a,n)}(o,l,c),u[d]||u[u.length-1]||null;var o,l,c,d,u}(e);return kV(t)}}function KV(){var e=jV(),t=e[0],n=e[1],a=NV(),r=a[0],s=a[1];return cs.useCallback((function(){t&&n(null),r&&s(!1)}),[t,r,n,s])}function JV(){var e=jV()[0],t=NV()[0];return function(){return!!e||t}}function ZV(){var e=xV();return function(){e.current=!1}}function XV(){var e=xV();return function(){return e.current}}function eH(){var e=BV();return cs.useCallback((function(){kV(e.current)}),[e])}function tH(){var e=WV();return cs.useCallback((function(){e.current&&IV(e.current)}),[e])}function nH(){var e=rH(),t=BV(),n=eH();return function(){t.current&&(t.current.value=""),e(""),n()}}function aH(){var e=BV(),t=gV(),n=function(){var e=gV();return function t(n){if("function"==typeof n)return t(n(e.current));e.current=n}}(),a=rH(),r=vV()[0],s=function(e,t){var n;if(null==e||!e[t])return"";var a=(null==(n=Object.entries(null==e?void 0:e[t]))?void 0:n.length)||0;return function(e){return e>0?e>1?GG.replace("%n",e.toString()):WG:"No results found"}(a)}(t.current,r);return{onChange:function(e){var r=t.current,s=e.toLowerCase();if(null!=r&&r[s]||s.length<=1)return a(s);var i=function(e,t){if(!t)return null;if(t[e])return t[e];var n=Object.keys(t).sort((function(e,t){return t.length-e.length})).find((function(t){return e.includes(t)}));if(n)return t[n];return null}(s,r);if(!i)return a(s);n((function(e){var t;return Object.assign(e,((t={})[s]=function(e,t){var n={};for(var a in e){var r=e[a];sH(r,t)&&(n[a]=r)}return n}(i,s),t))})),a(s)},searchTerm:r,SearchInputRef:e,statusSearchResults:s}}function rH(){var e=vV()[1],t=OV();return function(n){requestAnimationFrame((function(){e(n?null==n?void 0:n.toLowerCase():n).then((function(){GV(t.current,0)}))}))}}function sH(e,t){return _G(e).some((function(e){return e.includes(t)}))}function iH(e){return e&&"string"==typeof e?e.trim().toLowerCase():""}function oH(){var e=zV(),t=jV()[1];return function(n){var a=LH(n)[0];a&&(e(n),t(a))}}function lH(){return lV()===cG.SEARCH}function cH(){return lV()===cG.PREVIEW}function dH(){var e,t,n,a,r,s,i,o,l,c,d;e=OV(),t=nH(),d=FV(),n=cs.useCallback((function(e){requestAnimationFrame((function(){d.current&&(d.current.scrollTop=e)}))}),[d]),a=BV(),r=eH(),s=JV(),c=xV(),i=function(){c.current=!0},o=KV(),l=cs.useMemo((function(){return function(e){var a=e.key;if(i(),a===LV.Escape){if(e.preventDefault(),s())return void o();t(),n(0),r()}}}),[n,t,o,r,s,i]),cs.useEffect((function(){var t=e.current;if(t)return t.addEventListener("keydown",l),function(){t.removeEventListener("keydown",l)}}),[e,a,n,l]),function(){var e=(l=UV(),cs.useCallback((function(){l.current&&IV(l.current)}),[l])),t=OV(),n=FV(),a=BV(),r=NV()[1],s=uH(),i=lH(),o=cs.useMemo((function(){return function(t){var a,o;switch(t.key){case LV.ArrowRight:if(!i)return;t.preventDefault(),r(!0),e();break;case LV.ArrowDown:t.preventDefault(),s();break;case LV.Enter:t.preventDefault(),a=n.current,kV(o=KH(a)),null==o||o.click()}}}),[e,s,r,n,i]);var l;cs.useEffect((function(){var e=a.current;if(e)return e.addEventListener("keydown",o),function(){e.removeEventListener("keydown",o)}}),[t,a,o])}(),function(){var e=UV(),t=eH(),n=BV(),a=uH(),r=NV(),s=r[0],i=r[1],o=cH(),l=lH(),c=pH(),d=cs.useMemo((function(){return function(e){var n=e.key;if(l)switch(n){case LV.ArrowLeft:if(e.preventDefault(),!s)return t();fH(t);break;case LV.ArrowRight:if(e.preventDefault(),!s)return t();mH();break;case LV.ArrowDown:e.preventDefault(),s&&i(!1),a();break;default:c(e)}if(o)switch(n){case LV.ArrowUp:if(e.preventDefault(),!s)return t();fH(t);break;case LV.ArrowDown:if(e.preventDefault(),!s)return t();mH();break;default:c(e)}}}),[s,t,i,a,c,o,l]);cs.useEffect((function(){var t=e.current;if(t)return t.addEventListener("keydown",d),function(){t.removeEventListener("keydown",d)}}),[e,n,s,d])}(),function(){var e=eH(),t=WV(),n=FV(),a=pH(),r=cs.useMemo((function(){return function(t){switch(t.key){case LV.ArrowUp:t.preventDefault(),e();break;case LV.ArrowRight:t.preventDefault(),_V(AV());break;case LV.ArrowLeft:t.preventDefault(),MV(AV());break;case LV.ArrowDown:t.preventDefault(),HV(n.current);break;default:a(t)}}}),[n,e,a]);cs.useEffect((function(){var e=t.current;if(e)return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}),[t,n,r])}(),function(){var e=FV(),t=function(){var e=eH(),t=tH(),n=SV();return cs.useCallback((function(){return n?e():t()}),[e,n,t])}(),n=oH(),a=JV(),r=KV(),s=pH(),i=cs.useMemo((function(){return function(e){var i=e.key,o=EH(AV());switch(i){case LV.ArrowRight:e.preventDefault(),qV(o);break;case LV.ArrowLeft:e.preventDefault(),$V(o);break;case LV.ArrowDown:if(e.preventDefault(),a()){r();break}QV(o);break;case LV.ArrowUp:if(e.preventDefault(),a()){r();break}YV(o,t);break;case LV.Space:e.preventDefault(),n(e.target);break;default:s(e)}}}),[t,s,n,a,r]);cs.useEffect((function(){var t=e.current;if(t)return t.addEventListener("keydown",i),function(){t.removeEventListener("keydown",i)}}),[e,i])}()}function uH(){var e=tH(),t=SV(),n=FV();return cs.useCallback((function(){return t?HV(n.current):e()}),[n,e,t])}function fH(e){var t=AV();t&&(t.nextElementSibling||e(),_V(t))}function mH(){var e=AV();e&&MV(e)}function pH(){var e,t,n=(e=BV(),t=rH(),function(n){e.current?(e.current.value=""+e.current.value+n,t(iH(e.current.value))):t(iH(n))}),a=eH(),r=oV(),s=KV();return function(e){var t=e.key;(function(e){var t=e.metaKey,n=e.ctrlKey,a=e.altKey;return t||n||a})(e)||r||t.match(/(^[a-zA-Z0-9]$){1}/)&&(e.preventDefault(),s(),a(),n(t))}}function hH(e,t,n){if(t&&n!==tG.NATIVE){var a=EG(t);gH.has(a)||(TG(t).forEach((function(t){var a,r=e(t,n);a=r,(new Image).src=a})),gH.add(a))}}(TV=LV||(LV={})).ArrowDown="ArrowDown",TV.ArrowUp="ArrowUp",TV.ArrowLeft="ArrowLeft",TV.ArrowRight="ArrowRight",TV.Escape="Escape",TV.Enter="Enter",TV.Space=" ";var gH=new Set;var xH=["width","height"],yH=40;function vH(e){var t=e.children;return cs.createElement(pV,null,cs.createElement(bH,null,t))}function bH(e){var t,n,a,r,s=e.children,i=yV()[0],o=KG().theme,l=SV(),c=OV(),d=KG().className,u=function(){var e=KG(),t=e.height,n=e.width,a=e.style;return BW({height:dV(t),width:dV(n)},a)}();dH(),n=FV(),a=rV(),r=cV(),cs.useEffect((function(){if(a!==tG.NATIVE){var e=n.current;return null==e||e.addEventListener("focusin",t),function(){null==e||e.removeEventListener("focusin",t)}}function t(e){var t=EH(e.target);if(t){var n=LH(t)[0];n&&DG(n)&&hH(r,n,a)}}}),[n,a,r]);var f=u||{},m=f.width,p=f.height,h=WW(f,xH);return cs.createElement("aside",{className:PW(jH.main,jH.baseVariables,o===aG.DARK&&jH.darkTheme,o===aG.AUTO&&jH.autoThemeDark,(t={},t[AW.searchActive]=l,t),i&&jH.reactionsMenu,d),ref:c,style:BW({},h,!i&&{height:p,width:m})},s)}var wH={"--epr-emoji-variation-picker-bg-color":"var(--epr-dark-emoji-variation-picker-bg-color)","--epr-hover-bg-color-reduced-opacity":"var(--epr-dark-hover-bg-color-reduced-opacity)","--epr-highlight-color":"var(--epr-dark-highlight-color)","--epr-text-color":"var(--epr-dark-text-color)","--epr-hover-bg-color":"var(--epr-dark-hover-bg-color)","--epr-focus-bg-color":"var(--epr-dark-focus-bg-color)","--epr-search-input-bg-color":"var(--epr-dark-search-input-bg-color)","--epr-category-label-bg-color":"var(--epr-dark-category-label-bg-color)","--epr-picker-border-color":"var(--epr-dark-picker-border-color)","--epr-bg-color":"var(--epr-dark-bg-color)","--epr-reactions-bg-color":"var(--epr-dark-reactions-bg-color)","--epr-search-input-bg-color-active":"var(--epr-dark-search-input-bg-color-active)","--epr-emoji-variation-indicator-color":"var(--epr-dark-emoji-variation-indicator-color)","--epr-category-icon-active-color":"var(--epr-dark-category-icon-active-color)","--epr-skin-tone-picker-menu-color":"var(--epr-dark-skin-tone-picker-menu-color)","--epr-skin-tone-outer-border-color":"var(--epr-dark-skin-tone-outer-border-color)","--epr-skin-tone-inner-border-color":"var(--epr-dark-skin-tone-inner-border-color)"},jH=qW.create({main:{".":["epr-main",AW.emojiPicker],position:"relative",display:"flex",flexDirection:"column",borderWidth:"1px",borderStyle:"solid",borderRadius:"var(--epr-picker-border-radius)",borderColor:"var(--epr-picker-border-color)",backgroundColor:"var(--epr-bg-color)",overflow:"hidden",transition:"all 0.3s ease-in-out, background-color 0.1s ease-in-out","*":{boxSizing:"border-box",fontFamily:"sans-serif"}},baseVariables:{"--":{"--epr-highlight-color":"#007aeb","--epr-hover-bg-color":"#e5f0fa","--epr-hover-bg-color-reduced-opacity":"#e5f0fa80","--epr-focus-bg-color":"#e0f0ff","--epr-text-color":"#858585","--epr-search-input-bg-color":"#f6f6f6","--epr-picker-border-color":"#e7e7e7","--epr-bg-color":"#fff","--epr-reactions-bg-color":"#ffffff90","--epr-category-icon-active-color":"#6aa8de","--epr-skin-tone-picker-menu-color":"#ffffff95","--epr-skin-tone-outer-border-color":"#555555","--epr-skin-tone-inner-border-color":"var(--epr-bg-color)","--epr-horizontal-padding":"10px","--epr-picker-border-radius":"8px","--epr-search-border-color":"var(--epr-highlight-color)","--epr-header-padding":"15px var(--epr-horizontal-padding)","--epr-active-skin-tone-indicator-border-color":"var(--epr-highlight-color)","--epr-active-skin-hover-color":"var(--epr-hover-bg-color)","--epr-search-input-bg-color-active":"var(--epr-search-input-bg-color)","--epr-search-input-padding":"0 30px","--epr-search-input-border-radius":"8px","--epr-search-input-height":"40px","--epr-search-input-text-color":"var(--epr-text-color)","--epr-search-input-placeholder-color":"var(--epr-text-color)","--epr-search-bar-inner-padding":"var(--epr-horizontal-padding)","--epr-category-navigation-button-size":"30px","--epr-emoji-variation-picker-height":"45px","--epr-emoji-variation-picker-bg-color":"var(--epr-bg-color)","--epr-preview-height":"70px","--epr-preview-text-size":"14px","--epr-preview-text-padding":"0 var(--epr-horizontal-padding)","--epr-preview-border-color":"var(--epr-picker-border-color)","--epr-preview-text-color":"var(--epr-text-color)","--epr-category-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-bg-color":"#ffffffe6","--epr-category-label-text-color":"var(--epr-text-color)","--epr-category-label-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-height":yH+"px","--epr-emoji-size":"30px","--epr-emoji-padding":"5px","--epr-emoji-fullsize":"calc(var(--epr-emoji-size) + var(--epr-emoji-padding) * 2)","--epr-emoji-hover-color":"var(--epr-hover-bg-color)","--epr-emoji-variation-indicator-color":"var(--epr-picker-border-color)","--epr-emoji-variation-indicator-color-hover":"var(--epr-text-color)","--epr-header-overlay-z-index":"3","--epr-emoji-variations-indictator-z-index":"1","--epr-category-label-z-index":"2","--epr-skin-variation-picker-z-index":"5","--epr-preview-z-index":"6","--epr-dark":"#000","--epr-dark-emoji-variation-picker-bg-color":"var(--epr-dark)","--epr-dark-highlight-color":"#c0c0c0","--epr-dark-text-color":"var(--epr-highlight-color)","--epr-dark-hover-bg-color":"#363636f6","--epr-dark-hover-bg-color-reduced-opacity":"#36363680","--epr-dark-focus-bg-color":"#474747","--epr-dark-search-input-bg-color":"#333333","--epr-dark-category-label-bg-color":"#222222e6","--epr-dark-picker-border-color":"#151617","--epr-dark-bg-color":"#222222","--epr-dark-reactions-bg-color":"#22222290","--epr-dark-search-input-bg-color-active":"var(--epr-dark)","--epr-dark-emoji-variation-indicator-color":"#444","--epr-dark-category-icon-active-color":"#3271b7","--epr-dark-skin-tone-picker-menu-color":"#22222295","--epr-dark-skin-tone-outer-border-color":"var(--epr-dark-picker-border-color)","--epr-dark-skin-tone-inner-border-color":"#FFFFFF"}},autoThemeDark:{".":AW.autoTheme,"@media (prefers-color-scheme: dark)":{"--":wH}},darkTheme:{".":AW.darkTheme,"--":wH},reactionsMenu:{".":"epr-reactions",height:"50px",display:"inline-flex",backgroundColor:"var(--epr-reactions-bg-color)",backdropFilter:"blur(8px)","--":{"--epr-picker-border-radius":"50px"}}});function NH(e,t){if(!e||!t)return 0;var n=e.getBoundingClientRect().width,a=t.getBoundingClientRect().width;return Math.floor(n/a)}function CH(e,t){if(!e||!t)return 0;var n=t.getBoundingClientRect().width,a=t.getBoundingClientRect().left,r=e.getBoundingClientRect().left;return Math.floor((a-r)/n)}function SH(e,t){if(!e||!t)return 0;var n=t.getBoundingClientRect().height,a=t.getBoundingClientRect().top,r=e.getBoundingClientRect().top;return Math.round((a-r)/n)}function kH(e,t,n){if(-1===t){var a=Math.floor((e.length-1)/n)*n,r=e.length-1;return e.slice(a,r+1)}return e.slice(t*n,(t+1)*n)}function MH(e,t,n,a){var r=kH(e,t,n);return r[a]||r[r.length-1]||null}function _H(e,t,n){if(!e||!t.length)return null;var a=e.getBoundingClientRect().top,r=e.getBoundingClientRect().bottom,s=a+function(e){for(var t=Array.from(e.querySelectorAll(HW(AW.label))),n=0,a=t;n<a.length;n++){var r=a[n].getBoundingClientRect().height;if(r>0)return r}return yH}(e);return t.find((function(e){var t=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom,o=e.clientHeight*n,l=t+o,c=i-o;return!(l<s)&&(l>=a&&l<=r||c>=a&&c<=r)}))||null}var IH="button"+HW(AW.emoji),AH=[IH,HW(AW.visible),":not("+HW(AW.hidden)+")"].join("");function EH(e){var t;return null!=(t=null==e?void 0:e.closest(IH))?t:null}function LH(e){var t=WH(e),n=UH(e);if(!t)return[];var a=PG(null!=n?n:t);return a?[a,n]:[]}function TH(e){var t;return null!=(t=null==e?void 0:e.clientHeight)?t:0}function DH(e){if(!e)return 0;var t=EH(e),n=XH(t),a=PH(n);return FH(t)+FH(n)+a}function PH(e){var t,n;if(!e)return 0;var a=e.querySelector(HW(AW.categoryContent));return(null!=(t=null==e?void 0:e.clientHeight)?t:0)-(null!=(n=null==a?void 0:a.clientHeight)?n:0)}function OH(e){return e?e.matches(HW(AW.scrollBody))?e:e.querySelector(HW(AW.scrollBody)):null}function RH(e){var t,n;return e?DH(e)-(null!=(t=null==(n=zH(e))?void 0:n.scrollTop)?t:0):0}function zH(e){var t;return e&&null!=(t=e.closest(HW(AW.scrollBody)))?t:null}function FH(e){var t;return null!=(t=null==e?void 0:e.offsetTop)?t:0}function BH(e){var t;return null!=(t=null==e?void 0:e.offsetLeft)?t:0}function UH(e){var t,n,a,r;return null!=(n=EH(e),a="unified",t=null!=(r=function(e){var t;return null!=(t=null==e?void 0:e.dataset)?t:{}}(n)[a])?r:null)?t:null}function WH(e){var t=UH(e);return t?AG(t):null}function GH(e){return e?{unified:UH(e),originalUnified:WH(e)}:{unified:null,originalUnified:null}}function VH(e){return e.classList.contains(AW.visible)}function HH(e){return!e||e.classList.contains(AW.hidden)}function qH(e){return e?Array.from(e.querySelectorAll(AH)):[]}function $H(e){if(!e)return null;var t=qH(e).slice(-1)[0];return t?VH(t)?t:QH(t):null}function YH(e){var t=e.nextElementSibling;return t?VH(t)?t:YH(t):KH(ZH(e))}function QH(e){var t=e.previousElementSibling;return t?VH(t)?t:QH(t):$H(JH(e))}function KH(e){return e?_H(e,qH(e),.1):null}function JH(e){var t=XH(e);if(!t)return null;var n=t.previousElementSibling;return n?HH(n)?JH(n):n:null}function ZH(e){var t=XH(e);if(!t)return null;var n=t.nextElementSibling;return n?HH(n)?ZH(n):n:null}function XH(e){return e?e.closest(HW(AW.category)):null}function eq(e){return e?e.closest(HW(AW.categoryContent)):null}function tq(e){return e.split("-").map((function(e){return String.fromCodePoint(parseInt(e,16))})).join("")}var nq="epr_suggested";function aq(e){try{var t,n,a;if(null==(t=window)||!t.localStorage)return[];var r=JSON.parse(null!=(n=null==(a=window)?void 0:a.localStorage.getItem(nq))?n:"[]");return e===XW.FREQUENT?r.sort((function(e,t){return t.count-e.count})):r}catch(s){return[]}}function rq(e){return void 0!==e.imgUrl}function sq(e,t){var n=cs.useRef(),a=oH(),r=cs.useContext(hV).disallowClickRef,s=jV()[1],i=KV(),o=bV()[0],l=function(e){var t,n=eV().current;return(null!=(t=e===JG.REACTIONS?n.onReactionClick:n.onEmojiClick)?t:n.onEmojiClick)||function(){}}(t),c=CV()[1],d=cV(),u=rV(),f=cs.useCallback((function(e){if(!r.current){i();var t=iq(e),n=t[0],a=t[1];if(n&&a){var s=function(e){var t=e.split("-")[1];return NG.includes(t)?t:null}(a)||o;c(),function(e,t){var n,a=aq(),r=EG(e,t),s=EG(e),i=a.find((function(e){return e.unified===r}));n=i?[i].concat(a.filter((function(e){return e!==i}))):[i={unified:r,original:s,count:0}].concat(a),i.count++,n.length=Math.min(n.length,14);try{var o;null==(o=window)||o.localStorage.setItem(nq,JSON.stringify(n))}catch(l){}}(n,s),l(function(e,t,n,a){var r=_G(e);if(rq(e)){var s=EG(e);return{activeSkinTone:t,emoji:s,getImageUrl:function(){return e.imgUrl},imageUrl:e.imgUrl,isCustom:!0,names:r,unified:s,unifiedWithoutSkinTone:s}}var i=EG(e,t);return{activeSkinTone:t,emoji:tq(i),getImageUrl:function(e){return void 0===e&&(e=null!=n?n:tG.APPLE),a(i,e)},imageUrl:a(i,null!=n?n:tG.APPLE),isCustom:!1,names:r,unified:i,unifiedWithoutSkinTone:EG(e)}}(n,s,u,d),e)}}}),[o,i,r,l,c,d,u]),m=cs.useCallback((function(e){var t;n.current&&clearTimeout(n.current);var o=iq(e)[0];o&&DG(o)&&(n.current=null==(t=window)?void 0:t.setTimeout((function(){r.current=!0,n.current=void 0,i(),a(e.target),s(o)}),500))}),[r,i,a,s]),p=cs.useCallback((function(){n.current?(clearTimeout(n.current),n.current=void 0):r.current&&requestAnimationFrame((function(){r.current=!1}))}),[r]);cs.useEffect((function(){if(e.current){var t=e.current;return t.addEventListener("click",f,{passive:!0}),t.addEventListener("mousedown",m,{passive:!0}),t.addEventListener("mouseup",p,{passive:!0}),function(){null==t||t.removeEventListener("click",f),null==t||t.removeEventListener("mousedown",m),null==t||t.removeEventListener("mouseup",p)}}}),[e,f,m,p])}function iq(e){var t,n,a=null==e?void 0:e.target;return t=a,Boolean((null==t?void 0:t.matches(IH))||(null==t||null==(n=t.parentElement)?void 0:n.matches(IH)))?LH(a):[]}function oq(e){return cs.createElement("button",Object.assign({type:"button"},e,{className:PW(lq.button,e.className)}),e.children)}var lq=qW.create({button:{".":"epr-btn",cursor:"pointer",border:"0",background:"none",outline:"none"}});function cq(e){var t,n=e.emojiNames,a=e.unified,r=e.hidden,s=e.hiddenOnSearch,i=e.showVariations,o=void 0===i||i,l=e.hasVariations,c=e.children,d=e.className,u=e.noBackground,f=void 0!==u&&u;return cs.createElement(oq,{className:PW(uq.emoji,r&&YW.hidden,s&&KW.hiddenOnSearch,(t={},t[AW.visible]=!r&&!s,t),!(!l||!o)&&uq.hasVariations,f&&uq.noBackground,d),"data-unified":a,"aria-label":dq(n),"data-full-name":n},c)}function dq(e){var t;return e[0].match("flag-")&&null!=(t=e[1])?t:e[0]}var uq=qW.create({emoji:{".":AW.emoji,position:"relative",width:"var(--epr-emoji-fullsize)",height:"var(--epr-emoji-fullsize)",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",borderRadius:"8px",overflow:"hidden",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--epr-emoji-hover-color)"},":focus":{backgroundColor:"var(--epr-focus-bg-color)"}},noBackground:{background:"none",":hover":{backgroundColor:"transparent",background:"none"},":focus":{backgroundColor:"transparent",background:"none"}},hasVariations:{".":AW.emojiHasVariations,":after":{content:"",display:"block",width:"0",height:"0",right:"0px",bottom:"1px",position:"absolute",borderLeft:"4px solid transparent",borderRight:"4px solid transparent",transform:"rotate(135deg)",borderBottom:"4px solid var(--epr-emoji-variation-indicator-color)",zIndex:"var(--epr-emoji-variations-indictator-z-index)"},":hover:after":{borderBottom:"4px solid var(--epr-emoji-variation-indicator-color-hover)"}}}),fq=qW.create({external:{".":AW.external,fontSize:"0"},common:{alignSelf:"center",justifySelf:"center",display:"block"}});function mq(e){var t=e.emojiName,n=e.style,a=e.lazyLoad,r=void 0!==a&&a,s=e.imgUrl,i=e.onError,o=e.className;return cs.createElement("img",{src:s,alt:t,className:PW(pq.emojiImag,fq.external,fq.common,o),loading:r?"lazy":"eager",onError:i,style:n})}var pq=qW.create({emojiImag:{".":"epr-emoji-img",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",minWidth:"var(--epr-emoji-fullsize)",minHeight:"var(--epr-emoji-fullsize)",padding:"var(--epr-emoji-padding)"}});function hq(e){var t=e.unified,n=e.style,a=e.className;return cs.createElement("span",{className:PW(gq.nativeEmoji,fq.common,fq.external,a),"data-unified":t,style:n},tq(t))}var gq=qW.create({nativeEmoji:{".":"epr-emoji-native",fontFamily:'"Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji"!important',position:"relative",lineHeight:"100%",fontSize:"var(--epr-emoji-size)",textAlign:"center",alignSelf:"center",justifySelf:"center",letterSpacing:"0",padding:"var(--epr-emoji-padding)"}});function xq(e){var t=e.emoji,n=e.unified,a=e.emojiStyle,r=e.size,s=e.lazyLoad,i=e.getEmojiUrl,o=void 0===i?LG:i,l=e.className,c=wV()[1],d={};r&&(d.width=d.height=d.fontSize=r+"px");var u=t||PG(n);return u?rq(u)?cs.createElement(mq,{style:d,emojiName:n,emojiStyle:tG.NATIVE,lazyLoad:s,imgUrl:u.imgUrl,onError:f,className:l}):cs.createElement(cs.Fragment,null,a===tG.NATIVE?cs.createElement(hq,{unified:n,style:d,className:l}):cs.createElement(mq,{style:d,emojiName:IG(u),emojiStyle:a,lazyLoad:s,imgUrl:o(n,a),onError:f,className:l})):null;function f(){c((function(e){return new Set(e).add(n)}))}}function yq(e){var t=e.emoji,n=e.unified,a=e.hidden,r=e.hiddenOnSearch,s=e.emojiStyle,i=e.showVariations,o=void 0===i||i,l=e.size,c=e.lazyLoad,d=e.getEmojiUrl,u=e.className,f=e.noBackground,m=void 0!==f&&f,p=DG(t);return cs.createElement(cq,{hasVariations:p,showVariations:o,hidden:a,hiddenOnSearch:r,emojiNames:_G(t),unified:n,noBackground:m},cs.createElement(xq,{unified:n,emoji:t,size:l,emojiStyle:s,lazyLoad:c,getEmojiUrl:d,className:u}))}function vq(){var e=yV()[1];return cs.createElement(oq,{"aria-label":"Show all Emojis",title:"Show all Emojis",tabIndex:0,className:PW(bq.plusSign),onClick:function(){return e(!1)}})}var bq=qW.create(BW({plusSign:{fontSize:"20px",padding:"17px",color:"var(--epr-text-color)",borderRadius:"50%",textAlign:"center",lineHeight:"100%",width:"20px",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.2s ease-in-out",":after":{content:"",minWidth:"20px",minHeight:"20px",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI4LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNS43LDEwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsMTAuOSw2LjEsMTEsNi4zLDExaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjRWNi43YzAtMC4zLTAuMi0wLjUtMC41LTAuNQoJQzkuOCw2LDkuNiw2LjIsOS42LDYuNXYzLjRINi4yQzUuOSw5LjksNS43LDEwLjEsNS43LDEwLjRMNS43LDEwLjR6Ii8+CjxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik01LjcsMzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDMxLDYuMywzMWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuMgoJQzUuOSwyOS45LDUuNywzMC4xLDUuNywzMC40TDUuNywzMC40eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNS43LDUwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsNTAuOSw2LjEsNTEsNi4zLDUxaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjR2LTMuNGMwLTAuMy0wLjItMC41LTAuNS0wLjUKCXMtMC41LDAuMi0wLjUsMC41djMuNEg2LjJDNS45LDQ5LjksNS43LDUwLjEsNS43LDUwLjRMNS43LDUwLjR6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik01LjcsNzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDcxLDYuMyw3MWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuNAoJQzUuOSw2OS45LDUuNyw3MC4xLDUuNyw3MC40TDUuNyw3MC40eiIvPgo8L3N2Zz4=)",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",backgroundPositionY:"0"},":hover":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-20px"}},":focus":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-40px"}}}},JW("plusSign",{":after":{backgroundPositionY:"-40px"},":hover:after":{backgroundPositionY:"-60px"}})));function wq(){var e=yV()[0],t=PV().ReactionsRef,n=KG().reactions;sq(t,JG.REACTIONS);var a=rV(),r=nV(),s=cV();return e?cs.createElement("ul",{className:PW(jq.list,!e&&YW.hidden),ref:t},n.map((function(e){return cs.createElement("li",{key:e},cs.createElement(yq,{emoji:PG(e),emojiStyle:a,unified:e,showVariations:!1,className:PW(jq.emojiButton),noBackground:!0,getEmojiUrl:s}))})),r?cs.createElement("li",null,cs.createElement(vq,null)):null):null}var jq=qW.create({list:{listStyle:"none",margin:"0",padding:"0 5px",display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%"},emojiButton:{":hover":{transform:"scale(1.2)"},":focus":{transform:"scale(1.2)"},":active":{transform:"scale(1.1)"},transition:"transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.5)"}});function Nq(){var e,t,n=wV()[0],a=(e=gV().current,t=vV()[0],function(n){return function(e,t,n){var a;return!(!t||!n||null!=(a=t[n])&&a[e])}(n,e,t)});return function(e){var t=EG(e),r=n.has(t),s=a(t);return{failedToLoad:r,filteredOut:s,hidden:r||s}}}function Cq(e){var t=e.categoryConfig,n=e.children,a=e.hidden,r=e.hiddenOnSearch,s=xG(t),i=yG(t);return cs.createElement("li",{className:PW(Sq.category,a&&YW.hidden,r&&KW.hiddenOnSearch),"data-name":s,"aria-label":i},cs.createElement("h2",{className:PW(Sq.label)},i),cs.createElement("div",{className:PW(Sq.categoryContent)},n))}var Sq=qW.create({category:{".":AW.category,":not(:has(.epr-visible))":{display:"none"}},categoryContent:{".":AW.categoryContent,display:"grid",gridGap:"0",gridTemplateColumns:"repeat(auto-fill, var(--epr-emoji-fullsize))",justifyContent:"space-between",margin:"var(--epr-category-padding)",position:"relative"},label:{".":AW.label,alignItems:"center",backdropFilter:"blur(3px)",backgroundColor:"var(--epr-category-label-bg-color)",color:"var(--epr-category-label-text-color)",display:"flex",fontSize:"16px",fontWeight:"bold",height:"var(--epr-category-label-height)",margin:"0",padding:"var(--epr-category-label-padding)",position:"sticky",textTransform:"capitalize",top:"0",width:"100%",zIndex:"var(--epr-category-label-z-index)"}}),kq=!1;function Mq(e){var t=e.categoryConfig,n=CV()[0],a=function(){var e=cs.useState(kq),t=e[0],n=e[1];return cs.useEffect((function(){n(!0),kq=!0}),[]),t||kq}(),r=KG().suggestedEmojisMode,s=cV(),i=cs.useMemo((function(){var e;return null!=(e=aq(r))?e:[]}),[n,r]),o=rV();return a?cs.createElement(Cq,{categoryConfig:t,hiddenOnSearch:!0,hidden:0===i.length},i.map((function(e){var t=PG(e.original);return t?cs.createElement(yq,{showVariations:!1,unified:e.unified,emojiStyle:o,emoji:t,key:e.unified,getEmojiUrl:s}):null}))):null}function _q(){var e=sV(),t=cs.useRef(0);return cs.createElement("ul",{className:PW(Lq.emojiList)},e.map((function(e){var n=xG(e);return n===oG.SUGGESTED?cs.createElement(Mq,{key:n,categoryConfig:e}):cs.createElement(cs.Suspense,{key:n},cs.createElement(Iq,{category:n,categoryConfig:e,renderdCategoriesCountRef:t}))})))}function Iq(e){var t,n,a=e.category,r=e.categoryConfig,s=e.renderdCategoriesCountRef,i=Nq(),o=KG().lazyLoadEmojis,l=rV(),c=cs.useContext(hV).isPastInitialLoad,d=bV()[0],u=(t=mV(),n=fV(),function(e){var a=AG(EG(e));return Boolean(t[a]||n(a))}),f=cV(),m=!aV(),p=!c&&s.current>0?[]:function(e){var t;return null!=(t=null==jG?void 0:jG[e])?t:[]}(a);p.length>0&&s.current++;var h=0,g=p.map((function(e){var t=EG(e,d),n=i(e),a=n.failedToLoad,r=n.filteredOut,s=n.hidden,c=u(e);return(s||c)&&h++,c?null:cs.createElement(yq,{showVariations:m,key:t,emoji:e,unified:t,hidden:a,hiddenOnSearch:r,emojiStyle:l,lazyLoad:o,getEmojiUrl:f})}));return cs.createElement(Cq,{categoryConfig:r,hidden:h===g.length},g)}var Aq,Eq,Lq=qW.create({emojiList:{".":AW.emojiList,listStyle:"none",margin:"0",padding:"0"}});function Tq(){var e,t,n=RV(),a=PV().VariationPickerRef,r=jV()[0],s=rV(),i=function(e){var t=RV(),n=FV(),a=Aq.Up;return{getMenuDirection:r,getTop:s};function r(){return a}function s(){a=Aq.Up;var r=0;if(!e.current)return 0;var s=TH(e.current);if(t.current){var i,o=n.current,l=EH(t.current),c=TH(l);r=DH(l),(null!=(i=null==o?void 0:o.scrollTop)?i:0)>r-s&&(a=Aq.Down,r+=c+s)}return r-s}}(a),o=i.getTop,l=i.getMenuDirection,c=zV(),d=function(e){var t=RV();return function(){var n={};if(!e.current)return n;if(t.current){var a=EH(t.current),r=function(e){var t=EH(e),n=XH(t);return BH(t)+BH(n)}(a);if(!a)return n;n.left=r+(null==a?void 0:a.clientWidth)/2}return n}}(a),u=cV(),f=EH(n.current),m=Boolean(r&&f&&DG(r)&&f.classList.contains(AW.emojiHasVariations));return cs.useEffect((function(){m&&HV(a.current)}),[a,m,n]),!m&&n.current?c(null):(e=o(),t=d()),cs.createElement("div",{ref:a,className:PW(Dq.variationPicker,l()===Aq.Down&&Dq.pointingUp,m&&Dq.visible),style:{top:e}},m&&r?[EG(r)].concat(TG(r)).slice(0,6).map((function(e){return cs.createElement(yq,{key:e,emoji:r,unified:e,emojiStyle:s,showVariations:!1,getEmojiUrl:u})})):null,cs.createElement("div",{className:PW(Dq.pointer),style:t}))}(Eq=Aq||(Aq={}))[Eq.Up=0]="Up",Eq[Eq.Down=1]="Down";var Dq=qW.create(BW({variationPicker:{".":AW.variationPicker,position:"absolute",right:"15px",left:"15px",padding:"5px",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.2)",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"space-around",opacity:"0",visibility:"hidden",pointerEvents:"none",top:"-100%",border:"1px solid var(--epr-picker-border-color)",height:"var(--epr-emoji-variation-picker-height)",zIndex:"var(--epr-skin-variation-picker-z-index)",background:"var(--epr-emoji-variation-picker-bg-color)",transform:"scale(0.9)",transition:"transform 0.1s ease-out, opacity 0.2s ease-out"},visible:{opacity:"1",visibility:"visible",pointerEvents:"all",transform:"scale(1)"},pointingUp:{".":"pointing-up",transformOrigin:"center 0%",transform:"scale(0.9)"},".pointing-up":{pointer:{top:"0",transform:"rotate(180deg) translateY(100%) translateX(18px)"}},pointer:{".":"epr-emoji-pointer",content:"",position:"absolute",width:"25px",height:"15px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"50px 15px",top:"100%",transform:"translateX(-18px)",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI1MHB4IgoJIGhlaWdodD0iMTVweCIgdmlld0JveD0iMCAwIDUwIDE1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MCAxNSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJMYXllcl8xIj4KPC9nPgo8ZyBpZD0iTGF5ZXJfMiI+Cgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiNFOEU3RTciIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KCTxwYXRoIGZpbGw9IiMwMTAyMDIiIHN0cm9rZT0iIzE1MTYxNyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMjYuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KPC9nPgo8L3N2Zz4=)"}},JW("pointer",{backgroundPosition:"-25px 0"})));function Pq(){var e=FV();return function(e){var t=KV();cs.useEffect((function(){var n=e.current;if(n)return n.addEventListener("scroll",a,{passive:!0}),function(){null==n||n.removeEventListener("scroll",a)};function a(){t()}}),[e,t])}(e),sq(e,JG.PICKER),function(){var e=FV(),t=ZV(),n=XV();cs.useEffect((function(){var a=e.current;function r(){n()&&t()}return null==a||a.addEventListener("mousemove",r,{passive:!0}),function(){null==a||a.removeEventListener("mousemove",r)}}),[e,t,n])}(),cs.createElement("div",{className:PW(Fq.body,KW.hiddenOnReactions),ref:e},cs.createElement(Tq,null),cs.createElement(_q,null))}var Oq,Rq,zq,Fq=qW.create({body:{".":AW.scrollBody,flex:"1",overflowY:"scroll",overflowX:"hidden",position:"relative"}});function Bq(e,t){var n=FV(),a=XV(),r=ZV();cs.useEffect((function(){if(e){var r=n.current;return null==r||r.addEventListener("keydown",o,{passive:!0}),null==r||r.addEventListener("mouseover",l,!0),null==r||r.addEventListener("focus",s,!0),null==r||r.addEventListener("mouseout",i,{passive:!0}),null==r||r.addEventListener("blur",i,!0),function(){null==r||r.removeEventListener("mouseover",l),null==r||r.removeEventListener("mouseout",i),null==r||r.removeEventListener("focus",s,!0),null==r||r.removeEventListener("blur",i,!0),null==r||r.removeEventListener("keydown",o)}}function s(e){var n=EH(e.target);if(!n)return i();var a=GH(n),r=a.unified,s=a.originalUnified;if(!r||!s)return i();t({unified:r,originalUnified:s})}function i(e){if(e&&!EH(e.relatedTarget))return t(null);t(null)}function o(e){"Escape"===e.key&&t(null)}function l(e){if(!a()){var n=EH(e.target);if(n){var s=function(e,t){if(!e||!t)return 0;var n=e.getBoundingClientRect(),a=t.getBoundingClientRect();return a.height-(n.y-a.y)}(n,r);if(s<n.getBoundingClientRect().height)return function(e,t){var n,a=GH(e),r=a.unified,s=a.originalUnified;if(!r||!s)return;null==(n=document.activeElement)||null==n.blur||n.blur(),t({unified:r,originalUnified:s})}(n,t);kV(n)}}}}),[n,e,t,a,r])}function Uq(e){var t=e.children,n=e.className,a=e.style,r=void 0===a?{}:a,s=e.direction,i=void 0===s?Rq.ROW:s;return cs.createElement("div",{style:BW({},r),className:PW(Wq.flex,n,Wq[i])},t)}(zq=Rq||(Rq={})).ROW="FlexRow",zq.COLUMN="FlexColumn";var Wq=qW.create(((Oq={flex:{display:"flex"}})[Rq.ROW]={flexDirection:"row"},Oq[Rq.COLUMN]={flexDirection:"column"},Oq));function Gq(e){var t=e.className,n=e.style,a=void 0===n?{}:n;return cs.createElement("div",{style:BW({flex:1},a),className:PW(t)})}function Vq(e){var t=e.children,n=e.className,a=e.style;return cs.createElement("div",{style:BW({},a,{position:"absolute"}),className:n},t)}function Hq(e){var t=e.children,n=e.className,a=e.style;return cs.createElement("div",{style:BW({},a,{position:"relative"}),className:n},t)}function qq(e){var t=e.isOpen,n=e.onClick,a=e.isActive,r=e.skinToneVariation,s=e.style;return cs.createElement(oq,{style:s,onClick:n,className:PW("epr-tone-"+r,Qq.tone,!t&&Qq.closedTone,a&&Qq.active),"aria-pressed":a,"aria-label":"Skin tone "+CG[r]})}var $q,Yq,Qq=qW.create({closedTone:{opacity:"0",zIndex:"0"},active:{".":"epr-active",zIndex:"1",opacity:"1"},tone:{".":"epr-tone",width:"var(--epr-skin-tone-size)",display:"block",cursor:"pointer",borderRadius:"4px",height:"var(--epr-skin-tone-size)",position:"absolute",right:"0",transition:"transform 0.3s ease-in-out, opacity 0.35s ease-in-out",zIndex:"0",border:"1px solid var(--epr-skin-tone-outer-border-color)",boxShadow:"inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)",":hover":{boxShadow:"0 0 0 3px var(--epr-active-skin-hover-color), inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)"},":focus":{boxShadow:"0 0 0 3px var(--epr-focus-bg-color)"},"&.epr-tone-neutral":{backgroundColor:"#ffd225"},"&.epr-tone-1f3fb":{backgroundColor:"#ffdfbd"},"&.epr-tone-1f3fc":{backgroundColor:"#e9c197"},"&.epr-tone-1f3fd":{backgroundColor:"#c88e62"},"&.epr-tone-1f3fe":{backgroundColor:"#a86637"},"&.epr-tone-1f3ff":{backgroundColor:"#60463a"}}});function Kq(){return cs.createElement(Hq,{style:{height:28}},cs.createElement(Vq,{style:{bottom:0,right:0}},cs.createElement(Jq,{direction:$q.VERTICAL})))}function Jq(e){var t=e.direction,n=void 0===t?$q.HORIZONTAL:t,a=UV(),r=aV(),s=NV(),i=s[0],o=s[1],l=bV(),c=l[0],d=l[1],u=eV().current.onSkinToneChange||function(){},f=KV(),m=eH();if(r)return null;var p=28*NG.length+"px",h=i?p:"28px",g=n===$q.VERTICAL;return cs.createElement(Hq,{className:PW(Zq.skinTones,g&&Zq.vertical,i&&Zq.open,g&&i&&Zq.verticalShadow),style:g?{flexBasis:h,height:h}:{flexBasis:h}},cs.createElement("div",{className:PW(Zq.select),ref:a},NG.map((function(e,t){var n=e===c;return cs.createElement(qq,{key:e,skinToneVariation:e,isOpen:i,style:{transform:PW(g?"translateY(-"+t*(i?28:0)+"px)":"translateX(-"+t*(i?28:0)+"px)",i&&n&&"scale(1.3)")},isActive:n,onClick:function(){i?(d(e),u(e),m()):o(!0),f()}})}))))}(Yq=$q||($q={})).VERTICAL="epr-vertical",Yq.HORIZONTAL="epr-horizontal";var Zq=qW.create({skinTones:{".":"epr-skin-tones","--":{"--epr-skin-tone-size":"15px"},display:"flex",alignItems:"center",justifyContent:"flex-end",transition:"all 0.3s ease-in-out",padding:"10px 0"},vertical:{padding:"9px",alignItems:"flex-end",flexDirection:"column",borderRadius:"6px",border:"1px solid var(--epr-bg-color)"},verticalShadow:{boxShadow:"0px 0 7px var(--epr-picker-border-color)"},open:{backdropFilter:"blur(5px)",background:"var(--epr-skin-tone-picker-menu-color)",".epr-active":{border:"1px solid var(--epr-active-skin-tone-indicator-border-color)"}},select:{".":"epr-skin-tone-select",position:"relative",width:"var(--epr-skin-tone-size)",height:"var(--epr-skin-tone-size)"}});function Xq(){var e=iV(),t=cH();return e.showPreview?cs.createElement(Uq,{className:PW(t$.preview,KW.hiddenOnReactions)},cs.createElement(e$,null),cs.createElement(Gq,null),t?cs.createElement(Kq,null):null):null}function e$(){var e,t=iV(),n=cs.useState(null),a=n[0],r=n[1],s=rV(),i=jV()[0],o=cV();Bq(t.showPreview,r);var l=PG(null!=(e=null==a?void 0:a.unified)?e:null==a?void 0:a.originalUnified),c=null!=l&&null!=a;return cs.createElement((function(){var e=null!=i?i:PG(t.defaultEmoji);if(!e)return null;var n=i?IG(i):t.defaultCaption;return cs.createElement(cs.Fragment,null,cs.createElement("div",null,c?cs.createElement(xq,{unified:null==a?void 0:a.unified,emoji:l,emojiStyle:s,size:45,getEmojiUrl:o,className:PW(t$.emoji)}):e?cs.createElement(xq,{unified:EG(e),emoji:e,emojiStyle:s,size:45,getEmojiUrl:o,className:PW(t$.emoji)}):null),cs.createElement("div",{className:PW(t$.label)},c?IG(l):n))}),null)}var t$=qW.create({preview:{alignItems:"center",borderTop:"1px solid var(--epr-preview-border-color)",height:"var(--epr-preview-height)",padding:"0 var(--epr-horizontal-padding)",position:"relative",zIndex:"var(--epr-preview-z-index)"},label:{color:"var(--epr-preview-text-color)",fontSize:"var(--epr-preview-text-size)",padding:"var(--epr-preview-text-padding)",textTransform:"capitalize"},emoji:{padding:"0"}});function n$(){var e=KG().customEmojis;return!!e&&0===e.length}function a$(e){var t,n=e.isActiveCategory,a=e.category,r=e.allowNavigation,s=e.categoryConfig,i=e.onClick;return cs.createElement(oq,{tabIndex:r?0:-1,className:PW(o$.catBtn,KW.categoryBtn,"epr-icn-"+a,(t={},t[AW.active]=n,t)),onClick:i,"aria-label":yG(s),"aria-selected":n,role:"tab","aria-controls":"epr-category-nav-id"})}var r$={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 3)"},s$={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 2)"},i$={":not(.epr-search-active)":{catBtn:{":hover":r$,"&.epr-active":r$}}},o$=qW.create(BW({catBtn:{".":"epr-cat-btn",display:"inline-block",transition:"opacity 0.2s ease-in-out",position:"relative",height:"var(--epr-category-navigation-button-size)",width:"var(--epr-category-navigation-button-size)",backgroundSize:"calc(var(--epr-category-navigation-button-size) * 10)",outline:"none",backgroundPosition:"0 0",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMDBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgMjAwIDgwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMDAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8ZyBpZD0iTGF5ZXJfMTEiPgoJPGc+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTIuOCwyOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjEtMS4yYy0wLjYsMC0xLjIsMC41LTEuMiwxLjJDMTEuNiwyOSwxMi4yLDI5LjUsMTIuOCwyOS41eiBNMTIuOCwyOGMwLjIsMCwwLjQsMC4yLDAuNCwwLjQKCQkJYzAsMC4yLTAuMiwwLjQtMC40LDAuNGMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzEyLjQsMjguMSwxMi42LDI4LDEyLjgsMjh6Ii8+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsMjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNywyNi4yLDEzLjgsMjMsMTAsMjN6IE0xMCwzNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiwzMy40LDEzLjQsMzYuMiwxMCwzNi4yeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsMzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDMxLjUsMTQuNywzMS4zLDE0LjYsMzEuMnogTTEwLDM0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywzMy4yLDExLjYsMzQuMSwxMCwzNC4xeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiwyOS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDI5LDYuNiwyOS41LDcuMiwyOS41eiBNNy4yLDI4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDI4LjEsNywyOCw3LjIsMjh6Ii8+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjQuMSwzMy40bDIuMywwYzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjMKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40di0yLjFDNjMuNywzMy42LDYzLjgsMzMuNCw2NC4xLDMzLjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTczLjUsMzMuNWgyLjRjMC4yLDAsMC40LDAuMiwwLjQsMC40djJjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMkM3My4xLDMzLjYsNzMuMywzMy41LDczLjUsMzMuNXoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjMuNywyOC40aDEyLjZ2NUg2My43VjI4LjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTY1LjUsMjMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN3YtMy4xQzYzLjcsMjQuNSw2NC41LDIzLjYsNjUuNSwyMy42eiIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNjYuMiIgY3k9IjMwLjkiIHJ4PSIwLjkiIHJ5PSIxIi8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSI3My44IiBjeT0iMzAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNOTYuNCwzMGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCwyNi40LDk2LjQsMzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTk2LjMsMjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4xYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xYy0wLjEtMC4xLTAuMS0wLjEtMC4xLTAuMmMwLjUtMC4xLDEuMi0wLjIsMi0wLjFjMS4yLDAsMi41LDAuMywzLjUsMS4xYzEsMC44LDEuNywxLjgsMi4xLDIuOAoJCQkJQzk2LjEsMjcuOSw5Ni4yLDI4LjMsOTYuMywyOC42eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik04NCwzMi4yYzAsMCwwLTAuMSwwLTAuMWMwLjktMC4yLDIuOS0wLjQsNC43LDAuNmMxLjEsMC43LDEuOSwxLjUsMi40LDIuMwoJCQkJYzAuNCwwLjUsMC42LDEsMC43LDEuM2MtMC40LDAuMS0xLDAuMi0xLjcsMC4zYy0xLDAtMi4xLTAuMS0zLjItMC44cy0xLjktMS42LTIuNC0yLjVDODQuMiwzMi44LDg0LjEsMzIuNSw4NCwzMi4yeiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTExNi4zLDI2LjhsLTEuNCwybC0wLjgtMC44bC0wLjYtMC42bDAsMC45bC0wLjEsOC4yaC02LjgKCQkJCWwtMC4xLTguMmwwLTAuOWwtMC42LDAuNmwtMC44LDAuOGwtMS40LTJsMi42LTIuOWMwLjEtMC4xLDAuMi0wLjEsMC4zLTAuMWgxLjNsMC40LDAuN2MwLjcsMS4zLDIuNiwxLjMsMy4zLTAuMWwwLjMtMC42aDEuMgoJCQkJYzAuMSwwLDAuMiwwLDAuMywwLjFsMC4zLTAuM2wtMC4zLDAuM0wxMTYuMywyNi44eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMTAuMSwyNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDI3LjdMMTEwLjEsMjcuN3oiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMTI2LjgsMzQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMzMuMSwxMjYuOCwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNiwzNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDMyLjEsMTM3LjYsMzMuMSwxMzcuNiwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNywyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDI2LjIsMTI2LjgsMjMuNSwxMjYuOCwyMy41eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSIjMzM3MUI3IiBkPSJNMTcwLjgsMjMuMUwxNzAuOCwyMy4xYy0wLjMsMC0wLjUsMC0wLjgsMGMtMi4xLDAtNCwxLTUuMywyLjVsLTAuMSwwbC0wLjEtMC4xbC0xLTEuMmwtMC4zLDMuNGwzLjQsMC4zCgkJCQlsLTEuMS0xLjNsLTAuMS0wLjFsMC4xLTAuMWMxLjEtMS41LDMtMi4zLDUtMi4xbDAsMGMzLjIsMC4zLDUuNSwzLjEsNS4yLDYuM2MtMC4zLDMtMy4xLDUuMy02LjEsNS4xYy0zLjEtMC4yLTUuNC0yLjktNS4zLTYKCQkJCWwtMS4zLTAuMWMtMC4yLDMuOCwyLjYsNy4xLDYuMyw3LjRjMy45LDAuMyw3LjMtMi42LDcuNi02LjVDMTc3LjIsMjYuOCwxNzQuNCwyMy41LDE3MC44LDIzLjF6Ii8+CgkJCTxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik0xNzAuMywyNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNnMtMC42LDAuMy0wLjYsMC42djMuMmMwLDAuMiwwLjEsMC4zLDAuMiwwLjRjMC4xLDAuMSwwLjMsMC4yLDAuNCwwLjIKCQkJCWgyLjRjMC40LDAsMC42LTAuMywwLjYtMC42YzAtMC40LTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJ2LTAuMkwxNzAuMywyNy40TDE3MC4zLDI3LjR6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTE4Ni4yLDIzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43di03LjdDMTgzLjQsMjQuNiwxODQuNywyMy40LDE4Ni4yLDIzLjR6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxODYiIGN5PSIyOC45IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxOTQiIGN5PSIyNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDMzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjI1IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNTYsMjQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgkJYzAsMC0wLjIsMC4xLTAuOSwwLjJjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMC44LTAuMy0xLjctMC41LTIuNS0wLjVjLTAuMiwwLTAuNCwwLTAuNSwwYy0xLjMsMC0yLjUsMC4zLTMuNiwxCgkJYy0wLjIsMC4xLTAuMiwwLjItMC4yLDAuNHYxMS42YzAsMC4zLDAuMSwwLjUsMC4zLDAuNWMwLjYsMCwwLjUtMC40LDAuNS0wLjZ2LTUuN2MwLjctMC4zLDMuMi0xLjEsNS44LTAuMQoJCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjR2LTUuN0MxNTYuMiwyNC42LDE1Ni4xLDI0LjQsMTU2LDI0LjN6IE0xNTUuNiwzMC4yCgkJYy0wLjEsMC0wLjcsMC4xLTEsMC4xYy0wLjcsMC0yLjQtMC4xLTMuOC0wLjZjLTIuNS0xLTUtMC41LTYuMi0wLjF2LTQuOWMwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMAoJCWMwLjcsMCwxLjUsMC4yLDIuMiwwLjRjMS42LDAuNiwzLjUsMC43LDQuMywwLjdjMC4yLDAsMC44LDAsMS0wLjFWMzAuMnoiLz4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTQ4LjEsMjMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCUM0My42LDI1LjUsNDUuNiwyMy41LDQ4LjEsMjMuNXoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMjguOGMtMC4yLDAuMS0wLjUsMS4yLDAsMS41YzEuNCwxLDguNSwwLjgsMTEuMywwLjYKCQkJYzAuOC0wLjEsMS42LTAuNCwxLjctMS4yYzAtMC4zLTAuMS0wLjYtMC42LTAuOSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMC42TDQzLjMsMzFjLTAuMiwwLjUsMC4yLDEsMC43LDAuOWMwLjMtMC4xLDAuNSwwLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMiwwbDAuMi0wLjFjMC4zLTAuMiwwLjgtMC4yLDEuMSwwLjFsMC4yLDAuMmMwLjMsMC4zLDAuOCwwLjIsMS0wLjJsMC4xLTAuMmMwLjEtMC4yLDAtMC4zLDAuMi0wLjMKCQkJYzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMi4yYy0wLjEsMC4yLTAuMywwLjgsMCwxLjFjMC4zLDAuNCwzLDEuMSw2LjQsMS4xCgkJCWMyLjIsMCw0LjYtMC4zLDYtMC42YzAuNS0wLjEsMC45LTAuNSwwLjgtMC45YzAtMC4yLTAuMi0wLjUtMC40LTAuNyIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMy4zYzAsMC41LDAuNiwyLjMsMS4zLDIuN2MxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQljMS4zLTAuMSwyLjUtMC43LDMuMi0xLjhjMC4zLTAuNSwwLjUtMSwwLjUtMS40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUxLjYiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUzIiBjeT0iMjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNTMiIGN5PSIyNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjU0LjMiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUwLjkiIGN5PSIyNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJPC9nPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMjQuMiwzMXYtNy42YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjYsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDMyLjksMjQuMiwzMiwyNC4yLDMxeiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiwzMGw1LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDM0LjFsNS40LTEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzMGwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzNC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMzMzcxQjciIGQ9Ik0yOS41LDMyLjRMMjksMzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVzMC40LDAsMC41LDAuMmwwLjEsMC4yCgkJCUMyOC4zLDMyLjgsMjkuMSwzMi45LDI5LjUsMzIuNHoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTMyLjQsMzIuMWwtMC4xLDAuMmMtMC40LDEtMS44LDEuMS0yLjMsMC4yIi8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjI3LjYiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjMyLjQiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xMi44LDQ5LjVjMC42LDAsMS4xLTAuNSwxLjEtMS4xCgkJCWMwLTAuNi0wLjUtMS4yLTEuMS0xLjJjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMkMxMS42LDQ5LDEyLjIsNDkuNSwxMi44LDQ5LjV6IE0xMi44LDQ4YzAuMiwwLDAuNCwwLjIsMC40LDAuNAoJCQljMCwwLjItMC4yLDAuNC0wLjQsMC40Yy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDMTIuNCw0OC4xLDEyLjYsNDgsMTIuOCw0OHoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNC42LDUxLjJjLTAuMS0wLjEtMC4yLTAuMi0wLjMtMC4ySDUuNwoJCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNyw1MS41LDE0LjcsNTEuMywxNC42LDUxLjJ6IE0xMCw1NC4xCgkJCWMtMS42LDAtMy0wLjktMy43LTIuMmg3LjNDMTMsNTMuMiwxMS42LDU0LjEsMTAsNTQuMXoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik03LjIsNDkuNWMwLjYsMCwxLjItMC41LDEuMi0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4yLTEuMmMtMC42LDAtMS4xLDAuNS0xLjEsMS4yQzYuMSw0OSw2LjYsNDkuNSw3LjIsNDkuNXogTTcuMiw0OGMwLjIsMCwwLjQsMC4yLDAuNCwwLjRjMCwwLjItMC4yLDAuNC0wLjQsMC40CgkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzYuOCw0OC4xLDcsNDgsNy4yLDQ4eiIvPgoJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEwLDQzYy0zLjgsMC03LDMuMS03LDdjMCwzLjgsMy4xLDcsNyw3CgkJCXM3LTMuMSw3LTdDMTcsNDYuMiwxMy44LDQzLDEwLDQzeiBNMTAsNTYuMmMtMy40LDAtNi4yLTIuOC02LjItNi4yYzAtMy40LDIuOC02LjIsNi4yLTYuMnM2LjIsMi44LDYuMiw2LjIKCQkJQzE2LjIsNTMuNCwxMy40LDU2LjIsMTAsNTYuMnoiLz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02NC4xLDUzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDUzLjYsNjMuOCw1My40LDY0LjEsNTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNzMuNSw1My41aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2MmMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuNAoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRsMC0yQzczLjEsNTMuNiw3My4zLDUzLjUsNzMuNSw1My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02My43LDQ4LjRoMTIuNnY1SDYzLjdWNDguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNjUuNSw0My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw0NC41LDY0LjUsNDMuNiw2NS41LDQzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI2Ni4yIiBjeT0iNTAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjczLjgiIGN5PSI1MC45IiByeD0iMC45IiByeT0iMSIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik05Ni40LDUwYzAsMy42LTIuOSw2LjUtNi40LDYuNXMtNi40LTIuOS02LjQtNi41czIuOS02LjUsNi40LTYuNVM5Ni40LDQ2LjQsOTYuNCw1MHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNOTYuMyw0OC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw0Ny45LDk2LjIsNDguMyw5Ni4zLDQ4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTg0LDUyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDUyLjgsODQuMSw1Mi41LDg0LDUyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNDYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDQ2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTExMC4xLDQ3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNDcuN0wxMTAuMSw0Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0xMjYuOCw1NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw1My4xLDEyNi44LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy42LDU0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNTIuMSwxMzcuNiw1My4xLDEzNy42LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy43LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNDYuMiwxMjYuOCw0My41LDEyNi44LDQzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIGQ9Ik0xNzAuOCw0My4xTDE3MC44LDQzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjUsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw0Ni44LDE3NC40LDQzLjUsMTcwLjgsNDMuMXoiLz4KCQkJPHBhdGggZmlsbD0iI0MwQzBCRiIgZD0iTTE3MC4zLDQ3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZjMC0wLjMtMC4zLTAuNi0wLjYtMC42aC0xLjZoLTAuMnYtMC4yTDE3MC4zLDQ3LjRMMTcwLjMsNDcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNMTg2LjIsNDMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw0NC43LDE4NC43LDQzLjQsMTg2LjIsNDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE4NiIgY3k9IjQ4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE5NCIgY3k9IjQ2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNTMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iI0MwQzBCRiIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw0NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDQ0LjYsMTU2LjEsNDQuNCwxNTYsNDQuM3ogTTE1NS42LDUwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY1MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNDguMSw0My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNDUuNSw0NS42LDQzLjUsNDguMSw0My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw0OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDEsOC41LDAuOCwxMS4zLDAuNgoJCQljMC44LTAuMSwxLjYtMC40LDEuNy0xLjJjMC0wLjMtMC4xLTAuNi0wLjYtMC45Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUwLjZMNDMuMyw1MWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45YzAuMy0wLjEsMC41LDAsMC43LDAuMwoJCQlsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjIsMC44LDAuMSwxLjIsMGwwLjUtMC4yYzAuNC0wLjIsMC45LTAuMiwxLjMsMGwwLjUsMC4yCgkJCWMwLjQsMC4yLDAuOCwwLjIsMS4yLDBsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC41LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUzLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTEuNiIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTMiIGN5PSI0NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI1MyIgY3k9IjQ3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTQuMyIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTAuOSIgY3k9IjQ1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0yNC4yLDUxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNTIuOSwyNC4yLDUyLDI0LjIsNTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDUwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsNTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDUwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDU0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTI5LjUsNTIuNEwyOSw1MS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNTIuOCwyOS4xLDUyLjksMjkuNSw1Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw1Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMjcuNiIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMzIuNCIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsNzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDcxLjUsMTQuNyw3MS4zLDE0LjYsNzEuMnogTTEwLDc0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMyw3My4yLDExLjYsNzQuMSwxMCw3NC4xeiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsNjkuNWMwLjYsMCwxLjEtMC41LDEuMS0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4xLTEuMmMtMC42LDAtMS4yLDAuNS0xLjIsMS4yQzExLjYsNjksMTIuMiw2OS41LDEyLjgsNjkuNXogTTEyLjgsNjhjMC4yLDAsMC40LDAuMiwwLjQsMC40CgkJCWMwLDAuMi0wLjIsMC40LTAuNCwwLjRjLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDY4LjEsMTIuNiw2OCwxMi44LDY4eiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw2OS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDY5LDYuNiw2OS41LDcuMiw2OS41eiBNNy4yLDY4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDY4LjEsNyw2OCw3LjIsNjh6Ii8+CgkJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsNjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNyw2Ni4yLDEzLjgsNjMsMTAsNjN6IE0xMCw3Ni4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiw3My40LDEzLjQsNzYuMiwxMCw3Ni4yeiIvPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTY0LjEsNzMuNGwyLjMsMGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi4zCgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNHYtMi4xQzYzLjcsNzMuNiw2My44LDczLjQsNjQuMSw3My40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik03My41LDczLjVoMi40YzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMi4xQzczLjEsNzMuNiw3My4zLDczLjUsNzMuNSw3My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik02My43LDY4LjRoMTIuNnY1SDYzLjdWNjguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNjUuNSw2My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw2NC41LDY0LjUsNjMuNiw2NS41LDYzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI2Ni4yIiBjeT0iNzAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNzMuOCIgY3k9IjcwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNOTYuNCw3MGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCw2Ni40LDk2LjQsNzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTk2LjMsNjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4yYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xLjFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw2Ny45LDk2LjIsNjguMyw5Ni4zLDY4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTg0LDcyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDcyLjgsODQuMSw3Mi40LDg0LDcyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNjYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDY2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTExMC4xLDY3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNjcuN0wxMTAuMSw2Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0xMjYuOCw3NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw3My4xLDEyNi44LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy42LDc0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNzIuMSwxMzcuNiw3My4xLDEzNy42LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy43LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDYzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNjYuMiwxMjYuOCw2My41LDEyNi44LDYzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xNzAuOCw2My4xTDE3MC44LDYzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw2Ni44LDE3NC40LDYzLjUsMTcwLjgsNjMuMXoiLz4KCQkJPHBhdGggZmlsbD0iIzZBQTlERCIgZD0iTTE3MC4zLDY3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZTMTcyLjQsNzAsMTcyLDcwaC0xLjZoLTAuMnYtMC4yTDE3MC4zLDY3LjRMMTcwLjMsNjcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNMTg2LjIsNjMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw2NC43LDE4NC43LDYzLjQsMTg2LjIsNjMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE4NiIgY3k9IjY4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE5NCIgY3k9IjY2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNzMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw2NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDY0LjYsMTU2LjEsNjQuNCwxNTYsNjQuM3ogTTE1NS42LDcwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY3MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNDguMSw2My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNjUuNSw0NS42LDYzLjUsNDguMSw2My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw2OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDAuOSw4LjUsMC44LDExLjMsMC42CgkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsNzAuNkw0My4zLDcxYy0wLjIsMC41LDAuMiwxLDAuNywwLjljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDcyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDczLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTEuNiIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTMiIGN5PSI2NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI1MyIgY3k9IjY3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTQuMyIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTAuOSIgY3k9IjY1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0yNC4yLDcxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNzIuOSwyNC4yLDcyLDI0LjIsNzF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDcwLjFsNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiw3NC4xbDUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTM4LjgsNzAuMWwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCw3NC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiM2QUE5REQiIGQ9Ik0yOS41LDcyLjRMMjksNzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVjMC4yLTAuMSwwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNzIuOCwyOS4xLDcyLjksMjkuNSw3Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw3Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMjcuNiIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMzIuNCIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KPC9nPgo8Zz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMgoJCWMwLTAuNi0wLjUtMS4xLTEuMS0xLjFjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMVMxMi4yLDkuNSwxMi44LDkuNXogTTEyLjgsNy45YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDguMSwxMi42LDcuOSwxMi44LDcuOXoiLz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw5LjVjMC42LDAsMS4yLTAuNSwxLjItMS4yCgkJYzAtMC42LTAuNS0xLjEtMS4yLTEuMWMtMC42LDAtMS4xLDAuNS0xLjEsMS4xUzYuNiw5LjUsNy4yLDkuNXogTTcuMiw3LjljMC4yLDAsMC40LDAuMiwwLjQsMC40YzAsMC4yLTAuMiwwLjQtMC40LDAuNAoJCUM3LDguNyw2LjgsOC41LDYuOCw4LjNDNi44LDguMSw3LDcuOSw3LjIsNy45eiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTQuNiwxMS4yYy0wLjEtMC4xLTAuMi0wLjItMC4zLTAuMkg1LjcKCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNywxMS40LDE0LjcsMTEuMywxNC42LDExLjJ6IE0xMCwxNC4xCgkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywxMy4yLDExLjYsMTQuMSwxMCwxNC4xeiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsM2MtMy44LDAtNywzLjEtNyw3czMuMSw3LDcsN3M3LTMuMSw3LTcKCQlTMTMuOCwzLDEwLDN6IE0xMCwxNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJTNi42LDMuOCwxMCwzLjhzNi4yLDIuOCw2LjIsNi4yUzEzLjQsMTYuMiwxMCwxNi4yeiIvPgo8L2c+CjxnIGlkPSJDYXJfMDAwMDAwMTg5MzUzOTUwODU0MTM0MTM3NTAwMDAwMDA4MjUyNzM4Nzc4NDI3NzU3MTVfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NC4xLDEzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDEzLjYsNjMuOCwxMy40LDY0LjEsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNzMuNSwxMy40aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi40CgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNGwwLTIuMUM3My4xLDEzLjYsNzMuMywxMy40LDczLjUsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNjMuNyw4LjRoMTIuNnY1SDYzLjdWOC40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NS41LDMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN1Y1LjVDNjMuNyw0LjQsNjQuNSwzLjYsNjUuNSwzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI2Ni4yIiBjeT0iMTAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNzMuOCIgY3k9IjEwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+CjwvZz4KPGcgaWQ9IkFjdGl2aXRpZXMiPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjQsMTBjMCwzLjYtMi45LDYuNS02LjQsNi41cy02LjQtMi45LTYuNC02LjVzMi45LTYuNSw2LjQtNi41Uzk2LjQsNi40LDk2LjQsMTB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjMsOC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTEuMWMtMC4xLTAuMS0wLjEtMC4yLTAuMS0wLjJjMC41LTAuMSwxLjItMC4yLDItMC4yYzEuMiwwLDIuNSwwLjMsMy41LDEuMWMxLDAuOCwxLjcsMS44LDIuMSwyLjgKCQkJCUM5Ni4xLDcuOSw5Ni4yLDguMyw5Ni4zLDguNnoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNODQsMTIuMWMwLDAsMC0wLjEsMC0wLjFjMC45LTAuMiwyLjktMC40LDQuNywwLjZjMS4xLDAuNiwxLjksMS41LDIuNCwyLjMKCQkJCWMwLjQsMC41LDAuNiwxLDAuNywxLjNjLTAuNCwwLjEtMSwwLjItMS43LDAuM2MtMSwwLTIuMS0wLjEtMy4yLTAuOGMtMS4xLTAuNi0xLjktMS42LTIuNC0yLjVDODQuMiwxMi44LDg0LjEsMTIuNCw4NCwxMi4xeiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iT2JqZWN0c18wMDAwMDA2NDMxMjM3MTczOTEzMDMxNTI1MDAwMDAxMDIyNTg4OTAzMjIyODYzMjk3NV8iPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNi44bC0xLjQsMkwxMTQuMSw4bC0wLjYtMC43bDAsMC45bC0wLjEsOC4yaC02LjhsLTAuMS04LjIKCQkJCWwwLTAuOUwxMDUuOSw4bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDYuOHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTEwLjEsNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDcuN0wxMTAuMSw3Ljd6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJTeW1ib2xzXzAwMDAwMDk2NzQ2OTA3ODY5OTI5OTIxMTgwMDAwMDA2NDg0ODEyODMwMjgyNTgyNDE2XyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMTQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMTMuMSwxMjYuOCwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMzcuNiwxNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDEyLjEsMTM3LjYsMTMuMSwxMzcuNiwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMjYuOCw0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTEzNy43LDQuNHY5LjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDYuMiwxMjYuOCwzLjUsMTI2LjgsMy41eiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iUmVjZW50cyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTE3MC44LDMuMUwxNzAuOCwzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJTDE2Myw5LjVjLTAuMiwzLjgsMi42LDcuMSw2LjMsNy40YzMuOSwwLjQsNy4zLTIuNiw3LjYtNi41QzE3Ny4yLDYuOCwxNzQuNCwzLjUsMTcwLjgsMy4xeiIvPgoJCQk8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNMTcwLjMsNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNlMxNjksNy4xLDE2OSw3LjR2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZzLTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJWOS44TDE3MC4zLDcuNEwxNzAuMyw3LjR6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJDdXN0b21fMDAwMDAxODEwODcyMjk0MzQzMDIzMzY3ODAwMDAwMDUxNTIyNzc5NDU5NDA2NzQ0ODhfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xODYuMiwzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43VjYuMUMxODMuNCw0LjYsMTg0LjcsMy40LDE4Ni4yLDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjE4NiIgY3k9IjguOSIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMTk0IiBjeT0iNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDEzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS13aWR0aD0iMC4yNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTU2LDQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgljMCwwLTAuMiwwLjEtMC45LDAuMWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCWMtMC4yLDAuMS0wLjIsMC4yLTAuMiwwLjR2MTEuNmMwLDAuMywwLjEsMC41LDAuMywwLjVjMC42LDAsMC41LTAuNCwwLjUtMC42di01LjdjMC43LTAuMywzLjItMS4xLDUuOC0wLjFjMS42LDAuNiwzLjUsMC43LDQuMywwLjcKCWMwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjRWNC43QzE1Ni4yLDQuNSwxNTYuMSw0LjQsMTU2LDQuM3ogTTE1NS42LDEwLjJjLTAuMSwwLTAuNywwLjEtMSwwLjEKCWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0yLjUtMS01LTAuNS02LjItMC4xVjQuN2MwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMGMwLjcsMCwxLjUsMC4yLDIuMiwwLjQKCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVYxMC4yeiIvPgo8ZyBpZD0iRm9vZCI+Cgk8ZyBpZD0iTGF5ZXJfMTIiPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik00OC4xLDMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCQlDNDMuNiw1LjUsNDUuNiwzLjUsNDguMSwzLjV6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw4LjdjLTAuMiwwLjEtMC41LDEuMiwwLDEuNWMxLjQsMC45LDguNSwwLjgsMTEuMywwLjYKCQkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDEwLjZMNDMuMywxMWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45CgkJCQljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjNsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjEsMC44LDAuMSwxLjIsMGwwLjUtMC4yCgkJCQljMC40LTAuMiwwLjktMC4yLDEuMywwbDAuNSwwLjJjMC40LDAuMiwwLjgsMC4xLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjEsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yCgkJCQljMC4xLTAuMiwwLTAuMywwLjItMC40YzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMTIuMWMtMC4xLDAuMi0wLjMsMC44LDAsMS4xYzAuMywwLjQsMywxLjEsNi40LDEuMQoJCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwxMy4zYzAsMC41LDAuNiwyLjQsMS4zLDIuNmMxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQkJYzEuMy0wLjEsMi41LTAuNywzLjItMS44YzAuMy0wLjUsMC41LTEsMC41LTEuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTEuNiIgY3k9IjYuNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTMiIGN5PSI0LjkiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjUzIiBjeT0iNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1NC4zIiBjeT0iNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1MC45IiBjeT0iNC45IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJBbmltYWxzIj4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTI0LjIsMTFWMy41YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjcsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDEyLjksMjQuMiwxMS45LDI0LjIsMTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDEwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsMTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDEwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDE0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTI5LjUsMTIuNEwyOSwxMS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsMTIuNywyOS4xLDEyLjksMjkuNSwxMi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCwxMi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMjcuNiIgY3k9IjkuNyIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSIzMi40IiBjeT0iOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+)",":focus:before":{content:"",position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",border:"2px solid var(--epr-category-icon-active-color)",borderRadius:"50%"},"&.epr-icn-suggested":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -8)"},"&.epr-icn-custom":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -9)"},"&.epr-icn-activities":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -4)"},"&.epr-icn-animals_nature":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -1)"},"&.epr-icn-flags":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -7)"},"&.epr-icn-food_drink":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -2)"},"&.epr-icn-objects":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -5)"},"&.epr-icn-smileys_people":{backgroundPositionX:"0px"},"&.epr-icn-symbols":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -6)"},"&.epr-icn-travel_places":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -3)"}}},JW("catBtn",s$),{".epr-dark-theme":BW({},i$),".epr-auto-theme":BW({},i$)}));function l$(){var e,t,n=cs.useState(null),a=n[0],r=n[1],s=(e=FV(),t=OV(),function(n){var a;if(e.current){var r=null==(a=e.current)?void 0:a.querySelector('[data-name="'+n+'"]');if(r){var s=r.offsetTop||0;GV(t.current,s)}}});!function(e){var t=FV();cs.useEffect((function(){var n=new Map,a=t.current,r=new IntersectionObserver((function(t){if(a){for(var r,s=VW(t);!(r=s()).done;){var i=r.value,o=(c=void 0,null!=(c=null==(l=i.target)?void 0:l.getAttribute("data-name"))?c:null);n.set(o,i.intersectionRatio)}var l,c,d=Array.from(n),u=d[d.length-1];if(1==u[1])return e(u[0]);for(var f=0,m=d;f<m.length;f++){var p=m[f],h=p[0];if(p[1]){e(h);break}}}}),{threshold:[0,1]});null==a||a.querySelectorAll(HW(AW.category)).forEach((function(e){r.observe(e)}))}),[t,e])}(r);var i=SV(),o=sV(),l=WV(),c=n$();return cs.createElement("div",{className:PW(c$.nav),role:"tablist","aria-label":"Category navigation",id:"epr-category-nav-id",ref:l},o.map((function(e){var t=xG(e),n=t===a;if(function(e){return e.category===oG.CUSTOM}(e)&&c)return null;var o=!i&&!n;return cs.createElement(a$,{key:t,category:t,isActiveCategory:n,allowNavigation:o,categoryConfig:e,onClick:function(){r(t),s(t)}})})))}var c$=qW.create({nav:{".":"epr-category-nav",display:"flex",flexDirection:"row",justifyContent:"space-around",padding:"var(--epr-header-padding)"},".epr-search-active":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}},".epr-main:has(input:not(:placeholder-shown))":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}}}),d$="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNi45OCwxMy41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsOAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQyTDcuNzQsNy4yN2MtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywxMy4wNSw2Ljc3LDEzLjM5LDYuOTgsMTMuNTlMNi45OCwxMy41OXoiLz4KPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTEwLjE1LDE4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDE0Ljg0LDUuNzQsMTguNDMsMTAuMTUsMTguNDN6CgkgTTEwLjE1LDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0QzMuMjEsNi42LDYuMzMsMy40OSwxMC4xNSwzLjQ5CglMMTAuMTUsMy40OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTYuOTgsMzMuNTljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1czAuMjctMC4wNSwwLjM3LTAuMTVsMi40Mi0yLjQybDIuNDMsMi40MwoJYzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNWMwLjE0LDAsMC4yNy0wLjA1LDAuMzctMC4xNWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWwtMi40My0yLjQzTDEzLjMyLDI4CgljMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwbC0yLjQyLDIuNDJsLTIuNDEtMi40MWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywzMy4wNSw2Ljc3LDMzLjM5LDYuOTgsMzMuNTlMNi45OCwzMy41OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTEwLjE1LDM4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDM0Ljg0LDUuNzQsMzguNDMsMTAuMTUsMzguNDN6CgkgTTEwLjE1LDIzLjQ5YzMuODMsMCw2Ljk0LDMuMTEsNi45NCw2Ljk0YzAsMy44My0zLjExLDYuOTQtNi45NCw2Ljk0Yy0zLjgzLDAtNi45NC0zLjExLTYuOTQtNi45NAoJQzMuMjEsMjYuNiw2LjMzLDIzLjQ5LDEwLjE1LDIzLjQ5TDEwLjE1LDIzLjQ5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNi45OCw1My41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsNDgKCWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDBsLTIuNDIsMi40MmwtMi40MS0yLjQxYy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMAoJYy0wLjIxLDAuMjEtMC4yMSwwLjU0LDAsMC43NWwyLjQxLDIuNDFsLTIuNDIsMi40MkM2Ljc3LDUzLjA1LDYuNzcsNTMuMzksNi45OCw1My41OUw2Ljk4LDUzLjU5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNMTAuMTUsNTguNDNjNC40MSwwLDgtMy41OSw4LThjMC00LjQxLTMuNTktOC04LThjLTQuNDEsMC04LDMuNTktOCw4QzIuMTUsNTQuODQsNS43NCw1OC40MywxMC4xNSw1OC40M3oKCSBNMTAuMTUsNDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0CglDMy4yMSw0Ni42LDYuMzMsNDMuNDksMTAuMTUsNDMuNDlMMTAuMTUsNDMuNDl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik02Ljk4LDczLjU5YzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNXMwLjI3LTAuMDUsMC4zNy0wLjE1bDIuNDItMi40MmwyLjQzLDIuNDMKCWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVjMC4xNCwwLDAuMjctMC4wNSwwLjM3LTAuMTVjMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVsLTIuNDMtMi40M0wxMy4zMiw2OAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQybC0yLjQxLTIuNDFjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwCgljLTAuMjEsMC4yMS0wLjIxLDAuNTQsMCwwLjc1bDIuNDEsMi40MWwtMi40MiwyLjQyQzYuNzcsNzMuMDUsNi43Nyw3My4zOSw2Ljk4LDczLjU5TDYuOTgsNzMuNTl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xMC4xNSw3OC40M2M0LjQxLDAsOC0zLjU5LDgtOGMwLTQuNDEtMy41OS04LTgtOGMtNC40MSwwLTgsMy41OS04LDhDMi4xNSw3NC44NCw1Ljc0LDc4LjQzLDEwLjE1LDc4LjQzegoJIE0xMC4xNSw2My40OWMzLjgzLDAsNi45NCwzLjExLDYuOTQsNi45NGMwLDMuODMtMy4xMSw2Ljk0LTYuOTQsNi45NGMtMy44MywwLTYuOTQtMy4xMS02Ljk0LTYuOTQKCUMzLjIxLDY2LjYsNi4zMyw2My40OSwxMC4xNSw2My40OUwxMC4xNSw2My40OXoiLz4KPC9zdmc+";function u$(){var e=nH();return cs.createElement(oq,{className:PW(m$.btnClearSearch,KW.visibleOnSearchOnly),onClick:e,"aria-label":"Clear",title:"Clear"},cs.createElement("div",{className:PW(m$.icnClearnSearch)}))}var f$={":hover":{"> .epr-icn-clear-search":{backgroundPositionY:"-60px"}}},m$=qW.create(BW({btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+d$+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},JW("icnClearnSearch",{backgroundPositionY:"-40px"}),JW("btnClearSearch",f$))),p$=HW(AW.emojiPicker)+" "+HW(AW.emojiList),h$=["button",HW(AW.emoji)].join(""),g$=HW(AW.category);function x$(e){var t=e.value;if(!t)return null;var n=function(e){return[h$,'[data-full-name*="',iH(e),'"]'].join("")}(t);return cs.createElement("style",null,"\n    "+p$+" "+h$+" {\n      display: none;\n    }\n\n\n    "+p$+" "+n+" {\n      display: flex;\n    }\n\n    "+p$+" "+g$+":not(:has("+n+")) {\n      display: none;\n    }\n  ")}function y$(){return cs.createElement("div",{className:PW(v$.icnSearch)})}var v$=qW.create(BW({icnSearch:{".":"epr-icn-search",content:"",position:"absolute",top:"50%",left:"var(--epr-search-bar-inner-padding)",transform:"translateY(-50%)",width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"20px",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCAyMCA0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTEyLDguODFjMCwyLjA4LTEuNjgsMy43Ni0zLjc2LDMuNzZjLTIuMDgsMC0zLjc2LTEuNjgtMy43Ni0zLjc2CgljMC0yLjA4LDEuNjgtMy43NiwzLjc2LTMuNzZDMTAuMzIsNS4wNSwxMiw2LjczLDEyLDguODF6IE0xMS4yMywxMi43MmMtMC44MywwLjY0LTEuODcsMS4wMS0yLjk5LDEuMDFjLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTIKCWMwLTIuNzIsMi4yLTQuOTIsNC45Mi00LjkyYzIuNzIsMCw0LjkyLDIuMiw0LjkyLDQuOTJjMCwxLjEzLTAuMzgsMi4xNi0xLjAxLDIuOTlsMy45NCwzLjkzYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyCgljLTAuMjUsMC4yNS0wLjY2LDAuMjUtMC45MiwwTDExLjIzLDEyLjcyeiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTEyLDI4LjgxYzAsMi4wOC0xLjY4LDMuNzYtMy43NiwzLjc2Yy0yLjA4LDAtMy43Ni0xLjY4LTMuNzYtMy43NgoJYzAtMi4wOCwxLjY4LTMuNzYsMy43Ni0zLjc2QzEwLjMyLDI1LjA1LDEyLDI2LjczLDEyLDI4LjgxeiBNMTEuMjMsMzIuNzJjLTAuODMsMC42NC0xLjg3LDEuMDEtMi45OSwxLjAxCgljLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTJjMC0yLjcyLDIuMi00LjkyLDQuOTItNC45MmMyLjcyLDAsNC45MiwyLjIsNC45Miw0LjkyYzAsMS4xMy0wLjM4LDIuMTYtMS4wMSwyLjk5bDMuOTQsMy45MwoJYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyYy0wLjI1LDAuMjUtMC42NiwwLjI1LTAuOTIsMEwxMS4yMywzMi43MnoiLz4KPC9zdmc+)"}},JW("icnSearch",{backgroundPositionY:"-20px"})));function b$(){var e=oV(),t=lH();return e?null:cs.createElement(Uq,{className:PW(j$.overlay)},cs.createElement(w$,null),t?cs.createElement(Jq,null):null)}function w$(){var e,t,n=cs.useState(0),a=n[0],r=n[1],s=KV(),i=BV(),o=(t=KG(),null!=(e=[t.searchPlaceHolder,t.searchPlaceholder].find((function(e){return e!==BG})))?e:BG),l=KG().autoFocusSearch,c=aH(),d=c.statusSearchResults,u=c.searchTerm,f=c.onChange,m=null==i?void 0:i.current,p=null==m?void 0:m.value;return cs.createElement(Hq,{className:PW(j$.searchContainer)},cs.createElement(x$,{value:p}),cs.createElement("input",{autoFocus:l,"aria-label":"Type to search for an emoji",onFocus:s,className:PW(j$.search),type:"text","aria-controls":"epr-search-id",placeholder:o,onChange:function(e){r(a+1),setTimeout((function(){var t,n;f(null!=(t=null==e||null==(n=e.target)?void 0:n.value)?t:p)}))},ref:i}),u?cs.createElement("div",{role:"status",className:PW("epr-status-search-results",j$.visuallyHidden),"aria-live":"polite",id:"epr-search-id","aria-atomic":"true"},d):null,cs.createElement(y$,null),cs.createElement(u$,null))}var j$=qW.create(BW({overlay:{padding:"var(--epr-header-padding)",zIndex:"var(--epr-header-overlay-z-index)"},searchContainer:{".":"epr-search-container",flex:"1",display:"block",minWidth:"0"},visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"},search:{outline:"none",transition:"all 0.2s ease-in-out",color:"var(--epr-search-input-text-color)",borderRadius:"var(--epr-search-input-border-radius)",padding:"var(--epr-search-input-padding)",height:"var(--epr-search-input-height)",backgroundColor:"var(--epr-search-input-bg-color)",border:"1px solid var(--epr-search-input-bg-color)",width:"100%",":focus":{backgroundColor:"var(--epr-search-input-bg-color-active)",border:"1px solid var(--epr-search-border-color)"},"::placeholder":{color:"var(--epr-search-input-placeholder-color)"}},btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+d$+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},JW("icnClearnSearch",{backgroundPositionY:"-40px"}),JW("btnClearSearch",{":hover > .epr-icn-clear-search":{backgroundPositionY:"-60px"}})));function N$(){return cs.createElement(Hq,{className:PW("epr-header",KW.hiddenOnReactions)},cs.createElement(b$,null),cs.createElement(l$,null))}function C$(e){return cs.createElement(EV,null,cs.createElement(QW,null),cs.createElement(QG,Object.assign({},e),cs.createElement(S$,null)))}function S$(){var e=yV()[0],t=nV(),n=cs.useState(!e),a=n[0],r=n[1],s=KG().open;return cs.useEffect((function(){e&&!t||a||r(!0)}),[a,t,e]),s?cs.createElement(vH,null,cs.createElement(wq,null),cs.createElement(k$,{renderAll:a})):null}function k$(e){return e.renderAll?cs.createElement(cs.Fragment,null,cs.createElement(N$,null),cs.createElement(Pq,null),cs.createElement(Xq,null)):null}var M$=cs.memo(C$,ZW),_$=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this).state={hasError:!1},n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,UW(t,n),a.getDerivedStateFromError=function(){return{hasError:!0}};var r=a.prototype;return r.componentDidCatch=function(e,t){},r.render=function(){return this.state.hasError?null:this.props.children},a}(cs.Component);function I$(e){var t=function(e){var t=ds.useRef({onEmojiClick:e.onEmojiClick||tV,onReactionClick:e.onReactionClick||e.onEmojiClick,onSkinToneChange:e.onSkinToneChange||tV});return ds.useEffect((function(){t.current.onEmojiClick=e.onEmojiClick||tV,t.current.onReactionClick=e.onReactionClick||e.onEmojiClick}),[e.onEmojiClick,e.onReactionClick]),ds.useEffect((function(){t.current.onSkinToneChange=e.onSkinToneChange||tV}),[e.onSkinToneChange]),t}({onEmojiClick:e.onEmojiClick,onReactionClick:e.onReactionClick,onSkinToneChange:e.onSkinToneChange});return cs.createElement(_$,null,cs.createElement(XG.Provider,{value:t},cs.createElement(M$,Object.assign({},e))))}const A$="powerchat_recent_emojis";function E$({isOpen:e,onClose:t,onEmojiSelect:n,anchorRef:a,className:r}){const{t:s}=mk(),i=cs.useRef(null),[o,l]=cs.useState([]),[c,d]=cs.useState({top:0,left:0}),[u,f]=cs.useState(!1);cs.useEffect((()=>{const e=()=>{f(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),cs.useEffect((()=>{try{const e=localStorage.getItem(A$);if(e){const t=JSON.parse(e);l(t.sort(((e,t)=>t.timestamp-e.timestamp)))}}catch(e){}}),[]);const m=cs.useCallback((e=>{try{localStorage.setItem(A$,JSON.stringify(e))}catch(t){}}),[]),p=cs.useCallback((e=>{l((t=>{let n;if(t.find((t=>t.emoji===e)))n=t.map((t=>t.emoji===e?{...t,timestamp:Date.now(),count:t.count+1}:t));else{n=[{emoji:e,timestamp:Date.now(),count:1},...t]}return n=n.sort(((e,t)=>t.timestamp-e.timestamp)).slice(0,24),m(n),n}))}),[m]),h=cs.useCallback((e=>{const a=e.emoji;p(a),n(a),t()}),[p,n,t]);return cs.useEffect((()=>{if(!e||!a.current||u)return;const t=()=>{if(!a.current||u)return;const e=a.current.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth;let r=320,s=400;if(i.current){const e=i.current.getBoundingClientRect();e.width>0&&(r=e.width),e.height>0&&(s=e.height)}let o,l=e.top-s-8,c=e.left;l<8&&(l=e.bottom+8,o=void 0),l+s>t-8&&(l=e.top-s-8,l<8&&(l=8)),c+r>n-8&&(c=e.right-r,c<8&&(c=n-r-8)),c<8&&(c=8),d({top:l,left:c,bottom:o})},n=setTimeout(t,10);return t(),window.addEventListener("resize",t),window.addEventListener("scroll",t),()=>{clearTimeout(n),window.removeEventListener("resize",t),window.removeEventListener("scroll",t)}}),[e,a,u]),cs.useEffect((()=>{if(!e||!a.current||!i.current||u)return;const t=setTimeout((()=>{var e;if(!a.current||u)return;const t=a.current.getBoundingClientRect(),n=null==(e=i.current)?void 0:e.getBoundingClientRect(),r=window.innerHeight,s=window.innerWidth;if(!n)return;let o=t.top-n.height-8,l=t.left;o<8&&(o=t.bottom+8),o+n.height>r-8&&(o=t.top-n.height-8,o<8&&(o=8)),l+n.width>s-8&&(l=t.right-n.width,l<8&&(l=s-n.width-8)),l<8&&(l=8),d({top:o,left:l})}),50);return()=>clearTimeout(t)}),[e,i.current,u]),cs.useEffect((()=>{if(!e)return;const n=e=>{i.current&&!i.current.contains(e.target)&&a.current&&!a.current.contains(e.target)&&t()},r=e=>{"Escape"===e.key&&t()};return document.addEventListener("mousedown",n),document.addEventListener("keydown",r),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("keydown",r)}}),[e,t,a]),e?vs.jsxs(vs.Fragment,{children:[vs.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-25 md:hidden",onClick:t}),vs.jsxs("div",{ref:i,className:fN("fixed z-50 bg-white rounded-lg shadow-xl border border-gray-200","max-w-sm md:max-w-none",u?"emoji-picker-container":"",r),style:u?{}:{position:"fixed",top:c.top,left:c.left,bottom:c.bottom,zIndex:9999},role:"dialog","aria-label":s("emoji.picker_title","Select Emoji"),"aria-modal":"true",children:[vs.jsxs("div",{className:"md:hidden flex items-center justify-between p-3 border-b border-gray-200",children:[vs.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s("emoji.picker_title","Select Emoji")}),vs.jsx("button",{onClick:t,className:"p-1 rounded-md hover:bg-gray-100","aria-label":s("common.close","Close"),children:vs.jsx(yj,{className:"h-5 w-5 text-gray-500"})})]}),o.length>0&&vs.jsxs("div",{className:"p-3 border-b border-gray-200",children:[vs.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:s("emoji.recent","Recently Used")}),vs.jsx("div",{className:"grid grid-cols-8 gap-1",children:o.slice(0,16).map(((e,t)=>vs.jsx("button",{onClick:()=>h({emoji:e.emoji}),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-gray-100 rounded transition-colors",title:`${e.emoji} (used ${e.count} times)`,children:e.emoji},`${e.emoji}-${t}`)))})]}),vs.jsx("div",{className:"emoji-picker-container",children:vs.jsx(I$,{onEmojiClick:h,theme:aG.LIGHT,emojiStyle:tG.NATIVE,width:320,height:400,searchPlaceholder:s("emoji.search_placeholder","Search emojis..."),previewConfig:{showPreview:!1},skinTonesDisabled:!1,searchDisabled:!1,autoFocusSearch:!0,lazyLoadEmojis:!0,categoriesConfig:{categoryIcons:{recent:"🕒",smileys_people:"😀",animals_nature:"🐻",food_drink:"🍔",travel_places:"✈️",activities:"⚽",objects:"💡",symbols:"❤️",flags:"🏁"}}})})]})]}):null}function L$({conversationId:e}){var t;const[n,a]=cs.useState(""),[r,s]=cs.useState(null),[i,o]=cs.useState(!1),[l,c]=cs.useState(!1),[d,u]=cs.useState(!1),[f,m]=cs.useState(!1),{isBotDisabled:p,toggleBot:h,isToggling:g}=uW(e),[x,y]=cs.useState(!1),[v,b]=cs.useState(!1),[w,j]=cs.useState(0),[N,C]=cs.useState(null),[S,k]=cs.useState(null),[M,_]=cs.useState(new Uint8Array(30)),[I,A]=cs.useState(!0),E=cs.useRef(null),L=cs.useRef(null),T=cs.useRef(null),D=cs.useRef(null),P=cs.useRef([]),O=cs.useRef(null),R=cs.useRef(null),z=cs.useRef(null),F=cs.useRef(null),B=cs.useRef(null),{toast:U}=Fy(),{t:W}=mk(),{sendMessage:G,sendMediaMessage:V,replyToMessage:H,setReplyToMessage:q}=cR(),$=(e=100,t=!1)=>{setTimeout((()=>{if(L.current&&!x&&!i&&!l&&!d&&!f){const a=document.activeElement,r=a&&("BUTTON"===a.tagName||"INPUT"===a.tagName||"SELECT"===a.tagName||a.hasAttribute("contenteditable")||a.closest('[role="dialog"]')||a.closest('[role="menu"]')),s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(t||!r&&(!s||e>150)||document.activeElement===L.current)try{L.current.focus();const e=L.current.value.length;L.current.setSelectionRange(e,e)}catch(n){}}}),e)};cs.useEffect((()=>{L.current&&(L.current.style.height="auto",L.current.style.height=`${L.current.scrollHeight}px`)}),[n]),cs.useEffect((()=>{$(150)}),[e]),cs.useEffect((()=>{d||f||$(50)}),[d,f]),cs.useEffect((()=>{l||i||x||$(100)}),[l,i,x]),cs.useEffect((()=>{H&&(setTimeout((()=>{se()}),200),$(300,!0))}),[H]);const Y=()=>{O.current&&clearInterval(O.current),O.current=window.setInterval((()=>{j((e=>e+1))}),1e3)},Q=()=>{O.current&&(clearInterval(O.current),O.current=null)},K=()=>{if(!F.current)return;const e=F.current,t=e.frequencyBinCount,n=new Uint8Array(t),a=()=>{if(!e||v)return void(v||(B.current=requestAnimationFrame(a)));e.getByteFrequencyData(n);const r=new Uint8Array(30);for(let e=0;e<30;e++)r[e]=e<t?n[e]:0;_(r),B.current=requestAnimationFrame(a)};a()},J=()=>{B.current&&(cancelAnimationFrame(B.current),B.current=null),z.current&&(z.current.close(),z.current=null),F.current=null,_(new Uint8Array(30))},Z=()=>{const e=[{mimeType:"audio/webm;codecs=opus",extension:"webm"},{mimeType:"audio/webm",extension:"webm"},{mimeType:"audio/mp4",extension:"m4a"},{mimeType:"audio/ogg;codecs=opus",extension:"ogg"},{mimeType:"audio/wav",extension:"wav"}];for(const t of e)if(MediaRecorder.isTypeSupported(t.mimeType))return t;return{mimeType:"audio/webm",extension:"webm"}},X=async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100,channelCount:1}});R.current=e,(e=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return A(!1),!1;const n=new t,a=n.createAnalyser(),r=n.createMediaStreamSource(e);return a.fftSize=64,a.smoothingTimeConstant=.8,a.minDecibels=-90,a.maxDecibels=-10,r.connect(a),z.current=n,F.current=a,K(),!0}catch(t){return A(!1),!1}})(e);const t=Z(),n=new MediaRecorder(e,{mimeType:t.mimeType,audioBitsPerSecond:128e3});return P.current=[],n.addEventListener("dataavailable",(e=>{e.data&&e.data.size>0&&P.current.push(e.data)})),n.addEventListener("stop",(async()=>{if(P.current.length>0){const e=new Blob(P.current,{type:t.mimeType});C(e);const n=URL.createObjectURL(e);k(n)}J()})),D.current=n,!0}catch(e){let t=W("messages.input.microphone_access_error","Could not access microphone. Please check permissions.");return e instanceof DOMException&&("NotAllowedError"===e.name?t=W("messages.input.microphone_denied","Microphone access denied. Please allow microphone access and try again."):"NotFoundError"===e.name&&(t=W("messages.input.microphone_not_found","No microphone found. Please connect a microphone and try again."))),U({title:W("messages.input.recording_error","Recording Error"),description:t,variant:"destructive"}),!1}},ee=async()=>{C(null),k(null),j(0),b(!1),y(!0),Y();await X()&&D.current?D.current.start(100):(Q(),y(!1))},te=()=>{if(D.current&&"inactive"!==D.current.state)try{D.current.stop(),Q()}catch(e){}},ne=()=>{if(D.current&&"inactive"!==D.current.state)try{D.current.stop()}catch(e){}R.current&&(R.current.getTracks().forEach((e=>e.stop())),R.current=null),Q(),J(),y(!1),b(!1),j(0),m(!1),S&&(URL.revokeObjectURL(S),k(null)),C(null),$(100)},ae=async()=>{if(!n.trim()||d)return;u(!0);let t=!1;const r=!!H;try{if(H){const e=await fetch(`/api/messages/${H.id}/reply`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:n.trim()})});if(!e.ok){const t=await e.json();throw new Error(t.error||W("message_input.reply_failed","Failed to send reply"))}await e.json(),U({title:W("message_input.reply_sent","Reply sent"),description:W("message_input.reply_success","Your reply has been sent successfully"),variant:"default"}),q(null),a(""),t=!0}else await G(e,n,!p),a(""),t=!0}catch(pBe){const t=pBe instanceof Error?pBe.message:W("messages.input.send_message_failed","Failed to send message");U({title:W("common.error","Error"),description:t,variant:"destructive"})}finally{if(u(!1),t){$(r?150:100)}}},re=()=>{q(null),$(150,!0)},se=()=>{if(L.current)try{requestAnimationFrame((()=>{if(L.current){L.current.focus();const e=L.current.value.length;L.current.setSelectionRange(e,e),requestAnimationFrame((()=>{document.activeElement!==L.current&&L.current&&(L.current.focus(),L.current.click())}))}}))}catch(e){}};return cs.useEffect((()=>()=>{if(D.current&&"inactive"!==D.current.state)try{D.current.stop()}catch(e){}R.current&&R.current.getTracks().forEach((e=>e.stop())),O.current&&clearInterval(O.current),J(),S&&URL.revokeObjectURL(S)}),[S]),vs.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 transition-colors duration-200",children:[H&&vs.jsx("div",{id:"reply-context",className:"mb-3 bg-gray-50 dark:bg-gray-700 border-l-4 border-blue-500 rounded-r-md",ref:e=>{e&&L.current&&setTimeout((()=>{se()}),150)},children:vs.jsxs("div",{className:"flex items-start justify-between p-3",children:[vs.jsxs("div",{className:"flex items-start space-x-2 flex-1 min-w-0",children:[vs.jsx(Tw,{className:"h-4 w-4 text-blue-500 dark:text-blue-400 mt-0.5 flex-shrink-0"}),vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[vs.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:W("message_input.replying_to","Replying to")}),vs.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:"inbound"===H.direction?(null==(t=H.contact)?void 0:t.name)||W("common.contact","Contact"):W("common.you","You")})]}),vs.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200 line-clamp-2",children:H.content?((e,t=100)=>e.length<=t?e:e.substring(0,t)+"...")(H.content):W("message_bubble.media_message","Media message")})]})]}),vs.jsx("button",{onClick:re,className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-white transition-colors ml-2 flex-shrink-0",title:W("message_input.cancel_reply","Cancel reply"),"aria-label":W("message_input.cancel_reply","Cancel reply"),children:vs.jsx(yj,{className:"h-4 w-4"})})]})}),x?vs.jsxs("div",{className:"py-2",children:[vs.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 p-4 rounded-lg shadow-lg",children:[vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 button-scale-hover",onClick:ne,title:W("common.cancel","Cancel"),children:vs.jsx("i",{className:"ri-delete-bin-line text-red-500 dark:text-red-400"})}),vs.jsx("div",{className:"text-base font-mono ml-3 text-green-600 dark:text-green-400 font-semibold",children:(e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`})(w)})]}),vs.jsx("div",{className:"flex-1 mx-4 h-8 flex items-center justify-center",children:v?vs.jsxs("div",{className:"relative w-full h-2 bg-gray-200 dark:bg-gray-600 rounded-full",children:[vs.jsx("div",{className:"absolute left-0 top-0 h-full bg-green-500 dark:bg-green-400 rounded-full",style:{width:`${Math.min(100,w/300*100)}%`}}),vs.jsx("div",{className:"absolute top-0 w-3 h-3 bg-green-500 dark:bg-green-400 rounded-full transform -translate-y-1/4",style:{left:`${Math.min(100,w/300*100)}%`,transform:"translateX(-50%)"}})]}):vs.jsx("div",{className:"flex items-center justify-center space-x-0.5 h-8 w-full",children:I?Array.from(M).map(((e,t)=>{const n=Math.max(4,Math.min(32,e/255*28+4));return vs.jsx("div",{className:"w-1 bg-green-500 dark:bg-green-400 rounded-full transition-all duration-75",style:{height:`${n}px`,opacity:e>0?1:.3}},t)})):[...Array(30)].map(((e,t)=>vs.jsx("div",{className:"w-1 bg-green-500 dark:bg-green-400 rounded-full animate-voiceWave",style:{height:"8px",animationDelay:30*t+"ms"}},t)))})}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[!f&&vs.jsxs(vs.Fragment,{children:[v?vs.jsx("button",{className:"p-2 rounded-full bg-green-500 hover:bg-green-600 text-white transition-all duration-200 button-scale-hover shadow-md hover:shadow-lg",onClick:()=>{if(D.current&&v)try{"function"==typeof D.current.resume?(D.current.resume(),b(!1),Y(),K()):(ne(),setTimeout(ee,100))}catch(e){ne(),setTimeout(ee,100)}},title:W("messages.input.resume","Resume"),children:vs.jsx(_w,{className:"h-5 w-5"})}):vs.jsx("button",{className:"p-2 rounded-full bg-yellow-500 hover:bg-yellow-600 text-white transition-all duration-200 button-scale-hover shadow-md hover:shadow-lg",onClick:()=>{if(D.current&&"recording"===D.current.state)try{"function"==typeof D.current.pause?(D.current.pause(),b(!0),Q(),B.current&&(cancelAnimationFrame(B.current),B.current=null)):te()}catch(e){te()}},title:W("messages.input.pause","Pause"),children:vs.jsx(Cw,{className:"h-5 w-5"})}),vs.jsx("button",{className:"p-2 rounded-full bg-red-500 hover:bg-red-600 text-white transition-all duration-200 button-scale-hover shadow-md hover:shadow-lg",onClick:te,title:W("messages.input.stop","Stop"),children:vs.jsx(qw,{className:"h-5 w-5"})})]}),vs.jsx("button",{className:`\n                  p-2 rounded-full transition-all duration-200 button-scale-hover shadow-md hover:shadow-lg text-white\n                  ${N&&!f?"send-button-gradient hover:shadow-xl":"bg-gray-400 dark:bg-gray-600 cursor-not-allowed opacity-50"}\n                `,onClick:async()=>{if(N&&!f)if(N.size<100)U({title:W("common.error","Error"),description:W("messages.input.recording_too_short","Recording is too short or empty"),variant:"destructive"});else{m(!0);try{const t=Z(),n=Date.now(),a=new File([N],`voice_message_${n}.${t.extension}`,{type:N.type||t.mimeType,lastModified:n});await V(e,a,"audio"),ne(),U({title:W("common.success","Success"),description:W("messages.input.voice_message_sent","Voice message sent")}),$(200)}catch(t){U({title:W("common.error","Error"),description:W("messages.input.voice_message_failed","Failed to send voice message"),variant:"destructive"})}finally{m(!1)}}else N||U({title:W("common.error","Error"),description:W("messages.input.no_recording","No recording to send"),variant:"destructive"})},disabled:!N||f,title:f?W("messages.input.sending","Sending..."):W("messages.input.send","Send"),children:f?vs.jsx(uw,{className:"h-5 w-5 animate-spin"}):vs.jsx(Rw,{className:"h-5 w-5"})}),f&&vs.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:vs.jsx("span",{children:W("messages.input.sending_voice","Sending voice message...")})})]})]}),S&&vs.jsx("div",{className:"mt-3 flex justify-center",children:vs.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg border border-gray-200 dark:border-gray-600",children:vs.jsx("audio",{src:S,controls:!0,className:"w-full max-w-md rounded"})})})]}):vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{className:"relative flex items-center bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full px-4 py-3 shadow-sm hover:shadow-md transition-shadow duration-200",children:[vs.jsx("button",{ref:T,className:`\n                p-2 rounded-full transition-all duration-200\n                hover:bg-gray-100 dark:hover:bg-gray-700\n                ${l?"bg-gray-100 dark:bg-gray-700":""}\n                text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-white\n                flex-shrink-0\n              `,onClick:()=>{c(!l)},title:W("messages.input.add_emoji","Add emoji"),children:vs.jsx(Vw,{className:"h-5 w-5"})}),vs.jsx("textarea",{ref:L,rows:1,placeholder:W("messages.input.type_message","Type a message..."),className:"\r\n                flex-1 mx-3 py-2\r\n                bg-transparent\r\n                text-gray-900 dark:text-white\r\n                placeholder-gray-500 dark:placeholder-gray-400\r\n                focus:outline-none\r\n                resize-none\r\n                max-h-32 overflow-y-auto\r\n                text-base\r\n                border-none\r\n              ",value:n,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n.trim()&&!d&&ae()),"Escape"===e.key&&H&&re()},disabled:d,"aria-label":W("messages.input.type_message","Type a message..."),"aria-describedby":H?"reply-context":void 0,autoComplete:"off",autoCorrect:"on",autoCapitalize:"sentences",spellCheck:"true"}),n.trim()?vs.jsx("button",{className:`\n                  w-10 h-10 rounded-full flex items-center justify-center\n                  send-button-transition button-scale-hover button-scale-active\n                  shadow-lg hover:shadow-xl\n                  ${d?"bg-gray-400 cursor-not-allowed":"send-button-gradient"}\n                  text-white focus-ring\n                  flex-shrink-0\n                  ${!d&&n.trim()?"send-button-pulse":""}\n                `,onClick:ae,disabled:d||!n.trim(),"data-tooltip":W("messages.input.send_message","Send message"),"aria-label":W("messages.input.send_message","Send message"),children:d?vs.jsx(uw,{className:"h-5 w-5 loading-spinner"}):vs.jsx("i",{className:"ri-send-plane-fill text-lg transform rotate-45 transition-transform duration-200"})}):vs.jsx("button",{className:"\n                  p-2 rounded-full transition-all duration-200\n                  hover:bg-gray-100 dark:hover:bg-gray-700\n                  text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-white\n                  button-scale-hover\n                  flex-shrink-0\n                ",onClick:ee,"data-tooltip":W("messages.input.record_voice_message","Record voice message"),"aria-label":W("messages.input.record_voice_message","Record voice message"),children:vs.jsx(bw,{className:"h-5 w-5 transition-transform duration-200 hover:scale-110"})})]}),vs.jsxs("div",{className:"flex items-center justify-between mt-3",children:[vs.jsxs("div",{className:"flex items-center space-x-1",children:[vs.jsx("button",{className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200",onClick:()=>{E.current&&E.current.click()},title:W("messages.input.attach_file","Attach file"),children:vs.jsx("i",{className:"ri-attachment-2 text-base"})}),vs.jsx("button",{className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200",onClick:()=>{E.current&&(E.current.accept="image/*",E.current.click())},title:W("messages.input.attach_image","Attach image"),children:vs.jsx("i",{className:"ri-image-line text-base"})})]}),vs.jsx("button",{className:`\n                p-2 rounded-md transition-colors duration-200 relative\n                ${p?"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200":"bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400 hover:bg-purple-200 dark:hover:bg-purple-800"}\n                ${g?"opacity-50 cursor-not-allowed":""}\n              `,onClick:h,disabled:g,title:p?W("messages.input.enable_bot","Enable bot"):W("messages.input.disable_bot","Disable bot"),children:g?vs.jsx(uw,{className:"h-4 w-4 animate-spin"}):vs.jsx(IF,{size:16})}),vs.jsx("input",{type:"file",ref:E,className:"hidden",onChange:e=>{const t=e.target.files;if(!t||0===t.length)return;const n=t[0];n.size>10485760?U({title:W("messages.input.file_too_large","File Too Large"),description:W("messages.input.max_file_size","Maximum file size is 10MB"),variant:"destructive"}):(s(n),o(!0),E.current&&(E.current.value=""))},accept:"image/*,video/*,audio/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,text/plain,application/zip"})]})]}),vs.jsx(gW,{isOpen:i,onClose:()=>{o(!1),s(null),$(100)},file:r,conversationId:e}),vs.jsx(E$,{isOpen:l,onClose:()=>{c(!1),$(100)},onEmojiSelect:e=>{if(!L.current)return;const t=L.current,r=t.selectionStart,s=t.selectionEnd,i=n.slice(0,r)+e+n.slice(s);a(i),setTimeout((()=>{if(t){const n=r+e.length;t.setSelectionRange(n,n),t.focus()}}),0)},anchorRef:T})]})}var T$="horizontal",D$=["horizontal","vertical"],P$=cs.forwardRef(((e,t)=>{const{decorative:n,orientation:a=T$,...r}=e,s=function(e){return D$.includes(e)}(a)?a:T$,i=n?{role:"none"}:{"aria-orientation":"vertical"===s?s:void 0,role:"separator"};return vs.jsx(Xy.div,{"data-orientation":s,...i,...r,ref:t})}));P$.displayName="Separator";var O$=P$;const R$=cs.forwardRef((({className:e,orientation:t="horizontal",decorative:n=!0,...a},r)=>vs.jsx(O$,{ref:r,decorative:n,orientation:t,className:fN("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...a})));function z$({isOpen:e,onClose:t,conversationId:n,conversationName:a,isGroupChat:r,onSuccess:s}){const[i,o]=cs.useState(!1),{toast:l}=Fy(),{t:c}=mk(),{branding:d}=jT(),u=()=>{i||t()};return vs.jsx(yB,{open:e,onOpenChange:u,children:vs.jsxs(NB,{className:"sm:max-w-md",children:[vs.jsx(CB,{children:vs.jsxs("div",{className:"flex items-center space-x-3",children:[vs.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:vs.jsx(nj,{className:"h-5 w-5 text-red-600"})}),vs.jsx("div",{children:vs.jsx(kB,{className:"text-lg font-medium text-gray-900",children:r?c("clear_history.confirm_group_title","Clear Group Chat History"):c("clear_history.confirm_title","Clear Chat History")})})]})}),vs.jsxs(MB,{className:"text-sm text-gray-600 space-y-3",children:[vs.jsx("p",{children:r?c("clear_history.confirm_group_message",`Are you sure you want to clear all chat history for "${a}"? This will permanently delete all messages and media files from ${d.appName}.`,{conversationName:a,appName:d.appName}):c("clear_history.confirm_message",`Are you sure you want to clear all chat history with "${a}"? This will permanently delete all messages and media files from ${d.appName}.`,{conversationName:a,appName:d.appName})}),vs.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:vs.jsxs("div",{className:"flex items-start space-x-2",children:[vs.jsx(nj,{className:"h-4 w-4 text-yellow-600 mt-0.5 flex-shrink-0"}),vs.jsxs("div",{className:"text-sm text-yellow-800",children:[vs.jsx("p",{className:"font-medium mb-1",children:c("clear_history.warning_title","Important:")}),vs.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[vs.jsx("li",{children:c("clear_history.warning_irreversible","This action cannot be undone")}),vs.jsx("li",{children:c("clear_history.warning_local_only",`Messages will only be deleted from ${d.appName}, not from WhatsApp`,{appName:d.appName})}),vs.jsx("li",{children:c("clear_history.warning_media","All associated media files will be permanently deleted")}),vs.jsx("li",{children:r?c("clear_history.warning_group_preserved","Group information and participants will be preserved"):c("clear_history.warning_contact_preserved","Contact information will be preserved")})]})]})]})})]}),vs.jsxs(SB,{className:"flex justify-end space-x-3 pt-4",children:[vs.jsx(lk,{variant:"outline",onClick:u,disabled:i,className:"min-w-[80px]",children:c("common.cancel","Cancel")}),vs.jsx(lk,{variant:"destructive",onClick:async()=>{if(!i){o(!0);try{const e=await fetch(`/api/conversations/${n}/history`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to clear chat history")}const a=await e.json();l({title:c("clear_history.success_title","Chat History Cleared"),description:c("clear_history.success_description",`Successfully cleared ${a.deletedMessageCount} messages and ${a.deletedMediaCount} media files.`),variant:"default"}),t(),null==s||s()}catch(pBe){const t=pBe instanceof Error?pBe.message:c("clear_history.error_generic","Failed to clear chat history");l({title:c("clear_history.error_title","Clear Failed"),description:t,variant:"destructive"})}finally{o(!1)}}},disabled:i,className:"min-w-[120px] flex items-center space-x-2",children:i?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin"}),vs.jsx("span",{children:c("clear_history.clearing","Clearing...")})]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Zw,{className:"h-4 w-4"}),vs.jsx("span",{children:c("clear_history.clear_button","Clear History")})]})})]})]})})}function F$({contact:e,conversation:t,isOpen:n,onClose:a,onContactUpdated:r}){const[s,i]=cs.useState({name:"",email:"",phone:"",company:"",identifierType:"",identifier:"",notes:"",tags:""}),[o,l]=cs.useState(!1),[c,d]=cs.useState(!1),[u,f]=cs.useState(!1),[m,p]=cs.useState(null),[h,g]=cs.useState(null),[x,y]=cs.useState(!1),v=vy(),{toast:b}=Fy(),{t:w}=mk(),{updateProfilePicture:j,isUpdating:N}=wF(),C=cs.useRef(null);cs.useEffect((()=>{if(e){const t={name:e.name||"",email:e.email||"",phone:e.phone||"",company:e.company||"",identifierType:e.identifierType||"",identifier:e.identifier||"",notes:e.notes||"",tags:Array.isArray(e.tags)?e.tags.join(", "):""};i(t),d(!1),p(null),g(null)}}),[e]),cs.useEffect((()=>{if(e){const t={name:e.name||"",email:e.email||"",phone:e.phone||"",company:e.company||"",identifierType:e.identifierType||"",identifier:e.identifier||"",notes:e.notes||"",tags:Array.isArray(e.tags)?e.tags.join(", "):""},n=JSON.stringify(s)!==JSON.stringify(t)||null!==m;d(n)}}),[s,e,m]);const S=ky({mutationFn:async t=>{if(!(null==e?void 0:e.id))throw new Error(w("contacts.edit_dialog.contact_id_missing","Contact ID is missing"));const n=await _y("PATCH",`/api/contacts/${e.id}`,t);if(!n.ok){const e=await n.json();throw new Error(e.message||w("contacts.edit_dialog.update_failed","Failed to update contact"))}return n.json()},onSuccess:t=>{b({title:w("contacts.edit_dialog.success_title","Contact updated"),description:w("contacts.edit_dialog.success_description","The contact has been successfully updated.")}),v.invalidateQueries({queryKey:["/api/contacts"]}),v.invalidateQueries({queryKey:["/api/conversations"]}),v.invalidateQueries({queryKey:[`/api/contacts/${null==e?void 0:e.id}`]}),r&&r(t),M()},onError:e=>{b({title:w("contacts.edit_dialog.error_title","Update failed"),description:e.message,variant:"destructive"})},onSettled:()=>{l(!1)}}),k=e=>{const{name:t,value:n}=e.target;i((e=>({...e,[t]:n})))},M=()=>{c?f(!0):a()};return e?vs.jsxs(vs.Fragment,{children:[vs.jsx(yB,{open:n,onOpenChange:M,children:vs.jsxs(NB,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto z-[9999]",children:[vs.jsx(CB,{children:vs.jsx(kB,{children:w("contacts.edit_dialog.title","Edit Contact Details")})}),vs.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),s.name.trim()?s.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)?(b({title:w("contacts.edit_dialog.validation_error","Validation error"),description:w("contacts.edit_dialog.invalid_email","Please enter a valid email address."),variant:"destructive"}),0):!s.phone||/^[\+]?[0-9\s\-\(\)]{7,20}$/.test(s.phone)||(b({title:w("contacts.edit_dialog.validation_error","Validation error"),description:w("contacts.edit_dialog.invalid_phone","Please enter a valid phone number (7-20 digits)."),variant:"destructive"}),0):(b({title:w("contacts.edit_dialog.validation_error","Validation error"),description:w("contacts.edit_dialog.name_required","Contact name is required."),variant:"destructive"}),0)){l(!0);try{const t=s.tags?s.tags.split(",").map((e=>e.trim())).filter(Boolean):[],a={...s,tags:t};if(await S.mutateAsync(a),m&&(null==e?void 0:e.id)){const t=new FormData;t.append("avatar",m);try{if(!(await fetch(`/api/contacts/${e.id}/avatar`,{method:"POST",body:t})).ok)throw new Error(w("contacts.edit_dialog.upload_profile_picture_failed","Failed to upload profile picture"));b({title:w("contacts.edit_dialog.profile_picture_updated","Profile picture updated"),description:w("contacts.edit_dialog.profile_picture_uploaded","The profile picture has been uploaded successfully.")}),v.invalidateQueries({queryKey:["/api/contacts"]}),v.invalidateQueries({queryKey:["/api/conversations"]})}catch(n){b({title:w("contacts.edit_dialog.profile_picture_upload_failed","Profile picture upload failed"),description:w("contacts.edit_dialog.contact_updated_upload_failed","Contact was updated but profile picture upload failed."),variant:"destructive"})}}}catch(n){}}},className:"space-y-6 pt-4",children:[vs.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[vs.jsx("div",{className:"relative",children:h?vs.jsxs("div",{className:"relative",children:[vs.jsx("img",{src:h,alt:w("contacts.edit_dialog.profile_preview","Profile preview"),className:"w-20 h-20 rounded-full object-cover border-2 border-gray-200"}),vs.jsx("button",{type:"button",onClick:()=>{p(null),g(null),y(!1),b({title:w("contacts.edit_dialog.image_removed","Image removed"),description:w("contacts.edit_dialog.image_removed_desc","Profile picture has been removed.")})},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:vs.jsx(yj,{className:"w-3 h-3"})})]}):vs.jsx(jF,{contact:e,connectionId:null==t?void 0:t.channelId,size:"lg",showRefreshButton:!1})}),vs.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[vs.jsx("input",{ref:C,type:"file",accept:"image/*",onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(e.target.value="",n){y(!0);try{if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(n.type.toLowerCase()))return y(!1),void b({title:w("contacts.edit_dialog.invalid_file_type","Invalid file type"),description:w("contacts.edit_dialog.invalid_file_type_desc","Please select a valid image file (JPEG, PNG, GIF, or WebP)."),variant:"destructive"});const e=5242880;if(n.size>e){const e=(n.size/1048576).toFixed(2);return y(!1),void b({title:w("contacts.edit_dialog.file_too_large","File too large"),description:w("contacts.edit_dialog.file_too_large_desc",`File size is ${e}MB. Please select an image smaller than 5MB.`,{sizeMB:e}),variant:"destructive"})}const t=new Image,a=URL.createObjectURL(n);t.onload=()=>{URL.revokeObjectURL(a);const e=2048;if(t.width>e||t.height>e)return y(!1),void b({title:w("contacts.edit_dialog.image_too_large","Image too large"),description:w("contacts.edit_dialog.image_too_large_desc",`Image dimensions are ${t.width}x${t.height}. Please use an image smaller than 2048x2048 pixels.`,{width:t.width,height:t.height,maxDimension:e}),variant:"destructive"});p(n);const r=new FileReader;r.onload=e=>{var t;g(null==(t=e.target)?void 0:t.result),y(!1),b({title:w("contacts.edit_dialog.image_selected","Image selected"),description:w("contacts.edit_dialog.image_selected_desc","Profile picture has been selected successfully.")})},r.onerror=()=>{y(!1),b({title:w("contacts.edit_dialog.error_reading_file","Error reading file"),description:w("contacts.edit_dialog.error_reading_file_desc","Failed to read the selected image file."),variant:"destructive"})},r.readAsDataURL(n)},t.onerror=()=>{URL.revokeObjectURL(a),y(!1),b({title:w("contacts.edit_dialog.invalid_image","Invalid image"),description:w("contacts.edit_dialog.invalid_image_desc","The selected file is not a valid image."),variant:"destructive"})},t.src=a}catch(a){y(!1),b({title:w("common.error","Error"),description:w("contacts.edit_dialog.unexpected_error","An unexpected error occurred while processing the image."),variant:"destructive"})}}},className:"hidden",id:"profile-picture-upload",disabled:o||x}),vs.jsx(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>{try{if(C.current)return C.current.disabled?void b({title:w("contacts.edit_dialog.upload_disabled","Upload disabled"),description:w("contacts.edit_dialog.upload_disabled_desc","File upload is currently disabled."),variant:"destructive"}):void C.current.click();const e=document.getElementById("profile-picture-upload");if(e){if(e.disabled)return void b({title:w("contacts.edit_dialog.upload_disabled","Upload disabled"),description:w("contacts.edit_dialog.upload_disabled_desc","File upload is currently disabled."),variant:"destructive"});e.click()}else b({title:w("contacts.edit_dialog.upload_error","Upload error"),description:w("contacts.edit_dialog.upload_not_available","File upload is not available. Please try refreshing the page."),variant:"destructive"})}catch(e){b({title:w("contacts.edit_dialog.upload_error","Upload error"),description:w("contacts.edit_dialog.upload_failed","Failed to open file picker. Please try again."),variant:"destructive"})}},className:"hover:bg-gray-50 transition-colors",disabled:o||x,children:x?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),w("contacts.edit_dialog.processing","Processing...")]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(sj,{className:"w-4 h-4 mr-2"}),w("contacts.edit_dialog.upload_photo","Upload Photo")]})}),("whatsapp"===(null==t?void 0:t.channelType)||"whatsapp_unofficial"===(null==t?void 0:t.channelType))&&vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>{(null==e?void 0:e.id)&&(null==t?void 0:t.channelId)&&j({contactId:e.id,connectionId:t.channelId})},disabled:N,children:[N?vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}):vs.jsx("i",{className:"ri-whatsapp-line w-4 h-4 mr-2"}),w("contacts.edit_dialog.sync_from_whatsapp","Sync from WhatsApp")]})]})]}),vs.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"name",children:w("contacts.edit_dialog.full_name_required","Full Name *")}),vs.jsx(LB,{id:"name",name:"name",value:s.name,onChange:k,required:!0,placeholder:w("contacts.edit_dialog.enter_full_name","Enter full name")})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"email",children:w("contacts.edit_dialog.email","Email")}),vs.jsx(LB,{id:"email",name:"email",type:"email",value:s.email,onChange:k,placeholder:w("contacts.edit_dialog.enter_email","Enter email address")})]})]}),vs.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"phone",children:w("contacts.edit_dialog.phone_number","Phone Number")}),vs.jsx(LB,{id:"phone",name:"phone",value:s.phone,onChange:k,placeholder:w("contacts.edit_dialog.enter_phone","Enter phone number")})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"company",children:w("contacts.edit_dialog.company","Company")}),vs.jsx(LB,{id:"company",name:"company",value:s.company,onChange:k,placeholder:w("contacts.edit_dialog.enter_company","Enter company name")})]})]}),vs.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"identifierType",children:w("contacts.edit_dialog.primary_channel","Primary Channel")}),vs.jsxs(ZU,{value:s.identifierType,onValueChange:e=>((e,t)=>{i((n=>({...n,[e]:t})))})("identifierType",e),children:[vs.jsx(tW,{children:vs.jsx(eW,{placeholder:w("contacts.edit_dialog.select_channel","Select channel")})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"whatsapp",children:w("contacts.edit_dialog.whatsapp_official","WhatsApp Official")}),vs.jsx(sW,{value:"whatsapp_unofficial",children:w("contacts.edit_dialog.whatsapp_unofficial","WhatsApp Unofficial")}),vs.jsx(sW,{value:"messenger",children:w("contacts.edit_dialog.facebook_messenger","Facebook Messenger")}),vs.jsx(sW,{value:"instagram",children:w("contacts.edit_dialog.instagram","Instagram")})]})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"identifier",children:w("contacts.edit_dialog.channel_identifier","Channel Identifier")}),vs.jsx(LB,{id:"identifier",name:"identifier",value:s.identifier,onChange:k,placeholder:w("contacts.edit_dialog.phone_username_id","Phone number, username, or ID")})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"tags",children:w("contacts.edit_dialog.tags","Tags")}),vs.jsx(LB,{id:"tags",name:"tags",value:s.tags,onChange:k,placeholder:w("contacts.edit_dialog.enter_tags","Enter tags separated by commas (e.g., lead, customer, vip)")}),vs.jsx("p",{className:"text-sm text-gray-500",children:w("contacts.edit_dialog.tags_help","Separate multiple tags with commas")})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"notes",children:w("contacts.edit_dialog.notes","Notes")}),vs.jsx(TB,{id:"notes",name:"notes",value:s.notes,onChange:k,rows:3,placeholder:w("contacts.edit_dialog.add_notes","Add any additional notes about this contact...")})]}),vs.jsxs(SB,{className:"flex flex-col sm:flex-row gap-2",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:M,disabled:o,children:w("common.cancel","Cancel")}),vs.jsx(lk,{type:"submit",disabled:o||!c,className:"btn-brand-primary",children:o?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),w("contacts.edit_dialog.saving","Saving...")]}):w("contacts.edit_dialog.save_changes","Save Changes")})]})]})]})}),vs.jsx(yB,{open:u,onOpenChange:f,children:vs.jsxs(NB,{className:"sm:max-w-[400px]",children:[vs.jsx(CB,{children:vs.jsx(kB,{children:w("contacts.edit_dialog.unsaved_changes","Unsaved Changes")})}),vs.jsx("p",{className:"text-sm text-gray-600",children:w("contacts.edit_dialog.unsaved_changes_message","You have unsaved changes. Are you sure you want to close without saving?")}),vs.jsxs(SB,{children:[vs.jsx(lk,{variant:"outline",onClick:()=>{f(!1)},children:w("contacts.edit_dialog.continue_editing","Continue Editing")}),vs.jsx(lk,{variant:"destructive",onClick:()=>{f(!1),a()},children:w("contacts.edit_dialog.discard_changes","Discard Changes")})]})]})})]}):null}function B$({contact:e,conversation:t,className:n}){const[a,r]=cs.useState(""),[s,i]=cs.useState(!1),[o,l]=cs.useState(!1),[c,d]=cs.useState(e),{toast:u}=Fy(),{t:f}=mk(),{isMobile:m,isContactDetailsOpen:p,toggleContactDetails:h}=cW(),{onMessage:g}=yT("/ws");cs.useEffect((()=>{d(e)}),[e]),cs.useEffect((()=>g("contactUpdated",(t=>{const n=t.data;n&&n.id===(null==e?void 0:e.id)&&(d(n),u({title:f("contacts.details.contact_updated_title","Contact updated"),description:f("contacts.details.contact_updated_description","Contact information has been updated.")}))}))),[g,null==e?void 0:e.id,u]);const{data:x=[]}=Sy({queryKey:["/api/contacts",null==e?void 0:e.id,"notes"],enabled:!!(null==e?void 0:e.id),queryFn:async({queryKey:e})=>{const t=await fetch(`/api/contacts/${e[1]}/notes`);if(!t.ok)throw new Error(f("contacts.details.fetch_notes_failed","Failed to fetch notes"));return t.json()}});if(!e)return null;const y=(e=>{switch(e){case"whatsapp":return{icon:"ri-whatsapp-line",color:"#25D366",name:f("contacts.details.channel.whatsapp","WhatsApp")};case"whatsapp_official":return{icon:"ri-whatsapp-line",color:"#25D366",name:f("contacts.details.channel.whatsapp_business","WhatsApp Business")};case"whatsapp_unofficial":return{icon:"ri-whatsapp-line",color:"#F59E0B",name:f("contacts.details.channel.whatsapp_unofficial","WhatsApp (Unofficial)")};case"messenger":case"facebook":return{icon:"ri-messenger-line",color:"#1877F2",name:f("contacts.details.channel.messenger","Messenger")};case"instagram":return{icon:"ri-instagram-line",color:"#E4405F",name:f("contacts.details.channel.instagram","Instagram")};case"email":return{icon:"ri-mail-line",color:"#3B82F6",name:f("contacts.details.channel.email","Email")};default:return{icon:"ri-chat-1-line",color:"#333235",name:f("contacts.details.channel.chat","Chat")}}})(null==t?void 0:t.channelType),v=(null==t?void 0:t.createdAt)?Dz(new Date(t.createdAt),"PPP, p"):f("contacts.details.unknown","Unknown");return vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{className:n||(p?"flex":"hidden")+" flex-col fixed top-0 right-0 h-full z-50 lg:static lg:z-0 w-full max-w-sm sm:max-w-md lg:w-80 bg-white border-l border-gray-200 shadow-lg lg:shadow-none transition-all duration-300 ease-in-out overflow-y-auto",onClick:e=>e.stopPropagation(),children:[vs.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center lg:hidden",children:[vs.jsx("h2",{className:"font-medium text-lg",children:f("contacts.details.title","Contact Details")}),vs.jsx("button",{onClick:h,className:"p-2 rounded-md hover:bg-gray-100 min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":f("contacts.details.close_details","Close contact details"),children:vs.jsx("i",{className:"ri-close-line text-lg text-gray-600"})})]}),vs.jsxs("div",{className:"p-4 border-b border-gray-200",children:[vs.jsx("div",{className:"flex items-center justify-center mb-5",children:vs.jsx(jF,{contact:c||e,connectionId:null==t?void 0:t.channelId,size:"lg",showRefreshButton:"whatsapp"===(null==t?void 0:t.channelType)||"whatsapp_unofficial"===(null==t?void 0:t.channelType),className:"mx-auto"})}),vs.jsx("h3",{className:"font-medium mb-4",children:f("contacts.details.contact_information","Contact Information")}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{children:[vs.jsx("p",{className:"text-xs text-gray-500",children:f("contacts.details.full_name","Full Name")}),vs.jsx("p",{className:"text-sm",children:(null==c?void 0:c.name)||(null==e?void 0:e.name)})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-xs text-gray-500",children:f("contacts.details.phone","Phone")}),vs.jsx("p",{className:"text-sm",children:(null==c?void 0:c.phone)||(null==e?void 0:e.phone)||f("contacts.details.not_provided","Not provided")})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-xs text-gray-500",children:f("contacts.details.email","Email")}),vs.jsx("p",{className:"text-sm",children:(null==c?void 0:c.email)||(null==e?void 0:e.email)||f("contacts.details.not_provided","Not provided")})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-xs text-gray-500",children:f("contacts.details.company","Company")}),vs.jsx("p",{className:"text-sm",children:(null==c?void 0:c.company)||(null==e?void 0:e.company)||f("contacts.details.not_provided","Not provided")})]})]}),vs.jsxs("button",{onClick:()=>{i(!0)},className:"mt-4 text-primary-600 text-sm flex items-center hover:text-primary-700 transition-colors",children:[vs.jsx("i",{className:"ri-edit-line mr-1"}),f("contacts.details.edit_details","Edit details")]})]}),vs.jsxs("div",{className:"p-4 border-b border-gray-200",children:[vs.jsx("h3",{className:"font-medium mb-4",children:f("contacts.details.tags","Tags")}),vs.jsx("div",{className:"flex flex-wrap gap-2",children:((null==c?void 0:c.tags)||(null==e?void 0:e.tags))&&((null==c?void 0:c.tags)||(null==e?void 0:e.tags)).length>0?((null==c?void 0:c.tags)||(null==e?void 0:e.tags)).map(((e,t)=>vs.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:e},t))):vs.jsx("span",{className:"text-sm text-gray-500",children:f("contacts.details.no_tags_added","No tags added")})})]}),vs.jsxs("div",{className:"p-4 border-b border-gray-200",children:[vs.jsx("h3",{className:"font-medium mb-4",children:f("contacts.details.conversation_details","Conversation Details")}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{children:[vs.jsx("p",{className:"text-xs text-gray-500",children:f("contacts.details.first_contacted","First contacted")}),vs.jsx("p",{className:"text-sm",children:v})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-xs text-gray-500",children:f("contacts.details.channel","Channel")}),vs.jsxs("p",{className:"text-sm flex items-center",children:[vs.jsx("i",{className:y.icon+" mr-1",style:{color:y.color}}),y.name]})]})]})]}),vs.jsxs("div",{className:"p-4",children:[vs.jsx(R$,{className:"mb-4"}),vs.jsxs(lk,{variant:"outline",size:"sm",className:"w-full text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",onClick:()=>l(!0),children:[vs.jsx(Zw,{className:"h-4 w-4 mr-2"}),f("clear_history.button","Clear Chat History")]})]})]}),vs.jsx(F$,{contact:c||e,conversation:t,isOpen:s,onClose:()=>{i(!1)},onContactUpdated:e=>{d(e)}}),vs.jsx(z$,{isOpen:o,onClose:()=>l(!1),conversationId:null==t?void 0:t.id,conversationName:(null==c?void 0:c.name)||(null==e?void 0:e.name)||f("contacts.details.unknown_contact","Unknown Contact"),isGroupChat:!1,onSuccess:()=>{}})]})}R$.displayName=O$.displayName;var U$="ScrollArea",[W$,G$]=Vy(U$),[V$,H$]=W$(U$),q$=cs.forwardRef(((e,t)=>{const{__scopeScrollArea:n,type:a="hover",dir:r,scrollHideDelay:s=600,...i}=e,[o,l]=cs.useState(null),[c,d]=cs.useState(null),[u,f]=cs.useState(null),[m,p]=cs.useState(null),[h,g]=cs.useState(null),[x,y]=cs.useState(0),[v,b]=cs.useState(0),[w,j]=cs.useState(!1),[N,C]=cs.useState(!1),S=Gy(t,(e=>l(e))),k=ST(r);return vs.jsx(V$,{scope:n,type:a,dir:k,scrollHideDelay:s,scrollArea:o,viewport:c,onViewportChange:d,content:u,onContentChange:f,scrollbarX:m,onScrollbarXChange:p,scrollbarXEnabled:w,onScrollbarXEnabledChange:j,scrollbarY:h,onScrollbarYChange:g,scrollbarYEnabled:N,onScrollbarYEnabledChange:C,onCornerWidthChange:y,onCornerHeightChange:b,children:vs.jsx(Xy.div,{dir:k,...i,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})}));q$.displayName=U$;var $$="ScrollAreaViewport",Y$=cs.forwardRef(((e,t)=>{const{__scopeScrollArea:n,children:a,nonce:r,...s}=e,i=H$($$,n),o=Gy(t,cs.useRef(null),i.onViewportChange);return vs.jsxs(vs.Fragment,{children:[vs.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),vs.jsx(Xy.div,{"data-radix-scroll-area-viewport":"",...s,ref:o,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:vs.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})}));Y$.displayName=$$;var Q$="ScrollAreaScrollbar",K$=cs.forwardRef(((e,t)=>{const{forceMount:n,...a}=e,r=H$(Q$,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=r,o="horizontal"===e.orientation;return cs.useEffect((()=>(o?s(!0):i(!0),()=>{o?s(!1):i(!1)})),[o,s,i]),"hover"===r.type?vs.jsx(J$,{...a,ref:t,forceMount:n}):"scroll"===r.type?vs.jsx(Z$,{...a,ref:t,forceMount:n}):"auto"===r.type?vs.jsx(X$,{...a,ref:t,forceMount:n}):"always"===r.type?vs.jsx(eY,{...a,ref:t}):null}));K$.displayName=Q$;var J$=cs.forwardRef(((e,t)=>{const{forceMount:n,...a}=e,r=H$(Q$,e.__scopeScrollArea),[s,i]=cs.useState(!1);return cs.useEffect((()=>{const e=r.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),i(!0)},a=()=>{t=window.setTimeout((()=>i(!1)),r.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",a),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",a)}}}),[r.scrollArea,r.scrollHideDelay]),vs.jsx(hv,{present:n||s,children:vs.jsx(X$,{"data-state":s?"visible":"hidden",...a,ref:t})})})),Z$=cs.forwardRef(((e,t)=>{const{forceMount:n,...a}=e,r=H$(Q$,e.__scopeScrollArea),s="horizontal"===e.orientation,i=vY((()=>l("SCROLL_END")),100),[o,l]=(c="hidden",d={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},cs.useReducer(((e,t)=>d[e][t]??e),c));var c,d;return cs.useEffect((()=>{if("idle"===o){const e=window.setTimeout((()=>l("HIDE")),r.scrollHideDelay);return()=>window.clearTimeout(e)}}),[o,r.scrollHideDelay,l]),cs.useEffect((()=>{const e=r.viewport,t=s?"scrollLeft":"scrollTop";if(e){let n=e[t];const a=()=>{const a=e[t];n!==a&&(l("SCROLL"),i()),n=a};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}}),[r.viewport,s,l,i]),vs.jsx(hv,{present:n||"hidden"!==o,children:vs.jsx(eY,{"data-state":"hidden"===o?"hidden":"visible",...a,ref:t,onPointerEnter:By(e.onPointerEnter,(()=>l("POINTER_ENTER"))),onPointerLeave:By(e.onPointerLeave,(()=>l("POINTER_LEAVE")))})})})),X$=cs.forwardRef(((e,t)=>{const n=H$(Q$,e.__scopeScrollArea),{forceMount:a,...r}=e,[s,i]=cs.useState(!1),o="horizontal"===e.orientation,l=vY((()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;i(o?e:t)}}),10);return bY(n.viewport,l),bY(n.content,l),vs.jsx(hv,{present:a||s,children:vs.jsx(eY,{"data-state":s?"visible":"hidden",...r,ref:t})})})),eY=cs.forwardRef(((e,t)=>{const{orientation:n="vertical",...a}=e,r=H$(Q$,e.__scopeScrollArea),s=cs.useRef(null),i=cs.useRef(0),[o,l]=cs.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=mY(o.viewport,o.content),d={...a,sizes:o,onSizesChange:l,hasThumb:Boolean(c>0&&c<1),onThumbChange:e=>s.current=e,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:e=>i.current=e};function u(e,t){return function(e,t,n,a="ltr"){const r=pY(n),s=r/2,i=t||s,o=r-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,u="ltr"===a?[0,d]:[-1*d,0];return gY([l,c],u)(e)}(e,i.current,o,t)}return"horizontal"===n?vs.jsx(tY,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&s.current){const e=hY(r.viewport.scrollLeft,o,r.dir);s.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{r.viewport&&(r.viewport.scrollLeft=e)},onDragScroll:e=>{r.viewport&&(r.viewport.scrollLeft=u(e,r.dir))}}):"vertical"===n?vs.jsx(nY,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&s.current){const e=hY(r.viewport.scrollTop,o);s.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{r.viewport&&(r.viewport.scrollTop=e)},onDragScroll:e=>{r.viewport&&(r.viewport.scrollTop=u(e))}}):null})),tY=cs.forwardRef(((e,t)=>{const{sizes:n,onSizesChange:a,...r}=e,s=H$(Q$,e.__scopeScrollArea),[i,o]=cs.useState(),l=cs.useRef(null),c=Gy(t,l,s.onScrollbarXChange);return cs.useEffect((()=>{l.current&&o(getComputedStyle(l.current))}),[l]),vs.jsx(sY,{"data-orientation":"horizontal",...r,ref:c,sizes:n,style:{bottom:0,left:"rtl"===s.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===s.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":pY(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(s.viewport){const a=s.viewport.scrollLeft+t.deltaX;e.onWheelScroll(a),xY(a,n)&&t.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&a({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:fY(i.paddingLeft),paddingEnd:fY(i.paddingRight)}})}})})),nY=cs.forwardRef(((e,t)=>{const{sizes:n,onSizesChange:a,...r}=e,s=H$(Q$,e.__scopeScrollArea),[i,o]=cs.useState(),l=cs.useRef(null),c=Gy(t,l,s.onScrollbarYChange);return cs.useEffect((()=>{l.current&&o(getComputedStyle(l.current))}),[l]),vs.jsx(sY,{"data-orientation":"vertical",...r,ref:c,sizes:n,style:{top:0,right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":pY(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(s.viewport){const a=s.viewport.scrollTop+t.deltaY;e.onWheelScroll(a),xY(a,n)&&t.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&a({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:fY(i.paddingTop),paddingEnd:fY(i.paddingBottom)}})}})})),[aY,rY]=W$(Q$),sY=cs.forwardRef(((e,t)=>{const{__scopeScrollArea:n,sizes:a,hasThumb:r,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:u,...f}=e,m=H$(Q$,n),[p,h]=cs.useState(null),g=Gy(t,(e=>h(e))),x=cs.useRef(null),y=cs.useRef(""),v=m.viewport,b=a.content-a.viewport,w=tv(d),j=tv(l),N=vY(u,10);function C(e){if(x.current){const t=e.clientX-x.current.left,n=e.clientY-x.current.top;c({x:t,y:n})}}return cs.useEffect((()=>{const e=e=>{const t=e.target;(null==p?void 0:p.contains(t))&&w(e,b)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})}),[v,p,b,w]),cs.useEffect(j,[a,j]),bY(p,N),bY(m.content,N),vs.jsx(aY,{scope:n,scrollbar:p,hasThumb:r,onThumbChange:tv(s),onThumbPointerUp:tv(i),onThumbPositionChange:j,onThumbPointerDown:tv(o),children:vs.jsx(Xy.div,{...f,ref:g,style:{position:"absolute",...f.style},onPointerDown:By(e.onPointerDown,(e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),x.current=p.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),C(e)}})),onPointerMove:By(e.onPointerMove,C),onPointerUp:By(e.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null}))})})})),iY="ScrollAreaThumb",oY=cs.forwardRef(((e,t)=>{const{forceMount:n,...a}=e,r=rY(iY,e.__scopeScrollArea);return vs.jsx(hv,{present:n||r.hasThumb,children:vs.jsx(lY,{ref:t,...a})})})),lY=cs.forwardRef(((e,t)=>{const{__scopeScrollArea:n,style:a,...r}=e,s=H$(iY,n),i=rY(iY,n),{onThumbPositionChange:o}=i,l=Gy(t,(e=>i.onThumbChange(e))),c=cs.useRef(void 0),d=vY((()=>{c.current&&(c.current(),c.current=void 0)}),100);return cs.useEffect((()=>{const e=s.viewport;if(e){const t=()=>{if(d(),!c.current){const t=yY(e,o);c.current=t,o()}};return o(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[s.viewport,d,o]),vs.jsx(Xy.div,{"data-state":i.hasThumb?"visible":"hidden",...r,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:By(e.onPointerDownCapture,(e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;i.onThumbPointerDown({x:n,y:a})})),onPointerUp:By(e.onPointerUp,i.onThumbPointerUp)})}));oY.displayName=iY;var cY="ScrollAreaCorner",dY=cs.forwardRef(((e,t)=>{const n=H$(cY,e.__scopeScrollArea),a=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&a?vs.jsx(uY,{...e,ref:t}):null}));dY.displayName=cY;var uY=cs.forwardRef(((e,t)=>{const{__scopeScrollArea:n,...a}=e,r=H$(cY,n),[s,i]=cs.useState(0),[o,l]=cs.useState(0),c=Boolean(s&&o);return bY(r.scrollbarX,(()=>{var e;const t=(null==(e=r.scrollbarX)?void 0:e.offsetHeight)||0;r.onCornerHeightChange(t),l(t)})),bY(r.scrollbarY,(()=>{var e;const t=(null==(e=r.scrollbarY)?void 0:e.offsetWidth)||0;r.onCornerWidthChange(t),i(t)})),c?vs.jsx(Xy.div,{...a,ref:t,style:{width:s,height:o,position:"absolute",right:"ltr"===r.dir?0:void 0,left:"rtl"===r.dir?0:void 0,bottom:0,...e.style}}):null}));function fY(e){return e?parseInt(e,10):0}function mY(e,t){const n=e/t;return isNaN(n)?0:n}function pY(e){const t=mY(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=(e.scrollbar.size-n)*t;return Math.max(a,18)}function hY(e,t,n="ltr"){const a=pY(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-r,i=t.content-t.viewport,o=s-a,l=DB(e,"ltr"===n?[0,i]:[-1*i,0]);return gY([0,i],[0,o])(l)}function gY(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(n-e[0])}}function xY(e,t){return e>0&&e<t}var yY=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},a=0;return function r(){const s={left:e.scrollLeft,top:e.scrollTop},i=n.left!==s.left,o=n.top!==s.top;(i||o)&&t(),n=s,a=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(a)};function vY(e,t){const n=tv(e),a=cs.useRef(0);return cs.useEffect((()=>()=>window.clearTimeout(a.current)),[]),cs.useCallback((()=>{window.clearTimeout(a.current),a.current=window.setTimeout(n,t)}),[n,t])}function bY(e,t){const n=tv(t);mv((()=>{let t=0;if(e){const a=new ResizeObserver((()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)}));return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}}),[e,n])}var wY=q$,jY=Y$,NY=dY;const CY=cs.forwardRef((({className:e,children:t,...n},a)=>vs.jsxs(wY,{ref:a,className:fN("relative overflow-hidden",e),...n,children:[vs.jsx(jY,{className:"h-full w-full rounded-[inherit]",children:t}),vs.jsx(SY,{}),vs.jsx(NY,{})]})));CY.displayName=wY.displayName;const SY=cs.forwardRef((({className:e,orientation:t="vertical",...n},a)=>vs.jsx(K$,{ref:a,orientation:t,className:fN("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:vs.jsx(oY,{className:"relative flex-1 rounded-full bg-border"})})));function kY({conversation:e,className:t}){var n,a,r;const[s,i]=cs.useState(!1),[o,l]=cs.useState(null),[c,d]=cs.useState(!1),{t:u}=mk(),{isMobile:f,toggleContactDetails:m}=cW(),{setActiveConversationId:p}=cR(),{toast:h}=Fy(),g=e=>e.length>10?`+${e.slice(0,-10)} ${e.slice(-10,-7)} ${e.slice(-7,-4)} ${e.slice(-4)}`:e,x=(null==(a=null==(n=e.groupMetadata)?void 0:n.participants)?void 0:a.map((e=>({id:e.id,name:e.notify||null,phone:e.id.split("@")[0],isAdmin:"admin"===e.admin,isSuperAdmin:"superadmin"===e.admin,avatarUrl:null}))))||[],{data:y}=Sy({queryKey:["/api/contacts"],staleTime:3e5}),v=x.map((e=>{var t;const n=null==(t=null==y?void 0:y.contacts)?void 0:t.find((t=>t.identifier===e.phone&&"whatsapp"===t.identifierType));let a=e.name;return!a&&n&&(a=n.name),a||(a=g(e.phone||"")),{...e,displayName:a,contactId:null==n?void 0:n.id}})),b=v.map((e=>e.id)),{participantPictures:w,isLoading:j,refreshParticipantPictures:N}=function({connectionId:e,participantJids:t=[],enabled:n=!0}){Fy();const a=vy(),[r,s]=cs.useState({}),{data:i,isLoading:o,error:l,refetch:c}=Sy({queryKey:["participant-profile-pictures",e,t.sort()],queryFn:async()=>{if(!e||0===t.length)return{};try{const n=await _y("POST",`/api/whatsapp/participants-pictures/${e}`,{participantJids:t}),a=await n.json();if(a.success)return a.participants;throw new Error(a.message||"Failed to fetch participant profile pictures")}catch(n){throw n}},enabled:n&&!!e&&t.length>0,staleTime:3e5,cacheTime:18e5,retry:2,retryDelay:e=>Math.min(1e3*2**e,3e4)});cs.useEffect((()=>{i&&s((e=>({...e,...i})))}),[i]);const d=ky({mutationFn:async({connectionId:e,participantJid:t})=>{try{const n=await _y("GET",`/api/whatsapp/participant-picture/${e}/${encodeURIComponent(t)}`),a=await n.json();return a.success?{participantJid:t,url:a.url}:{participantJid:t,url:null}}catch(n){return{participantJid:t,url:null}}},onSuccess:n=>{s((e=>({...e,[n.participantJid]:n.url}))),a.setQueryData(["participant-profile-pictures",e,t.sort()],(e=>({...e,[n.participantJid]:n.url})))},onError:(e,t)=>{}});return{participantPictures:r,isLoading:o,error:l,getParticipantPicture:e=>r[e]||null,fetchParticipantPicture:async t=>e?void 0!==r[t]?r[t]:(await d.mutateAsync({connectionId:e,participantJid:t})).url:null,refreshParticipantPictures:()=>{e&&t.length>0&&c()},clearParticipantCache:e=>{s((t=>{const n={...t};return e.forEach((e=>{delete n[e]})),n}))},isFetchingSingle:d.isLoading}}({connectionId:e.channelId,participantJids:b,enabled:b.length>0&&!!e.channelId}),C=v.map((e=>({...e,avatarUrl:w[e.id]||null}))),S=s?C:C.slice(0,5),k=C.length>5,M=ky({mutationFn:async t=>{const n=await _y("POST","/api/conversations/whatsapp/initiate",{name:t.displayName||t.phone,phoneNumber:t.phone,channelConnectionId:e.channelId});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to create conversation")}return n.json()},onSuccess:(e,t)=>{var n;l(null),(null==(n=e.conversation)?void 0:n.id)&&(p(e.conversation.id),f&&m(),h({title:u("groups.private_message_started","Private conversation started"),description:u("groups.private_message_with","Started private conversation with {{name}}",{name:t.displayName||t.phone})}))},onError:(e,t)=>{l(null),h({title:u("groups.private_message_failed","Failed to start conversation"),description:e.message,variant:"destructive"})}}),_=async e=>{o!==e.id&&(l(e.id),M.mutate(e))};return vs.jsxs("div",{className:fN("h-full bg-white",t),onClick:e=>e.stopPropagation(),children:[vs.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center lg:hidden",children:[vs.jsx("h2",{className:"font-medium text-lg",children:u("groups.group_info","Group Info")}),vs.jsx("button",{onClick:m,className:"p-2 rounded-md hover:bg-gray-100 min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":u("groups.close_group_info","Close group info"),children:vs.jsx("i",{className:"ri-close-line text-lg text-gray-600"})})]}),vs.jsx("div",{className:"p-4 border-b border-gray-200",children:vs.jsxs("div",{className:"flex items-center space-x-3",children:[vs.jsx(NF,{groupName:e.groupName||"Group",groupJid:e.groupJid,connectionId:e.channelId,conversationId:e.id,groupMetadata:e.groupMetadata,size:"lg",showRefreshButton:!0}),vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsx("h3",{className:"text-lg font-semibold truncate",children:e.groupName||u("groups.unnamed_group","Unnamed Group")}),vs.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[vs.jsx(fj,{className:"h-4 w-4 mr-1"}),e.groupParticipantCount||x.length," ",u("groups.participants","participants")]})]})]})}),vs.jsxs("div",{className:"p-4 space-y-4",children:[e.groupDescription&&vs.jsxs("div",{children:[vs.jsx("h4",{className:"text-sm font-medium mb-2",children:u("groups.description","Description")}),vs.jsx("p",{className:"text-sm text-muted-foreground",children:e.groupDescription})]}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("span",{className:"text-sm font-medium",children:u("groups.group_id","Group ID")}),vs.jsx("span",{className:"text-sm text-muted-foreground font-mono",children:null==(r=e.groupJid)?void 0:r.split("@")[0]})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("span",{className:"text-sm font-medium",children:u("groups.created_date","Created")}),vs.jsx("span",{className:"text-sm text-muted-foreground",children:(I=e.groupCreatedAt,I?new Date(I).toLocaleDateString():u("common.unknown","Unknown"))})]})]}),vs.jsx(R$,{}),vs.jsx("div",{className:"space-y-2",children:vs.jsxs(lk,{variant:"outline",size:"sm",className:"w-full text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",onClick:()=>d(!0),children:[vs.jsx(Zw,{className:"h-4 w-4 mr-2"}),u("clear_history.button","Clear Chat History")]})}),vs.jsx(R$,{}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center justify-between mb-3",children:[vs.jsxs("h4",{className:"text-sm font-medium flex items-center",children:[vs.jsx(fj,{className:"h-4 w-4 mr-2"}),u("groups.participants","Participants")," (",C.length,")"]}),vs.jsx(lk,{variant:"ghost",size:"sm",onClick:()=>{N()},disabled:j,className:"h-8 w-8 p-0",children:vs.jsx(Lw,{className:fN("h-4 w-4",j&&"animate-spin")})})]}),vs.jsx(CY,{className:"max-h-64",children:vs.jsx("div",{className:"space-y-2",children:S.map((t=>vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-muted/50 cursor-pointer transition-colors group",onClick:()=>_(t),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),_(t))},children:[vs.jsx(pW,{participantJid:t.id,participantName:t.displayName,connectionId:e.channelId,avatarUrl:t.avatarUrl,size:"sm",enableAutoFetch:!1}),vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx("span",{className:"text-sm font-medium truncate",children:t.displayName}),t.isSuperAdmin&&vs.jsxs(dk,{variant:"destructive",className:"text-[10px] px-1.5 py-0.5 h-5",children:[vs.jsx(Gb,{className:"h-2.5 w-2.5 mr-1"}),u("groups.super_admin","Group Admin")]}),t.isAdmin&&!t.isSuperAdmin&&vs.jsxs(dk,{variant:"secondary",className:"text-[10px] px-1.5 py-0.5 h-5",children:[vs.jsx(Uw,{className:"h-2.5 w-2.5 mr-1"}),u("groups.admin","Admin")]})]}),vs.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[vs.jsx(Mw,{className:"h-3 w-3 mr-1"}),g(t.phone||"")]})]}),vs.jsx("div",{className:"flex items-center space-x-2",children:o===t.id?vs.jsx(uw,{className:"h-4 w-4 animate-spin text-muted-foreground"}):vs.jsx(yw,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})})]})}),vs.jsx(ek,{children:vs.jsx("p",{children:u("groups.start_private_chat","Click to start private conversation with {{name}}",{name:t.displayName})})})]})},t.id)))})}),k&&vs.jsx(lk,{variant:"ghost",size:"sm",className:"w-full mt-2",onClick:()=>i(!s),children:s?vs.jsxs(vs.Fragment,{children:[vs.jsx(Ab,{className:"h-4 w-4 mr-2"}),u("groups.show_less","Show Less")]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Mb,{className:"h-4 w-4 mr-2"}),u("groups.show_more","Show More")," (",C.length-5,")"]})})]})]}),vs.jsx(z$,{isOpen:c,onClose:()=>d(!1),conversationId:e.id,conversationName:e.groupName||u("groups.unnamed_group","Unnamed Group"),isGroupChat:!0,onSuccess:()=>{}})]});var I}SY.displayName=K$.displayName;const MY=({connectionId:e,status:t,onStatusChange:n,onReconnectClick:a,diagnostics:r,showDiagnostics:s=!1})=>{var i;const[o,l]=cs.useState(!1),[c,d]=cs.useState(!1),[u,f]=cs.useState(0),[m,p]=cs.useState(null);cs.useEffect((()=>{"reconnecting"===t?(f((e=>e+1)),p(new Date)):"connected"===t||"active"===t?(f(0),l(!1),d(!1)):"disconnected"===t&&(l(!1),d(!1))}),[t]);const h=(null==(i=null==t?void 0:t.toLowerCase())?void 0:i.trim())||"unknown",g="connected"===h||"active"===h,x=a&&["error","disconnected","failed","timeout","logged_out","inactive","unknown","offline","closed","qr_code"].includes(h)&&!o,y=a&&g&&!c&&!o;return(()=>{var e;switch((null==(e=null==t?void 0:t.toLowerCase())?void 0:e.trim())||"unknown"){case"connected":case"active":return{icon:Db,color:"text-green-600",bgColor:"bg-green-100",label:"Connected",description:"WhatsApp connection is active and ready"};case"connecting":return{icon:uw,color:"text-blue-600",bgColor:"bg-blue-100",label:"Connecting",description:"Establishing WhatsApp connection..."};case"reconnecting":return{icon:Lw,color:"text-yellow-600",bgColor:"bg-yellow-100",label:"Reconnecting",description:`Reconnecting... (Attempt ${u})`};case"qr_code":return{icon:Bb,color:"text-purple-600",bgColor:"bg-purple-100",label:"QR Code",description:"Waiting for QR code scan"};case"error":case"failed":case"timeout":return{icon:nj,color:"text-red-600",bgColor:"bg-red-100",label:"Error",description:"Connection failed - click to retry"};case"disconnected":case"logged_out":case"inactive":return{icon:hj,color:"text-gray-600",bgColor:"bg-gray-100",label:"Disconnected",description:"WhatsApp connection is offline"};default:return{icon:hj,color:"text-orange-600",bgColor:"bg-orange-100",label:"Unknown",description:"Connection status unknown - click reconnect to restore connection"}}})().icon,vs.jsx(JS,{children:vs.jsxs("div",{className:"flex items-center gap-2",children:[y&&vs.jsx(lk,{onClick:async()=>{if(e&&!c&&!o){d(!0);try{const t=await fetch(`/api/whatsapp/disconnect/${e}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to disconnect WhatsApp")}zy({title:"Disconnection successful",description:"Your WhatsApp connection has been disconnected."}),n&&n("disconnected")}catch(t){zy({title:"Disconnection failed",description:t instanceof Error?t.message:"Unknown error occurred",variant:"destructive"}),d(!1)}}},disabled:c,size:"sm",variant:"outline",className:"h-7 px-2 text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",children:c?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"h-3 w-3 mr-1 animate-spin"}),vs.jsx("span",{className:"text-xs",children:"Disconnecting..."})]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Aw,{className:"h-3 w-3 mr-1"}),vs.jsx("span",{className:"text-xs",children:"Disconnect"})]})}),x&&vs.jsx(lk,{onClick:async()=>{if(e&&!o&&!c)if(a)a();else{l(!0),f((e=>e+1)),p(new Date);try{const t=await fetch(`/api/channel-connections/${e}/reconnect`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reconnect WhatsApp")}zy({title:"Reconnection initiated",description:`Attempting to reconnect your WhatsApp connection... (Attempt ${u+1})`}),n&&n("reconnecting")}catch(t){zy({title:"Reconnection failed",description:t instanceof Error?t.message:"Unknown error occurred",variant:"destructive"}),l(!1)}}},disabled:o,size:"sm",variant:"outline",className:"h-7 px-2 text-green-600 hover:text-green-700 hover:bg-green-50 border-green-200",children:o?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"h-3 w-3 mr-1 animate-spin"}),vs.jsx("span",{className:"text-xs",children:"Reconnecting..."})]}):"qr_code"===h?vs.jsxs(vs.Fragment,{children:[vs.jsx(Lw,{className:"h-3 w-3 mr-1"}),vs.jsx("span",{className:"text-xs",children:"Rescan QR"})]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Ew,{className:"h-3 w-3 mr-1"}),vs.jsx("span",{className:"text-xs",children:"Reconnect"})]})}),r&&s&&vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs(dk,{variant:r.healthScore>70?"default":r.healthScore>40?"secondary":"destructive",className:"text-xs",children:[r.healthScore,"%"]})}),vs.jsx(ek,{children:vs.jsxs("div",{className:"text-sm",children:[vs.jsx("p",{className:"font-medium",children:"Connection Health"}),vs.jsxs("p",{className:"text-xs text-muted-foreground",children:["Score: ",r.healthScore,"/100"]}),vs.jsxs("p",{className:"text-xs text-muted-foreground",children:["Errors: ",r.errorCount]}),r.lastError&&vs.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Last Error: ",r.lastError]})]})})]})]})})};function _Y(){var e;const{activeConversationId:t,messages:n,messagesPagination:a,loadMoreMessages:r,setReplyToMessage:s}=cR(),{t:i}=mk(),o=cs.useRef(null),l=cs.useRef(null),[c,d]=cs.useState(!0),[u,f]=cs.useState(0),[m,p]=cs.useState("unknown"),[h,g]=cs.useState(null),[x,y]=cs.useState(!1),[v,b]=cs.useState(null),[w,j]=cs.useState(!1),{isMobile:N,isTablet:C,isContactDetailsOpen:S,toggleConversationList:k,toggleContactDetails:M}=cW(),{data:_,isLoading:I}=Sy({queryKey:["/api/conversations",t],enabled:!!t,queryFn:async({queryKey:e})=>{const t=e[1],n=await fetch(`/api/conversations/${t}`);if(!n.ok)throw new Error("Failed to fetch conversation");return n.json()}}),A="whatsapp"===(null==_?void 0:_.channelType)||"whatsapp_unofficial"===(null==_?void 0:_.channelType)||"whatsapp_official"===(null==_?void 0:_.channelType)||"whatsapp_twilio"===(null==_?void 0:_.channelType)||"whatsapp_360dialog"===(null==_?void 0:_.channelType),{data:E}=Sy({queryKey:["/api/whatsapp/status",null==_?void 0:_.channelId],enabled:!!(null==_?void 0:_.channelId)&&A,queryFn:async({queryKey:e})=>{const t=e[1],n=await fetch(`/api/whatsapp/status/${t}`);if(!n.ok)throw new Error("Failed to fetch WhatsApp status");return n.json()},refetchInterval:3e4}),{isBotDisabled:L}=uW(t);cs.useEffect((()=>{E&&E.status&&p(E.status)}),[E]);const T=t&&n[t]||[];cs.useEffect((()=>{const e=l.current;if(!e)return;const n=()=>{const{scrollTop:n,scrollHeight:s,clientHeight:i}=e,o=s-n-i<100,l=n<100;if(c!==o&&d(o),l&&t&&!x){const i=a[t];if(i&&i.hasMore&&!i.loading){y(!0);const a=s;r(t).then((()=>{setTimeout((()=>{const t=e.scrollHeight-a;e.scrollTop=n+t,y(!1)}),100)})).catch((()=>{y(!1)}))}}};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}),[c,t,a,r,x]),cs.useEffect((()=>{t!==v&&(f(0),d(!0),j(!0),g(null),b(t))}),[t,v]),cs.useEffect((()=>{_&&g(_.assignedToUserId||null)}),[_]),cs.useEffect((()=>{if(w&&o.current){const e=setTimeout((()=>{o.current&&(o.current.scrollIntoView({behavior:"smooth"}),j(!1),d(!0))}),T.length>0?150:300);return()=>clearTimeout(e)}}),[T,w]),cs.useEffect((()=>{const e=T.length;e>u&&c&&!w&&o.current&&o.current.scrollIntoView({behavior:"smooth"}),f(e)}),[T,u,c,w]);const D=e=>{s(e)},P=e=>{const t=document.querySelector(`[data-external-id="${e}"]`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("highlighted-message"),setTimeout((()=>{t.classList.remove("highlighted-message")}),2e3))};if(!t)return vs.jsxs("div",{className:"flex-1 flex flex-col bg-gray-50",children:[N&&vs.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 flex items-center justify-between px-3 py-3",style:{position:"sticky",top:0,zIndex:10},children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("button",{onClick:k,className:"p-2 rounded-md hover:bg-gray-100 mr-2 min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":i("inbox.show_conversations","Show conversations"),children:vs.jsx("i",{className:"ri-menu-line text-lg text-gray-600"})}),vs.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:i("inbox.conversations","Conversations")})]})}),vs.jsx("div",{className:"flex-1 flex items-center justify-center",children:vs.jsxs("div",{className:"text-center p-8",children:[vs.jsx("div",{className:"mb-4 text-primary-500",children:vs.jsx("i",{className:"ri-chat-3-line text-6xl"})}),vs.jsx("h2",{className:"text-2xl text-gray-800 mb-2",children:i("inbox.no_conversation_selected","No Conversation Selected")}),vs.jsx("p",{className:"text-gray-600 mb-4",children:i("inbox.select_conversation_hint","Select a conversation from the list to view messages")}),N&&vs.jsx("button",{onClick:k,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:i("inbox.show_conversations","Show conversations")})]})})]});if(I)return vs.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:vs.jsxs("div",{className:"animate-pulse space-y-4",children:[vs.jsx("div",{className:"h-8 bg-gray-200 rounded w-64"}),vs.jsx("div",{className:"h-32 bg-gray-200 rounded w-96"}),vs.jsx("div",{className:"h-8 bg-gray-200 rounded w-48"})]})});const O=null==_?void 0:_.contact,R=(e=>{switch(e){case"whatsapp":case"whatsapp_unofficial":return{icon:"ri-whatsapp-line",color:"#25D366",name:i("conversations.view.channel.whatsapp","WhatsApp")};case"whatsapp_official":return{icon:"ri-whatsapp-line",color:"#25D366",name:i("conversations.view.channel.whatsapp_business","WhatsApp Business")};case"whatsapp_twilio":return{icon:"ri-whatsapp-line",color:"#25D366",name:i("conversations.view.channel.whatsapp_twilio","WhatsApp Business (Twilio)")};case"whatsapp_360dialog":return{icon:"ri-whatsapp-line",color:"#25D366",name:i("conversations.view.channel.whatsapp_360dialog","WhatsApp Business (360Dialog)")};case"facebook":return{icon:"ri-messenger-line",color:"#1877F2",name:i("conversations.view.channel.messenger","Messenger")};case"instagram":return{icon:"ri-instagram-line",color:"#E4405F",name:i("conversations.view.channel.instagram","Instagram")};case"email":return{icon:"ri-mail-line",color:"#333235",name:i("conversations.view.channel.email","Email")};case"sms":return{icon:"ri-message-2-line",color:"#10B981",name:i("conversations.view.channel.sms","SMS")};case"webapp":return{icon:"ri-global-line",color:"#8B5CF6",name:i("conversations.view.channel.web_chat","Web Chat")};default:return{icon:"ri-chat-1-line",color:"#333235",name:i("conversations.view.channel.chat","Chat")}}})(null==_?void 0:_.channelType);return vs.jsxs("div",{className:"flex-1 flex flex-col bg-gray-50 overflow-hidden h-full",children:[vs.jsxs("div",{className:"top-0  bg-white border-b border-gray-200 flex items-center justify-between px-3 sm:px-4 py-3",style:{position:"sticky"},children:[vs.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[N&&vs.jsx("button",{onClick:k,className:"p-2 rounded-md hover:bg-gray-100 mr-2 min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":i("inbox.show_conversations","Show conversations"),children:vs.jsx("i",{className:"ri-menu-line text-lg text-gray-600"})}),vs.jsxs("div",{className:"relative flex-shrink-0",children:[(null==_?void 0:_.isGroup)?vs.jsx(NF,{groupName:_.groupName||"Group",groupJid:_.groupJid,connectionId:_.channelId,conversationId:_.id,groupMetadata:_.groupMetadata,size:"md",showRefreshButton:A&&"active"===m}):O?vs.jsx(jF,{contact:O,connectionId:_.channelId,size:"md",showRefreshButton:A&&"active"===m}):vs.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200"}),!(null==_?void 0:_.isGroup)&&vs.jsx("span",{className:`absolute bottom-0 right-0 block h-2.5 w-2.5 rounded-full ${(null==O?void 0:O.isActive)?"bg-green-500":"bg-gray-300"} border-2 border-white`})]}),vs.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[vs.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[vs.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:(null==_?void 0:_.isGroup)?_.groupName||i("groups.unnamed_group","Unnamed Group"):null==O?void 0:O.name}),"open"===(null==_?void 0:_.status)&&!h&&vs.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-800 whitespace-nowrap",children:i("inbox.new_lead","New Lead")}),t&&!N&&vs.jsx(CF,{conversationId:t,currentAssignedUserId:h,onAssignmentChange:g,variant:"badge",size:"sm"})]}),vs.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-500 mt-1",children:[vs.jsxs("span",{className:"flex items-center",children:[vs.jsx("i",{className:R.icon+" mr-1",style:{color:R.color}}),vs.jsx("span",{className:"truncate",children:R.name})]}),(null==_?void 0:_.isGroup)&&vs.jsxs(vs.Fragment,{children:[vs.jsx("span",{className:"mx-2",children:"•"}),vs.jsxs("span",{className:"truncate",children:[_.groupParticipantCount||0," ",i("groups.participants","participants")]})]}),vs.jsx("span",{className:"mx-2 hidden sm:inline",children:"•"}),vs.jsx("span",{className:"hidden sm:inline truncate",children:i("inbox.last_active_time","Last active 10 min ago")}),L&&vs.jsxs(vs.Fragment,{children:[vs.jsx("span",{className:"mx-2",children:"•"}),vs.jsxs("span",{className:"inline-flex items-center text-gray-500",children:[vs.jsx(IF,{className:"mr-1 opacity-50",size:12,color:"#6b7280"}),vs.jsx("span",{className:"text-xs",children:i("conversations.bot_disabled","Bot disabled")})]})]})]})]})]}),vs.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 ml-2",children:[A&&(null==_?void 0:_.channelId)&&vs.jsx(MY,{connectionId:_.channelId,status:m,onStatusChange:p}),vs.jsx("button",{onClick:M,className:"p-2 sm:p-1.5 rounded-md hover:bg-gray-100 min-h-[44px] min-w-[44px] sm:min-h-auto sm:min-w-auto flex items-center justify-center "+(S?"bg-primary-50 text-primary-600":"text-gray-600"),"aria-label":S?i("contacts.details.close_details","Close contact details"):i("contacts.details.show_details","Show contact details"),children:vs.jsx("i",{className:"ri-information-line text-lg sm:text-base"})}),vs.jsx("button",{className:"p-2 sm:p-1.5 rounded-md hover:bg-gray-100 min-h-[44px] min-w-[44px] sm:min-h-auto sm:min-w-auto flex items-center justify-center hidden sm:flex","aria-label":i("conversations.view.start_call","Start Call"),children:vs.jsx("i",{className:"ri-phone-line text-gray-600"})}),vs.jsx("button",{className:"p-2 sm:p-1.5 rounded-md hover:bg-gray-100 min-h-[44px] min-w-[44px] sm:min-h-auto sm:min-w-auto flex items-center justify-center hidden sm:flex","aria-label":i("conversations.view.schedule","Schedule"),children:vs.jsx("i",{className:"ri-calendar-line text-gray-600"})}),vs.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),M()},className:"p-2 sm:p-1.5 rounded-md hover:bg-gray-100 min-h-[44px] min-w-[44px] sm:min-h-auto sm:min-w-auto flex items-center justify-center transition-colors duration-200 "+(S?"bg-primary-50 text-primary-600":"text-gray-600"),"aria-label":S?i("contacts.details.close_details","Close contact details"):i("contacts.details.show_details","Show contact details"),children:vs.jsx("i",{className:"ri-more-2-fill transition-transform duration-200 "+(S?"rotate-90":"")})})]})]}),vs.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[vs.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:[vs.jsxs("div",{ref:l,className:"flex-1 p-4 overflow-y-auto scroll-smooth",id:"conversation-messages",children:[t&&(null==(e=a[t])?void 0:e.loading)&&vs.jsx("div",{className:"flex justify-center mb-4",children:vs.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 bg-gray-100 px-3 py-2 rounded-full",children:[vs.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-500"}),i("inbox.loading_messages","Loading more messages...")]})}),vs.jsx("div",{className:"flex justify-center mb-4",children:vs.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-full",children:i("common.today","Today")})}),vs.jsx("div",{className:"flex justify-center mb-4",children:vs.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:i("inbox.conversation_started_via","Conversation started via {{channel}}",{channel:R.name})})}),T.filter(((e,t,n)=>{if(!(t===n.findIndex((t=>t.id===e.id))))return!1;if("outbound"===e.direction){const t=n.filter((t=>t.id!==e.id&&t.content===e.content&&"outbound"===t.direction&&Math.abs(new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())<3e4));if(t.length>0){const n=[e,...t].sort(((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())),a=n.filter((e=>e.externalId&&null!==e.externalId));return a.length>0?e.id===a[0].id:e.id===n[0].id}}return!0})).map((e=>vs.jsx(hW,{message:e,contact:O,channelType:null==_?void 0:_.channelType,onReply:D,onQuotedMessageClick:P,conversation:_},e.id))),vs.jsx("div",{ref:o})]}),!c&&T.length>5&&vs.jsx("button",{onClick:()=>{o.current&&(o.current.scrollIntoView({behavior:"smooth"}),d(!0))},className:"absolute top-30 right-5 w-10 h-10 bg-brand-primary rounded-full shadow-md text-white flex items-center justify-center hover:bg-primary-600 transition-all z-10","aria-label":i("inbox.scroll_to_bottom","Scroll to bottom"),children:vs.jsx("i",{className:"ri-arrow-down-s-line text-lg text-white"})}),vs.jsx(L$,{conversationId:t})]}),(null==_?void 0:_.isGroup)?vs.jsx(kY,{conversation:_,className:(S?"flex":"hidden")+" flex-col fixed top-0 right-0 h-full z-50 lg:static lg:z-0 w-full max-w-sm sm:max-w-md lg:w-80 bg-white border-l border-gray-200 shadow-lg lg:shadow-none transition-all duration-300 ease-in-out overflow-y-auto"}):vs.jsx(B$,{contact:O,conversation:_,className:(S?"flex":"hidden")+" flex-col fixed top-0 right-0 h-full z-50 lg:static lg:z-0 w-full max-w-sm sm:max-w-md lg:w-80 bg-white border-l border-gray-200 shadow-lg lg:shadow-none transition-all duration-300 ease-in-out overflow-y-auto"})]})]})}function IY(){const{conversations:e,activeConversationId:t,setActiveConversationId:n,setActiveChannelId:a,activeChannelId:r}=cR(),{isMobile:s,isTablet:i,isDesktop:o,isConversationListOpen:l,isContactDetailsOpen:c,closeAllPanels:d}=cW(),u=vy();return cs.useEffect((()=>{u.invalidateQueries({queryKey:["/api/conversations"]}),u.invalidateQueries({queryKey:["/api/contacts"]})}),[u]),cs.useEffect((()=>{const t=localStorage.getItem("selectedContactId"),a=localStorage.getItem("selectedChannelType");if(t&&a){const r=e.find((e=>e.contactId===parseInt(t)&&e.channelType===a));r&&n(r.id),localStorage.removeItem("selectedContactId"),localStorage.removeItem("selectedChannelType")}}),[e,n]),vs.jsxs("div",{className:"h-screen flex flex-col overflow-hidden font-sans text-gray-800",children:[vs.jsx(uR,{}),vs.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[vs.jsx("div",{className:""+(s?"hidden":"flex"),children:vs.jsx(yR,{})}),vs.jsx("div",{className:`\n          ${s?"fixed inset-y-0 left-0 z-50 transform transition-transform duration-300 ease-in-out "+(l?"translate-x-0":"-translate-x-full"):i?""+(l?"flex":"hidden"):"flex"}\n        `,children:vs.jsx(dW,{})}),vs.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:vs.jsx(_Y,{})}),s&&(l||c)&&vs.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30",onClick:e=>{e.stopPropagation(),d()}})]})]})}function AY(){return vs.jsx(lW,{children:vs.jsx(IY,{})})}const EY=cs.forwardRef((({className:e,...t},n)=>vs.jsx("div",{className:"relative w-full overflow-auto",children:vs.jsx("table",{ref:n,className:fN("w-full caption-bottom text-sm",e),...t})})));EY.displayName="Table";const LY=cs.forwardRef((({className:e,...t},n)=>vs.jsx("thead",{ref:n,className:fN("[&_tr]:border-b",e),...t})));LY.displayName="TableHeader";const TY=cs.forwardRef((({className:e,...t},n)=>vs.jsx("tbody",{ref:n,className:fN("[&_tr:last-child]:border-0",e),...t})));TY.displayName="TableBody";cs.forwardRef((({className:e,...t},n)=>vs.jsx("tfoot",{ref:n,className:fN("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}))).displayName="TableFooter";const DY=cs.forwardRef((({className:e,...t},n)=>vs.jsx("tr",{ref:n,className:fN("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t})));DY.displayName="TableRow";const PY=cs.forwardRef((({className:e,...t},n)=>vs.jsx("th",{ref:n,className:fN("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t})));PY.displayName="TableHead";const OY=cs.forwardRef((({className:e,...t},n)=>vs.jsx("td",{ref:n,className:fN("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t})));OY.displayName="TableCell";function RY({flowId:e,flowName:t}){const{toast:n}=Fy(),{t:a}=mk(),[r,s]=cs.useState(!1),{data:i,isLoading:o}=Sy({queryKey:["/api/channels"],queryFn:async()=>{const e=await fetch("/api/channels");if(!e.ok)throw new Error("Failed to load channels");return e.json()},enabled:r}),{data:l,isLoading:c}=Sy({queryKey:["/api/flow-assignments",{flowId:e}],queryFn:async()=>{const t=await fetch(`/api/flow-assignments?flowId=${e}`);if(!t.ok)throw new Error("Failed to load assignments");return t.json()},enabled:r}),d=ky({mutationFn:async e=>(await _y("POST","/api/flow-assignments",e)).json(),onSuccess:()=>{Ay.invalidateQueries({queryKey:["/api/flow-assignments"]}),n({title:a("flows.flow_assigned","Flow assigned"),description:a("flows.flow_assigned_success","Flow has been assigned to channel successfully.")})},onError:e=>{n({title:a("flows.error_assigning_flow","Error assigning flow"),description:e.message||a("common.something_went_wrong","Something went wrong"),variant:"destructive"})}}),u=ky({mutationFn:async({id:e,isActive:t})=>(await _y("PATCH",`/api/flow-assignments/${e}/status`,{isActive:t})).json(),onSuccess:()=>{Ay.invalidateQueries({queryKey:["/api/flow-assignments"]}),n({title:a("flows.assignment_updated","Assignment updated"),description:a("flows.assignment_updated_success","Flow assignment status has been updated.")})},onError:e=>{n({title:a("flows.error_updating_assignment","Error updating assignment"),description:e.message||a("common.something_went_wrong","Something went wrong"),variant:"destructive"})}}),f=e=>{const t=null==i?void 0:i.find((t=>t.id===e));return t?`${t.accountName} (${t.channelType})`:"Unknown channel"};return vs.jsxs(yB,{open:r,onOpenChange:s,children:[vs.jsx(vB,{asChild:!0,children:vs.jsxs(lk,{variant:"outline",size:"sm",children:[vs.jsx(Nb,{className:"h-4 w-4 mr-2"}),a("flows.assign","Assign")]})}),vs.jsxs(NB,{className:"sm:max-w-[500px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:a("flows.manage_flow_assignments","Manage Flow Assignments")}),vs.jsx(MB,{children:a("flows.assign_flow_description",'Assign "{{flowName}}" to channels and manage active assignments.',{flowName:t})})]}),o||c?vs.jsx("div",{className:"flex justify-center p-4",children:vs.jsx(uw,{className:"h-6 w-6 animate-spin text-primary"})}):vs.jsxs("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:[vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-sm font-medium mb-2",children:a("flows.active_assignments","Active Assignments")}),l&&l.length>0?vs.jsxs(EY,{children:[vs.jsx(LY,{children:vs.jsxs(DY,{children:[vs.jsx(PY,{children:a("flows.channel","Channel")}),vs.jsx(PY,{children:a("flows.status","Status")}),vs.jsx(PY,{children:a("flows.actions","Actions")})]})}),vs.jsx(TY,{children:l.map((e=>vs.jsxs(DY,{children:[vs.jsx(OY,{children:f(e.channelId)}),vs.jsx(OY,{children:vs.jsx(dk,{variant:e.isActive?"default":"outline",children:e.isActive?a("flows.active","Active"):a("flows.inactive","Inactive")})}),vs.jsx(OY,{children:vs.jsx(lk,{variant:"ghost",size:"sm",onClick:()=>(async(e,t)=>{try{await u.mutateAsync({id:e,isActive:t})}catch(n){}})(e.id,!e.isActive),children:e.isActive?a("flows.deactivate","Deactivate"):a("flows.activate","Activate")})})]},e.id)))})]}):vs.jsx("p",{className:"text-sm text-muted-foreground",children:a("flows.no_assignments_yet","No assignments yet")})]}),vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-sm font-medium mb-2",children:a("flows.available_channels","Available Channels")}),i&&i.length>0?vs.jsx("div",{className:"grid gap-2",children:i.filter((e=>!l||!l.some((t=>t.channelId===e.id)))).map((t=>vs.jsxs("div",{className:"flex justify-between items-center p-2 border rounded-md",children:[vs.jsxs("div",{className:"text-sm",children:[t.accountName," ",vs.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.channelType,")"]})]}),vs.jsx(lk,{variant:"brand",size:"sm",onClick:()=>(async t=>{try{await d.mutateAsync({flowId:e,channelId:t,isActive:!1})}catch(n){}})(t.id),children:a("flows.assign","Assign")})]},t.id)))}):vs.jsx("p",{className:"text-sm text-muted-foreground",children:a("flows.no_channels_available","No channels available")})]})]}),vs.jsx(SB,{children:vs.jsx(wB,{asChild:!0,children:vs.jsx(lk,{variant:"brand",children:a("common.close","Close")})})})]})]})}function zY({flowId:e,flowName:t,onDeleted:n}){const{toast:a}=Fy(),{t:r}=mk(),[s,i]=cs.useState(!1),o=ky({mutationFn:async e=>{await _y("DELETE",`/api/flows/${e}`)},onSuccess:()=>{Ay.invalidateQueries({queryKey:["/api/flows"]}),a({title:r("flows.flow_deleted","Flow deleted"),description:r("flows.flow_deleted_success","Flow has been deleted successfully.")}),n()},onError:e=>{a({title:r("flows.error_deleting_flow","Error deleting flow"),description:e.message||r("common.something_went_wrong","Something went wrong"),variant:"destructive"})}});return vs.jsxs(yB,{children:[vs.jsx(vB,{asChild:!0,children:vs.jsxs(lk,{variant:"outline",size:"sm",className:"bg-destructive text-destructive-foreground",children:[vs.jsx(Zw,{className:"h-4 w-4 mr-2"}),r("common.delete","Delete")]})}),vs.jsxs(NB,{children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:r("flows.delete_flow","Delete Flow")}),vs.jsx(MB,{children:r("flows.delete_flow_confirmation",'Are you sure you want to delete "{{flowName}}"? This action cannot be undone.',{flowName:t})})]}),vs.jsxs(SB,{className:"gap-2 sm:gap-0",children:[vs.jsx(wB,{asChild:!0,children:vs.jsx(lk,{variant:"brand",children:r("common.cancel","Cancel")})}),vs.jsxs(lk,{variant:"destructive",onClick:async()=>{i(!0);try{await o.mutateAsync(e)}finally{i(!1)}},disabled:s,children:[s&&vs.jsx(uw,{className:"h-4 w-4 mr-2 animate-spin"}),r("common.delete","Delete")]})]})]})]})}function FY(){const{toast:e}=Fy(),{t:t}=mk(),[n,a]=cs.useState("desc"),{data:r,isLoading:s}=Sy({queryKey:["/api/flows"],queryFn:async()=>{const e=await fetch("/api/flows");if(!e.ok)throw new Error("Failed to load flows");return e.json()}}),{data:i}=Sy({queryKey:["/api/user/plan-info"],queryFn:async()=>{try{const e=await fetch("/api/user/plan-info");return e.ok?e.json():null}catch(e){return null}}}),o=ky({mutationFn:async e=>{const t=await fetch(`/api/flows/${e}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to duplicate flow")}return t.json()},onSuccess:n=>{Ay.invalidateQueries({queryKey:["/api/flows"]}),Ay.invalidateQueries({queryKey:["/api/user/plan-info"]}),e({title:t("flows.flow_duplicated","Flow duplicated"),description:t("flows.flow_duplicated_description",'Flow "{{flowName}}" has been duplicated successfully.',{flowName:n.name})})},onError:n=>{e({title:t("flows.duplicate_failed","Duplication failed"),description:n.message||t("flows.duplicate_error","Failed to duplicate flow. Please try again."),variant:"destructive"})}}),l=r?[...r].sort(((e,t)=>{const a=new Date(e.updatedAt),r=new Date(t.updatedAt);return"desc"===n?r.getTime()-a.getTime():a.getTime()-r.getTime()})):[],c=e=>{try{return Dz(new Date(e),"MMM d, yyyy h:mm a")}catch(t){return"Invalid date"}},d=e=>{switch(e){case"active":return vs.jsx(dk,{className:"bg-green-500",children:t("flows.active","Active")});case"inactive":return vs.jsx(dk,{variant:"secondary",children:t("flows.inactive","Inactive")});case"draft":return vs.jsx(dk,{variant:"secondary",children:t("flows.draft","Draft")});case"archived":return vs.jsx(dk,{variant:"destructive",children:t("flows.archived","Archived")});default:return vs.jsx(dk,{variant:"default",children:e})}};return vs.jsxs("div",{className:"h-screen flex flex-col overflow-hidden font-sans text-gray-800",children:[vs.jsx(uR,{}),vs.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[vs.jsx(yR,{}),vs.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{className:"flex justify-between items-center",children:[vs.jsxs("div",{children:[vs.jsx("h1",{className:"text-2xl",children:t("nav.flow_builder","Flow Builder")}),vs.jsx("p",{className:"text-muted-foreground",children:t("flows.page_description","Create and manage automated conversation flows for your channels.")}),i&&vs.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[vs.jsxs("div",{className:"bg-muted px-2 py-1 rounded-md flex items-center",children:[vs.jsxs("span",{className:"text-muted-foreground",children:[vs.jsx("span",{className:0===i.remainingFlows?"text-destructive font-medium":"font-medium",children:i.currentFlowCount})," / ",i.plan.maxFlows," ",t("flows.flows","flows")]}),0===i.remainingFlows&&vs.jsx("span",{className:"ml-2 text-destructive font-medium bg-destructive/10 px-2 py-0.5 rounded-full text-xs",children:t("flows.limit_reached","Limit reached")})]}),0===i.remainingFlows&&vs.jsx("span",{className:"text-muted-foreground text-xs",children:t("flows.contact_admin_upgrade","Contact your administrator to upgrade your plan")})]})]}),vs.jsx("div",{className:"flex items-center gap-2",children:i&&0===i.remainingFlows?vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs(lk,{disabled:!0,children:[vs.jsx(Iw,{className:"h-4 w-4 mr-2"}),t("flows.new_flow","New Flow")]})}),vs.jsx(ek,{children:vs.jsx("p",{children:t("flows.plan_limit_tooltip","You've reached your plan's flow limit")})})]})}):vs.jsx(yx,{href:"/flows/new",children:vs.jsxs(lk,{className:"flex items-center gap-2",children:[vs.jsx(Iw,{className:"h-4 w-4"}),t("flows.new_flow","New Flow")]})})})]}),s?vs.jsx("div",{className:"flex items-center justify-center h-64",children:vs.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):vs.jsx("div",{className:"grid gap-4",children:0===l.length?vs.jsx(tk,{children:vs.jsxs(sk,{className:"flex flex-col items-center justify-center py-12",children:[vs.jsx(Jb,{className:"h-12 w-12 text-muted-foreground mb-4"}),vs.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("flows.no_flows_found","No flows found")}),vs.jsx("p",{className:"text-muted-foreground text-center mb-4",children:t("flows.get_started_message","Get started by creating your first automated conversation flow")}),vs.jsx(yx,{href:"/flows/new",children:vs.jsxs(lk,{children:[vs.jsx(Iw,{className:"h-4 w-4 mr-2"}),t("flows.new_flow","New Flow")]})})]})}):l.map((e=>vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsxs("div",{className:"flex justify-between items-start",children:[vs.jsxs("div",{className:"space-y-1",children:[vs.jsxs(ak,{className:"flex items-center gap-2",children:[e.name,d(e.status)]}),e.description&&vs.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(yx,{href:`/flows/${e.id}`,children:vs.jsxs(lk,{variant:"outline",size:"sm",children:[vs.jsx(Hw,{className:"h-4 w-4 mr-2"}),t("common.edit","Edit")]})}),vs.jsx(RY,{flowId:e.id,flowName:e.name}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs(lk,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,void o.mutate(t);var t},disabled:o.isPending,children:[o.isPending?vs.jsx(uw,{className:"h-4 w-4 mr-2 animate-spin"}):vs.jsx(Ub,{className:"h-4 w-4 mr-2"}),t("flows.duplicate","Duplicate")]})}),vs.jsx(ek,{children:vs.jsx("p",{children:t("flows.duplicate_tooltip","Create a copy of this flow")})})]})}),vs.jsx(zY,{flowId:e.id,flowName:e.name,onDeleted:()=>{window.location.reload()}})]})]})}),vs.jsx(sk,{children:vs.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[vs.jsxs("div",{children:[vs.jsx("p",{className:"text-muted-foreground",children:t("flows.status","Status")}),vs.jsx("p",{className:"font-medium",children:e.status})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-muted-foreground",children:t("flows.updated","Updated")}),vs.jsx("p",{className:"font-medium",children:c(e.updatedAt)})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-muted-foreground",children:t("flows.version","Version")}),vs.jsxs("p",{className:"font-medium",children:["v",e.version]})]})]})})]},e.id)))})]})})]})]})}function BY(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,a=0;a<e.length;a++)""!==(n=BY(e[a]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}cs.forwardRef((({className:e,...t},n)=>vs.jsx("caption",{ref:n,className:fN("mt-4 text-sm text-muted-foreground",e),...t}))).displayName="TableCaption";var UY={exports:{}},WY={},GY=cs,VY=Ug;var HY="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},qY=VY.useSyncExternalStore,$Y=GY.useRef,YY=GY.useEffect,QY=GY.useMemo,KY=GY.useDebugValue;WY.useSyncExternalStoreWithSelector=function(e,t,n,a,r){var s=$Y(null);if(null===s.current){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=QY((function(){function e(e){if(!l){if(l=!0,s=e,e=a(e),void 0!==r&&i.hasValue){var t=i.value;if(r(t,e))return o=t}return o=e}if(t=o,HY(s,e))return t;var n=a(e);return void 0!==r&&r(t,n)?(s=e,t):(s=e,o=n)}var s,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,a,r]);var o=qY(e,s[0],s[1]);return YY((function(){i.hasValue=!0,i.value=o}),[o]),KY(o),o},UY.exports=WY;const JY=Cr(UY.exports),ZY=e=>{let t;const n=new Set,a=(e,a)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach((n=>n(t,e)))}},r=()=>t,s={setState:a,getState:r,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{n.clear()}},i=t=e(a,r,s);return s},{useDebugValue:XY}=ds,{useSyncExternalStoreWithSelector:eQ}=JY,tQ=e=>e;function nQ(e,t=tQ,n){const a=eQ(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return XY(a),a}const aQ=(e,t)=>{const n=(e=>e?ZY(e):ZY)(e),a=(e,a=t)=>nQ(n,e,a);return Object.assign(a,n),a};function rQ(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const a of n)if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(e[a],t[a]))return!1;return!0}var sQ={value:()=>{}};function iQ(){for(var e,t=0,n=arguments.length,a={};t<n;++t){if(!(e=arguments[t]+"")||e in a||/[\s.]/.test(e))throw new Error("illegal type: "+e);a[e]=[]}return new oQ(a)}function oQ(e){this._=e}function lQ(e,t){for(var n,a=0,r=e.length;a<r;++a)if((n=e[a]).name===t)return n.value}function cQ(e,t,n){for(var a=0,r=e.length;a<r;++a)if(e[a].name===t){e[a]=sQ,e=e.slice(0,a).concat(e.slice(a+1));break}return null!=n&&e.push({name:t,value:n}),e}oQ.prototype=iQ.prototype={constructor:oQ,on:function(e,t){var n,a,r=this._,s=(a=r,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!a.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),i=-1,o=s.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=s[i]).type)r[n]=cQ(r[n],e.name,t);else if(null==t)for(n in r)r[n]=cQ(r[n],e.name,null);return this}for(;++i<o;)if((n=(e=s[i]).type)&&(n=lQ(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new oQ(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,a,r=new Array(n),s=0;s<n;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=0,n=(a=this._[e]).length;s<n;++s)a[s].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],r=0,s=a.length;r<s;++r)a[r].value.apply(t,n)}};var dQ="http://www.w3.org/1999/xhtml";const uQ={svg:"http://www.w3.org/2000/svg",xhtml:dQ,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fQ(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),uQ.hasOwnProperty(t)?{space:uQ[t],local:e}:e}function mQ(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===dQ&&t.documentElement.namespaceURI===dQ?t.createElement(e):t.createElementNS(n,e)}}function pQ(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hQ(e){var t=fQ(e);return(t.local?pQ:mQ)(t)}function gQ(){}function xQ(e){return null==e?gQ:function(){return this.querySelector(e)}}function yQ(){return[]}function vQ(e){return null==e?yQ:function(){return this.querySelectorAll(e)}}function bQ(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function wQ(e){return function(){return this.matches(e)}}function jQ(e){return function(t){return t.matches(e)}}var NQ=Array.prototype.find;function CQ(){return this.firstElementChild}var SQ=Array.prototype.filter;function kQ(){return Array.from(this.children)}function MQ(e){return new Array(e.length)}function _Q(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function IQ(e,t,n,a,r,s){for(var i,o=0,l=t.length,c=s.length;o<c;++o)(i=t[o])?(i.__data__=s[o],a[o]=i):n[o]=new _Q(e,s[o]);for(;o<l;++o)(i=t[o])&&(r[o]=i)}function AQ(e,t,n,a,r,s,i){var o,l,c,d=new Map,u=t.length,f=s.length,m=new Array(u);for(o=0;o<u;++o)(l=t[o])&&(m[o]=c=i.call(l,l.__data__,o,t)+"",d.has(c)?r[o]=l:d.set(c,l));for(o=0;o<f;++o)c=i.call(e,s[o],o,s)+"",(l=d.get(c))?(a[o]=l,l.__data__=s[o],d.delete(c)):n[o]=new _Q(e,s[o]);for(o=0;o<u;++o)(l=t[o])&&d.get(m[o])===l&&(r[o]=l)}function EQ(e){return e.__data__}function LQ(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function TQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function DQ(e){return function(){this.removeAttribute(e)}}function PQ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function OQ(e,t){return function(){this.setAttribute(e,t)}}function RQ(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zQ(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function FQ(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function BQ(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function UQ(e){return function(){this.style.removeProperty(e)}}function WQ(e,t,n){return function(){this.style.setProperty(e,t,n)}}function GQ(e,t,n){return function(){var a=t.apply(this,arguments);null==a?this.style.removeProperty(e):this.style.setProperty(e,a,n)}}function VQ(e,t){return e.style.getPropertyValue(t)||BQ(e).getComputedStyle(e,null).getPropertyValue(t)}function HQ(e){return function(){delete this[e]}}function qQ(e,t){return function(){this[e]=t}}function $Q(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function YQ(e){return e.trim().split(/^|\s+/)}function QQ(e){return e.classList||new KQ(e)}function KQ(e){this._node=e,this._names=YQ(e.getAttribute("class")||"")}function JQ(e,t){for(var n=QQ(e),a=-1,r=t.length;++a<r;)n.add(t[a])}function ZQ(e,t){for(var n=QQ(e),a=-1,r=t.length;++a<r;)n.remove(t[a])}function XQ(e){return function(){JQ(this,e)}}function eK(e){return function(){ZQ(this,e)}}function tK(e,t){return function(){(t.apply(this,arguments)?JQ:ZQ)(this,e)}}function nK(){this.textContent=""}function aK(e){return function(){this.textContent=e}}function rK(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function sK(){this.innerHTML=""}function iK(e){return function(){this.innerHTML=e}}function oK(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function lK(){this.nextSibling&&this.parentNode.appendChild(this)}function cK(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dK(){return null}function uK(){var e=this.parentNode;e&&e.removeChild(this)}function fK(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mK(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pK(e){return function(){var t=this.__on;if(t){for(var n,a=0,r=-1,s=t.length;a<s;++a)n=t[a],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function hK(e,t,n){return function(){var a,r=this.__on,s=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var i=0,o=r.length;i<o;++i)if((a=r[i]).type===e.type&&a.name===e.name)return this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=n),void(a.value=t);this.addEventListener(e.type,s,n),a={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(a):this.__on=[a]}}function gK(e,t,n){var a=BQ(e),r=a.CustomEvent;"function"==typeof r?r=new r(t,n):(r=a.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function xK(e,t){return function(){return gK(this,e,t)}}function yK(e,t){return function(){return gK(this,e,t.apply(this,arguments))}}_Q.prototype={constructor:_Q,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},KQ.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var vK=[null];function bK(e,t){this._groups=e,this._parents=t}function wK(){return new bK([[document.documentElement]],vK)}function jK(e){return"string"==typeof e?new bK([[document.querySelector(e)]],[document.documentElement]):new bK([[e]],vK)}function NK(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,[(a=a.matrixTransform(t.getScreenCTM().inverse())).x,a.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}bK.prototype=wK.prototype={constructor:bK,select:function(e){"function"!=typeof e&&(e=xQ(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var s,i,o=t[r],l=o.length,c=a[r]=new Array(l),d=0;d<l;++d)(s=o[d])&&(i=e.call(s,s.__data__,d,o))&&("__data__"in s&&(i.__data__=s.__data__),c[d]=i);return new bK(a,this._parents)},selectAll:function(e){e="function"==typeof e?bQ(e):vQ(e);for(var t=this._groups,n=t.length,a=[],r=[],s=0;s<n;++s)for(var i,o=t[s],l=o.length,c=0;c<l;++c)(i=o[c])&&(a.push(e.call(i,i.__data__,c,o)),r.push(i));return new bK(a,r)},selectChild:function(e){return this.select(null==e?CQ:function(e){return function(){return NQ.call(this.children,e)}}("function"==typeof e?e:jQ(e)))},selectChildren:function(e){return this.selectAll(null==e?kQ:function(e){return function(){return SQ.call(this.children,e)}}("function"==typeof e?e:jQ(e)))},filter:function(e){"function"!=typeof e&&(e=wQ(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var s,i=t[r],o=i.length,l=a[r]=[],c=0;c<o;++c)(s=i[c])&&e.call(s,s.__data__,c,i)&&l.push(s);return new bK(a,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,EQ);var n,a=t?AQ:IQ,r=this._parents,s=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var i=s.length,o=new Array(i),l=new Array(i),c=new Array(i),d=0;d<i;++d){var u=r[d],f=s[d],m=f.length,p=LQ(e.call(u,u&&u.__data__,d,r)),h=p.length,g=l[d]=new Array(h),x=o[d]=new Array(h);a(u,f,g,x,c[d]=new Array(m),p,t);for(var y,v,b=0,w=0;b<h;++b)if(y=g[b]){for(b>=w&&(w=b+1);!(v=x[w])&&++w<h;);y._next=v||null}}return(o=new bK(o,r))._enter=l,o._exit=c,o},enter:function(){return new bK(this._enter||this._groups.map(MQ),this._parents)},exit:function(){return new bK(this._exit||this._groups.map(MQ),this._parents)},join:function(e,t,n){var a=this.enter(),r=this,s=this.exit();return"function"==typeof e?(a=e(a))&&(a=a.selection()):a=a.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?s.remove():n(s),a&&r?a.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,a=t._groups,r=n.length,s=a.length,i=Math.min(r,s),o=new Array(r),l=0;l<i;++l)for(var c,d=n[l],u=a[l],f=d.length,m=o[l]=new Array(f),p=0;p<f;++p)(c=d[p]||u[p])&&(m[p]=c);for(;l<r;++l)o[l]=n[l];return new bK(o,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a,r=e[t],s=r.length-1,i=r[s];--s>=0;)(a=r[s])&&(i&&4^a.compareDocumentPosition(i)&&i.parentNode.insertBefore(a,i),i=a);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=TQ);for(var n=this._groups,a=n.length,r=new Array(a),s=0;s<a;++s){for(var i,o=n[s],l=o.length,c=r[s]=new Array(l),d=0;d<l;++d)(i=o[d])&&(c[d]=i);c.sort(t)}return new bK(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],r=0,s=a.length;r<s;++r){var i=a[r];if(i)return i}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var r,s=t[n],i=0,o=s.length;i<o;++i)(r=s[i])&&e.call(r,r.__data__,i,s);return this},attr:function(e,t){var n=fQ(e);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((null==t?n.local?PQ:DQ:"function"==typeof t?n.local?FQ:zQ:n.local?RQ:OQ)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?UQ:"function"==typeof t?GQ:WQ)(e,t,null==n?"":n)):VQ(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?HQ:"function"==typeof t?$Q:qQ)(e,t)):this.node()[e]},classed:function(e,t){var n=YQ(e+"");if(arguments.length<2){for(var a=QQ(this.node()),r=-1,s=n.length;++r<s;)if(!a.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?tK:t?XQ:eK)(n,t))},text:function(e){return arguments.length?this.each(null==e?nK:("function"==typeof e?rK:aK)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?sK:("function"==typeof e?oK:iK)(e)):this.node().innerHTML},raise:function(){return this.each(lK)},lower:function(){return this.each(cK)},append:function(e){var t="function"==typeof e?e:hQ(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:hQ(e),a=null==t?dK:"function"==typeof t?t:xQ(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)}))},remove:function(){return this.each(uK)},clone:function(e){return this.select(e?mK:fK)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var a,r,s=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),i=s.length;if(!(arguments.length<2)){for(o=t?hK:pK,a=0;a<i;++a)this.each(o(s[a],t,n));return this}var o=this.node().__on;if(o)for(var l,c=0,d=o.length;c<d;++c)for(a=0,l=o[c];a<i;++a)if((r=s[a]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?yK:xK)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a,r=e[t],s=0,i=r.length;s<i;++s)(a=r[s])&&(yield a)}};const CK={passive:!1},SK={capture:!0,passive:!1};function kK(e){e.stopImmediatePropagation()}function MK(e){e.preventDefault(),e.stopImmediatePropagation()}function _K(e){var t=e.document.documentElement,n=jK(e).on("dragstart.drag",MK,SK);"onselectstart"in t?n.on("selectstart.drag",MK,SK):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function IK(e,t){var n=e.document.documentElement,a=jK(e).on("dragstart.drag",null);t&&(a.on("click.drag",MK,SK),setTimeout((function(){a.on("click.drag",null)}),0)),"onselectstart"in n?a.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const AK=e=>()=>e;function EK(e,{sourceEvent:t,subject:n,target:a,identifier:r,active:s,x:i,y:o,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function LK(e){return!e.ctrlKey&&!e.button}function TK(){return this.parentNode}function DK(e,t){return null==t?{x:e.x,y:e.y}:t}function PK(){return navigator.maxTouchPoints||"ontouchstart"in this}function OK(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function RK(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function zK(){}EK.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var FK=.7,BK=1/FK,UK="\\s*([+-]?\\d+)\\s*",WK="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",GK="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VK=/^#([0-9a-f]{3,8})$/,HK=new RegExp(`^rgb\\(${UK},${UK},${UK}\\)$`),qK=new RegExp(`^rgb\\(${GK},${GK},${GK}\\)$`),$K=new RegExp(`^rgba\\(${UK},${UK},${UK},${WK}\\)$`),YK=new RegExp(`^rgba\\(${GK},${GK},${GK},${WK}\\)$`),QK=new RegExp(`^hsl\\(${WK},${GK},${GK}\\)$`),KK=new RegExp(`^hsla\\(${WK},${GK},${GK},${WK}\\)$`),JK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ZK(){return this.rgb().formatHex()}function XK(){return this.rgb().formatRgb()}function eJ(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=VK.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?tJ(t):3===n?new rJ(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?nJ(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?nJ(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=HK.exec(e))?new rJ(t[1],t[2],t[3],1):(t=qK.exec(e))?new rJ(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=$K.exec(e))?nJ(t[1],t[2],t[3],t[4]):(t=YK.exec(e))?nJ(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=QK.exec(e))?dJ(t[1],t[2]/100,t[3]/100,1):(t=KK.exec(e))?dJ(t[1],t[2]/100,t[3]/100,t[4]):JK.hasOwnProperty(e)?tJ(JK[e]):"transparent"===e?new rJ(NaN,NaN,NaN,0):null}function tJ(e){return new rJ(e>>16&255,e>>8&255,255&e,1)}function nJ(e,t,n,a){return a<=0&&(e=t=n=NaN),new rJ(e,t,n,a)}function aJ(e,t,n,a){return 1===arguments.length?((r=e)instanceof zK||(r=eJ(r)),r?new rJ((r=r.rgb()).r,r.g,r.b,r.opacity):new rJ):new rJ(e,t,n,null==a?1:a);var r}function rJ(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}function sJ(){return`#${cJ(this.r)}${cJ(this.g)}${cJ(this.b)}`}function iJ(){const e=oJ(this.opacity);return`${1===e?"rgb(":"rgba("}${lJ(this.r)}, ${lJ(this.g)}, ${lJ(this.b)}${1===e?")":`, ${e})`}`}function oJ(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function lJ(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function cJ(e){return((e=lJ(e))<16?"0":"")+e.toString(16)}function dJ(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fJ(e,t,n,a)}function uJ(e){if(e instanceof fJ)return new fJ(e.h,e.s,e.l,e.opacity);if(e instanceof zK||(e=eJ(e)),!e)return new fJ;if(e instanceof fJ)return e;var t=(e=e.rgb()).r/255,n=e.g/255,a=e.b/255,r=Math.min(t,n,a),s=Math.max(t,n,a),i=NaN,o=s-r,l=(s+r)/2;return o?(i=t===s?(n-a)/o+6*(n<a):n===s?(a-t)/o+2:(t-n)/o+4,o/=l<.5?s+r:2-s-r,i*=60):o=l>0&&l<1?0:i,new fJ(i,o,l,e.opacity)}function fJ(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}function mJ(e){return(e=(e||0)%360)<0?e+360:e}function pJ(e){return Math.max(0,Math.min(1,e||0))}function hJ(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}OK(zK,eJ,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ZK,formatHex:ZK,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return uJ(this).formatHsl()},formatRgb:XK,toString:XK}),OK(rJ,aJ,RK(zK,{brighter(e){return e=null==e?BK:Math.pow(BK,e),new rJ(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?FK:Math.pow(FK,e),new rJ(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new rJ(lJ(this.r),lJ(this.g),lJ(this.b),oJ(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sJ,formatHex:sJ,formatHex8:function(){return`#${cJ(this.r)}${cJ(this.g)}${cJ(this.b)}${cJ(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:iJ,toString:iJ})),OK(fJ,(function(e,t,n,a){return 1===arguments.length?uJ(e):new fJ(e,t,n,null==a?1:a)}),RK(zK,{brighter(e){return e=null==e?BK:Math.pow(BK,e),new fJ(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?FK:Math.pow(FK,e),new fJ(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,r=2*n-a;return new rJ(hJ(e>=240?e-240:e+120,r,a),hJ(e,r,a),hJ(e<120?e+240:e-120,r,a),this.opacity)},clamp(){return new fJ(mJ(this.h),pJ(this.s),pJ(this.l),oJ(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=oJ(this.opacity);return`${1===e?"hsl(":"hsla("}${mJ(this.h)}, ${100*pJ(this.s)}%, ${100*pJ(this.l)}%${1===e?")":`, ${e})`}`}}));const gJ=e=>()=>e;function xJ(e){return 1===(e=+e)?yJ:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}(t,n,e):gJ(isNaN(t)?n:t)}}function yJ(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):gJ(isNaN(e)?t:e)}const vJ=function e(t){var n=xJ(t);function a(e,t){var a=n((e=aJ(e)).r,(t=aJ(t)).r),r=n(e.g,t.g),s=n(e.b,t.b),i=yJ(e.opacity,t.opacity);return function(t){return e.r=a(t),e.g=r(t),e.b=s(t),e.opacity=i(t),e+""}}return a.gamma=e,a}(1);function bJ(e,t){t||(t=[]);var n,a=e?Math.min(t.length,e.length):0,r=t.slice();return function(s){for(n=0;n<a;++n)r[n]=e[n]*(1-s)+t[n]*s;return r}}function wJ(e,t){var n,a=t?t.length:0,r=e?Math.min(a,e.length):0,s=new Array(r),i=new Array(a);for(n=0;n<r;++n)s[n]=_J(e[n],t[n]);for(;n<a;++n)i[n]=t[n];return function(e){for(n=0;n<r;++n)i[n]=s[n](e);return i}}function jJ(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function NJ(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function CJ(e,t){var n,a={},r={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?a[n]=_J(e[n],t[n]):r[n]=t[n];return function(e){for(n in a)r[n]=a[n](e);return r}}var SJ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kJ=new RegExp(SJ.source,"g");function MJ(e,t){var n,a,r,s=SJ.lastIndex=kJ.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(n=SJ.exec(e))&&(a=kJ.exec(t));)(r=a.index)>s&&(r=t.slice(s,r),o[i]?o[i]+=r:o[++i]=r),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,l.push({i:i,x:NJ(n,a)})),s=kJ.lastIndex;return s<t.length&&(r=t.slice(s),o[i]?o[i]+=r:o[++i]=r),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,a=0;a<t;++a)o[(n=l[a]).i]=n.x(e);return o.join("")})}function _J(e,t){var n,a,r=typeof t;return null==t||"boolean"===r?gJ(t):("number"===r?NJ:"string"===r?(n=eJ(t))?(t=n,vJ):MJ:t instanceof eJ?vJ:t instanceof Date?jJ:(a=t,!ArrayBuffer.isView(a)||a instanceof DataView?Array.isArray(t)?wJ:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?CJ:NJ:bJ))(e,t)}function IJ(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var AJ,EJ=180/Math.PI,LJ={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function TJ(e,t,n,a,r,s){var i,o,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*a)&&(n-=e*l,a-=t*l),(o=Math.sqrt(n*n+a*a))&&(n/=o,a/=o,l/=o),e*a<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*EJ,skewX:Math.atan(l)*EJ,scaleX:i,scaleY:o}}function DJ(e,t,n,a){function r(e){return e.length?e.pop()+" ":""}return function(s,i){var o=[],l=[];return s=e(s),i=e(i),function(e,a,r,s,i,o){if(e!==r||a!==s){var l=i.push("translate(",null,t,null,n);o.push({i:l-4,x:NJ(e,r)},{i:l-2,x:NJ(a,s)})}else(r||s)&&i.push("translate("+r+t+s+n)}(s.translateX,s.translateY,i.translateX,i.translateY,o,l),function(e,t,n,s){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),s.push({i:n.push(r(n)+"rotate(",null,a)-2,x:NJ(e,t)})):t&&n.push(r(n)+"rotate("+t+a)}(s.rotate,i.rotate,o,l),function(e,t,n,s){e!==t?s.push({i:n.push(r(n)+"skewX(",null,a)-2,x:NJ(e,t)}):t&&n.push(r(n)+"skewX("+t+a)}(s.skewX,i.skewX,o,l),function(e,t,n,a,s,i){if(e!==n||t!==a){var o=s.push(r(s)+"scale(",null,",",null,")");i.push({i:o-4,x:NJ(e,n)},{i:o-2,x:NJ(t,a)})}else 1===n&&1===a||s.push(r(s)+"scale("+n+","+a+")")}(s.scaleX,s.scaleY,i.scaleX,i.scaleY,o,l),s=i=null,function(e){for(var t,n=-1,a=l.length;++n<a;)o[(t=l[n]).i]=t.x(e);return o.join("")}}}var PJ=DJ((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?LJ:TJ(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),OJ=DJ((function(e){return null==e?LJ:(AJ||(AJ=document.createElementNS("http://www.w3.org/2000/svg","g")),AJ.setAttribute("transform",e),(e=AJ.transform.baseVal.consolidate())?TJ((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):LJ)}),", ",")",")");function RJ(e){return((e=Math.exp(e))+1/e)/2}const zJ=function e(t,n,a){function r(e,r){var s,i,o=e[0],l=e[1],c=e[2],d=r[0],u=r[1],f=r[2],m=d-o,p=u-l,h=m*m+p*p;if(h<1e-12)i=Math.log(f/c)/t,s=function(e){return[o+e*m,l+e*p,c*Math.exp(t*e*i)]};else{var g=Math.sqrt(h),x=(f*f-c*c+a*h)/(2*c*n*g),y=(f*f-c*c-a*h)/(2*f*n*g),v=Math.log(Math.sqrt(x*x+1)-x),b=Math.log(Math.sqrt(y*y+1)-y);i=(b-v)/t,s=function(e){var a,r=e*i,s=RJ(v),d=c/(n*g)*(s*(a=t*r+v,((a=Math.exp(2*a))-1)/(a+1))-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[o+d*m,l+d*p,c*s/RJ(t*r+v)]}}return s.duration=1e3*i*t/Math.SQRT2,s}return r.rho=function(t){var n=Math.max(.001,+t),a=n*n;return e(n,a,a*a)},r}(Math.SQRT2,2,4);var FJ,BJ,UJ=0,WJ=0,GJ=0,VJ=0,HJ=0,qJ=0,$J="object"==typeof performance&&performance.now?performance:Date,YJ="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function QJ(){return HJ||(YJ(KJ),HJ=$J.now()+qJ)}function KJ(){HJ=0}function JJ(){this._call=this._time=this._next=null}function ZJ(e,t,n){var a=new JJ;return a.restart(e,t,n),a}function XJ(){HJ=(VJ=$J.now())+qJ,UJ=WJ=0;try{!function(){QJ(),++UJ;for(var e,t=FJ;t;)(e=HJ-t._time)>=0&&t._call.call(void 0,e),t=t._next;--UJ}()}finally{UJ=0,function(){var e,t,n=FJ,a=1/0;for(;n;)n._call?(a>n._time&&(a=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:FJ=t);BJ=e,tZ(a)}(),HJ=0}}function eZ(){var e=$J.now(),t=e-VJ;t>1e3&&(qJ-=t,VJ=e)}function tZ(e){UJ||(WJ&&(WJ=clearTimeout(WJ)),e-HJ>24?(e<1/0&&(WJ=setTimeout(XJ,e-$J.now()-qJ)),GJ&&(GJ=clearInterval(GJ))):(GJ||(VJ=$J.now(),GJ=setInterval(eZ,1e3)),UJ=1,YJ(XJ)))}function nZ(e,t,n){var a=new JJ;return t=null==t?0:+t,a.restart((n=>{a.stop(),e(n+t)}),t,n),a}JJ.prototype=ZJ.prototype={constructor:JJ,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?QJ():+n)+(null==t?0:+t),this._next||BJ===this||(BJ?BJ._next=this:FJ=this,BJ=this),this._call=e,this._time=n,tZ()},stop:function(){this._call&&(this._call=null,this._time=1/0,tZ())}};var aZ=iQ("start","end","cancel","interrupt"),rZ=[];function sZ(e,t,n,a,r,s){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};!function(e,t,n){var a,r=e.__transition;function s(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}function i(s){var c,d,u,f;if(1!==n.state)return l();for(c in r)if((f=r[c]).name===n.name){if(3===f.state)return nZ(i);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[c]):+c<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[c])}if(nZ((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(s))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,a=new Array(u=n.tween.length),c=0,d=-1;c<u;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(a[++d]=f);a.length=d+1}}function o(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),s=-1,i=a.length;++s<i;)a[s].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var a in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=ZJ(s,0,n.time)}(e,n,{name:t,index:a,group:r,on:aZ,tween:rZ,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function iZ(e,t){var n=lZ(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function oZ(e,t){var n=lZ(e,t);if(n.state>3)throw new Error("too late; already running");return n}function lZ(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function cZ(e,t){var n,a,r,s=e.__transition,i=!0;if(s){for(r in t=null==t?null:t+"",s)(n=s[r]).name===t?(a=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete s[r]):i=!1;i&&delete e.__transition}}function dZ(e,t){var n,a;return function(){var r=oZ(this,e),s=r.tween;if(s!==n)for(var i=0,o=(a=n=s).length;i<o;++i)if(a[i].name===t){(a=a.slice()).splice(i,1);break}r.tween=a}}function uZ(e,t,n){var a,r;if("function"!=typeof n)throw new Error;return function(){var s=oZ(this,e),i=s.tween;if(i!==a){r=(a=i).slice();for(var o={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=o;break}l===c&&r.push(o)}s.tween=r}}function fZ(e,t,n){var a=e._id;return e.each((function(){var e=oZ(this,a);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return lZ(e,a).value[t]}}function mZ(e,t){var n;return("number"==typeof t?NJ:t instanceof eJ?vJ:(n=eJ(t))?(t=n,vJ):MJ)(e,t)}function pZ(e){return function(){this.removeAttribute(e)}}function hZ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gZ(e,t,n){var a,r,s=n+"";return function(){var i=this.getAttribute(e);return i===s?null:i===a?r:r=t(a=i,n)}}function xZ(e,t,n){var a,r,s=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===s?null:i===a?r:r=t(a=i,n)}}function yZ(e,t,n){var a,r,s;return function(){var i,o,l=n(this);if(null!=l)return(i=this.getAttribute(e))===(o=l+"")?null:i===a&&o===r?s:(r=o,s=t(a=i,l));this.removeAttribute(e)}}function vZ(e,t,n){var a,r,s;return function(){var i,o,l=n(this);if(null!=l)return(i=this.getAttributeNS(e.space,e.local))===(o=l+"")?null:i===a&&o===r?s:(r=o,s=t(a=i,l));this.removeAttributeNS(e.space,e.local)}}function bZ(e,t){var n,a;function r(){var r=t.apply(this,arguments);return r!==a&&(n=(a=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function wZ(e,t){var n,a;function r(){var r=t.apply(this,arguments);return r!==a&&(n=(a=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function jZ(e,t){return function(){iZ(this,e).delay=+t.apply(this,arguments)}}function NZ(e,t){return t=+t,function(){iZ(this,e).delay=t}}function CZ(e,t){return function(){oZ(this,e).duration=+t.apply(this,arguments)}}function SZ(e,t){return t=+t,function(){oZ(this,e).duration=t}}var kZ=wK.prototype.constructor;function MZ(e){return function(){this.style.removeProperty(e)}}var _Z=0;function IZ(e,t,n,a){this._groups=e,this._parents=t,this._name=n,this._id=a}function AZ(){return++_Z}var EZ=wK.prototype;IZ.prototype={constructor:IZ,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=xQ(e));for(var a=this._groups,r=a.length,s=new Array(r),i=0;i<r;++i)for(var o,l,c=a[i],d=c.length,u=s[i]=new Array(d),f=0;f<d;++f)(o=c[f])&&(l=e.call(o,o.__data__,f,c))&&("__data__"in o&&(l.__data__=o.__data__),u[f]=l,sZ(u[f],t,n,f,u,lZ(o,n)));return new IZ(s,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=vQ(e));for(var a=this._groups,r=a.length,s=[],i=[],o=0;o<r;++o)for(var l,c=a[o],d=c.length,u=0;u<d;++u)if(l=c[u]){for(var f,m=e.call(l,l.__data__,u,c),p=lZ(l,n),h=0,g=m.length;h<g;++h)(f=m[h])&&sZ(f,t,n,h,m,p);s.push(m),i.push(l)}return new IZ(s,i,t,n)},selectChild:EZ.selectChild,selectChildren:EZ.selectChildren,filter:function(e){"function"!=typeof e&&(e=wQ(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var s,i=t[r],o=i.length,l=a[r]=[],c=0;c<o;++c)(s=i[c])&&e.call(s,s.__data__,c,i)&&l.push(s);return new IZ(a,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,a=t.length,r=n.length,s=Math.min(a,r),i=new Array(a),o=0;o<s;++o)for(var l,c=t[o],d=n[o],u=c.length,f=i[o]=new Array(u),m=0;m<u;++m)(l=c[m]||d[m])&&(f[m]=l);for(;o<a;++o)i[o]=t[o];return new IZ(i,this._parents,this._name,this._id)},selection:function(){return new kZ(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=AZ(),a=this._groups,r=a.length,s=0;s<r;++s)for(var i,o=a[s],l=o.length,c=0;c<l;++c)if(i=o[c]){var d=lZ(i,t);sZ(i,e,n,c,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new IZ(a,this._parents,e,n)},call:EZ.call,nodes:EZ.nodes,node:EZ.node,size:EZ.size,empty:EZ.empty,each:EZ.each,on:function(e,t){var n=this._id;return arguments.length<2?lZ(this.node(),n).on.on(e):this.each(function(e,t,n){var a,r,s=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?iZ:oZ;return function(){var i=s(this,e),o=i.on;o!==a&&(r=(a=o).copy()).on(t,n),i.on=r}}(n,e,t))},attr:function(e,t){var n=fQ(e),a="transform"===n?OJ:mZ;return this.attrTween(e,"function"==typeof t?(n.local?vZ:yZ)(n,a,fZ(this,"attr."+e,t)):null==t?(n.local?hZ:pZ)(n):(n.local?xZ:gZ)(n,a,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var a=fQ(e);return this.tween(n,(a.local?bZ:wZ)(a,t))},style:function(e,t,n){var a="transform"==(e+="")?PJ:mZ;return null==t?this.styleTween(e,function(e,t){var n,a,r;return function(){var s=VQ(this,e),i=(this.style.removeProperty(e),VQ(this,e));return s===i?null:s===n&&i===a?r:r=t(n=s,a=i)}}(e,a)).on("end.style."+e,MZ(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var a,r,s;return function(){var i=VQ(this,e),o=n(this),l=o+"";return null==o&&(this.style.removeProperty(e),l=o=VQ(this,e)),i===l?null:i===a&&l===r?s:(r=l,s=t(a=i,o))}}(e,a,fZ(this,"style."+e,t))).each(function(e,t){var n,a,r,s,i="style."+t,o="end."+i;return function(){var l=oZ(this,e),c=l.on,d=null==l.value[i]?s||(s=MZ(t)):void 0;c===n&&r===d||(a=(n=c).copy()).on(o,r=d),l.on=a}}(this._id,e)):this.styleTween(e,function(e,t,n){var a,r,s=n+"";return function(){var i=VQ(this,e);return i===s?null:i===a?r:r=t(a=i,n)}}(e,a,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==t)return this.tween(a,null);if("function"!=typeof t)throw new Error;return this.tween(a,function(e,t,n){var a,r;function s(){var s=t.apply(this,arguments);return s!==r&&(a=(r=s)&&function(e,t,n){return function(a){this.style.setProperty(e,t.call(this,a),n)}}(e,s,n)),a}return s._value=t,s}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(fZ(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function a(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&function(e){return function(t){this.textContent=e.call(this,t)}}(a)),t}return a._value=e,a}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var a,r=lZ(this.node(),n).tween,s=0,i=r.length;s<i;++s)if((a=r[s]).name===e)return a.value;return null}return this.each((null==t?dZ:uZ)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?jZ:NZ)(t,e)):lZ(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?CZ:SZ)(t,e)):lZ(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){oZ(this,e).ease=t}}(t,e)):lZ(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;oZ(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,a=n._id,r=n.size();return new Promise((function(s,i){var o={value:i},l={value:function(){0===--r&&s()}};n.each((function(){var n=oZ(this,a),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),n.on=t})),0===r&&s()}))},[Symbol.iterator]:EZ[Symbol.iterator]};var LZ={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function TZ(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}wK.prototype.interrupt=function(e){return this.each((function(){cZ(this,e)}))},wK.prototype.transition=function(e){var t,n;e instanceof IZ?(t=e._id,e=e._name):(t=AZ(),(n=LZ).time=QJ(),e=null==e?null:e+"");for(var a=this._groups,r=a.length,s=0;s<r;++s)for(var i,o=a[s],l=o.length,c=0;c<l;++c)(i=o[c])&&sZ(i,e,t,c,o,n||TZ(i,t));return new IZ(a,this._parents,e,t)};const DZ=e=>()=>e;function PZ(e,{sourceEvent:t,target:n,transform:a,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:r}})}function OZ(e,t,n){this.k=e,this.x=t,this.y=n}OZ.prototype={constructor:OZ,scale:function(e){return 1===e?this:new OZ(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new OZ(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var RZ=new OZ(1,0,0);function zZ(e){e.stopImmediatePropagation()}function FZ(e){e.preventDefault(),e.stopImmediatePropagation()}function BZ(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function UZ(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function WZ(){return this.__zoom||RZ}function GZ(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function VZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function HZ(e,t,n){var a=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function qZ(){var e,t,n,a=BZ,r=UZ,s=HZ,i=GZ,o=VZ,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,u=zJ,f=iQ("start","zoom","end"),m=0,p=10;function h(e){e.property("__zoom",WZ).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",C).filter(o).on("touchstart.zoom",S).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new OZ(t,e.x,e.y)}function x(e,t,n){var a=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return a===e.x&&r===e.y?e:new OZ(e.k,a,r)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function v(e,t,n,a){e.on("start.zoom",(function(){b(this,arguments).event(a).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).event(a).end()})).tween("zoom",(function(){var e=this,s=arguments,i=b(e,s).event(a),o=r.apply(e,s),l=null==n?y(o):"function"==typeof n?n.apply(e,s):n,c=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),d=e.__zoom,f="function"==typeof t?t.apply(e,s):t,m=u(d.invert(l).concat(c/d.k),f.invert(l).concat(c/f.k));return function(e){if(1===e)e=f;else{var t=m(e),n=c/t[2];e=new OZ(n,l[0]-t[0]*n,l[1]-t[1]*n)}i.zoom(null,e)}}))}function b(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function j(e,...t){if(a.apply(this,arguments)){var n=b(this,t).event(e),r=this.__zoom,o=Math.max(l[0],Math.min(l[1],r.k*Math.pow(2,i.apply(this,arguments)))),d=NK(e);if(n.wheel)n.mouse[0][0]===d[0]&&n.mouse[0][1]===d[1]||(n.mouse[1]=r.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(r.k===o)return;n.mouse=[d,r.invert(d)],cZ(this),n.start()}FZ(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",s(x(g(r,o),n.mouse[0],n.mouse[1]),n.extent,c))}}function N(e,...t){if(!n&&a.apply(this,arguments)){var r=e.currentTarget,i=b(this,t,!0).event(e),o=jK(e.view).on("mousemove.zoom",(function(e){if(FZ(e),!i.moved){var t=e.clientX-d,n=e.clientY-u;i.moved=t*t+n*n>m}i.event(e).zoom("mouse",s(x(i.that.__zoom,i.mouse[0]=NK(e,r),i.mouse[1]),i.extent,c))}),!0).on("mouseup.zoom",(function(e){o.on("mousemove.zoom mouseup.zoom",null),IK(e.view,i.moved),FZ(e),i.event(e).end()}),!0),l=NK(e,r),d=e.clientX,u=e.clientY;_K(e.view),zZ(e),i.mouse=[l,this.__zoom.invert(l)],cZ(this),i.start()}}function C(e,...t){if(a.apply(this,arguments)){var n=this.__zoom,i=NK(e.changedTouches?e.changedTouches[0]:e,this),o=n.invert(i),l=n.k*(e.shiftKey?.5:2),u=s(x(g(n,l),i,o),r.apply(this,t),c);FZ(e),d>0?jK(this).transition().duration(d).call(v,u,i,e):jK(this).call(h.transform,u,i,e)}}function S(n,...r){if(a.apply(this,arguments)){var s,i,o,l,c=n.touches,d=c.length,u=b(this,r,n.changedTouches.length===d).event(n);for(zZ(n),i=0;i<d;++i)l=[l=NK(o=c[i],this),this.__zoom.invert(l),o.identifier],u.touch0?u.touch1||u.touch0[2]===l[2]||(u.touch1=l,u.taps=0):(u.touch0=l,s=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(u.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),500)),cZ(this),u.start())}}function k(e,...t){if(this.__zooming){var n,a,r,i,o=b(this,t).event(e),l=e.changedTouches,d=l.length;for(FZ(e),n=0;n<d;++n)r=NK(a=l[n],this),o.touch0&&o.touch0[2]===a.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===a.identifier&&(o.touch1[0]=r);if(a=o.that.__zoom,o.touch1){var u=o.touch0[0],f=o.touch0[1],m=o.touch1[0],p=o.touch1[1],h=(h=m[0]-u[0])*h+(h=m[1]-u[1])*h,y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y;a=g(a,Math.sqrt(h/y)),r=[(u[0]+m[0])/2,(u[1]+m[1])/2],i=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],i=o.touch0[1]}o.zoom("touch",s(x(a,r,i),o.extent,c))}}function M(e,...a){if(this.__zooming){var r,s,i=b(this,a).event(e),o=e.changedTouches,l=o.length;for(zZ(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),r=0;r<l;++r)s=o[r],i.touch0&&i.touch0[2]===s.identifier?delete i.touch0:i.touch1&&i.touch1[2]===s.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps&&(s=NK(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<p)){var c=jK(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return h.transform=function(e,t,n,a){var r=e.selection?e.selection():e;r.property("__zoom",WZ),e!==r?v(e,t,n,a):r.interrupt().each((function(){b(this,arguments).event(a).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},h.scaleBy=function(e,t,n,a){h.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,a)},h.scaleTo=function(e,t,n,a){h.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,i=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,o=a.invert(i),l="function"==typeof t?t.apply(this,arguments):t;return s(x(g(a,l),i,o),e,c)}),n,a)},h.translateBy=function(e,t,n,a){h.transform(e,(function(){return s(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)}),null,a)},h.translateTo=function(e,t,n,a,i){h.transform(e,(function(){var e=r.apply(this,arguments),i=this.__zoom,o=null==a?y(e):"function"==typeof a?a.apply(this,arguments):a;return s(RZ.translate(o[0],o[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),a,i)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=jK(this.that).datum();f.call(e,this.that,new PZ(e,{sourceEvent:this.sourceEvent,target:h,transform:this.that.__zoom,dispatch:f}),t)}},h.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:DZ(+e),h):i},h.filter=function(e){return arguments.length?(a="function"==typeof e?e:DZ(!!e),h):a},h.touchable=function(e){return arguments.length?(o="function"==typeof e?e:DZ(!!e),h):o},h.extent=function(e){return arguments.length?(r="function"==typeof e?e:DZ([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),h):r},h.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],h):[l[0],l[1]]},h.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],h):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},h.constrain=function(e){return arguments.length?(s=e,h):s},h.duration=function(e){return arguments.length?(d=+e,h):d},h.interpolate=function(e){return arguments.length?(u=e,h):u},h.on=function(){var e=f.on.apply(f,arguments);return e===f?h:e},h.clickDistance=function(e){return arguments.length?(m=(e=+e)*e,h):Math.sqrt(m)},h.tapDistance=function(e){return arguments.length?(p=+e,h):p},h}OZ.prototype;const $Z=cs.createContext(null),YZ=$Z.Provider,QZ=e=>`Node type "${e}" not found. Using fallback type "default".`,KZ=()=>"The React Flow parent container needs a width and a height to render the graph.",JZ=()=>"Only child nodes can use a parent extent.",ZZ=e=>`Marker type "${e}" doesn't exist.`,XZ=(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,eX=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",tX=e=>`Edge type "${e}" not found. Using fallback type "default".`,nX=e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,aX=(()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001")();function rX(e,t){const n=cs.useContext($Z);if(null===n)throw new Error(aX);return nQ(n,e,t)}const sX=()=>{const e=cs.useContext($Z);if(null===e)throw new Error(aX);return cs.useMemo((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy})),[e])},iX=e=>e.userSelectionActive?"none":"all";function oX({position:e,children:t,className:n,style:a,...r}){const s=rX(iX),i=`${e}`.split("-");return ds.createElement("div",{className:BY(["react-flow__panel",n,...i]),style:{...a,pointerEvents:s},...r},t)}function lX({proOptions:e,position:t="bottom-right"}){return(null==e?void 0:e.hideAttribution)?null:ds.createElement(oX,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ds.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var cX=cs.memo((({x:e,y:t,label:n,labelStyle:a={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:c,...d})=>{const u=cs.useRef(null),[f,m]=cs.useState({x:0,y:0,width:0,height:0}),p=BY(["react-flow__edge-textwrapper",c]);return cs.useEffect((()=>{if(u.current){const e=u.current.getBBox();m({x:e.x,y:e.y,width:e.width,height:e.height})}}),[n]),void 0!==n&&n?ds.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...d},r&&ds.createElement("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),ds.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:u,style:a},n),l):null}));const dX=e=>({width:e.offsetWidth,height:e.offsetHeight}),uX=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),fX=(e={x:0,y:0},t)=>({x:uX(e.x,t[0][0],t[1][0]),y:uX(e.y,t[0][1],t[1][1])}),mX=(e,t,n)=>e<t?uX(Math.abs(e-t),1,50)/50:e>n?-uX(Math.abs(e-n),1,50)/50:0,pX=(e,t)=>[20*mX(e.x,35,t.width-35),20*mX(e.y,35,t.height-35)],hX=e=>{var t;return(null==(t=e.getRootNode)?void 0:t.call(e))||(null==window?void 0:window.document)},gX=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),xX=({x:e,y:t,width:n,height:a})=>({x:e,y:t,x2:e+n,y2:t+a}),yX=({x:e,y:t,x2:n,y2:a})=>({x:e,y:t,width:n-e,height:a-t}),vX=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),bX=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),a=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*a)},wX=e=>!isNaN(e)&&isFinite(e),jX=Symbol.for("internals"),NX=["Enter"," ","Escape"];function CX(e){var t,n;const a=(e=>"nativeEvent"in e)(e)?e.nativeEvent:e,r=(null==(n=null==(t=a.composedPath)?void 0:t.call(a))?void 0:n[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(null==r?void 0:r.nodeName)||(null==r?void 0:r.hasAttribute("contenteditable"))||!!(null==r?void 0:r.closest(".nokey"))}const SX=e=>"clientX"in e,kX=(e,t)=>{var n,a;const r=SX(e),s=r?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,i=r?e.clientY:null==(a=e.touches)?void 0:a[0].clientY;return{x:s-((null==t?void 0:t.left)??0),y:i-((null==t?void 0:t.top)??0)}},MX=()=>{var e;return"undefined"!=typeof navigator&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0},_X=({id:e,path:t,labelX:n,labelY:a,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:f,interactionWidth:m=20})=>ds.createElement(ds.Fragment,null,ds.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:u,markerStart:f}),m&&ds.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),r&&wX(n)&&wX(a)?ds.createElement(cX,{x:n,y:a,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c}):null);function IX(e,t,n){return void 0===n?n:a=>{const r=t().edges.find((t=>t.id===e));r&&n(a,{...r})}}function AX({sourceX:e,sourceY:t,targetX:n,targetY:a}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,i=Math.abs(a-t)/2;return[s,a<t?a+i:a-i,r,i]}function EX({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:o}){const l=.125*e+.375*r+.375*i+.125*n,c=.125*t+.375*s+.375*o+.125*a;return[l,c,Math.abs(l-e),Math.abs(c-t)]}var LX,TX,DX,PX,OX,RX,zX,FX,BX,UX,WX,GX;function VX({pos:e,x1:t,y1:n,x2:a,y2:r}){return e===WX.Left||e===WX.Right?[.5*(t+a),n]:[t,.5*(n+r)]}function HX({sourceX:e,sourceY:t,sourcePosition:n=WX.Bottom,targetX:a,targetY:r,targetPosition:s=WX.Top}){const[i,o]=VX({pos:n,x1:e,y1:t,x2:a,y2:r}),[l,c]=VX({pos:s,x1:a,y1:r,x2:e,y2:t}),[d,u,f,m]=EX({sourceX:e,sourceY:t,targetX:a,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:c});return[`M${e},${t} C${i},${o} ${l},${c} ${a},${r}`,d,u,f,m]}_X.displayName="BaseEdge",(TX=LX||(LX={})).Strict="strict",TX.Loose="loose",(PX=DX||(DX={})).Free="free",PX.Vertical="vertical",PX.Horizontal="horizontal",(RX=OX||(OX={})).Partial="partial",RX.Full="full",(FX=zX||(zX={})).Bezier="default",FX.Straight="straight",FX.Step="step",FX.SmoothStep="smoothstep",FX.SimpleBezier="simplebezier",(UX=BX||(BX={})).Arrow="arrow",UX.ArrowClosed="arrowclosed",(GX=WX||(WX={})).Left="left",GX.Top="top",GX.Right="right",GX.Bottom="bottom";const qX=cs.memo((({sourceX:e,sourceY:t,targetX:n,targetY:a,sourcePosition:r=WX.Bottom,targetPosition:s=WX.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:p,interactionWidth:h})=>{const[g,x,y]=HX({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:a,targetPosition:s});return ds.createElement(_X,{path:g,labelX:x,labelY:y,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:p,interactionWidth:h})}));qX.displayName="SimpleBezierEdge";const $X={[WX.Left]:{x:-1,y:0},[WX.Right]:{x:1,y:0},[WX.Top]:{x:0,y:-1},[WX.Bottom]:{x:0,y:1}},YX=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function QX({source:e,sourcePosition:t=WX.Bottom,target:n,targetPosition:a=WX.Top,center:r,offset:s}){const i=$X[t],o=$X[a],l={x:e.x+i.x*s,y:e.y+i.y*s},c={x:n.x+o.x*s,y:n.y+o.y*s},d=(({source:e,sourcePosition:t=WX.Bottom,target:n})=>t===WX.Left||t===WX.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:l,sourcePosition:t,target:c}),u=0!==d.x?"x":"y",f=d[u];let m,p,h=[];const g={x:0,y:0},x={x:0,y:0},[y,v,b,w]=AX({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[u]*o[u]===-1){m=r.x??y,p=r.y??v;const e=[{x:m,y:l.y},{x:m,y:c.y}],t=[{x:l.x,y:p},{x:c.x,y:p}];h=i[u]===f?"x"===u?e:t:"x"===u?t:e}else{const r=[{x:l.x,y:c.y}],d=[{x:c.x,y:l.y}];if(h="x"===u?i.x===f?d:r:i.y===f?r:d,t===a){const t=Math.abs(e[u]-n[u]);if(t<=s){const a=Math.min(s-1,s-t);i[u]===f?g[u]=(l[u]>e[u]?-1:1)*a:x[u]=(c[u]>n[u]?-1:1)*a}}if(t!==a){const e="x"===u?"y":"x",t=i[u]===o[e],n=l[e]>c[e],a=l[e]<c[e];(1===i[u]&&(!t&&n||t&&a)||1!==i[u]&&(!t&&a||t&&n))&&(h="x"===u?r:d)}const y={x:l.x+g.x,y:l.y+g.y},v={x:c.x+x.x,y:c.y+x.y};Math.max(Math.abs(y.x-h[0].x),Math.abs(v.x-h[0].x))>=Math.max(Math.abs(y.y-h[0].y),Math.abs(v.y-h[0].y))?(m=(y.x+v.x)/2,p=h[0].y):(m=h[0].x,p=(y.y+v.y)/2)}return[[e,{x:l.x+g.x,y:l.y+g.y},...h,{x:c.x+x.x,y:c.y+x.y},n],m,p,b,w]}function KX({sourceX:e,sourceY:t,sourcePosition:n=WX.Bottom,targetX:a,targetY:r,targetPosition:s=WX.Top,borderRadius:i=5,centerX:o,centerY:l,offset:c=20}){const[d,u,f,m,p]=QX({source:{x:e,y:t},sourcePosition:n,target:{x:a,y:r},targetPosition:s,center:{x:o,y:l},offset:c}),h=d.reduce(((e,t,n)=>{let a="";return a=n>0&&n<d.length-1?function(e,t,n,a){const r=Math.min(YX(e,t)/2,YX(t,n)/2,a),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i)return`L ${s+r*(e.x<n.x?-1:1)},${i}Q ${s},${i} ${s},${i+r*(e.y<n.y?1:-1)}`;const o=e.x<n.x?1:-1;return`L ${s},${i+r*(e.y<n.y?-1:1)}Q ${s},${i} ${s+r*o},${i}`}(d[n-1],t,d[n+1],i):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=a}),"");return[h,u,f,m,p]}const JX=cs.memo((({sourceX:e,sourceY:t,targetX:n,targetY:a,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:d,sourcePosition:u=WX.Bottom,targetPosition:f=WX.Top,markerEnd:m,markerStart:p,pathOptions:h,interactionWidth:g})=>{const[x,y,v]=KX({sourceX:e,sourceY:t,sourcePosition:u,targetX:n,targetY:a,targetPosition:f,borderRadius:null==h?void 0:h.borderRadius,offset:null==h?void 0:h.offset});return ds.createElement(_X,{path:x,labelX:y,labelY:v,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:m,markerStart:p,interactionWidth:g})}));JX.displayName="SmoothStepEdge";const ZX=cs.memo((e=>{var t;return ds.createElement(JX,{...e,pathOptions:cs.useMemo((()=>{var t;return{borderRadius:0,offset:null==(t=e.pathOptions)?void 0:t.offset}}),[null==(t=e.pathOptions)?void 0:t.offset])})}));ZX.displayName="StepEdge";const XX=cs.memo((({sourceX:e,sourceY:t,targetX:n,targetY:a,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:f,interactionWidth:m})=>{const[p,h,g]=function({sourceX:e,sourceY:t,targetX:n,targetY:a}){const[r,s,i,o]=AX({sourceX:e,sourceY:t,targetX:n,targetY:a});return[`M ${e},${t}L ${n},${a}`,r,s,i,o]}({sourceX:e,sourceY:t,targetX:n,targetY:a});return ds.createElement(_X,{path:p,labelX:h,labelY:g,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:f,interactionWidth:m})}));function e0(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function t0({pos:e,x1:t,y1:n,x2:a,y2:r,c:s}){switch(e){case WX.Left:return[t-e0(t-a,s),n];case WX.Right:return[t+e0(a-t,s),n];case WX.Top:return[t,n-e0(n-r,s)];case WX.Bottom:return[t,n+e0(r-n,s)]}}function n0({sourceX:e,sourceY:t,sourcePosition:n=WX.Bottom,targetX:a,targetY:r,targetPosition:s=WX.Top,curvature:i=.25}){const[o,l]=t0({pos:n,x1:e,y1:t,x2:a,y2:r,c:i}),[c,d]=t0({pos:s,x1:a,y1:r,x2:e,y2:t,c:i}),[u,f,m,p]=EX({sourceX:e,sourceY:t,targetX:a,targetY:r,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${o},${l} ${c},${d} ${a},${r}`,u,f,m,p]}XX.displayName="StraightEdge";const a0=cs.memo((({sourceX:e,sourceY:t,targetX:n,targetY:a,sourcePosition:r=WX.Bottom,targetPosition:s=WX.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:p,pathOptions:h,interactionWidth:g})=>{const[x,y,v]=n0({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:a,targetPosition:s,curvature:null==h?void 0:h.curvature});return ds.createElement(_X,{path:x,labelX:y,labelY:v,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:p,interactionWidth:g})}));a0.displayName="BezierEdge";const r0=cs.createContext(null),s0=r0.Provider;r0.Consumer;const i0=({source:e,sourceHandle:t,target:n,targetHandle:a})=>`reactflow__edge-${e}${t||""}-${n}${a||""}`,o0=(e,t)=>{if(void 0===e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`},l0=(e,t)=>{if(!e.source||!e.target)return t;let n;var a;return n="id"in(a=e)&&"source"in a&&"target"in a?{...e}:{...e,id:i0(e)},((e,t)=>t.some((t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle)))))(n,t)?t:t.concat(n)},c0=({x:e,y:t},[n,a,r],s,[i,o])=>{const l={x:(e-n)/r,y:(t-a)/r};return s?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},d0=({x:e,y:t},[n,a,r])=>({x:e*r+n,y:t*r+a}),u0=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],a=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-a};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-a}:r}},f0=(e,t=[0,0])=>{if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce(((e,n)=>{const{x:a,y:r}=u0(n,t).positionAbsolute;return gX(e,xX({x:a,y:r,width:n.width||0,height:n.height||0}))}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return yX(n)},m0=(e,t,[n,a,r]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const l={x:(t.x-n)/r,y:(t.y-a)/r,width:t.width/r,height:t.height/r},c=[];return e.forEach((e=>{const{width:t,height:n,selectable:a=!0,hidden:r=!1}=e;if(i&&!a||r)return!1;const{positionAbsolute:d}=u0(e,o),u={x:d.x,y:d.y,width:t||0,height:n||0},f=bX(l,u);(void 0===t||void 0===n||null===t||null===n||s&&f>0||f>=(t||0)*(n||0)||e.dragging)&&c.push(e)})),c},p0=(e,t)=>{const n=e.map((e=>e.id));return t.filter((e=>n.includes(e.source)||n.includes(e.target)))},h0=(e,t,n,a,r,s=.1)=>{const i=t/(e.width*(1+s)),o=n/(e.height*(1+s)),l=Math.min(i,o),c=uX(l,a,r);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},g0=(e,t=0)=>e.transition().duration(t);function x0(e,t,n,a){return(t[n]||[]).reduce(((t,r)=>{var s,i;return`${e.id}-${r.id}-${n}`!==a&&t.push({id:r.id||null,type:n,nodeId:e.id,x:((null==(s=e.positionAbsolute)?void 0:s.x)??0)+r.x+r.width/2,y:((null==(i=e.positionAbsolute)?void 0:i.y)??0)+r.y+r.height/2}),t}),[])}const y0={source:null,target:null,sourceHandle:null,targetHandle:null},v0=()=>({handleDomNode:null,isValid:!1,connection:y0,endHandle:null});function b0(e,t,n,a,r,s,i){const o="target"===r,l=i.querySelector(`.react-flow__handle[data-id="${null==e?void 0:e.nodeId}-${null==e?void 0:e.id}-${null==e?void 0:e.type}"]`),c={...v0(),handleDomNode:l};if(l){const e=w0(void 0,l),r=l.getAttribute("data-nodeid"),i=l.getAttribute("data-handleid"),d=l.classList.contains("connectable"),u=l.classList.contains("connectableend"),f={source:o?r:n,sourceHandle:o?i:a,target:o?n:r,targetHandle:o?a:i};c.connection=f;d&&u&&(t===LX.Strict?o&&"source"===e||!o&&"target"===e:r!==n||i!==a)&&(c.endHandle={nodeId:r,handleId:i,type:e},c.isValid=s(f))}return c}function w0(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}function j0(e){null==e||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function N0(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function C0({event:e,handleId:t,nodeId:n,onConnect:a,isTarget:r,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:c}){const d=hX(e.target),{connectionMode:u,domNode:f,autoPanOnConnect:m,connectionRadius:p,onConnectStart:h,panBy:g,getNodes:x,cancelConnection:y}=s();let v,b=0;const{x:w,y:j}=kX(e),N=null==d?void 0:d.elementFromPoint(w,j),C=w0(l,N),S=null==f?void 0:f.getBoundingClientRect();if(!S||!C)return;let k,M=kX(e,S),_=!1,I=null,A=!1,E=null;const L=function({nodes:e,nodeId:t,handleId:n,handleType:a}){return e.reduce(((e,r)=>{if(r[jX]){const{handleBounds:s}=r[jX];let i=[],o=[];s&&(i=x0(r,s,"source",`${t}-${n}-${a}`),o=x0(r,s,"target",`${t}-${n}-${a}`)),e.push(...i,...o)}return e}),[])}({nodes:x(),nodeId:n,handleId:t,handleType:C}),T=()=>{if(!m)return;const[e,t]=pX(M,S);g({x:e,y:t}),b=requestAnimationFrame(T)};function D(e){const{transform:a}=s();M=kX(e,S);const{handle:l,validHandleResult:c}=function(e,t,n,a,r,s){const{x:i,y:o}=kX(e),l=t.elementsFromPoint(i,o).find((e=>e.classList.contains("react-flow__handle")));if(l){const e=l.getAttribute("data-nodeid");if(e){const t=w0(void 0,l),a=l.getAttribute("data-handleid"),i=s({nodeId:e,id:a,type:t});if(i){const s=r.find((n=>n.nodeId===e&&n.type===t&&n.id===a));return{handle:{id:a,type:t,nodeId:e,x:(null==s?void 0:s.x)||n.x,y:(null==s?void 0:s.y)||n.y},validHandleResult:i}}}}let c=[],d=1/0;if(r.forEach((e=>{const t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=a){const n=s(e);t<=d&&(t<d?c=[{handle:e,validHandleResult:n}]:t===d&&c.push({handle:e,validHandleResult:n}),d=t)}})),!c.length)return{handle:null,validHandleResult:v0()};if(1===c.length)return c[0];const u=c.some((({validHandleResult:e})=>e.isValid)),f=c.some((({handle:e})=>"target"===e.type));return c.find((({handle:e,validHandleResult:t})=>f?"target"===e.type:!u||t.isValid))||c[0]}(e,d,c0(M,a,!1,[1,1]),p,L,(e=>b0(e,u,n,t,r?"target":"source",o,d)));if(v=l,_||(T(),_=!0),E=c.handleDomNode,I=c.connection,A=c.isValid,i({connectionPosition:v&&A?d0({x:v.x,y:v.y},a):M,connectionStatus:N0(!!v,A),connectionEndHandle:c.endHandle}),!v&&!A&&!E)return j0(k);I.source!==I.target&&E&&(j0(k),k=E,E.classList.add("connecting","react-flow__handle-connecting"),E.classList.toggle("valid",A),E.classList.toggle("react-flow__handle-valid",A))}function P(e){var t,n;(v||E)&&I&&A&&(null==a||a(I)),null==(n=(t=s()).onConnectEnd)||n.call(t,e),l&&(null==c||c(e)),j0(k),y(),cancelAnimationFrame(b),_=!1,A=!1,I=null,E=null,d.removeEventListener("mousemove",D),d.removeEventListener("mouseup",P),d.removeEventListener("touchmove",D),d.removeEventListener("touchend",P)}i({connectionPosition:M,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:C,connectionStartHandle:{nodeId:n,handleId:t,type:C},connectionEndHandle:null}),null==h||h(e,{nodeId:n,handleId:t,handleType:C}),d.addEventListener("mousemove",D),d.addEventListener("mouseup",P),d.addEventListener("touchmove",D),d.addEventListener("touchend",P)}const S0=()=>!0,k0=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),M0=cs.forwardRef((({type:e="source",position:t=WX.Top,isValidConnection:n,isConnectable:a=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:l,className:c,onMouseDown:d,onTouchStart:u,...f},m)=>{var p,h;const g=i||null,x="target"===e,y=sX(),v=cs.useContext(r0),{connectOnClick:b,noPanClassName:w}=rX(k0,rQ),{connecting:j,clickConnecting:N}=rX(((e,t,n)=>a=>{const{connectionStartHandle:r,connectionEndHandle:s,connectionClickStartHandle:i}=a;return{connecting:(null==r?void 0:r.nodeId)===e&&(null==r?void 0:r.handleId)===t&&(null==r?void 0:r.type)===n||(null==s?void 0:s.nodeId)===e&&(null==s?void 0:s.handleId)===t&&(null==s?void 0:s.type)===n,clickConnecting:(null==i?void 0:i.nodeId)===e&&(null==i?void 0:i.handleId)===t&&(null==i?void 0:i.type)===n}})(v,g,e),rQ);v||null==(h=(p=y.getState()).onError)||h.call(p,"010",eX());const C=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:a}=y.getState(),r={...t,...e};if(a){const{edges:e,setEdges:t}=y.getState();t(l0(r,e))}null==n||n(r),null==o||o(r)},S=e=>{if(!v)return;const t=SX(e);r&&(t&&0===e.button||!t)&&C0({event:e,handleId:g,nodeId:v,onConnect:C,isTarget:x,getState:y.getState,setState:y.setState,isValidConnection:n||y.getState().isValidConnection||S0}),t?null==d||d(e):null==u||u(e)};return ds.createElement("div",{"data-handleid":g,"data-nodeid":v,"data-handlepos":t,"data-id":`${v}-${g}-${e}`,className:BY(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,c,{source:!x,target:x,connectable:a,connectablestart:r,connectableend:s,connecting:N,connectionindicator:a&&(r&&!j||s&&j)}]),onMouseDown:S,onTouchStart:S,onClick:b?t=>{const{onClickConnectStart:a,onClickConnectEnd:s,connectionClickStartHandle:i,connectionMode:o,isValidConnection:l}=y.getState();if(!v||!i&&!r)return;if(!i)return null==a||a(t,{nodeId:v,handleId:g,handleType:e}),void y.setState({connectionClickStartHandle:{nodeId:v,type:e,handleId:g}});const c=hX(t.target),d=n||l||S0,{connection:u,isValid:f}=b0({nodeId:v,id:g,type:e},o,i.nodeId,i.handleId||null,i.type,d,c);f&&C(u),null==s||s(t),y.setState({connectionClickStartHandle:null})}:void 0,ref:m,...f},l)}));M0.displayName="Handle";var _0=cs.memo(M0);const I0=({data:e,isConnectable:t,targetPosition:n=WX.Top,sourcePosition:a=WX.Bottom})=>ds.createElement(ds.Fragment,null,ds.createElement(_0,{type:"target",position:n,isConnectable:t}),null==e?void 0:e.label,ds.createElement(_0,{type:"source",position:a,isConnectable:t}));I0.displayName="DefaultNode";var A0=cs.memo(I0);const E0=({data:e,isConnectable:t,sourcePosition:n=WX.Bottom})=>ds.createElement(ds.Fragment,null,null==e?void 0:e.label,ds.createElement(_0,{type:"source",position:n,isConnectable:t}));E0.displayName="InputNode";var L0=cs.memo(E0);const T0=({data:e,isConnectable:t,targetPosition:n=WX.Top})=>ds.createElement(ds.Fragment,null,ds.createElement(_0,{type:"target",position:n,isConnectable:t}),null==e?void 0:e.label);T0.displayName="OutputNode";var D0=cs.memo(T0);const P0=()=>null;P0.displayName="GroupNode";const O0=e=>({selectedNodes:e.getNodes().filter((e=>e.selected)),selectedEdges:e.edges.filter((e=>e.selected)).map((e=>({...e})))}),R0=e=>e.id;function z0(e,t){return rQ(e.selectedNodes.map(R0),t.selectedNodes.map(R0))&&rQ(e.selectedEdges.map(R0),t.selectedEdges.map(R0))}const F0=cs.memo((({onSelectionChange:e})=>{const t=sX(),{selectedNodes:n,selectedEdges:a}=rX(O0,z0);return cs.useEffect((()=>{const r={nodes:n,edges:a};null==e||e(r),t.getState().onSelectionChange.forEach((e=>e(r)))}),[n,a,e]),null}));F0.displayName="SelectionListener";const B0=e=>!!e.onSelectionChange;function U0({onSelectionChange:e}){const t=rX(B0);return e||t?ds.createElement(F0,{onSelectionChange:e}):null}const W0=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function G0(e,t){cs.useEffect((()=>{void 0!==e&&t(e)}),[e])}function V0(e,t,n){cs.useEffect((()=>{void 0!==t&&n({[e]:t})}),[t])}const H0=({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,onConnect:r,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:d,nodesFocusable:u,edgesFocusable:f,edgesUpdatable:m,elevateNodesOnSelect:p,minZoom:h,maxZoom:g,nodeExtent:x,onNodesChange:y,onEdgesChange:v,elementsSelectable:b,connectionMode:w,snapGrid:j,snapToGrid:N,translateExtent:C,connectOnClick:S,defaultEdgeOptions:k,fitView:M,fitViewOptions:_,onNodesDelete:I,onEdgesDelete:A,onNodeDrag:E,onNodeDragStart:L,onNodeDragStop:T,onSelectionDrag:D,onSelectionDragStart:P,onSelectionDragStop:O,noPanClassName:R,nodeOrigin:z,rfId:F,autoPanOnConnect:B,autoPanOnNodeDrag:U,onError:W,connectionRadius:G,isValidConnection:V,nodeDragThreshold:H})=>{const{setNodes:q,setEdges:$,setDefaultNodesAndEdges:Y,setMinZoom:Q,setMaxZoom:K,setTranslateExtent:J,setNodeExtent:Z,reset:X}=rX(W0,rQ),ee=sX();return cs.useEffect((()=>{const e=null==a?void 0:a.map((e=>({...e,...k})));return Y(n,e),()=>{X()}}),[]),V0("defaultEdgeOptions",k,ee.setState),V0("connectionMode",w,ee.setState),V0("onConnect",r,ee.setState),V0("onConnectStart",s,ee.setState),V0("onConnectEnd",i,ee.setState),V0("onClickConnectStart",o,ee.setState),V0("onClickConnectEnd",l,ee.setState),V0("nodesDraggable",c,ee.setState),V0("nodesConnectable",d,ee.setState),V0("nodesFocusable",u,ee.setState),V0("edgesFocusable",f,ee.setState),V0("edgesUpdatable",m,ee.setState),V0("elementsSelectable",b,ee.setState),V0("elevateNodesOnSelect",p,ee.setState),V0("snapToGrid",N,ee.setState),V0("snapGrid",j,ee.setState),V0("onNodesChange",y,ee.setState),V0("onEdgesChange",v,ee.setState),V0("connectOnClick",S,ee.setState),V0("fitViewOnInit",M,ee.setState),V0("fitViewOnInitOptions",_,ee.setState),V0("onNodesDelete",I,ee.setState),V0("onEdgesDelete",A,ee.setState),V0("onNodeDrag",E,ee.setState),V0("onNodeDragStart",L,ee.setState),V0("onNodeDragStop",T,ee.setState),V0("onSelectionDrag",D,ee.setState),V0("onSelectionDragStart",P,ee.setState),V0("onSelectionDragStop",O,ee.setState),V0("noPanClassName",R,ee.setState),V0("nodeOrigin",z,ee.setState),V0("rfId",F,ee.setState),V0("autoPanOnConnect",B,ee.setState),V0("autoPanOnNodeDrag",U,ee.setState),V0("onError",W,ee.setState),V0("connectionRadius",G,ee.setState),V0("isValidConnection",V,ee.setState),V0("nodeDragThreshold",H,ee.setState),G0(e,q),G0(t,$),G0(h,Q),G0(g,K),G0(C,J),G0(x,Z),null},q0={display:"none"},$0={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Y0="react-flow__node-desc",Q0="react-flow__edge-desc",K0=e=>e.ariaLiveMessage;function J0({rfId:e}){const t=rX(K0);return ds.createElement("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:$0},t)}function Z0({rfId:e,disableKeyboardA11y:t}){return ds.createElement(ds.Fragment,null,ds.createElement("div",{id:`${Y0}-${e}`,style:q0},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ds.createElement("div",{id:`${Q0}-${e}`,style:q0},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ds.createElement(J0,{rfId:e}))}var X0=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,a]=cs.useState(!1),r=cs.useRef(!1),s=cs.useRef(new Set([])),[i,o]=cs.useMemo((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"==typeof e)).map((e=>e.split("+"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return cs.useEffect((()=>{const n="undefined"!=typeof document?document:null,l=(null==t?void 0:t.target)||n;if(null!==e){const e=e=>{r.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!r.current||r.current&&!t.actInsideInputWithModifier)&&CX(e))return!1;const n=t1(e.code,o);s.current.add(e[n]),e1(i,s.current,!1)&&(e.preventDefault(),a(!0))},n=e=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&CX(e))return!1;const n=t1(e.code,o);e1(i,s.current,!0)?(a(!1),s.current.clear()):s.current.delete(e[n]),"Meta"===e.key&&s.current.clear(),r.current=!1},c=()=>{s.current.clear(),a(!1)};return null==l||l.addEventListener("keydown",e),null==l||l.addEventListener("keyup",n),window.addEventListener("blur",c),()=>{null==l||l.removeEventListener("keydown",e),null==l||l.removeEventListener("keyup",n),window.removeEventListener("blur",c)}}}),[e,a]),n};function e1(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function t1(e,t){return t.includes(e)?"code":"key"}function n1(e,t,n,a){var r,s;const i=e.parentNode||e.parentId;if(!i)return n;const o=t.get(i),l=u0(o,a);return n1(o,t,{x:(n.x??0)+l.x,y:(n.y??0)+l.y,z:((null==(r=o[jX])?void 0:r.z)??0)>(n.z??0)?(null==(s=o[jX])?void 0:s.z)??0:n.z??0},a)}function a1(e,t,n){e.forEach((a=>{var r;const s=a.parentNode||a.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||(null==n?void 0:n[a.id])){const{x:s,y:i,z:o}=n1(a,e,{...a.position,z:(null==(r=a[jX])?void 0:r.z)??0},t);a.positionAbsolute={x:s,y:i},a[jX].z=o,(null==n?void 0:n[a.id])&&(a[jX].isParent=!0)}}))}function r1(e,t,n,a){const r=new Map,s={},i=a?1e3:0;return e.forEach((e=>{var n;const a=(wX(e.zIndex)?e.zIndex:0)+(e.selected?i:0),o=t.get(e.id),l={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},c=e.parentNode||e.parentId;c&&(s[c]=!0);const d=(null==o?void 0:o.type)&&(null==o?void 0:o.type)!==e.type;Object.defineProperty(l,jX,{enumerable:!1,value:{handleBounds:d||null==(n=null==o?void 0:o[jX])?void 0:n.handleBounds,z:a}}),r.set(e.id,l)})),a1(r,n,s),r}function s1(e,t={}){const{getNodes:n,width:a,height:r,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:d,nodeOrigin:u}=e(),f=t.initial&&!c&&d;if(o&&l&&(f||!t.initial)){const e=n().filter((e=>{var n;const a=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return(null==(n=t.nodes)?void 0:n.length)?a&&t.nodes.some((t=>t.id===e.id)):a})),c=e.every((e=>e.width&&e.height));if(e.length>0&&c){const n=f0(e,u),{x:c,y:d,zoom:f}=h0(n,a,r,t.minZoom??s,t.maxZoom??i,t.padding??.1),m=RZ.translate(c,d).scale(f);return"number"==typeof t.duration&&t.duration>0?o.transform(g0(l,t.duration),m):o.transform(l,m),!0}}return!1}function i1(e,t){return e.forEach((e=>{const n=t.get(e.id);n&&t.set(n.id,{...n,[jX]:n[jX],selected:e.selected})})),new Map(t)}function o1(e,t){return t.map((t=>{const n=e.find((e=>e.id===t.id));return n&&(t.selected=n.selected),t}))}function l1({changedNodes:e,changedEdges:t,get:n,set:a}){const{nodeInternals:r,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:c}=n();(null==e?void 0:e.length)&&(l&&a({nodeInternals:i1(e,r)}),null==i||i(e)),(null==t?void 0:t.length)&&(c&&a({edges:o1(t,s)}),null==o||o(t))}const c1=()=>{},d1={zoomIn:c1,zoomOut:c1,zoomTo:c1,getZoom:()=>1,setViewport:c1,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:c1,fitBounds:c1,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},u1=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection});function f1(){const e=(()=>{const e=sX(),{d3Zoom:t,d3Selection:n}=rX(u1,rQ),a=cs.useMemo((()=>n&&t?{zoomIn:e=>t.scaleBy(g0(n,null==e?void 0:e.duration),1.2),zoomOut:e=>t.scaleBy(g0(n,null==e?void 0:e.duration),1/1.2),zoomTo:(e,a)=>t.scaleTo(g0(n,null==a?void 0:a.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(a,r)=>{const[s,i,o]=e.getState().transform,l=RZ.translate(a.x??s,a.y??i).scale(a.zoom??o);t.transform(g0(n,null==r?void 0:r.duration),l)},getViewport:()=>{const[t,n,a]=e.getState().transform;return{x:t,y:n,zoom:a}},fitView:t=>s1(e.getState,t),setCenter:(a,r,s)=>{const{width:i,height:o,maxZoom:l}=e.getState(),c=void 0!==(null==s?void 0:s.zoom)?s.zoom:l,d=i/2-a*c,u=o/2-r*c,f=RZ.translate(d,u).scale(c);t.transform(g0(n,null==s?void 0:s.duration),f)},fitBounds:(a,r)=>{const{width:s,height:i,minZoom:o,maxZoom:l}=e.getState(),{x:c,y:d,zoom:u}=h0(a,s,i,o,l,(null==r?void 0:r.padding)??.1),f=RZ.translate(c,d).scale(u);t.transform(g0(n,null==r?void 0:r.duration),f)},project:t=>{const{transform:n,snapToGrid:a,snapGrid:r}=e.getState();return c0(t,n,a,r)},screenToFlowPosition:t=>{const{transform:n,snapToGrid:a,snapGrid:r,domNode:s}=e.getState();if(!s)return t;const{x:i,y:o}=s.getBoundingClientRect(),l={x:t.x-i,y:t.y-o};return c0(l,n,a,r)},flowToScreenPosition:t=>{const{transform:n,domNode:a}=e.getState();if(!a)return t;const{x:r,y:s}=a.getBoundingClientRect(),i=d0(t,n);return{x:i.x+r,y:i.y+s}},viewportInitialized:!0}:d1),[t,n]);return a})(),t=sX(),n=cs.useCallback((()=>t.getState().getNodes().map((e=>({...e})))),[]),a=cs.useCallback((e=>t.getState().nodeInternals.get(e)),[]),r=cs.useCallback((()=>{const{edges:e=[]}=t.getState();return e.map((e=>({...e})))}),[]),s=cs.useCallback((e=>{const{edges:n=[]}=t.getState();return n.find((t=>t.id===e))}),[]),i=cs.useCallback((e=>{const{getNodes:n,setNodes:a,hasDefaultNodes:r,onNodesChange:s}=t.getState(),i=n(),o="function"==typeof e?e(i):e;if(r)a(o);else if(s){s(0===o.length?i.map((e=>({type:"remove",id:e.id}))):o.map((e=>({item:e,type:"reset"}))))}}),[]),o=cs.useCallback((e=>{const{edges:n=[],setEdges:a,hasDefaultEdges:r,onEdgesChange:s}=t.getState(),i="function"==typeof e?e(n):e;if(r)a(i);else if(s){s(0===i.length?n.map((e=>({type:"remove",id:e.id}))):i.map((e=>({item:e,type:"reset"}))))}}),[]),l=cs.useCallback((e=>{const n=Array.isArray(e)?e:[e],{getNodes:a,setNodes:r,hasDefaultNodes:s,onNodesChange:i}=t.getState();if(s){r([...a(),...n])}else if(i){i(n.map((e=>({item:e,type:"add"}))))}}),[]),c=cs.useCallback((e=>{const n=Array.isArray(e)?e:[e],{edges:a=[],setEdges:r,hasDefaultEdges:s,onEdgesChange:i}=t.getState();if(s)r([...a,...n]);else if(i){i(n.map((e=>({item:e,type:"add"}))))}}),[]),d=cs.useCallback((()=>{const{getNodes:e,edges:n=[],transform:a}=t.getState(),[r,s,i]=a;return{nodes:e().map((e=>({...e}))),edges:n.map((e=>({...e}))),viewport:{x:r,y:s,zoom:i}}}),[]),u=cs.useCallback((({nodes:e,edges:n})=>{const{nodeInternals:a,getNodes:r,edges:s,hasDefaultNodes:i,hasDefaultEdges:o,onNodesDelete:l,onEdgesDelete:c,onNodesChange:d,onEdgesChange:u}=t.getState(),f=(e||[]).map((e=>e.id)),m=(n||[]).map((e=>e.id)),p=r().reduce(((e,t)=>{const n=t.parentNode||t.parentId,a=!f.includes(t.id)&&n&&e.find((e=>e.id===n));return("boolean"!=typeof t.deletable||t.deletable)&&(f.includes(t.id)||a)&&e.push(t),e}),[]),h=s.filter((e=>"boolean"!=typeof e.deletable||e.deletable)),g=h.filter((e=>m.includes(e.id)));if(p||g){const e=p0(p,h),n=[...g,...e],r=n.reduce(((e,t)=>(e.includes(t.id)||e.push(t.id),e)),[]);if((o||i)&&(o&&t.setState({edges:s.filter((e=>!r.includes(e.id)))}),i&&(p.forEach((e=>{a.delete(e.id)})),t.setState({nodeInternals:new Map(a)}))),r.length>0&&(null==c||c(n),u&&u(r.map((e=>({id:e,type:"remove"}))))),p.length>0&&(null==l||l(p),d)){d(p.map((e=>({id:e.id,type:"remove"}))))}}}),[]),f=cs.useCallback((e=>{const n=wX((a=e).width)&&wX(a.height)&&wX(a.x)&&wX(a.y);var a;const r=n?null:t.getState().nodeInternals.get(e.id);if(!n&&!r)return[null,null,n];return[n?e:vX(r),r,n]}),[]),m=cs.useCallback(((e,n=!0,a)=>{const[r,s,i]=f(e);return r?(a||t.getState().getNodes()).filter((e=>{if(!(i||e.id!==s.id&&e.positionAbsolute))return!1;const t=vX(e),a=bX(t,r);return n&&a>0||a>=r.width*r.height})):[]}),[]),p=cs.useCallback(((e,t,n=!0)=>{const[a]=f(e);if(!a)return!1;const r=bX(a,t);return n&&r>0||r>=a.width*a.height}),[]);return cs.useMemo((()=>({...e,getNodes:n,getNode:a,getEdges:r,getEdge:s,setNodes:i,setEdges:o,addNodes:l,addEdges:c,toObject:d,deleteElements:u,getIntersectingNodes:m,isNodeIntersecting:p})),[e,n,a,r,s,i,o,l,c,d,u,m,p])}const m1={actInsideInputWithModifier:!1};const p1={position:"absolute",width:"100%",height:"100%",top:0,left:0},h1=e=>({x:e.x,y:e.y,zoom:e.k}),g1=(e,t)=>e.target.closest(`.${t}`),x1=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),y1=e=>{const t=e.ctrlKey&&MX()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},v1=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),b1=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:a,zoomOnScroll:r=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=DX.Free,zoomOnDoubleClick:c=!0,elementsSelectable:d,panOnDrag:u=!0,defaultViewport:f,translateExtent:m,minZoom:p,maxZoom:h,zoomActivationKeyCode:g,preventScrolling:x=!0,children:y,noWheelClassName:v,noPanClassName:b})=>{const w=cs.useRef(),j=sX(),N=cs.useRef(!1),C=cs.useRef(!1),S=cs.useRef(null),k=cs.useRef({x:0,y:0,zoom:0}),{d3Zoom:M,d3Selection:_,d3ZoomHandler:I,userSelectionActive:A}=rX(v1,rQ),E=X0(g),L=cs.useRef(0),T=cs.useRef(!1),D=cs.useRef();return function(e){const t=sX();cs.useEffect((()=>{let n;const a=()=>{var n,a;if(!e.current)return;const r=dX(e.current);0!==r.height&&0!==r.width||null==(a=(n=t.getState()).onError)||a.call(n,"004",KZ()),t.setState({width:r.width||500,height:r.height||500})};return a(),window.addEventListener("resize",a),e.current&&(n=new ResizeObserver((()=>a())),n.observe(e.current)),()=>{window.removeEventListener("resize",a),n&&e.current&&n.unobserve(e.current)}}),[])}(S),cs.useEffect((()=>{if(S.current){const e=S.current.getBoundingClientRect(),t=qZ().scaleExtent([p,h]).translateExtent(m),n=jK(S.current).call(t),a=RZ.translate(f.x,f.y).scale(uX(f.zoom,p,h)),r=[[0,0],[e.width,e.height]],s=t.constrain()(a,r,m);t.transform(n,s),t.wheelDelta(y1),j.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[s.x,s.y,s.k],domNode:S.current.closest(".react-flow")})}}),[]),cs.useEffect((()=>{_&&M&&(!i||E||A?void 0!==I&&_.on("wheel.zoom",(function(e,t){if(!x&&"wheel"===e.type&&!e.ctrlKey||g1(e,v))return null;e.preventDefault(),I.call(this,e,t)}),{passive:!1}):_.on("wheel.zoom",(a=>{if(g1(a,v))return!1;a.preventDefault(),a.stopImmediatePropagation();const r=_.property("__zoom").k||1;if(a.ctrlKey&&s){const e=NK(a),t=y1(a),n=r*Math.pow(2,t);return void M.scaleTo(_,n,e,a)}const i=1===a.deltaMode?20:1;let c=l===DX.Vertical?0:a.deltaX*i,d=l===DX.Horizontal?0:a.deltaY*i;!MX()&&a.shiftKey&&l!==DX.Vertical&&(c=a.deltaY*i,d=0),M.translateBy(_,-c/r*o,-d/r*o,{internal:!0});const u=h1(_.property("__zoom")),{onViewportChangeStart:f,onViewportChange:m,onViewportChangeEnd:p}=j.getState();clearTimeout(D.current),T.current||(T.current=!0,null==t||t(a,u),null==f||f(u)),T.current&&(null==e||e(a,u),null==m||m(u),D.current=setTimeout((()=>{null==n||n(a,u),null==p||p(u),T.current=!1}),150))}),{passive:!1}))}),[A,i,l,_,M,I,E,s,x,v,t,e,n]),cs.useEffect((()=>{M&&M.on("start",(e=>{var n,a;if(!e.sourceEvent||e.sourceEvent.internal)return null;L.current=null==(n=e.sourceEvent)?void 0:n.button;const{onViewportChangeStart:r}=j.getState(),s=h1(e.transform);N.current=!0,k.current=s,"mousedown"===(null==(a=e.sourceEvent)?void 0:a.type)&&j.setState({paneDragging:!0}),null==r||r(s),null==t||t(e.sourceEvent,s)}))}),[M,t]),cs.useEffect((()=>{M&&(A&&!N.current?M.on("zoom",null):A||M.on("zoom",(t=>{var n;const{onViewportChange:r}=j.getState();if(j.setState({transform:[t.transform.x,t.transform.y,t.transform.k]}),C.current=!(!a||!x1(u,L.current??0)),(e||r)&&!(null==(n=t.sourceEvent)?void 0:n.internal)){const n=h1(t.transform);null==r||r(n),null==e||e(t.sourceEvent,n)}})))}),[A,M,e,u,a]),cs.useEffect((()=>{M&&M.on("end",(e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;const{onViewportChangeEnd:t}=j.getState();if(N.current=!1,j.setState({paneDragging:!1}),a&&x1(u,L.current??0)&&!C.current&&a(e.sourceEvent),C.current=!1,(n||t)&&(r=k.current,s=e.transform,r.x!==s.x||r.y!==s.y||r.zoom!==s.k)){const a=h1(e.transform);k.current=a,clearTimeout(w.current),w.current=setTimeout((()=>{null==t||t(a),null==n||n(e.sourceEvent,a)}),i?150:0)}var r,s}))}),[M,i,u,n,a]),cs.useEffect((()=>{M&&M.filter((e=>{const t=E||r,n=s&&e.ctrlKey;if((!0===u||Array.isArray(u)&&u.includes(1))&&1===e.button&&"mousedown"===e.type&&(g1(e,"react-flow__node")||g1(e,"react-flow__edge")))return!0;if(!(u||t||i||c||s))return!1;if(A)return!1;if(!c&&"dblclick"===e.type)return!1;if(g1(e,v)&&"wheel"===e.type)return!1;if(g1(e,b)&&("wheel"!==e.type||i&&"wheel"===e.type&&!E))return!1;if(!s&&e.ctrlKey&&"wheel"===e.type)return!1;if(!t&&!i&&!n&&"wheel"===e.type)return!1;if(!u&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(u)&&!u.includes(e.button)&&"mousedown"===e.type)return!1;const a=Array.isArray(u)&&u.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&a}))}),[A,M,r,s,i,c,u,d,E]),ds.createElement("div",{className:"react-flow__renderer",ref:S,style:p1},y)},w1=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function j1(){const{userSelectionActive:e,userSelectionRect:t}=rX(w1,rQ);return e&&t?ds.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function N1(e,t){const n=t.parentNode||t.parentId,a=e.find((e=>e.id===n));if(a){const e=t.position.x+t.width-a.width,n=t.position.y+t.height-a.height;if(e>0||n>0||t.position.x<0||t.position.y<0){if(a.style={...a.style},a.style.width=a.style.width??a.width,a.style.height=a.style.height??a.height,e>0&&(a.style.width+=e),n>0&&(a.style.height+=n),t.position.x<0){const e=Math.abs(t.position.x);a.position.x=a.position.x-e,a.style.width+=e,t.position.x=0}if(t.position.y<0){const e=Math.abs(t.position.y);a.position.y=a.position.y-e,a.style.height+=e,t.position.y=0}a.width=a.style.width,a.height=a.style.height}}}function C1(e,t){if(e.some((e=>"reset"===e.type)))return e.filter((e=>"reset"===e.type)).map((e=>e.item));const n=e.filter((e=>"add"===e.type)).map((e=>e.item));return t.reduce(((t,n)=>{const a=e.filter((e=>e.id===n.id));if(0===a.length)return t.push(n),t;const r={...n};for(const e of a)if(e)switch(e.type){case"select":r.selected=e.selected;break;case"position":void 0!==e.position&&(r.position=e.position),void 0!==e.positionAbsolute&&(r.positionAbsolute=e.positionAbsolute),void 0!==e.dragging&&(r.dragging=e.dragging),r.expandParent&&N1(t,r);break;case"dimensions":void 0!==e.dimensions&&(r.width=e.dimensions.width,r.height=e.dimensions.height),void 0!==e.updateStyle&&(r.style={...r.style||{},...e.dimensions}),"boolean"==typeof e.resizing&&(r.resizing=e.resizing),r.expandParent&&N1(t,r);break;case"remove":return t}return t.push(r),t}),n)}function S1(e,t){return C1(e,t)}const k1=(e,t)=>({id:e,type:"select",selected:t});function M1(e,t){return e.reduce(((e,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,e.push(k1(n.id,!0))):n.selected&&!a&&(n.selected=!1,e.push(k1(n.id,!1))),e}),[])}const _1=(e,t)=>n=>{n.target===t.current&&(null==e||e(n))},I1=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),A1=cs.memo((({isSelecting:e,selectionMode:t=OX.Full,panOnDrag:n,onSelectionStart:a,onSelectionEnd:r,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:d,children:u})=>{const f=cs.useRef(null),m=sX(),p=cs.useRef(0),h=cs.useRef(0),g=cs.useRef(),{userSelectionActive:x,elementsSelectable:y,dragging:v}=rX(I1,rQ),b=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,h.current=0},w=e=>{null==s||s(e),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},j=o?e=>o(e):void 0,N=y&&(e||x);return ds.createElement("div",{className:BY(["react-flow__pane",{dragging:v,selection:e}]),onClick:N?void 0:_1(w,f),onContextMenu:_1((e=>{Array.isArray(n)&&(null==n?void 0:n.includes(2))?e.preventDefault():null==i||i(e)}),f),onWheel:_1(j,f),onMouseEnter:N?void 0:l,onMouseDown:N?t=>{const{resetSelectedElements:n,domNode:r}=m.getState();if(g.current=null==r?void 0:r.getBoundingClientRect(),!y||!e||0!==t.button||t.target!==f.current||!g.current)return;const{x:s,y:i}=kX(t,g.current);n(),m.setState({userSelectionRect:{width:0,height:0,startX:s,startY:i,x:s,y:i}}),null==a||a(t)}:void 0,onMouseMove:N?n=>{const{userSelectionRect:a,nodeInternals:r,edges:s,transform:i,onNodesChange:o,onEdgesChange:l,nodeOrigin:c,getNodes:d}=m.getState();if(!e||!g.current||!a)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const u=kX(n,g.current),f=a.startX??0,x=a.startY??0,y={...a,x:u.x<f?u.x:f,y:u.y<x?u.y:x,width:Math.abs(u.x-f),height:Math.abs(u.y-x)},v=d(),b=m0(r,y,i,t===OX.Partial,!0,c),w=p0(b,s).map((e=>e.id)),j=b.map((e=>e.id));if(p.current!==j.length){p.current=j.length;const e=M1(v,j);e.length&&(null==o||o(e))}if(h.current!==w.length){h.current=w.length;const e=M1(s,w);e.length&&(null==l||l(e))}m.setState({userSelectionRect:y})}:c,onMouseUp:N?e=>{if(0!==e.button)return;const{userSelectionRect:t}=m.getState();!x&&t&&e.target===f.current&&(null==w||w(e)),m.setState({nodesSelectionActive:p.current>0}),b(),null==r||r(e)}:void 0,onMouseLeave:N?e=>{x&&(m.setState({nodesSelectionActive:p.current>0}),null==r||r(e)),b()}:d,ref:f,style:p1},u,ds.createElement(j1,null))}));function E1(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const a=t.get(n);return!!a&&(!!a.selected||E1(a,t))}function L1(e,t,n){let a=e;do{if(null==a?void 0:a.matches(t))return!0;if(a===n.current)return!1;a=a.parentElement}while(a);return!1}function T1(e,t,n,a){return Array.from(e.values()).filter((n=>(n.selected||n.id===a)&&(!n.parentNode||n.parentId||!E1(n,e))&&(n.draggable||t&&void 0===n.draggable))).map((e=>{var t,a;return{id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-((null==(t=e.positionAbsolute)?void 0:t.x)??0),y:n.y-((null==(a=e.positionAbsolute)?void 0:a.y)??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}}))}function D1(e,t,n,a,r=[0,0],s){const i=function(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]:t}(e,e.extent||a);let o=i;const l=e.parentNode||e.parentId;if("parent"!==e.extent||e.expandParent){if(e.extent&&l&&"parent"!==e.extent){const t=n.get(l),{x:a,y:s}=u0(t,r).positionAbsolute;o=[[e.extent[0][0]+a,e.extent[0][1]+s],[e.extent[1][0]+a,e.extent[1][1]+s]]}}else if(l&&e.width&&e.height){const t=n.get(l),{x:a,y:s}=u0(t,r).positionAbsolute;o=t&&wX(a)&&wX(s)&&wX(t.width)&&wX(t.height)?[[a+e.width*r[0],s+e.height*r[1]],[a+t.width-e.width+e.width*r[0],s+t.height-e.height+e.height*r[1]]]:o}else null==s||s("005",JZ()),o=i;let c={x:0,y:0};if(l){const e=n.get(l);c=u0(e,r).positionAbsolute}const d=o&&"parent"!==o?fX(t,o):t;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function P1({nodeId:e,dragItems:t,nodeInternals:n}){const a=t.map((e=>({...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute})));return[e?a.find((t=>t.id===e)):a[0],a]}A1.displayName="Pane";const O1=(e,t,n,a)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const s=Array.from(r),i=t.getBoundingClientRect(),o=i.width*a[0],l=i.height*a[1];return s.map((e=>{const t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-i.left-o)/n,y:(t.top-i.top-l)/n,...dX(e)}}))};function R1(e,t,n){return void 0===n?n:a=>{const r=t().nodeInternals.get(e);r&&n(a,{...r})}}function z1({id:e,store:t,unselect:n=!1,nodeRef:a}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:l}=t.getState(),c=o.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&i)&&(s({nodes:[c],edges:[]}),requestAnimationFrame((()=>{var e;return null==(e=null==a?void 0:a.current)?void 0:e.blur()}))):r([e])):null==l||l("012",nX(e))}function F1(e){return(t,n,a)=>null==e?void 0:e(t,a)}function B1({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:a,nodeId:r,isSelectable:s,selectNodesOnDrag:i}){const o=sX(),[l,c]=cs.useState(!1),d=cs.useRef([]),u=cs.useRef({x:null,y:null}),f=cs.useRef(0),m=cs.useRef(null),p=cs.useRef({x:0,y:0}),h=cs.useRef(null),g=cs.useRef(!1),x=cs.useRef(!1),y=cs.useRef(!1),v=function(){const e=sX();return cs.useCallback((({sourceEvent:t})=>{const{transform:n,snapGrid:a,snapToGrid:r}=e.getState(),s=t.touches?t.touches[0].clientX:t.clientX,i=t.touches?t.touches[0].clientY:t.clientY,o={x:(s-n[0])/n[2],y:(i-n[1])/n[2]};return{xSnapped:r?a[0]*Math.round(o.x/a[0]):o.x,ySnapped:r?a[1]*Math.round(o.y/a[1]):o.y,...o}}),[])}();return cs.useEffect((()=>{if(null==e?void 0:e.current){const l=jK(e.current),b=({x:e,y:t})=>{const{nodeInternals:n,onNodeDrag:a,onSelectionDrag:s,updateNodePositions:i,nodeExtent:l,snapGrid:f,snapToGrid:m,nodeOrigin:p,onError:g}=o.getState();u.current={x:e,y:t};let x=!1,y={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&l){const e=f0(d.current,p);y=xX(e)}if(d.current=d.current.map((a=>{const r={x:e-a.distance.x,y:t-a.distance.y};m&&(r.x=f[0]*Math.round(r.x/f[0]),r.y=f[1]*Math.round(r.y/f[1]));const s=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];d.current.length>1&&l&&!a.extent&&(s[0][0]=a.positionAbsolute.x-y.x+l[0][0],s[1][0]=a.positionAbsolute.x+(a.width??0)-y.x2+l[1][0],s[0][1]=a.positionAbsolute.y-y.y+l[0][1],s[1][1]=a.positionAbsolute.y+(a.height??0)-y.y2+l[1][1]);const i=D1(a,r,n,s,p,g);return x=x||a.position.x!==i.position.x||a.position.y!==i.position.y,a.position=i.position,a.positionAbsolute=i.positionAbsolute,a})),!x)return;i(d.current,!0,!0),c(!0);const v=r?a:F1(s);if(v&&h.current){const[e,t]=P1({nodeId:r,dragItems:d.current,nodeInternals:n});v(h.current,e,t)}},w=()=>{if(!m.current)return;const[e,t]=pX(p.current,m.current);if(0!==e||0!==t){const{transform:n,panBy:a}=o.getState();u.current.x=(u.current.x??0)-e/n[2],u.current.y=(u.current.y??0)-t/n[2],a({x:e,y:t})&&b(u.current)}f.current=requestAnimationFrame(w)},j=t=>{var n;const{nodeInternals:a,multiSelectionActive:l,nodesDraggable:c,unselectNodesAndEdges:f,onNodeDragStart:m,onSelectionDragStart:p}=o.getState();x.current=!0;const h=r?m:F1(p);i&&s||l||!r||(null==(n=a.get(r))?void 0:n.selected)||f(),r&&s&&i&&z1({id:r,store:o,nodeRef:e});const g=v(t);if(u.current=g,d.current=T1(a,c,g,r),h&&d.current){const[e,n]=P1({nodeId:r,dragItems:d.current,nodeInternals:a});h(t.sourceEvent,e,n)}};if(!t){const t=function(){var e,t,n,a,r=LK,s=TK,i=DK,o=PK,l={},c=iQ("start","drag","end"),d=0,u=0;function f(e){e.on("mousedown.drag",m).filter(o).on("touchstart.drag",g).on("touchmove.drag",x,CK).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(i,o){if(!a&&r.call(this,i,o)){var l=v(this,s.call(this,i,o),i,o,"mouse");l&&(jK(i.view).on("mousemove.drag",p,SK).on("mouseup.drag",h,SK),_K(i.view),kK(i),n=!1,e=i.clientX,t=i.clientY,l("start",i))}}function p(a){if(MK(a),!n){var r=a.clientX-e,s=a.clientY-t;n=r*r+s*s>u}l.mouse("drag",a)}function h(e){jK(e.view).on("mousemove.drag mouseup.drag",null),IK(e.view,n),MK(e),l.mouse("end",e)}function g(e,t){if(r.call(this,e,t)){var n,a,i=e.changedTouches,o=s.call(this,e,t),l=i.length;for(n=0;n<l;++n)(a=v(this,o,e,t,i[n].identifier,i[n]))&&(kK(e),a("start",e,i[n]))}}function x(e){var t,n,a=e.changedTouches,r=a.length;for(t=0;t<r;++t)(n=l[a[t].identifier])&&(MK(e),n("drag",e,a[t]))}function y(e){var t,n,r=e.changedTouches,s=r.length;for(a&&clearTimeout(a),a=setTimeout((function(){a=null}),500),t=0;t<s;++t)(n=l[r[t].identifier])&&(kK(e),n("end",e,r[t]))}function v(e,t,n,a,r,s){var o,u,m,p=c.copy(),h=NK(s||n,t);if(null!=(m=i.call(e,new EK("beforestart",{sourceEvent:n,target:f,identifier:r,active:d,x:h[0],y:h[1],dx:0,dy:0,dispatch:p}),a)))return o=m.x-h[0]||0,u=m.y-h[1]||0,function n(s,i,c){var g,x=h;switch(s){case"start":l[r]=n,g=d++;break;case"end":delete l[r],--d;case"drag":h=NK(c||i,t),g=d}p.call(s,e,new EK(s,{sourceEvent:i,subject:m,target:f,identifier:r,active:g,x:h[0]+o,y:h[1]+u,dx:h[0]-x[0],dy:h[1]-x[1],dispatch:p}),a)}}return f.filter=function(e){return arguments.length?(r="function"==typeof e?e:AK(!!e),f):r},f.container=function(e){return arguments.length?(s="function"==typeof e?e:AK(e),f):s},f.subject=function(e){return arguments.length?(i="function"==typeof e?e:AK(e),f):i},f.touchable=function(e){return arguments.length?(o="function"==typeof e?e:AK(!!e),f):o},f.on=function(){var e=c.on.apply(c,arguments);return e===c?f:e},f.clickDistance=function(e){return arguments.length?(u=(e=+e)*e,f):Math.sqrt(u)},f}().on("start",(e=>{const{domNode:t,nodeDragThreshold:n}=o.getState();0===n&&j(e),y.current=!1;const a=v(e);u.current=a,m.current=(null==t?void 0:t.getBoundingClientRect())||null,p.current=kX(e.sourceEvent,m.current)})).on("drag",(e=>{var t,n;const a=v(e),{autoPanOnNodeDrag:r,nodeDragThreshold:s}=o.getState();if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!g.current&&x.current&&r&&(g.current=!0,w()),!x.current){const r=a.xSnapped-((null==(t=null==u?void 0:u.current)?void 0:t.x)??0),i=a.ySnapped-((null==(n=null==u?void 0:u.current)?void 0:n.y)??0);Math.sqrt(r*r+i*i)>s&&j(e)}(u.current.x!==a.xSnapped||u.current.y!==a.ySnapped)&&d.current&&x.current&&(h.current=e.sourceEvent,p.current=kX(e.sourceEvent,m.current),b(a))}})).on("end",(e=>{if(x.current&&!y.current&&(c(!1),g.current=!1,x.current=!1,cancelAnimationFrame(f.current),d.current)){const{updateNodePositions:t,nodeInternals:n,onNodeDragStop:a,onSelectionDragStop:s}=o.getState(),i=r?a:F1(s);if(t(d.current,!1,!1),i){const[t,a]=P1({nodeId:r,dragItems:d.current,nodeInternals:n});i(e.sourceEvent,t,a)}}})).filter((t=>{const r=t.target;return!t.button&&(!n||!L1(r,`.${n}`,e))&&(!a||L1(r,a,e))}));return l.call(t),()=>{l.on(".drag",null)}}l.on(".drag",null)}}),[e,t,n,a,s,o,r,i,v]),l}function U1(){const e=sX();return cs.useCallback((t=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:r,getNodes:s,snapToGrid:i,snapGrid:o,onError:l,nodesDraggable:c}=e.getState(),d=s().filter((e=>e.selected&&(e.draggable||c&&void 0===e.draggable))),u=i?o[0]:5,f=i?o[1]:5,m=t.isShiftPressed?4:1,p=t.x*u*m,h=t.y*f*m;r(d.map((e=>{if(e.positionAbsolute){const t={x:e.positionAbsolute.x+p,y:e.positionAbsolute.y+h};i&&(t.x=o[0]*Math.round(t.x/o[0]),t.y=o[1]*Math.round(t.y/o[1]));const{positionAbsolute:r,position:s}=D1(e,t,n,a,void 0,l);e.position=s,e.positionAbsolute=r}return e})),!0,!1)}),[])}const W1={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var G1=e=>{const t=({id:t,type:n,data:a,xPos:r,yPos:s,xPosOrigin:i,yPosOrigin:o,selected:l,onClick:c,onMouseEnter:d,onMouseMove:u,onMouseLeave:f,onContextMenu:m,onDoubleClick:p,style:h,className:g,isDraggable:x,isSelectable:y,isConnectable:v,isFocusable:b,selectNodesOnDrag:w,sourcePosition:j,targetPosition:N,hidden:C,resizeObserver:S,dragHandle:k,zIndex:M,isParent:_,noDragClassName:I,noPanClassName:A,initialized:E,disableKeyboardA11y:L,ariaLabel:T,rfId:D,hasHandleBounds:P})=>{const O=sX(),R=cs.useRef(null),z=cs.useRef(null),F=cs.useRef(j),B=cs.useRef(N),U=cs.useRef(n),W=y||x||c||d||u||f,G=U1(),V=R1(t,O.getState,d),H=R1(t,O.getState,u),q=R1(t,O.getState,f),$=R1(t,O.getState,m),Y=R1(t,O.getState,p);cs.useEffect((()=>()=>{z.current&&(null==S||S.unobserve(z.current),z.current=null)}),[]),cs.useEffect((()=>{if(R.current&&!C){const e=R.current;E&&P&&z.current===e||(z.current&&(null==S||S.unobserve(z.current)),null==S||S.observe(e),z.current=e)}}),[C,E,P]),cs.useEffect((()=>{const e=U.current!==n,a=F.current!==j,r=B.current!==N;R.current&&(e||a||r)&&(e&&(U.current=n),a&&(F.current=j),r&&(B.current=N),O.getState().updateNodeDimensions([{id:t,nodeElement:R.current,forceUpdate:!0}]))}),[t,n,j,N]);const Q=B1({nodeRef:R,disabled:C||!x,noDragClassName:I,handleSelector:k,nodeId:t,isSelectable:y,selectNodesOnDrag:w});return C?null:ds.createElement("div",{className:BY(["react-flow__node",`react-flow__node-${n}`,{[A]:x},g,{selected:l,selectable:y,parent:_,dragging:Q}]),ref:R,style:{zIndex:M,transform:`translate(${i}px,${o}px)`,pointerEvents:W?"all":"none",visibility:E?"visible":"hidden",...h},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:V,onMouseMove:H,onMouseLeave:q,onContextMenu:$,onClick:e=>{const{nodeDragThreshold:n}=O.getState();if(y&&(!w||!x||n>0)&&z1({id:t,store:O,nodeRef:R}),c){const n=O.getState().nodeInternals.get(t);n&&c(e,{...n})}},onDoubleClick:Y,onKeyDown:b?e=>{if(!CX(e)&&!L)if(NX.includes(e.key)&&y){const n="Escape"===e.key;z1({id:t,store:O,unselect:n,nodeRef:R})}else x&&l&&Object.prototype.hasOwnProperty.call(W1,e.key)&&(O.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~r}, y: ${~~s}`}),G({x:W1[e.key].x,y:W1[e.key].y,isShiftPressed:e.shiftKey}))}:void 0,tabIndex:b?0:void 0,role:b?"button":void 0,"aria-describedby":L?void 0:`${Y0}-${D}`,"aria-label":T},ds.createElement(s0,{value:t},ds.createElement(e,{id:t,data:a,type:n,xPos:r,yPos:s,selected:l,isConnectable:v,sourcePosition:j,targetPosition:N,dragging:Q,dragHandle:k,zIndex:M})))};return t.displayName="NodeWrapper",cs.memo(t)};const V1=e=>{const t=e.getNodes().filter((e=>e.selected));return{...f0(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};var H1=cs.memo((function({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const a=sX(),{width:r,height:s,x:i,y:o,transformString:l,userSelectionActive:c}=rX(V1,rQ),d=U1(),u=cs.useRef(null);if(cs.useEffect((()=>{var e;n||null==(e=u.current)||e.focus({preventScroll:!0})}),[n]),B1({nodeRef:u}),c||!r||!s)return null;const f=e?t=>{const n=a.getState().getNodes().filter((e=>e.selected));e(t,n)}:void 0;return ds.createElement("div",{className:BY(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},ds.createElement("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(W1,e.key)&&d({x:W1[e.key].x,y:W1[e.key].y,isShiftPressed:e.shiftKey})},style:{width:r,height:s,top:o,left:i}}))}));const q1=e=>e.nodesSelectionActive,$1=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:c,onMoveEnd:d,selectionKeyCode:u,selectionOnDrag:f,selectionMode:m,onSelectionStart:p,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:x,zoomActivationKeyCode:y,elementsSelectable:v,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:j,panOnScrollSpeed:N,panOnScrollMode:C,zoomOnDoubleClick:S,panOnDrag:k,defaultViewport:M,translateExtent:_,minZoom:I,maxZoom:A,preventScrolling:E,onSelectionContextMenu:L,noWheelClassName:T,noPanClassName:D,disableKeyboardA11y:P})=>{const O=rX(q1),R=X0(u),z=X0(x),F=z||k,B=z||j,U=R||f&&!0!==F;return(({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=sX(),{deleteElements:a}=f1(),r=X0(e,m1),s=X0(t);cs.useEffect((()=>{if(r){const{edges:e,getNodes:t}=n.getState(),r=t().filter((e=>e.selected)),s=e.filter((e=>e.selected));a({nodes:r,edges:s}),n.setState({nodesSelectionActive:!1})}}),[r]),cs.useEffect((()=>{n.setState({multiSelectionActive:s})}),[s])})({deleteKeyCode:o,multiSelectionKeyCode:g}),ds.createElement(b1,{onMove:l,onMoveStart:c,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:v,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:B,panOnScrollSpeed:N,panOnScrollMode:C,zoomOnDoubleClick:S,panOnDrag:!R&&F,defaultViewport:M,translateExtent:_,minZoom:I,maxZoom:A,zoomActivationKeyCode:y,preventScrolling:E,noWheelClassName:T,noPanClassName:D},ds.createElement(A1,{onSelectionStart:p,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:F,isSelecting:!!U,selectionMode:m},e,O&&ds.createElement(H1,{onSelectionContextMenu:L,noPanClassName:D,disableKeyboardA11y:P})))};$1.displayName="FlowRenderer";var Y1=cs.memo($1);function Q1(e){return{...{input:G1(e.input||L0),default:G1(e.default||A0),output:G1(e.output||D0),group:G1(e.group||P0)},...Object.keys(e).filter((e=>!["input","default","output","group"].includes(e))).reduce(((t,n)=>(t[n]=G1(e[n]||A0),t)),{})}}const K1=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),J1=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:a,elementsSelectable:r,updateNodeDimensions:s,onError:i}=rX(K1,rQ),o=(l=e.onlyRenderVisibleElements,rX(cs.useCallback((e=>l?m0(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes()),[l])));var l;const c=cs.useRef(),d=cs.useMemo((()=>{if("undefined"==typeof ResizeObserver)return null;const e=new ResizeObserver((e=>{const t=e.map((e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})));s(t)}));return c.current=e,e}),[]);return cs.useEffect((()=>()=>{var e;null==(e=null==c?void 0:c.current)||e.disconnect()}),[]),ds.createElement("div",{className:"react-flow__nodes",style:p1},o.map((s=>{var o,l,c;let u=s.type||"default";e.nodeTypes[u]||(null==i||i("003",QZ(u)),u="default");const f=e.nodeTypes[u]||e.nodeTypes.default,m=!!(s.draggable||t&&void 0===s.draggable),p=!!(s.selectable||r&&void 0===s.selectable),h=!!(s.connectable||n&&void 0===s.connectable),g=!!(s.focusable||a&&void 0===s.focusable),x=e.nodeExtent?fX(s.positionAbsolute,e.nodeExtent):s.positionAbsolute,y=(null==x?void 0:x.x)??0,v=(null==x?void 0:x.y)??0,b=(({x:e,y:t,width:n,height:a,origin:r})=>n&&a?r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-a*r[1]}:{x:e,y:t})({x:y,y:v,width:s.width??0,height:s.height??0,origin:e.nodeOrigin});return ds.createElement(f,{key:s.id,id:s.id,className:s.className,style:s.style,type:u,data:s.data,sourcePosition:s.sourcePosition||WX.Bottom,targetPosition:s.targetPosition||WX.Top,hidden:s.hidden,xPos:y,yPos:v,xPosOrigin:b.x,yPosOrigin:b.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!s.selected,isDraggable:m,isSelectable:p,isConnectable:h,isFocusable:g,resizeObserver:d,dragHandle:s.dragHandle,zIndex:(null==(o=s[jX])?void 0:o.z)??0,isParent:!!(null==(l=s[jX])?void 0:l.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!s.width&&!!s.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:s.ariaLabel,hasHandleBounds:!!(null==(c=s[jX])?void 0:c.handleBounds)})})))};J1.displayName="NodeRenderer";var Z1=cs.memo(J1);const X1=(e,t,n)=>n===WX.Left?e-t:n===WX.Right?e+t:e,e2=(e,t,n)=>n===WX.Top?e-t:n===WX.Bottom?e+t:e,t2="react-flow__edgeupdater",n2=({position:e,centerX:t,centerY:n,radius:a=10,onMouseDown:r,onMouseEnter:s,onMouseOut:i,type:o})=>ds.createElement("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:i,className:BY([t2,`${t2}-${o}`]),cx:X1(t,a,e),cy:e2(n,a,e),r:a,stroke:"transparent",fill:"transparent"}),a2=()=>!0;var r2=e=>{const t=({id:t,className:n,type:a,data:r,onClick:s,onEdgeDoubleClick:i,selected:o,animated:l,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,style:h,source:g,target:x,sourceX:y,sourceY:v,targetX:b,targetY:w,sourcePosition:j,targetPosition:N,elementsSelectable:C,hidden:S,sourceHandleId:k,targetHandleId:M,onContextMenu:_,onMouseEnter:I,onMouseMove:A,onMouseLeave:E,reconnectRadius:L,onReconnect:T,onReconnectStart:D,onReconnectEnd:P,markerEnd:O,markerStart:R,rfId:z,ariaLabel:F,isFocusable:B,isReconnectable:U,pathOptions:W,interactionWidth:G,disableKeyboardA11y:V})=>{const H=cs.useRef(null),[q,$]=cs.useState(!1),[Y,Q]=cs.useState(!1),K=sX(),J=cs.useMemo((()=>`url('#${o0(R,z)}')`),[R,z]),Z=cs.useMemo((()=>`url('#${o0(O,z)}')`),[O,z]);if(S)return null;const X=IX(t,K.getState,i),ee=IX(t,K.getState,_),te=IX(t,K.getState,I),ne=IX(t,K.getState,A),ae=IX(t,K.getState,E),re=(e,n)=>{if(0!==e.button)return;const{edges:a,isValidConnection:r}=K.getState(),s=n?x:g,i=(n?M:k)||null,o=n?"target":"source",l=r||a2,c=n,d=a.find((e=>e.id===t));Q(!0),null==D||D(e,d,o);C0({event:e,handleId:i,nodeId:s,onConnect:e=>null==T?void 0:T(d,e),isTarget:c,getState:K.getState,setState:K.setState,isValidConnection:l,edgeUpdaterType:o,onReconnectEnd:e=>{Q(!1),null==P||P(e,d,o)}})},se=()=>$(!0),ie=()=>$(!1),oe=!C&&!s;return ds.createElement("g",{className:BY(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:o,animated:l,inactive:oe,updating:q}]),onClick:e=>{var n;const{edges:a,addSelectedEdges:r,unselectNodesAndEdges:i,multiSelectionActive:o}=K.getState(),l=a.find((e=>e.id===t));l&&(C&&(K.setState({nodesSelectionActive:!1}),l.selected&&o?(i({nodes:[],edges:[l]}),null==(n=H.current)||n.blur()):r([t])),s&&s(e,l))},onDoubleClick:X,onContextMenu:ee,onMouseEnter:te,onMouseMove:ne,onMouseLeave:ae,onKeyDown:B?e=>{var n;if(!V&&NX.includes(e.key)&&C){const{unselectNodesAndEdges:a,addSelectedEdges:r,edges:s}=K.getState();"Escape"===e.key?(null==(n=H.current)||n.blur(),a({edges:[s.find((e=>e.id===t))]})):r([t])}}:void 0,tabIndex:B?0:void 0,role:B?"button":"img","data-testid":`rf__edge-${t}`,"aria-label":null===F?void 0:F||`Edge from ${g} to ${x}`,"aria-describedby":B?`${Q0}-${z}`:void 0,ref:H},!Y&&ds.createElement(e,{id:t,source:g,target:x,selected:o,animated:l,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,data:r,style:h,sourceX:y,sourceY:v,targetX:b,targetY:w,sourcePosition:j,targetPosition:N,sourceHandleId:k,targetHandleId:M,markerStart:J,markerEnd:Z,pathOptions:W,interactionWidth:G}),U&&ds.createElement(ds.Fragment,null,("source"===U||!0===U)&&ds.createElement(n2,{position:j,centerX:y,centerY:v,radius:L,onMouseDown:e=>re(e,!0),onMouseEnter:se,onMouseOut:ie,type:"source"}),("target"===U||!0===U)&&ds.createElement(n2,{position:N,centerX:b,centerY:w,radius:L,onMouseDown:e=>re(e,!1),onMouseEnter:se,onMouseOut:ie,type:"target"})))};return t.displayName="EdgeWrapper",cs.memo(t)};function s2(e){return{...{default:r2(e.default||a0),straight:r2(e.bezier||XX),step:r2(e.step||ZX),smoothstep:r2(e.step||JX),simplebezier:r2(e.simplebezier||qX)},...Object.keys(e).filter((e=>!["default","bezier"].includes(e))).reduce(((t,n)=>(t[n]=r2(e[n]||a0),t)),{})}}function i2(e,t,n=null){const a=((null==n?void 0:n.x)||0)+t.x,r=((null==n?void 0:n.y)||0)+t.y,s=(null==n?void 0:n.width)||t.width,i=(null==n?void 0:n.height)||t.height;switch(e){case WX.Top:return{x:a+s/2,y:r};case WX.Right:return{x:a+s,y:r+i/2};case WX.Bottom:return{x:a+s/2,y:r+i};case WX.Left:return{x:a,y:r+i/2}}}function o2(e,t){return e?1!==e.length&&t?t&&e.find((e=>e.id===t))||null:e[0]:null}function l2(e){var t,n,a,r,s;const i=(null==(t=null==e?void 0:e[jX])?void 0:t.handleBounds)||null,o=i&&(null==e?void 0:e.width)&&(null==e?void 0:e.height)&&void 0!==(null==(n=null==e?void 0:e.positionAbsolute)?void 0:n.x)&&void 0!==(null==(a=null==e?void 0:e.positionAbsolute)?void 0:a.y);return[{x:(null==(r=null==e?void 0:e.positionAbsolute)?void 0:r.x)||0,y:(null==(s=null==e?void 0:e.positionAbsolute)?void 0:s.y)||0,width:(null==e?void 0:e.width)||0,height:(null==e?void 0:e.height)||0},i,!!o]}const c2=[{level:0,isMaxLevel:!0,edges:[]}];function d2(e,t,n){return function(e,t,n=!1){let a=-1;const r=e.reduce(((e,r)=>{var s,i;const o=wX(r.zIndex);let l=o?r.zIndex:0;if(n){const e=t.get(r.target),n=t.get(r.source),a=r.selected||(null==e?void 0:e.selected)||(null==n?void 0:n.selected),c=Math.max((null==(s=null==n?void 0:n[jX])?void 0:s.z)||0,(null==(i=null==e?void 0:e[jX])?void 0:i.z)||0,1e3);l=(o?r.zIndex:0)+(a?c:0)}return e[l]?e[l].push(r):e[l]=[r],a=l>a?l:a,e}),{}),s=Object.entries(r).map((([e,t])=>{const n=+e;return{edges:t,level:n,isMaxLevel:n===a}}));return 0===s.length?c2:s}(rX(cs.useCallback((n=>e?n.edges.filter((e=>{const a=t.get(e.source),r=t.get(e.target);return(null==a?void 0:a.width)&&(null==a?void 0:a.height)&&(null==r?void 0:r.width)&&(null==r?void 0:r.height)&&function({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:a,targetWidth:r,targetHeight:s,width:i,height:o,transform:l}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+a,t.y+s)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=xX({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),u=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),f=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(u*f)>0}({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:r.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:r.width,targetHeight:r.height,width:n.width,height:n.height,transform:n.transform})})):n.edges),[e,t])),t,n)}const u2={[BX.Arrow]:({color:e="none",strokeWidth:t=1})=>ds.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[BX.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>ds.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};const f2=({id:e,type:t,color:n,width:a=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=function(e){const t=sX();return cs.useMemo((()=>{var n,a;return Object.prototype.hasOwnProperty.call(u2,e)?u2[e]:(null==(a=(n=t.getState()).onError)||a.call(n,"009",ZZ(e)),null)}),[e])}(t);return l?ds.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},ds.createElement(l,{color:n,strokeWidth:i})):null},m2=({defaultColor:e,rfId:t})=>{const n=rX(cs.useCallback((({defaultColor:e,rfId:t})=>n=>{const a=[];return n.edges.reduce(((n,r)=>([r.markerStart,r.markerEnd].forEach((r=>{if(r&&"object"==typeof r){const s=o0(r,t);a.includes(s)||(n.push({id:s,color:r.color||e,...r}),a.push(s))}})),n)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))})({defaultColor:e,rfId:t}),[e,t]),((e,t)=>!(e.length!==t.length||e.some(((e,n)=>e.id!==t[n].id)))));return ds.createElement("defs",null,n.map((e=>ds.createElement(f2,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient}))))};m2.displayName="MarkerDefinitions";var p2=cs.memo(m2);const h2=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),g2=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:a,edgeTypes:r,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,onEdgeDoubleClick:u,onReconnect:f,onReconnectStart:m,onReconnectEnd:p,reconnectRadius:h,children:g,disableKeyboardA11y:x})=>{const{edgesFocusable:y,edgesUpdatable:v,elementsSelectable:b,width:w,height:j,connectionMode:N,nodeInternals:C,onError:S}=rX(h2,rQ),k=d2(t,C,n);return w?ds.createElement(ds.Fragment,null,k.map((({level:t,edges:n,isMaxLevel:g})=>ds.createElement("svg",{key:t,style:{zIndex:t},width:w,height:j,className:"react-flow__edges react-flow__container"},g&&ds.createElement(p2,{defaultColor:e,rfId:a}),ds.createElement("g",null,n.map((e=>{const[t,n,g]=l2(C.get(e.source)),[w,j,k]=l2(C.get(e.target));if(!g||!k)return null;let M=e.type||"default";r[M]||(null==S||S("011",tX(M)),M="default");const _=r[M]||r.default,I=N===LX.Strict?j.target:(j.target??[]).concat(j.source??[]),A=o2(n.source,e.sourceHandle),E=o2(I,e.targetHandle),L=(null==A?void 0:A.position)||WX.Bottom,T=(null==E?void 0:E.position)||WX.Top,D=!!(e.focusable||y&&void 0===e.focusable),P=e.reconnectable||e.updatable,O=void 0!==f&&(P||v&&void 0===P);if(!A||!E)return null==S||S("008",XZ(A,e)),null;const{sourceX:R,sourceY:z,targetX:F,targetY:B}=((e,t,n,a,r,s)=>{const i=i2(n,e,t),o=i2(s,a,r);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}})(t,A,L,w,E,T);return ds.createElement(_,{key:e.id,id:e.id,className:BY([e.className,s]),type:M,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:R,sourceY:z,targetX:F,targetY:B,sourcePosition:L,targetPosition:T,elementsSelectable:b,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:c,onClick:d,onEdgeDoubleClick:u,onReconnect:f,onReconnectStart:m,onReconnectEnd:p,reconnectRadius:h,rfId:a,ariaLabel:e.ariaLabel,isFocusable:D,isReconnectable:O,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:x})})))))),g):null};g2.displayName="EdgeRenderer";var x2=cs.memo(g2);const y2=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function v2({children:e}){const t=rX(y2);return ds.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}const b2={[WX.Left]:WX.Right,[WX.Right]:WX.Left,[WX.Top]:WX.Bottom,[WX.Bottom]:WX.Top},w2=({nodeId:e,handleType:t,style:n,type:a=zX.Bezier,CustomComponent:r,connectionStatus:s})=>{var i,o,l;const{fromNode:c,handleId:d,toX:u,toY:f,connectionMode:m}=rX(cs.useCallback((t=>({fromNode:t.nodeInternals.get(e),handleId:t.connectionHandleId,toX:(t.connectionPosition.x-t.transform[0])/t.transform[2],toY:(t.connectionPosition.y-t.transform[1])/t.transform[2],connectionMode:t.connectionMode})),[e]),rQ),p=null==(i=null==c?void 0:c[jX])?void 0:i.handleBounds;let h=null==p?void 0:p[t];if(m===LX.Loose&&(h=h||(null==p?void 0:p["source"===t?"target":"source"])),!c||!h)return null;const g=d?h.find((e=>e.id===d)):h[0],x=g?g.x+g.width/2:(c.width??0)/2,y=g?g.y+g.height/2:c.height??0,v=((null==(o=c.positionAbsolute)?void 0:o.x)??0)+x,b=((null==(l=c.positionAbsolute)?void 0:l.y)??0)+y,w=null==g?void 0:g.position,j=w?b2[w]:null;if(!w||!j)return null;if(r)return ds.createElement(r,{connectionLineType:a,connectionLineStyle:n,fromNode:c,fromHandle:g,fromX:v,fromY:b,toX:u,toY:f,fromPosition:w,toPosition:j,connectionStatus:s});let N="";const C={sourceX:v,sourceY:b,sourcePosition:w,targetX:u,targetY:f,targetPosition:j};return a===zX.Bezier?[N]=n0(C):a===zX.Step?[N]=KX({...C,borderRadius:0}):a===zX.SmoothStep?[N]=KX(C):a===zX.SimpleBezier?[N]=HX(C):N=`M${v},${b} ${u},${f}`,ds.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:n})};w2.displayName="ConnectionLine";const j2=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function N2({containerStyle:e,style:t,type:n,component:a}){const{nodeId:r,handleType:s,nodesConnectable:i,width:o,height:l,connectionStatus:c}=rX(j2,rQ);return!!(r&&s&&o&&i)?ds.createElement("svg",{style:e,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},ds.createElement("g",{className:BY(["react-flow__connection",c])},ds.createElement(w2,{nodeId:r,handleType:s,style:t,type:n,CustomComponent:a,connectionStatus:c}))):null}function C2(e,t){cs.useRef(null),sX();return cs.useMemo((()=>t(e)),[e])}const S2=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:a,onMoveEnd:r,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:p,onSelectionStart:h,onSelectionEnd:g,connectionLineType:x,connectionLineStyle:y,connectionLineComponent:v,connectionLineContainerStyle:b,selectionKeyCode:w,selectionOnDrag:j,selectionMode:N,multiSelectionKeyCode:C,panActivationKeyCode:S,zoomActivationKeyCode:k,deleteKeyCode:M,onlyRenderVisibleElements:_,elementsSelectable:I,selectNodesOnDrag:A,defaultViewport:E,translateExtent:L,minZoom:T,maxZoom:D,preventScrolling:P,defaultMarkerColor:O,zoomOnScroll:R,zoomOnPinch:z,panOnScroll:F,panOnScrollSpeed:B,panOnScrollMode:U,zoomOnDoubleClick:W,panOnDrag:G,onPaneClick:V,onPaneMouseEnter:H,onPaneMouseMove:q,onPaneMouseLeave:$,onPaneScroll:Y,onPaneContextMenu:Q,onEdgeContextMenu:K,onEdgeMouseEnter:J,onEdgeMouseMove:Z,onEdgeMouseLeave:X,onReconnect:ee,onReconnectStart:te,onReconnectEnd:ne,reconnectRadius:ae,noDragClassName:re,noWheelClassName:se,noPanClassName:ie,elevateEdgesOnSelect:oe,disableKeyboardA11y:le,nodeOrigin:ce,nodeExtent:de,rfId:ue})=>{const fe=C2(e,Q1),me=C2(t,s2);return function(e){const t=f1(),n=cs.useRef(!1);cs.useEffect((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(s),ds.createElement(Y1,{onPaneClick:V,onPaneMouseEnter:H,onPaneMouseMove:q,onPaneMouseLeave:$,onPaneContextMenu:Q,onPaneScroll:Y,deleteKeyCode:M,selectionKeyCode:w,selectionOnDrag:j,selectionMode:N,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:C,panActivationKeyCode:S,zoomActivationKeyCode:k,elementsSelectable:I,onMove:n,onMoveStart:a,onMoveEnd:r,zoomOnScroll:R,zoomOnPinch:z,zoomOnDoubleClick:W,panOnScroll:F,panOnScrollSpeed:B,panOnScrollMode:U,panOnDrag:G,defaultViewport:E,translateExtent:L,minZoom:T,maxZoom:D,onSelectionContextMenu:p,preventScrolling:P,noDragClassName:re,noWheelClassName:se,noPanClassName:ie,disableKeyboardA11y:le},ds.createElement(v2,null,ds.createElement(x2,{edgeTypes:me,onEdgeClick:o,onEdgeDoubleClick:c,onlyRenderVisibleElements:_,onEdgeContextMenu:K,onEdgeMouseEnter:J,onEdgeMouseMove:Z,onEdgeMouseLeave:X,onReconnect:ee,onReconnectStart:te,onReconnectEnd:ne,reconnectRadius:ae,defaultMarkerColor:O,noPanClassName:ie,elevateEdgesOnSelect:!!oe,disableKeyboardA11y:le,rfId:ue},ds.createElement(N2,{style:y,type:x,component:v,containerStyle:b})),ds.createElement("div",{className:"react-flow__edgelabel-renderer"}),ds.createElement(Z1,{nodeTypes:fe,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:m,selectNodesOnDrag:A,onlyRenderVisibleElements:_,noPanClassName:ie,noDragClassName:re,disableKeyboardA11y:le,nodeOrigin:ce,nodeExtent:de,rfId:ue})))};S2.displayName="GraphView";var k2=cs.memo(S2);const M2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],_2={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:M2,nodeExtent:M2,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:LX.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:(e,t)=>{},isValidConnection:void 0},I2=()=>{return e=(e,t)=>({..._2,setNodes:n=>{const{nodeInternals:a,nodeOrigin:r,elevateNodesOnSelect:s}=t();e({nodeInternals:r1(n,a,r,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:a={}}=t();e({edges:n.map((e=>({...a,...e})))})},setDefaultNodesAndEdges:(n,a)=>{const r=void 0!==n,s=void 0!==a,i=r?r1(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?a:[],hasDefaultNodes:r,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:a,nodeInternals:r,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:c}=t(),d=null==l?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const u=window.getComputedStyle(d),{m22:f}=new window.DOMMatrixReadOnly(u.transform),m=n.reduce(((e,t)=>{const n=r.get(t.id);if(null==n?void 0:n.hidden)r.set(n.id,{...n,[jX]:{...n[jX],handleBounds:void 0}});else if(n){const a=dX(t.nodeElement);a.width&&a.height&&(n.width!==a.width||n.height!==a.height||t.forceUpdate)&&(r.set(n.id,{...n,[jX]:{...n[jX],handleBounds:{source:O1(".source",t.nodeElement,f,c),target:O1(".target",t.nodeElement,f,c)}},...a}),e.push({id:n.id,type:"dimensions",dimensions:a}))}return e}),[]);a1(r,c);const p=i||s&&!i&&s1(t,{initial:!0,...o});e({nodeInternals:new Map(r),fitViewOnInitDone:p}),(null==m?void 0:m.length)>0&&(null==a||a(m))},updateNodePositions:(e,n=!0,a=!1)=>{const{triggerNodeChanges:r}=t();r(e.map((e=>{const t={id:e.id,type:"position",dragging:a};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t})))},triggerNodeChanges:n=>{const{onNodesChange:a,nodeInternals:r,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=t();if(null==n?void 0:n.length){if(s){const t=r1(S1(n,o()),r,i,l);e({nodeInternals:t})}null==a||a(n)}},addSelectedNodes:n=>{const{multiSelectionActive:a,edges:r,getNodes:s}=t();let i,o=null;a?i=n.map((e=>k1(e,!0))):(i=M1(s(),n),o=M1(r,[])),l1({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:a,edges:r,getNodes:s}=t();let i,o=null;a?i=n.map((e=>k1(e,!0))):(i=M1(r,n),o=M1(s(),[])),l1({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:a}={})=>{const{edges:r,getNodes:s}=t(),i=a||r;l1({changedNodes:(n||s()).map((e=>(e.selected=!1,k1(e.id,!1)))),changedEdges:i.map((e=>k1(e.id,!1))),get:t,set:e})},setMinZoom:n=>{const{d3Zoom:a,maxZoom:r}=t();null==a||a.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:a,minZoom:r}=t();null==a||a.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var a;null==(a=t().d3Zoom)||a.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:a}=t();l1({changedNodes:a().filter((e=>e.selected)).map((e=>k1(e.id,!1))),changedEdges:n.filter((e=>e.selected)).map((e=>k1(e.id,!1))),get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:a}=t();a.forEach((e=>{e.positionAbsolute=fX(e.position,n)})),e({nodeExtent:n,nodeInternals:new Map(a)})},panBy:e=>{const{transform:n,width:a,height:r,d3Zoom:s,d3Selection:i,translateExtent:o}=t();if(!s||!i||!e.x&&!e.y)return!1;const l=RZ.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),c=[[0,0],[a,r]],d=null==s?void 0:s.constrain()(l,c,o);return s.transform(i,d),n[0]!==d.x||n[1]!==d.y||n[2]!==d.k},cancelConnection:()=>e({connectionNodeId:_2.connectionNodeId,connectionHandleId:_2.connectionHandleId,connectionHandleType:_2.connectionHandleType,connectionStatus:_2.connectionStatus,connectionStartHandle:_2.connectionStartHandle,connectionEndHandle:_2.connectionEndHandle}),reset:()=>e({..._2})}),t=Object.is,e?aQ(e,t):aQ;var e,t},A2=({children:e})=>{const t=cs.useRef(null);return t.current||(t.current=I2()),ds.createElement(YZ,{value:t.current},e)};A2.displayName="ReactFlowProvider";const E2=({children:e})=>cs.useContext($Z)?ds.createElement(ds.Fragment,null,e):ds.createElement(A2,null,e);E2.displayName="ReactFlowWrapper";const L2={input:L0,default:A0,output:D0,group:P0},T2={default:a0,straight:XX,step:ZX,smoothstep:JX,simplebezier:qX},D2=[0,0],P2=[15,15],O2={x:0,y:0,zoom:1},R2={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},z2=cs.forwardRef((({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,className:r,nodeTypes:s=L2,edgeTypes:i=T2,onNodeClick:o,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:u,onMoveEnd:f,onConnect:m,onConnectStart:p,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:x,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:w,onNodeDoubleClick:j,onNodeDragStart:N,onNodeDrag:C,onNodeDragStop:S,onNodesDelete:k,onEdgesDelete:M,onSelectionChange:_,onSelectionDragStart:I,onSelectionDrag:A,onSelectionDragStop:E,onSelectionContextMenu:L,onSelectionStart:T,onSelectionEnd:D,connectionMode:P=LX.Strict,connectionLineType:O=zX.Bezier,connectionLineStyle:R,connectionLineComponent:z,connectionLineContainerStyle:F,deleteKeyCode:B="Backspace",selectionKeyCode:U="Shift",selectionOnDrag:W=!1,selectionMode:G=OX.Full,panActivationKeyCode:V="Space",multiSelectionKeyCode:H=(MX()?"Meta":"Control"),zoomActivationKeyCode:q=(MX()?"Meta":"Control"),snapToGrid:$=!1,snapGrid:Y=P2,onlyRenderVisibleElements:Q=!1,selectNodesOnDrag:K=!0,nodesDraggable:J,nodesConnectable:Z,nodesFocusable:X,nodeOrigin:ee=D2,edgesFocusable:te,edgesUpdatable:ne,elementsSelectable:ae,defaultViewport:re=O2,minZoom:se=.5,maxZoom:ie=2,translateExtent:oe=M2,preventScrolling:le=!0,nodeExtent:ce,defaultMarkerColor:de="#b1b1b7",zoomOnScroll:ue=!0,zoomOnPinch:fe=!0,panOnScroll:me=!1,panOnScrollSpeed:pe=.5,panOnScrollMode:he=DX.Free,zoomOnDoubleClick:ge=!0,panOnDrag:xe=!0,onPaneClick:ye,onPaneMouseEnter:ve,onPaneMouseMove:be,onPaneMouseLeave:we,onPaneScroll:je,onPaneContextMenu:Ne,children:Ce,onEdgeContextMenu:Se,onEdgeDoubleClick:ke,onEdgeMouseEnter:Me,onEdgeMouseMove:_e,onEdgeMouseLeave:Ie,onEdgeUpdate:Ae,onEdgeUpdateStart:Ee,onEdgeUpdateEnd:Le,onReconnect:Te,onReconnectStart:De,onReconnectEnd:Pe,reconnectRadius:Oe=10,edgeUpdaterRadius:Re=10,onNodesChange:ze,onEdgesChange:Fe,noDragClassName:Be="nodrag",noWheelClassName:Ue="nowheel",noPanClassName:We="nopan",fitView:Ge=!1,fitViewOptions:Ve,connectOnClick:He=!0,attributionPosition:qe,proOptions:$e,defaultEdgeOptions:Ye,elevateNodesOnSelect:Qe=!0,elevateEdgesOnSelect:Ke=!1,disableKeyboardA11y:Je=!1,autoPanOnConnect:Ze=!0,autoPanOnNodeDrag:Xe=!0,connectionRadius:et=20,isValidConnection:tt,onError:nt,style:at,id:rt,nodeDragThreshold:st,...it},ot)=>{const lt=rt||"1";return ds.createElement("div",{...it,style:{...at,...R2},ref:ot,className:BY(["react-flow",r]),"data-testid":"rf__wrapper",id:rt},ds.createElement(E2,null,ds.createElement(k2,{onInit:c,onMove:d,onMoveStart:u,onMoveEnd:f,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:w,onNodeDoubleClick:j,nodeTypes:s,edgeTypes:i,connectionLineType:O,connectionLineStyle:R,connectionLineComponent:z,connectionLineContainerStyle:F,selectionKeyCode:U,selectionOnDrag:W,selectionMode:G,deleteKeyCode:B,multiSelectionKeyCode:H,panActivationKeyCode:V,zoomActivationKeyCode:q,onlyRenderVisibleElements:Q,selectNodesOnDrag:K,defaultViewport:re,translateExtent:oe,minZoom:se,maxZoom:ie,preventScrolling:le,zoomOnScroll:ue,zoomOnPinch:fe,zoomOnDoubleClick:ge,panOnScroll:me,panOnScrollSpeed:pe,panOnScrollMode:he,panOnDrag:xe,onPaneClick:ye,onPaneMouseEnter:ve,onPaneMouseMove:be,onPaneMouseLeave:we,onPaneScroll:je,onPaneContextMenu:Ne,onSelectionContextMenu:L,onSelectionStart:T,onSelectionEnd:D,onEdgeContextMenu:Se,onEdgeDoubleClick:ke,onEdgeMouseEnter:Me,onEdgeMouseMove:_e,onEdgeMouseLeave:Ie,onReconnect:Te??Ae,onReconnectStart:De??Ee,onReconnectEnd:Pe??Le,reconnectRadius:Oe??Re,defaultMarkerColor:de,noDragClassName:Be,noWheelClassName:Ue,noPanClassName:We,elevateEdgesOnSelect:Ke,rfId:lt,disableKeyboardA11y:Je,nodeOrigin:ee,nodeExtent:ce}),ds.createElement(H0,{nodes:e,edges:t,defaultNodes:n,defaultEdges:a,onConnect:m,onConnectStart:p,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:x,nodesDraggable:J,nodesConnectable:Z,nodesFocusable:X,edgesFocusable:te,edgesUpdatable:ne,elementsSelectable:ae,elevateNodesOnSelect:Qe,minZoom:se,maxZoom:ie,nodeExtent:ce,onNodesChange:ze,onEdgesChange:Fe,snapToGrid:$,snapGrid:Y,connectionMode:P,translateExtent:oe,connectOnClick:He,defaultEdgeOptions:Ye,fitView:Ge,fitViewOptions:Ve,onNodesDelete:k,onEdgesDelete:M,onNodeDragStart:N,onNodeDrag:C,onNodeDragStop:S,onSelectionDrag:A,onSelectionDragStart:I,onSelectionDragStop:E,noPanClassName:We,nodeOrigin:ee,rfId:lt,autoPanOnConnect:Ze,autoPanOnNodeDrag:Xe,onError:nt,connectionRadius:et,isValidConnection:tt,nodeDragThreshold:st}),ds.createElement(U0,{onSelectionChange:_}),Ce,ds.createElement(lX,{proOptions:$e,position:qe}),ds.createElement(Z0,{rfId:lt,disableKeyboardA11y:Je})))}));z2.displayName="ReactFlow";const F2=e=>{var t;return null==(t=e.domNode)?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function B2({children:e}){const t=rX(F2);return t?Sg.createPortal(e,t):null}function U2(e){return t=>{const[n,a]=cs.useState(t),r=cs.useCallback((t=>a((n=>e(t,n)))),[]);return[n,a,r]}}const W2=U2(S1),G2=U2((function(e,t){return C1(e,t)}));function V2(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const a of n)if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(e[a],t[a]))return!1;return!0}const H2=({id:e,x:t,y:n,width:a,height:r,style:s,color:i,strokeColor:o,strokeWidth:l,className:c,borderRadius:d,shapeRendering:u,onClick:f,selected:m})=>{const{background:p,backgroundColor:h}=s||{},g=i||p||h;return ds.createElement("rect",{className:BY(["react-flow__minimap-node",{selected:m},c]),x:t,y:n,rx:d,ry:d,width:a,height:r,fill:g,stroke:o,strokeWidth:l,shapeRendering:u,onClick:f?t=>f(t,e):void 0})};H2.displayName="MiniMapNode";var q2=cs.memo(H2);const $2=e=>e.nodeOrigin,Y2=e=>e.getNodes().filter((e=>!e.hidden&&e.width&&e.height)),Q2=e=>e instanceof Function?e:()=>e;var K2=cs.memo((function({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:a=5,nodeStrokeWidth:r=2,nodeComponent:s=q2,onClick:i}){const o=rX(Y2,V2),l=rX($2),c=Q2(t),d=Q2(e),u=Q2(n),f="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return ds.createElement(ds.Fragment,null,o.map((e=>{const{x:t,y:n}=u0(e,l).positionAbsolute;return ds.createElement(s,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:u(e),color:c(e),borderRadius:a,strokeColor:d(e),strokeWidth:r,shapeRendering:f,onClick:i,id:e.id})})))}));const J2=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?(a=f0(t,e.nodeOrigin),r=n,yX(gX(xX(a),xX(r)))):n,rfId:e.rfId};var a,r};function Z2({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:a="#e2e2e2",nodeClassName:r="",nodeBorderRadius:s=5,nodeStrokeWidth:i=2,nodeComponent:o,maskColor:l="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:d=1,position:u="bottom-right",onClick:f,onNodeClick:m,pannable:p=!1,zoomable:h=!1,ariaLabel:g="React Flow mini map",inversePan:x=!1,zoomStep:y=10,offsetScale:v=5}){const b=sX(),w=cs.useRef(null),{boundingRect:j,viewBB:N,rfId:C}=rX(J2,V2),S=(null==e?void 0:e.width)??200,k=(null==e?void 0:e.height)??150,M=j.width/S,_=j.height/k,I=Math.max(M,_),A=I*S,E=I*k,L=v*I,T=j.x-(A-j.width)/2-L,D=j.y-(E-j.height)/2-L,P=A+2*L,O=E+2*L,R=`react-flow__minimap-desc-${C}`,z=cs.useRef(0);z.current=I,cs.useEffect((()=>{if(w.current){const e=jK(w.current),t=e=>{const{transform:t,d3Selection:n,d3Zoom:a}=b.getState();if("wheel"!==e.sourceEvent.type||!n||!a)return;const r=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*y,s=t[2]*Math.pow(2,r);a.scaleTo(n,s)},n=e=>{const{transform:t,d3Selection:n,d3Zoom:a,translateExtent:r,width:s,height:i}=b.getState();if("mousemove"!==e.sourceEvent.type||!n||!a)return;const o=z.current*Math.max(1,t[2])*(x?-1:1),l={x:t[0]-e.sourceEvent.movementX*o,y:t[1]-e.sourceEvent.movementY*o},c=[[0,0],[s,i]],d=RZ.translate(l.x,l.y).scale(t[2]),u=a.constrain()(d,c,r);a.transform(n,u)},a=qZ().on("zoom",p?n:null).on("zoom.wheel",h?t:null);return e.call(a),()=>{e.on("zoom",null)}}}),[p,h,x,y]);const F=f?e=>{const t=NK(e);f(e,{x:t[0],y:t[1]})}:void 0,B=m?(e,t)=>{const n=b.getState().nodeInternals.get(t);m(e,n)}:void 0;return ds.createElement(oX,{position:u,style:e,className:BY(["react-flow__minimap",t]),"data-testid":"rf__minimap"},ds.createElement("svg",{width:S,height:k,viewBox:`${T} ${D} ${P} ${O}`,role:"img","aria-labelledby":R,ref:w,onClick:F},g&&ds.createElement("title",{id:R},g),ds.createElement(K2,{onClick:B,nodeColor:a,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:r,nodeStrokeWidth:i,nodeComponent:o}),ds.createElement("path",{className:"react-flow__minimap-mask",d:`M${T-L},${D-L}h${P+2*L}v${O+2*L}h${-P-2*L}z\n        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fill:l,fillRule:"evenodd",stroke:c,strokeWidth:d,pointerEvents:"none"})))}Z2.displayName="MiniMap";var X2=cs.memo(Z2);function e4(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const a of n)if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(e[a],t[a]))return!1;return!0}function t4(){return ds.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ds.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function n4(){return ds.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ds.createElement("path",{d:"M0 0h32v4.2H0z"}))}function a4(){return ds.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ds.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function r4(){return ds.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ds.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function s4(){return ds.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ds.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const i4=({children:e,className:t,...n})=>ds.createElement("button",{type:"button",className:BY(["react-flow__controls-button",t]),...n},e);i4.displayName="ControlButton";const o4=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),l4=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:a=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:c,children:d,position:u="bottom-left"})=>{const f=sX(),[m,p]=cs.useState(!1),{isInteractive:h,minZoomReached:g,maxZoomReached:x}=rX(o4,e4),{zoomIn:y,zoomOut:v,fitView:b}=f1();if(cs.useEffect((()=>{p(!0)}),[]),!m)return null;return ds.createElement(oX,{className:BY(["react-flow__controls",c]),position:u,style:e,"data-testid":"rf__controls"},t&&ds.createElement(ds.Fragment,null,ds.createElement(i4,{onClick:()=>{y(),null==s||s()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},ds.createElement(t4,null)),ds.createElement(i4,{onClick:()=>{v(),null==i||i()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:g},ds.createElement(n4,null))),n&&ds.createElement(i4,{className:"react-flow__controls-fitview",onClick:()=>{b(r),null==o||o()},title:"fit view","aria-label":"fit view"},ds.createElement(a4,null)),a&&ds.createElement(i4,{className:"react-flow__controls-interactive",onClick:()=>{f.setState({nodesDraggable:!h,nodesConnectable:!h,elementsSelectable:!h}),null==l||l(!h)},title:"toggle interactivity","aria-label":"toggle interactivity"},h?ds.createElement(s4,null):ds.createElement(r4,null)),d)};l4.displayName="Controls";var c4,d4,u4=cs.memo(l4);function f4(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const a of n)if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(e[a],t[a]))return!1;return!0}function m4({color:e,dimensions:t,lineWidth:n}){return ds.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function p4({color:e,radius:t}){return ds.createElement("circle",{cx:t,cy:t,r:t,fill:e})}(d4=c4||(c4={})).Lines="lines",d4.Dots="dots",d4.Cross="cross";const h4={[c4.Dots]:"#91919a",[c4.Lines]:"#eee",[c4.Cross]:"#e2e2e2"},g4={[c4.Dots]:1,[c4.Lines]:1,[c4.Cross]:6},x4=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function y4({id:e,variant:t=c4.Dots,gap:n=20,size:a,lineWidth:r=1,offset:s=2,color:i,style:o,className:l}){const c=cs.useRef(null),{transform:d,patternId:u}=rX(x4,f4),f=i||h4[t],m=a||g4[t],p=t===c4.Dots,h=t===c4.Cross,g=Array.isArray(n)?n:[n,n],x=[g[0]*d[2]||1,g[1]*d[2]||1],y=m*d[2],v=h?[y,y]:x,b=p?[y/s,y/s]:[v[0]/s,v[1]/s];return ds.createElement("svg",{className:BY(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},ds.createElement("pattern",{id:u+e,x:d[0]%x[0],y:d[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${b[0]},-${b[1]})`},p?ds.createElement(p4,{color:f,radius:y/s}):ds.createElement(m4,{dimensions:v,color:f,lineWidth:r})),ds.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${u+e})`}))}y4.displayName="Background";var v4=cs.memo(y4),b4="Switch",[w4,j4]=Vy(b4),[N4,C4]=w4(b4),S4=cs.forwardRef(((e,t)=>{const{__scopeSwitch:n,name:a,checked:r,defaultChecked:s,required:i,disabled:o,value:l="on",onCheckedChange:c,form:d,...u}=e,[f,m]=cs.useState(null),p=Gy(t,(e=>m(e))),h=cs.useRef(!1),g=!f||(d||!!f.closest("form")),[x,y]=yv({prop:r,defaultProp:s??!1,onChange:c,caller:b4});return vs.jsxs(N4,{scope:n,checked:x,disabled:o,children:[vs.jsx(Xy.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":I4(x),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:p,onClick:By(e.onClick,(e=>{y((e=>!e)),g&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())}))}),g&&vs.jsx(_4,{control:f,bubbles:!h.current,name:a,value:l,checked:x,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})}));S4.displayName=b4;var k4="SwitchThumb",M4=cs.forwardRef(((e,t)=>{const{__scopeSwitch:n,...a}=e,r=C4(k4,n);return vs.jsx(Xy.span,{"data-state":I4(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:t})}));M4.displayName=k4;var _4=cs.forwardRef((({__scopeSwitch:e,control:t,checked:n,bubbles:a=!0,...r},s)=>{const i=cs.useRef(null),o=Gy(i,s),l=PB(n),c=nS(t);return cs.useEffect((()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&r){const t=new Event("click",{bubbles:a});r.call(e,n),e.dispatchEvent(t)}}),[l,n,a]),vs.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:o,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})}));function I4(e){return e?"checked":"unchecked"}_4.displayName="SwitchBubbleInput";var A4=S4,E4=M4;const L4=cs.forwardRef((({className:e,variant:t="default",...n},a)=>vs.jsx(A4,{className:fN("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50","brand"===t?"switch-brand data-[state=unchecked]:bg-input":"data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...n,ref:a,style:"brand"===t?{backgroundColor:n.checked?"var(--brand-primary-color)":void 0}:void 0,children:vs.jsx(E4,{className:fN("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})));L4.displayName=A4.displayName;const T4=({type:e,position:t,style:n,isConnectable:a,id:r})=>{const s={width:"10px",height:"10px",background:"#2d2b2f7d",border:"2px solid #8f9093",...n};return vs.jsx(_0,{type:e,position:t,style:s,isConnectable:a,id:r})},D4={width:"10px",height:"10px",background:"#2d2b2f7d",border:"2px solid #8f9093"},P4={width:"10px",height:"10px",background:"#10b981",border:"2px solid #8f9093",left:"30%"},O4={width:"10px",height:"10px",background:"#ef4444",border:"2px solid #8f9093",left:"70%"},R4=[{id:"openai",name:"OpenAI",models:[{id:"gpt-4o",name:"GPT-4o (Latest)"},{id:"gpt-4.1-nano",name:"GPT-4.1 Nano"},{id:"gpt-4.1-mini",name:"GPT-4.1 Mini"},{id:"gpt-4-turbo",name:"GPT-4 Turbo"},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo"}]},{id:"anthropic",name:"Anthropic",models:[{id:"claude-3-7-sonnet-20250219",name:"Claude 3.7 Sonnet (Latest)"},{id:"claude-3-opus-20240229",name:"Claude 3 Opus"},{id:"claude-3-sonnet-20240229",name:"Claude 3 Sonnet"},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku"}]},{id:"gemini",name:"Google Gemini",models:[{id:"gemini-2.5-pro-preview-03-25",name:"Gemini 2.5 Pro Preview (Latest)"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"},{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-pro",name:"Gemini Pro"}]},{id:"deepseek",name:"DeepSeek",models:[{id:"deepseek-chat",name:"DeepSeek Chat"},{id:"deepseek-coder",name:"DeepSeek Coder"}]}];function z4({task:e,index:t,onUpdate:n,onRemove:a,t:r}){const[s,i]=cs.useState(!1);return vs.jsxs("div",{className:"group border rounded-lg p-3 transition-all duration-200 "+(e.enabled?"border-emerald-200 bg-emerald-50/50 hover:bg-emerald-50":"border-gray-200 bg-gray-50/50 hover:bg-gray-50"),children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[vs.jsx("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:vs.jsx(aw,{className:"h-3 w-3 text-gray-400 cursor-grab"})}),vs.jsx("button",{onClick:()=>i(!s),className:"text-gray-500 hover:text-gray-700 transition-colors",children:s?vs.jsx(Mb,{className:"h-3 w-3"}):vs.jsx(Ib,{className:"h-3 w-3"})}),vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsxs("div",{className:"flex items-start gap-2",children:[vs.jsx("span",{className:"text-xs font-medium leading-tight break-words",children:e.name||`Task ${t+1}`}),vs.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-medium shrink-0 "+(e.enabled?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-500"),children:[e.enabled?vs.jsx(Qb,{className:"h-2.5 w-2.5"}):vs.jsx(Yb,{className:"h-2.5 w-2.5"}),e.enabled?"Active":"Inactive"]})]}),e.description&&vs.jsxs("p",{className:"text-[10px] text-muted-foreground mt-0.5 leading-tight break-words",children:[e.description.split(" ").slice(0,12).join(" "),e.description.split(" ").length>12?"...":""]})]})]}),vs.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[vs.jsx(L4,{checked:e.enabled,onCheckedChange:e=>n({enabled:e}),className:"scale-75"}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",onClick:a,className:"h-6 w-6 p-0 text-destructive hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",children:vs.jsx(Zw,{className:"h-3 w-3"})})]})]}),s&&vs.jsxs("div",{className:"mt-3 space-y-3 pl-4 border-l-2 border-emerald-200",children:[vs.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"Task Name"}),vs.jsx(LB,{value:e.name,onChange:e=>n({name:e.target.value}),className:"text-xs h-7 mt-1",placeholder:"e.g., Share Product Brochure"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"Function Name"}),vs.jsx(LB,{value:e.functionDefinition.name,onChange:t=>n({functionDefinition:{...e.functionDefinition,name:t.target.value}}),className:"text-xs h-7 mt-1",placeholder:"e.g., share_document"})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"Task Description"}),vs.jsx(TB,{value:e.description,onChange:e=>n({description:e.target.value}),className:"text-xs min-h-[50px] resize-none mt-1",placeholder:"Describe what this task does and when it should be triggered"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"AI Function Description"}),vs.jsx(TB,{value:e.functionDefinition.description,onChange:t=>n({functionDefinition:{...e.functionDefinition,description:t.target.value}}),className:"text-xs min-h-[60px] resize-none mt-1",placeholder:"Detailed instructions for the AI model about when to call this function. Be specific about user intent requirements."}),vs.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:'💡 Tip: Use phrases like "ONLY call when user explicitly requests..." to prevent false triggers'})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"Output Handle ID"}),vs.jsx(LB,{value:e.outputHandle,onChange:e=>n({outputHandle:e.target.value}),className:"text-xs h-7 mt-1",placeholder:"e.g., task_brochure"})]})]})]})}var F4="Radio",[B4,U4]=Vy(F4),[W4,G4]=B4(F4),V4=cs.forwardRef(((e,t)=>{const{__scopeRadio:n,name:a,checked:r=!1,required:s,disabled:i,value:o="on",onCheck:l,form:c,...d}=e,[u,f]=cs.useState(null),m=Gy(t,(e=>f(e))),p=cs.useRef(!1),h=!u||(c||!!u.closest("form"));return vs.jsxs(W4,{scope:n,checked:r,disabled:i,children:[vs.jsx(Xy.button,{type:"button",role:"radio","aria-checked":r,"data-state":Y4(r),"data-disabled":i?"":void 0,disabled:i,value:o,...d,ref:m,onClick:By(e.onClick,(e=>{r||null==l||l(),h&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())}))}),h&&vs.jsx($4,{control:u,bubbles:!p.current,name:a,value:o,checked:r,required:s,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})}));V4.displayName=F4;var H4="RadioIndicator",q4=cs.forwardRef(((e,t)=>{const{__scopeRadio:n,forceMount:a,...r}=e,s=G4(H4,n);return vs.jsx(hv,{present:a||s.checked,children:vs.jsx(Xy.span,{"data-state":Y4(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})})}));q4.displayName=H4;var $4=cs.forwardRef((({__scopeRadio:e,control:t,checked:n,bubbles:a=!0,...r},s)=>{const i=cs.useRef(null),o=Gy(i,s),l=PB(n),c=nS(t);return cs.useEffect((()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&r){const t=new Event("click",{bubbles:a});r.call(e,n),e.dispatchEvent(t)}}),[l,n,a]),vs.jsx(Xy.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:o,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})}));function Y4(e){return e?"checked":"unchecked"}$4.displayName="RadioBubbleInput";var Q4=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],K4="RadioGroup",[J4,Z4]=Vy(K4,[qT,U4]),X4=qT(),e3=U4(),[t3,n3]=J4(K4),a3=cs.forwardRef(((e,t)=>{const{__scopeRadioGroup:n,name:a,defaultValue:r,value:s,required:i=!1,disabled:o=!1,orientation:l,dir:c,loop:d=!0,onValueChange:u,...f}=e,m=X4(n),p=ST(c),[h,g]=yv({prop:s,defaultProp:r??null,onChange:u,caller:K4});return vs.jsx(t3,{scope:n,name:a,required:i,disabled:o,value:h,onValueChange:g,children:vs.jsx(tD,{asChild:!0,...m,orientation:l,dir:p,loop:d,children:vs.jsx(Xy.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":o?"":void 0,dir:p,...f,ref:t})})})}));a3.displayName=K4;var r3="RadioGroupItem",s3=cs.forwardRef(((e,t)=>{const{__scopeRadioGroup:n,disabled:a,...r}=e,s=n3(r3,n),i=s.disabled||a,o=X4(n),l=e3(n),c=cs.useRef(null),d=Gy(t,c),u=s.value===r.value,f=cs.useRef(!1);return cs.useEffect((()=>{const e=e=>{Q4.includes(e.key)&&(f.current=!0)},t=()=>f.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),vs.jsx(nD,{asChild:!0,...o,focusable:!i,active:u,children:vs.jsx(V4,{disabled:i,required:s.required,checked:u,...l,...r,name:s.name,ref:d,onCheck:()=>s.onValueChange(r.value),onKeyDown:By((e=>{"Enter"===e.key&&e.preventDefault()})),onFocus:By(r.onFocus,(()=>{var e;f.current&&(null==(e=c.current)||e.click())}))})})}));s3.displayName=r3;var i3=cs.forwardRef(((e,t)=>{const{__scopeRadioGroup:n,...a}=e,r=e3(n);return vs.jsx(q4,{...r,...a,ref:t})}));i3.displayName="RadioGroupIndicator";var o3=a3,l3=s3,c3=i3;const d3=cs.forwardRef((({className:e,...t},n)=>vs.jsx(o3,{className:fN("grid gap-2",e),...t,ref:n})));d3.displayName=o3.displayName;const u3=cs.forwardRef((({className:e,...t},n)=>vs.jsx(l3,{ref:n,className:fN("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:vs.jsx(c3,{className:"flex items-center justify-center",children:vs.jsx(Fb,{className:"h-2.5 w-2.5 fill-current text-current"})})})));u3.displayName=l3.displayName;const f3=[{value:"5",label:"5 minutes"},{value:"15",label:"15 minutes"},{value:"30",label:"30 minutes"},{value:"60",label:"1 hour"},{value:"120",label:"2 hours"},{value:"240",label:"4 hours"},{value:"480",label:"8 hours"},{value:"1440",label:"24 hours"},{value:"manual",label:"Until manually re-enabled"},{value:"custom",label:"Custom duration"}];const m3=[{value:"bot_only",label:"Re-enable bot responses only",description:"Only remove bot disable flag, keep all context and history"},{value:"bot_and_context",label:"Reset bot + clear conversation context",description:"Re-enable bot and clear flow variables/context"},{value:"full_reset",label:"Full reset (bot + context + history)",description:"Complete reset including conversation history"}];const p3=[{id:"start_chatflow",name:"Start Chatflow",description:"Initialize new AI conversation"},{id:"send_message",name:"Send Message",description:"Send message to AI chatflow"},{id:"get_response",name:"Get Response",description:"Retrieve AI response"},{id:"manage_session",name:"Manage Session",description:"Create/update/close session"},{id:"stream_response",name:"Stream Response",description:"Handle streaming AI responses"},{id:"get_chatflow_info",name:"Get Chatflow Info",description:"Retrieve chatflow details"}],h3=[{id:"start_ai_chat",name:"Start AI Chat",operation:"start_chatflow",config:{question:"{{message.content}}",overrideConfig:{sessionId:"{{contact.id}}_{{timestamp}}",returnSourceDocuments:!0}}},{id:"send_query",name:"Send AI Query",operation:"send_message",config:{question:"{{user.query}}",sessionId:"{{flowise.session.id}}",streaming:!1}},{id:"get_ai_response",name:"Get AI Response",operation:"get_response",config:{sessionId:"{{flowise.session.id}}",waitForResponse:!0,timeout:30}},{id:"stream_ai_chat",name:"Stream AI Chat",operation:"stream_response",config:{question:"{{message.content}}",streaming:!0,sessionId:"{{contact.id}}_stream"}}],g3={start_chatflow:[{key:"question",label:"Initial Question",type:"text",required:!0},{key:"sessionId",label:"Session ID",type:"text",required:!1},{key:"returnSourceDocuments",label:"Return Source Documents",type:"boolean",default:!1,required:!1},{key:"overrideConfig",label:"Override Config",type:"object",description:"JSON configuration override",required:!1}],send_message:[{key:"question",label:"Message Content",type:"text",required:!0},{key:"sessionId",label:"Session ID",type:"text",required:!0},{key:"streaming",label:"Enable Streaming",type:"boolean",default:!1,required:!1},{key:"uploads",label:"File Uploads",type:"object",description:"File upload configuration",required:!1}],get_response:[{key:"sessionId",label:"Session ID",type:"text",required:!0},{key:"waitForResponse",label:"Wait for Response",type:"boolean",default:!0,required:!1},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30,required:!1},{key:"format",label:"Response Format",type:"select",options:[{id:"text",name:"Text Only"},{id:"json",name:"JSON Response"},{id:"markdown",name:"Markdown"},{id:"html",name:"HTML"}].map((e=>e.id)),required:!1}],manage_session:[{key:"action",label:"Session Action",type:"select",options:[{id:"create",name:"Create Session"},{id:"update",name:"Update Session"},{id:"close",name:"Close Session"},{id:"get_status",name:"Get Status"}].map((e=>e.id)),required:!0},{key:"sessionId",label:"Session ID",type:"text",required:!1},{key:"memory",label:"Session Memory",type:"object",description:"Memory configuration",required:!1}],stream_response:[{key:"question",label:"Question",type:"text",required:!0},{key:"sessionId",label:"Session ID",type:"text",required:!1},{key:"streaming",label:"Enable Streaming",type:"boolean",default:!0,required:!1},{key:"onChunk",label:"Chunk Handler",type:"text",description:"JavaScript function for handling chunks",required:!1}],get_chatflow_info:[{key:"includeCredentials",label:"Include Credentials",type:"boolean",default:!1,required:!1},{key:"includeNodes",label:"Include Nodes",type:"boolean",default:!0,required:!1}]};var x3="Progress",[y3,v3]=Vy(x3),[b3,w3]=y3(x3),j3=cs.forwardRef(((e,t)=>{const{__scopeProgress:n,value:a=null,max:r,getValueLabel:s=S3,...i}=e;(r||0===r)&&_3(r);const o=_3(r)?r:100;null!==a&&I3(a,o);const l=I3(a,o)?a:null,c=M3(l)?s(l,o):void 0;return vs.jsx(b3,{scope:n,value:l,max:o,children:vs.jsx(Xy.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":M3(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":k3(l,o),"data-value":l??void 0,"data-max":o,...i,ref:t})})}));j3.displayName=x3;var N3="ProgressIndicator",C3=cs.forwardRef(((e,t)=>{const{__scopeProgress:n,...a}=e,r=w3(N3,n);return vs.jsx(Xy.div,{"data-state":k3(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...a,ref:t})}));function S3(e,t){return`${Math.round(e/t*100)}%`}function k3(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function M3(e){return"number"==typeof e}function _3(e){return M3(e)&&!isNaN(e)&&e>0}function I3(e,t){return M3(e)&&!isNaN(e)&&e<=t&&e>=0}C3.displayName=N3;var A3=j3,E3=C3;const L3=cs.forwardRef((({className:e,value:t,...n},a)=>vs.jsx(A3,{ref:a,className:fN("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:vs.jsx(E3,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})));function T3({onFileSelected:e,fileType:t="*/*",maxSize:n=30,className:a="",showProgress:r=!1,progress:s=0}){const[i,o]=cs.useState(null),l=cs.useRef(null),c=e=>e<1024?e+" bytes":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",d=()=>{l.current&&l.current.click()};return vs.jsxs("div",{className:a,children:[vs.jsx("input",{type:"file",ref:l,onChange:t=>{var a;const r=null==(a=t.target.files)?void 0:a[0];if(!r)return;const s=1024*n*1024;r.size>s?zy({title:"File too large",description:`Maximum file size is ${n}MB`,variant:"destructive"}):(o({name:r.name,size:r.size}),e(r))},accept:t,className:"hidden",disabled:r}),!r&&!i&&vs.jsxs(lk,{type:"button",variant:"brand",onClick:d,className:"w-full justify-start",disabled:r,size:"sm",children:[vs.jsx(sj,{className:"h-4 w-4 mr-2"}),"Upload File"]}),r&&vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("div",{className:"flex items-center justify-between",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(ew,{className:"h-4 w-4 mr-2"}),vs.jsx("span",{className:"text-sm truncate max-w-[180px]",children:(null==i?void 0:i.name)||"Uploading file..."})]})}),vs.jsx(L3,{value:s,className:"h-2"}),vs.jsxs("div",{className:"text-xs text-muted-foreground",children:[i?c(i.size):""," • ",s,"% uploaded"]})]}),i&&!r&&vs.jsxs("div",{className:"space-y-1",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(ew,{className:"h-4 w-4 mr-2"}),vs.jsx("span",{className:"text-sm truncate max-w-[180px]",children:i.name})]}),vs.jsx(lk,{type:"button",variant:"ghost",size:"icon",onClick:()=>{o(null),l.current&&(l.current.value="")},className:"h-6 w-6",children:vs.jsx(yj,{className:"h-4 w-4"})})]}),vs.jsx("div",{className:"text-xs text-muted-foreground",children:c(i.size)}),vs.jsxs(lk,{type:"button",variant:"brand",onClick:d,className:"w-full justify-start mt-1",size:"sm",children:[vs.jsx(sj,{className:"h-3 w-3 mr-2"}),"Change file"]})]})]})}L3.displayName=A3.displayName;var D3="Popover",[P3,O3]=Vy(D3,[sS]),R3=sS(),[z3,F3]=P3(D3),B3=e=>{const{__scopePopover:t,children:n,open:a,defaultOpen:r,onOpenChange:s,modal:i=!1}=e,o=R3(t),l=cs.useRef(null),[c,d]=cs.useState(!1),[u,f]=yv({prop:a,defaultProp:r??!1,onChange:s,caller:D3});return vs.jsx(wS,{...o,children:vs.jsx(z3,{scope:t,contentId:SN(),triggerRef:l,open:u,onOpenChange:f,onOpenToggle:cs.useCallback((()=>f((e=>!e))),[f]),hasCustomAnchor:c,onCustomAnchorAdd:cs.useCallback((()=>d(!0)),[]),onCustomAnchorRemove:cs.useCallback((()=>d(!1)),[]),modal:i,children:n})})};B3.displayName=D3;var U3="PopoverAnchor";cs.forwardRef(((e,t)=>{const{__scopePopover:n,...a}=e,r=F3(U3,n),s=R3(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:o}=r;return cs.useEffect((()=>(i(),()=>o())),[i,o]),vs.jsx(jS,{...s,...a,ref:t})})).displayName=U3;var W3="PopoverTrigger",G3=cs.forwardRef(((e,t)=>{const{__scopePopover:n,...a}=e,r=F3(W3,n),s=R3(n),i=Gy(t,r.triggerRef),o=vs.jsx(Xy.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":t6(r.open),...a,ref:i,onClick:By(e.onClick,r.onOpenToggle)});return r.hasCustomAnchor?o:vs.jsx(jS,{asChild:!0,...s,children:o})}));G3.displayName=W3;var V3="PopoverPortal",[H3,q3]=P3(V3,{forceMount:void 0}),$3=e=>{const{__scopePopover:t,forceMount:n,children:a,container:r}=e,s=F3(V3,t);return vs.jsx(H3,{scope:t,forceMount:n,children:vs.jsx(hv,{present:n||s.open,children:vs.jsx(pv,{asChild:!0,container:r,children:a})})})};$3.displayName=V3;var Y3="PopoverContent",Q3=cs.forwardRef(((e,t)=>{const n=q3(Y3,e.__scopePopover),{forceMount:a=n.forceMount,...r}=e,s=F3(Y3,e.__scopePopover);return vs.jsx(hv,{present:a||s.open,children:s.modal?vs.jsx(J3,{...r,ref:t}):vs.jsx(Z3,{...r,ref:t})})}));Q3.displayName=Y3;var K3=qy("PopoverContent.RemoveScroll"),J3=cs.forwardRef(((e,t)=>{const n=F3(Y3,e.__scopePopover),a=cs.useRef(null),r=Gy(t,a),s=cs.useRef(!1);return cs.useEffect((()=>{const e=a.current;if(e)return cD(e)}),[]),vs.jsx(KD,{as:K3,allowPinchZoom:!0,children:vs.jsx(X3,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:By(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),s.current||null==(t=n.triggerRef.current)||t.focus()})),onPointerDownOutside:By(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,a=2===t.button||n;s.current=a}),{checkForDefaultPrevented:!1}),onFocusOutside:By(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})})})),Z3=cs.forwardRef(((e,t)=>{const n=F3(Y3,e.__scopePopover),a=cs.useRef(!1),r=cs.useRef(!1);return vs.jsx(X3,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,i;null==(s=e.onCloseAutoFocus)||s.call(e,t),t.defaultPrevented||(a.current||null==(i=n.triggerRef.current)||i.focus(),t.preventDefault()),a.current=!1,r.current=!1},onInteractOutside:t=>{var s,i;null==(s=e.onInteractOutside)||s.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));const o=t.target;(null==(i=n.triggerRef.current)?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}})})),X3=cs.forwardRef(((e,t)=>{const{__scopePopover:n,trapFocus:a,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...u}=e,f=F3(Y3,n),m=R3(n);return MT(),vs.jsx(LT,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:r,onUnmountAutoFocus:s,children:vs.jsx(ov,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:vs.jsx(NS,{"data-state":t6(f.open),role:"dialog",id:f.contentId,...m,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),e6="PopoverClose";cs.forwardRef(((e,t)=>{const{__scopePopover:n,...a}=e,r=F3(e6,n);return vs.jsx(Xy.button,{type:"button",...a,ref:t,onClick:By(e.onClick,(()=>r.onOpenChange(!1)))})})).displayName=e6;function t6(e){return e?"open":"closed"}cs.forwardRef(((e,t)=>{const{__scopePopover:n,...a}=e,r=R3(n);return vs.jsx(CS,{...r,...a,ref:t})})).displayName="PopoverArrow";var n6=$3,a6=Q3;const r6=B3,s6=G3,i6=cs.forwardRef((({className:e,align:t="center",sideOffset:n=4,...a},r)=>vs.jsx(n6,{children:vs.jsx(a6,{ref:r,align:t,sideOffset:n,className:fN("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...a})})));i6.displayName=a6.displayName;const o6=[{value:"UTC",label:"UTC",city:"Coordinated Universal Time",country:"UTC"},{value:"Africa/Abidjan",label:"Abidjan",city:"Abidjan",country:"Ivory Coast"},{value:"Africa/Accra",label:"Accra",city:"Accra",country:"Ghana"},{value:"Africa/Addis_Ababa",label:"Addis Ababa",city:"Addis Ababa",country:"Ethiopia"},{value:"Africa/Algiers",label:"Algiers",city:"Algiers",country:"Algeria"},{value:"Africa/Asmara",label:"Asmara",city:"Asmara",country:"Eritrea"},{value:"Africa/Bamako",label:"Bamako",city:"Bamako",country:"Mali"},{value:"Africa/Bangui",label:"Bangui",city:"Bangui",country:"Central African Republic"},{value:"Africa/Banjul",label:"Banjul",city:"Banjul",country:"Gambia"},{value:"Africa/Bissau",label:"Bissau",city:"Bissau",country:"Guinea-Bissau"},{value:"Africa/Blantyre",label:"Blantyre",city:"Blantyre",country:"Malawi"},{value:"Africa/Brazzaville",label:"Brazzaville",city:"Brazzaville",country:"Republic of the Congo"},{value:"Africa/Bujumbura",label:"Bujumbura",city:"Bujumbura",country:"Burundi"},{value:"Africa/Cairo",label:"Cairo",city:"Cairo",country:"Egypt"},{value:"Africa/Casablanca",label:"Casablanca",city:"Casablanca",country:"Morocco"},{value:"Africa/Ceuta",label:"Ceuta",city:"Ceuta",country:"Spain"},{value:"Africa/Conakry",label:"Conakry",city:"Conakry",country:"Guinea"},{value:"Africa/Dakar",label:"Dakar",city:"Dakar",country:"Senegal"},{value:"Africa/Dar_es_Salaam",label:"Dar es Salaam",city:"Dar es Salaam",country:"Tanzania"},{value:"Africa/Djibouti",label:"Djibouti",city:"Djibouti",country:"Djibouti"},{value:"Africa/Douala",label:"Douala",city:"Douala",country:"Cameroon"},{value:"Africa/El_Aaiun",label:"El Aaiun",city:"El Aaiun",country:"Western Sahara"},{value:"Africa/Freetown",label:"Freetown",city:"Freetown",country:"Sierra Leone"},{value:"Africa/Gaborone",label:"Gaborone",city:"Gaborone",country:"Botswana"},{value:"Africa/Harare",label:"Harare",city:"Harare",country:"Zimbabwe"},{value:"Africa/Johannesburg",label:"Johannesburg",city:"Johannesburg",country:"South Africa"},{value:"Africa/Juba",label:"Juba",city:"Juba",country:"South Sudan"},{value:"Africa/Kampala",label:"Kampala",city:"Kampala",country:"Uganda"},{value:"Africa/Khartoum",label:"Khartoum",city:"Khartoum",country:"Sudan"},{value:"Africa/Kigali",label:"Kigali",city:"Kigali",country:"Rwanda"},{value:"Africa/Kinshasa",label:"Kinshasa",city:"Kinshasa",country:"Democratic Republic of the Congo"},{value:"Africa/Lagos",label:"Lagos",city:"Lagos",country:"Nigeria"},{value:"Africa/Libreville",label:"Libreville",city:"Libreville",country:"Gabon"},{value:"Africa/Lome",label:"Lome",city:"Lome",country:"Togo"},{value:"Africa/Luanda",label:"Luanda",city:"Luanda",country:"Angola"},{value:"Africa/Lubumbashi",label:"Lubumbashi",city:"Lubumbashi",country:"Democratic Republic of the Congo"},{value:"Africa/Lusaka",label:"Lusaka",city:"Lusaka",country:"Zambia"},{value:"Africa/Malabo",label:"Malabo",city:"Malabo",country:"Equatorial Guinea"},{value:"Africa/Maputo",label:"Maputo",city:"Maputo",country:"Mozambique"},{value:"Africa/Maseru",label:"Maseru",city:"Maseru",country:"Lesotho"},{value:"Africa/Mbabane",label:"Mbabane",city:"Mbabane",country:"Eswatini"},{value:"Africa/Mogadishu",label:"Mogadishu",city:"Mogadishu",country:"Somalia"},{value:"Africa/Monrovia",label:"Monrovia",city:"Monrovia",country:"Liberia"},{value:"Africa/Nairobi",label:"Nairobi",city:"Nairobi",country:"Kenya"},{value:"Africa/Ndjamena",label:"Ndjamena",city:"Ndjamena",country:"Chad"},{value:"Africa/Niamey",label:"Niamey",city:"Niamey",country:"Niger"},{value:"Africa/Nouakchott",label:"Nouakchott",city:"Nouakchott",country:"Mauritania"},{value:"Africa/Ouagadougou",label:"Ouagadougou",city:"Ouagadougou",country:"Burkina Faso"},{value:"Africa/Porto-Novo",label:"Porto-Novo",city:"Porto-Novo",country:"Benin"},{value:"Africa/Sao_Tome",label:"Sao Tome",city:"Sao Tome",country:"Sao Tome and Principe"},{value:"Africa/Tripoli",label:"Tripoli",city:"Tripoli",country:"Libya"},{value:"Africa/Tunis",label:"Tunis",city:"Tunis",country:"Tunisia"},{value:"Africa/Windhoek",label:"Windhoek",city:"Windhoek",country:"Namibia"},{value:"America/Adak",label:"Adak",city:"Adak",country:"United States"},{value:"America/Anchorage",label:"Anchorage",city:"Anchorage",country:"United States"},{value:"America/Anguilla",label:"Anguilla",city:"The Valley",country:"Anguilla"},{value:"America/Antigua",label:"Antigua",city:"Saint Johns",country:"Antigua and Barbuda"},{value:"America/Araguaina",label:"Araguaina",city:"Araguaina",country:"Brazil"},{value:"America/Argentina/Buenos_Aires",label:"Buenos Aires",city:"Buenos Aires",country:"Argentina"},{value:"America/Argentina/Catamarca",label:"Catamarca",city:"Catamarca",country:"Argentina"},{value:"America/Argentina/Cordoba",label:"Cordoba",city:"Cordoba",country:"Argentina"},{value:"America/Argentina/Jujuy",label:"Jujuy",city:"Jujuy",country:"Argentina"},{value:"America/Argentina/La_Rioja",label:"La Rioja",city:"La Rioja",country:"Argentina"},{value:"America/Argentina/Mendoza",label:"Mendoza",city:"Mendoza",country:"Argentina"},{value:"America/Argentina/Rio_Gallegos",label:"Rio Gallegos",city:"Rio Gallegos",country:"Argentina"},{value:"America/Argentina/Salta",label:"Salta",city:"Salta",country:"Argentina"},{value:"America/Argentina/San_Juan",label:"San Juan",city:"San Juan",country:"Argentina"},{value:"America/Argentina/San_Luis",label:"San Luis",city:"San Luis",country:"Argentina"},{value:"America/Argentina/Tucuman",label:"Tucuman",city:"Tucuman",country:"Argentina"},{value:"America/Argentina/Ushuaia",label:"Ushuaia",city:"Ushuaia",country:"Argentina"},{value:"America/Aruba",label:"Aruba",city:"Oranjestad",country:"Aruba"},{value:"America/Asuncion",label:"Asuncion",city:"Asuncion",country:"Paraguay"},{value:"America/Atikokan",label:"Atikokan",city:"Atikokan",country:"Canada"},{value:"America/Bahia",label:"Bahia",city:"Salvador",country:"Brazil"},{value:"America/Bahia_Banderas",label:"Bahia Banderas",city:"Bahia Banderas",country:"Mexico"},{value:"America/Barbados",label:"Barbados",city:"Bridgetown",country:"Barbados"},{value:"America/Belem",label:"Belem",city:"Belem",country:"Brazil"},{value:"America/Belize",label:"Belize",city:"Belize City",country:"Belize"},{value:"America/Blanc-Sablon",label:"Blanc-Sablon",city:"Blanc-Sablon",country:"Canada"},{value:"America/Boa_Vista",label:"Boa Vista",city:"Boa Vista",country:"Brazil"},{value:"America/Bogota",label:"Bogota",city:"Bogota",country:"Colombia"},{value:"America/Boise",label:"Boise",city:"Boise",country:"United States"},{value:"America/Cambridge_Bay",label:"Cambridge Bay",city:"Cambridge Bay",country:"Canada"},{value:"America/Campo_Grande",label:"Campo Grande",city:"Campo Grande",country:"Brazil"},{value:"America/Cancun",label:"Cancun",city:"Cancun",country:"Mexico"},{value:"America/Caracas",label:"Caracas",city:"Caracas",country:"Venezuela"},{value:"America/Cayenne",label:"Cayenne",city:"Cayenne",country:"French Guiana"},{value:"America/Cayman",label:"Cayman",city:"George Town",country:"Cayman Islands"},{value:"America/Chicago",label:"Chicago",city:"Chicago",country:"United States"},{value:"America/Chihuahua",label:"Chihuahua",city:"Chihuahua",country:"Mexico"},{value:"America/Costa_Rica",label:"Costa Rica",city:"San Jose",country:"Costa Rica"},{value:"America/Creston",label:"Creston",city:"Creston",country:"Canada"},{value:"America/Cuiaba",label:"Cuiaba",city:"Cuiaba",country:"Brazil"},{value:"America/Curacao",label:"Curacao",city:"Willemstad",country:"Curacao"},{value:"America/Danmarkshavn",label:"Danmarkshavn",city:"Danmarkshavn",country:"Greenland"},{value:"America/Dawson",label:"Dawson",city:"Dawson",country:"Canada"},{value:"America/Dawson_Creek",label:"Dawson Creek",city:"Dawson Creek",country:"Canada"},{value:"America/Denver",label:"Denver",city:"Denver",country:"United States"},{value:"America/Detroit",label:"Detroit",city:"Detroit",country:"United States"},{value:"America/Dominica",label:"Dominica",city:"Roseau",country:"Dominica"},{value:"America/Edmonton",label:"Edmonton",city:"Edmonton",country:"Canada"},{value:"America/Eirunepe",label:"Eirunepe",city:"Eirunepe",country:"Brazil"},{value:"America/El_Salvador",label:"El Salvador",city:"San Salvador",country:"El Salvador"},{value:"America/Fort_Nelson",label:"Fort Nelson",city:"Fort Nelson",country:"Canada"},{value:"America/Fortaleza",label:"Fortaleza",city:"Fortaleza",country:"Brazil"},{value:"America/Glace_Bay",label:"Glace Bay",city:"Glace Bay",country:"Canada"},{value:"America/Godthab",label:"Nuuk",city:"Nuuk",country:"Greenland"},{value:"America/Goose_Bay",label:"Goose Bay",city:"Goose Bay",country:"Canada"},{value:"America/Grand_Turk",label:"Grand Turk",city:"Grand Turk",country:"Turks and Caicos Islands"},{value:"America/Grenada",label:"Grenada",city:"Saint Georges",country:"Grenada"},{value:"America/Guadeloupe",label:"Guadeloupe",city:"Basse-Terre",country:"Guadeloupe"},{value:"America/Guatemala",label:"Guatemala",city:"Guatemala City",country:"Guatemala"},{value:"America/Guayaquil",label:"Guayaquil",city:"Guayaquil",country:"Ecuador"},{value:"America/Guyana",label:"Guyana",city:"Georgetown",country:"Guyana"},{value:"America/Halifax",label:"Halifax",city:"Halifax",country:"Canada"},{value:"America/Havana",label:"Havana",city:"Havana",country:"Cuba"},{value:"America/Hermosillo",label:"Hermosillo",city:"Hermosillo",country:"Mexico"},{value:"America/Indiana/Indianapolis",label:"Indianapolis",city:"Indianapolis",country:"United States"},{value:"America/Indiana/Knox",label:"Knox",city:"Knox",country:"United States"},{value:"America/Indiana/Marengo",label:"Marengo",city:"Marengo",country:"United States"},{value:"America/Indiana/Petersburg",label:"Petersburg",city:"Petersburg",country:"United States"},{value:"America/Indiana/Tell_City",label:"Tell City",city:"Tell City",country:"United States"},{value:"America/Indiana/Vevay",label:"Vevay",city:"Vevay",country:"United States"},{value:"America/Indiana/Vincennes",label:"Vincennes",city:"Vincennes",country:"United States"},{value:"America/Indiana/Winamac",label:"Winamac",city:"Winamac",country:"United States"},{value:"America/Inuvik",label:"Inuvik",city:"Inuvik",country:"Canada"},{value:"America/Iqaluit",label:"Iqaluit",city:"Iqaluit",country:"Canada"},{value:"America/Jamaica",label:"Jamaica",city:"Kingston",country:"Jamaica"},{value:"America/Juneau",label:"Juneau",city:"Juneau",country:"United States"},{value:"America/Kentucky/Louisville",label:"Louisville",city:"Louisville",country:"United States"},{value:"America/Kentucky/Monticello",label:"Monticello",city:"Monticello",country:"United States"},{value:"America/Kralendijk",label:"Kralendijk",city:"Kralendijk",country:"Caribbean Netherlands"},{value:"America/La_Paz",label:"La Paz",city:"La Paz",country:"Bolivia"},{value:"America/Lima",label:"Lima",city:"Lima",country:"Peru"},{value:"America/Los_Angeles",label:"Los Angeles",city:"Los Angeles",country:"United States"},{value:"America/Lower_Princes",label:"Lower Princes Quarter",city:"Lower Princes Quarter",country:"Sint Maarten"},{value:"America/Maceio",label:"Maceio",city:"Maceio",country:"Brazil"},{value:"America/Managua",label:"Managua",city:"Managua",country:"Nicaragua"},{value:"America/Manaus",label:"Manaus",city:"Manaus",country:"Brazil"},{value:"America/Marigot",label:"Marigot",city:"Marigot",country:"Saint Martin"},{value:"America/Martinique",label:"Martinique",city:"Fort-de-France",country:"Martinique"},{value:"America/Matamoros",label:"Matamoros",city:"Matamoros",country:"Mexico"},{value:"America/Mazatlan",label:"Mazatlan",city:"Mazatlan",country:"Mexico"},{value:"America/Menominee",label:"Menominee",city:"Menominee",country:"United States"},{value:"America/Merida",label:"Merida",city:"Merida",country:"Mexico"},{value:"America/Metlakatla",label:"Metlakatla",city:"Metlakatla",country:"United States"},{value:"America/Mexico_City",label:"Mexico City",city:"Mexico City",country:"Mexico"},{value:"America/Miquelon",label:"Miquelon",city:"Saint-Pierre",country:"Saint Pierre and Miquelon"},{value:"America/Moncton",label:"Moncton",city:"Moncton",country:"Canada"},{value:"America/Monterrey",label:"Monterrey",city:"Monterrey",country:"Mexico"},{value:"America/Montevideo",label:"Montevideo",city:"Montevideo",country:"Uruguay"},{value:"America/Montserrat",label:"Montserrat",city:"Plymouth",country:"Montserrat"},{value:"America/Nassau",label:"Nassau",city:"Nassau",country:"Bahamas"},{value:"America/New_York",label:"New York",city:"New York",country:"United States"},{value:"America/Nipigon",label:"Nipigon",city:"Nipigon",country:"Canada"},{value:"America/Nome",label:"Nome",city:"Nome",country:"United States"},{value:"America/Noronha",label:"Noronha",city:"Fernando de Noronha",country:"Brazil"},{value:"America/North_Dakota/Beulah",label:"Beulah",city:"Beulah",country:"United States"},{value:"America/North_Dakota/Center",label:"Center",city:"Center",country:"United States"},{value:"America/North_Dakota/New_Salem",label:"New Salem",city:"New Salem",country:"United States"},{value:"America/Ojinaga",label:"Ojinaga",city:"Ojinaga",country:"Mexico"},{value:"America/Panama",label:"Panama",city:"Panama City",country:"Panama"},{value:"America/Pangnirtung",label:"Pangnirtung",city:"Pangnirtung",country:"Canada"},{value:"America/Paramaribo",label:"Paramaribo",city:"Paramaribo",country:"Suriname"},{value:"America/Phoenix",label:"Phoenix",city:"Phoenix",country:"United States"},{value:"America/Port-au-Prince",label:"Port-au-Prince",city:"Port-au-Prince",country:"Haiti"},{value:"America/Port_of_Spain",label:"Port of Spain",city:"Port of Spain",country:"Trinidad and Tobago"},{value:"America/Porto_Velho",label:"Porto Velho",city:"Porto Velho",country:"Brazil"},{value:"America/Puerto_Rico",label:"Puerto Rico",city:"San Juan",country:"Puerto Rico"},{value:"America/Punta_Arenas",label:"Punta Arenas",city:"Punta Arenas",country:"Chile"},{value:"America/Rainy_River",label:"Rainy River",city:"Rainy River",country:"Canada"},{value:"America/Rankin_Inlet",label:"Rankin Inlet",city:"Rankin Inlet",country:"Canada"},{value:"America/Recife",label:"Recife",city:"Recife",country:"Brazil"},{value:"America/Regina",label:"Regina",city:"Regina",country:"Canada"},{value:"America/Resolute",label:"Resolute",city:"Resolute",country:"Canada"},{value:"America/Rio_Branco",label:"Rio Branco",city:"Rio Branco",country:"Brazil"},{value:"America/Santarem",label:"Santarem",city:"Santarem",country:"Brazil"},{value:"America/Santiago",label:"Santiago",city:"Santiago",country:"Chile"},{value:"America/Santo_Domingo",label:"Santo Domingo",city:"Santo Domingo",country:"Dominican Republic"},{value:"America/Sao_Paulo",label:"Sao Paulo",city:"Sao Paulo",country:"Brazil"},{value:"America/Scoresbysund",label:"Scoresbysund",city:"Ittoqqortoormiit",country:"Greenland"},{value:"America/Sitka",label:"Sitka",city:"Sitka",country:"United States"},{value:"America/St_Barthelemy",label:"Saint Barthelemy",city:"Gustavia",country:"Saint Barthelemy"},{value:"America/St_Johns",label:"St. Johns",city:"St. Johns",country:"Canada"},{value:"America/St_Kitts",label:"Saint Kitts",city:"Basseterre",country:"Saint Kitts and Nevis"},{value:"America/St_Lucia",label:"Saint Lucia",city:"Castries",country:"Saint Lucia"},{value:"America/St_Thomas",label:"Saint Thomas",city:"Charlotte Amalie",country:"US Virgin Islands"},{value:"America/St_Vincent",label:"Saint Vincent",city:"Kingstown",country:"Saint Vincent and the Grenadines"},{value:"America/Swift_Current",label:"Swift Current",city:"Swift Current",country:"Canada"},{value:"America/Tegucigalpa",label:"Tegucigalpa",city:"Tegucigalpa",country:"Honduras"},{value:"America/Thule",label:"Thule",city:"Qaanaaq",country:"Greenland"},{value:"America/Thunder_Bay",label:"Thunder Bay",city:"Thunder Bay",country:"Canada"},{value:"America/Tijuana",label:"Tijuana",city:"Tijuana",country:"Mexico"},{value:"America/Toronto",label:"Toronto",city:"Toronto",country:"Canada"},{value:"America/Tortola",label:"Tortola",city:"Road Town",country:"British Virgin Islands"},{value:"America/Vancouver",label:"Vancouver",city:"Vancouver",country:"Canada"},{value:"America/Whitehorse",label:"Whitehorse",city:"Whitehorse",country:"Canada"},{value:"America/Winnipeg",label:"Winnipeg",city:"Winnipeg",country:"Canada"},{value:"America/Yakutat",label:"Yakutat",city:"Yakutat",country:"United States"},{value:"America/Yellowknife",label:"Yellowknife",city:"Yellowknife",country:"Canada"},{value:"Asia/Aden",label:"Aden",city:"Aden",country:"Yemen"},{value:"Asia/Almaty",label:"Almaty",city:"Almaty",country:"Kazakhstan"},{value:"Asia/Amman",label:"Amman",city:"Amman",country:"Jordan"},{value:"Asia/Anadyr",label:"Anadyr",city:"Anadyr",country:"Russia"},{value:"Asia/Aqtau",label:"Aqtau",city:"Aqtau",country:"Kazakhstan"},{value:"Asia/Aqtobe",label:"Aqtobe",city:"Aqtobe",country:"Kazakhstan"},{value:"Asia/Ashgabat",label:"Ashgabat",city:"Ashgabat",country:"Turkmenistan"},{value:"Asia/Atyrau",label:"Atyrau",city:"Atyrau",country:"Kazakhstan"},{value:"Asia/Baghdad",label:"Baghdad",city:"Baghdad",country:"Iraq"},{value:"Asia/Bahrain",label:"Bahrain",city:"Manama",country:"Bahrain"},{value:"Asia/Baku",label:"Baku",city:"Baku",country:"Azerbaijan"},{value:"Asia/Bangkok",label:"Bangkok",city:"Bangkok",country:"Thailand"},{value:"Asia/Barnaul",label:"Barnaul",city:"Barnaul",country:"Russia"},{value:"Asia/Beirut",label:"Beirut",city:"Beirut",country:"Lebanon"},{value:"Asia/Bishkek",label:"Bishkek",city:"Bishkek",country:"Kyrgyzstan"},{value:"Asia/Brunei",label:"Brunei",city:"Bandar Seri Begawan",country:"Brunei"},{value:"Asia/Chita",label:"Chita",city:"Chita",country:"Russia"},{value:"Asia/Choibalsan",label:"Choibalsan",city:"Choibalsan",country:"Mongolia"},{value:"Asia/Colombo",label:"Colombo",city:"Colombo",country:"Sri Lanka"},{value:"Asia/Damascus",label:"Damascus",city:"Damascus",country:"Syria"},{value:"Asia/Dhaka",label:"Dhaka",city:"Dhaka",country:"Bangladesh"},{value:"Asia/Dili",label:"Dili",city:"Dili",country:"East Timor"},{value:"Asia/Dubai",label:"Dubai",city:"Dubai",country:"United Arab Emirates"},{value:"Asia/Dushanbe",label:"Dushanbe",city:"Dushanbe",country:"Tajikistan"},{value:"Asia/Famagusta",label:"Famagusta",city:"Famagusta",country:"Cyprus"},{value:"Asia/Gaza",label:"Gaza",city:"Gaza",country:"Palestine"},{value:"Asia/Hebron",label:"Hebron",city:"Hebron",country:"Palestine"},{value:"Asia/Ho_Chi_Minh",label:"Ho Chi Minh City",city:"Ho Chi Minh City",country:"Vietnam"},{value:"Asia/Hong_Kong",label:"Hong Kong",city:"Hong Kong",country:"Hong Kong"},{value:"Asia/Hovd",label:"Hovd",city:"Hovd",country:"Mongolia"},{value:"Asia/Irkutsk",label:"Irkutsk",city:"Irkutsk",country:"Russia"},{value:"Asia/Jakarta",label:"Jakarta",city:"Jakarta",country:"Indonesia"},{value:"Asia/Jayapura",label:"Jayapura",city:"Jayapura",country:"Indonesia"},{value:"Asia/Jerusalem",label:"Jerusalem",city:"Jerusalem",country:"Israel"},{value:"Asia/Kabul",label:"Kabul",city:"Kabul",country:"Afghanistan"},{value:"Asia/Kamchatka",label:"Kamchatka",city:"Petropavlovsk-Kamchatsky",country:"Russia"},{value:"Asia/Karachi",label:"Karachi",city:"Karachi",country:"Pakistan"},{value:"Asia/Kathmandu",label:"Kathmandu",city:"Kathmandu",country:"Nepal"},{value:"Asia/Khandyga",label:"Khandyga",city:"Khandyga",country:"Russia"},{value:"Asia/Kolkata",label:"Kolkata",city:"Kolkata",country:"India"},{value:"Asia/Krasnoyarsk",label:"Krasnoyarsk",city:"Krasnoyarsk",country:"Russia"},{value:"Asia/Kuala_Lumpur",label:"Kuala Lumpur",city:"Kuala Lumpur",country:"Malaysia"},{value:"Asia/Kuching",label:"Kuching",city:"Kuching",country:"Malaysia"},{value:"Asia/Kuwait",label:"Kuwait",city:"Kuwait City",country:"Kuwait"},{value:"Asia/Macau",label:"Macau",city:"Macau",country:"Macau"},{value:"Asia/Magadan",label:"Magadan",city:"Magadan",country:"Russia"},{value:"Asia/Makassar",label:"Makassar",city:"Makassar",country:"Indonesia"},{value:"Asia/Manila",label:"Manila",city:"Manila",country:"Philippines"},{value:"Asia/Muscat",label:"Muscat",city:"Muscat",country:"Oman"},{value:"Asia/Nicosia",label:"Nicosia",city:"Nicosia",country:"Cyprus"},{value:"Asia/Novokuznetsk",label:"Novokuznetsk",city:"Novokuznetsk",country:"Russia"},{value:"Asia/Novosibirsk",label:"Novosibirsk",city:"Novosibirsk",country:"Russia"},{value:"Asia/Omsk",label:"Omsk",city:"Omsk",country:"Russia"},{value:"Asia/Oral",label:"Oral",city:"Oral",country:"Kazakhstan"},{value:"Asia/Phnom_Penh",label:"Phnom Penh",city:"Phnom Penh",country:"Cambodia"},{value:"Asia/Pontianak",label:"Pontianak",city:"Pontianak",country:"Indonesia"},{value:"Asia/Pyongyang",label:"Pyongyang",city:"Pyongyang",country:"North Korea"},{value:"Asia/Qatar",label:"Qatar",city:"Doha",country:"Qatar"},{value:"Asia/Qostanay",label:"Qostanay",city:"Qostanay",country:"Kazakhstan"},{value:"Asia/Qyzylorda",label:"Qyzylorda",city:"Qyzylorda",country:"Kazakhstan"},{value:"Asia/Riyadh",label:"Riyadh",city:"Riyadh",country:"Saudi Arabia"},{value:"Asia/Sakhalin",label:"Sakhalin",city:"Yuzhno-Sakhalinsk",country:"Russia"},{value:"Asia/Samarkand",label:"Samarkand",city:"Samarkand",country:"Uzbekistan"},{value:"Asia/Seoul",label:"Seoul",city:"Seoul",country:"South Korea"},{value:"Asia/Shanghai",label:"Shanghai",city:"Shanghai",country:"China"},{value:"Asia/Singapore",label:"Singapore",city:"Singapore",country:"Singapore"},{value:"Asia/Srednekolymsk",label:"Srednekolymsk",city:"Srednekolymsk",country:"Russia"},{value:"Asia/Taipei",label:"Taipei",city:"Taipei",country:"Taiwan"},{value:"Asia/Tashkent",label:"Tashkent",city:"Tashkent",country:"Uzbekistan"},{value:"Asia/Tbilisi",label:"Tbilisi",city:"Tbilisi",country:"Georgia"},{value:"Asia/Tehran",label:"Tehran",city:"Tehran",country:"Iran"},{value:"Asia/Thimphu",label:"Thimphu",city:"Thimphu",country:"Bhutan"},{value:"Asia/Tokyo",label:"Tokyo",city:"Tokyo",country:"Japan"},{value:"Asia/Tomsk",label:"Tomsk",city:"Tomsk",country:"Russia"},{value:"Asia/Ulaanbaatar",label:"Ulaanbaatar",city:"Ulaanbaatar",country:"Mongolia"},{value:"Asia/Urumqi",label:"Urumqi",city:"Urumqi",country:"China"},{value:"Asia/Ust-Nera",label:"Ust-Nera",city:"Ust-Nera",country:"Russia"},{value:"Asia/Vientiane",label:"Vientiane",city:"Vientiane",country:"Laos"},{value:"Asia/Vladivostok",label:"Vladivostok",city:"Vladivostok",country:"Russia"},{value:"Asia/Yakutsk",label:"Yakutsk",city:"Yakutsk",country:"Russia"},{value:"Asia/Yangon",label:"Yangon",city:"Yangon",country:"Myanmar"},{value:"Asia/Yekaterinburg",label:"Yekaterinburg",city:"Yekaterinburg",country:"Russia"},{value:"Asia/Yerevan",label:"Yerevan",city:"Yerevan",country:"Armenia"},{value:"Europe/Amsterdam",label:"Amsterdam",city:"Amsterdam",country:"Netherlands"},{value:"Europe/Andorra",label:"Andorra",city:"Andorra la Vella",country:"Andorra"},{value:"Europe/Astrakhan",label:"Astrakhan",city:"Astrakhan",country:"Russia"},{value:"Europe/Athens",label:"Athens",city:"Athens",country:"Greece"},{value:"Europe/Belgrade",label:"Belgrade",city:"Belgrade",country:"Serbia"},{value:"Europe/Berlin",label:"Berlin",city:"Berlin",country:"Germany"},{value:"Europe/Bratislava",label:"Bratislava",city:"Bratislava",country:"Slovakia"},{value:"Europe/Brussels",label:"Brussels",city:"Brussels",country:"Belgium"},{value:"Europe/Bucharest",label:"Bucharest",city:"Bucharest",country:"Romania"},{value:"Europe/Budapest",label:"Budapest",city:"Budapest",country:"Hungary"},{value:"Europe/Busingen",label:"Busingen",city:"Busingen",country:"Germany"},{value:"Europe/Chisinau",label:"Chisinau",city:"Chisinau",country:"Moldova"},{value:"Europe/Copenhagen",label:"Copenhagen",city:"Copenhagen",country:"Denmark"},{value:"Europe/Dublin",label:"Dublin",city:"Dublin",country:"Ireland"},{value:"Europe/Gibraltar",label:"Gibraltar",city:"Gibraltar",country:"Gibraltar"},{value:"Europe/Guernsey",label:"Guernsey",city:"Saint Peter Port",country:"Guernsey"},{value:"Europe/Helsinki",label:"Helsinki",city:"Helsinki",country:"Finland"},{value:"Europe/Isle_of_Man",label:"Isle of Man",city:"Douglas",country:"Isle of Man"},{value:"Europe/Istanbul",label:"Istanbul",city:"Istanbul",country:"Turkey"},{value:"Europe/Jersey",label:"Jersey",city:"Saint Helier",country:"Jersey"},{value:"Europe/Kaliningrad",label:"Kaliningrad",city:"Kaliningrad",country:"Russia"},{value:"Europe/Kiev",label:"Kiev",city:"Kiev",country:"Ukraine"},{value:"Europe/Kirov",label:"Kirov",city:"Kirov",country:"Russia"},{value:"Europe/Lisbon",label:"Lisbon",city:"Lisbon",country:"Portugal"},{value:"Europe/Ljubljana",label:"Ljubljana",city:"Ljubljana",country:"Slovenia"},{value:"Europe/London",label:"London",city:"London",country:"United Kingdom"},{value:"Europe/Luxembourg",label:"Luxembourg",city:"Luxembourg",country:"Luxembourg"},{value:"Europe/Madrid",label:"Madrid",city:"Madrid",country:"Spain"},{value:"Europe/Malta",label:"Malta",city:"Valletta",country:"Malta"},{value:"Europe/Mariehamn",label:"Mariehamn",city:"Mariehamn",country:"Finland"},{value:"Europe/Minsk",label:"Minsk",city:"Minsk",country:"Belarus"},{value:"Europe/Monaco",label:"Monaco",city:"Monaco",country:"Monaco"},{value:"Europe/Moscow",label:"Moscow",city:"Moscow",country:"Russia"},{value:"Europe/Oslo",label:"Oslo",city:"Oslo",country:"Norway"},{value:"Europe/Paris",label:"Paris",city:"Paris",country:"France"},{value:"Europe/Podgorica",label:"Podgorica",city:"Podgorica",country:"Montenegro"},{value:"Europe/Prague",label:"Prague",city:"Prague",country:"Czech Republic"},{value:"Europe/Riga",label:"Riga",city:"Riga",country:"Latvia"},{value:"Europe/Rome",label:"Rome",city:"Rome",country:"Italy"},{value:"Europe/Samara",label:"Samara",city:"Samara",country:"Russia"},{value:"Europe/San_Marino",label:"San Marino",city:"San Marino",country:"San Marino"},{value:"Europe/Sarajevo",label:"Sarajevo",city:"Sarajevo",country:"Bosnia and Herzegovina"},{value:"Europe/Saratov",label:"Saratov",city:"Saratov",country:"Russia"},{value:"Europe/Simferopol",label:"Simferopol",city:"Simferopol",country:"Ukraine"},{value:"Europe/Skopje",label:"Skopje",city:"Skopje",country:"North Macedonia"},{value:"Europe/Sofia",label:"Sofia",city:"Sofia",country:"Bulgaria"},{value:"Europe/Stockholm",label:"Stockholm",city:"Stockholm",country:"Sweden"},{value:"Europe/Tallinn",label:"Tallinn",city:"Tallinn",country:"Estonia"},{value:"Europe/Tirane",label:"Tirane",city:"Tirane",country:"Albania"},{value:"Europe/Ulyanovsk",label:"Ulyanovsk",city:"Ulyanovsk",country:"Russia"},{value:"Europe/Uzhgorod",label:"Uzhgorod",city:"Uzhgorod",country:"Ukraine"},{value:"Europe/Vaduz",label:"Vaduz",city:"Vaduz",country:"Liechtenstein"},{value:"Europe/Vatican",label:"Vatican",city:"Vatican City",country:"Vatican City"},{value:"Europe/Vienna",label:"Vienna",city:"Vienna",country:"Austria"},{value:"Europe/Vilnius",label:"Vilnius",city:"Vilnius",country:"Lithuania"},{value:"Europe/Volgograd",label:"Volgograd",city:"Volgograd",country:"Russia"},{value:"Europe/Warsaw",label:"Warsaw",city:"Warsaw",country:"Poland"},{value:"Europe/Zagreb",label:"Zagreb",city:"Zagreb",country:"Croatia"},{value:"Europe/Zaporozhye",label:"Zaporozhye",city:"Zaporozhye",country:"Ukraine"},{value:"Europe/Zurich",label:"Zurich",city:"Zurich",country:"Switzerland"},{value:"Australia/Adelaide",label:"Adelaide",city:"Adelaide",country:"Australia"},{value:"Australia/Brisbane",label:"Brisbane",city:"Brisbane",country:"Australia"},{value:"Australia/Broken_Hill",label:"Broken Hill",city:"Broken Hill",country:"Australia"},{value:"Australia/Currie",label:"Currie",city:"Currie",country:"Australia"},{value:"Australia/Darwin",label:"Darwin",city:"Darwin",country:"Australia"},{value:"Australia/Eucla",label:"Eucla",city:"Eucla",country:"Australia"},{value:"Australia/Hobart",label:"Hobart",city:"Hobart",country:"Australia"},{value:"Australia/Lindeman",label:"Lindeman",city:"Lindeman",country:"Australia"},{value:"Australia/Lord_Howe",label:"Lord Howe",city:"Lord Howe Island",country:"Australia"},{value:"Australia/Melbourne",label:"Melbourne",city:"Melbourne",country:"Australia"},{value:"Australia/Perth",label:"Perth",city:"Perth",country:"Australia"},{value:"Australia/Sydney",label:"Sydney",city:"Sydney",country:"Australia"},{value:"Pacific/Apia",label:"Apia",city:"Apia",country:"Samoa"},{value:"Pacific/Auckland",label:"Auckland",city:"Auckland",country:"New Zealand"},{value:"Pacific/Bougainville",label:"Bougainville",city:"Bougainville",country:"Papua New Guinea"},{value:"Pacific/Chatham",label:"Chatham",city:"Chatham Islands",country:"New Zealand"},{value:"Pacific/Chuuk",label:"Chuuk",city:"Chuuk",country:"Micronesia"},{value:"Pacific/Easter",label:"Easter Island",city:"Easter Island",country:"Chile"},{value:"Pacific/Efate",label:"Efate",city:"Port Vila",country:"Vanuatu"},{value:"Pacific/Enderbury",label:"Enderbury",city:"Enderbury Island",country:"Kiribati"},{value:"Pacific/Fakaofo",label:"Fakaofo",city:"Fakaofo",country:"Tokelau"},{value:"Pacific/Fiji",label:"Fiji",city:"Suva",country:"Fiji"},{value:"Pacific/Funafuti",label:"Funafuti",city:"Funafuti",country:"Tuvalu"},{value:"Pacific/Galapagos",label:"Galapagos",city:"Galapagos Islands",country:"Ecuador"},{value:"Pacific/Gambier",label:"Gambier",city:"Gambier Islands",country:"French Polynesia"},{value:"Pacific/Guadalcanal",label:"Guadalcanal",city:"Honiara",country:"Solomon Islands"},{value:"Pacific/Guam",label:"Guam",city:"Hagatna",country:"Guam"},{value:"Pacific/Honolulu",label:"Honolulu",city:"Honolulu",country:"United States"},{value:"Pacific/Kiritimati",label:"Kiritimati",city:"Kiritimati",country:"Kiribati"},{value:"Pacific/Kosrae",label:"Kosrae",city:"Kosrae",country:"Micronesia"},{value:"Pacific/Kwajalein",label:"Kwajalein",city:"Kwajalein",country:"Marshall Islands"},{value:"Pacific/Majuro",label:"Majuro",city:"Majuro",country:"Marshall Islands"},{value:"Pacific/Marquesas",label:"Marquesas",city:"Marquesas Islands",country:"French Polynesia"},{value:"Pacific/Midway",label:"Midway",city:"Midway Atoll",country:"United States"},{value:"Pacific/Nauru",label:"Nauru",city:"Yaren",country:"Nauru"},{value:"Pacific/Niue",label:"Niue",city:"Alofi",country:"Niue"},{value:"Pacific/Norfolk",label:"Norfolk",city:"Norfolk Island",country:"Australia"},{value:"Pacific/Noumea",label:"Noumea",city:"Noumea",country:"New Caledonia"},{value:"Pacific/Pago_Pago",label:"Pago Pago",city:"Pago Pago",country:"American Samoa"},{value:"Pacific/Palau",label:"Palau",city:"Ngerulmud",country:"Palau"},{value:"Pacific/Pitcairn",label:"Pitcairn",city:"Adamstown",country:"Pitcairn Islands"},{value:"Pacific/Pohnpei",label:"Pohnpei",city:"Pohnpei",country:"Micronesia"},{value:"Pacific/Port_Moresby",label:"Port Moresby",city:"Port Moresby",country:"Papua New Guinea"},{value:"Pacific/Rarotonga",label:"Rarotonga",city:"Avarua",country:"Cook Islands"},{value:"Pacific/Saipan",label:"Saipan",city:"Saipan",country:"Northern Mariana Islands"},{value:"Pacific/Tahiti",label:"Tahiti",city:"Papeete",country:"French Polynesia"},{value:"Pacific/Tarawa",label:"Tarawa",city:"South Tarawa",country:"Kiribati"},{value:"Pacific/Tongatapu",label:"Tongatapu",city:"Nukualofa",country:"Tonga"},{value:"Pacific/Wake",label:"Wake",city:"Wake Island",country:"United States"},{value:"Pacific/Wallis",label:"Wallis",city:"Mata-Utu",country:"Wallis and Futuna"}],l6=e=>{var t;try{const n=new Date,a=new Intl.DateTimeFormat("en",{timeZone:e,timeZoneName:"longOffset"}),r=null==(t=a.formatToParts(n).find((e=>"timeZoneName"===e.type)))?void 0:t.value;if(r&&r.startsWith("GMT"))return r.replace("GMT","UTC");const s=new Date(n.toISOString()),i=new Date(n.toLocaleString("sv-SE",{timeZone:e})).getTime()-s.getTime(),o=Math.round(i/6e4),l=Math.floor(Math.abs(o)/60),c=Math.abs(o)%60;return`UTC${o>=0?"+":"-"}${l.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`}catch{return"UTC+00:00"}};function c6({value:e,onValueChange:t,placeholder:n="Select timezone...",className:a,disabled:r=!1}){const[s,i]=cs.useState(!1),[o,l]=cs.useState(""),c=cs.useMemo((()=>o6.find((t=>t.value===e))),[e]),d=cs.useMemo((()=>(e=>{if(!e.trim())return o6;const t=e.toLowerCase().trim();return o6.filter((e=>e.label.toLowerCase().includes(t)||e.city.toLowerCase().includes(t)||e.country.toLowerCase().includes(t)||e.value.toLowerCase().includes(t)))})(o)),[o]),u=cs.useMemo((()=>{const e={};d.forEach((t=>{if("UTC"===t.value)e.UTC||(e.UTC=[]),e.UTC.push(t);else{const n=t.value.split("/")[0];e[n]||(e[n]=[]),e[n].push(t)}}));const t={},n=["UTC","Africa","America","Asia","Europe","Australia","Pacific"];return n.forEach((n=>{e[n]&&(t[n]=e[n].sort(((e,t)=>e.label.localeCompare(t.label))))})),Object.keys(e).forEach((a=>{n.includes(a)||(t[a]=e[a].sort(((e,t)=>e.label.localeCompare(t.label))))})),t}),[d]);return vs.jsxs(r6,{open:s,onOpenChange:i,children:[vs.jsx(s6,{asChild:!0,children:vs.jsxs(lk,{variant:"outline",role:"combobox","aria-expanded":s,className:fN("justify-between text-xs h-7",a),disabled:r,children:[c?vs.jsxs("div",{className:"flex items-center justify-between w-full",children:[vs.jsx("span",{className:"truncate",children:c.label}),vs.jsx("span",{className:"text-muted-foreground ml-2 text-[10px]",children:l6(c.value)})]}):vs.jsx("span",{className:"text-muted-foreground",children:n}),vs.jsx(Eb,{className:"ml-2 h-3 w-3 shrink-0 opacity-50"})]})}),vs.jsxs(i6,{className:"w-80 p-0",align:"start",children:[vs.jsxs("div",{className:"flex items-center border-b px-3 py-2",children:[vs.jsx(Ow,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),vs.jsx("input",{placeholder:"Search timezones...",value:o,onChange:e=>l(e.target.value),className:"flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground"}),o&&vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>{l("")},children:vs.jsx(yj,{className:"h-3 w-3"})})]}),vs.jsx(CY,{className:"h-60",children:vs.jsx("div",{className:"p-1",children:0===Object.keys(u).length?vs.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No timezones found."}):Object.entries(u).map((([n,a])=>vs.jsxs("div",{className:"mb-2",children:[vs.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground",children:n}),a.map((n=>vs.jsxs("div",{className:fN("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-xs outline-none hover:bg-accent hover:text-accent-foreground",e===n.value&&"bg-accent text-accent-foreground"),onClick:()=>(e=>{t(e.value),i(!1),l("")})(n),children:[vs.jsx(kb,{className:fN("mr-2 h-3 w-3",e===n.value?"opacity-100":"opacity-0")}),vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsx("div",{className:"font-medium truncate",children:n.label}),vs.jsx("div",{className:"text-[10px] text-muted-foreground truncate",children:n.country})]}),vs.jsx("div",{className:"ml-2 text-[10px] text-muted-foreground",children:l6(n.value)})]}),vs.jsx("div",{className:"text-[9px] text-muted-foreground/70 truncate",children:n.value})]})]},n.value)))]},n)))})})]})]})}const d6=[{id:"execute_workflow",name:"n8n",description:"Execute n8n chat AI workflow",tooltip:"Execute an n8n workflow with AI chat capabilities. Perfect for AI agents, chatbots, and conversational workflows.",icon:"🤖",color:"text-green-600"}];var u6="Collapsible",[f6,m6]=Vy(u6),[p6,h6]=f6(u6),g6=cs.forwardRef(((e,t)=>{const{__scopeCollapsible:n,open:a,defaultOpen:r,disabled:s,onOpenChange:i,...o}=e,[l,c]=yv({prop:a,defaultProp:r??!1,onChange:i,caller:u6});return vs.jsx(p6,{scope:n,disabled:s,contentId:SN(),open:l,onOpenToggle:cs.useCallback((()=>c((e=>!e))),[c]),children:vs.jsx(Xy.div,{"data-state":j6(l),"data-disabled":s?"":void 0,...o,ref:t})})}));g6.displayName=u6;var x6="CollapsibleTrigger",y6=cs.forwardRef(((e,t)=>{const{__scopeCollapsible:n,...a}=e,r=h6(x6,n);return vs.jsx(Xy.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":j6(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...a,ref:t,onClick:By(e.onClick,r.onOpenToggle)})}));y6.displayName=x6;var v6="CollapsibleContent",b6=cs.forwardRef(((e,t)=>{const{forceMount:n,...a}=e,r=h6(v6,e.__scopeCollapsible);return vs.jsx(hv,{present:n||r.open,children:({present:e})=>vs.jsx(w6,{...a,ref:t,present:e})})}));b6.displayName=v6;var w6=cs.forwardRef(((e,t)=>{const{__scopeCollapsible:n,present:a,children:r,...s}=e,i=h6(v6,n),[o,l]=cs.useState(a),c=cs.useRef(null),d=Gy(t,c),u=cs.useRef(0),f=u.current,m=cs.useRef(0),p=m.current,h=i.open||o,g=cs.useRef(h),x=cs.useRef(void 0);return cs.useEffect((()=>{const e=requestAnimationFrame((()=>g.current=!1));return()=>cancelAnimationFrame(e)}),[]),mv((()=>{const e=c.current;if(e){x.current=x.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";const t=e.getBoundingClientRect();u.current=t.height,m.current=t.width,g.current||(e.style.transitionDuration=x.current.transitionDuration,e.style.animationName=x.current.animationName),l(a)}}),[i.open,a]),vs.jsx(Xy.div,{"data-state":j6(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!h,...s,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:h&&r})}));function j6(e){return e?"open":"closed"}var N6=g6,C6=y6,S6=b6;const k6=N6,M6=y6,_6=b6;class I6{constructor(){this.authWindow=null,this.authPromise=null}static getInstance(){return I6.instance||(I6.instance=new I6),I6.instance}async checkConnectionStatus(){try{const e=await _y("GET","/api/google/sheets/status");return await e.json()}catch(e){return{connected:!1,message:"Error checking connection status"}}}async getAuthUrl(){try{const e=await _y("GET","/api/google/sheets/auth");return(await e.json()).authUrl}catch(e){return null}}async authenticate(){if(this.authPromise)return this.authPromise;this.authPromise=this._performAuthentication();try{return await this.authPromise}finally{this.authPromise=null}}async _performAuthentication(){try{const e=await this.getAuthUrl();if(!e)throw new Error("Failed to get authentication URL. Please ensure Google Sheets integration is configured by the platform administrator.");if(this.authWindow=window.open(e,"google_sheets_auth","width=500,height=600,scrollbars=yes,resizable=yes"),!this.authWindow)throw new Error("Failed to open authentication window. Please allow popups for this site.");return new Promise(((e,t)=>{const n=setInterval((()=>{var a;(null==(a=this.authWindow)?void 0:a.closed)&&(clearInterval(n),setTimeout((async()=>{try{const t=await this.checkConnectionStatus();e(t.connected)}catch(n){t(n)}}),1e3))}),1e3);setTimeout((()=>{clearInterval(n),this.authWindow&&!this.authWindow.closed&&this.authWindow.close(),t(new Error("Authentication timeout"))}),3e5)}))}catch(e){throw e}}async disconnect(){try{const e=await _y("DELETE","/api/google/sheets");return(await e.json()).success}catch(e){return!1}}isAuthenticating(){return null!==this.authPromise}cancelAuthentication(){this.authWindow&&!this.authWindow.closed&&this.authWindow.close(),this.authPromise=null}}const A6=I6.getInstance();function E6({onAuthSuccess:e,className:t}){const{isConnected:n,isLoadingStatus:a,isAuthenticating:r,authenticate:s}=function(){const{toast:e}=Fy(),t=vy(),[n,a]=cs.useState(!1),{data:r,isLoading:s,refetch:i,error:o}=Sy({queryKey:["google-sheets-status"],queryFn:()=>A6.checkConnectionStatus(),refetchOnWindowFocus:!1,retry:2}),l=cs.useCallback((async()=>{if(n)return!1;a(!0);try{return await A6.authenticate()?(e({title:"Connected Successfully",description:"Your Google Sheets has been connected successfully."}),t.invalidateQueries({queryKey:["google-sheets-status"]}),await i(),!0):(e({title:"Authentication Failed",description:"Failed to connect your Google Sheets. Please try again.",variant:"destructive"}),!1)}catch(r){return e({title:"Authentication Error",description:r.message||"An error occurred during authentication.",variant:"destructive"}),!1}finally{a(!1)}}),[n,e,t,i]),c=cs.useCallback((async()=>{try{return await A6.disconnect()?(e({title:"Disconnected Successfully",description:"Your Google Sheets has been disconnected."}),t.invalidateQueries({queryKey:["google-sheets-status"]}),await i(),!0):(e({title:"Disconnect Failed",description:"Failed to disconnect your Google Sheets.",variant:"destructive"}),!1)}catch(n){return e({title:"Disconnect Error",description:n.message||"An error occurred while disconnecting.",variant:"destructive"}),!1}}),[e,t,i]),d=cs.useCallback((()=>{A6.cancelAuthentication(),a(!1)}),[]);return{isConnected:(null==r?void 0:r.connected)??!1,connectionMessage:(null==r?void 0:r.message)??"",isLoadingStatus:s,statusError:o,isAuthenticating:n||A6.isAuthenticating(),authenticate:l,disconnect:c,cancelAuthentication:d,refetchStatus:i,status:r}}();return a?vs.jsx("div",{className:t,children:vs.jsxs(pR,{children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin"}),vs.jsx(hR,{children:"Checking Connection"}),vs.jsx(gR,{children:"Verifying your Google Sheets connection status..."})]})}):n?vs.jsx("div",{className:t,children:vs.jsxs(pR,{className:"bg-green-50 border-green-200",children:[vs.jsx(Pb,{className:"h-4 w-4 text-green-500"}),vs.jsx(hR,{className:"text-green-700",children:"Connected"}),vs.jsx(gR,{className:"text-green-600",children:"Your Google Sheets is connected and ready to use."})]})}):vs.jsx("div",{className:t,children:vs.jsxs(pR,{className:"bg-amber-50 border-amber-200",children:[vs.jsx(Lb,{className:"h-4 w-4 text-amber-500"}),vs.jsx(hR,{className:"text-amber-700",children:"Authentication Required"}),vs.jsxs(gR,{className:"text-amber-600 space-y-3",children:[vs.jsx("p",{children:"Connect your Google Sheets account to use this node."}),vs.jsx(lk,{onClick:async()=>{await s()&&(null==e||e())},disabled:r,className:"bg-green-500 hover:bg-green-600 text-white",size:"sm",children:r?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-3 w-3 animate-spin"}),"Connecting..."]}):vs.jsxs(vs.Fragment,{children:[vs.jsx($b,{className:"mr-2 h-3 w-3"}),"Connect Google Sheets"]})})]})]})})}const L6=[{id:"append_row",name:"Append Row",description:"Add new data row to sheet",tooltip:"Add a new row of data to the end of your Google Sheet. Perfect for lead capture, form submissions, and data collection from WhatsApp conversations.",icon:"➕",color:"text-green-600"},{id:"read_rows",name:"Read Rows",description:"Fetch data with optional filters",tooltip:"Read data from your Google Sheet with optional filtering and row range selection. Use this to lookup existing data or retrieve information.",icon:"📖",color:"text-blue-600"},{id:"update_row",name:"Update Row",description:"Modify existing row data",tooltip:"Update existing rows in your Google Sheet by row number or by matching column values. Great for updating order status, user information, or any existing records.",icon:"✏️",color:"text-orange-600"},{id:"get_sheet_info",name:"Get Sheet Info",description:"Retrieve sheet metadata and headers",tooltip:"Get information about your Google Sheet including column headers, sheet names, and metadata. Useful for dynamic configuration and validation.",icon:"ℹ️",color:"text-purple-600"}],T6=[{id:"lead_capture",name:"Lead Capture Form",operation:"append_row",config:{columnMappings:{Name:"{{contact.name}}",Phone:"{{contact.phone}}",Message:"{{message.content}}",Timestamp:"{{current.timestamp}}"}}},{id:"order_tracking",name:"Order Status Update",operation:"update_row",config:{matchColumn:"Order ID",matchValue:"{{order.id}}",columnMappings:{Status:"{{order.status}}",Updated:"{{current.timestamp}}"}}},{id:"user_lookup",name:"User Information Lookup",operation:"read_rows",config:{filterColumn:"Phone",filterValue:"{{contact.phone}}",maxRows:1}}],D6={append_row:[{key:"columnMappings",label:"Column Mappings",type:"object",description:"Map sheet columns to flow variables",required:!0,tooltip:"Define which data goes into which columns. Use variables like {{contact.name}} or {{message.content}} to include dynamic data from the conversation.",placeholder:'{"Name": "{{contact.name}}", "Phone": "{{contact.phone}}", "Message": "{{message.content}}"}'},{key:"duplicateCheck",label:"Duplicate Prevention",type:"object",description:"Configure duplicate checking before inserting rows",required:!1,tooltip:"Enable duplicate checking to prevent adding duplicate entries. Useful for lead capture to avoid duplicate contacts based on phone number or email.",placeholder:'{"enabled": true, "columns": ["Phone"], "onDuplicate": "skip"}'}],read_rows:[{key:"filterColumn",label:"Filter Column",type:"text",description:"Column name to filter by",required:!1,tooltip:"Specify a column name to filter results. Leave empty to read all rows within the specified range.",placeholder:"Phone"},{key:"filterValue",label:"Filter Value",type:"text",description:"Value to match in filter column",required:!1,tooltip:"The value to search for in the filter column. Use variables like {{contact.phone}} for dynamic filtering.",placeholder:"{{contact.phone}}"},{key:"startRow",label:"Start Row",type:"number",description:"Starting row number (1-based)",required:!1,default:2,tooltip:"The row number to start reading from. Row 1 is typically headers, so start from row 2 for data.",placeholder:"2"},{key:"maxRows",label:"Max Rows",type:"number",description:"Maximum number of rows to read",required:!1,default:100,tooltip:"Limit the number of rows returned to avoid performance issues with large sheets.",placeholder:"100"}],update_row:[{key:"matchColumn",label:"Match Column",type:"text",description:"Column to match for row identification",required:!0,tooltip:'The column name used to identify which row to update. For example, "Order ID" or "Phone Number".',placeholder:"Order ID"},{key:"matchValue",label:"Match Value",type:"text",description:"Value to match in the match column",required:!0,tooltip:"The value to search for in the match column. Use variables like {{order.id}} for dynamic matching.",placeholder:"{{order.id}}"},{key:"columnMappings",label:"Column Updates",type:"object",description:"Columns to update with new values",required:!0,tooltip:"Define which columns to update with what values. Only specified columns will be modified.",placeholder:'{"Status": "{{order.status}}", "Updated": "{{current.timestamp}}"}'}],get_sheet_info:[]},P6=({value:e,onChange:t})=>{var n;const[a,r]=cs.useState(!1),[s,i]=cs.useState((null==(n=e.columns)?void 0:n.join(", "))||""),o=n=>{t({...e,...n})};return vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(L4,{checked:e.enabled||!1,onCheckedChange:e=>o({enabled:e})}),vs.jsx(EB,{className:"text-[10px] font-medium",children:"Enable Duplicate Prevention"})]}),e.enabled&&vs.jsxs(k6,{open:a,onOpenChange:r,children:[vs.jsx(M6,{asChild:!0,children:vs.jsxs(lk,{variant:"ghost",size:"sm",className:"h-6 p-1 text-[10px] w-full justify-between",children:[vs.jsx("span",{children:"Advanced Settings"}),a?vs.jsx(Mb,{className:"h-3 w-3"}):vs.jsx(Ib,{className:"h-3 w-3"})]})}),vs.jsxs(_6,{className:"space-y-2 mt-2",children:[vs.jsxs("div",{children:[vs.jsxs(EB,{className:"text-[10px] font-medium mb-1 block",children:["Check Columns",vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-2.5 w-2.5 text-muted-foreground cursor-help ml-1 inline"})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs max-w-48",children:'Comma-separated list of column names to check for duplicates (e.g., "Phone, Email")'})})]})})]}),vs.jsx(LB,{value:s,onChange:e=>(e=>{i(e);const t=e.split(",").map((e=>e.trim())).filter((e=>e.length>0));o({columns:t})})(e.target.value),placeholder:"Phone, Email",className:"text-[10px] h-6"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium mb-1 block",children:"When Duplicate Found"}),vs.jsxs(ZU,{value:e.onDuplicate||"skip",onValueChange:e=>o({onDuplicate:e}),children:[vs.jsx(tW,{className:"text-[10px] h-6",children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"skip",children:"Skip insertion"}),vs.jsx(sW,{value:"update",children:"Update existing row"}),vs.jsx(sW,{value:"add_anyway",children:"Add anyway (with warning)"})]})]})]}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(L4,{checked:!1!==e.caseSensitive,onCheckedChange:e=>o({caseSensitive:e})}),vs.jsxs(EB,{className:"text-[10px] font-medium",children:["Case Sensitive",vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-2.5 w-2.5 text-muted-foreground cursor-help ml-1 inline"})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs max-w-48",children:"Whether to match case exactly (John vs john)"})})]})})]})]})]})]})]})};var O6=function(){return O6=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},O6.apply(this,arguments)};function R6(e,t,n){for(var a,r=0,s=t.length;r<s;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function z6(e){return"multiple"===e.mode}function F6(e){return"range"===e.mode}function B6(e){return"single"===e.mode}"function"==typeof SuppressedError&&SuppressedError;var U6={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};var W6=Object.freeze({__proto__:null,formatCaption:function(e,t){return Dz(e,"LLLL y",t)},formatDay:function(e,t){return Dz(e,"d",t)},formatMonthCaption:function(e,t){return Dz(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return Dz(e,"cccccc",t)},formatYearCaption:function(e,t){return Dz(e,"yyyy",t)}}),G6=Object.freeze({__proto__:null,labelDay:function(e,t,n){return Dz(e,"do MMMM (EEEE)",n)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return Dz(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}});var V6=cs.createContext(void 0);function H6(e){var t,n,a=e.initialProps,r={captionLayout:"buttons",classNames:U6,formatters:W6,labels:G6,locale:oz,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"},s=function(e){var t=e.fromYear,n=e.toYear,a=e.fromMonth,r=e.toMonth,s=e.fromDate,i=e.toDate;return a?s=YR(a):t&&(s=new Date(t,0,1)),r?i=VR(r):n&&(i=new Date(n,11,31)),{fromDate:s?DR(s):void 0,toDate:i?DR(i):void 0}}(a),i=s.fromDate,o=s.toDate,l=null!==(t=a.captionLayout)&&void 0!==t?t:r.captionLayout;"buttons"===l||i&&o||(l="buttons"),(B6(a)||z6(a)||F6(a))&&(n=a.onSelect);var c=O6(O6(O6({},r),a),{captionLayout:l,classNames:O6(O6({},r.classNames),a.classNames),components:O6({},a.components),formatters:O6(O6({},r.formatters),a.formatters),fromDate:i,labels:O6(O6({},r.labels),a.labels),mode:a.mode||r.mode,modifiers:O6(O6({},r.modifiers),a.modifiers),modifiersClassNames:O6(O6({},r.modifiersClassNames),a.modifiersClassNames),onSelect:n,styles:O6(O6({},r.styles),a.styles),toDate:o});return vs.jsx(V6.Provider,{value:c,children:e.children})}function q6(){var e=cs.useContext(V6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function $6(e){var t=q6(),n=t.locale,a=t.classNames,r=t.styles,s=t.formatters.formatCaption;return vs.jsx("div",{className:a.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function Y6(e){return vs.jsx("svg",O6({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:vs.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Q6(e){var t,n,a=e.onChange,r=e.value,s=e.children,i=e.caption,o=e.className,l=e.style,c=q6(),d=null!==(n=null===(t=c.components)||void 0===t?void 0:t.IconDropdown)&&void 0!==n?n:Y6;return vs.jsxs("div",{className:o,style:l,children:[vs.jsx("span",{className:c.classNames.vhidden,children:e["aria-label"]}),vs.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:r,onChange:a,children:s}),vs.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[i,vs.jsx(d,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function K6(e){var t,n=q6(),a=n.fromDate,r=n.toDate,s=n.styles,i=n.locale,o=n.formatters.formatMonthCaption,l=n.classNames,c=n.components,d=n.labels.labelMonthDropdown;if(!a)return vs.jsx(vs.Fragment,{});if(!r)return vs.jsx(vs.Fragment,{});var u=[];if(function(e,t){const n=bR(e),a=bR(t);return n.getFullYear()===a.getFullYear()}(a,r))for(var f=YR(a),m=a.getMonth();m<=r.getMonth();m++)u.push(eF(f,m));else for(f=YR(new Date),m=0;m<=11;m++)u.push(eF(f,m));var p=null!==(t=null==c?void 0:c.Dropdown)&&void 0!==t?t:Q6;return vs.jsx(p,{name:"months","aria-label":d(),className:l.dropdown_month,style:s.dropdown_month,onChange:function(t){var n=Number(t.target.value),a=eF(YR(e.displayMonth),n);e.onChange(a)},value:e.displayMonth.getMonth(),caption:o(e.displayMonth,{locale:i}),children:u.map((function(e){return vs.jsx("option",{value:e.getMonth(),children:o(e,{locale:i})},e.getMonth())}))})}function J6(e){var t,n=e.displayMonth,a=q6(),r=a.fromDate,s=a.toDate,i=a.locale,o=a.styles,l=a.classNames,c=a.components,d=a.formatters.formatYearCaption,u=a.labels.labelYearDropdown,f=[];if(!r)return vs.jsx(vs.Fragment,{});if(!s)return vs.jsx(vs.Fragment,{});for(var m=r.getFullYear(),p=s.getFullYear(),h=m;h<=p;h++)f.push(tF(QR(new Date),h));var g=null!==(t=null==c?void 0:c.Dropdown)&&void 0!==t?t:Q6;return vs.jsx(g,{name:"years","aria-label":u(),className:l.dropdown_year,style:o.dropdown_year,onChange:function(t){var a=tF(YR(n),Number(t.target.value));e.onChange(a)},value:n.getFullYear(),caption:d(n,{locale:i}),children:f.map((function(e){return vs.jsx("option",{value:e.getFullYear(),children:d(e,{locale:i})},e.getFullYear())}))})}function Z6(){var e=q6(),t=function(e){var t=e.month,n=e.defaultMonth,a=e.today,r=t||n||a||new Date,s=e.toDate,i=e.fromDate,o=e.numberOfMonths,l=void 0===o?1:o;return s&&GR(s,r)<0&&(r=NR(s,-1*(l-1))),i&&GR(r,i)<0&&(r=i),YR(r)}(e),n=function(e,t){var n=cs.useState(e),a=n[0];return[void 0===t?a:t,n[1]]}(t,e.month),a=n[0],r=n[1];return[a,function(t){var n;if(!e.disableNavigation){var a=YR(t);r(a),null===(n=e.onMonthChange)||void 0===n||n.call(e,a)}}]}var X6=cs.createContext(void 0);function e5(e){var t=q6(),n=Z6(),a=n[0],r=n[1],s=function(e,t){for(var n=t.reverseMonths,a=t.numberOfMonths,r=YR(e),s=GR(YR(NR(r,a)),r),i=[],o=0;o<s;o++){var l=NR(r,o);i.push(l)}return n&&(i=i.reverse()),i}(a,t),i=function(e,t){if(!t.disableNavigation){var n=t.toDate,a=t.pagedNavigation,r=t.numberOfMonths,s=void 0===r?1:r,i=a?s:1,o=YR(e);if(!n)return NR(o,i);if(!(GR(n,e)<s))return NR(o,i)}}(a,t),o=function(e,t){if(!t.disableNavigation){var n=t.fromDate,a=t.pagedNavigation,r=t.numberOfMonths,s=a?void 0===r?1:r:1,i=YR(e);if(!n)return NR(i,-s);if(!(GR(i,n)<=0))return NR(i,-s)}}(a,t),l=function(e){return s.some((function(t){return Wz(e,t)}))},c={currentMonth:a,displayMonths:s,goToMonth:r,goToDate:function(e,n){l(e)||(n&&Uz(e,n)?r(NR(e,1+-1*t.numberOfMonths)):r(e))},previousMonth:o,nextMonth:i,isDateDisplayed:l};return vs.jsx(X6.Provider,{value:c,children:e.children})}function t5(){var e=cs.useContext(X6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function n5(e){var t,n=q6(),a=n.classNames,r=n.styles,s=n.components,i=t5().goToMonth,o=function(t){i(NR(t,e.displayIndex?-e.displayIndex:0))},l=null!==(t=null==s?void 0:s.CaptionLabel)&&void 0!==t?t:$6,c=vs.jsx(l,{id:e.id,displayMonth:e.displayMonth});return vs.jsxs("div",{className:a.caption_dropdowns,style:r.caption_dropdowns,children:[vs.jsx("div",{className:a.vhidden,children:c}),vs.jsx(K6,{onChange:o,displayMonth:e.displayMonth}),vs.jsx(J6,{onChange:o,displayMonth:e.displayMonth})]})}function a5(e){return vs.jsx("svg",O6({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:vs.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function r5(e){return vs.jsx("svg",O6({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:vs.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var s5=cs.forwardRef((function(e,t){var n=q6(),a=n.classNames,r=n.styles,s=[a.button_reset,a.button];e.className&&s.push(e.className);var i=s.join(" "),o=O6(O6({},r.button_reset),r.button);return e.style&&Object.assign(o,e.style),vs.jsx("button",O6({},e,{ref:t,type:"button",className:i,style:o}))}));function i5(e){var t,n,a=q6(),r=a.dir,s=a.locale,i=a.classNames,o=a.styles,l=a.labels,c=l.labelPrevious,d=l.labelNext,u=a.components;if(!e.nextMonth&&!e.previousMonth)return vs.jsx(vs.Fragment,{});var f=c(e.previousMonth,{locale:s}),m=[i.nav_button,i.nav_button_previous].join(" "),p=d(e.nextMonth,{locale:s}),h=[i.nav_button,i.nav_button_next].join(" "),g=null!==(t=null==u?void 0:u.IconRight)&&void 0!==t?t:r5,x=null!==(n=null==u?void 0:u.IconLeft)&&void 0!==n?n:a5;return vs.jsxs("div",{className:i.nav,style:o.nav,children:[!e.hidePrevious&&vs.jsx(s5,{name:"previous-month","aria-label":f,className:m,style:o.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:"rtl"===r?vs.jsx(g,{className:i.nav_icon,style:o.nav_icon}):vs.jsx(x,{className:i.nav_icon,style:o.nav_icon})}),!e.hideNext&&vs.jsx(s5,{name:"next-month","aria-label":p,className:h,style:o.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:"rtl"===r?vs.jsx(x,{className:i.nav_icon,style:o.nav_icon}):vs.jsx(g,{className:i.nav_icon,style:o.nav_icon})})]})}function o5(e){var t=q6().numberOfMonths,n=t5(),a=n.previousMonth,r=n.nextMonth,s=n.goToMonth,i=n.displayMonths,o=i.findIndex((function(t){return Wz(e.displayMonth,t)})),l=0===o,c=o===i.length-1,d=t>1&&(l||!c),u=t>1&&(c||!l);return vs.jsx(i5,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:u,nextMonth:r,previousMonth:a,onPreviousClick:function(){a&&s(a)},onNextClick:function(){r&&s(r)}})}function l5(e){var t,n,a=q6(),r=a.classNames,s=a.disableNavigation,i=a.styles,o=a.captionLayout,l=a.components,c=null!==(t=null==l?void 0:l.CaptionLabel)&&void 0!==t?t:$6;return n=s?vs.jsx(c,{id:e.id,displayMonth:e.displayMonth}):"dropdown"===o?vs.jsx(n5,{displayMonth:e.displayMonth,id:e.id}):"dropdown-buttons"===o?vs.jsxs(vs.Fragment,{children:[vs.jsx(n5,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),vs.jsx(o5,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),vs.jsx(o5,{displayMonth:e.displayMonth,id:e.id})]}),vs.jsx("div",{className:r.caption,style:i.caption,children:n})}function c5(e){var t=q6(),n=t.footer,a=t.styles,r=t.classNames.tfoot;return n?vs.jsx("tfoot",{className:r,style:a.tfoot,children:vs.jsx("tr",{children:vs.jsx("td",{colSpan:8,children:n})})}):vs.jsx(vs.Fragment,{})}function d5(){var e=q6(),t=e.classNames,n=e.styles,a=e.showWeekNumber,r=e.locale,s=e.weekStartsOn,i=e.ISOWeek,o=e.formatters.formatWeekdayName,l=e.labels.labelWeekday,c=function(e,t,n){for(var a=n?LR(new Date):ER(new Date,{locale:e,weekStartsOn:t}),r=[],s=0;s<7;s++){var i=jR(a,s);r.push(i)}return r}(r,s,i);return vs.jsxs("tr",{style:n.head_row,className:t.head_row,children:[a&&vs.jsx("td",{style:n.head_cell,className:t.head_cell}),c.map((function(e,a){return vs.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":l(e,{locale:r}),children:o(e,{locale:r})},a)}))]})}function u5(){var e,t=q6(),n=t.classNames,a=t.styles,r=t.components,s=null!==(e=null==r?void 0:r.HeadRow)&&void 0!==e?e:d5;return vs.jsx("thead",{style:a.head,className:n.head,children:vs.jsx(s,{})})}function f5(e){var t=q6(),n=t.locale,a=t.formatters.formatDay;return vs.jsx(vs.Fragment,{children:a(e.date,{locale:n})})}var m5=cs.createContext(void 0);function p5(e){if(!z6(e.initialProps)){return vs.jsx(m5.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:e.children})}return vs.jsx(h5,{initialProps:e.initialProps,children:e.children})}function h5(e){var t=e.initialProps,n=e.children,a=t.selected,r=t.min,s=t.max,i={disabled:[]};a&&i.disabled.push((function(e){var t=s&&a.length>s-1,n=a.some((function(t){return UR(t,e)}));return Boolean(t&&!n)}));var o={selected:a,onDayClick:function(e,n,i){var o,l;if((null===(o=t.onDayClick)||void 0===o||o.call(t,e,n,i),!Boolean(n.selected&&r&&(null==a?void 0:a.length)===r))&&!Boolean(!n.selected&&s&&(null==a?void 0:a.length)===s)){var c=a?R6([],a):[];if(n.selected){var d=c.findIndex((function(t){return UR(e,t)}));c.splice(d,1)}else c.push(e);null===(l=t.onSelect)||void 0===l||l.call(t,c,e,n,i)}},modifiers:i};return vs.jsx(m5.Provider,{value:o,children:n})}function g5(){var e=cs.useContext(m5);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var x5,y5,v5=cs.createContext(void 0);function b5(e){if(!F6(e.initialProps)){return vs.jsx(v5.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:e.children})}return vs.jsx(w5,{initialProps:e.initialProps,children:e.children})}function w5(e){var t=e.initialProps,n=e.children,a=t.selected,r=a||{},s=r.from,i=r.to,o=t.min,l=t.max,c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(c.range_start=[s],i?(c.range_end=[i],UR(s,i)||(c.range_middle=[{after:s,before:i}])):c.range_end=[s]):i&&(c.range_start=[i],c.range_end=[i]),o&&(s&&!i&&c.disabled.push({after:Vz(s,o-1),before:jR(s,o-1)}),s&&i&&c.disabled.push({after:s,before:jR(s,o-1)}),!s&&i&&c.disabled.push({after:Vz(i,o-1),before:jR(i,o-1)})),l){if(s&&!i&&(c.disabled.push({before:jR(s,1-l)}),c.disabled.push({after:jR(s,l-1)})),s&&i){var d=l-(OR(i,s)+1);c.disabled.push({before:Vz(s,d)}),c.disabled.push({after:jR(i,d)})}!s&&i&&(c.disabled.push({before:jR(i,1-l)}),c.disabled.push({after:jR(i,l-1)}))}return vs.jsx(v5.Provider,{value:{selected:a,onDayClick:function(e,n,r){var s,i;null===(s=t.onDayClick)||void 0===s||s.call(t,e,n,r);var o=function(e,t){var n=t||{},a=n.from,r=n.to;if(a&&r){if(UR(r,e)&&UR(a,e))return;if(UR(r,e))return{from:r,to:void 0};if(UR(a,e))return;return Bz(a,e)?{from:e,to:r}:{from:a,to:e}}return r?Bz(e,r)?{from:r,to:e}:{from:e,to:r}:a?Uz(e,a)?{from:e,to:a}:{from:a,to:e}:{from:e,to:void 0}}(e,a);null===(i=t.onSelect)||void 0===i||i.call(t,o,e,n,r)},modifiers:c},children:n})}function j5(){var e=cs.useContext(v5);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function N5(e){return Array.isArray(e)?R6([],e):void 0!==e?[e]:[]}(y5=x5||(x5={})).Outside="outside",y5.Disabled="disabled",y5.Selected="selected",y5.Hidden="hidden",y5.Today="today",y5.RangeStart="range_start",y5.RangeEnd="range_end",y5.RangeMiddle="range_middle";var C5=x5.Selected,S5=x5.Disabled,k5=x5.Hidden,M5=x5.Today,_5=x5.RangeEnd,I5=x5.RangeMiddle,A5=x5.RangeStart,E5=x5.Outside;var L5=cs.createContext(void 0);function T5(e){var t=q6(),n=function(e,t,n){var a,r=((a={})[C5]=N5(e.selected),a[S5]=N5(e.disabled),a[k5]=N5(e.hidden),a[M5]=[e.today],a[_5]=[],a[I5]=[],a[A5]=[],a[E5]=[],a);return e.fromDate&&r[S5].push({before:e.fromDate}),e.toDate&&r[S5].push({after:e.toDate}),z6(e)?r[S5]=r[S5].concat(t.modifiers[S5]):F6(e)&&(r[S5]=r[S5].concat(n.modifiers[S5]),r[A5]=n.modifiers[A5],r[I5]=n.modifiers[I5],r[_5]=n.modifiers[_5]),r}(t,g5(),j5()),a=function(e){var t={};return Object.entries(e).forEach((function(e){var n=e[0],a=e[1];t[n]=N5(a)})),t}(t.modifiers),r=O6(O6({},n),a);return vs.jsx(L5.Provider,{value:r,children:e.children})}function D5(){var e=cs.useContext(L5);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function P5(e,t){return t.some((function(t){if("boolean"==typeof t)return t;if(WR(t))return UR(e,t);var n,a,r,s,i;if(function(e){return Array.isArray(e)&&e.every(WR)}(t))return t.includes(e);if(function(e){return Boolean(e&&"object"==typeof e&&"from"in e)}(t))return n=e,s=(a=t).from,i=a.to,s&&i?(OR(i,s)<0&&(s=(r=[i,s])[0],i=r[1]),OR(n,s)>=0&&OR(i,n)>=0):i?UR(i,n):!!s&&UR(s,n);if(function(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}(t))return t.dayOfWeek.includes(e.getDay());if(function(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}(t)){var o=OR(t.before,e)>0,l=OR(t.after,e)<0;return Bz(t.before,t.after)?l&&o:o||l}return function(e){return Boolean(e&&"object"==typeof e&&"after"in e)}(t)?OR(e,t.after)>0:function(e){return Boolean(e&&"object"==typeof e&&"before"in e)}(t)?OR(t.before,e)>0:"function"==typeof t&&t(e)}))}function O5(e,t,n){var a=Object.keys(t).reduce((function(n,a){var r=t[a];return P5(e,r)&&n.push(a),n}),[]),r={};return a.forEach((function(e){return r[e]=!0})),n&&!Wz(e,n)&&(r.outside=!0),r}function R5(e,t){var n=t.moveBy,a=t.direction,r=t.context,s=t.modifiers,i=t.retry,o=void 0===i?{count:0,lastFocused:e}:i,l=r.weekStartsOn,c=r.fromDate,d=r.toDate,u=r.locale,f={day:jR,week:RR,month:NR,year:zR,startOfWeek:function(e){return r.ISOWeek?LR(e):ER(e,{locale:u,weekStartsOn:l})},endOfWeek:function(e){return r.ISOWeek?JR(e):KR(e,{locale:u,weekStartsOn:l})}}[n](e,"after"===a?1:-1);"before"===a&&c?f=function(e){let t;return e.forEach((function(e){const n=bR(e);(void 0===t||t<n||isNaN(Number(n)))&&(t=n)})),t||new Date(NaN)}([c,f]):"after"===a&&d&&(f=function(e){let t;return e.forEach((e=>{const n=bR(e);(!t||t>n||isNaN(+n))&&(t=n)})),t||new Date(NaN)}([d,f]));var m=!0;if(s){var p=O5(f,s);m=!p.disabled&&!p.hidden}return m?f:o.count>365?o.lastFocused:R5(f,{moveBy:n,direction:a,context:r,modifiers:s,retry:O6(O6({},o),{count:o.count+1})})}var z5=cs.createContext(void 0);function F5(e){var t=t5(),n=D5(),a=cs.useState(),r=a[0],s=a[1],i=cs.useState(),o=i[0],l=i[1],c=function(e,t){for(var n,a,r=YR(e[0]),s=VR(e[e.length-1]),i=r;i<=s;){var o=O5(i,t);if(o.disabled||o.hidden)i=jR(i,1);else{if(o.selected)return i;o.today&&!a&&(a=i),n||(n=i),i=jR(i,1)}}return a||n}(t.displayMonths,n),d=(null!=r?r:o&&t.isDateDisplayed(o))?o:c,u=function(e){s(e)},f=q6(),m=function(e,a){if(r){var s=R5(r,{moveBy:e,direction:a,context:f,modifiers:n});UR(r,s)||(t.goToDate(s,r),u(s))}},p={focusedDay:r,focusTarget:d,blur:function(){l(r),s(void 0)},focus:u,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return vs.jsx(z5.Provider,{value:p,children:e.children})}function B5(){var e=cs.useContext(z5);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}var U5=cs.createContext(void 0);function W5(e){if(!B6(e.initialProps)){return vs.jsx(U5.Provider,{value:{selected:void 0},children:e.children})}return vs.jsx(G5,{initialProps:e.initialProps,children:e.children})}function G5(e){var t=e.initialProps,n=e.children,a={selected:t.selected,onDayClick:function(e,n,a){var r,s,i;null===(r=t.onDayClick)||void 0===r||r.call(t,e,n,a),!n.selected||t.required?null===(i=t.onSelect)||void 0===i||i.call(t,e,e,n,a):null===(s=t.onSelect)||void 0===s||s.call(t,void 0,e,n,a)}};return vs.jsx(U5.Provider,{value:a,children:n})}function V5(){var e=cs.useContext(U5);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function H5(e,t){var n=[e.classNames.day];return Object.keys(t).forEach((function(t){var a=e.modifiersClassNames[t];if(a)n.push(a);else if(function(e){return Object.values(x5).includes(e)}(t)){var r=e.classNames["day_".concat(t)];r&&n.push(r)}})),n}function q5(e,t,n){var a,r,s,i=q6(),o=B5(),l=function(e,t){return O5(e,D5(),t)}(e,t),c=function(e,t){var n=q6(),a=V5(),r=g5(),s=j5(),i=B5(),o=i.focusDayAfter,l=i.focusDayBefore,c=i.focusWeekAfter,d=i.focusWeekBefore,u=i.blur,f=i.focus,m=i.focusMonthBefore,p=i.focusMonthAfter,h=i.focusYearBefore,g=i.focusYearAfter,x=i.focusStartOfWeek,y=i.focusEndOfWeek;return{onClick:function(i){var o,l,c,d;B6(n)?null===(o=a.onDayClick)||void 0===o||o.call(a,e,t,i):z6(n)?null===(l=r.onDayClick)||void 0===l||l.call(r,e,t,i):F6(n)?null===(c=s.onDayClick)||void 0===c||c.call(s,e,t,i):null===(d=n.onDayClick)||void 0===d||d.call(n,e,t,i)},onFocus:function(a){var r;f(e),null===(r=n.onDayFocus)||void 0===r||r.call(n,e,t,a)},onBlur:function(a){var r;u(),null===(r=n.onDayBlur)||void 0===r||r.call(n,e,t,a)},onKeyDown:function(a){var r;switch(a.key){case"ArrowLeft":a.preventDefault(),a.stopPropagation(),"rtl"===n.dir?o():l();break;case"ArrowRight":a.preventDefault(),a.stopPropagation(),"rtl"===n.dir?l():o();break;case"ArrowDown":a.preventDefault(),a.stopPropagation(),c();break;case"ArrowUp":a.preventDefault(),a.stopPropagation(),d();break;case"PageUp":a.preventDefault(),a.stopPropagation(),a.shiftKey?h():m();break;case"PageDown":a.preventDefault(),a.stopPropagation(),a.shiftKey?g():p();break;case"Home":a.preventDefault(),a.stopPropagation(),x();break;case"End":a.preventDefault(),a.stopPropagation(),y()}null===(r=n.onDayKeyDown)||void 0===r||r.call(n,e,t,a)},onKeyUp:function(a){var r;null===(r=n.onDayKeyUp)||void 0===r||r.call(n,e,t,a)},onMouseEnter:function(a){var r;null===(r=n.onDayMouseEnter)||void 0===r||r.call(n,e,t,a)},onMouseLeave:function(a){var r;null===(r=n.onDayMouseLeave)||void 0===r||r.call(n,e,t,a)},onPointerEnter:function(a){var r;null===(r=n.onDayPointerEnter)||void 0===r||r.call(n,e,t,a)},onPointerLeave:function(a){var r;null===(r=n.onDayPointerLeave)||void 0===r||r.call(n,e,t,a)},onTouchCancel:function(a){var r;null===(r=n.onDayTouchCancel)||void 0===r||r.call(n,e,t,a)},onTouchEnd:function(a){var r;null===(r=n.onDayTouchEnd)||void 0===r||r.call(n,e,t,a)},onTouchMove:function(a){var r;null===(r=n.onDayTouchMove)||void 0===r||r.call(n,e,t,a)},onTouchStart:function(a){var r;null===(r=n.onDayTouchStart)||void 0===r||r.call(n,e,t,a)}}}(e,l),d=function(){var e=q6(),t=V5(),n=g5(),a=j5();return B6(e)?t.selected:z6(e)?n.selected:F6(e)?a.selected:void 0}(),u=Boolean(i.onDayClick||"default"!==i.mode);cs.useEffect((function(){var t;l.outside||o.focusedDay&&u&&UR(o.focusedDay,e)&&(null===(t=n.current)||void 0===t||t.focus())}),[o.focusedDay,e,n,u,l.outside]);var f=H5(i,l).join(" "),m=function(e,t){var n=O6({},e.styles.day);return Object.keys(t).forEach((function(t){var a;n=O6(O6({},n),null===(a=e.modifiersStyles)||void 0===a?void 0:a[t])})),n}(i,l),p=Boolean(l.outside&&!i.showOutsideDays||l.hidden),h=null!==(s=null===(r=i.components)||void 0===r?void 0:r.DayContent)&&void 0!==s?s:f5,g={style:m,className:f,children:vs.jsx(h,{date:e,displayMonth:t,activeModifiers:l}),role:"gridcell"},x=o.focusTarget&&UR(o.focusTarget,e)&&!l.outside,y=o.focusedDay&&UR(o.focusedDay,e),v=O6(O6(O6({},g),((a={disabled:l.disabled,role:"gridcell"})["aria-selected"]=l.selected,a.tabIndex=y||x?0:-1,a)),c);return{isButton:u,isHidden:p,activeModifiers:l,selectedDays:d,buttonProps:v,divProps:g}}function $5(e){var t=cs.useRef(null),n=q5(e.date,e.displayMonth,t);return n.isHidden?vs.jsx("div",{role:"gridcell"}):n.isButton?vs.jsx(s5,O6({name:"day",ref:t},n.buttonProps)):vs.jsx("div",O6({},n.divProps))}function Y5(e){var t=e.number,n=e.dates,a=q6(),r=a.onWeekNumberClick,s=a.styles,i=a.classNames,o=a.locale,l=a.labels.labelWeekNumber,c=(0,a.formatters.formatWeekNumber)(Number(t),{locale:o});if(!r)return vs.jsx("span",{className:i.weeknumber,style:s.weeknumber,children:c});var d=l(Number(t),{locale:o});return vs.jsx(s5,{name:"week-number","aria-label":d,className:i.weeknumber,style:s.weeknumber,onClick:function(e){r(t,n,e)},children:c})}function Q5(e){var t,n,a,r=q6(),s=r.styles,i=r.classNames,o=r.showWeekNumber,l=r.components,c=null!==(t=null==l?void 0:l.Day)&&void 0!==t?t:$5,d=null!==(n=null==l?void 0:l.WeekNumber)&&void 0!==n?n:Y5;return o&&(a=vs.jsx("td",{className:i.cell,style:s.cell,children:vs.jsx(d,{number:e.weekNumber,dates:e.dates})})),vs.jsxs("tr",{className:i.row,style:s.row,children:[a,e.dates.map((function(t){return vs.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:vs.jsx(c,{displayMonth:e.displayMonth,date:t})},function(e){return Math.trunc(+bR(e)/1e3)}(t))}))]})}function K5(e,t,n){for(var a=(null==n?void 0:n.ISOWeek)?JR(t):KR(t,n),r=(null==n?void 0:n.ISOWeek)?LR(e):ER(e,n),s=OR(a,r),i=[],o=0;o<=s;o++)i.push(jR(r,o));return i.reduce((function(e,t){var a=(null==n?void 0:n.ISOWeek)?lz(t):dz(t,n),r=e.find((function(e){return e.weekNumber===a}));return r?(r.dates.push(t),e):(e.push({weekNumber:a,dates:[t]}),e)}),[])}function J5(e){var t,n,a,r=q6(),s=r.locale,i=r.classNames,o=r.styles,l=r.hideHead,c=r.fixedWeeks,d=r.components,u=r.weekStartsOn,f=r.firstWeekContainsDate,m=r.ISOWeek,p=function(e,t){var n=K5(YR(e),VR(e),t);if(null==t?void 0:t.useFixedWeeks){var a=Fz(e,t);if(a<6){var r=n[n.length-1],s=r.dates[r.dates.length-1],i=RR(s,6-a),o=K5(RR(s,1),i,t);n.push.apply(n,o)}}return n}(e.displayMonth,{useFixedWeeks:Boolean(c),ISOWeek:m,locale:s,weekStartsOn:u,firstWeekContainsDate:f}),h=null!==(t=null==d?void 0:d.Head)&&void 0!==t?t:u5,g=null!==(n=null==d?void 0:d.Row)&&void 0!==n?n:Q5,x=null!==(a=null==d?void 0:d.Footer)&&void 0!==a?a:c5;return vs.jsxs("table",{id:e.id,className:i.table,style:o.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!l&&vs.jsx(h,{}),vs.jsx("tbody",{className:i.tbody,style:o.tbody,children:p.map((function(t){return vs.jsx(g,{displayMonth:e.displayMonth,dates:t.dates,weekNumber:t.weekNumber},t.weekNumber)}))}),vs.jsx(x,{displayMonth:e.displayMonth})]})}var Z5="undefined"!=typeof window&&window.document&&window.document.createElement?cs.useLayoutEffect:cs.useEffect,X5=!1,e9=0;function t9(){return"react-day-picker-".concat(++e9)}function n9(e){var t,n,a=q6(),r=a.dir,s=a.classNames,i=a.styles,o=a.components,l=t5().displayMonths,c=function(e){var t,n=null!=e?e:X5?t9():null,a=cs.useState(n),r=a[0],s=a[1];return Z5((function(){null===r&&s(t9())}),[]),cs.useEffect((function(){!1===X5&&(X5=!0)}),[]),null!==(t=null!=e?e:r)&&void 0!==t?t:void 0}(a.id?"".concat(a.id,"-").concat(e.displayIndex):void 0),d=a.id?"".concat(a.id,"-grid-").concat(e.displayIndex):void 0,u=[s.month],f=i.month,m=0===e.displayIndex,p=e.displayIndex===l.length-1,h=!m&&!p;"rtl"===r&&(p=(t=[m,p])[0],m=t[1]),m&&(u.push(s.caption_start),f=O6(O6({},f),i.caption_start)),p&&(u.push(s.caption_end),f=O6(O6({},f),i.caption_end)),h&&(u.push(s.caption_between),f=O6(O6({},f),i.caption_between));var g=null!==(n=null==o?void 0:o.Caption)&&void 0!==n?n:l5;return vs.jsxs("div",{className:u.join(" "),style:f,children:[vs.jsx(g,{id:c,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),vs.jsx(J5,{id:d,"aria-labelledby":c,displayMonth:e.displayMonth})]},e.displayIndex)}function a9(e){var t=q6(),n=t.classNames,a=t.styles;return vs.jsx("div",{className:n.months,style:a.months,children:e.children})}function r9(e){var t,n,a=e.initialProps,r=q6(),s=B5(),i=t5(),o=cs.useState(!1),l=o[0],c=o[1];cs.useEffect((function(){r.initialFocus&&s.focusTarget&&(l||(s.focus(s.focusTarget),c(!0)))}),[r.initialFocus,l,s.focus,s.focusTarget,s]);var d=[r.classNames.root,r.className];r.numberOfMonths>1&&d.push(r.classNames.multiple_months),r.showWeekNumber&&d.push(r.classNames.with_weeknumber);var u=O6(O6({},r.styles.root),r.style),f=Object.keys(a).filter((function(e){return e.startsWith("data-")})).reduce((function(e,t){var n;return O6(O6({},e),((n={})[t]=a[t],n))}),{}),m=null!==(n=null===(t=a.components)||void 0===t?void 0:t.Months)&&void 0!==n?n:a9;return vs.jsx("div",O6({className:d.join(" "),style:u,dir:r.dir,id:r.id,nonce:a.nonce,title:a.title,lang:a.lang},f,{children:vs.jsx(m,{children:i.displayMonths.map((function(e,t){return vs.jsx(n9,{displayIndex:t,displayMonth:e},t)}))})}))}function s9(e){var t=e.children,n=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["children"]);return vs.jsx(H6,{initialProps:n,children:vs.jsx(e5,{children:vs.jsx(W5,{initialProps:n,children:vs.jsx(p5,{initialProps:n,children:vs.jsx(b5,{initialProps:n,children:vs.jsx(T5,{children:vs.jsx(F5,{children:t})})})})})})})}function i9(e){return vs.jsx(s9,O6({},e,{children:vs.jsx(r9,{initialProps:e})}))}function o9({className:e,classNames:t,showOutsideDays:n=!0,...a}){return vs.jsx(i9,{showOutsideDays:n,className:fN("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:fN(ok({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:fN(ok({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:e,...t})=>vs.jsx(_b,{className:fN("h-4 w-4",e),...t}),IconRight:({className:e,...t})=>vs.jsx(Ib,{className:fN("h-4 w-4",e),...t})},...a})}o9.displayName="Calendar";class l9{constructor(){this.authWindow=null,this.authPromise=null}static getInstance(){return l9.instance||(l9.instance=new l9),l9.instance}async checkConnectionStatus(){try{const e=await _y("GET","/api/google/calendar/status");return await e.json()}catch(e){return{connected:!1,message:"Error checking connection status"}}}async getAuthUrl(){try{const e=await _y("GET","/api/google/auth");return(await e.json()).authUrl}catch(e){return null}}async authenticate(){if(this.authPromise)return this.authPromise;this.authPromise=this._performAuthentication();try{return await this.authPromise}finally{this.authPromise=null}}async _performAuthentication(){try{const e=await this.getAuthUrl();if(!e)throw new Error("Failed to get authentication URL. Please ensure Google Calendar integration is configured by the platform administrator.");if(this.authWindow=window.open(e,"google_auth","width=500,height=600,scrollbars=yes,resizable=yes"),!this.authWindow)throw new Error("Failed to open authentication window. Please allow popups for this site.");return new Promise(((e,t)=>{const n=setInterval((()=>{var a;(null==(a=this.authWindow)?void 0:a.closed)&&(clearInterval(n),setTimeout((async()=>{try{const t=await this.checkConnectionStatus();e(t.connected)}catch(n){t(n)}}),1e3))}),1e3);setTimeout((()=>{clearInterval(n),this.authWindow&&!this.authWindow.closed&&this.authWindow.close(),t(new Error("Authentication timeout"))}),3e5)}))}catch(e){throw e}}async disconnect(){try{const e=await _y("DELETE","/api/google/calendar");return(await e.json()).success}catch(e){return!1}}isAuthenticating(){return null!==this.authPromise}cancelAuthentication(){this.authWindow&&!this.authWindow.closed&&this.authWindow.close(),this.authPromise=null}}const c9=l9.getInstance();function d9(){const{toast:e}=Fy(),t=vy(),[n,a]=cs.useState(!1),{data:r,isLoading:s,refetch:i,error:o}=Sy({queryKey:["google-calendar-status"],queryFn:()=>c9.checkConnectionStatus(),refetchOnWindowFocus:!1,retry:2}),l=cs.useCallback((async()=>{if(n)return!1;a(!0);try{return await c9.authenticate()?(e({title:"Connected Successfully",description:"Your Google Calendar has been connected successfully."}),t.invalidateQueries({queryKey:["google-calendar-status"]}),await i(),!0):(e({title:"Authentication Failed",description:"Failed to connect your Google Calendar. Please try again.",variant:"destructive"}),!1)}catch(r){return e({title:"Authentication Error",description:r.message||"An error occurred during authentication.",variant:"destructive"}),!1}finally{a(!1)}}),[n,e,t,i]),c=cs.useCallback((async()=>{try{return await c9.disconnect()?(e({title:"Disconnected Successfully",description:"Your Google Calendar has been disconnected."}),t.invalidateQueries({queryKey:["google-calendar-status"]}),await i(),!0):(e({title:"Disconnect Failed",description:"Failed to disconnect your Google Calendar.",variant:"destructive"}),!1)}catch(n){return e({title:"Disconnect Error",description:n.message||"An error occurred while disconnecting.",variant:"destructive"}),!1}}),[e,t,i]),d=cs.useCallback((()=>{c9.cancelAuthentication(),a(!1)}),[]);return{isConnected:(null==r?void 0:r.connected)??!1,connectionMessage:(null==r?void 0:r.message)??"",isLoadingStatus:s,statusError:o,isAuthenticating:n||c9.isAuthenticating(),authenticate:l,disconnect:c,cancelAuthentication:d,refetchStatus:i,status:r}}function u9({onAuthSuccess:e,className:t}){const{isConnected:n,isLoadingStatus:a,isAuthenticating:r,authenticate:s}=d9();return a?vs.jsx("div",{className:t,children:vs.jsxs(pR,{children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin"}),vs.jsx(hR,{children:"Checking Connection"}),vs.jsx(gR,{children:"Verifying your Google Calendar connection status..."})]})}):n?vs.jsx("div",{className:t,children:vs.jsxs(pR,{className:"bg-green-50 border-green-200",children:[vs.jsx(Pb,{className:"h-4 w-4 text-green-500"}),vs.jsx(hR,{className:"text-green-700",children:"Connected"}),vs.jsx(gR,{className:"text-green-600",children:"Your Google Calendar is connected and ready to use."})]})}):vs.jsx("div",{className:t,children:vs.jsxs(pR,{className:"bg-amber-50 border-amber-200",children:[vs.jsx(Lb,{className:"h-4 w-4 text-amber-500"}),vs.jsx(hR,{className:"text-amber-700",children:"Authentication Required"}),vs.jsxs(gR,{className:"text-amber-600 space-y-3",children:[vs.jsx("p",{children:"Connect your Google Calendar account to use this."}),vs.jsx(lk,{onClick:async()=>{await s()&&(null==e||e())},disabled:r,className:"bg-blue-500 hover:bg-blue-600 text-white",size:"sm",children:r?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-3 w-3 animate-spin"}),"Connecting..."]}):vs.jsxs(vs.Fragment,{children:[vs.jsx($b,{className:"mr-2 h-3 w-3"}),"Connect Google Calendar"]})})]})]})})}const f9=[{id:"GET",name:"GET"},{id:"POST",name:"POST"},{id:"PUT",name:"PUT"},{id:"DELETE",name:"DELETE"},{id:"PATCH",name:"PATCH"}],m9=[{id:"none",name:"None"},{id:"bearer",name:"Bearer Token"},{id:"basic",name:"Basic Auth"},{id:"apikey",name:"API Key"}],p9=[{id:"json",name:"JSON"},{id:"text",name:"Text"},{id:"xml",name:"XML"},{id:"auto",name:"Auto-detect"}],h9=[{id:"get_user",name:"Get User Data",method:"GET",url:"https://api.example.com/users/{{user.id}}",headers:[{key:"Accept",value:"application/json"}],body:""},{id:"post_data",name:"Post Form Data",method:"POST",url:"https://api.example.com/submit",headers:[{key:"Content-Type",value:"application/json"}],body:'{\n  "name": "{{contact.name}}",\n  "email": "{{contact.email}}",\n  "message": "{{message.content}}"\n}'},{id:"update_record",name:"Update Record",method:"PUT",url:"https://api.example.com/records/{{record.id}}",headers:[{key:"Content-Type",value:"application/json"}],body:'{\n  "status": "updated",\n  "timestamp": "{{date.now}}"\n}'}];const g9=[{id:"orders",name:"Orders",endpoint:"orders"},{id:"products",name:"Products",endpoint:"products"},{id:"customers",name:"Customers",endpoint:"customers"},{id:"inventory_items",name:"Inventory",endpoint:"inventory_items"},{id:"fulfillments",name:"Fulfillments",endpoint:"fulfillments"},{id:"webhooks",name:"Webhooks",endpoint:"webhooks"},{id:"variants",name:"Product Variants",endpoint:"variants"},{id:"collections",name:"Collections",endpoint:"collections"}],x9=[{id:"get",name:"Get (Fetch Data)"},{id:"post",name:"Create New"},{id:"put",name:"Update Existing"},{id:"delete",name:"Delete"}],y9=[{id:"recent_orders",name:"Get Recent Orders",resource:"orders",action:"get",filters:{status:"any",limit:"10",created_at_min:"{{date.last_week}}"}},{id:"update_inventory",name:"Update Product Stock",resource:"inventory_items",action:"put",filters:{inventory_item_id:"{{product.inventory_item_id}}",available:"{{inventory.new_quantity}}"}},{id:"create_customer",name:"Create Customer",resource:"customers",action:"post",filters:{email:"{{contact.email}}",first_name:"{{contact.first_name}}",last_name:"{{contact.last_name}}"}},{id:"order_fulfillment",name:"Create Order Fulfillment",resource:"fulfillments",action:"post",filters:{order_id:"{{order.id}}",tracking_number:"{{shipping.tracking}}"}}],v9={orders:[{key:"status",label:"Order Status",type:"select",options:["open","closed","cancelled","any"],required:!1},{key:"financial_status",label:"Payment Status",type:"select",options:["pending","authorized","paid","refunded","voided"],required:!1},{key:"fulfillment_status",label:"Fulfillment Status",type:"select",options:["shipped","partial","unshipped","any"],required:!1},{key:"created_at_min",label:"Created After",type:"date",required:!1},{key:"created_at_max",label:"Created Before",type:"date",required:!1},{key:"limit",label:"Limit Results",type:"number",default:"50",required:!1}],products:[{key:"vendor",label:"Vendor",type:"text",required:!1},{key:"product_type",label:"Product Type",type:"text",required:!1},{key:"status",label:"Status",type:"select",options:["active","archived","draft"],required:!1},{key:"created_at_min",label:"Created After",type:"date",required:!1},{key:"limit",label:"Limit Results",type:"number",default:"50",required:!1}],customers:[{key:"email",label:"Email",type:"text",required:!1},{key:"phone",label:"Phone",type:"text",required:!1},{key:"created_at_min",label:"Created After",type:"date",required:!1},{key:"limit",label:"Limit Results",type:"number",default:"50",required:!1}],inventory_items:[{key:"ids",label:"Inventory Item IDs",type:"text",placeholder:"Comma-separated IDs",required:!1},{key:"limit",label:"Limit Results",type:"number",default:"50",required:!1}],fulfillments:[{key:"order_id",label:"Order ID",type:"text",required:!0},{key:"status",label:"Status",type:"select",options:["pending","open","success","cancelled","error","failure"],required:!1},{key:"created_at_min",label:"Created After",type:"date",required:!1}]};const b9=[{id:"start_conversation",name:"Start Conversation",description:"Initialize new chat session"},{id:"send_message",name:"Send Message",description:"Send user message to bot"},{id:"get_response",name:"Get Response",description:"Retrieve bot response"},{id:"manage_session",name:"Manage Session",description:"Create/update/close session"},{id:"webhook_event",name:"Webhook Event",description:"Handle incoming webhook"},{id:"get_analytics",name:"Get Analytics",description:"Retrieve conversation analytics"}],w9=[{id:"start_chat",name:"Start New Chat",operation:"start_conversation",config:{prefilledVariables:{contact_name:"{{contact.first_name}}",contact_email:"{{contact.email}}"}}},{id:"send_user_message",name:"Send User Message",operation:"send_message",config:{message:"{{message.content}}",sessionId:"{{typebot.session.id}}"}},{id:"get_bot_response",name:"Get Bot Response",operation:"get_response",config:{sessionId:"{{typebot.session.id}}",waitForResponse:!0}},{id:"close_conversation",name:"Close Conversation",operation:"manage_session",config:{action:"close",sessionId:"{{typebot.session.id}}"}}],j9={start_conversation:[{key:"prefilledVariables",label:"Prefilled Variables",type:"object",description:"Variables to pass to the bot",required:!1},{key:"isStreamEnabled",label:"Enable Streaming",type:"boolean",default:!1,required:!1},{key:"isOnlyRegisteredResults",label:"Only Registered Results",type:"boolean",default:!1,required:!1}],send_message:[{key:"message",label:"Message Content",type:"text",required:!0},{key:"sessionId",label:"Session ID",type:"text",required:!0},{key:"inputType",label:"Input Type",type:"select",options:[{id:"text",name:"Text Input"},{id:"number",name:"Number Input"},{id:"email",name:"Email Input"},{id:"url",name:"URL Input"},{id:"date",name:"Date Input"},{id:"phone",name:"Phone Input"},{id:"choice",name:"Multiple Choice"},{id:"file",name:"File Upload"}].map((e=>e.id)),required:!1}],get_response:[{key:"sessionId",label:"Session ID",type:"text",required:!0},{key:"waitForResponse",label:"Wait for Response",type:"boolean",default:!0,required:!1},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30,required:!1}],manage_session:[{key:"action",label:"Session Action",type:"select",options:[{id:"create",name:"Create Session"},{id:"update",name:"Update Session"},{id:"close",name:"Close Session"},{id:"get_status",name:"Get Status"}].map((e=>e.id)),required:!0},{key:"sessionId",label:"Session ID",type:"text",required:!1},{key:"variables",label:"Session Variables",type:"object",required:!1}],webhook_event:[{key:"webhookUrl",label:"Webhook URL",type:"url",required:!0},{key:"eventType",label:"Event Type",type:"select",options:["conversation_started","conversation_completed","response_received"],required:!1}],get_analytics:[{key:"dateFrom",label:"From Date",type:"date",required:!1},{key:"dateTo",label:"To Date",type:"date",required:!1},{key:"includeDetails",label:"Include Details",type:"boolean",default:!1,required:!1}]};var N9=.999,C9=/[\\\/_+.#"@\[\(\{&]/,S9=/[\\\/_+.#"@\[\(\{&]/g,k9=/[\s-]/,M9=/[\s-]/g;function _9(e,t,n,a,r,s,i){if(s===t.length)return r===e.length?1:.99;var o=`${r},${s}`;if(void 0!==i[o])return i[o];for(var l,c,d,u,f=a.charAt(s),m=n.indexOf(f,r),p=0;m>=0;)(l=_9(e,t,n,a,m+1,s+1,i))>p&&(m===r?l*=1:C9.test(e.charAt(m-1))?(l*=.8,(d=e.slice(r,m-1).match(S9))&&r>0&&(l*=Math.pow(N9,d.length))):k9.test(e.charAt(m-1))?(l*=.9,(u=e.slice(r,m-1).match(M9))&&r>0&&(l*=Math.pow(N9,u.length))):(l*=.17,r>0&&(l*=Math.pow(N9,m-r))),e.charAt(m)!==t.charAt(s)&&(l*=.9999)),(l<.1&&n.charAt(m-1)===a.charAt(s+1)||a.charAt(s+1)===a.charAt(s)&&n.charAt(m-1)!==a.charAt(s))&&(.1*(c=_9(e,t,n,a,m+1,s+2,i))>l&&(l=.1*c)),l>p&&(p=l),m=n.indexOf(f,m+1);return i[o]=p,p}function I9(e){return e.toLowerCase().replace(M9," ")}function A9(e,t,n){return _9(e=n&&n.length>0?""+(e+" "+n.join(" ")):e,t,I9(e),I9(t),0,0,{})}var E9='[cmdk-group=""]',L9='[cmdk-group-items=""]',T9='[cmdk-item=""]',D9=`${T9}:not([aria-disabled="true"])`,P9="cmdk-item-select",O9="data-value",R9=(e,t,n)=>A9(e,t,n),z9=cs.createContext(void 0),F9=()=>cs.useContext(z9),B9=cs.createContext(void 0),U9=()=>cs.useContext(B9),W9=cs.createContext(void 0),G9=cs.forwardRef(((e,t)=>{let n=a8((()=>{var t,n;return{search:"",value:null!=(n=null!=(t=e.value)?t:e.defaultValue)?n:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}})),a=a8((()=>new Set)),r=a8((()=>new Map)),s=a8((()=>new Map)),i=a8((()=>new Set)),o=t8(e),{label:l,children:c,value:d,onValueChange:u,filter:f,shouldFilter:m,loop:p,disablePointerSelection:h=!1,vimBindings:g=!0,...x}=e,y=SN(),v=SN(),b=SN(),w=cs.useRef(null),j=i8();n8((()=>{if(void 0!==d){let e=d.trim();n.current.value=e,N.emit()}}),[d]),n8((()=>{j(6,I)}),[]);let N=cs.useMemo((()=>({subscribe:e=>(i.current.add(e),()=>i.current.delete(e)),snapshot:()=>n.current,setState:(e,t,a)=>{var r,s,i,l;if(!Object.is(n.current[e],t)){if(n.current[e]=t,"search"===e)_(),k(),j(1,M);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(b);e?e.focus():null==(r=document.getElementById(y))||r.focus()}if(j(7,(()=>{var e;n.current.selectedItemId=null==(e=A())?void 0:e.id,N.emit()})),a||j(5,I),void 0!==(null==(s=o.current)?void 0:s.value)){let e=null!=t?t:"";return void(null==(l=(i=o.current).onValueChange)||l.call(i,e))}}N.emit()}},emit:()=>{i.current.forEach((e=>e()))}})),[]),C=cs.useMemo((()=>({value:(e,t,a)=>{var r;t!==(null==(r=s.current.get(e))?void 0:r.value)&&(s.current.set(e,{value:t,keywords:a}),n.current.filtered.items.set(e,S(t,a)),j(2,(()=>{k(),N.emit()})))},item:(e,t)=>(a.current.add(e),t&&(r.current.has(t)?r.current.get(t).add(e):r.current.set(t,new Set([e]))),j(3,(()=>{_(),k(),n.current.value||M(),N.emit()})),()=>{s.current.delete(e),a.current.delete(e),n.current.filtered.items.delete(e);let t=A();j(4,(()=>{_(),(null==t?void 0:t.getAttribute("id"))===e&&M(),N.emit()}))}),group:e=>(r.current.has(e)||r.current.set(e,new Set),()=>{s.current.delete(e),r.current.delete(e)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:y,inputId:b,labelId:v,listInnerRef:w})),[]);function S(e,t){var a,r;let s=null!=(r=null==(a=o.current)?void 0:a.filter)?r:R9;return e?s(e,n.current.search,t):0}function k(){if(!n.current.search||!1===o.current.shouldFilter)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach((n=>{let a=r.current.get(n),s=0;a.forEach((t=>{let n=e.get(t);s=Math.max(n,s)})),t.push([n,s])}));let a=w.current;E().sort(((t,n)=>{var a,r;let s=t.getAttribute("id"),i=n.getAttribute("id");return(null!=(a=e.get(i))?a:0)-(null!=(r=e.get(s))?r:0)})).forEach((e=>{let t=e.closest(L9);t?t.appendChild(e.parentElement===t?e:e.closest(`${L9} > *`)):a.appendChild(e.parentElement===a?e:e.closest(`${L9} > *`))})),t.sort(((e,t)=>t[1]-e[1])).forEach((e=>{var t;let n=null==(t=w.current)?void 0:t.querySelector(`${E9}[${O9}="${encodeURIComponent(e[0])}"]`);null==n||n.parentElement.appendChild(n)}))}function M(){let e=E().find((e=>"true"!==e.getAttribute("aria-disabled"))),t=null==e?void 0:e.getAttribute(O9);N.setState("value",t||void 0)}function _(){var e,t,i,l;if(!n.current.search||!1===o.current.shouldFilter)return void(n.current.filtered.count=a.current.size);n.current.filtered.groups=new Set;let c=0;for(let r of a.current){let a=S(null!=(t=null==(e=s.current.get(r))?void 0:e.value)?t:"",null!=(l=null==(i=s.current.get(r))?void 0:i.keywords)?l:[]);n.current.filtered.items.set(r,a),a>0&&c++}for(let[a,s]of r.current)for(let e of s)if(n.current.filtered.items.get(e)>0){n.current.filtered.groups.add(a);break}n.current.filtered.count=c}function I(){var e,t,n;let a=A();a&&((null==(e=a.parentElement)?void 0:e.firstChild)===a&&(null==(n=null==(t=a.closest(E9))?void 0:t.querySelector('[cmdk-group-heading=""]'))||n.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function A(){var e;return null==(e=w.current)?void 0:e.querySelector(`${T9}[aria-selected="true"]`)}function E(){var e;return Array.from((null==(e=w.current)?void 0:e.querySelectorAll(D9))||[])}function L(e){let t=E()[e];t&&N.setState("value",t.getAttribute(O9))}function T(e){var t;let n=A(),a=E(),r=a.findIndex((e=>e===n)),s=a[r+e];null!=(t=o.current)&&t.loop&&(s=r+e<0?a[a.length-1]:r+e===a.length?a[0]:a[r+e]),s&&N.setState("value",s.getAttribute(O9))}function D(e){let t,n=A(),a=null==n?void 0:n.closest(E9);for(;a&&!t;)a=e>0?X9(a,E9):e8(a,E9),t=null==a?void 0:a.querySelector(D9);t?N.setState("value",t.getAttribute(O9)):T(e)}let P=()=>L(E().length-1),O=e=>{e.preventDefault(),e.metaKey?P():e.altKey?D(1):T(1)},R=e=>{e.preventDefault(),e.metaKey?L(0):e.altKey?D(-1):T(-1)};return cs.createElement(Xy.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=x.onKeyDown)||t.call(x,e);let n=e.nativeEvent.isComposing||229===e.keyCode;if(!e.defaultPrevented&&!n)switch(e.key){case"n":case"j":g&&e.ctrlKey&&O(e);break;case"ArrowDown":O(e);break;case"p":case"k":g&&e.ctrlKey&&R(e);break;case"ArrowUp":R(e);break;case"Home":e.preventDefault(),L(0);break;case"End":e.preventDefault(),P();break;case"Enter":{e.preventDefault();let t=A();if(t){let e=new Event(P9);t.dispatchEvent(e)}}}}},cs.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:l8},l),o8(e,(e=>cs.createElement(B9.Provider,{value:N},cs.createElement(z9.Provider,{value:C},e)))))})),V9=cs.forwardRef(((e,t)=>{var n,a;let r=SN(),s=cs.useRef(null),i=cs.useContext(W9),o=F9(),l=t8(e),c=null!=(a=null==(n=l.current)?void 0:n.forceMount)?a:null==i?void 0:i.forceMount;n8((()=>{if(!c)return o.item(r,null==i?void 0:i.id)}),[c]);let d=s8(r,s,[e.value,e.children,s],e.keywords),u=U9(),f=r8((e=>e.value&&e.value===d.current)),m=r8((e=>!(!c&&!1!==o.filter())||(!e.search||e.filtered.items.get(r)>0)));function p(){var e,t;h(),null==(t=(e=l.current).onSelect)||t.call(e,d.current)}function h(){u.setState("value",d.current,!0)}if(cs.useEffect((()=>{let t=s.current;if(t&&!e.disabled)return t.addEventListener(P9,p),()=>t.removeEventListener(P9,p)}),[m,e.onSelect,e.disabled]),!m)return null;let{disabled:g,value:x,onSelect:y,forceMount:v,keywords:b,...w}=e;return cs.createElement(Xy.div,{ref:Wy(s,t),...w,id:r,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!f,"data-disabled":!!g,"data-selected":!!f,onPointerMove:g||o.getDisablePointerSelection()?void 0:h,onClick:g?void 0:p},e.children)})),H9=cs.forwardRef(((e,t)=>{let{heading:n,children:a,forceMount:r,...s}=e,i=SN(),o=cs.useRef(null),l=cs.useRef(null),c=SN(),d=F9(),u=r8((e=>!(!r&&!1!==d.filter())||(!e.search||e.filtered.groups.has(i))));n8((()=>d.group(i)),[]),s8(i,o,[e.value,e.heading,l]);let f=cs.useMemo((()=>({id:i,forceMount:r})),[r]);return cs.createElement(Xy.div,{ref:Wy(o,t),...s,"cmdk-group":"",role:"presentation",hidden:!u||void 0},n&&cs.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),o8(e,(e=>cs.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},cs.createElement(W9.Provider,{value:f},e)))))})),q9=cs.forwardRef(((e,t)=>{let{alwaysRender:n,...a}=e,r=cs.useRef(null),s=r8((e=>!e.search));return n||s?cs.createElement(Xy.div,{ref:Wy(r,t),...a,"cmdk-separator":"",role:"separator"}):null})),$9=cs.forwardRef(((e,t)=>{let{onValueChange:n,...a}=e,r=null!=e.value,s=U9(),i=r8((e=>e.search)),o=r8((e=>e.selectedItemId)),l=F9();return cs.useEffect((()=>{null!=e.value&&s.setState("search",e.value)}),[e.value]),cs.createElement(Xy.input,{ref:t,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:r?e.value:i,onChange:e=>{r||s.setState("search",e.target.value),null==n||n(e.target.value)}})})),Y9=cs.forwardRef(((e,t)=>{let{children:n,label:a="Suggestions",...r}=e,s=cs.useRef(null),i=cs.useRef(null),o=r8((e=>e.selectedItemId)),l=F9();return cs.useEffect((()=>{if(i.current&&s.current){let e,t=i.current,n=s.current,a=new ResizeObserver((()=>{e=requestAnimationFrame((()=>{let e=t.offsetHeight;n.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")}))}));return a.observe(t),()=>{cancelAnimationFrame(e),a.unobserve(t)}}}),[]),cs.createElement(Xy.div,{ref:Wy(s,t),...r,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":a,id:l.listId},o8(e,(e=>cs.createElement("div",{ref:Wy(i,l.listInnerRef),"cmdk-list-sizer":""},e))))})),Q9=cs.forwardRef(((e,t)=>{let{open:n,onOpenChange:a,overlayClassName:r,contentClassName:s,container:i,...o}=e;return cs.createElement(dB,{open:n,onOpenChange:a},cs.createElement(fB,{container:i},cs.createElement(mB,{"cmdk-overlay":"",className:r}),cs.createElement(pB,{"aria-label":e.label,"cmdk-dialog":"",className:s},cs.createElement(G9,{ref:t,...o}))))})),K9=cs.forwardRef(((e,t)=>r8((e=>0===e.filtered.count))?cs.createElement(Xy.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null)),J9=cs.forwardRef(((e,t)=>{let{progress:n,children:a,label:r="Loading...",...s}=e;return cs.createElement(Xy.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":r},o8(e,(e=>cs.createElement("div",{"aria-hidden":!0},e))))})),Z9=Object.assign(G9,{List:Y9,Item:V9,Input:$9,Group:H9,Separator:q9,Dialog:Q9,Empty:K9,Loading:J9});function X9(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function e8(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function t8(e){let t=cs.useRef(e);return n8((()=>{t.current=e})),t}var n8="undefined"==typeof window?cs.useEffect:cs.useLayoutEffect;function a8(e){let t=cs.useRef();return void 0===t.current&&(t.current=e()),t}function r8(e){let t=U9(),n=()=>e(t.snapshot());return cs.useSyncExternalStore(t.subscribe,n,n)}function s8(e,t,n,a=[]){let r=cs.useRef(),s=F9();return n8((()=>{var i;let o=(()=>{var e;for(let t of n){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():r.current}})(),l=a.map((e=>e.trim()));s.value(e,o,l),null==(i=t.current)||i.setAttribute(O9,o),r.current=o})),r}var i8=()=>{let[e,t]=cs.useState(),n=a8((()=>new Map));return n8((()=>{n.current.forEach((e=>e())),n.current=new Map}),[e]),(e,a)=>{n.current.set(e,a),t({})}};function o8({asChild:e,children:t},n){return e&&cs.isValidElement(t)?cs.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},n(t.props.children)):n(t)}var l8={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const c8=cs.forwardRef((({className:e,...t},n)=>vs.jsx(Z9,{ref:n,className:fN("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t})));c8.displayName=Z9.displayName;const d8=cs.forwardRef((({className:e,...t},n)=>vs.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[vs.jsx(Ow,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),vs.jsx(Z9.Input,{ref:n,className:fN("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})));d8.displayName=Z9.Input.displayName;const u8=cs.forwardRef((({className:e,...t},n)=>vs.jsx(Z9.List,{ref:n,className:fN("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t})));u8.displayName=Z9.List.displayName;const f8=cs.forwardRef(((e,t)=>vs.jsx(Z9.Empty,{ref:t,className:"py-6 text-center text-sm",...e})));f8.displayName=Z9.Empty.displayName;const m8=cs.forwardRef((({className:e,...t},n)=>vs.jsx(Z9.Group,{ref:n,className:fN("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t})));m8.displayName=Z9.Group.displayName;cs.forwardRef((({className:e,...t},n)=>vs.jsx(Z9.Separator,{ref:n,className:fN("-mx-1 h-px bg-border",e),...t}))).displayName=Z9.Separator.displayName;const p8=cs.forwardRef((({className:e,...t},n)=>vs.jsx(Z9.Item,{ref:n,className:fN("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t})));p8.displayName=Z9.Item.displayName;const h8=[{value:"contact.id",label:"Contact ID",description:"Unique identifier for the contact",icon:vs.jsx(rw,{className:"w-4 h-4"}),category:"contact"},{value:"contact.phone",label:"Contact Phone",description:"Phone number of the contact",icon:vs.jsx(Mw,{className:"w-4 h-4"}),category:"contact"},{value:"contact.name",label:"Contact Name",description:"Full name of the contact",icon:vs.jsx(uj,{className:"w-4 h-4"}),category:"contact"},{value:"contact.email",label:"Contact Email",description:"Email address of the contact",icon:vs.jsx(hw,{className:"w-4 h-4"}),category:"contact"},{value:"message.content",label:"Message Content",description:"Content of the received message",icon:vs.jsx(vw,{className:"w-4 h-4"}),category:"message"},{value:"message.type",label:"Message Type",description:"Type of the message (text, image, etc.)",icon:vs.jsx(aj,{className:"w-4 h-4"}),category:"message"},{value:"date.today",label:"Current Date",description:"Today's date",icon:vs.jsx(Nb,{className:"w-4 h-4"}),category:"system"},{value:"time.now",label:"Current Time",description:"Current time",icon:vs.jsx(Nb,{className:"w-4 h-4"}),category:"system"}];function g8({value:e,onChange:t,placeholder:n,className:a}){const[r,s]=cs.useState(!1),[i,o]=cs.useState(""),[l,c]=cs.useState(0),d=ds.useRef(null),u=h8.filter((e=>e.label.toLowerCase().includes(i.toLowerCase())||e.value.toLowerCase().includes(i.toLowerCase())||e.description.toLowerCase().includes(i.toLowerCase()))).reduce(((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e)),{}),f=e=>{const t=e.target;c(t.selectionStart||0)},m=e=>{switch(e){case"contact":return"Contact";case"message":return"Message";case"system":return"System";case"deal":return"Deal";default:return e}};return vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(LB,{ref:d,value:e,onChange:e=>{t(e.target.value),c(e.target.selectionStart||0)},onSelect:f,onKeyUp:f,onClick:f,placeholder:n,className:fN("font-mono text-xs",a)}),vs.jsxs(r6,{open:r,onOpenChange:s,children:[vs.jsx(s6,{asChild:!0,children:vs.jsx(lk,{variant:"outline",size:"sm",className:"h-8 px-2 flex items-center gap-1",children:vs.jsx(mj,{className:"w-3 h-3"})})}),vs.jsx(i6,{className:"w-80 p-0",align:"start",children:vs.jsxs(c8,{children:[vs.jsx(d8,{placeholder:"Search variables...",value:i,onValueChange:o}),vs.jsxs(u8,{children:[vs.jsx(f8,{children:"No variables found."}),Object.entries(u).map((([n,a])=>vs.jsx(m8,{heading:m(n),children:a.map((n=>vs.jsx(p8,{value:n.value,onSelect:()=>(n=>{const a=`{{${n}}}`,r=e.substring(0,l),i=e.substring(l);t(r+a+i),s(!1),setTimeout((()=>{if(d.current){d.current.focus();const e=l+a.length;d.current.setSelectionRange(e,e)}}),0)})(n.value),className:"flex items-center gap-3 p-3",children:vs.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.icon,vs.jsxs("div",{className:"flex-1",children:[vs.jsx("div",{className:"font-medium text-xs",children:n.label}),vs.jsx("div",{className:"text-xs text-muted-foreground",children:n.description})]}),vs.jsx(dk,{variant:"secondary",className:"text-xs",children:`{{${n.value}}}`})]})},n.value)))},n)))]})]})})]})]})}const x8=[{id:"GET",name:"GET"},{id:"POST",name:"POST"},{id:"PUT",name:"PUT"},{id:"DELETE",name:"DELETE"},{id:"PATCH",name:"PATCH"}],y8=[{id:"none",name:"None"},{id:"bearer",name:"Bearer Token"},{id:"basic",name:"Basic Auth"},{id:"apikey",name:"API Key"}];const v8=[{id:"orders",name:"Orders",endpoint:"orders"},{id:"products",name:"Products",endpoint:"products"},{id:"customers",name:"Customers",endpoint:"customers"},{id:"coupons",name:"Coupons",endpoint:"coupons"},{id:"categories",name:"Product Categories",endpoint:"products/categories"},{id:"variations",name:"Product Variations",endpoint:"products/{product_id}/variations"},{id:"reports",name:"Reports",endpoint:"reports"},{id:"payment_gateways",name:"Payment Gateways",endpoint:"payment_gateways"},{id:"shipping_zones",name:"Shipping Zones",endpoint:"shipping/zones"},{id:"tax_rates",name:"Tax Rates",endpoint:"taxes"}],b8=[{id:"get",name:"Get (Fetch Data)"},{id:"post",name:"Create New"},{id:"put",name:"Update Existing"},{id:"delete",name:"Delete"}],w8=[{id:"recent_orders",name:"Get Recent Orders",resource:"orders",action:"get",filters:{status:"any",per_page:"10",after:"{{date.last_week}}"}},{id:"update_product_stock",name:"Update Product Stock",resource:"products",action:"put",filters:{id:"{{product.id}}",stock_quantity:"{{inventory.new_quantity}}",manage_stock:"true"}},{id:"create_customer",name:"Create Customer",resource:"customers",action:"post",filters:{email:"{{contact.email}}",first_name:"{{contact.first_name}}",last_name:"{{contact.last_name}}"}},{id:"create_coupon",name:"Create Discount Coupon",resource:"coupons",action:"post",filters:{code:"{{coupon.code}}",discount_type:"percent",amount:"{{coupon.amount}}"}},{id:"order_completed",name:"Mark Order as Completed",resource:"orders",action:"put",filters:{id:"{{order.id}}",status:"completed"}}],j8={orders:[{key:"status",label:"Order Status",type:"select",options:["pending","processing","on-hold","completed","cancelled","refunded","failed","any"],default:""},{key:"customer",label:"Customer ID",type:"number",default:""},{key:"product",label:"Product ID",type:"number",default:""},{key:"after",label:"Created After",type:"date",default:""},{key:"before",label:"Created Before",type:"date",default:""},{key:"per_page",label:"Results Per Page",type:"number",default:"10"},{key:"search",label:"Search Orders",type:"text",default:""}],products:[{key:"status",label:"Product Status",type:"select",options:["draft","pending","private","publish","any"],default:""},{key:"category",label:"Category ID",type:"number",default:""},{key:"tag",label:"Tag ID",type:"number",default:""},{key:"featured",label:"Featured Only",type:"select",options:["true","false"],default:""},{key:"on_sale",label:"On Sale Only",type:"select",options:["true","false"],default:""},{key:"min_price",label:"Minimum Price",type:"number",default:""},{key:"max_price",label:"Maximum Price",type:"number",default:""},{key:"stock_status",label:"Stock Status",type:"select",options:["instock","outofstock","onbackorder"],default:""},{key:"per_page",label:"Results Per Page",type:"number",default:"10"},{key:"search",label:"Search Products",type:"text",default:""}],customers:[{key:"email",label:"Email Address",type:"email"},{key:"role",label:"User Role",type:"select",options:["customer","subscriber","administrator"]},{key:"orderby",label:"Order By",type:"select",options:["id","include","name","registered_date"]},{key:"order",label:"Sort Order",type:"select",options:["asc","desc"]},{key:"per_page",label:"Results Per Page",type:"number",default:"10"},{key:"search",label:"Search Customers",type:"text"}],coupons:[{key:"code",label:"Coupon Code",type:"text"},{key:"after",label:"Created After",type:"date"},{key:"before",label:"Created Before",type:"date"},{key:"per_page",label:"Results Per Page",type:"number",default:"10"},{key:"search",label:"Search Coupons",type:"text"}],categories:[{key:"parent",label:"Parent Category ID",type:"number"},{key:"product",label:"Product ID",type:"number"},{key:"hide_empty",label:"Hide Empty Categories",type:"select",options:["true","false"]},{key:"per_page",label:"Results Per Page",type:"number",default:"10"},{key:"search",label:"Search Categories",type:"text"}],reports:[{key:"period",label:"Report Period",type:"select",options:["week","month","last_month","year"]},{key:"date_min",label:"Start Date",type:"date"},{key:"date_max",label:"End Date",type:"date"}]};let N8=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t};const C8=e=>vs.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[vs.jsx("path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7.5"}),vs.jsx("path",{d:"M16 2v4"}),vs.jsx("path",{d:"M8 2v4"}),vs.jsx("path",{d:"M3 10h5"}),vs.jsx("path",{d:"M17.5 17.5 16 16.25V14"}),vs.jsx("path",{d:"M22 16a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z"})]}),S8=ds.memo((({url:e})=>{const{t:t}=mk(),[n,a]=cs.useState(!0),[r,s]=cs.useState(!1),[i,o]=cs.useState({});ds.useEffect((()=>{e&&(a(!0),s(!1),o({}))}),[e]);const l=ds.useCallback((e=>{const t=e.currentTarget;o({duration:t.duration}),a(!1),s(!1)}),[]),c=ds.useCallback((()=>{a(!1),s(!0)}),[]),d=ds.useCallback((e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`),[]),u=ds.useMemo((()=>e.split("/").pop()||"audio file"),[e]);return e?vs.jsxs("div",{className:"mt-2 p-2 bg-secondary/20 rounded border",children:[vs.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[vs.jsx(Kb,{className:"h-4 w-4 text-purple-500"}),vs.jsx("span",{className:"text-xs font-medium truncate",children:u})]}),n&&vs.jsxs("div",{className:"flex items-center justify-center py-4",children:[vs.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-500"}),vs.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:t("flow_builder.preview.loading_audio","Loading audio...")})]}),r&&vs.jsx("div",{className:"flex items-center justify-center py-4 text-red-500",children:vs.jsx("span",{className:"text-xs",children:t("flow_builder.preview.failed_audio","Failed to load audio")})}),!r&&vs.jsx("audio",{src:e,controls:!0,className:"w-full h-8",onLoadedMetadata:l,onError:c,preload:"metadata"}),i.duration&&vs.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[t("flow_builder.preview.duration","Duration"),": ",d(i.duration)]})]}):null})),k8=ds.memo((({url:e})=>{const{t:t}=mk(),[n,a]=cs.useState(!0),[r,s]=cs.useState(!1),[i,o]=cs.useState({});ds.useEffect((()=>{e&&(a(!0),s(!1),o({}))}),[e]);const l=ds.useCallback((e=>{const t=e.currentTarget;o({duration:t.duration,width:t.videoWidth,height:t.videoHeight}),a(!1),s(!1)}),[]),c=ds.useCallback((()=>{a(!1),s(!0)}),[]),d=ds.useCallback((e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`),[]),u=ds.useMemo((()=>e.split("/").pop()||"video file"),[e]);return e?vs.jsxs("div",{className:"mt-2 p-2 bg-secondary/20 rounded border",children:[vs.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[vs.jsx(Xb,{className:"h-4 w-4 text-red-500"}),vs.jsx("span",{className:"text-xs font-medium truncate",children:u})]}),n&&vs.jsxs("div",{className:"flex items-center justify-center py-8 bg-black/5 rounded",children:[vs.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-500"}),vs.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:t("flow_builder.preview.loading_video","Loading video...")})]}),r&&vs.jsxs("div",{className:"flex items-center justify-center py-8 bg-black/5 rounded text-red-500",children:[vs.jsx(Xb,{className:"h-6 w-6 mr-2"}),vs.jsx("span",{className:"text-xs",children:t("flow_builder.preview.failed_video","Failed to load video")})]}),!r&&vs.jsx("video",{src:e,controls:!0,className:"w-full max-h-32 bg-black rounded",onLoadedMetadata:l,onError:c,preload:"metadata"}),i.duration&&vs.jsxs("div",{className:"mt-1 text-xs text-muted-foreground flex gap-4",children:[vs.jsxs("span",{children:[t("flow_builder.preview.duration","Duration"),": ",d(i.duration)]}),i.width&&i.height&&vs.jsxs("span",{children:[t("flow_builder.preview.resolution","Resolution"),": ",i.width,"x",i.height]})]})]}):null})),M8=ds.memo((({url:e,fileName:t})=>{const{t:n}=mk(),[a,r]=cs.useState(!0),[s,i]=cs.useState(!1);ds.useEffect((()=>{e&&(r(!0),i(!1))}),[e]);const o=ds.useCallback((e=>{var n;return(null==(n=(t||e.split("/").pop()||"").split(".").pop())?void 0:n.toLowerCase())||""}),[t,e]),l=ds.useCallback((e=>{switch(e){case"pdf":return"📄";case"doc":case"docx":return"📝";case"xls":case"xlsx":return"📊";case"ppt":case"pptx":return"📽️";case"txt":return"📃";case"zip":case"rar":return"🗜️";case"jpg":case"jpeg":case"png":case"gif":return"🖼️";default:return"📁"}}),[]),c=ds.useCallback((e=>{switch(e){case"pdf":return"PDF Document";case"doc":case"docx":return"Word Document";case"xls":case"xlsx":return"Excel Spreadsheet";case"ppt":case"pptx":return"PowerPoint Presentation";case"txt":return"Text File";case"zip":case"rar":return"Archive File";case"jpg":case"jpeg":case"png":case"gif":return"Image File";default:return"Document"}}),[]),d=ds.useMemo((()=>t||e.split("/").pop()||"document"),[t,e]),u=ds.useMemo((()=>o(e)),[o,e]),f=ds.useMemo((()=>["jpg","jpeg","png","gif","webp"].includes(u)),[u]),m=ds.useCallback((()=>{r(!1),i(!1)}),[]),p=ds.useCallback((()=>{r(!1),i(!0)}),[]);return e?vs.jsxs("div",{className:"mt-2 p-2 bg-secondary/20 rounded border",children:[vs.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[vs.jsx("span",{className:"text-lg",children:l(u)}),vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsx("div",{className:"text-xs font-medium truncate",children:d}),vs.jsx("div",{className:"text-xs text-muted-foreground",children:c(u)})]})]}),f?vs.jsxs("div",{className:"relative",children:[a&&vs.jsxs("div",{className:"flex items-center justify-center py-8 bg-black/5 rounded",children:[vs.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-amber-600"}),vs.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:n("flow_builder.preview.loading_image","Loading image...")})]}),s&&vs.jsx("div",{className:"flex items-center justify-center py-8 bg-black/5 rounded text-red-500",children:vs.jsx("span",{className:"text-xs",children:n("flow_builder.preview.failed_image","Failed to load image")})}),vs.jsx("img",{src:e,alt:d,className:"w-full max-h-32 object-cover rounded "+(a?"hidden":""),onLoad:m,onError:p})]}):vs.jsxs("div",{className:"flex items-center justify-between p-2 bg-secondary/30 rounded",children:[vs.jsx("span",{className:"text-xs text-muted-foreground",children:n("flow_builder.preview.click_to_download","Click to download/view")}),vs.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-xs px-2 py-1 bg-primary text-primary-foreground rounded hover:bg-primary/80",children:n("flow_builder.preview.open_document","Open")})]})]}):null}));function _8({id:e,onDuplicate:t,onDelete:n}){const{t:a}=mk();return vs.jsxs("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>t(e),children:vs.jsx(Ub,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:a("flow_builder.duplicate_node","Duplicate node")})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>n(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:a("flow_builder.delete_node","Delete node")})})]})})]})}const I8=ds.createContext(null);const A8={MESSAGE_CONTAINS:"Message Contains",EXACT_MATCH:"Exact Match",REGEX_MATCH:"Regex Match",MESSAGE_STARTS_WITH:"Message Starts With",MESSAGE_ENDS_WITH:"Message Ends With",HAS_MEDIA:"Has Media",MEDIA_TYPE:"Media Type Is",TIME_BASED:"Time Condition",CONTACT_ATTRIBUTE:"Contact Attribute",CUSTOM:"Custom Expression"},E8=["image","video","audio","document","sticker"];function L8(e){switch(e){case"contains":return"contains";case"exact":return"exactly matches";case"regex":return"matches pattern";case"media":return"has media attachment";default:return""}}function T8(e){switch(e){case"contains":return"help, support, etc.";case"exact":return"Hello world";case"regex":return"\\b\\w+\\b";default:return""}}const D8={message:function({data:e,isConnectable:t,id:n}){const{t:a}=mk(),[r,s]=cs.useState(!1),[i,o]=cs.useState(e.message||a("flow_builder.default_message","Hello! How can I help you?")),{setNodes:l}=f1(),c=B8(),d=[{name:"contact.name",description:a("flow_builder.var_contact_name","Contact's name")},{name:"contact.phone",description:a("flow_builder.var_contact_phone","Contact's phone number")},{name:"message.content",description:a("flow_builder.var_message_content","Received message content")},{name:"date.today",description:a("flow_builder.var_date_today","Current date")},{name:"time.now",description:a("flow_builder.var_time_now","Current time")},{name:"availability",description:a("flow_builder.var_availability","Google Calendar availability data from previous node")}],u=cs.useCallback((e=>{l((t=>t.map((t=>t.id===n?{...t,data:{...t.data,...e}}:t))))}),[n,l]);return vs.jsxs("div",{className:"node-message p-3 rounded-lg bg-white border border-border shadow-sm max-w-[250px] group",children:[c&&vs.jsx(_8,{id:n,onDuplicate:c.onDuplicateNode,onDelete:c.onDeleteNode}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(vw,{className:"h-4 w-4 text-primary"}),vs.jsx("span",{children:a("flow_builder.send_message","Send Message")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground",onClick:()=>s(!r),children:r?a("common.done","Done"):a("common.edit","Edit")})]}),r?vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("textarea",{id:`message-textarea-${n}`,className:"w-full p-2 text-sm border rounded min-h-[80px] resize-none",value:i,onChange:e=>{const t=e.target.value;o(t),u({message:t})},placeholder:a("flow_builder.type_message_placeholder","Type your message here...")}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-xs font-medium mb-1",children:a("flow_builder.insert_variable","Insert Variable:")}),vs.jsx("div",{className:"flex flex-wrap gap-1",children:d.map((e=>vs.jsx("button",{className:"text-xs px-2 py-1 bg-secondary rounded hover:bg-secondary/80",title:e.description,onClick:()=>(e=>{const t=document.getElementById(`message-textarea-${n}`);if(!t)return;const a=t.selectionStart,r=`{{${e}}}`,s=i.substring(0,a)+r+i.substring(a);o(s),u({message:s}),setTimeout((()=>{t.focus(),t.setSelectionRange(a+r.length,a+r.length)}),0)})(e.name),children:e.name},e.name)))})]}),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:a("flow_builder.variables_help","Variables will be replaced with actual values when message is sent.")})]}):vs.jsx("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:(e=>{const t=/\{\{([^}]+)\}\}/g;if(!t.test(e))return e;const n=[];let a,r=0;for(t.lastIndex=0;null!==(a=t.exec(e));)a.index>r&&n.push(e.substring(r,a.index)),n.push(vs.jsx("span",{className:"bg-primary/10 text-primary px-1 rounded",children:a[0]},a.index)),r=a.index+a[0].length;return r<e.length&&n.push(e.substring(r)),n})(i)}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:t})]})},condition:function({data:e,isConnectable:t,id:n}){const{t:a}=mk(),[r,s]=cs.useState(!1),[i,o]=cs.useState(e.conditionType||A8.MESSAGE_CONTAINS),[l,c]=cs.useState(e.conditionValue||""),[d,u]=cs.useState(e.caseSensitive||!1),[f,m]=cs.useState(e.mediaType||E8[0]),[p,h]=cs.useState(e.timeOperator||"after"),[g,x]=cs.useState(e.timeValue||""),[y,v]=cs.useState(e.contactAttribute||"name"),[b,w]=cs.useState(e.attributeValue||""),[j,N]=cs.useState(e.advancedMode||!1),[C,S]=cs.useState(e.customCondition||"Contains('hello')"),[k,M]=cs.useState(e.condition||"Contains('hello')"),{setNodes:_}=f1(),I=B8(),A=cs.useCallback((e=>{_((t=>t.map((t=>t.id===n?{...t,data:{...t.data,...e}}:t))))}),[n,_]),E=cs.useCallback((()=>{let e="";if(j)e=C;else switch(i){case A8.MESSAGE_CONTAINS:e=`Contains('${l}'${d?", true":""})`;break;case A8.EXACT_MATCH:e=`ExactMatch('${l}'${d?", true":""})`;break;case A8.REGEX_MATCH:e=`RegexMatch('${l}')`;break;case A8.MESSAGE_STARTS_WITH:e=`StartsWith('${l}'${d?", true":""})`;break;case A8.MESSAGE_ENDS_WITH:e=`EndsWith('${l}'${d?", true":""})`;break;case A8.HAS_MEDIA:e="HasMedia()";break;case A8.MEDIA_TYPE:e=`MediaType('${f}')`;break;case A8.TIME_BASED:e=`Time${p.charAt(0).toUpperCase()+p.slice(1)}('${g}')`;break;case A8.CONTACT_ATTRIBUTE:e=`Contact.${y} == '${b}'`;break;default:e=`Contains('${l}')`}M(e),A({condition:e,conditionType:i,conditionValue:l,caseSensitive:d,mediaType:f,timeOperator:p,timeValue:g,contactAttribute:y,attributeValue:b,advancedMode:j,customCondition:C})}),[j,i,l,d,f,p,g,y,b,C,A]),L=e=>{c(e.target.value)},T=e=>{x(e.target.value)},D=e=>{S(e.target.value)};return vs.jsxs("div",{className:"node-condition p-3 rounded-lg bg-white border border-border shadow-sm max-w-[280px] group",children:[I&&vs.jsx(_8,{id:n,onDuplicate:I.onDuplicateNode,onDelete:I.onDeleteNode}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(Lb,{className:"h-4 w-4 text-amber-500"}),vs.jsx("span",{children:a("flow_builder.condition","Condition")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground",onClick:()=>r?(E(),void s(!1)):s(!0),children:r?a("common.done","Done"):a("common.edit","Edit")})]}),r?vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("label",{className:"text-xs font-medium",children:a("flow_builder.condition_type","Condition Type:")}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("span",{className:"text-xs",children:a("flow_builder.advanced","Advanced")}),vs.jsx(L4,{checked:j,onCheckedChange:N,className:"scale-75"})]})]}),!j&&vs.jsx("select",{className:"w-full p-2 text-sm border rounded",value:i,onChange:e=>{o(e.target.value)},children:Object.entries(A8).map((([e,t])=>vs.jsx("option",{value:t,children:t},e)))}),(()=>{if(j)return vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("input",{className:"w-full p-2 text-sm border rounded",value:C,onChange:D,placeholder:a("flow_builder.enter_custom_condition","Enter custom condition")}),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:a("flow_builder.condition_examples","Examples: Contains('help'), IsMedia(), ExactMatch('hello')")})]});switch(i){case A8.MESSAGE_CONTAINS:case A8.EXACT_MATCH:case A8.REGEX_MATCH:case A8.MESSAGE_STARTS_WITH:case A8.MESSAGE_ENDS_WITH:return vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("input",{className:"w-full p-2 text-sm border rounded",value:l,onChange:L,placeholder:a("flow_builder.enter_text_value","Enter text value")}),i!==A8.REGEX_MATCH&&vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("input",{type:"checkbox",id:`case-sensitive-${n}`,checked:d,onChange:e=>u(e.target.checked)}),vs.jsx("label",{htmlFor:`case-sensitive-${n}`,className:"text-xs",children:a("flow_builder.case_sensitive","Case sensitive")})]})]});case A8.HAS_MEDIA:return vs.jsx("div",{className:"text-xs text-muted-foreground",children:a("flow_builder.has_media_desc","Checks if the message has any attached media.")});case A8.MEDIA_TYPE:return vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("select",{className:"w-full p-2 text-sm border rounded",value:f,onChange:e=>m(e.target.value),children:E8.map((e=>vs.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))}),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:a("flow_builder.media_type_desc","Checks if the message contains media of the selected type.")})]});case A8.TIME_BASED:return vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("div",{className:"flex items-center gap-2",children:vs.jsxs("select",{className:"flex-1 p-2 text-sm border rounded",value:p,onChange:e=>h(e.target.value),children:[vs.jsx("option",{value:"before",children:a("flow_builder.before","Before")}),vs.jsx("option",{value:"after",children:a("flow_builder.after","After")}),vs.jsx("option",{value:"between",children:a("flow_builder.between","Between")})]})}),vs.jsx("input",{className:"w-full p-2 text-sm border rounded",value:g,onChange:T,placeholder:"between"===p?"09:00,17:00":"09:00",type:"text"}),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:"between"===p?a("flow_builder.time_format_between","Use format: HH:MM,HH:MM (24h)"):a("flow_builder.time_format_single","Use format: HH:MM (24h)")})]});case A8.CONTACT_ATTRIBUTE:return vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("div",{className:"flex items-center gap-2",children:vs.jsxs("select",{className:"flex-1 p-2 text-sm border rounded",value:y,onChange:e=>v(e.target.value),children:[vs.jsx("option",{value:"name",children:a("flow_builder.name","Name")}),vs.jsx("option",{value:"phone",children:a("flow_builder.phone","Phone")}),vs.jsx("option",{value:"email",children:a("flow_builder.email","Email")}),vs.jsx("option",{value:"tags",children:a("flow_builder.tags","Tags")})]})}),vs.jsx("input",{className:"w-full p-2 text-sm border rounded",value:b,onChange:e=>w(e.target.value),placeholder:a("flow_builder.attribute_value","Attribute value")})]});default:return null}})()]}):vs.jsx("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:(()=>{if(j)return C;switch(i){case A8.MESSAGE_CONTAINS:return`Message contains: "${l}"${d?" (case sensitive)":""}`;case A8.EXACT_MATCH:return`Message exactly matches: "${l}"${d?" (case sensitive)":""}`;case A8.REGEX_MATCH:return`Message matches regex: "${l}"`;case A8.MESSAGE_STARTS_WITH:return`Message starts with: "${l}"${d?" (case sensitive)":""}`;case A8.MESSAGE_ENDS_WITH:return`Message ends with: "${l}"${d?" (case sensitive)":""}`;case A8.HAS_MEDIA:return"Message has media attachment";case A8.MEDIA_TYPE:return`Media type is: ${f}`;case A8.TIME_BASED:return`Time is ${p}: ${g}`;case A8.CONTACT_ATTRIBUTE:return`Contact ${y} is: "${b}"`;default:return k}})()}),vs.jsxs("div",{className:"flex mt-2 text-xs justify-between",children:[vs.jsxs("div",{className:"text-green-600",children:[a("flow_builder.yes","Yes")," →"]}),vs.jsxs("div",{className:"text-red-500",children:[a("flow_builder.no","No")," →"]})]}),vs.jsx(_0,{type:"target",position:WX.Top,style:D4,isConnectable:t}),vs.jsx(_0,{type:"source",position:WX.Bottom,id:"yes",style:P4,isConnectable:t}),vs.jsx(_0,{type:"source",position:WX.Bottom,id:"no",style:O4,isConnectable:t})]})},trigger:function({data:e,isConnectable:t,id:n}){const{t:a}=mk(),[r,s]=cs.useState(!1),[i,o]=cs.useState(e.conditionType||"any"),[l,c]=cs.useState(e.conditionValue||""),[d,u]=cs.useState(e.hardResetKeyword||""),[f,m]=cs.useState(e.hardResetConfirmationMessage||"Bot has been reactivated. Starting fresh conversation..."),{setNodes:p}=f1(),h=B8(),g=[{value:"any",label:a("flow_builder.any_message","Any Message")},{value:"contains",label:a("flow_builder.contains_word","Contains Word")},{value:"exact",label:a("flow_builder.exact_match","Exact Match")},{value:"regex",label:a("flow_builder.regex_pattern","Regex Pattern")},{value:"media",label:a("flow_builder.has_media","Has Media")}],x=cs.useCallback((e=>{p((t=>t.map((t=>t.id===n?{...t,data:{...t.data,...e}}:t))))}),[n,p]);return vs.jsxs("div",{className:"node-trigger p-3 rounded-lg bg-white border border-border shadow-sm max-w-[250px] group",children:[h&&vs.jsx("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>h.onDeleteNode(n),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Delete node"})})]})})}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(vw,{className:"h-4 w-4 text-green-500"}),vs.jsx("span",{children:a("flow_builder.message_received","Message Received")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground",onClick:()=>s(!r),children:r?a("common.hide","Hide"):a("common.edit","Edit")})]}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[vs.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:a("flow_builder.when","When")}),vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsx("span",{className:"font-medium",children:e.channel||"WhatsApp"})," ",a("flow_builder.message_lowercase","message")]}),"any"!==e.conditionType&&vs.jsxs("div",{className:"mt-1 text-xs flex flex-wrap gap-1",children:[vs.jsxs("span",{children:[a("flow_builder.that","that")," ",L8(e.conditionType)]}),e.conditionValue&&vs.jsxs("span",{className:"font-medium bg-primary/10 rounded px-1",children:['"',e.conditionValue,'"']})]}),e.hardResetKeyword&&vs.jsxs("div",{className:"mt-1 text-xs flex flex-wrap gap-1",children:[vs.jsxs("span",{className:"text-orange-600",children:[a("flow_builder.hard_reset_label","Hard Reset"),":"]}),vs.jsxs("span",{className:"font-medium bg-orange-100 text-orange-700 rounded px-1",children:['"',e.hardResetKeyword,'"']})]})]}),r&&vs.jsxs("div",{className:"mt-3 text-xs space-y-2 p-2 border rounded bg-secondary/10",children:[vs.jsxs("div",{children:[vs.jsx("label",{className:"block mb-1 font-medium",children:"Condition Type"}),vs.jsx("select",{className:"w-full p-1 border rounded bg-background text-xs",value:i,onChange:e=>{const t=e.target.value;o(t),"media"===t||"media"===i?(c(""),x({conditionType:t,conditionValue:""})):x({conditionType:t})},children:g.map((e=>vs.jsx("option",{value:e.value,children:e.label},e.value)))})]}),"any"!==i&&"media"!==i&&vs.jsxs("div",{children:[vs.jsx("label",{className:"block mb-1 font-medium",children:"contains"===i?"Word or Phrase":"exact"===i?"Exact Text":"Pattern"}),vs.jsx("input",{className:"w-full p-1 border rounded bg-background text-xs",placeholder:T8(i),value:l,onChange:e=>{const t=e.target.value;c(t),x({conditionValue:t})}})]}),vs.jsxs("div",{className:"border-t pt-2 mt-2",children:[vs.jsx("label",{className:"block mb-1 font-medium text-orange-600",children:a("flow_builder.hard_reset_keyword","Hard Reset Keyword")}),vs.jsx("input",{className:"w-full p-1 border rounded bg-background text-xs",placeholder:a("flow_builder.hard_reset_keyword_placeholder","reset, restart, newchat, etc."),value:d,onChange:e=>{const t=e.target.value;u(t),x({hardResetKeyword:t})}}),vs.jsx("div",{className:"text-[9px] text-muted-foreground mt-1",children:a("flow_builder.hard_reset_keyword_help","When bot is disabled, users can type this keyword to re-enable the bot and start fresh")})]}),d&&vs.jsxs("div",{children:[vs.jsx("label",{className:"block mb-1 font-medium text-orange-600",children:a("flow_builder.hard_reset_confirmation_message","Reset Confirmation Message")}),vs.jsx("textarea",{className:"w-full p-1 border rounded bg-background text-xs h-12 resize-none",placeholder:a("flow_builder.hard_reset_confirmation_placeholder","Bot has been reactivated. Starting fresh conversation..."),value:f,onChange:e=>{const t=e.target.value;m(t),x({hardResetConfirmationMessage:t})}}),vs.jsx("div",{className:"text-[9px] text-muted-foreground mt-1",children:a("flow_builder.hard_reset_confirmation_help","Message sent to user when hard reset is triggered")})]}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:a("flow_builder.changes_saved_automatically","Changes are saved automatically when you save the flow.")})]}),vs.jsx(_0,{type:"source",position:WX.Bottom,style:D4,isConnectable:t})]})},image:function({data:e,isConnectable:t,id:n}){const{t:a}=mk(),{toast:r}=Fy(),[s,i]=cs.useState(!1),[o,l]=cs.useState(e.mediaUrl||""),[c,d]=cs.useState(e.caption||""),[u,f]=cs.useState(0),[m,p]=cs.useState(!1),{setNodes:h}=f1(),g=B8(),x=cs.useCallback((e=>{h((t=>t.map((t=>t.id===n?{...t,data:{...t.data,...e}}:t))))}),[n,h]);return vs.jsxs("div",{className:"node-image p-3 rounded-lg bg-white border border-border shadow-sm max-w-[250px] relative group",children:[g&&vs.jsx(_8,{id:n,onDuplicate:g.onDuplicateNode,onDelete:g.onDeleteNode}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(iw,{className:"h-4 w-4 text-blue-500"}),vs.jsx("span",{children:a("flow_builder.send_image","Send Image")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground",onClick:()=>i(!s),children:s?a("common.done","Done"):a("common.edit","Edit")})]}),s?vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs font-medium mb-1 block",children:a("flow_builder.image_label","Image:")}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(T3,{onFileSelected:async e=>{if(!e)return void r({title:a("flow_builder.error.no_file","No file selected"),description:a("flow_builder.error.no_file_desc","Please select a file to upload"),variant:"destructive"});if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml"].includes(e.type))return void r({title:a("flow_builder.error.invalid_file_type","Invalid file type"),description:a("flow_builder.error.invalid_image_type","Please select a valid image file (JPEG, PNG, GIF, WebP, SVG)"),variant:"destructive"});if(e.size>31457280)r({title:a("flow_builder.error.file_too_large","File too large"),description:a("flow_builder.error.max_file_size","Maximum file size is 30MB"),variant:"destructive"});else{p(!0),f(0);try{const t=new FormData;t.append("file",e),t.append("type","image");const n=new XMLHttpRequest;n.upload.addEventListener("progress",(e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);f(t)}})),n.addEventListener("load",(()=>{if(p(!1),!(n.status>=200&&n.status<300)){let t="Upload failed";try{const e=JSON.parse(n.responseText);t=e.error||e.message||t}catch(e){}throw new Error(t)}try{const e=JSON.parse(n.responseText);if(!e.url)throw new Error("Invalid response: missing URL");l(e.url),x({mediaUrl:e.url,originalName:e.originalName,mimetype:e.mimetype,size:e.size}),r({title:a("flow_builder.success.upload_complete","Upload complete"),description:a("flow_builder.success.image_uploaded","Image uploaded successfully")})}catch(t){throw new Error("Invalid server response")}})),n.addEventListener("error",(()=>{throw p(!1),new Error("Network error during upload")})),n.addEventListener("timeout",(()=>{throw p(!1),new Error("Upload timeout")})),n.timeout=6e4,n.open("POST","/api/upload"),n.send(t)}catch(t){p(!1),r({title:a("flow_builder.error.upload_failed","Upload failed"),description:t instanceof Error?t.message:a("flow_builder.error.upload_error","An error occurred while uploading the file"),variant:"destructive"})}}},fileType:"image/*",maxSize:30,className:"w-full",showProgress:m,progress:u}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-1",children:a("flow_builder.or_enter_image_url","Or enter image URL:")}),vs.jsx("input",{className:"w-full p-2 text-xs border rounded",value:o,onChange:e=>{const t=e.target.value;l(t),x({mediaUrl:t,originalName:"",mimetype:"",size:0})},placeholder:a("flow_builder.enter_image_url","Enter image URL or path")}),o&&vs.jsx("button",{className:"w-full mt-2 px-3 py-1 text-xs bg-red-100 text-red-700 border border-red-300 rounded hover:bg-red-200 transition-colors",onClick:()=>{l(""),x({mediaUrl:"",originalName:"",mimetype:"",size:0}),r({title:a("flow_builder.success.image_removed","Image removed"),description:a("flow_builder.success.image_removed_desc","Image has been removed from the node")})},children:a("flow_builder.remove_image","Remove Image")})]})]}),vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs font-medium mb-1 block",children:a("flow_builder.caption_optional","Caption (optional):")}),vs.jsx("textarea",{id:`caption-textarea-${n}`,className:"w-full p-2 text-sm border rounded min-h-[60px] resize-none",value:c,onChange:e=>{const t=e.target.value;d(t),x({caption:t})},placeholder:a("flow_builder.add_caption_image","Add a caption to your image...")})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-xs font-medium mb-1",children:a("flow_builder.insert_variable_caption","Insert Variable in Caption:")}),vs.jsx("div",{className:"flex flex-wrap gap-1",children:[{name:"contact.name",description:"Contact's name"},{name:"contact.phone",description:"Contact's phone number"},{name:"date.today",description:"Current date"},{name:"time.now",description:"Current time"}].map((e=>vs.jsx("button",{className:"text-xs px-2 py-1 bg-secondary rounded hover:bg-secondary/80",title:e.description,onClick:()=>(e=>{const t=document.getElementById(`caption-textarea-${n}`);if(!t)return;const a=t.selectionStart,r=`{{${e}}}`,s=c.substring(0,a)+r+c.substring(a);d(s),x({caption:s}),setTimeout((()=>{t.focus(),t.setSelectionRange(a+r.length,a+r.length)}),0)})(e.name),children:e.name},e.name)))})]})]}):vs.jsxs("div",{className:"space-y-2",children:[o?vs.jsx("div",{className:"relative aspect-video bg-secondary/40 rounded overflow-hidden flex items-center justify-center",children:vs.jsx("img",{src:o,alt:"Message attachment",className:"max-w-full max-h-full object-contain",onError:e=>{e.target.src="https://placehold.co/400x300?text=Invalid+Image+URL"}})}):vs.jsx("div",{className:"aspect-video bg-secondary/40 rounded flex items-center justify-center text-muted-foreground",children:vs.jsx("div",{className:"text-center text-xs",children:a("flow_builder.no_image_provided","No image provided")})}),c&&vs.jsxs(vs.Fragment,{children:[vs.jsx("div",{className:"text-xs text-muted-foreground",children:a("flow_builder.caption_label","Caption:")}),vs.jsx("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:(e=>{const t=/\{\{([^}]+)\}\}/g;if(!t.test(e))return e;const n=[];let a,r=0;for(t.lastIndex=0;null!==(a=t.exec(e));)a.index>r&&n.push(e.substring(r,a.index)),n.push(vs.jsx("span",{className:"bg-primary/10 text-primary px-1 rounded",children:a[0]},a.index)),r=a.index+a[0].length;return r<e.length&&n.push(e.substring(r)),n})(c)})]})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:t})]})},video:function({data:e,isConnectable:t,id:n}){const{t:a}=mk(),[r,s]=cs.useState(!1),[i,o]=cs.useState(e.mediaUrl||""),[l,c]=cs.useState(e.caption||a("flow_builder.default_video_caption","Watch this video!")),[d,u]=cs.useState(!1),[f,m]=cs.useState(0),[p,h]=cs.useState(!1),{setNodes:g}=f1(),x=B8(),y=cs.useCallback((e=>{g((t=>t.map((t=>t.id===n?{...t,data:{...t.data,...e}}:t))))}),[n,g]);return vs.jsxs("div",{className:"node-video p-3 rounded-lg bg-white border border-border shadow-sm max-w-[250px] relative group",children:[x&&vs.jsx(_8,{id:n,onDuplicate:x.onDuplicateNode,onDelete:x.onDeleteNode}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(Xb,{className:"h-4 w-4 text-red-500"}),vs.jsx("span",{children:a("flow_builder.send_video","Send Video")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground",onClick:()=>s(!r),children:r?a("common.done","Done"):a("common.edit","Edit")})]}),r?vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs font-medium mb-1 block",children:a("flow_builder.video_url_label","Video URL:")}),vs.jsx("input",{className:"w-full p-2 text-sm border rounded",value:i,onChange:e=>{const t=e.target.value;o(t),y({mediaUrl:t})},placeholder:a("flow_builder.enter_video_url","Enter video URL or path")}),vs.jsx("div",{className:"mt-2",children:vs.jsx(T3,{onFileSelected:async e=>{if(e){u(!0),m(0);try{const t=new FormData;t.append("file",e),t.append("type","video");const n=new XMLHttpRequest;n.upload.addEventListener("progress",(e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);m(t)}})),n.addEventListener("load",(()=>{if(!(n.status>=200&&n.status<300))throw new Error("Upload failed");{const e=JSON.parse(n.responseText);o(e.url),y({mediaUrl:e.url}),u(!1)}})),n.addEventListener("error",(()=>{throw new Error("Upload failed")})),n.open("POST","/api/upload"),n.send(t)}catch(t){u(!1)}}},fileType:"video/*",maxSize:30,className:"w-full",showProgress:d,progress:f})}),i&&vs.jsxs("button",{className:"w-full mt-2 px-3 py-2 text-xs bg-red-100 text-red-700 border border-red-300 rounded hover:bg-red-200 transition-colors flex items-center justify-center gap-2",onClick:()=>h(!p),children:[vs.jsx(Xb,{className:"h-3 w-3"}),p?a("flow_builder.hide_preview","Hide Preview"):a("flow_builder.preview_video","Preview Video")]}),i&&p&&vs.jsx(k8,{url:i})]}),vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs font-medium mb-1 block",children:a("flow_builder.caption_optional","Caption (optional):")}),vs.jsx("textarea",{id:`video-caption-textarea-${n}`,className:"w-full p-2 text-sm border rounded min-h-[60px] resize-none",value:l,onChange:e=>{const t=e.target.value;c(t),y({caption:t})},placeholder:a("flow_builder.add_caption_video","Add a caption to your video...")})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-xs font-medium mb-1",children:a("flow_builder.insert_variable_caption","Insert Variable in Caption:")}),vs.jsx("div",{className:"flex flex-wrap gap-1",children:[{name:"contact.name",description:"Contact's name"},{name:"contact.phone",description:"Contact's phone number"},{name:"date.today",description:"Current date"},{name:"time.now",description:"Current time"}].map((e=>vs.jsx("button",{className:"text-xs px-2 py-1 bg-secondary rounded hover:bg-secondary/80",title:e.description,onClick:()=>(e=>{const t=document.getElementById(`video-caption-textarea-${n}`);if(!t)return;const a=t.selectionStart,r=`{{${e}}}`,s=l.substring(0,a)+r+l.substring(a);c(s),y({caption:s}),setTimeout((()=>{t.focus(),t.setSelectionRange(a+r.length,a+r.length)}),0)})(e.name),children:e.name},e.name)))})]})]}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("div",{className:"text-xs text-muted-foreground",children:a("flow_builder.video_url_label","Video URL:")}),vs.jsx("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border truncate",children:i||a("flow_builder.no_url_provided","No URL provided")}),i&&vs.jsxs("button",{className:"w-full mt-2 px-3 py-2 text-xs bg-red-100 text-red-700 border border-red-300 rounded hover:bg-red-200 transition-colors flex items-center justify-center gap-2",onClick:()=>h(!p),children:[vs.jsx(Xb,{className:"h-3 w-3"}),p?a("flow_builder.hide_preview","Hide Preview"):a("flow_builder.preview_video","Preview Video")]}),i&&p&&vs.jsx(k8,{url:i}),l&&vs.jsxs(vs.Fragment,{children:[vs.jsx("div",{className:"text-xs text-muted-foreground",children:a("flow_builder.caption_label","Caption:")}),vs.jsx("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:(e=>{const t=/\{\{([^}]+)\}\}/g;if(!t.test(e))return e;const n=[];let a,r=0;for(t.lastIndex=0;null!==(a=t.exec(e));)a.index>r&&n.push(e.substring(r,a.index)),n.push(vs.jsx("span",{className:"bg-primary/10 text-primary px-1 rounded",children:a[0]},a.index)),r=a.index+a[0].length;return r<e.length&&n.push(e.substring(r)),n})(l)})]})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:t})]})},audio:function({data:e,isConnectable:t,id:n}){const{t:a}=mk(),[r,s]=cs.useState(!1),[i,o]=cs.useState(e.mediaUrl||""),[l,c]=cs.useState(!1),[d,u]=cs.useState(0),[f,m]=cs.useState(!1),{setNodes:p}=f1(),h=B8(),g=cs.useCallback((e=>{p((t=>t.map((t=>t.id===n?{...t,data:{...t.data,...e}}:t))))}),[n,p]);return vs.jsxs("div",{className:"node-audio p-3 rounded-lg bg-white border border-border shadow-sm max-w-[250px] relative group",children:[h&&vs.jsx(_8,{id:n,onDuplicate:h.onDuplicateNode,onDelete:h.onDeleteNode}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(Kb,{className:"h-4 w-4 text-purple-500"}),vs.jsx("span",{children:a("flow_builder.send_audio","Send Audio")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground",onClick:()=>s(!r),children:r?a("common.done","Done"):a("common.edit","Edit")})]}),r?vs.jsx("div",{className:"space-y-2",children:vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs font-medium mb-1 block",children:a("flow_builder.audio_url_label","Audio URL:")}),vs.jsx("input",{className:"w-full p-2 text-sm border rounded",value:i,onChange:e=>{const t=e.target.value;o(t),g({mediaUrl:t})},placeholder:a("flow_builder.enter_audio_url","Enter audio URL or path")}),vs.jsx("div",{className:"mt-2",children:vs.jsx(T3,{onFileSelected:async e=>{if(e){c(!0),u(0);try{const t=new FormData;t.append("file",e),t.append("type","audio");const n=new XMLHttpRequest;n.upload.addEventListener("progress",(e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);u(t)}})),n.addEventListener("load",(()=>{if(!(n.status>=200&&n.status<300))throw new Error("Upload failed");{const e=JSON.parse(n.responseText);o(e.url),g({mediaUrl:e.url}),c(!1)}})),n.addEventListener("error",(()=>{throw new Error("Upload failed")})),n.open("POST","/api/upload"),n.send(t)}catch(t){c(!1)}}},fileType:"audio/*",maxSize:30,className:"w-full",showProgress:l,progress:d})}),i&&vs.jsxs("button",{className:"w-full mt-2 px-3 py-2 text-xs bg-purple-100 text-purple-700 border border-purple-300 rounded hover:bg-purple-200 transition-colors flex items-center justify-center gap-2",onClick:()=>m(!f),children:[vs.jsx(Kb,{className:"h-3 w-3"}),f?a("flow_builder.hide_preview","Hide Preview"):a("flow_builder.preview_audio","Preview Audio")]}),i&&f&&vs.jsx(S8,{url:i})]})}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("div",{className:"text-xs text-muted-foreground",children:a("flow_builder.audio_url_label","Audio URL:")}),vs.jsx("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border truncate",children:i||a("flow_builder.no_url_provided","No URL provided")}),i&&vs.jsxs("button",{className:"w-full mt-2 px-3 py-2 text-xs bg-purple-100 text-purple-700 border border-purple-300 rounded hover:bg-purple-200 transition-colors flex items-center justify-center gap-2",onClick:()=>m(!f),children:[vs.jsx(Kb,{className:"h-3 w-3"}),f?a("flow_builder.hide_preview","Hide Preview"):a("flow_builder.preview_audio","Preview Audio")]}),i&&f&&vs.jsx(S8,{url:i})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:t})]})},document:function({data:e,isConnectable:t,id:n}){const{t:a}=mk(),[r,s]=cs.useState(!1),[i,o]=cs.useState(e.mediaUrl||""),[l,c]=cs.useState(e.fileName||""),[d,u]=cs.useState(e.caption||a("flow_builder.default_document_caption","Check out this document!")),[f,m]=cs.useState(!1),[p,h]=cs.useState(0),[g,x]=cs.useState(!1),{setNodes:y}=f1(),v=B8(),b=cs.useCallback((e=>{y((t=>t.map((t=>t.id===n?{...t,data:{...t.data,...e}}:t))))}),[n,y]);return vs.jsxs("div",{className:"node-document p-3 rounded-lg bg-white border border-border shadow-sm max-w-[250px] relative group",children:[v&&vs.jsx(_8,{id:n,onDuplicate:v.onDuplicateNode,onDelete:v.onDeleteNode}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(ew,{className:"h-4 w-4 text-amber-600"}),vs.jsx("span",{children:a("flow_builder.send_document","Send Document")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground",onClick:()=>s(!r),children:r?a("common.done","Done"):a("common.edit","Edit")})]}),r?vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs font-medium mb-1 block",children:a("flow_builder.document_url_label","Document URL:")}),vs.jsx("input",{className:"w-full p-2 text-sm border rounded",value:i,onChange:e=>{const t=e.target.value;o(t),b({mediaUrl:t})},placeholder:a("flow_builder.enter_document_url","Enter document URL or path")}),vs.jsx("div",{className:"mt-2",children:vs.jsx(T3,{onFileSelected:async e=>{if(e){m(!0),h(0);try{const t=new FormData;t.append("file",e),t.append("type","document");const n=new XMLHttpRequest;n.upload.addEventListener("progress",(e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);h(t)}})),n.addEventListener("load",(()=>{if(!(n.status>=200&&n.status<300))throw new Error("Upload failed");{const e=JSON.parse(n.responseText);if(o(e.url),b({mediaUrl:e.url}),!l){const t=e.url.split("/"),n=t[t.length-1];n&&(c(n),b({fileName:n}))}m(!1)}})),n.addEventListener("error",(()=>{throw new Error("Upload failed")})),n.open("POST","/api/upload"),n.send(t)}catch(t){m(!1)}}},fileType:"application/*,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt",maxSize:30,className:"w-full",showProgress:f,progress:p})}),i&&vs.jsxs("button",{className:"w-full mt-2 px-3 py-2 text-xs bg-amber-100 text-amber-700 border border-amber-300 rounded hover:bg-amber-200 transition-colors flex items-center justify-center gap-2",onClick:()=>x(!g),children:[vs.jsx(ew,{className:"h-3 w-3"}),g?a("flow_builder.hide_preview","Hide Preview"):a("flow_builder.preview_document","Preview Document")]}),i&&g&&vs.jsx(M8,{url:i,fileName:l})]}),vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs font-medium mb-1 block",children:a("flow_builder.file_name_optional","File Name (optional):")}),vs.jsx("input",{className:"w-full p-2 text-sm border rounded",value:l,onChange:e=>{const t=e.target.value;c(t),b({fileName:t})},placeholder:a("flow_builder.enter_file_name","Enter file name (e.g. report.pdf)")})]}),vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs font-medium mb-1 block",children:a("flow_builder.caption_optional","Caption (optional):")}),vs.jsx("textarea",{id:`doc-caption-textarea-${n}`,className:"w-full p-2 text-sm border rounded min-h-[60px] resize-none",value:d,onChange:e=>{const t=e.target.value;u(t),b({caption:t})},placeholder:a("flow_builder.add_caption_document","Add a caption to your document...")})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-xs font-medium mb-1",children:a("flow_builder.insert_variable_caption","Insert Variable in Caption:")}),vs.jsx("div",{className:"flex flex-wrap gap-1",children:[{name:"contact.name",description:"Contact's name"},{name:"contact.phone",description:"Contact's phone number"},{name:"date.today",description:"Current date"},{name:"time.now",description:"Current time"}].map((e=>vs.jsx("button",{className:"text-xs px-2 py-1 bg-secondary rounded hover:bg-secondary/80",title:e.description,onClick:()=>(e=>{const t=document.getElementById(`doc-caption-textarea-${n}`);if(!t)return;const a=t.selectionStart,r=`{{${e}}}`,s=d.substring(0,a)+r+d.substring(a);u(s),b({caption:s}),setTimeout((()=>{t.focus(),t.setSelectionRange(a+r.length,a+r.length)}),0)})(e.name),children:e.name},e.name)))})]})]}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("div",{className:"text-xs text-muted-foreground",children:a("flow_builder.document_url_label","Document URL:")}),vs.jsx("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border truncate",children:i||a("flow_builder.no_url_provided","No URL provided")}),i&&vs.jsxs("button",{className:"w-full mt-2 px-3 py-2 text-xs bg-amber-100 text-amber-700 border border-amber-300 rounded hover:bg-amber-200 transition-colors flex items-center justify-center gap-2",onClick:()=>x(!g),children:[vs.jsx(ew,{className:"h-3 w-3"}),g?a("flow_builder.hide_preview","Hide Preview"):a("flow_builder.preview_document","Preview Document")]}),i&&g&&vs.jsx(M8,{url:i,fileName:l}),l&&vs.jsxs(vs.Fragment,{children:[vs.jsx("div",{className:"text-xs text-muted-foreground",children:a("flow_builder.file_name_label","File Name:")}),vs.jsx("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border truncate",children:l})]}),d&&vs.jsxs(vs.Fragment,{children:[vs.jsx("div",{className:"text-xs text-muted-foreground",children:a("flow_builder.caption_label","Caption:")}),vs.jsx("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:(e=>{const t=/\{\{([^}]+)\}\}/g;if(!t.test(e))return e;const n=[];let a,r=0;for(t.lastIndex=0;null!==(a=t.exec(e));)a.index>r&&n.push(e.substring(r,a.index)),n.push(vs.jsx("span",{className:"bg-primary/10 text-primary px-1 rounded",children:a[0]},a.index)),r=a.index+a[0].length;return r<e.length&&n.push(e.substring(r)),n})(d)})]})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:t})]})},wait:function({data:e,isConnectable:t,id:n}){const[a,r]=cs.useState(!1),{setNodes:s}=f1(),{onDeleteNode:i,onDuplicateNode:o}=B8(),[l,c]=cs.useState(e.waitMode||"duration"),[d,u]=cs.useState(e.timeValue||5),[f,m]=cs.useState(e.timeUnit||"minutes"),[p,h]=cs.useState(e.waitDate?new Date(e.waitDate):void 0),[g,x]=cs.useState(e.waitTime||"12:00"),[y,v]=cs.useState(e.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone),b=cs.useCallback((e=>{s((t=>t.map((t=>t.id===n?{...t,data:{...t.data,...e}}:t))))}),[n,s]),w=e=>{c(e),b({waitMode:e})},j=e=>e?e.toLocaleDateString():"No date selected";return vs.jsxs("div",{className:"node-wait p-3 rounded-lg bg-white border border-border shadow-sm max-w-[250px] group",children:[vs.jsx(_8,{id:n,onDuplicate:o,onDelete:i}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(Bb,{className:"h-4 w-4 text-orange-500"}),vs.jsx("span",{children:"Wait"}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground",onClick:()=>r(!a),children:a?"Done":"Edit"})]}),a?vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[vs.jsxs(lk,{type:"button",size:"sm",variant:"duration"===l?"default":"outline",onClick:()=>w("duration"),className:"text-xs",children:[vs.jsx(Bb,{className:"h-3 w-3 mr-1"}),"Duration"]}),vs.jsxs(lk,{type:"button",size:"sm",variant:"datetime"===l?"default":"outline",onClick:()=>w("datetime"),className:"text-xs",children:[vs.jsx(C8,{className:"h-3 w-3 mr-1"}),"Schedule"]})]}),"duration"===l?vs.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs text-muted-foreground",children:"Duration"}),vs.jsx("input",{type:"number",min:"1",className:"w-full p-1 border rounded bg-background text-xs",value:d,onChange:e=>{const t=parseInt(e.target.value)||1;u(t),b({timeValue:t})}})]}),vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs text-muted-foreground",children:"Unit"}),vs.jsxs(ZU,{value:f,onValueChange:e=>{m(e),b({timeUnit:e})},children:[vs.jsx(tW,{className:"w-full h-8 text-xs",children:vs.jsx(eW,{placeholder:"Select unit"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"seconds",children:"Seconds"}),vs.jsx(sW,{value:"minutes",children:"Minutes"}),vs.jsx(sW,{value:"hours",children:"Hours"}),vs.jsx(sW,{value:"days",children:"Days"})]})]})]})]}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs text-muted-foreground",children:"Date"}),vs.jsxs(r6,{children:[vs.jsx(s6,{asChild:!0,children:vs.jsxs(lk,{variant:"brand",size:"sm",className:"w-full justify-start text-left font-normal h-8 text-xs",children:[vs.jsx(Nb,{className:"mr-2 h-3 w-3"}),p?j(p):"Select date"]})}),vs.jsx(i6,{className:"w-auto p-0",align:"start",children:vs.jsx(o9,{mode:"single",selected:p,onSelect:e=>{h(e),b({waitDate:e?e.toISOString():null})},initialFocus:!0})})]})]}),vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs text-muted-foreground",children:"Time"}),vs.jsx("input",{type:"time",className:"w-full h-8 p-1 border rounded bg-background text-xs",value:g,onChange:e=>{x(e.target.value),b({waitTime:e.target.value})}})]}),vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs text-muted-foreground",children:"Timezone"}),vs.jsxs(ZU,{value:y,onValueChange:e=>{v(e),b({timezone:e})},children:[vs.jsx(tW,{className:"w-full h-8 text-xs",children:vs.jsx(eW,{placeholder:"Select timezone"})}),vs.jsx(rW,{className:"max-h-[160px]",children:vs.jsx(XU,{children:Intl.supportedValuesOf("timeZone").map((e=>vs.jsx(sW,{value:e,className:"text-xs",children:e.replace("_"," ").split("/").pop()||e},e)))})})]})]})]})]}):vs.jsx("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:"duration"===l?`Wait for ${d} ${f}`:p?`Scheduled for ${j(p)} at ${g} (${(null==(N=y.split("/").pop())?void 0:N.replace("_"," "))||y})`:"Schedule not set"}),vs.jsx(_0,{type:"target",position:WX.Top,style:D4,isConnectable:t}),vs.jsx(_0,{type:"source",position:WX.Bottom,style:D4,isConnectable:t})]});var N},quickreply:function({data:e,isConnectable:t,id:n}){const[a,r]=cs.useState(!1),[s,i]=cs.useState(e.message||"Please select an option to continue:"),[o,l]=cs.useState(e.options||[{text:"I have a question about my order.",value:"order"},{text:"I have a question about a product.",value:"product"},{text:"I have another question.",value:"other"}]),{setNodes:c}=f1(),d=B8(),u=cs.useCallback((e=>{c((t=>t.map((t=>t.id===n?{...t,data:{...t.data,...e}}:t))))}),[n,c]);return vs.jsxs("div",{className:"node-quickreply p-3 rounded-lg bg-white border border-border shadow-sm max-w-[280px] group",children:[d&&vs.jsx(_8,{id:n,onDuplicate:d.onDuplicateNode,onDelete:d.onDeleteNode}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(cw,{className:"h-4 w-4 text-blue-500"}),vs.jsx("span",{children:"Quick Reply Options"}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground",onClick:()=>r(!a),children:a?"Done":"Edit"})]}),a?vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs font-medium mb-1 block",children:"Message:"}),vs.jsx("textarea",{id:`quickreply-textarea-${n}`,className:"w-full p-2 text-sm border rounded min-h-[80px] resize-none",value:s,onChange:e=>{const t=e.target.value;i(t),u({message:t})},placeholder:"Type your message here..."}),vs.jsxs("div",{className:"mt-2",children:[vs.jsx("p",{className:"text-xs font-medium mb-1",children:"Insert Variable:"}),vs.jsx("div",{className:"flex flex-wrap gap-1",children:[{name:"contact.name",description:"Contact's name"},{name:"contact.phone",description:"Contact's phone number"},{name:"date.today",description:"Current date"},{name:"time.now",description:"Current time"}].map((e=>vs.jsx("button",{className:"text-xs px-2 py-1 bg-secondary rounded hover:bg-secondary/80",title:e.description,onClick:()=>(e=>{const t=document.getElementById(`quickreply-textarea-${n}`);if(!t)return;const a=t.selectionStart,r=`{{${e}}}`,o=s.substring(0,a)+r+s.substring(a);i(o),u({message:o}),setTimeout((()=>{t.focus(),t.setSelectionRange(a+r.length,a+r.length)}),0)})(e.name),children:e.name},e.name)))})]})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsx("label",{className:"text-xs font-medium",children:"Options:"}),vs.jsxs(lk,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{const e=[...o,{text:"New option",value:`option${o.length+1}`}];l(e),u({options:e})},disabled:o.length>=10,children:[vs.jsx(Iw,{className:"h-3 w-3 mr-1"}),"Add Option"]})]}),vs.jsx("div",{className:"space-y-4 max-h-[300px] overflow-y-auto pr-1",children:o.map(((e,n)=>vs.jsxs("div",{className:"space-y-2 relative",children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-md bg-blue-500 text-white flex items-center justify-center text-xs font-medium",children:n+1}),vs.jsxs("div",{className:"flex-1 font-medium text-xs",children:["Option ",n+1]}),vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-destructive",onClick:()=>(e=>{const t=o.filter(((t,n)=>n!==e));l(t),u({options:t})})(n),disabled:o.length<=1,children:vs.jsx(yj,{className:"h-3.5 w-3.5"})})]}),vs.jsxs("div",{className:"pl-8 space-y-2",children:[vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs text-muted-foreground block mb-1",children:"Display Text:"}),vs.jsx("input",{className:"w-full p-2 text-sm border rounded",value:e.text,onChange:e=>((e,t)=>{const n=[...o];n[e]={...n[e],text:t},l(n),u({options:n})})(n,e.target.value),placeholder:"Text to display"})]}),vs.jsxs("div",{children:[vs.jsx("label",{className:"text-xs text-muted-foreground block mb-1",children:"Response Value:"}),vs.jsx("input",{className:"w-full p-2 text-sm border rounded",value:e.value,onChange:e=>((e,t)=>{const n=[...o];n[e]={...n[e],value:t},l(n),u({options:n})})(n,e.target.value),placeholder:"Value to match"}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-1",children:"User can respond with this value to select this option"})]})]}),vs.jsx(_0,{type:"source",position:WX.Right,id:`option-${n+1}`,style:{...D4,top:"30px",right:"-12px"},isConnectable:t})]},n)))}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:"Each option will have its own output connection."})]})]}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:(e=>{const t=/\{\{([^}]+)\}\}/g;if(!t.test(e))return e;const n=[];let a,r=0;for(t.lastIndex=0;null!==(a=t.exec(e));)a.index>r&&n.push(e.substring(r,a.index)),n.push(vs.jsx("span",{className:"bg-primary/10 text-primary px-1 rounded",children:a[0]},a.index)),r=a.index+a[0].length;return r<e.length&&n.push(e.substring(r)),n})(s)}),vs.jsx("div",{className:"space-y-1.5 mt-3",children:o.map(((e,n)=>vs.jsxs("div",{className:"flex items-center gap-2 relative",children:[vs.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-md bg-blue-500 text-white flex items-center justify-center text-xs font-medium",children:n+1}),vs.jsxs("div",{className:"text-sm flex-1 pr-6",children:[vs.jsx("div",{children:e.text}),vs.jsxs("div",{className:"text-xs text-muted-foreground",children:['Responds to: "',e.value,'"']})]}),vs.jsx(_0,{type:"source",position:WX.Right,id:`option-${n+1}`,style:{...D4,top:"50%",right:"-12px"},isConnectable:t})]},n)))})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:t})]})},follow_up:function({id:e,data:t,isConnectable:n}){const{t:a}=mk(),[r,s]=cs.useState(!1),[i,o]=cs.useState(t.messageType||"text"),[l,c]=cs.useState(t.messageContent||""),[d,u]=cs.useState(t.mediaUrl||""),[f,m]=cs.useState(t.caption||""),[p,h]=cs.useState(t.templateId),[g,x]=cs.useState(t.triggerEvent||"conversation_start"),[y,v]=cs.useState(t.delayAmount||1),[b,w]=cs.useState(t.delayUnit||"hours"),[j,N]=cs.useState(t.specificDatetime||""),[C,S]=cs.useState(t.timezone||(()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}catch{return"UTC"}})()),[k,M]=cs.useState(t.maxRetries||3),[_,I]=cs.useState(!1),[A,E]=cs.useState(0),{setNodes:L}=f1(),{onDeleteNode:T,onDuplicateNode:D}=B8(),P=[{name:"contact.name",description:a("flow_builder.var_contact_name","Contact's name")},{name:"contact.phone",description:a("flow_builder.var_contact_phone","Contact's phone number")},{name:"contact.email",description:a("flow_builder.var_contact_email","Contact's email address")},{name:"message.content",description:a("flow_builder.var_message_content","Received message content")},{name:"date.today",description:a("flow_builder.var_date_today","Current date")},{name:"time.now",description:a("flow_builder.var_time_now","Current time")},{name:"availability",description:a("flow_builder.var_availability","Google Calendar availability data from previous node")}],O="Thank you for your interest! How can we help you further?",R=cs.useCallback((t=>{L((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,L]);cs.useEffect((()=>{R({messageType:i,messageContent:l,mediaUrl:d,caption:f,templateId:p,triggerEvent:g,delayAmount:y,delayUnit:b,specificDatetime:j,timezone:C,maxRetries:k})}),[R,i,l,d,f,p,g,y,b,j,C,k]);const z=()=>{switch(i){case"image":return vs.jsx(iw,{className:"h-4 w-4"});case"video":return vs.jsx(pj,{className:"h-4 w-4"});case"audio":return vs.jsx(Kb,{className:"h-4 w-4"});case"document":return vs.jsx(Zb,{className:"h-4 w-4"});default:return vs.jsx(vw,{className:"h-4 w-4"})}};return vs.jsxs("div",{className:"node-follow-up rounded-lg bg-white border border-orange-200 shadow-sm max-w-[320px] group relative",children:[vs.jsxs("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>D(e),children:vs.jsx(Ub,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:a("flow_builder.duplicate_node","Duplicate node")})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>T(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:a("flow_builder.delete_node","Delete node")})})]})})]}),vs.jsx("div",{className:"p-3 border-b border-orange-100 bg-orange-50/30",children:vs.jsxs("div",{className:"font-medium flex items-center gap-2",children:[vs.jsx(Bb,{className:"h-4 w-4 text-orange-600"}),vs.jsx("span",{children:a("flow_builder.follow_up_message","Follow-up Message")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>s(!r),children:r?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]})}),vs.jsx("div",{className:(r?"max-h-[500px]":"max-h-[200px]")+" overflow-y-auto custom-scrollbar",children:vs.jsxs("div",{className:"p-3 space-y-3",children:[vs.jsxs("div",{className:"text-sm p-3 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[z(),vs.jsxs("span",{className:"font-medium",children:[i.charAt(0).toUpperCase()+i.slice(1)," ",a("flow_builder.message","Message")]})]}),vs.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Nb,{className:"h-3 w-3"}),vs.jsx("span",{children:(()=>{switch(g){case"conversation_start":default:return a("flow_builder.conversation_start","Conversation Start");case"specific_datetime":return a("flow_builder.specific_datetime","Specific Date/Time");case"relative_delay":return a("flow_builder.relative_delay","Relative Delay")}})()})]}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Bb,{className:"h-3 w-3"}),vs.jsx("span",{children:"specific_datetime"===g?j?new Date(j).toLocaleString():a("flow_builder.no_date_set","No date set"):`${y} ${b}`})]})]}),l&&vs.jsx("div",{className:"text-xs bg-background/80 p-2 rounded border border-border mt-2",children:l.length>50?`${l.substring(0,50)}...`:l})]}),r&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{className:"border rounded-lg p-3 bg-gradient-to-r from-blue-50 to-indigo-50",children:[vs.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[z(),a("flow_builder.message_config","Message Configuration")]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.message_type","Message Type")}),vs.jsxs(ZU,{value:i,onValueChange:e=>o(e),children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"text",children:a("flow_builder.text_message","Text Message")}),vs.jsx(sW,{value:"image",children:a("flow_builder.image","Image")}),vs.jsx(sW,{value:"video",children:a("flow_builder.video","Video")}),vs.jsx(sW,{value:"audio",children:a("flow_builder.audio","Audio")}),vs.jsx(sW,{value:"document",children:a("flow_builder.document","Document")})]})]}),vs.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["text"===i&&a("flow_builder.text_message_desc","Sends a text message with optional variable substitution"),"image"===i&&a("flow_builder.image_message_desc","Sends an uploaded image file with optional caption"),"video"===i&&a("flow_builder.video_message_desc","Sends an uploaded video file with optional caption"),"audio"===i&&a("flow_builder.audio_message_desc","Sends an uploaded audio file (no caption support)"),"document"===i&&a("flow_builder.document_message_desc","Sends an uploaded document file with optional caption")]})]}),"text"===i?vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"space-y-1",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.template","Template")}),vs.jsx(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>{"text"===i&&c(O)},className:"w-full text-xs h-7 justify-start",children:a("flow_builder.use_default_template","Use Default Template")})]}),vs.jsxs("div",{className:"space-y-1",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.message_content","Message Content")}),vs.jsx(TB,{id:`followup-message-textarea-${e}`,placeholder:a("flow_builder.enter_follow_up_message","Enter your follow-up message..."),value:l,onChange:e=>c(e.target.value),className:"text-xs h-20 resize-none"})]}),vs.jsxs("div",{className:"space-y-1",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.insert_variable","Insert Variable:")}),vs.jsx("div",{className:"flex flex-wrap gap-1",children:P.map((t=>vs.jsx("button",{className:"text-[10px] px-2 py-1 bg-secondary rounded hover:bg-secondary/80",title:t.description,onClick:()=>(t=>{const n=document.getElementById(`followup-message-textarea-${e}`);if(!n)return;const a=n.selectionStart,r=`{{${t}}}`,s=l.substring(0,a)+r+l.substring(a);c(s),setTimeout((()=>{n.focus(),n.setSelectionRange(a+r.length,a+r.length)}),0)})(t.name),children:t.name},t.name)))}),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:a("flow_builder.variables_replaced_desc","Variables will be replaced with actual values when message is sent.")})]})]}):vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.upload_media","Upload Media")}),vs.jsx(T3,{onFileSelected:async e=>{I(!0),E(0);const t=new FormData;t.append("file",e);try{const e=new XMLHttpRequest;e.open("POST","/api/upload",!0),e.upload.onprogress=e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);E(t)}},e.onload=()=>{if(I(!1),200===e.status){const t=JSON.parse(e.responseText);u(t.url),zy({title:a("common.upload_complete","Upload complete"),description:a("flow_builder.media_uploaded_successfully","Media uploaded successfully")})}else zy({title:a("common.upload_failed","Upload failed"),description:a("flow_builder.error_uploading_media","There was an error uploading your media"),variant:"destructive"})},e.onerror=()=>{I(!1),zy({title:a("common.upload_failed","Upload failed"),description:a("flow_builder.error_uploading_media","There was an error uploading your media"),variant:"destructive"})},e.send(t)}catch(n){I(!1),zy({title:a("common.upload_failed","Upload failed"),description:a("flow_builder.error_uploading_media","There was an error uploading your media"),variant:"destructive"})}},fileType:(()=>{switch(i){case"image":return"image/*";case"video":return"video/*";case"audio":return"audio/*";case"document":return".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.zip,.rar";default:return"*/*"}})(),maxSize:30,className:"w-full",showProgress:_,progress:A}),d&&!_&&vs.jsxs("div",{className:"text-[10px] text-green-600 bg-green-50 p-1 rounded",children:["✓ ",a("flow_builder.file_uploaded","File uploaded successfully")]})]}),"audio"!==i&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{className:"space-y-1",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.caption_optional","Caption (Optional)")}),vs.jsx(TB,{id:`followup-caption-textarea-${e}`,placeholder:a("flow_builder.enter_caption","Enter caption for media..."),value:f,onChange:e=>m(e.target.value),className:"text-xs h-16 resize-none"})]}),vs.jsxs("div",{className:"space-y-1",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.insert_variable","Insert Variable:")}),vs.jsx("div",{className:"flex flex-wrap gap-1",children:P.map((t=>vs.jsx("button",{className:"text-[10px] px-2 py-1 bg-secondary rounded hover:bg-secondary/80",title:t.description,onClick:()=>(t=>{const n=document.getElementById(`followup-caption-textarea-${e}`);if(!n)return;const a=n.selectionStart,r=`{{${t}}}`,s=f.substring(0,a)+r+f.substring(a);m(s),setTimeout((()=>{n.focus(),n.setSelectionRange(a+r.length,a+r.length)}),0)})(t.name),children:t.name},t.name)))}),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:a("flow_builder.variables_replaced_desc","Variables will be replaced with actual values when message is sent.")})]})]})]})]}),vs.jsxs("div",{className:"border rounded-lg p-3 bg-gradient-to-r from-green-50 to-emerald-50",children:[vs.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[vs.jsx(Nb,{className:"h-4 w-4"}),a("flow_builder.timing_config","Timing Configuration")]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.trigger_event","Trigger Event")}),vs.jsxs(ZU,{value:g,onValueChange:e=>x(e),children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"conversation_start",children:a("flow_builder.conversation_start","Conversation Start")}),vs.jsx(sW,{value:"relative_delay",children:a("flow_builder.relative_delay","Relative Delay")}),vs.jsx(sW,{value:"specific_datetime",children:a("flow_builder.specific_datetime","Specific Date/Time")})]})]})]}),"specific_datetime"===g?vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.date_and_time","Date and Time")}),vs.jsx(LB,{type:"datetime-local",value:j,onChange:e=>{N(e.target.value)},className:"text-xs h-7"}),vs.jsx("p",{className:"text-[10px] text-muted-foreground",children:a("flow_builder.datetime_timezone_note",`Enter time as it should appear in ${C||"UTC"} timezone`)}),vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.timezone","Timezone")}),vs.jsx(c6,{value:C,onValueChange:S,placeholder:a("flow_builder.select_timezone","Select timezone..."),className:"w-full"}),vs.jsx("p",{className:"text-[10px] text-muted-foreground",children:a("flow_builder.timezone_desc","Message will be sent at the specified time in this timezone")}),j&&C&&vs.jsxs("div",{className:"text-[10px] p-2 bg-blue-50 rounded border border-blue-200",children:[vs.jsx("div",{className:"font-medium text-blue-800",children:"Scheduled Time Preview:"}),vs.jsxs("div",{className:"text-blue-700",children:["Local: ",new Date(j).toLocaleString()," (",C,")"]}),vs.jsxs("div",{className:"text-blue-600",children:["UTC: ",new Date(j).toISOString()]})]})]}):vs.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.delay_amount","Delay Amount")}),vs.jsx(LB,{type:"number",min:"1",value:y,onChange:e=>v(parseInt(e.target.value)||1),className:"text-xs h-7"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.delay_unit","Delay Unit")}),vs.jsxs(ZU,{value:b,onValueChange:e=>w(e),children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"minutes",children:a("flow_builder.minutes","Minutes")}),vs.jsx(sW,{value:"hours",children:a("flow_builder.hours","Hours")}),vs.jsx(sW,{value:"days",children:a("flow_builder.days","Days")}),vs.jsx(sW,{value:"weeks",children:a("flow_builder.weeks","Weeks")})]})]})]})]})]}),vs.jsxs("div",{className:"border rounded-lg p-3 bg-gradient-to-r from-purple-50 to-pink-50",children:[vs.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[vs.jsx(Bb,{className:"h-4 w-4"}),a("flow_builder.advanced_config","Advanced Configuration")]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:a("flow_builder.max_retries","Max Retries")}),vs.jsx(LB,{type:"number",min:"0",max:"10",value:k,onChange:e=>M(parseInt(e.target.value)||3),className:"text-xs h-7"}),vs.jsx("p",{className:"text-[10px] text-muted-foreground",children:a("flow_builder.retry_attempts_desc","Number of retry attempts if message delivery fails")})]})]})]})]})}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:n})]})},google_calendar_event:function({id:e,data:t,isConnectable:n}){const{t:a}=mk(),[r,s]=cs.useState(!1),[i,o]=cs.useState(t.summary||""),[l,c]=cs.useState(t.description||""),[d,u]=cs.useState(t.startDateTime?new Date(t.startDateTime):void 0),[f,m]=cs.useState(t.endDateTime?new Date(t.endDateTime):void 0),[p,h]=cs.useState(t.attendeeInput||""),[g,x]=cs.useState(t.attendees||[]),{setNodes:y}=f1(),{toast:v}=Fy(),b=cs.useCallback((t=>{y((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,y]),w=e=>{u(e),e&&b({startDateTime:e.toISOString()})},j=e=>{m(e),e&&b({endDateTime:e.toISOString()})};return vs.jsxs("div",{className:"node-calendar-event p-3 rounded-lg bg-white border border-green-200 shadow-sm max-w-[250px] group",children:[t.onDuplicateNode&&t.onDeleteNode&&vs.jsxs("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>t.onDuplicateNode&&t.onDuplicateNode(e),children:vs.jsx(Ub,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:a("flow_builder.duplicate_node","Duplicate node")})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>t.onDeleteNode&&t.onDeleteNode(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:a("flow_builder.delete_node","Delete node")})})]})})]}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(Nb,{className:"h-4 w-4 text-green-600"}),vs.jsx("span",{children:a("flow_builder.calendar_event","Calendar Event")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>s(!r),children:r?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]}),vs.jsx(u9,{className:"mb-3"}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[vs.jsx("div",{className:"text-sm font-medium",children:i||a("flow_builder.calendar_untitled_event","Untitled Event")}),vs.jsxs("div",{className:"text-xs mt-1 space-y-1",children:[d&&vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsxs("span",{className:"text-muted-foreground",children:[a("flow_builder.calendar_start","Start"),":"]}),vs.jsx("span",{children:Dz(d,"PPP p")})]}),f&&vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsxs("span",{className:"text-muted-foreground",children:[a("flow_builder.calendar_end","End"),":"]}),vs.jsx("span",{children:Dz(f,"PPP p")})]}),g.length>0&&vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsxs("span",{className:"text-muted-foreground",children:[a("flow_builder.calendar_attendees","Attendees"),":"]}),vs.jsx("span",{children:g.length})]})]})]}),r&&vs.jsxs("div",{className:"mt-3 text-xs space-y-3 p-2 border rounded bg-secondary/10",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:a("flow_builder.calendar_event_title","Event Title")}),vs.jsx(LB,{className:"w-full p-1 border rounded bg-background text-xs",value:i,onChange:e=>{const t=e.target.value;o(t),b({summary:t})},placeholder:a("flow_builder.calendar_enter_title","Enter event title")})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:a("flow_builder.calendar_description","Description")}),vs.jsx(TB,{className:"w-full p-1 border rounded bg-background text-xs min-h-[60px] resize-none",value:l,onChange:e=>{const t=e.target.value;c(t),b({description:t})},placeholder:a("flow_builder.calendar_enter_description","Enter event description"),rows:2})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Start Date & Time"}),vs.jsxs(r6,{children:[vs.jsx(s6,{asChild:!0,children:vs.jsx(lk,{variant:"brand",size:"sm",className:fN("w-full justify-start text-left font-normal text-xs p-1 h-auto",!d&&"text-muted-foreground"),children:d?Dz(d,"PPP p"):"Select date & time"})}),vs.jsxs(i6,{className:"w-auto p-0",align:"start",children:[vs.jsx(o9,{mode:"single",selected:d,onSelect:w,initialFocus:!0}),d&&vs.jsx("div",{className:"p-3 border-t border-border",children:vs.jsx(LB,{type:"time",className:"text-xs",value:d?Dz(d,"HH:mm"):"",onChange:e=>{if(d&&e.target.value){const[t,n]=e.target.value.split(":"),a=new Date(d);a.setHours(parseInt(t,10)),a.setMinutes(parseInt(n,10)),w(a)}}})})]})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"End Date & Time"}),vs.jsxs(r6,{children:[vs.jsx(s6,{asChild:!0,children:vs.jsx(lk,{variant:"brand",size:"sm",className:fN("w-full justify-start text-left font-normal text-xs p-1 h-auto",!f&&"text-muted-foreground"),children:f?Dz(f,"PPP p"):"Select date & time"})}),vs.jsxs(i6,{className:"w-auto p-0",align:"start",children:[vs.jsx(o9,{mode:"single",selected:f,onSelect:j,initialFocus:!0}),f&&vs.jsx("div",{className:"p-3 border-t border-border",children:vs.jsx(LB,{type:"time",className:"text-xs",value:f?Dz(f,"HH:mm"):"",onChange:e=>{if(f&&e.target.value){const[t,n]=e.target.value.split(":"),a=new Date(f);a.setHours(parseInt(t,10)),a.setMinutes(parseInt(n,10)),j(a)}}})})]})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Attendees"}),vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsx(LB,{className:"flex-1 p-1 border rounded bg-background text-xs",value:p,onChange:e=>{h(e.target.value),b({attendeeInput:e.target.value})},placeholder:"Email address"}),vs.jsx(lk,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-auto",onClick:()=>{if(p&&p.includes("@")){const e=[...g,p];x(e),b({attendees:e,attendeeInput:""}),h("")}else v({title:a("flow_builder.calendar_invalid_email","Invalid email"),description:a("flow_builder.calendar_valid_email_required","Please enter a valid email address"),variant:"destructive"})},children:"Add"})]}),g.length>0&&vs.jsx("div",{className:"mt-2 space-y-1",children:g.map(((e,t)=>vs.jsxs("div",{className:"flex items-center justify-between bg-secondary/30 rounded px-2 py-1",children:[vs.jsx("span",{className:"text-xs truncate",children:e}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>(e=>{const t=g.filter(((t,n)=>n!==e));x(t),b({attendees:t})})(t),children:"×"})]},t)))})]}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:"Changes are saved automatically when you save the flow."})]}),vs.jsx(T4,{type:"target",position:WX.Left,isConnectable:n}),vs.jsx(T4,{type:"source",position:WX.Right,isConnectable:n})]})},google_calendar_availability:function({id:e,data:t,isConnectable:n}){const[a,r]=cs.useState(!1),[s,i]=cs.useState(t.date?new Date(t.date):void 0),[o,l]=cs.useState(t.startDate?new Date(t.startDate):void 0),[c,d]=cs.useState(t.endDate?new Date(t.endDate):void 0),[u,f]=cs.useState(t.durationMinutes||30),[m,p]=cs.useState(t.useDateRange||!1),{setNodes:h}=f1(),g=!!t.availabilityResults,x=cs.useMemo((()=>{if(!t.availabilityResults)return"";try{const e=t.availabilityResults;if(Array.isArray(e)&&0===e.length)return"No available time slots found for the requested period.";const n=["9:00 AM - 10:00 AM","11:30 AM - 12:30 PM","2:00 PM - 3:00 PM","4:30 PM - 5:30 PM"];if(m){return`Available times ${o&&c?`from ${Dz(o,"MMMM d, yyyy")} to ${Dz(c,"MMMM d, yyyy")}`:"in the selected period"}:\n\n`+n.join("\n")}return`Available times ${s?Dz(s,"MMMM d, yyyy"):"on the selected date"}:\n\n`+n.join("\n")}catch(pBe){return"Error processing availability data."}}),[t.availabilityResults,s,o,c,m]),y=cs.useCallback((t=>{h((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t,formattedAvailability:x}}:n))))}),[e,h,x]);return vs.jsxs("div",{className:"node-calendar-availability p-3 rounded-lg bg-white border border-blue-200 shadow-sm max-w-[250px] group",children:[t.onDuplicateNode&&t.onDeleteNode&&vs.jsxs("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>t.onDuplicateNode&&t.onDuplicateNode(e),children:vs.jsx(Ub,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Duplicate node"})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>t.onDeleteNode&&t.onDeleteNode(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Delete node"})})]})})]}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(Bb,{className:"h-4 w-4 text-blue-600"}),vs.jsx("span",{children:"Availability Check"}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>r(!a),children:a?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]}),vs.jsx(u9,{className:"mb-3"}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[m?vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsx(Nb,{className:"h-3.5 w-3.5 text-muted-foreground"}),vs.jsx("span",{children:o&&c?`${Dz(o,"PPP")} - ${Dz(c,"PPP")}`:"No date range selected"})]}):vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsx(Nb,{className:"h-3.5 w-3.5 text-muted-foreground"}),vs.jsx("span",{children:s?Dz(s,"PPP"):"No date selected"})]}),vs.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[vs.jsx(Bb,{className:"h-3.5 w-3.5 text-muted-foreground"}),vs.jsx("span",{children:u<60?`${u} minutes`:`${u/60} hour${u>60?"s":""}`})]}),g&&vs.jsx("div",{className:"mt-1 pt-1 border-t border-gray-100",children:vs.jsxs("div",{className:"text-xs font-medium text-emerald-600 flex items-center gap-1",children:[vs.jsx("span",{children:"✓"}),vs.jsx("span",{children:"Availability data ready"})]})})]}),a&&vs.jsxs("div",{className:"mt-3 text-xs space-y-3 p-2 border rounded bg-secondary/10",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Use date range"}),vs.jsx(L4,{checked:m,onCheckedChange:e=>{p(e),y({useDateRange:e,...e?{date:void 0}:{startDate:void 0,endDate:void 0}})},className:"h-[18px] w-[32px]"})]}),m?vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Start Date"}),vs.jsxs(r6,{children:[vs.jsx(s6,{asChild:!0,children:vs.jsxs(lk,{variant:"brand",size:"sm",className:fN("w-full justify-start text-left font-normal text-xs p-1 h-auto",!o&&"text-muted-foreground"),children:[vs.jsx(Nb,{className:"mr-2 h-3.5 w-3.5"}),o?Dz(o,"PPP"):"Select start date"]})}),vs.jsx(i6,{className:"w-auto p-0",align:"start",children:vs.jsx(o9,{mode:"single",selected:o,onSelect:e=>{l(e),e&&y({startDate:e.toISOString(),date:void 0})},initialFocus:!0})})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"End Date"}),vs.jsxs(r6,{children:[vs.jsx(s6,{asChild:!0,children:vs.jsxs(lk,{variant:"brand",size:"sm",className:fN("w-full justify-start text-left font-normal text-xs p-1 h-auto",!c&&"text-muted-foreground"),disabled:!o,children:[vs.jsx(Nb,{className:"mr-2 h-3.5 w-3.5"}),c?Dz(c,"PPP"):"Select end date"]})}),vs.jsx(i6,{className:"w-auto p-0",align:"start",children:vs.jsx(o9,{mode:"single",selected:c,onSelect:e=>{d(e),e&&y({endDate:e.toISOString(),date:void 0})},disabled:e=>!!o&&e<o,initialFocus:!0})})]})]})]}):vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Date"}),vs.jsxs(r6,{children:[vs.jsx(s6,{asChild:!0,children:vs.jsxs(lk,{variant:"brand",size:"sm",className:fN("w-full justify-start text-left font-normal text-xs p-1 h-auto",!s&&"text-muted-foreground"),children:[vs.jsx(Nb,{className:"mr-2 h-3.5 w-3.5"}),s?Dz(s,"PPP"):"Select date"]})}),vs.jsx(i6,{className:"w-auto p-0",align:"start",children:vs.jsx(o9,{mode:"single",selected:s,onSelect:e=>{i(e),e&&y({date:e.toISOString(),startDate:void 0,endDate:void 0})},initialFocus:!0})})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Meeting Duration"}),vs.jsxs(ZU,{value:u.toString(),onValueChange:e=>{const t=parseInt(e,10);f(t),y({durationMinutes:t})},children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select duration"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"15",children:"15 minutes"}),vs.jsx(sW,{value:"30",children:"30 minutes"}),vs.jsx(sW,{value:"45",children:"45 minutes"}),vs.jsx(sW,{value:"60",children:"1 hour"}),vs.jsx(sW,{value:"90",children:"1.5 hours"}),vs.jsx(sW,{value:"120",children:"2 hours"})]})]})]}),vs.jsxs("div",{className:"text-[10px] text-muted-foreground mt-2 flex items-start",children:[vs.jsxs("span",{className:"mr-1",children:["This node will check the linked calendar for available time slots",m?" in the selected date range":" on the selected date","for meetings of the specified duration."]}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx("div",{className:"cursor-help",children:vs.jsx(ow,{className:"h-3 w-3 text-muted-foreground"})})}),vs.jsx(ek,{className:"max-w-xs",children:vs.jsx("p",{className:"text-xs",children:"Availability data will be passed to connected nodes. You can use this to conditionally show available slots or create dynamic responses."})})]})})]}),vs.jsxs("div",{className:"mt-3 border-t pt-2",children:[vs.jsx(EB,{className:"text-[10px] font-medium block mb-1",children:"Available Data for Connected Nodes:"}),vs.jsx("div",{className:"text-[10px] bg-background/80 p-1 rounded border border-border h-[60px] overflow-y-auto",children:vs.jsxs("code",{className:"whitespace-pre-wrap break-all",children:[vs.jsx("span",{className:"text-blue-600",children:"availability:"})," Contains all availability data",vs.jsx("br",{}),vs.jsx("span",{className:"text-blue-600",children:"{{availability}}"}),": Use in message nodes to show formatted availability"]})})]})]}),vs.jsx(T4,{type:"target",position:WX.Left,isConnectable:n}),vs.jsx(T4,{type:"source",position:WX.Right,isConnectable:n,id:"availability-data"})]})},ai_assistant:function({id:e,data:t,isConnectable:n}){var a,r,s;const{t:i}=mk(),[o,l]=cs.useState(!1),[c,d]=cs.useState(t.provider||"gemini"),[u,f]=cs.useState(t.model||"gemini-1.5-pro-latest"),[m,p]=cs.useState(t.apiKey||""),[h,g]=cs.useState(t.prompt||"You are a helpful assistant. Answer user questions concisely and accurately. Only perform specific actions when the user explicitly requests them."),[x,y]=cs.useState(void 0===t.enableHistory||t.enableHistory),[v,b]=cs.useState(t.historyLimit||5),[w,j]=cs.useState(t.enableTextToSpeech||!1),[N,C]=cs.useState(t.ttsProvider||"openai"),[S,k]=cs.useState(t.ttsVoice||"alloy"),[M,_]=cs.useState(t.voiceResponseMode||"always"),[I,A]=cs.useState(t.maxAudioDuration||30),[E,L]=cs.useState(t.elevenLabsApiKey||""),[T,D]=cs.useState(t.elevenLabsVoiceId||"pNInz6obpgDQGcFmaJgB"),[P,O]=cs.useState(t.elevenLabsCustomVoiceId||""),[R,z]=cs.useState(t.elevenLabsModel||"eleven_monolingual_v1"),[F,B]=cs.useState(t.elevenLabsStability??.5),[U,W]=cs.useState(t.elevenLabsSimilarityBoost??.75),[G,V]=cs.useState(t.elevenLabsStyle??0),[H,q]=cs.useState(t.elevenLabsUseSpeakerBoost??!0),[$,Y]=cs.useState(t.enableSessionTakeover||!1),[Q,K]=cs.useState(t.stopKeyword||"stop"),[J,Z]=cs.useState(t.exitOutputHandle||"ai-stopped"),[X,ee]=cs.useState(t.enableTaskExecution||!1),[te,ne]=cs.useState(t.tasks||[]),[ae,re]=cs.useState(0),{setNodes:se}=f1(),{onDeleteNode:ie}=B8(),oe=[{id:"always",name:"Always",description:"Generate voice responses for all messages (text and voice)"},{id:"voice_only",name:"Voice-to-Voice Only",description:"Only generate voice responses when user sends a voice message"},{id:"never",name:"Never",description:"Disable voice responses (text only)"}],le=[{name:"📄 Share Document",description:"Triggers when user explicitly requests documents, brochures, files, or materials",example:'"Can you send me the product brochure?" or "I need the pricing sheet"',functionDefinition:{name:"share_document",description:"ONLY call this function when the user explicitly requests a specific document, file, brochure, catalog, manual, or material. Do NOT call for general greetings, questions, or conversations. The user must clearly ask for something to be shared or sent.",parameters:{type:"object",properties:{document_type:{type:"string",description:"Specific type of document explicitly requested by the user (brochure, manual, catalog, price list, etc.)"},user_request:{type:"string",description:"The exact words the user used to request the document"}},required:["document_type","user_request"]}}},{name:"📅 Schedule Appointment",description:"Triggers when user wants to book, schedule, or arrange meetings/appointments",example:'"I\'d like to schedule a consultation" or "Can we book a meeting?"',functionDefinition:{name:"schedule_appointment",description:"ONLY call this function when the user explicitly asks to schedule, book, arrange, or set up an appointment, meeting, or consultation. Do NOT call for general inquiries about availability or services. The user must clearly express intent to schedule something.",parameters:{type:"object",properties:{preferred_date:{type:"string",description:"User's preferred date for the appointment if mentioned"},preferred_time:{type:"string",description:"User's preferred time for the appointment if mentioned"},appointment_type:{type:"string",description:"Type of appointment explicitly requested (consultation, demo, support, meeting, etc.)"}},required:["appointment_type"]}}},{name:"👤 Transfer to Agent",description:"Triggers when user explicitly requests to speak with a human representative",example:'"I need to speak with someone" or "Can I talk to an agent?"',functionDefinition:{name:"transfer_to_agent",description:"ONLY call this function when the user explicitly asks to speak with a human, agent, representative, person, or requests human assistance. Do NOT call for general questions or when the user is satisfied with AI responses. The user must clearly express desire for human interaction.",parameters:{type:"object",properties:{reason:{type:"string",description:"Specific reason the user gave for requesting human assistance"},urgency:{type:"string",enum:["low","medium","high"],description:"Urgency level based on user's tone and request"}},required:["reason"]}}},{name:"🛒 Product Inquiry",description:"Triggers when user asks about specific products, pricing, or availability",example:'"What\'s the price of..." or "Do you have this product in stock?"',functionDefinition:{name:"product_inquiry",description:"ONLY call this function when the user explicitly asks about specific products, pricing, availability, or product details. Do NOT call for general browsing or casual mentions. The user must clearly request product information.",parameters:{type:"object",properties:{product_name:{type:"string",description:"Name or description of the product the user is asking about"},inquiry_type:{type:"string",enum:["price","availability","specifications","general"],description:"Type of inquiry about the product"},user_question:{type:"string",description:"The exact question the user asked about the product"}},required:["product_name","inquiry_type","user_question"]}}}],ce=R4.find((e=>e.id===c)),de=(null==ce?void 0:ce.models)||[],ue=cs.useCallback((t=>{se((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,se]);cs.useEffect((()=>{ue({provider:c,model:u,apiKey:m,prompt:h,enableHistory:x,historyLimit:v,enableTextToSpeech:w,ttsProvider:N,ttsVoice:S,voiceResponseMode:M,maxAudioDuration:I,enableSessionTakeover:$,stopKeyword:Q,exitOutputHandle:J,enableTaskExecution:X,tasks:te,elevenLabsApiKey:E,elevenLabsVoiceId:T,elevenLabsCustomVoiceId:P,elevenLabsModel:R,elevenLabsStability:F,elevenLabsSimilarityBoost:U,elevenLabsStyle:G,elevenLabsUseSpeakerBoost:H})}),[ue,c,u,m,h,x,v,w,N,S,M,I,$,Q,J,X,te,E,T,P,R,F,U,G,H]),cs.useEffect((()=>{ae>0&&se((t=>t.map((t=>t.id===e?{...t,data:{...t.data,_handleKey:ae}}:t))))}),[ae,e,se]);const fe=()=>{var e;return(null==(e=R4.find((e=>e.id===c)))?void 0:e.name)||"AI Provider"};return vs.jsxs("div",{className:"node-ai-assistant rounded-lg bg-white border border-emerald-200 shadow-sm min-w-[380px] max-w-[480px] group relative",children:[vs.jsx("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>ie(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:i("flow_builder.delete_node","Delete node")})})]})})}),vs.jsx("div",{className:"p-3 border-b border-emerald-100 bg-emerald-50/30",children:vs.jsxs("div",{className:"font-medium flex items-center gap-2",children:[vs.jsx(IF,{size:16,color:"#059669",className:"text-emerald-600"}),vs.jsx("span",{children:i("flow_builder.ai_assistant","AI Assistant")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>l(!o),children:o?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]})}),vs.jsx("div",{children:vs.jsxs("div",{className:"p-3 space-y-3",children:[vs.jsxs("div",{className:"text-sm p-3 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[vs.jsx(Fw,{className:"h-3.5 w-3.5 text-muted-foreground"}),vs.jsx("span",{className:"font-medium",children:fe()}),vs.jsx("span",{className:"text-xs text-muted-foreground",children:(null==(a=de.find((e=>e.id===u)))?void 0:a.name)||u})]}),vs.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:h.length>80?h.substring(0,80)+"...":h}),vs.jsxs("div",{className:"flex flex-wrap gap-1",children:[x&&vs.jsxs("span",{className:"text-[10px] bg-emerald-100 text-emerald-800 px-1.5 py-0.5 rounded-full",children:["History: ",v]}),X&&te.filter((e=>e.enabled)).length>0&&vs.jsxs("span",{className:"text-[10px] bg-indigo-100 text-indigo-800 px-1.5 py-0.5 rounded-full",children:["Tasks: ",te.filter((e=>e.enabled)).length]}),w&&"openai"===c&&vs.jsxs("span",{className:"text-[10px] bg-pink-100 text-pink-800 px-1.5 py-0.5 rounded-full",children:["TTS: ",(null==(r=oe.find((e=>e.id===M)))?void 0:r.name)||"Always"]}),w&&"openai"===c&&I&&I<30&&vs.jsxs("span",{className:"text-[10px] bg-orange-100 text-orange-800 px-1.5 py-0.5 rounded-full",children:["Audio: ",I,"s max"]})]})]}),o&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{className:"border rounded-lg p-3 bg-gradient-to-r from-emerald-50 to-blue-50",children:[vs.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[vs.jsx(Fw,{className:"h-4 w-4"}),"AI Configuration"]}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:i("flow_builder.ai_provider","AI Provider")}),vs.jsxs(ZU,{value:c,onValueChange:e=>{d(e);const t=R4.find((t=>t.id===e));t&&t.models.length>0&&f(t.models[0].id)},children:[vs.jsx(tW,{className:"text-xs h-7 mt-1",children:vs.jsx(eW,{placeholder:i("flow_builder.ai_select_provider","Select provider")})}),vs.jsx(rW,{children:R4.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:i("flow_builder.ai_model","Model")}),vs.jsxs(ZU,{value:u,onValueChange:e=>{f(e)},children:[vs.jsx(tW,{className:"text-xs h-7 mt-1",children:vs.jsx(eW,{placeholder:i("flow_builder.ai_select_model","Select model")})}),vs.jsx(rW,{children:de.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:i("flow_builder.ai_api_key","API Key")}),vs.jsx(LB,{type:"password",placeholder:i("flow_builder.ai_api_key_placeholder","Enter your {{provider}} API key",{provider:fe()}),value:m,onChange:e=>{p(e.target.value)},className:"text-xs h-7 mt-1"}),vs.jsx("div",{className:"mt-1",children:vs.jsx("a",{href:(()=>{switch(c){case"openai":return"https://platform.openai.com/api-keys";case"anthropic":return"https://console.anthropic.com/keys";case"gemini":return"https://ai.google.dev/";case"deepseek":return"https://platform.deepseek.com/";default:return"#"}})(),target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-blue-600 hover:underline",children:i("flow_builder.ai_get_api_key","Get your API key here")})})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:i("flow_builder.ai_system_prompt","System Prompt")}),vs.jsx(TB,{placeholder:i("flow_builder.ai_prompt_placeholder","Enter instructions for the AI"),value:h,onChange:e=>{g(e.target.value)},className:"text-xs min-h-[80px] resize-none mt-1"})]})]})]}),vs.jsxs("div",{className:"border rounded-lg p-3 bg-gradient-to-r from-blue-50 to-purple-50",children:[vs.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[vs.jsx(ow,{className:"h-4 w-4"}),"Conversation"]}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-xs font-medium cursor-pointer",children:i("flow_builder.ai_enable_history","Conversation History")}),vs.jsx(L4,{checked:x,onCheckedChange:y})]}),x&&vs.jsxs("div",{className:"pl-4 border-l-2 border-blue-200",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:i("flow_builder.ai_history_limit","Message Limit")}),vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0 text-xs",onClick:()=>b(Math.max(1,v-1)),disabled:v<=1,children:"-"}),vs.jsx("span",{className:"text-xs w-6 text-center font-medium",children:v}),vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0 text-xs",onClick:()=>b(Math.min(20,v+1)),disabled:v>=20,children:"+"})]})]}),vs.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Previous messages to include for context"})]})]})]}),"openai"===c&&vs.jsxs("div",{className:"border rounded-lg p-3 bg-gradient-to-r from-orange-50 to-pink-50",children:[vs.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[vs.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:vs.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),"Voice Processing"]}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-xs font-medium cursor-pointer",children:i("flow_builder.ai_enable_tts","Text-to-Speech")}),vs.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Convert AI responses to voice messages"})]}),vs.jsx(L4,{checked:w,onCheckedChange:j})]}),w&&vs.jsxs("div",{className:"pl-4 border-l-2 border-pink-200 space-y-3",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"TTS Provider"}),vs.jsxs(ZU,{value:N,onValueChange:C,children:[vs.jsx(tW,{className:"text-xs h-7 mt-1",children:vs.jsx(eW,{placeholder:"Select TTS provider..."})}),vs.jsx(rW,{children:[{id:"openai",name:"OpenAI",description:"OpenAI TTS with Whisper STT"},{id:"elevenlabs",name:"ElevenLabs",description:"ElevenLabs TTS with OpenAI Whisper STT"}].map((e=>vs.jsx(sW,{value:e.id,children:vs.jsxs("div",{className:"flex flex-col",children:[vs.jsx("span",{className:"font-medium",children:e.name}),vs.jsx("span",{className:"text-[10px] text-muted-foreground",children:e.description})]})},e.id)))})]}),vs.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Choose your text-to-speech provider"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"Voice Selection"}),vs.jsxs(ZU,{value:"elevenlabs"===N?P?"custom":T:S,onValueChange:e=>{"elevenlabs"===N?"custom"===e?D("custom"):(D(e),O("")):k(e)},children:[vs.jsx(tW,{className:"text-xs h-7 mt-1",children:vs.jsx(eW,{placeholder:"Select voice..."})}),vs.jsx(rW,{children:("elevenlabs"===N?[{id:"pNInz6obpgDQGcFmaJgB",name:"Adam (Deep Male)"},{id:"EXAVITQu4vr4xnSDxMaL",name:"Bella (Warm Female)"},{id:"VR6AewLTigWG4xSOukaG",name:"Arnold (Strong Male)"},{id:"MF3mGyEYCl7XYWbV9V6O",name:"Elli (Young Female)"},{id:"TxGEqnHWrfWFTfGW9XjX",name:"Josh (Casual Male)"},{id:"jsCqWAovK2LkecY7zXl4",name:"Freya (Professional Female)"},{id:"custom",name:"🎯 Custom Voice ID"}]:[{id:"alloy",name:"Alloy (Neutral)"},{id:"echo",name:"Echo (Male)"},{id:"fable",name:"Fable (British Male)"},{id:"onyx",name:"Onyx (Deep Male)"},{id:"nova",name:"Nova (Female)"},{id:"shimmer",name:"Shimmer (Soft Female)"}]).map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]}),vs.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Choose the voice for AI audio responses"})]}),"elevenlabs"===N&&("custom"===T||P)&&vs.jsxs("div",{className:"pl-4 border-l-2 border-purple-300 bg-purple-25",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"Custom Voice ID"}),vs.jsx(LB,{type:"text",value:P,onChange:e=>{const t=e.target.value.trim();O(t),t?D("custom"):"custom"===T&&D("pNInz6obpgDQGcFmaJgB")},placeholder:"Paste your ElevenLabs voice ID here...",className:"text-xs h-7 mt-1 font-mono"}),vs.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:'Enter a custom voice ID from your ElevenLabs account (e.g., "pNInz6obpgDQGcFmaJgB")'}),P&&P.length>0&&P.length<20&&vs.jsx("p",{className:"text-[9px] text-amber-600 mt-1",children:"⚠️ Voice ID seems short. ElevenLabs voice IDs are typically 20+ characters long."}),vs.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:vs.jsxs("p",{className:"text-[9px] text-blue-700",children:[vs.jsx("strong",{children:"💡 Tip:"}),' You can find voice IDs in your ElevenLabs dashboard under "Voices" → Click on a voice → Copy the Voice ID']})})]}),"elevenlabs"===N&&vs.jsxs("div",{className:"space-y-3 p-3 bg-purple-50 border border-purple-200 rounded-md",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"ElevenLabs API Key"}),vs.jsx(LB,{type:"password",value:E,onChange:e=>L(e.target.value),placeholder:"Enter ElevenLabs API key...",className:"text-xs h-7 mt-1"}),vs.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Required for ElevenLabs TTS"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"Model"}),vs.jsxs(ZU,{value:R,onValueChange:z,children:[vs.jsx(tW,{className:"text-xs h-7 mt-1",children:vs.jsx(eW,{placeholder:"Select model..."})}),vs.jsx(rW,{children:[{id:"eleven_monolingual_v1",name:"Monolingual v1 (English)"},{id:"eleven_multilingual_v1",name:"Multilingual v1"},{id:"eleven_multilingual_v2",name:"Multilingual v2 (Latest)"}].map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]})]}),vs.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[vs.jsxs("div",{children:[vs.jsxs(EB,{className:"text-[10px] font-medium text-gray-700",children:["Stability (",F,")"]}),vs.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:F,onChange:e=>B(parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer mt-1"})]}),vs.jsxs("div",{children:[vs.jsxs(EB,{className:"text-[10px] font-medium text-gray-700",children:["Similarity (",U,")"]}),vs.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:U,onChange:e=>W(parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer mt-1"})]})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"Speaker Boost"}),vs.jsx(L4,{checked:H,onCheckedChange:q})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:i("flow_builder.ai_voice_response_mode","Voice Response Mode")}),vs.jsxs(ZU,{value:M,onValueChange:_,children:[vs.jsx(tW,{className:"text-xs h-7 mt-1",children:vs.jsx(eW,{placeholder:"Select mode..."})}),vs.jsx(rW,{children:oe.map((e=>vs.jsx(sW,{value:e.id,children:vs.jsxs("div",{className:"flex flex-col",children:[vs.jsx("span",{className:"font-medium",children:e.name}),vs.jsx("span",{className:"text-[10px] text-muted-foreground",children:e.description})]})},e.id)))})]}),vs.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:null==(s=oe.find((e=>e.id===M)))?void 0:s.description})]})]}),vs.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-2",children:vs.jsxs("p",{className:"text-[10px] text-blue-700",children:[vs.jsx("strong",{children:"Voice Processing:"}),"elevenlabs"===N?vs.jsx("span",{children:" Speech-to-Text uses OpenAI Whisper, Text-to-Speech uses ElevenLabs API"}):vs.jsx("span",{children:" Speech-to-Text and Text-to-Speech both use OpenAI APIs"})]})})]})]}),"openai"===c&&w&&vs.jsxs("div",{className:"border rounded-lg p-3 bg-gradient-to-r from-orange-50 to-red-50",children:[vs.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[vs.jsx(Bb,{className:"h-4 w-4"}),"Audio Processing Limits"]}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-700",children:"Maximum Audio Duration (seconds)"}),vs.jsx(LB,{type:"number",min:"1",max:"30",value:I,onChange:e=>{const t=parseInt(e.target.value);t>=1&&t<=30&&A(t)},className:"text-xs h-7 mt-1",placeholder:"30"}),vs.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Audio messages longer than this limit will not be transcribed or generate TTS responses to save API costs"}),I>30&&vs.jsx("p",{className:"text-[9px] text-red-600 mt-1",children:"Maximum allowed duration is 30 seconds"}),I<1&&vs.jsx("p",{className:"text-[9px] text-red-600 mt-1",children:"Minimum duration is 1 second"})]}),vs.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-2",children:vs.jsxs("p",{className:"text-[10px] text-yellow-700",children:["💰 ",vs.jsx("strong",{children:"Cost Optimization:"})," Limiting audio duration prevents expensive API calls for long voice messages. Users will receive a text response asking them to send shorter messages."]})})]})]}),vs.jsxs("div",{className:"border rounded-lg p-3 bg-gradient-to-r from-indigo-50 to-purple-50",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-3",children:[vs.jsxs("h3",{className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[vs.jsx(Lw,{className:"h-4 w-4"}),"Task Execution"]}),vs.jsx(L4,{checked:X,onCheckedChange:ee})]}),X&&vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs(EB,{className:"text-xs font-medium text-gray-700",children:[i("flow_builder.ai_tasks","Configured Tasks")," (",te.length,")"]}),vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsxs(ZU,{onValueChange:e=>{const t=le.find((t=>t.name===e));t&&(e=>{const t={id:`task_${Date.now()}`,name:e.name,description:e.description,functionDefinition:e.functionDefinition,outputHandle:`task_${Date.now()}`,enabled:!0};ne([...te,t]),re((e=>e+1))})(t)},children:[vs.jsx(tW,{className:"h-7 w-20 text-xs",children:vs.jsx(eW,{placeholder:"📋"})}),vs.jsx(rW,{className:"w-64 max-h-60 overflow-y-auto z-50",side:"top",align:"end",sideOffset:8,avoidCollisions:!0,children:le.map((e=>vs.jsx(sW,{value:e.name,className:"text-xs p-2",children:vs.jsxs("div",{className:"flex flex-col items-start space-y-1 max-w-full",children:[vs.jsx("span",{className:"font-medium text-xs truncate max-w-full",children:e.name}),vs.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[e.description.split(" ").slice(0,10).join(" "),e.description.split(" ").length>10?"...":""]})]})},e.name)))})]}),vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e={id:`task_${Date.now()}`,name:"Share Document",description:"When user requests a document, brochure, or file to be shared",functionDefinition:{name:"share_document",description:"Share a document or file with the user when they request it",parameters:{type:"object",properties:{document_type:{type:"string",description:"Type of document requested (brochure, manual, catalog, etc.)"},user_request:{type:"string",description:"The user's original request for the document"}},required:["document_type","user_request"]}},outputHandle:`task_${Date.now()}`,enabled:!0};ne([...te,e]),re((e=>e+1))},className:"h-7 px-2 text-xs",children:[vs.jsx(Iw,{className:"h-3 w-3 mr-1"}),"Custom"]})]})]}),0===te.length?vs.jsxs("div",{className:"text-center py-4 border-2 border-dashed border-gray-200 rounded-lg",children:[vs.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"No tasks configured"}),vs.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Add tasks to enable AI function calling and flow routing"})]}):vs.jsx("div",{className:"space-y-2",children:te.map(((e,t)=>vs.jsx(z4,{task:e,index:t,onUpdate:t=>((e,t)=>{ne(te.map((n=>n.id===e?{...n,...t}:n))),void 0===t.enabled&&void 0===t.outputHandle||re((e=>e+1))})(e.id,t),onRemove:()=>{return t=e.id,ne(te.filter((e=>e.id!==t))),void re((e=>e+1));var t},t:i},e.id)))}),vs.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-2",children:vs.jsxs("p",{className:"text-[10px] text-blue-700",children:["💡 ",vs.jsx("strong",{children:"Tip:"})," Each active task creates an output handle for flow routing. Use specific descriptions to prevent false triggers."]})})]}),!X&&vs.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Enable task execution to allow AI function calling and advanced flow routing"})]})]})]})}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:n}),X&&te.filter((e=>e.enabled)).map(((e,t)=>{const a=te.filter((e=>e.enabled)).length+($?1:0),r=Math.min(15,60/Math.max(a,1));return vs.jsx("div",{className:"absolute right-0 flex items-center pointer-events-none",style:{top:30+t*r+"%"},children:vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx("div",{className:"pointer-events-auto",children:vs.jsx(_0,{type:"source",position:WX.Right,id:e.outputHandle,style:D4,isConnectable:n,onMouseDown:e=>{e.stopPropagation()},onMouseMove:e=>{e.stopPropagation()}},`handle-${e.outputHandle}-${ae}`)})}),vs.jsx(ek,{side:"left",children:vs.jsxs("div",{className:"max-w-[250px]",children:[vs.jsx("p",{className:"text-xs font-medium text-blue-600",children:e.name}),vs.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),vs.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1 italic",children:["Function: ",e.functionDefinition.name]})]})})]})})},`${e.id}-${ae}`)}))]})},update_pipeline_stage:function({id:e,data:t,selected:n,isConnectable:a}){const{onDeleteNode:r,onDuplicateNode:s}=B8(),{getNodes:i,setNodes:o}=f1(),[l,c]=cs.useState(!1),{data:d,isLoading:u}=Sy({queryKey:["/api/pipeline/stages"],staleTime:6e4}),{data:f}=Sy({queryKey:["/api/deals/tags"],staleTime:6e4});cs.useEffect((()=>{if(t&&(!t.operation||!t.dealIdVariable)){const e={...t,operation:t.operation||"update_stage",dealIdVariable:t.dealIdVariable||"{{contact.phone}}",dealPriority:t.dealPriority||"medium",errorHandling:t.errorHandling||"continue",tagsToAdd:t.tagsToAdd||[],tagsToRemove:t.tagsToRemove||[],enableAdvancedOptions:t.enableAdvancedOptions||!1,createDealIfNotExists:t.createDealIfNotExists||!1,createStageIfNotExists:t.createStageIfNotExists||!1};m(e)}}),[t,e,i,o]);const m=cs.useCallback((t=>{const n=i().map((n=>n.id===e?{...n,data:{...n.data,...t}}:n));o(n)}),[e,i,o]),p=cs.useCallback((()=>{r(e)}),[e,r]),h=cs.useCallback((()=>{s(e)}),[e,s]),g=cs.useCallback((e=>{m({operation:e})}),[m]),x=cs.useCallback((e=>{m({stageId:e})}),[m]),y=cs.useCallback((e=>t=>{m({[e]:t.target.value})}),[m]),v=cs.useCallback((e=>t=>{const n="keep_current"===t?"":t;m({[e]:n})}),[m]),b=cs.useCallback((e=>t=>{m({[e]:t})}),[m]),w=cs.useCallback((e=>{var n;if(e.trim()&&!(null==(n=t.tagsToAdd)?void 0:n.includes(e.trim()))){const n=[...t.tagsToAdd||[],e.trim()];m({tagsToAdd:n,tagInput:""})}}),[t.tagsToAdd,m]),j=cs.useCallback(((e,n=!0)=>{var a,r;if(n){const n=(null==(a=t.tagsToAdd)?void 0:a.filter((t=>t!==e)))||[];m({tagsToAdd:n})}else{const n=(null==(r=t.tagsToRemove)?void 0:r.filter((t=>t!==e)))||[];m({tagsToRemove:n})}}),[t.tagsToAdd,t.tagsToRemove,m]),N=cs.useCallback((e=>{var n;if(e.trim()&&!(null==(n=t.tagsToRemove)?void 0:n.includes(e.trim()))){const n=[...t.tagsToRemove||[],e.trim()];m({tagsToRemove:n})}}),[t.tagsToRemove,m]);return vs.jsx(JS,{children:vs.jsxs("div",{className:"group relative",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[l&&vs.jsxs("div",{className:"absolute -top-10 right-0 flex space-x-2 z-50 bg-background p-1 rounded-md shadow-sm",children:[vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:h,children:vs.jsx(Ub,{className:"h-4 w-4"})}),vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:p,children:vs.jsx(Zw,{className:"h-4 w-4"})})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:a}),vs.jsxs(tk,{className:fN("min-w-[380px] max-w-[480px] transition-all duration-200",n?"border-primary border-2 shadow-lg":"border-border","bg-gradient-to-br from-background to-muted/20"),children:[vs.jsx(nk,{className:"p-4 pb-2",children:vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx("div",{className:"p-2 rounded-lg bg-blue-100 text-blue-600 dark:bg-blue-900/20",children:(()=>{switch(t.operation){case"create_stage":return vs.jsx(Iw,{className:"w-4 h-4"});case"create_deal":return vs.jsx(Vb,{className:"w-4 h-4"});case"update_deal":return vs.jsx(Kw,{className:"w-4 h-4"});case"manage_tags":return vs.jsx(Qw,{className:"w-4 h-4"});default:return vs.jsx(Tb,{className:"w-4 h-4"})}})()}),vs.jsxs("div",{children:[vs.jsx(ak,{className:"text-sm font-semibold",children:(()=>{switch(t.operation){case"create_stage":return"Create Pipeline Stage";case"create_deal":return"Create Deal";case"update_deal":return"Update Deal";case"manage_tags":return"Manage Tags";default:return"Update Pipeline Stage"}})()}),vs.jsx(rk,{className:"text-xs",children:(()=>{switch(t.operation){case"create_stage":return"Create a new pipeline stage";case"create_deal":return"Create a new deal in pipeline";case"update_deal":return"Update existing deal properties";case"manage_tags":return"Add or remove tags from deals";default:return"Move contact/deal to pipeline stage"}})()})]})]}),vs.jsx(dk,{variant:"secondary",className:"text-xs",children:"Pipeline"})]})}),vs.jsxs(sk,{className:"p-4 pt-0 space-y-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs(EB,{className:"text-xs font-medium flex items-center gap-1",children:[vs.jsx(Kw,{className:"w-3 h-3"}),"Operation Type",vs.jsxs(ZS,{children:[vs.jsx(XS,{children:vs.jsx(Ob,{className:"w-3 h-3 text-muted-foreground"})}),vs.jsx(ek,{children:vs.jsx("p",{children:"Choose what action to perform in the pipeline"})})]})]}),vs.jsxs(ZU,{value:t.operation||"update_stage",onValueChange:g,children:[vs.jsx(tW,{className:"h-8",children:vs.jsx(eW,{placeholder:"Select operation"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"update_stage",children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Tb,{className:"w-3 h-3"}),"Update Stage"]})}),vs.jsx(sW,{value:"create_stage",children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Iw,{className:"w-3 h-3"}),"Create Stage"]})}),vs.jsx(sW,{value:"create_deal",children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Vb,{className:"w-3 h-3"}),"Create Deal"]})}),vs.jsx(sW,{value:"update_deal",children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Kw,{className:"w-3 h-3"}),"Update Deal"]})}),vs.jsx(sW,{value:"manage_tags",children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Qw,{className:"w-3 h-3"}),"Manage Tags"]})})]})]})]}),"update_stage"===t.operation&&vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs(EB,{className:"text-xs font-medium flex items-center gap-1",children:[vs.jsx(Tb,{className:"w-3 h-3"}),"Target Stage"]}),vs.jsxs(ZU,{value:t.stageId||"",onValueChange:x,children:[vs.jsx(tW,{className:"h-8",children:vs.jsx(eW,{placeholder:"Select a stage"})}),vs.jsx(rW,{children:u?vs.jsx(sW,{value:"loading",children:"Loading stages..."}):null==d?void 0:d.map((e=>vs.jsx(sW,{value:e.id.toString(),children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),e.name]})},e.id)))})]})]}),"create_stage"===t.operation&&vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Stage Name"}),vs.jsx(LB,{value:t.stageName||"",onChange:y("stageName"),placeholder:"Enter stage name",className:"h-8"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Stage Color"}),vs.jsx(LB,{type:"color",value:t.stageColor||"#3a86ff",onChange:y("stageColor"),className:"h-8 w-20"})]})]}),("update_stage"===t.operation||"update_deal"===t.operation||"manage_tags"===t.operation)&&vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs(EB,{className:"text-xs font-medium flex items-center gap-1",children:[vs.jsx(uj,{className:"w-3 h-3"}),"Deal/Contact ID Variable"]}),vs.jsx(g8,{value:t.dealIdVariable||"",onChange:e=>m({dealIdVariable:e}),placeholder:"{{contact.phone}}",className:"h-8"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Variable containing the deal ID or contact phone number"})]}),"create_deal"===t.operation&&vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Deal Title"}),vs.jsx(g8,{value:t.dealTitle||"",onChange:e=>m({dealTitle:e}),placeholder:"{{contact.name}} - New Deal",className:"h-8"})]}),vs.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Value"}),vs.jsx(g8,{value:t.dealValue||"",onChange:e=>m({dealValue:e}),placeholder:"{{deal.amount}}",className:"h-8"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Priority"}),vs.jsxs(ZU,{value:t.dealPriority||"medium",onValueChange:v("dealPriority"),children:[vs.jsx(tW,{className:"h-8",children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"low",children:"Low"}),vs.jsx(sW,{value:"medium",children:"Medium"}),vs.jsx(sW,{value:"high",children:"High"})]})]})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Target Stage"}),vs.jsxs(ZU,{value:t.stageId||"",onValueChange:x,children:[vs.jsx(tW,{className:"h-8",children:vs.jsx(eW,{placeholder:"Select initial stage"})}),vs.jsx(rW,{children:null==d?void 0:d.map((e=>vs.jsx(sW,{value:e.id.toString(),children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),e.name]})},e.id)))})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Description"}),vs.jsx(g8,{value:t.dealDescription||"",onChange:e=>m({dealDescription:e}),placeholder:"Deal description...",className:"h-16"})]})]}),"update_deal"===t.operation&&vs.jsx("div",{className:"space-y-3",children:vs.jsxs(k6,{open:t.showDealCreation,onOpenChange:e=>m({showDealCreation:e}),children:[vs.jsx(M6,{asChild:!0,children:vs.jsxs(lk,{variant:"ghost",size:"sm",className:"w-full justify-between h-8",children:[vs.jsx("span",{className:"text-xs",children:"Deal Update Options"}),t.showDealCreation?vs.jsx(Mb,{className:"w-3 h-3"}):vs.jsx(Ib,{className:"w-3 h-3"})]})}),vs.jsxs(_6,{className:"space-y-3 mt-2",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"New Title"}),vs.jsx(g8,{value:t.dealTitle||"",onChange:e=>m({dealTitle:e}),placeholder:"Leave empty to keep current",className:"h-8"})]}),vs.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"New Value"}),vs.jsx(g8,{value:t.dealValue||"",onChange:e=>m({dealValue:e}),placeholder:"Leave empty to keep current",className:"h-8"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"New Priority"}),vs.jsxs(ZU,{value:t.dealPriority||"keep_current",onValueChange:e=>{m({dealPriority:"keep_current"===e?"":e})},children:[vs.jsx(tW,{className:"h-8",children:vs.jsx(eW,{placeholder:"Keep current"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"keep_current",children:"Keep current"}),vs.jsx(sW,{value:"low",children:"Low"}),vs.jsx(sW,{value:"medium",children:"Medium"}),vs.jsx(sW,{value:"high",children:"High"})]})]})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"New Stage"}),vs.jsxs(ZU,{value:t.stageId||"keep_current",onValueChange:e=>{m({stageId:"keep_current"===e?"":e})},children:[vs.jsx(tW,{className:"h-8",children:vs.jsx(eW,{placeholder:"Keep current stage"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"keep_current",children:"Keep current"}),null==d?void 0:d.map((e=>vs.jsx(sW,{value:e.id.toString(),children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),e.name]})},e.id)))]})]})]})]})]})}),"manage_tags"===t.operation&&vs.jsx("div",{className:"space-y-3",children:vs.jsxs(k6,{open:t.showTagManagement,onOpenChange:e=>m({showTagManagement:e}),children:[vs.jsx(M6,{asChild:!0,children:vs.jsxs(lk,{variant:"ghost",size:"sm",className:"w-full justify-between h-8",children:[vs.jsxs("span",{className:"text-xs flex items-center gap-1",children:[vs.jsx(Qw,{className:"w-3 h-3"}),"Tag Management"]}),t.showTagManagement?vs.jsx(Mb,{className:"w-3 h-3"}):vs.jsx(Ib,{className:"w-3 h-3"})]})}),vs.jsxs(_6,{className:"space-y-3 mt-2",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium text-green-600",children:"Tags to Add"}),vs.jsxs("div",{className:"flex gap-1",children:[vs.jsx(LB,{value:t.tagInput||"",onChange:y("tagInput"),placeholder:"Enter tag name",className:"h-8 text-xs",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),w(t.tagInput||""))}}),vs.jsx(lk,{size:"sm",variant:"outline",className:"h-8 px-2",onClick:()=>w(t.tagInput||""),children:vs.jsx(Iw,{className:"w-3 h-3"})})]}),t.tagsToAdd&&t.tagsToAdd.length>0&&vs.jsx("div",{className:"flex flex-wrap gap-1",children:t.tagsToAdd.map(((e,t)=>vs.jsxs(dk,{variant:"secondary",className:"text-xs bg-green-100 text-green-700 dark:bg-green-900/20",children:[e,vs.jsx(lk,{size:"sm",variant:"ghost",className:"h-3 w-3 p-0 ml-1",onClick:()=>j(e,!0),children:vs.jsx(yj,{className:"w-2 h-2"})})]},t)))}),f&&f.length>0&&vs.jsxs("div",{className:"space-y-1",children:[vs.jsx(EB,{className:"text-xs text-muted-foreground",children:"Quick Add:"}),vs.jsx("div",{className:"flex flex-wrap gap-1",children:f.slice(0,6).map((e=>{var n;return vs.jsx(lk,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",onClick:()=>w(e),disabled:null==(n=t.tagsToAdd)?void 0:n.includes(e),children:e},e)}))})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium text-red-600",children:"Tags to Remove"}),vs.jsx("div",{className:"flex gap-1",children:vs.jsxs(ZU,{onValueChange:N,children:[vs.jsx(tW,{className:"h-8",children:vs.jsx(eW,{placeholder:"Select tag to remove"})}),vs.jsx(rW,{children:null==f?void 0:f.map((e=>vs.jsx(sW,{value:e,children:e},e)))})]})}),t.tagsToRemove&&t.tagsToRemove.length>0&&vs.jsx("div",{className:"flex flex-wrap gap-1",children:t.tagsToRemove.map(((e,t)=>vs.jsxs(dk,{variant:"secondary",className:"text-xs bg-red-100 text-red-700 dark:bg-red-900/20",children:[e,vs.jsx(lk,{size:"sm",variant:"ghost",className:"h-3 w-3 p-0 ml-1",onClick:()=>j(e,!1),children:vs.jsx(yj,{className:"w-2 h-2"})})]},t)))})]})]})]})}),vs.jsxs(k6,{open:t.showAdvanced,onOpenChange:e=>m({showAdvanced:e}),children:[vs.jsx(M6,{asChild:!0,children:vs.jsxs(lk,{variant:"ghost",size:"sm",className:"w-full justify-between h-8 text-muted-foreground",children:[vs.jsx("span",{className:"text-xs",children:"Advanced Options"}),t.showAdvanced?vs.jsx(Mb,{className:"w-3 h-3"}):vs.jsx(Ib,{className:"w-3 h-3"})]})}),vs.jsxs(_6,{className:"space-y-3 mt-2",children:[("update_stage"===t.operation||"update_deal"===t.operation)&&vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Create deal if not exists"}),vs.jsx(L4,{checked:t.createDealIfNotExists||!1,onCheckedChange:b("createDealIfNotExists")})]}),"update_stage"===t.operation&&vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Create stage if not exists"}),vs.jsx(L4,{checked:t.createStageIfNotExists||!1,onCheckedChange:b("createStageIfNotExists")})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Error Handling"}),vs.jsxs(ZU,{value:t.errorHandling||"continue",onValueChange:v("errorHandling"),children:[vs.jsx(tW,{className:"h-8",children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"continue",children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Db,{className:"w-3 h-3 text-green-500"}),"Continue on error"]})}),vs.jsx(sW,{value:"stop",children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Lb,{className:"w-3 h-3 text-red-500"}),"Stop on error"]})})]})]})]})]})]})]})]})]})})},webhook:function({id:e,data:t,isConnectable:n}){var a;const{t:r}=mk(),[s,i]=cs.useState(!1),[o,l]=cs.useState(t.url||""),[c,d]=cs.useState(t.method||"POST"),[u,f]=cs.useState(t.headers||[]),[m,p]=cs.useState(t.body||""),[h,g]=cs.useState(t.authType||"none"),[x,y]=cs.useState(t.authToken||""),[v,b]=cs.useState(t.authUsername||""),[w,j]=cs.useState(t.authPassword||""),[N,C]=cs.useState(t.authApiKey||""),[S,k]=cs.useState(t.authApiKeyHeader||"X-API-Key"),[M,_]=cs.useState(t.timeout||30),[I,A]=cs.useState(void 0===t.followRedirects||t.followRedirects),[E,L]=cs.useState(!1),[T,D]=cs.useState(null),[P,O]=cs.useState(!1),[R,z]=cs.useState(!1),{setNodes:F}=f1(),{onDeleteNode:B,onDuplicateNode:U}=B8(),W=cs.useCallback((t=>{F((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,F]);cs.useEffect((()=>{W({url:o,method:c,headers:u,body:m,authType:h,authToken:x,authUsername:v,authPassword:w,authApiKey:N,authApiKeyHeader:S,timeout:M,followRedirects:I})}),[W,o,c,u,m,h,x,v,w,N,S,M,I]);const G=(e,t,n)=>{const a=[...u];a[e][t]=n,f(a)},V=e=>{switch(e){case"GET":return"text-blue-600";case"POST":return"text-green-600";case"PUT":return"text-orange-600";case"DELETE":return"text-red-600";case"PATCH":return"text-purple-600";default:return"text-gray-600"}},H=e=>{const t={"contact.name":"Test Contact","contact.phone":"+1234567890","contact.email":"test@example.com","message.content":"This is a test message","date.today":(new Date).toISOString().split("T")[0],"time.now":(new Date).toLocaleTimeString(),"user.name":"Test User","user.id":"123"};let n=e;return Object.entries(t).forEach((([e,t])=>{const a=new RegExp(`\\{\\{${e}\\}\\}`,"g");n=n.replace(a,t)})),n};return vs.jsxs("div",{className:"node-webhook p-3 rounded-lg bg-white border border-blue-200 shadow-sm max-w-[320px] group",children:[vs.jsxs("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>U(e),children:vs.jsx(Ub,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:r("flow_builder.duplicate_node","Duplicate node")})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>B(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:r("flow_builder.delete_node","Delete node")})})]})})]}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(nw,{className:"h-4 w-4 text-blue-600"}),vs.jsx("span",{children:r("flow_builder.webhook","Webhook")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>i(!s),children:s?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx(Fw,{className:"h-3.5 w-3.5 text-muted-foreground"}),vs.jsx("span",{className:fN("font-medium",V(c)),children:c}),vs.jsx("span",{className:"text-muted-foreground",children:"•"}),vs.jsx("span",{className:"text-xs text-muted-foreground truncate",children:o||r("flow_builder.webhook_no_url","No URL configured")})]}),vs.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:["none"!==h&&vs.jsxs("span",{className:"text-[10px] bg-blue-100 text-blue-800 px-1 py-0.5 rounded",children:["Auth: ",null==(a=y8.find((e=>e.id===h)))?void 0:a.name]}),u.length>0&&vs.jsxs("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-1 py-0.5 rounded",children:[u.length," header",1!==u.length?"s":""]}),m&&("POST"===c||"PUT"===c||"PATCH"===c)&&vs.jsx("span",{className:"text-[10px] bg-green-100 text-green-800 px-1 py-0.5 rounded",children:r("flow_builder.webhook_body_configured","Body configured")})]})]}),s&&vs.jsxs("div",{className:"mt-3 text-xs space-y-3 border rounded p-2 bg-secondary/10",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:r("flow_builder.webhook_method","HTTP Method")}),vs.jsxs(ZU,{value:c,onValueChange:d,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:r("flow_builder.webhook_select_method","Select method")})}),vs.jsx(rW,{children:x8.map((e=>vs.jsx(sW,{value:e.id,children:vs.jsx("span",{className:V(e.id),children:e.name})},e.id)))})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:r("flow_builder.webhook_url","Webhook URL")}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(LB,{type:"url",placeholder:r("flow_builder.webhook_url_placeholder","https://api.example.com/webhook"),value:o,onChange:e=>l(e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx(lk,{variant:"outline",size:"sm",className:"h-7 px-2",onClick:async()=>{if(!o.trim())return D({success:!1,error:"Please enter a webhook URL"}),void O(!0);if(!(e=>{try{return new URL(e),!0}catch{return!1}})(o))return D({success:!1,error:"Please enter a valid URL (must include http:// or https://)"}),void O(!0);L(!0),D(null),O(!0);const e=Date.now();try{const n={"Content-Type":"application/json"};if(u.forEach((e=>{e.key&&e.value&&(n[e.key]=H(e.value))})),"bearer"===h&&x)n.Authorization=`Bearer ${x}`;else if("basic"===h&&v&&w){const e=btoa(`${v}:${w}`);n.Authorization=`Basic ${e}`}else"apikey"===h&&N&&S&&(n[S]=N);const a={method:c,headers:n,redirect:I?"follow":"manual"};if(("POST"===c||"PUT"===c||"PATCH"===c)&&m)try{const e=H(m);JSON.parse(e),a.body=e}catch(t){return void D({success:!1,error:"Invalid JSON in request body"})}const r=new AbortController,s=window.setTimeout((()=>r.abort()),1e3*M);a.signal=r.signal;const i=await fetch(o,a);window.clearTimeout(s);const l=Date.now()-e;let d;const f=i.headers.get("content-type");try{d=(null==f?void 0:f.includes("application/json"))?await i.json():await i.text()}catch{d="Unable to parse response body"}const p={};i.headers.forEach(((e,t)=>{p[t]=e})),D({success:i.ok,status:i.status,statusText:i.statusText,headers:p,data:d,duration:l})}catch(n){const t=Date.now()-e;let a="Unknown error occurred";"AbortError"===n.name?a=`Request timed out after ${M} seconds`:n.message&&(a=n.message),D({success:!1,error:a,duration:t})}finally{L(!1)}},disabled:E||!o.trim(),title:r("flow_builder.webhook_test_tooltip","Test webhook with current configuration"),children:E?vs.jsx(uw,{className:"h-3 w-3 animate-spin"}):vs.jsx(_w,{className:"h-3 w-3"})})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:r("flow_builder.webhook_authentication","Authentication")}),vs.jsxs(ZU,{value:h,onValueChange:g,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:r("flow_builder.webhook_select_auth","Select auth type")})}),vs.jsx(rW,{children:y8.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]}),"bearer"===h&&vs.jsx("div",{className:"mt-2",children:vs.jsx(LB,{type:"password",placeholder:r("flow_builder.webhook_bearer_token","Bearer token"),value:x,onChange:e=>y(e.target.value),className:"text-xs h-7"})}),"basic"===h&&vs.jsxs("div",{className:"mt-2 space-y-2",children:[vs.jsx(LB,{placeholder:r("flow_builder.webhook_username","Username"),value:v,onChange:e=>b(e.target.value),className:"text-xs h-7"}),vs.jsx(LB,{type:"password",placeholder:r("flow_builder.webhook_password","Password"),value:w,onChange:e=>j(e.target.value),className:"text-xs h-7"})]}),"apikey"===h&&vs.jsxs("div",{className:"mt-2 space-y-2",children:[vs.jsx(LB,{placeholder:"Header name (e.g., X-API-Key)",value:S,onChange:e=>k(e.target.value),className:"text-xs h-7"}),vs.jsx(LB,{type:"password",placeholder:"API key value",value:N,onChange:e=>C(e.target.value),className:"text-xs h-7"})]})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsx(EB,{className:"font-medium",children:"Custom Headers"}),vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-6 text-xs",onClick:()=>{f([...u,{key:"",value:""}])},children:[vs.jsx(Iw,{className:"h-3 w-3 mr-1"}),"Add"]})]}),u.map(((e,t)=>vs.jsxs("div",{className:"flex gap-2 mb-2",children:[vs.jsx(LB,{placeholder:"Header name",value:e.key,onChange:e=>G(t,"key",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx(LB,{placeholder:"Header value",value:e.value,onChange:e=>G(t,"value",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>(e=>{f(u.filter(((t,n)=>n!==e)))})(t),children:vs.jsx(yj,{className:"h-3 w-3"})})]},t)))]}),("POST"===c||"PUT"===c||"PATCH"===c)&&vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Request Body (JSON)"}),vs.jsx(TB,{placeholder:'{"key": "value", "data": "{{contact.name}}"}',value:m,onChange:e=>p(e.target.value),className:"text-xs min-h-[80px] resize-y font-mono"}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-1",children:"Use {{variable}} syntax for dynamic values"})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Timeout (seconds)"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>_(Math.max(1,M-5)),disabled:M<=1,children:"-"}),vs.jsx("span",{className:"text-xs w-8 text-center",children:M}),vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>_(Math.min(300,M+5)),disabled:M>=300,children:"+"})]})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-xs font-medium cursor-pointer",children:"Follow redirects"}),vs.jsx(L4,{checked:I,onCheckedChange:A})]})]}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:vs.jsx("p",{children:"The webhook node will make an HTTP request to the specified URL. Response data will be available as variables in subsequent nodes."})}),P&&T&&vs.jsxs("div",{className:"mt-3 border rounded p-2 bg-secondary/5",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[T.success?vs.jsx(Db,{className:"h-4 w-4 text-green-600"}):vs.jsx(zb,{className:"h-4 w-4 text-red-600"}),vs.jsx("span",{className:"text-xs font-medium",children:T.success?"Test Successful":"Test Failed"}),T.duration&&vs.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",T.duration,"ms)"]})]}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>O(!1),children:vs.jsx(yj,{className:"h-3 w-3"})})]}),T.error?vs.jsx("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:T.error}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[vs.jsx("span",{className:"font-medium",children:"Status:"}),vs.jsxs("span",{className:"px-1 py-0.5 rounded text-[10px] "+(T.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[T.status," ",T.statusText]})]}),T.headers&&Object.keys(T.headers).length>0&&vs.jsxs("div",{children:[vs.jsxs("button",{className:"text-xs font-medium text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>z(!R),children:["Response Headers",R?vs.jsx(Ab,{className:"h-3 w-3"}):vs.jsx(Mb,{className:"h-3 w-3"})]}),R&&vs.jsx("div",{className:"mt-1 text-[10px] bg-gray-50 p-2 rounded font-mono max-h-20 overflow-y-auto",children:Object.entries(T.headers).map((([e,t])=>vs.jsxs("div",{className:"truncate",children:[vs.jsxs("span",{className:"text-gray-600",children:[e,":"]})," ",t]},e)))})]}),T.data&&vs.jsxs("div",{children:[vs.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Response Body:"}),vs.jsx("div",{className:"text-[10px] bg-gray-50 p-2 rounded font-mono max-h-32 overflow-y-auto",children:"string"==typeof T.data?T.data:JSON.stringify(T.data,null,2)})]})]})]})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:n}),vs.jsx(_0,{type:"source",position:WX.Right,style:D4,isConnectable:n})]})},http_request:function({id:e,data:t,isConnectable:n}){var a,r;const{t:s}=mk(),[i,o]=cs.useState(!1),[l,c]=cs.useState(t.url||""),[d,u]=cs.useState(t.method||"GET"),[f,m]=cs.useState(t.headers||[]),[p,h]=cs.useState(t.body||""),[g,x]=cs.useState(t.authType||"none"),[y,v]=cs.useState(t.authToken||""),[b,w]=cs.useState(t.authUsername||""),[j,N]=cs.useState(t.authPassword||""),[C,S]=cs.useState(t.authApiKey||""),[k,M]=cs.useState(t.authApiKeyHeader||"X-API-Key"),[_,I]=cs.useState(t.timeout||30),[A,E]=cs.useState(void 0===t.followRedirects||t.followRedirects),[L,T]=cs.useState(t.responseType||"auto"),[D,P]=cs.useState(t.retryCount||0),[O,R]=cs.useState(t.retryDelay||1e3),[z,F]=cs.useState(t.variableMappings||[]),[B,U]=cs.useState(!1),[W,G]=cs.useState(null),[V,H]=cs.useState(!1),[q,$]=cs.useState(!1),[Y,Q]=cs.useState(!1),{setNodes:K}=f1(),{onDeleteNode:J,onDuplicateNode:Z}=B8(),X=cs.useCallback((t=>{K((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,K]);cs.useEffect((()=>{X({url:l,method:d,headers:f,body:p,authType:g,authToken:y,authUsername:b,authPassword:j,authApiKey:C,authApiKeyHeader:k,timeout:_,followRedirects:A,responseType:L,retryCount:D,retryDelay:O,variableMappings:z})}),[X,l,d,f,p,g,y,b,j,C,k,_,A,L,D,O,z]);const ee=(e,t,n)=>{const a=[...f];a[e][t]=n,m(a)},te=(e,t,n)=>{const a=[...z];a[e][t]=n,F(a)},ne=e=>{switch(e){case"GET":return"text-blue-600";case"POST":return"text-green-600";case"PUT":return"text-orange-600";case"DELETE":return"text-red-600";case"PATCH":return"text-purple-600";default:return"text-gray-600"}},ae=e=>{const t={"contact.name":"Test Contact","contact.phone":"+1234567890","contact.email":"test@example.com","contact.id":"12345","message.content":"This is a test message","date.today":(new Date).toISOString().split("T")[0],"date.now":(new Date).toISOString(),"time.now":(new Date).toLocaleTimeString(),"user.name":"Test User","user.id":"123","record.id":"456"};let n=e;return Object.entries(t).forEach((([e,t])=>{const a=new RegExp(`\\{\\{${e}\\}\\}`,"g");n=n.replace(a,t)})),n},re=async(e,t)=>{const n=e.headers.get("content-type")||"";try{if("json"===t||"auto"===t&&n.includes("application/json"))return await e.json();if("xml"===t||"auto"===t&&n.includes("xml")){return await e.text()}return await e.text()}catch{return await e.text()}};return vs.jsxs("div",{className:"node-http-request rounded-lg bg-white border border-purple-200 shadow-sm max-w-[360px] group relative",children:[vs.jsxs("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>Z(e),children:vs.jsx(Ub,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:s("flow_builder.duplicate_node","Duplicate node")})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>J(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:s("flow_builder.delete_node","Delete node")})})]})})]}),vs.jsx("div",{className:"p-3 border-b border-purple-100 bg-purple-50/30",children:vs.jsxs("div",{className:"font-medium flex items-center gap-2",children:[vs.jsx(jw,{className:"h-4 w-4 text-purple-600"}),vs.jsx("span",{children:s("flow_builder.http_request","HTTP Request")}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>o(!i),children:i?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]})}),vs.jsx("div",{className:(i?"max-h-[500px]":"max-h-[200px]")+" overflow-y-auto custom-scrollbar",children:vs.jsxs("div",{className:"p-3 space-y-3",children:[vs.jsxs("div",{className:"text-sm p-3 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[vs.jsx(Fw,{className:"h-3.5 w-3.5 text-muted-foreground"}),vs.jsx("span",{className:fN("font-medium",ne(d)),children:d}),vs.jsx("span",{className:"text-xs text-muted-foreground",children:l?l.length>30?`${l.substring(0,30)}...`:l:"No URL configured"})]}),vs.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["none"!==g&&`Auth: ${null==(a=m9.find((e=>e.id===g)))?void 0:a.name} • `,f.length>0&&`${f.length} header${1!==f.length?"s":""} • `,p&&("POST"===d||"PUT"===d||"PATCH"===d)&&"Body configured • ",D>0&&`${D} retries • `,z.length>0&&`${z.length} mapping${1!==z.length?"s":""}`]}),vs.jsxs("div",{className:"flex flex-wrap gap-1",children:["none"!==g&&vs.jsxs("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-1 py-0.5 rounded shrink-0",children:[s("flow_builder.http_auth","Auth"),": ",null==(r=m9.find((e=>e.id===g)))?void 0:r.name]}),f.length>0&&vs.jsxs("span",{className:"text-[10px] bg-blue-100 text-blue-800 px-1 py-0.5 rounded shrink-0",children:[f.length," ",s("flow_builder.http_header","header"),1!==f.length?"s":""]}),p&&("POST"===d||"PUT"===d||"PATCH"===d)&&vs.jsx("span",{className:"text-[10px] bg-green-100 text-green-800 px-1 py-0.5 rounded shrink-0",children:s("flow_builder.http_body_configured","Body configured")}),D>0&&vs.jsxs("span",{className:"text-[10px] bg-orange-100 text-orange-800 px-1 py-0.5 rounded shrink-0",children:[s("flow_builder.http_retry","Retry"),": ",D,"x"]}),z.length>0&&vs.jsxs("span",{className:"text-[10px] bg-indigo-100 text-indigo-800 px-1 py-0.5 rounded shrink-0",children:[z.length," ",s("flow_builder.http_mapping","mapping"),1!==z.length?"s":""]})]})]}),i&&vs.jsxs("div",{className:"text-xs space-y-3 border rounded p-2 bg-secondary/10",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:s("flow_builder.http_quick_templates","Quick Templates")}),vs.jsxs(ZU,{value:"",onValueChange:e=>{const t=h9.find((t=>t.id===e));t&&(u(t.method),c(t.url),m(t.headers),h(t.body))},children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:s("flow_builder.http_choose_template","Choose a template...")})}),vs.jsx(rW,{className:"w-64 max-h-60 overflow-y-auto z-50",side:"top",align:"end",sideOffset:8,avoidCollisions:!0,children:h9.map((e=>vs.jsx(sW,{value:e.id,className:"text-xs p-2",children:vs.jsxs("div",{className:"flex flex-col items-start space-y-1 max-w-full",children:[vs.jsx("span",{className:"font-medium text-xs truncate max-w-full",children:e.name}),vs.jsxs("span",{className:"text-[9px] text-muted-foreground leading-tight",children:[e.method," • ",e.url.length>30?`${e.url.substring(0,30)}...`:e.url]})]})},e.id)))})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:s("flow_builder.http_method","HTTP Method")}),vs.jsxs(ZU,{value:d,onValueChange:u,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:s("flow_builder.http_select_method","Select method")})}),vs.jsx(rW,{className:"w-40 z-50",side:"top",align:"start",sideOffset:8,avoidCollisions:!0,children:f9.map((e=>vs.jsx(sW,{value:e.id,children:vs.jsx("span",{className:ne(e.id),children:e.name})},e.id)))})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:s("flow_builder.http_request_url","Request URL")}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(LB,{type:"url",placeholder:"https://api.example.com/endpoint",value:l,onChange:e=>c(e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx(lk,{variant:"outline",size:"sm",className:"h-7 px-2",onClick:async()=>{var e;if(!l.trim())return G({success:!1,error:"Please enter a request URL"}),void H(!0);if(!(e=>{try{return new URL(e),!0}catch{return!1}})(l))return G({success:!1,error:"Please enter a valid URL (must include http:// or https://)"}),void H(!0);U(!0),G(null),H(!0);const t=Date.now();let n=null,a=0;const r=D+1;for(;a<r;)try{a++;const n={};if("POST"!==d&&"PUT"!==d&&"PATCH"!==d||!p||(n["Content-Type"]="application/json"),f.forEach((e=>{e.key&&e.value&&(n[e.key]=ae(e.value))})),"bearer"===g&&y)n.Authorization=`Bearer ${y}`;else if("basic"===g&&b&&j){const e=btoa(`${b}:${j}`);n.Authorization=`Basic ${e}`}else"apikey"===g&&C&&k&&(n[k]=C);const r={method:d,headers:n,redirect:A?"follow":"manual"};if(("POST"===d||"PUT"===d||"PATCH"===d)&&p)try{const t=ae(p);(null==(e=n["Content-Type"])?void 0:e.includes("application/json"))&&JSON.parse(t),r.body=t}catch(o){return G({success:!1,error:"Invalid JSON in request body"}),void U(!1)}const s=new AbortController,i=window.setTimeout((()=>s.abort()),1e3*_);r.signal=s.signal;const c=await fetch(ae(l),r);window.clearTimeout(i);const u=Date.now()-t,m=await re(c,L),h={};return c.headers.forEach(((e,t)=>{h[t]=e})),G({success:c.ok,status:c.status,statusText:c.statusText,headers:h,data:m,duration:u,retryAttempts:a-1}),void U(!1)}catch(c){n=c,a<r&&await new Promise((e=>setTimeout(e,O)))}const s=Date.now()-t;let i="Unknown error occurred";"AbortError"===(null==n?void 0:n.name)?i=`Request timed out after ${_} seconds`:(null==n?void 0:n.message)&&(i=n.message),G({success:!1,error:i,duration:s,retryAttempts:a-1}),U(!1)},disabled:B||!l.trim(),title:"Test request with current configuration",children:B?vs.jsx(uw,{className:"h-3 w-3 animate-spin"}):vs.jsx(_w,{className:"h-3 w-3"})})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Authentication"}),vs.jsxs(ZU,{value:g,onValueChange:x,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select auth type"})}),vs.jsx(rW,{className:"w-48 z-50",side:"top",align:"start",sideOffset:8,avoidCollisions:!0,children:m9.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]}),"bearer"===g&&vs.jsx("div",{className:"mt-2",children:vs.jsx(LB,{type:"password",placeholder:"Bearer token",value:y,onChange:e=>v(e.target.value),className:"text-xs h-7"})}),"basic"===g&&vs.jsxs("div",{className:"mt-2 space-y-2",children:[vs.jsx(LB,{placeholder:"Username",value:b,onChange:e=>w(e.target.value),className:"text-xs h-7"}),vs.jsx(LB,{type:"password",placeholder:"Password",value:j,onChange:e=>N(e.target.value),className:"text-xs h-7"})]}),"apikey"===g&&vs.jsxs("div",{className:"mt-2 space-y-2",children:[vs.jsx(LB,{placeholder:"Header name (e.g., X-API-Key)",value:k,onChange:e=>M(e.target.value),className:"text-xs h-7"}),vs.jsx(LB,{type:"password",placeholder:"API key value",value:C,onChange:e=>S(e.target.value),className:"text-xs h-7"})]})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsx(EB,{className:"font-medium",children:"Custom Headers"}),vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-6 text-xs",onClick:()=>{m([...f,{key:"",value:""}])},children:[vs.jsx(Iw,{className:"h-3 w-3 mr-1"}),"Add"]})]}),f.map(((e,t)=>vs.jsxs("div",{className:"flex gap-2 mb-2",children:[vs.jsx(LB,{placeholder:"Header name",value:e.key,onChange:e=>ee(t,"key",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx(LB,{placeholder:"Header value",value:e.value,onChange:e=>ee(t,"value",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>(e=>{m(f.filter(((t,n)=>n!==e)))})(t),children:vs.jsx(yj,{className:"h-3 w-3"})})]},t)))]}),("POST"===d||"PUT"===d||"PATCH"===d)&&vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Request Body (JSON)"}),vs.jsx(TB,{placeholder:'{"key": "value", "data": "{{contact.name}}"}',value:p,onChange:e=>h(e.target.value),className:"text-xs min-h-[80px] resize-y font-mono"}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-1",children:"Use {{variable}} syntax for dynamic values"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Response Type"}),vs.jsxs(ZU,{value:L,onValueChange:T,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select response type"})}),vs.jsx(rW,{className:"w-40 z-50",side:"top",align:"start",sideOffset:8,avoidCollisions:!0,children:p9.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Retry on Failure"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>P(Math.max(0,D-1)),disabled:D<=0,children:"-"}),vs.jsx("span",{className:"text-xs w-8 text-center",children:D}),vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>P(Math.min(5,D+1)),disabled:D>=5,children:"+"})]})]}),D>0&&vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Retry Delay (ms)"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>R(Math.max(100,O-500)),disabled:O<=100,children:"-"}),vs.jsx("span",{className:"text-xs w-12 text-center",children:O}),vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>R(Math.min(1e4,O+500)),disabled:O>=1e4,children:"+"})]})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Timeout (seconds)"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>I(Math.max(1,_-5)),disabled:_<=1,children:"-"}),vs.jsx("span",{className:"text-xs w-8 text-center",children:_}),vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>I(Math.min(300,_+5)),disabled:_>=300,children:"+"})]})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-xs font-medium cursor-pointer",children:"Follow redirects"}),vs.jsx(L4,{checked:A,onCheckedChange:E})]})]}),vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-3",children:[vs.jsx("div",{className:"flex items-center gap-2",children:vs.jsx(EB,{className:"font-medium text-sm",children:"Response Variable Mapping"})}),vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>{F([...z,{responseField:"",variableName:""}])},children:[vs.jsx(Iw,{className:"h-3 w-3 mr-1"}),"Add Mapping"]})]}),0===z.length?vs.jsxs("div",{className:"text-center py-4 border-2 border-dashed border-gray-200 rounded-lg bg-gray-50/50",children:[vs.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"No variable mappings configured"}),vs.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Map response fields to flow variables for use in subsequent nodes"})]}):vs.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto custom-scrollbar",children:z.map(((e,t)=>vs.jsxs("div",{className:"group border rounded-lg p-2 bg-white hover:bg-gray-50/50 transition-colors",children:[vs.jsxs("div",{className:"flex gap-2 items-center",children:[vs.jsxs("div",{className:"flex-1",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-600 mb-1 block",children:"Response Field"}),vs.jsx(LB,{placeholder:"response.data.id",value:e.responseField,onChange:e=>te(t,"responseField",e.target.value),className:"text-xs h-6 border-gray-200"})]}),vs.jsx("div",{className:"flex items-center justify-center mt-4",children:vs.jsx("div",{className:"bg-indigo-100 text-indigo-600 rounded-full p-1",children:vs.jsx("span",{className:"text-xs font-medium",children:"→"})})}),vs.jsxs("div",{className:"flex-1",children:[vs.jsx(EB,{className:"text-[10px] font-medium text-gray-600 mb-1 block",children:"Variable Name"}),vs.jsx(LB,{placeholder:"http.user_id",value:e.variableName,onChange:e=>te(t,"variableName",e.target.value),className:"text-xs h-6 border-gray-200"})]}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 mt-4 text-destructive hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>(e=>{F(z.filter(((t,n)=>n!==e)))})(t),children:vs.jsx(yj,{className:"h-3 w-3"})})]}),e.responseField&&e.variableName&&vs.jsxs("div",{className:"mt-2 text-[9px] text-muted-foreground bg-gray-50 px-2 py-1 rounded",children:[vs.jsxs("code",{className:"text-blue-600",children:["{{",e.variableName,"}}"]})," will contain data from ",vs.jsx("code",{className:"text-green-600",children:e.responseField})]})]},t)))}),vs.jsx("div",{className:"mt-3 p-2 bg-blue-50 border border-blue-200 rounded-md",children:vs.jsxs("p",{className:"text-[10px] text-blue-700",children:["💡 ",vs.jsx("strong",{children:"Tip:"})," Use dot notation for nested fields (e.g., ",vs.jsx("code",{children:"response.data.user.id"}),") and create meaningful variable names for easy reference in subsequent nodes."]})})]}),vs.jsxs("div",{className:"pt-3 border-t",children:[vs.jsxs("button",{className:"text-xs font-medium text-muted-foreground hover:text-foreground flex items-center justify-between w-full p-2 rounded hover:bg-gray-50 transition-colors",onClick:()=>Q(!Y),children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("span",{children:"Available Output Variables"}),vs.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded-full",children:[5+z.filter((e=>e.variableName)).length," variables"]})]}),Y?vs.jsx(Ab,{className:"h-3 w-3"}):vs.jsx(Mb,{className:"h-3 w-3"})]}),Y&&vs.jsxs("div",{className:"mt-2 space-y-2",children:[vs.jsxs("div",{className:"text-[10px] bg-purple-50 border border-purple-200 p-2 rounded",children:[vs.jsx("div",{className:"font-medium text-purple-800 mb-2",children:"Built-in Variables"}),vs.jsxs("div",{className:"space-y-1",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("code",{className:"text-purple-600 bg-white px-1 py-0.5 rounded",children:"{{http.response.status}}"}),vs.jsx("span",{className:"text-purple-700",children:"HTTP status code"})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("code",{className:"text-purple-600 bg-white px-1 py-0.5 rounded",children:"{{http.response.data}}"}),vs.jsx("span",{className:"text-purple-700",children:"Response body data"})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("code",{className:"text-purple-600 bg-white px-1 py-0.5 rounded",children:"{{http.response.headers}}"}),vs.jsx("span",{className:"text-purple-700",children:"Response headers"})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("code",{className:"text-purple-600 bg-white px-1 py-0.5 rounded",children:"{{http.duration}}"}),vs.jsx("span",{className:"text-purple-700",children:"Request duration (ms)"})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("code",{className:"text-purple-600 bg-white px-1 py-0.5 rounded",children:"{{http.success}}"}),vs.jsx("span",{className:"text-purple-700",children:"Request success status"})]})]})]}),z.filter((e=>e.variableName)).length>0&&vs.jsxs("div",{className:"text-[10px] bg-indigo-50 border border-indigo-200 p-2 rounded",children:[vs.jsx("div",{className:"font-medium text-indigo-800 mb-2",children:"Custom Mapped Variables"}),vs.jsx("div",{className:"space-y-1",children:z.map(((e,t)=>e.variableName&&vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("code",{className:"text-indigo-600 bg-white px-1 py-0.5 rounded",children:["{{",e.variableName,"}}"]}),vs.jsx("span",{className:"text-indigo-700 truncate ml-2",children:e.responseField||"Custom mapping"})]},t)))})]})]})]}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:vs.jsx("p",{children:"The HTTP Request node will fetch data from the specified URL. Response data will be available as variables in subsequent nodes."})}),V&&W&&vs.jsxs("div",{className:"mt-3 border rounded p-2 bg-secondary/5",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[W.success?vs.jsx(Db,{className:"h-4 w-4 text-green-600"}):vs.jsx(zb,{className:"h-4 w-4 text-red-600"}),vs.jsx("span",{className:"text-xs font-medium",children:W.success?"Request Successful":"Request Failed"}),W.duration&&vs.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",W.duration,"ms)"]}),void 0!==W.retryAttempts&&W.retryAttempts>0&&vs.jsxs("span",{className:"text-[10px] text-orange-600 flex items-center gap-1",children:[vs.jsx(Dw,{className:"h-2.5 w-2.5"}),W.retryAttempts," retries"]})]}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>H(!1),children:vs.jsx(yj,{className:"h-3 w-3"})})]}),W.error?vs.jsx("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:W.error}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[vs.jsx("span",{className:"font-medium",children:"Status:"}),vs.jsxs("span",{className:"px-1 py-0.5 rounded text-[10px] "+(W.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[W.status," ",W.statusText]})]}),W.headers&&Object.keys(W.headers).length>0&&vs.jsxs("div",{children:[vs.jsxs("button",{className:"text-xs font-medium text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>$(!q),children:["Response Headers",q?vs.jsx(Ab,{className:"h-3 w-3"}):vs.jsx(Mb,{className:"h-3 w-3"})]}),q&&vs.jsx("div",{className:"mt-1 text-[10px] bg-gray-50 p-2 rounded font-mono max-h-20 overflow-y-auto",children:Object.entries(W.headers).map((([e,t])=>vs.jsxs("div",{className:"break-words leading-tight",children:[vs.jsxs("span",{className:"text-gray-600",children:[e,":"]})," ","string"==typeof t&&t.length>50?`${t.substring(0,50)}...`:t]},e)))})]}),W.data&&vs.jsxs("div",{children:[vs.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Response Data:"}),vs.jsx("div",{className:"text-[10px] bg-gray-50 p-2 rounded font-mono max-h-32 overflow-y-auto",children:"string"==typeof W.data?W.data:JSON.stringify(W.data,null,2)})]})]})]})]})]})}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:n}),vs.jsx(_0,{type:"source",position:WX.Right,style:D4,isConnectable:n})]})},shopify:function({id:e,data:t,isConnectable:n}){var a,r,s;const[i,o]=cs.useState(!1),[l,c]=cs.useState(t.shopDomain||""),[d,u]=cs.useState(t.apiKey||""),[f,m]=cs.useState(t.apiPassword||""),[p,h]=cs.useState(t.resource||"orders"),[g,x]=cs.useState(t.action||"get"),[y,v]=cs.useState(t.filters||{}),[b,w]=cs.useState(t.variableMappings||[]),[j,N]=cs.useState(t.rateLimitDelay||500),[C,S]=cs.useState(!1),[k,M]=cs.useState(null),[_,I]=cs.useState(!1),[A,E]=cs.useState(!1),{setNodes:L}=f1(),{onDeleteNode:T,onDuplicateNode:D}=B8(),P=cs.useCallback((t=>{L((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,L]);cs.useEffect((()=>{P({shopDomain:l,apiKey:d,apiPassword:f,resource:p,action:g,filters:y,variableMappings:b,rateLimitDelay:j})}),[P,l,d,f,p,g,y,b,j]);const O=(e,t,n)=>{const a=[...b];a[e][t]=n,w(a)},R=(e,t)=>{v((n=>({...n,[e]:t})))},z=e=>{const t=new URLSearchParams;return Object.entries(e).forEach((([e,n])=>{if(n&&n.trim()){const a=(e=>{const t={"contact.email":"test@example.com","contact.first_name":"John","contact.last_name":"Doe","contact.phone":"+1234567890","order.id":"12345","product.id":"67890","product.inventory_item_id":"11111","inventory.new_quantity":"100","shipping.tracking":"TRACK123456","date.last_week":new Date(Date.now()-6048e5).toISOString(),"date.today":(new Date).toISOString().split("T")[0],"date.now":(new Date).toISOString()};let n=e;return Object.entries(t).forEach((([e,t])=>{const a=new RegExp(`\\{\\{${e}\\}\\}`,"g");n=n.replace(a,t)})),n})(n);t.append(e,a)}})),t.toString()},F=e=>{switch(e){case"get":return"text-blue-600";case"post":return"text-green-600";case"put":return"text-orange-600";case"delete":return"text-red-600";default:return"text-gray-600"}};return vs.jsxs("div",{className:"node-shopify p-3 rounded-lg bg-white border border-green-200 shadow-sm max-w-[320px] group",children:[vs.jsxs("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>D(e),children:vs.jsx(Ub,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Duplicate node"})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>T(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Delete node"})})]})})]}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(Ww,{className:"h-4 w-4 text-green-600"}),vs.jsx("span",{children:"Shopify"}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>o(!i),children:i?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx($w,{className:"h-3.5 w-3.5 text-muted-foreground"}),vs.jsx("span",{className:fN("font-medium",F(g)),children:g.toUpperCase()}),vs.jsx("span",{className:"text-muted-foreground",children:"•"}),vs.jsx("span",{className:"text-xs text-muted-foreground truncate",children:(null==(a=g9.find((e=>e.id===p)))?void 0:a.name)||p})]}),vs.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[l&&vs.jsx("span",{className:"text-[10px] bg-green-100 text-green-800 px-1 py-0.5 rounded",children:l.replace(".myshopify.com","")}),Object.keys(y).length>0&&vs.jsxs("span",{className:"text-[10px] bg-blue-100 text-blue-800 px-1 py-0.5 rounded",children:[Object.keys(y).length," filter",1!==Object.keys(y).length?"s":""]}),b.length>0&&vs.jsxs("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-1 py-0.5 rounded",children:[b.length," mapping",1!==b.length?"s":""]}),d&&vs.jsx("span",{className:"text-[10px] bg-orange-100 text-orange-800 px-1 py-0.5 rounded",children:"API Connected"})]})]}),i&&vs.jsxs("div",{className:"mt-3 text-xs space-y-3 border rounded p-2 bg-secondary/10",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Quick Templates"}),vs.jsxs(ZU,{value:"",onValueChange:e=>{const t=y9.find((t=>t.id===e));if(t){h(t.resource),x(t.action);const e=Object.entries(t.filters).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=String(n)),e)),{});v(e)}},children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Choose a Shopify operation..."})}),vs.jsx(rW,{children:y9.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsx(EB,{className:"block font-medium",children:"Shop Configuration"}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Shop Domain"}),vs.jsx(LB,{placeholder:"mystore.myshopify.com",value:l,onChange:e=>c(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"API Key"}),vs.jsx(LB,{placeholder:"Your Shopify API key",value:d,onChange:e=>u(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"API Password"}),vs.jsx(LB,{type:"password",placeholder:"Your Shopify API password",value:f,onChange:e=>m(e.target.value),className:"text-xs h-7"})]}),vs.jsx("div",{className:"flex gap-2",children:vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-7 px-2 flex-1",onClick:async()=>{var e,t,n;if(!l.trim())return M({success:!1,error:"Please enter your shop domain (e.g., mystore.myshopify.com)"}),void I(!0);if(!/^[a-zA-Z0-9][a-zA-Z0-9\-]*\.myshopify\.com$/.test(t=l)&&!t.includes(".myshopify.com"))return M({success:!1,error:"Please enter a valid Shopify domain (e.g., mystore.myshopify.com)"}),void I(!0);if(!d.trim()||!f.trim())return M({success:!1,error:"Please enter both API key and password"}),void I(!0);S(!0),M(null),I(!0);try{const t=(null==(e=g9.find((e=>e.id===p)))?void 0:e.endpoint)||p,a=(n=t,`https://${l.replace(/^https?:\/\//,"")}/admin/api/2025-06/${n}.json`),r=z(y),s=r?`${a}?${r}`:a,i=btoa(`${d}:${f}`),o=await fetch(s,{method:g.toUpperCase(),headers:{Authorization:`Basic ${i}`,"Content-Type":"application/json",Accept:"application/json"}});let c;try{c=await o.json()}catch{c=await o.text()}const u=o.headers.get("X-Shopify-Shop-Api-Call-Limit");if(o.ok){let e=0;if(c&&"object"==typeof c){const t=Object.keys(c)[0];Array.isArray(c[t])?e=c[t].length:c[t]&&(e=1)}M({success:!0,data:c,rateLimitRemaining:u?parseInt(u.split("/")[0]):void 0,responseCount:e})}else{let e="Request failed";(null==c?void 0:c.errors)?e=Array.isArray(c.errors)?c.errors.join(", "):c.errors:(null==c?void 0:c.error)?e=c.error:401===o.status?e="Authentication failed. Please check your API credentials.":403===o.status?e="Access denied. Please check your API permissions.":404===o.status?e="Resource not found. Please check your shop domain and resource selection.":429===o.status&&(e="Rate limit exceeded. Please wait before making more requests."),M({success:!1,error:e,rateLimitRemaining:u?parseInt(u.split("/")[0]):void 0})}}catch(a){let e="Connection failed";a.message&&(e=a.message),M({success:!1,error:e})}finally{S(!1)}},disabled:C||!l.trim()||!d.trim()||!f.trim(),title:"Test connection to your Shopify store",children:[C?vs.jsx(uw,{className:"h-3 w-3 animate-spin mr-1"}):vs.jsx(_w,{className:"h-3 w-3 mr-1"}),"Test Connection"]})})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Shopify Resource"}),vs.jsxs(ZU,{value:p,onValueChange:h,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select resource"})}),vs.jsx(rW,{children:g9.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Action Type"}),vs.jsxs(ZU,{value:g,onValueChange:x,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select action"})}),vs.jsx(rW,{children:x9.map((e=>vs.jsx(sW,{value:e.id,children:vs.jsx("span",{className:F(e.id),children:e.name})},e.id)))})]})]})]}),v9[p]&&vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsx(EB,{className:"block mb-2 font-medium",children:"Filters & Parameters"}),vs.jsx("div",{className:"space-y-2",children:v9[p].map((e=>vs.jsxs("div",{className:"flex gap-2 items-center",children:[vs.jsxs("div",{className:"flex-1",children:[vs.jsxs(EB,{className:"block mb-1 text-[10px] text-muted-foreground",children:[e.label,e.required&&vs.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"select"===e.type?vs.jsxs(ZU,{value:y[e.key]||"",onValueChange:t=>R(e.key,t),children:[vs.jsx(tW,{className:"text-xs h-6",children:vs.jsx(eW,{placeholder:`Select ${e.label.toLowerCase()}`})}),vs.jsx(rW,{children:"select"===e.type&&"options"in e&&Array.isArray(e.options)&&e.options.map((e=>vs.jsx(sW,{value:e,children:e},e)))})]}):vs.jsx(LB,{type:e.type,placeholder:e.placeholder||`Enter ${e.label.toLowerCase()}`,value:y[e.key]||e.default||"",onChange:t=>R(e.key,t.target.value),className:"text-xs h-6"})]}),y[e.key]&&vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 mt-4",onClick:()=>{return t=e.key,void v((e=>{const n={...e};return delete n[t],n}));var t},children:vs.jsx(yj,{className:"h-3 w-3"})})]},e.key)))}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:"Use {{variable}} syntax for dynamic values"})]}),vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsx(EB,{className:"font-medium",children:"Response Variable Mapping"}),vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-6 text-xs",onClick:()=>{w([...b,{responseField:"",variableName:""}])},children:[vs.jsx(Iw,{className:"h-3 w-3 mr-1"}),"Add"]})]}),b.map(((e,t)=>vs.jsxs("div",{className:"flex gap-2 mb-2",children:[vs.jsx(LB,{placeholder:"orders.0.id",value:e.responseField,onChange:e=>O(t,"responseField",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx("span",{className:"text-xs text-muted-foreground self-center",children:"→"}),vs.jsx(LB,{placeholder:"shopify.order_id",value:e.variableName,onChange:e=>O(t,"variableName",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>(e=>{w(b.filter(((t,n)=>n!==e)))})(t),children:vs.jsx(yj,{className:"h-3 w-3"})})]},t))),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Map Shopify response fields to flow variables for use in subsequent nodes"})]}),vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Rate Limit Delay (ms)"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>N(Math.max(100,j-100)),disabled:j<=100,children:"-"}),vs.jsx("span",{className:"text-xs w-12 text-center",children:j}),vs.jsx(lk,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>N(Math.min(5e3,j+100)),disabled:j>=5e3,children:"+"})]})]}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-1",children:"Delay between requests to respect Shopify's rate limits"})]}),vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsxs("button",{className:"text-xs font-medium text-muted-foreground hover:text-foreground flex items-center gap-1 w-full",onClick:()=>E(!A),children:["Available Output Variables",A?vs.jsx(Ab,{className:"h-3 w-3"}):vs.jsx(Mb,{className:"h-3 w-3"})]}),A&&vs.jsxs("div",{className:"mt-2 text-[10px] bg-gray-50 p-2 rounded space-y-1",children:[vs.jsxs("div",{children:[vs.jsxs("code",{children:["{{shopify.",p,".data}}"]})," - ",null==(r=g9.find((e=>e.id===p)))?void 0:r.name," data"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.response.count}}"})," - Number of results returned"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.api.rate_limit_remaining}}"})," - API calls remaining"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.success}}"})," - Request success status"]}),"orders"===p&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.order.id}}"})," - Order ID"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.order.total_price}}"})," - Order total"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.order.customer.email}}"})," - Customer email"]})]}),"products"===p&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.product.id}}"})," - Product ID"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.product.title}}"})," - Product title"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.product.vendor}}"})," - Product vendor"]})]}),"customers"===p&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.customer.id}}"})," - Customer ID"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.customer.email}}"})," - Customer email"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{shopify.customer.first_name}}"})," - First name"]})]}),b.map(((e,t)=>e.variableName&&vs.jsxs("div",{children:[vs.jsxs("code",{children:["{{",e.variableName,"}}"]})," - ",e.responseField||"Custom mapping"]},t)))]})]}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:vs.jsx("p",{children:"The Shopify Integration node connects to your Shopify store's Admin API. Response data will be available as variables in subsequent nodes."})}),_&&k&&vs.jsxs("div",{className:"mt-3 border rounded p-2 bg-secondary/5",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[k.success?vs.jsx(Db,{className:"h-4 w-4 text-green-600"}):vs.jsx(zb,{className:"h-4 w-4 text-red-600"}),vs.jsx("span",{className:"text-xs font-medium",children:k.success?"Connection Successful":"Connection Failed"}),void 0!==k.responseCount&&vs.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",k.responseCount," result",1!==k.responseCount?"s":"",")"]}),void 0!==k.rateLimitRemaining&&vs.jsxs("span",{className:"text-[10px] text-orange-600",children:[k.rateLimitRemaining," API calls remaining"]})]}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>I(!1),children:vs.jsx(yj,{className:"h-3 w-3"})})]}),k.error?vs.jsx("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:k.error}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"text-xs text-green-600 bg-green-50 p-2 rounded",children:["Successfully connected to Shopify store and retrieved ",null==(s=g9.find((e=>e.id===p)))?void 0:s.name.toLowerCase()," data."]}),k.data&&vs.jsxs("div",{children:[vs.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Sample Response Data:"}),vs.jsx("div",{className:"text-[10px] bg-gray-50 p-2 rounded font-mono max-h-32 overflow-y-auto",children:JSON.stringify(k.data,null,2)})]})]})]})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:n}),vs.jsx(_0,{type:"source",position:WX.Right,style:D4,isConnectable:n})]})},woocommerce:function({id:e,data:t,isConnectable:n}){var a,r,s,i,o,l;const[c,d]=cs.useState(!1),[u,f]=cs.useState(t.siteUrl||""),[m,p]=cs.useState(t.consumerKey||""),[h,g]=cs.useState(t.consumerSecret||""),[x,y]=cs.useState(t.resource||"orders"),[v,b]=cs.useState(t.action||"get"),[w,j]=cs.useState(t.filters||{}),[N,C]=cs.useState(t.variableMappings||[]),[S,k]=cs.useState(t.apiVersion||"v3"),[M,_]=cs.useState(!1),[I,A]=cs.useState(null),[E,L]=cs.useState(!1),[T,D]=cs.useState(!1),{setNodes:P}=f1(),{onDeleteNode:O,onDuplicateNode:R}=B8(),z=cs.useCallback((t=>{P((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,P]);cs.useEffect((()=>{z({siteUrl:u,consumerKey:m,consumerSecret:h,resource:x,action:v,filters:w,variableMappings:N,apiVersion:S})}),[z,u,m,h,x,v,w,N,S]);const F=(e,t,n)=>{const a=[...N];a[e][t]=n,C(a)},B=(e,t)=>{j((n=>({...n,[e]:t})))},U=(e,t,n)=>`${`${e.replace(/\/$/,"")}/wp-json/wc/${S}/`}${t}`,W=e=>{const t=new URLSearchParams;return Object.entries(e).forEach((([e,n])=>{if(n&&n.trim()){const a=(e=>{const t={"contact.email":"test@example.com","contact.first_name":"John","contact.last_name":"Doe","contact.phone":"+1234567890","order.id":"123","product.id":"456","customer.id":"789","coupon.code":"SAVE10","coupon.amount":"10","inventory.new_quantity":"50","date.last_week":new Date(Date.now()-6048e5).toISOString().split("T")[0],"date.today":(new Date).toISOString().split("T")[0],"date.now":(new Date).toISOString()};let n=e;return Object.entries(t).forEach((([e,t])=>{const a=new RegExp(`\\{\\{${e}\\}\\}`,"g");n=n.replace(a,t)})),n})(n);t.append(e,a)}})),t.toString()},G=e=>{switch(e){case"get":return"text-blue-600";case"post":return"text-green-600";case"put":return"text-orange-600";case"delete":return"text-red-600";default:return"text-gray-600"}};return vs.jsxs("div",{className:"node-woocommerce p-3 rounded-lg bg-white border border-purple-200 shadow-sm max-w-[320px] group",children:[vs.jsxs("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>R(e),children:vs.jsx(Ub,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Duplicate node"})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>O(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Delete node"})})]})})]}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(Gw,{className:"h-4 w-4 text-purple-600"}),vs.jsx("span",{children:"WooCommerce"}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>d(!c),children:c?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx($w,{className:"h-3.5 w-3.5 text-muted-foreground"}),vs.jsx("span",{className:fN("font-medium",G(v)),children:v.toUpperCase()}),vs.jsx("span",{className:"text-muted-foreground",children:"•"}),vs.jsx("span",{className:"text-xs text-muted-foreground truncate",children:(null==(a=v8.find((e=>e.id===x)))?void 0:a.name)||x})]}),vs.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[u&&vs.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-1 py-0.5 rounded",children:new URL(u).hostname}),Object.keys(w).length>0&&vs.jsxs("span",{className:"text-[10px] bg-blue-100 text-blue-800 px-1 py-0.5 rounded",children:[Object.keys(w).length," filter",1!==Object.keys(w).length?"s":""]}),N.length>0&&vs.jsxs("span",{className:"text-[10px] bg-indigo-100 text-indigo-800 px-1 py-0.5 rounded",children:[N.length," mapping",1!==N.length?"s":""]}),m&&vs.jsx("span",{className:"text-[10px] bg-orange-100 text-orange-800 px-1 py-0.5 rounded",children:"API Connected"}),vs.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-800 px-1 py-0.5 rounded",children:["API ",S]})]})]}),c&&vs.jsxs("div",{className:"mt-3 text-xs space-y-3 border rounded p-2 bg-secondary/10",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Quick Templates"}),vs.jsxs(ZU,{value:"",onValueChange:e=>{const t=w8.find((t=>t.id===e));t&&(y(t.resource),b(t.action),j(Object.fromEntries(Object.entries(t.filters).filter((([e,t])=>void 0!==t)))))},children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Choose a WooCommerce operation..."})}),vs.jsx(rW,{children:w8.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsx(EB,{className:"block font-medium",children:"WordPress Site Configuration"}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Site URL"}),vs.jsx(LB,{placeholder:"https://mystore.com",value:u,onChange:e=>f(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Consumer Key"}),vs.jsx(LB,{placeholder:"ck_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",value:m,onChange:e=>p(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Consumer Secret"}),vs.jsx(LB,{type:"password",placeholder:"cs_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",value:h,onChange:e=>g(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"API Version"}),vs.jsxs(ZU,{value:S,onValueChange:k,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select API version"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"v3",children:"v3 (Latest)"}),vs.jsx(sW,{value:"v2",children:"v2 (Legacy)"}),vs.jsx(sW,{value:"v1",children:"v1 (Deprecated)"})]})]})]}),vs.jsx("div",{className:"flex gap-2",children:vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-7 px-2 flex-1",onClick:async()=>{var e;if(!u.trim())return A({success:!1,error:"Please enter your WordPress site URL (e.g., https://mystore.com)"}),void L(!0);if(!(e=>{try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}})(u))return A({success:!1,error:"Please enter a valid URL (must include http:// or https://)"}),void L(!0);if(!m.trim()||!h.trim())return A({success:!1,error:"Please enter both Consumer Key and Consumer Secret"}),void L(!0);_(!0),A(null),L(!0);try{const t=(null==(e=v8.find((e=>e.id===x)))?void 0:e.endpoint)||x,n=U(u,t),a=W(w),r=a?`${n}?${a}`:n,s=btoa(`${m}:${h}`),i=await fetch(r,{method:v.toUpperCase(),headers:{Authorization:`Basic ${s}`,"Content-Type":"application/json",Accept:"application/json"}});let o;try{o=await i.json()}catch{o=await i.text()}if(i.ok){let e=0;Array.isArray(o)?e=o.length:o&&"object"==typeof o&&(e=1);let t=null;try{const e=U(u,"system_status"),n=await fetch(e,{headers:{Authorization:`Basic ${s}`,Accept:"application/json"}});n.ok&&(t=await n.json())}catch{}A({success:!0,data:o,responseCount:e,apiVersion:S,siteInfo:t})}else{let e="Request failed";(null==o?void 0:o.message)?e=o.message:(null==o?void 0:o.error)?e=o.error:401===i.status?e="Authentication failed. Please check your Consumer Key and Secret.":403===i.status?e="Access denied. Please check your API permissions.":404===i.status?e="Resource not found. Please check your site URL and WooCommerce installation.":400===i.status&&(e="Bad request. Please check your filters and parameters."),A({success:!1,error:e})}}catch(t){let e="Connection failed";t.message&&(e=t.message.includes("CORS")?"CORS error. Please ensure your WordPress site allows API access.":t.message.includes("SSL")?"SSL certificate error. Please check your site's SSL configuration.":t.message),A({success:!1,error:e})}finally{_(!1)}},disabled:M||!u.trim()||!m.trim()||!h.trim(),title:"Test connection to your WooCommerce store",children:[M?vs.jsx(uw,{className:"h-3 w-3 animate-spin mr-1"}):vs.jsx(_w,{className:"h-3 w-3 mr-1"}),"Test Connection"]})})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"WooCommerce Resource"}),vs.jsxs(ZU,{value:x,onValueChange:y,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select resource"})}),vs.jsx(rW,{children:v8.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Action Type"}),vs.jsxs(ZU,{value:v,onValueChange:b,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select action"})}),vs.jsx(rW,{children:b8.map((e=>vs.jsx(sW,{value:e.id,children:vs.jsx("span",{className:G(e.id),children:e.name})},e.id)))})]})]})]}),j8[x]&&vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsx(EB,{className:"block mb-2 font-medium",children:"Filters & Parameters"}),vs.jsx("div",{className:"space-y-2",children:j8[x].map((e=>{var t;return vs.jsxs("div",{className:"flex gap-2 items-center",children:[vs.jsxs("div",{className:"flex-1",children:[vs.jsx(EB,{className:"block mb-1 text-[10px] text-muted-foreground",children:e.label}),"select"===e.type?vs.jsxs(ZU,{value:w[e.key]||"",onValueChange:t=>B(e.key,t),children:[vs.jsx(tW,{className:"text-xs h-6",children:vs.jsx(eW,{placeholder:`Select ${e.label.toLowerCase()}`})}),vs.jsx(rW,{children:"select"===e.type&&"options"in e&&(null==(t=e.options)?void 0:t.map((e=>vs.jsx(sW,{value:e,children:e},e))))})]}):vs.jsx(LB,{type:e.type,placeholder:`Enter ${e.label.toLowerCase()}`,value:w[e.key]||e.default||"",onChange:t=>B(e.key,t.target.value),className:"text-xs h-6"})]}),w[e.key]&&vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 mt-4",onClick:()=>{return t=e.key,void j((e=>{const n={...e};return delete n[t],n}));var t},children:vs.jsx(yj,{className:"h-3 w-3"})})]},e.key)}))}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:"Use {{variable}} syntax for dynamic values"})]}),vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsx(EB,{className:"font-medium",children:"Response Variable Mapping"}),vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-6 text-xs",onClick:()=>{C([...N,{responseField:"",variableName:""}])},children:[vs.jsx(Iw,{className:"h-3 w-3 mr-1"}),"Add"]})]}),N.map(((e,t)=>vs.jsxs("div",{className:"flex gap-2 mb-2",children:[vs.jsx(LB,{placeholder:"0.id or name",value:e.responseField,onChange:e=>F(t,"responseField",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx("span",{className:"text-xs text-muted-foreground self-center",children:"→"}),vs.jsx(LB,{placeholder:"woocommerce.order_id",value:e.variableName,onChange:e=>F(t,"variableName",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>(e=>{C(N.filter(((t,n)=>n!==e)))})(t),children:vs.jsx(yj,{className:"h-3 w-3"})})]},t))),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Map WooCommerce response fields to flow variables for use in subsequent nodes"})]}),vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsxs("button",{className:"text-xs font-medium text-muted-foreground hover:text-foreground flex items-center gap-1 w-full",onClick:()=>D(!T),children:["Available Output Variables",T?vs.jsx(Ab,{className:"h-3 w-3"}):vs.jsx(Mb,{className:"h-3 w-3"})]}),T&&vs.jsxs("div",{className:"mt-2 text-[10px] bg-gray-50 p-2 rounded space-y-1",children:[vs.jsxs("div",{children:[vs.jsxs("code",{children:["{{woocommerce.",x,".data}}"]})," - ",null==(r=v8.find((e=>e.id===x)))?void 0:r.name," data"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.response.count}}"})," - Number of results returned"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.api.version}}"})," - API version used"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.site.url}}"})," - WordPress site URL"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.success}}"})," - Request success status"]}),"orders"===x&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.order.id}}"})," - Order ID"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.order.total}}"})," - Order total"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.order.status}}"})," - Order status"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.order.customer_id}}"})," - Customer ID"]})]}),"products"===x&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.product.id}}"})," - Product ID"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.product.name}}"})," - Product name"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.product.price}}"})," - Product price"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.product.stock_quantity}}"})," - Stock quantity"]})]}),"customers"===x&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.customer.id}}"})," - Customer ID"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.customer.email}}"})," - Customer email"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.customer.first_name}}"})," - First name"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{woocommerce.customer.last_name}}"})," - Last name"]})]}),N.map(((e,t)=>e.variableName&&vs.jsxs("div",{children:[vs.jsxs("code",{children:["{{",e.variableName,"}}"]})," - ",e.responseField||"Custom mapping"]},t)))]})]}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:vs.jsx("p",{children:"The WooCommerce Integration node connects to your WordPress/WooCommerce store's REST API. Response data will be available as variables in subsequent nodes."})}),E&&I&&vs.jsxs("div",{className:"mt-3 border rounded p-2 bg-secondary/5",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[I.success?vs.jsx(Db,{className:"h-4 w-4 text-green-600"}):vs.jsx(zb,{className:"h-4 w-4 text-red-600"}),vs.jsx("span",{className:"text-xs font-medium",children:I.success?"Connection Successful":"Connection Failed"}),void 0!==I.responseCount&&vs.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",I.responseCount," result",1!==I.responseCount?"s":"",")"]}),I.apiVersion&&vs.jsxs("span",{className:"text-[10px] text-blue-600",children:["API ",I.apiVersion]})]}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>L(!1),children:vs.jsx(yj,{className:"h-3 w-3"})})]}),I.error?vs.jsx("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:I.error}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"text-xs text-green-600 bg-green-50 p-2 rounded",children:["Successfully connected to WooCommerce store and retrieved ",null==(s=v8.find((e=>e.id===x)))?void 0:s.name.toLowerCase()," data."]}),I.siteInfo&&vs.jsxs("div",{children:[vs.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Store Information:"}),vs.jsxs("div",{className:"text-[10px] bg-gray-50 p-2 rounded",children:[vs.jsxs("div",{children:["WooCommerce Version: ",(null==(i=I.siteInfo.environment)?void 0:i.wc_version)||"Unknown"]}),vs.jsxs("div",{children:["WordPress Version: ",(null==(o=I.siteInfo.environment)?void 0:o.wp_version)||"Unknown"]}),vs.jsxs("div",{children:["PHP Version: ",(null==(l=I.siteInfo.environment)?void 0:l.php_version)||"Unknown"]})]})]}),I.data&&vs.jsxs("div",{children:[vs.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Sample Response Data:"}),vs.jsx("div",{className:"text-[10px] bg-gray-50 p-2 rounded font-mono max-h-32 overflow-y-auto",children:JSON.stringify(I.data,null,2)})]})]})]})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:n}),vs.jsx(_0,{type:"source",position:WX.Right,style:D4,isConnectable:n})]})},typebot:function({id:e,data:t,isConnectable:n}){var a,r;const[s,i]=cs.useState(!1),[o,l]=cs.useState(t.apiToken||""),[c,d]=cs.useState(t.workspaceId||""),[u,f]=cs.useState(t.typebotId||""),[m,p]=cs.useState(t.botName||""),[h,g]=cs.useState(t.operation||"start_conversation"),[x,y]=cs.useState(t.config||{}),[v,b]=cs.useState(t.variableMappings||[]),[w,j]=cs.useState(t.sessionTimeout||3600),[N,C]=cs.useState(!1),[S,k]=cs.useState(null),[M,_]=cs.useState(!1),[I,A]=cs.useState(!1),{setNodes:E}=f1(),{onDeleteNode:L,onDuplicateNode:T}=B8(),D=cs.useCallback((t=>{E((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,E]);cs.useEffect((()=>{D({apiToken:o,workspaceId:c,typebotId:u,botName:m,operation:h,config:x,variableMappings:v,sessionTimeout:w})}),[D,o,c,u,m,h,x,v,w]);const P=(e,t,n)=>{const a=[...v];a[e][t]=n,b(a)},O=(e,t)=>{y((n=>({...n,[e]:t})))},R=e=>{let t=e;return Object.entries({"contact.first_name":"John","contact.last_name":"Doe","contact.email":"john.doe@example.com","contact.phone":"+1234567890","message.content":"Hello, I need help with my order","typebot.session.id":"session_123456789","typebot.response.text":"How can I help you today?","user.id":"user_987654321","conversation.id":"conv_456789123"}).forEach((([e,n])=>{const a=new RegExp(`\\{\\{${e}\\}\\}`,"g");t=t.replace(a,n)})),t},z=e=>{switch(e){case"start_conversation":return"text-green-600";case"send_message":return"text-blue-600";case"get_response":return"text-purple-600";case"manage_session":return"text-orange-600";case"webhook_event":return"text-indigo-600";case"get_analytics":return"text-pink-600";default:return"text-gray-600"}};return vs.jsxs("div",{className:"node-typebot p-3 rounded-lg bg-white border border-blue-200 shadow-sm max-w-[320px] group",children:[vs.jsx("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>L(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Delete node"})})]})})}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(yw,{className:"h-4 w-4 text-blue-600"}),vs.jsx("span",{children:"Typebot Integration"}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>i(!s),children:s?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx(IF,{size:14,className:"text-muted-foreground"}),vs.jsx("span",{className:fN("font-medium",z(h)),children:(null==(a=b9.find((e=>e.id===h)))?void 0:a.name)||h}),vs.jsx("span",{className:"text-muted-foreground",children:"•"}),vs.jsx("span",{className:"text-xs text-muted-foreground truncate",children:m||"No bot selected"})]}),vs.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[u&&vs.jsxs("span",{className:"text-[10px] bg-blue-100 text-blue-800 px-1 py-0.5 rounded",children:["Bot: ",u.slice(0,8),"..."]}),Object.keys(x).length>0&&vs.jsxs("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-1 py-0.5 rounded",children:[Object.keys(x).length," config",1!==Object.keys(x).length?"s":""]}),v.length>0&&vs.jsxs("span",{className:"text-[10px] bg-indigo-100 text-indigo-800 px-1 py-0.5 rounded",children:[v.length," mapping",1!==v.length?"s":""]}),o&&vs.jsx("span",{className:"text-[10px] bg-green-100 text-green-800 px-1 py-0.5 rounded",children:"API Connected"}),vs.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-800 px-1 py-0.5 rounded",children:["Timeout: ",w,"s"]})]})]}),s&&vs.jsxs("div",{className:"mt-3 text-xs space-y-3 border rounded p-2 bg-secondary/10",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Quick Templates"}),vs.jsxs(ZU,{value:"",onValueChange:e=>{const t=w9.find((t=>t.id===e));if(t){g(t.operation);const e=Object.fromEntries(Object.entries(t.config).filter((([e,t])=>void 0!==t)));y(e)}},children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Choose a Typebot operation..."})}),vs.jsx(rW,{children:w9.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsx(EB,{className:"block font-medium",children:"Typebot API Configuration"}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"API Token"}),vs.jsx(LB,{type:"password",placeholder:"tb_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",value:o,onChange:e=>l(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Workspace ID (Optional)"}),vs.jsx(LB,{placeholder:"workspace_123456789",value:c,onChange:e=>d(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Typebot ID"}),vs.jsx(LB,{placeholder:"typebot_987654321",value:u,onChange:e=>f(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Session Timeout (seconds)"}),vs.jsx(LB,{type:"number",placeholder:"3600",value:w,onChange:e=>j(parseInt(e.target.value)||3600),className:"text-xs h-7"})]}),vs.jsx("div",{className:"flex gap-2",children:vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-7 px-2 flex-1",onClick:async()=>{var e,t;if(!o.trim())return k({success:!1,error:"Please enter your Typebot API token"}),void _(!0);if(!((t=o).startsWith("tb_")&&t.length>=35))return k({success:!1,error:'Please enter a valid Typebot API token (should start with "tb_")'}),void _(!0);if(!u.trim())return k({success:!1,error:"Please enter your Typebot ID"}),void _(!0);C(!0),k(null),_(!0);const n=Date.now();try{const t=`https://typebot.io/api/v1/typebots/${u}`,a=await fetch(t,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});let r=null;a.ok&&(r=await a.json(),p(r.name||"Unknown Bot"));const s=((e,t,n)=>{const a="https://typebot.io/api/v1";switch(e){case"start_conversation":return`${a}/typebots/${t}/startChat`;case"send_message":return`${a}/sessions/${n}/continueChat`;case"get_response":return`${a}/sessions/${n}`;case"manage_session":return`${a}/sessions/${n||"new"}`;case"get_analytics":return`${a}/typebots/${t}/analytics`;case"webhook_event":return`${a}/typebots/${t}/webhooks`;default:return`${a}/typebots/${t}`}})(h,u,x.sessionId);let i={},l="GET";switch(h){case"start_conversation":l="POST",i={isStreamEnabled:x.isStreamEnabled||!1,prefilledVariables:x.prefilledVariables||{},isOnlyRegisteredResults:x.isOnlyRegisteredResults||!1};break;case"send_message":l="POST",i={message:R(x.message||"Test message"),sessionId:x.sessionId||"test_session"};break;case"get_response":case"get_analytics":l="GET";break;case"manage_session":l="create"===x.action?"POST":"PUT",i={variables:x.variables||{}}}const c=await fetch(s,{method:l,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},..."GET"!==l&&{body:JSON.stringify(i)}}),d=Date.now()-n;let f;try{f=await c.json()}catch{f=await c.text()}if(c.ok){let t=null;f.sessionId?t=f.sessionId:(null==(e=f.session)?void 0:e.id)&&(t=f.session.id),k({success:!0,data:f,botInfo:r,sessionId:t,responseTime:d})}else{let e="Request failed";(null==f?void 0:f.message)?e=f.message:(null==f?void 0:f.error)?e=f.error:401===c.status?e="Authentication failed. Please check your API token.":403===c.status?e="Access denied. Please check your permissions.":404===c.status?e="Typebot not found. Please check your Typebot ID.":429===c.status&&(e="Rate limit exceeded. Please try again later."),k({success:!1,error:e,responseTime:d})}}catch(a){const e=Date.now()-n;let t="Connection failed";a.message&&(t=a.message.includes("CORS")?"CORS error. Please ensure your domain is allowed in Typebot settings.":a.message.includes("network")?"Network error. Please check your internet connection.":a.message),k({success:!1,error:t,responseTime:e})}finally{C(!1)}},disabled:N||!o.trim()||!u.trim(),title:"Test connection to your Typebot",children:[N?vs.jsx(uw,{className:"h-3 w-3 animate-spin mr-1"}):vs.jsx(_w,{className:"h-3 w-3 mr-1"}),"Test Connection"]})})]}),vs.jsx("div",{className:"space-y-2 pt-2 border-t",children:vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Typebot Operation"}),vs.jsxs(ZU,{value:h,onValueChange:g,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select operation"})}),vs.jsx(rW,{children:b9.map((e=>vs.jsx(sW,{value:e.id,children:vs.jsxs("div",{children:[vs.jsx("div",{className:fN("font-medium",z(e.id)),children:e.name}),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:e.description})]})},e.id)))})]})]})}),j9[h]&&vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsx(EB,{className:"block mb-2 font-medium",children:"Operation Configuration"}),vs.jsx("div",{className:"space-y-2",children:j9[h].map((e=>{var t;return vs.jsxs("div",{className:"flex gap-2 items-center",children:[vs.jsxs("div",{className:"flex-1",children:[vs.jsxs(EB,{className:"block mb-1 text-[10px] text-muted-foreground",children:[e.label,e.required&&vs.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"select"===e.type?vs.jsxs(ZU,{value:x[e.key]||"",onValueChange:t=>O(e.key,t),children:[vs.jsx(tW,{className:"text-xs h-6",children:vs.jsx(eW,{placeholder:`Select ${e.label.toLowerCase()}`})}),vs.jsx(rW,{children:null==(t=e.options)?void 0:t.map((e=>vs.jsx(sW,{value:e,children:e},e)))})]}):"boolean"===e.type?vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(L4,{checked:x[e.key]||e.default||!1,onCheckedChange:t=>O(e.key,t)}),vs.jsx("span",{className:"text-xs text-muted-foreground",children:x[e.key]?"Enabled":"Disabled"})]}):"object"===e.type?vs.jsx(TB,{placeholder:'{"key": "value"}',value:"object"==typeof x[e.key]?JSON.stringify(x[e.key],null,2):x[e.key]||"",onChange:t=>{try{const n=JSON.parse(t.target.value);O(e.key,n)}catch{O(e.key,t.target.value)}},className:"text-xs h-16 font-mono"}):vs.jsx(LB,{type:e.type,placeholder:e.description||`Enter ${e.label.toLowerCase()}`,value:String(x[e.key]??e.default??""),onChange:t=>O(e.key,"number"===e.type?parseInt(t.target.value)||0:t.target.value),className:"text-xs h-6"})]}),void 0!==x[e.key]&&!e.required&&vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 mt-4",onClick:()=>{return t=e.key,void y((e=>{const n={...e};return delete n[t],n}));var t},children:vs.jsx(yj,{className:"h-3 w-3"})})]},e.key)}))}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:"Use {{variable}} syntax for dynamic values"})]}),vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsx(EB,{className:"font-medium",children:"Response Variable Mapping"}),vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-6 text-xs",onClick:()=>{b([...v,{responseField:"",variableName:""}])},children:[vs.jsx(Iw,{className:"h-3 w-3 mr-1"}),"Add"]})]}),v.map(((e,t)=>vs.jsxs("div",{className:"flex gap-2 mb-2",children:[vs.jsx(LB,{placeholder:"response.text or sessionId",value:e.responseField,onChange:e=>P(t,"responseField",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx("span",{className:"text-xs text-muted-foreground self-center",children:"→"}),vs.jsx(LB,{placeholder:"typebot.response_text",value:e.variableName,onChange:e=>P(t,"variableName",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>(e=>{b(v.filter(((t,n)=>n!==e)))})(t),children:vs.jsx(yj,{className:"h-3 w-3"})})]},t))),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Map Typebot response fields to flow variables for use in subsequent nodes"})]}),vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsxs("button",{className:"text-xs font-medium text-muted-foreground hover:text-foreground flex items-center gap-1 w-full",onClick:()=>A(!I),children:["Available Output Variables",I?vs.jsx(Ab,{className:"h-3 w-3"}):vs.jsx(Mb,{className:"h-3 w-3"})]}),I&&vs.jsxs("div",{className:"mt-2 text-[10px] bg-gray-50 p-2 rounded space-y-1",children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.response.text}}"})," - Bot response message"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.session.id}}"})," - Conversation session ID"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.bot.name}}"})," - Bot name"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.conversation.status}}"})," - Conversation status"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.timestamp}}"})," - Response timestamp"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.success}}"})," - Operation success status"]}),"start_conversation"===h&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.session.new}}"})," - New session created"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.variables}}"})," - Prefilled variables"]})]}),"send_message"===h&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.message.sent}}"})," - Message sent status"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.input.type}}"})," - Input type used"]})]}),"get_response"===h&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.response.blocks}}"})," - Response blocks array"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.response.input}}"})," - Expected input type"]})]}),"get_analytics"===h&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.analytics.views}}"})," - Total views"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{typebot.analytics.completions}}"})," - Completion rate"]})]}),v.map(((e,t)=>e.variableName&&vs.jsxs("div",{children:[vs.jsxs("code",{children:["{{",e.variableName,"}}"]})," - ",e.responseField||"Custom mapping"]},t)))]})]}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:vs.jsx("p",{children:"The Typebot Integration node connects to your Typebot chatbot via API. Response data will be available as variables in subsequent nodes."})}),M&&S&&vs.jsxs("div",{className:"mt-3 border rounded p-2 bg-secondary/5",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[S.success?vs.jsx(Db,{className:"h-4 w-4 text-green-600"}):vs.jsx(zb,{className:"h-4 w-4 text-red-600"}),vs.jsx("span",{className:"text-xs font-medium",children:S.success?"Connection Successful":"Connection Failed"}),S.responseTime&&vs.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",S.responseTime,"ms)"]}),S.sessionId&&vs.jsxs("span",{className:"text-[10px] text-blue-600",children:["Session: ",S.sessionId.slice(0,8),"..."]})]}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>_(!1),children:vs.jsx(yj,{className:"h-3 w-3"})})]}),S.error?vs.jsx("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:S.error}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"text-xs text-green-600 bg-green-50 p-2 rounded",children:["Successfully connected to Typebot and executed ",null==(r=b9.find((e=>e.id===h)))?void 0:r.name.toLowerCase()," operation."]}),S.botInfo&&vs.jsxs("div",{children:[vs.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Bot Information:"}),vs.jsxs("div",{className:"text-[10px] bg-gray-50 p-2 rounded",children:[vs.jsxs("div",{children:["Name: ",S.botInfo.name||"Unknown"]}),vs.jsxs("div",{children:["ID: ",S.botInfo.id||u]}),vs.jsxs("div",{children:["Status: ",S.botInfo.isPublished?"Published":"Draft"]})]})]}),S.data&&vs.jsxs("div",{children:[vs.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Sample Response Data:"}),vs.jsx("div",{className:"text-[10px] bg-gray-50 p-2 rounded font-mono max-h-32 overflow-y-auto",children:JSON.stringify(S.data,null,2)})]})]})]})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:n}),vs.jsx(_0,{type:"source",position:WX.Right,style:D4,isConnectable:n})]})},flowise:function({id:e,data:t,isConnectable:n}){var a,r;const[s,i]=cs.useState(!1),[o,l]=cs.useState(t.instanceUrl||""),[c,d]=cs.useState(t.apiKey||""),[u,f]=cs.useState(t.chatflowId||""),[m,p]=cs.useState(t.chatflowName||""),[h,g]=cs.useState(t.operation||"start_chatflow"),[x,y]=cs.useState(t.config||{}),[v,b]=cs.useState(t.variableMappings||[]),[w,j]=cs.useState(t.sessionTimeout||3600),[N,C]=cs.useState(!1),[S,k]=cs.useState(null),[M,_]=cs.useState(!1),[I,A]=cs.useState(!1),{setNodes:E}=f1(),{onDeleteNode:L,onDuplicateNode:T}=B8(),D=cs.useCallback((t=>{E((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,E]);cs.useEffect((()=>{D({instanceUrl:o,apiKey:c,chatflowId:u,chatflowName:m,operation:h,config:x,variableMappings:v,sessionTimeout:w})}),[D,o,c,u,m,h,x,v,w]);const P=(e,t,n)=>{const a=[...v];a[e][t]=n,b(a)},O=(e,t)=>{y((n=>({...n,[e]:t})))},R=e=>{const t={"contact.id":"contact_123456789","contact.first_name":"John","contact.email":"john.doe@example.com","message.content":"Hello, I need help with my account","user.query":"What are your business hours?","flowise.session.id":"session_987654321","flowise.response.text":"I can help you with that!",timestamp:Date.now().toString(),"user.id":"user_456789123"};let n=e;return Object.entries(t).forEach((([e,t])=>{const a=new RegExp(`\\{\\{${e}\\}\\}`,"g");n=n.replace(a,t)})),n},z=(e,t,n)=>{const a=o.replace(/\/$/,"");switch(e){case"start_chatflow":case"send_message":case"stream_response":default:return`${a}/api/v1/prediction/${t}`;case"get_response":case"manage_session":return`${a}/api/v1/chatmessage/${t}`;case"get_chatflow_info":return`${a}/api/v1/chatflows/${t}`}},F=e=>{switch(e){case"start_chatflow":return"text-green-600";case"send_message":return"text-blue-600";case"get_response":return"text-purple-600";case"manage_session":return"text-orange-600";case"stream_response":return"text-indigo-600";case"get_chatflow_info":return"text-pink-600";default:return"text-gray-600"}};return vs.jsxs("div",{className:"node-flowise p-3 rounded-lg bg-white border border-purple-200 shadow-sm max-w-[320px] group",children:[vs.jsx("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>L(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Delete node"})})]})})}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(wb,{className:"h-4 w-4 text-purple-600"}),vs.jsx("span",{children:"Flowise Integration"}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>i(!s),children:s?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx(xj,{className:"h-3.5 w-3.5 text-muted-foreground"}),vs.jsx("span",{className:fN("font-medium",F(h)),children:(null==(a=p3.find((e=>e.id===h)))?void 0:a.name)||h}),vs.jsx("span",{className:"text-muted-foreground",children:"•"}),vs.jsx("span",{className:"text-xs text-muted-foreground truncate",children:m||"No chatflow selected"})]}),vs.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[u&&vs.jsxs("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-1 py-0.5 rounded",children:["Flow: ",u.slice(0,8),"..."]}),Object.keys(x).length>0&&vs.jsxs("span",{className:"text-[10px] bg-blue-100 text-blue-800 px-1 py-0.5 rounded",children:[Object.keys(x).length," config",1!==Object.keys(x).length?"s":""]}),v.length>0&&vs.jsxs("span",{className:"text-[10px] bg-indigo-100 text-indigo-800 px-1 py-0.5 rounded",children:[v.length," mapping",1!==v.length?"s":""]}),c&&vs.jsx("span",{className:"text-[10px] bg-green-100 text-green-800 px-1 py-0.5 rounded",children:"API Connected"}),vs.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-800 px-1 py-0.5 rounded",children:["Timeout: ",w,"s"]})]})]}),s&&vs.jsxs("div",{className:"mt-3 text-xs space-y-3 border rounded p-2 bg-secondary/10",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Quick Templates"}),vs.jsxs(ZU,{value:"",onValueChange:e=>{const t=h3.find((t=>t.id===e));if(t){g(t.operation);const e=Object.fromEntries(Object.entries(t.config).filter((([e,t])=>void 0!==t)));y(e)}},children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Choose a Flowise operation..."})}),vs.jsx(rW,{children:h3.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsx(EB,{className:"block font-medium",children:"Flowise API Configuration"}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Instance URL"}),vs.jsx(LB,{placeholder:"https://your-flowise-instance.com",value:o,onChange:e=>l(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"API Key (Optional)"}),vs.jsx(LB,{type:"password",placeholder:"your-api-key-here",value:c,onChange:e=>d(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Chatflow ID"}),vs.jsx(LB,{placeholder:"chatflow-uuid-here",value:u,onChange:e=>f(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Session Timeout (seconds)"}),vs.jsx(LB,{type:"number",placeholder:"3600",value:w,onChange:e=>j(parseInt(e.target.value)||3600),className:"text-xs h-7"})]}),vs.jsx("div",{className:"flex gap-2",children:vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-7 px-2 flex-1",onClick:async()=>{if(!o.trim())return k({success:!1,error:"Please enter your Flowise instance URL"}),void _(!0);if(!(e=>{try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}})(o))return k({success:!1,error:"Please enter a valid URL (must include http:// or https://)"}),void _(!0);if(!u.trim())return k({success:!1,error:"Please enter your Chatflow ID"}),void _(!0);C(!0),k(null),_(!0);const e=Date.now();try{const t=z("get_chatflow_info",u),n={"Content-Type":"application/json"};c.trim()&&(n.Authorization=`Bearer ${c}`);const a=await fetch(t,{headers:n});let r=null;a.ok&&(r=await a.json(),p(r.name||"Unknown Chatflow"));const s=z(h,u,x.sessionId);let i={},o="GET";switch(h){case"start_chatflow":case"send_message":o="POST",i={question:R(x.question||"Hello, this is a test message"),sessionId:x.sessionId||`test_session_${Date.now()}`,streaming:x.streaming||!1,overrideConfig:x.overrideConfig||{}};break;case"stream_response":o="POST",i={question:R(x.question||"Test streaming message"),sessionId:x.sessionId||`stream_session_${Date.now()}`,streaming:!0};break;case"get_response":case"get_chatflow_info":o="GET";break;case"manage_session":o="create"===x.action?"POST":"PUT",i={sessionId:x.sessionId||`managed_session_${Date.now()}`,memory:x.memory||{}}}const l=await fetch(s,{method:o,headers:n,..."GET"!==o&&{body:JSON.stringify(i)}}),d=Date.now()-e;let f;try{f=await l.json()}catch{f=await l.text()}if(l.ok){let e=null;f.sessionId?e=f.sessionId:i.sessionId&&(e=i.sessionId),k({success:!0,data:f,chatflowInfo:r,sessionId:e,responseTime:d})}else{let e="Request failed";(null==f?void 0:f.message)?e=f.message:(null==f?void 0:f.error)?e=f.error:401===l.status?e="Authentication failed. Please check your API key.":403===l.status?e="Access denied. Please check your permissions.":404===l.status?e="Chatflow not found. Please check your Chatflow ID.":429===l.status&&(e="Rate limit exceeded. Please try again later."),k({success:!1,error:e,responseTime:d})}}catch(t){const n=Date.now()-e;let a="Connection failed";t.message&&(a=t.message.includes("CORS")?"CORS error. Please ensure your Flowise instance allows cross-origin requests.":t.message.includes("network")?"Network error. Please check your internet connection.":t.message),k({success:!1,error:a,responseTime:n})}finally{C(!1)}},disabled:N||!o.trim()||!u.trim(),title:"Test connection to your Flowise instance",children:[N?vs.jsx(uw,{className:"h-3 w-3 animate-spin mr-1"}):vs.jsx(_w,{className:"h-3 w-3 mr-1"}),"Test Connection"]})})]}),vs.jsx("div",{className:"space-y-2 pt-2 border-t",children:vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Flowise Operation"}),vs.jsxs(ZU,{value:h,onValueChange:g,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select operation"})}),vs.jsx(rW,{children:p3.map((e=>vs.jsx(sW,{value:e.id,children:vs.jsxs("div",{children:[vs.jsx("div",{className:fN("font-medium",F(e.id)),children:e.name}),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:e.description})]})},e.id)))})]})]})}),g3[h]&&vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsx(EB,{className:"block mb-2 font-medium",children:"Operation Configuration"}),vs.jsx("div",{className:"space-y-2",children:g3[h].map((e=>{var t;return vs.jsxs("div",{className:"flex gap-2 items-center",children:[vs.jsxs("div",{className:"flex-1",children:[vs.jsxs(EB,{className:"block mb-1 text-[10px] text-muted-foreground",children:[e.label,e.required&&vs.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"select"===e.type?vs.jsxs(ZU,{value:x[e.key]||"",onValueChange:t=>O(e.key,t),children:[vs.jsx(tW,{className:"text-xs h-6",children:vs.jsx(eW,{placeholder:`Select ${e.label.toLowerCase()}`})}),vs.jsx(rW,{children:null==(t=e.options)?void 0:t.map((e=>vs.jsx(sW,{value:e,children:e},e)))})]}):"boolean"===e.type?vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(L4,{checked:x[e.key]||e.default||!1,onCheckedChange:t=>O(e.key,t)}),vs.jsx("span",{className:"text-xs text-muted-foreground",children:x[e.key]?"Enabled":"Disabled"})]}):"object"===e.type?vs.jsx(TB,{placeholder:'{"key": "value"}',value:"object"==typeof x[e.key]?JSON.stringify(x[e.key],null,2):x[e.key]||"",onChange:t=>{try{const n=JSON.parse(t.target.value);O(e.key,n)}catch{O(e.key,t.target.value)}},className:"text-xs h-16 font-mono"}):vs.jsx(LB,{type:e.type,placeholder:e.description||`Enter ${e.label.toLowerCase()}`,value:x[e.key]||e.default||"",onChange:t=>O(e.key,"number"===e.type?parseInt(t.target.value)||0:t.target.value),className:"text-xs h-6"})]}),void 0!==x[e.key]&&!e.required&&vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 mt-4",onClick:()=>{return t=e.key,void y((e=>{const n={...e};return delete n[t],n}));var t},children:vs.jsx(yj,{className:"h-3 w-3"})})]},e.key)}))}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:"Use {{variable}} syntax for dynamic values"})]}),vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsx(EB,{className:"font-medium",children:"Response Variable Mapping"}),vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-6 text-xs",onClick:()=>{b([...v,{responseField:"",variableName:""}])},children:[vs.jsx(Iw,{className:"h-3 w-3 mr-1"}),"Add"]})]}),v.map(((e,t)=>vs.jsxs("div",{className:"flex gap-2 mb-2",children:[vs.jsx(LB,{placeholder:"text or sessionId",value:e.responseField,onChange:e=>P(t,"responseField",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx("span",{className:"text-xs text-muted-foreground self-center",children:"→"}),vs.jsx(LB,{placeholder:"flowise.ai_response",value:e.variableName,onChange:e=>P(t,"variableName",e.target.value),className:"text-xs h-7 flex-1"}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>(e=>{b(v.filter(((t,n)=>n!==e)))})(t),children:vs.jsx(yj,{className:"h-3 w-3"})})]},t))),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Map Flowise response fields to flow variables for use in subsequent nodes"})]}),vs.jsxs("div",{className:"pt-2 border-t",children:[vs.jsxs("button",{className:"text-xs font-medium text-muted-foreground hover:text-foreground flex items-center gap-1 w-full",onClick:()=>A(!I),children:["Available Output Variables",I?vs.jsx(Ab,{className:"h-3 w-3"}):vs.jsx(Mb,{className:"h-3 w-3"})]}),I&&vs.jsxs("div",{className:"mt-2 text-[10px] bg-gray-50 p-2 rounded space-y-1",children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.response.text}}"})," - AI response text"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.session.id}}"})," - Conversation session ID"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.chatflow.name}}"})," - Chatflow name"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.conversation.status}}"})," - Conversation status"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.timestamp}}"})," - Response timestamp"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.success}}"})," - Operation success status"]}),"start_chatflow"===h&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.session.new}}"})," - New session created"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.config.override}}"})," - Override configuration"]})]}),"send_message"===h&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.message.sent}}"})," - Message sent status"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.streaming.enabled}}"})," - Streaming status"]})]}),"get_response"===h&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.response.format}}"})," - Response format"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.response.complete}}"})," - Response completion status"]})]}),"stream_response"===h&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.stream.chunks}}"})," - Stream chunks array"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.stream.complete}}"})," - Stream completion status"]})]}),"get_chatflow_info"===h&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.chatflow.nodes}}"})," - Chatflow nodes"]}),vs.jsxs("div",{children:[vs.jsx("code",{children:"{{flowise.chatflow.version}}"})," - Chatflow version"]})]}),v.map(((e,t)=>e.variableName&&vs.jsxs("div",{children:[vs.jsxs("code",{children:["{{",e.variableName,"}}"]})," - ",e.responseField||"Custom mapping"]},t)))]})]}),vs.jsx("div",{className:"text-[10px] text-muted-foreground mt-2",children:vs.jsx("p",{children:"The Flowise Integration node connects to your Flowise AI workflows via API. Response data will be available as variables in subsequent nodes."})}),M&&S&&vs.jsxs("div",{className:"mt-3 border rounded p-2 bg-secondary/5",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[S.success?vs.jsx(Db,{className:"h-4 w-4 text-green-600"}):vs.jsx(zb,{className:"h-4 w-4 text-red-600"}),vs.jsx("span",{className:"text-xs font-medium",children:S.success?"Connection Successful":"Connection Failed"}),S.responseTime&&vs.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",S.responseTime,"ms)"]}),S.sessionId&&vs.jsxs("span",{className:"text-[10px] text-purple-600",children:["Session: ",S.sessionId.slice(0,8),"..."]})]}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>_(!1),children:vs.jsx(yj,{className:"h-3 w-3"})})]}),S.error?vs.jsx("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:S.error}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"text-xs text-green-600 bg-green-50 p-2 rounded",children:["Successfully connected to Flowise and executed ",null==(r=p3.find((e=>e.id===h)))?void 0:r.name.toLowerCase()," operation."]}),S.chatflowInfo&&vs.jsxs("div",{children:[vs.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Chatflow Information:"}),vs.jsxs("div",{className:"text-[10px] bg-gray-50 p-2 rounded",children:[vs.jsxs("div",{children:["Name: ",S.chatflowInfo.name||"Unknown"]}),vs.jsxs("div",{children:["ID: ",S.chatflowInfo.id||u]}),vs.jsxs("div",{children:["Status: ",S.chatflowInfo.deployed?"Deployed":"Draft"]}),vs.jsxs("div",{children:["Category: ",S.chatflowInfo.category||"General"]})]})]}),S.data&&vs.jsxs("div",{children:[vs.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Sample Response Data:"}),vs.jsx("div",{className:"text-[10px] bg-gray-50 p-2 rounded font-mono max-h-32 overflow-y-auto",children:JSON.stringify(S.data,null,2)})]})]})]})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:n}),vs.jsx(_0,{type:"source",position:WX.Right,style:D4,isConnectable:n})]})},n8n:function({id:e,data:t,isConnectable:n}){var a,r,s,i,o,l,c,d,u,f,m,p,h;const[g,x]=cs.useState(!1),[y,v]=cs.useState(t.instanceUrl||""),[b,w]=cs.useState(t.apiKey||""),[j,N]=cs.useState(t.webhookUrl||""),[C,S]=cs.useState(t.chatWebhookUrl||""),[k,M]=cs.useState(t.workflowId||""),[_,I]=cs.useState(t.workflowName||""),[A]=cs.useState("execute_workflow"),[E,L]=cs.useState(t.timeout||30),[T,D]=cs.useState(!1),[P,O]=cs.useState(null),[R,z]=cs.useState(!1),[F,B]=cs.useState(null),[U,W]=cs.useState({}),[G,V]=cs.useState(0),[H,q]=cs.useState(!1),[$,Y]=cs.useState([]),[Q,K]=cs.useState(!1),[J,Z]=cs.useState(null),{setNodes:X}=f1(),{onDeleteNode:ee}=B8(),te=cs.useCallback((t=>{X((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,X]),ne=(e,t,n=!1)=>{let a=!0,r="";if(n&&!t.trim())a=!1,r="This field is required";else if("instanceUrl"===e&&t){/^https?:\/\/.+/.test(t)||(a=!1,r="Please enter a valid URL (e.g., https://your-n8n-instance.com)")}else if("timeout"===e&&t){const e=parseInt(t);(isNaN(e)||e<1||e>300)&&(a=!1,r="Timeout must be between 1 and 300 seconds")}return W((t=>({...t,[e]:{isValid:a,message:r}}))),a};cs.useEffect((()=>{(()=>{const e=[y,_,A],t=e.filter((e=>e&&e.trim())).length,n=[b,j],a=n.filter((e=>e&&e.trim())).length,r=t/e.length*70+a/n.length*30;V(Math.round(r))})()}),[y,_,A,b,j]),cs.useEffect((()=>{te({instanceUrl:y,apiKey:b,webhookUrl:j,chatWebhookUrl:C,workflowId:k,workflowName:_,operation:A,timeout:E})}),[te,y,b,j,C,k,_,A,E]);const ae=()=>{K(!1),Z(null)};return cs.useEffect((()=>{const e=e=>{Q&&"Escape"===e.key&&ae()};if(Q)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[Q]),vs.jsxs("div",{className:"node-n8n p-3 rounded-lg bg-white border border-orange-200 shadow-sm min-w-[380px] max-w-[480px] group",children:[vs.jsx("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>ee(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Delete node"})})]})})}),vs.jsx(_0,{type:"target",position:WX.Left,isConnectable:n,className:"w-3 h-3 bg-orange-400 border-2 border-white"}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(xj,{className:"h-4 w-4 text-orange-600"})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"n8n Workflow Automation Integration"})})]})}),vs.jsx("span",{children:"n8n Integration"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs(dk,{variant:G>=70?"default":"secondary",className:fN("text-[10px] px-1.5 py-0.5",G>=70?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[G,"% configured"]})}),vs.jsxs(ek,{side:"top",children:[vs.jsxs("p",{className:"text-xs",children:["Configuration completeness: ",G,"%"]}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:G<70?"Complete required fields to reach 70%":"Configuration ready!"})]})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>x(!g),children:[g?vs.jsx(Yb,{className:"h-3 w-3"}):vs.jsx(Qb,{className:"h-3 w-3"}),g?"Hide":"Edit"]})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:g?"Hide configuration panel":"Show configuration panel"})})]})})]}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsx("span",{className:"text-lg",children:(null==(a=d6.find((e=>e.id===A)))?void 0:a.icon)||"⚙️"}),vs.jsx("span",{className:fN("font-medium",(e=>{const t=d6.find((t=>t.id===e));return(null==t?void 0:t.color)||"text-gray-600"})(A)),children:(null==(r=d6.find((e=>e.id===A)))?void 0:r.name)||A})]})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs font-medium",children:null==(s=d6.find((e=>e.id===A)))?void 0:s.name}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:null==(i=d6.find((e=>e.id===A)))?void 0:i.tooltip})]})]})}),vs.jsx("span",{className:"text-muted-foreground",children:"•"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs("div",{className:"flex items-center gap-1",children:[_||j?vs.jsx(Db,{className:"h-3 w-3 text-green-600"}):vs.jsx(Lb,{className:"h-3 w-3 text-yellow-600"}),vs.jsx("span",{className:"text-xs text-muted-foreground truncate",children:_||j?"Configured":"Not configured"})]})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:_||j?"n8n connection is properly configured":"Please configure n8n instance URL and workflow details"})})]})})]}),vs.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[_&&vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs(dk,{className:"text-[10px] bg-orange-100 text-orange-800 px-1 py-0.5 rounded cursor-help",children:["Workflow: ",_.length>12?_.slice(0,12)+"...":_]})}),vs.jsx(ek,{side:"top",children:vs.jsxs("p",{className:"text-xs",children:["Target workflow: ",_]})})]})}),j&&vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(dk,{className:"text-[10px] bg-blue-100 text-blue-800 px-1 py-0.5 rounded cursor-help",children:"Webhook Connected"})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs",children:"Webhook URL configured"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:j})]})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs(dk,{className:"text-[10px] bg-gray-100 text-gray-800 px-1 py-0.5 rounded cursor-help",children:["Timeout: ",E,"s"]})}),vs.jsxs(ek,{side:"top",children:[vs.jsxs("p",{className:"text-xs",children:["Request timeout: ",E," seconds"]}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum time to wait for n8n response"})]})]})})]})]}),g&&vs.jsx("div",{className:"mt-3 text-xs space-y-3 border rounded p-2 bg-secondary/10",children:vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[vs.jsx(Fw,{className:"h-3.5 w-3.5 text-orange-600"}),vs.jsx(EB,{className:"font-medium",children:"n8n API Configuration"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs",children:"Configure connection to your n8n instance"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Required fields are marked with *"})]})]})})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Instance URL *"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs font-medium",children:"Your n8n instance URL"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Examples:"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"• https://your-n8n.example.com"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"• https://n8n.yourcompany.com"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"• http://localhost:5678 (for local)"})]})]})})]}),vs.jsxs("div",{className:"relative",children:[vs.jsx(LB,{placeholder:"https://your-n8n-instance.com",value:y,onChange:e=>{v(e.target.value),ne("instanceUrl",e.target.value,!0)},className:fN("text-xs h-7 pr-8",!1===(null==(o=U.instanceUrl)?void 0:o.isValid)?"border-red-500":!0===(null==(l=U.instanceUrl)?void 0:l.isValid)?"border-green-500":"")}),y&&vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"sm",className:"absolute right-1 top-0.5 h-6 w-6 p-0",onClick:()=>(async(e,t)=>{try{await navigator.clipboard.writeText(e),B(t),setTimeout((()=>B(null)),2e3)}catch(pBe){}})(y,"instanceUrl"),children:"instanceUrl"===F?vs.jsx(Db,{className:"h-3 w-3 text-green-600"}):vs.jsx(Ub,{className:"h-3 w-3 text-muted-foreground"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"instanceUrl"===F?"Copied!":"Copy URL to clipboard"})})]})})]}),(null==(c=U.instanceUrl)?void 0:c.message)&&vs.jsx("p",{className:"text-[10px] text-red-600 mt-1",children:U.instanceUrl.message})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"API Key"}),vs.jsx(dk,{variant:"secondary",className:"text-[9px] px-1 py-0",children:"Optional"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs font-medium",children:"n8n API Key (optional)"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"How to find your API key:"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"1. Go to n8n Settings → API"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"2. Create a new API key"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"3. Copy and paste it here"}),vs.jsx("p",{className:"text-xs text-yellow-600",children:"Required for private instances"})]})]})})]}),vs.jsx(LB,{type:"password",placeholder:"n8n_api_key_...",value:b,onChange:e=>w(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Workflow ID/Name *"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs font-medium",children:"Target workflow identifier"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"You can use either:"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"• Workflow ID (numeric)"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"• Workflow name (text)"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Find this in your n8n workflows list"})]})]})})]}),vs.jsx(LB,{placeholder:"my-workflow or 123",value:_,onChange:e=>{I(e.target.value),Z(null),ne("workflowName",e.target.value,!0)},className:fN("text-xs h-7",null!==J?"border-orange-500 bg-orange-50":!1===(null==(d=U.workflowName)?void 0:d.isValid)?"border-red-500":!0===(null==(u=U.workflowName)?void 0:u.isValid)?"border-green-500":"")}),(null==(f=U.workflowName)?void 0:f.message)&&vs.jsx("p",{className:"text-[10px] text-red-600 mt-1",children:U.workflowName.message})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Chat Webhook URL"}),vs.jsx(dk,{variant:"secondary",className:"text-[8px] px-1 py-0",children:"Optional"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs font-medium",children:"Direct URL to your n8n chat trigger webhook"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Use this if automatic webhook detection fails"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Example: https://n8n.com/webhook/your-webhook-id/chat"}),vs.jsx("p",{className:"text-xs text-green-600",children:"Takes priority over automatic detection"})]})]})})]}),vs.jsx(LB,{placeholder:"https://n8n.com/webhook/your-webhook-id/chat",value:C,onChange:e=>S(e.target.value),className:"text-xs h-7"}),C&&vs.jsx("p",{className:"text-[10px] text-green-600 mt-1",children:"✓ Direct webhook URL will be used"})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx(EB,{className:"text-xs font-medium",children:"Timeout (seconds)"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs font-medium",children:"Request timeout"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum time to wait for n8n response"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Range: 1-300 seconds"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Default: 30 seconds"})]})]})})]}),vs.jsx(LB,{type:"number",min:"1",max:"300",placeholder:"30",value:E,onChange:e=>{const t=e.target.value;L(parseInt(t)||30),ne("timeout",t)},className:fN("text-xs h-7",!1===(null==(m=U.timeout)?void 0:m.isValid)?"border-red-500":!0===(null==(p=U.timeout)?void 0:p.isValid)?"border-green-500":"")}),(null==(h=U.timeout)?void 0:h.message)&&vs.jsx("p",{className:"text-[10px] text-red-600 mt-1",children:U.timeout.message})]}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-7 px-2 flex-1",onClick:async()=>{if(!y.trim())return O({success:!1,error:"Please enter your n8n instance URL"}),void z(!0);try{new URL(y)}catch{return O({success:!1,error:"Invalid URL format. Please enter a valid URL (e.g., https://your-instance.app.n8n.cloud)"}),void z(!0)}if(!(j.trim()||_.trim()&&b.trim()))return O({success:!1,error:"Either webhook URL or (workflow name + API key) is required to execute the workflow"}),void z(!0);D(!0),O(null),z(!0);try{const e=await fetch("/api/n8n/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({instanceUrl:y.trim(),apiKey:b.trim(),webhookUrl:j.trim(),chatWebhookUrl:C.trim(),workflowName:_.trim(),operation:A})}),t=await e.json();t.success?O({success:!0,data:t.data,message:t.message}):O({success:!1,error:t.error})}catch(e){O({success:!1,error:"Failed to test connection. Please check your configuration and try again."})}finally{D(!1)}},disabled:T||!y.trim()||!(j.trim()||_.trim()&&b.trim()),children:[T?vs.jsx(uw,{className:"h-3 w-3 animate-spin mr-1"}):vs.jsx(_w,{className:"h-3 w-3 mr-1"}),T?"Executing...":"Execute Workflow"]})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs",children:"Execute your n8n workflow"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:y.trim()?"webhook_trigger"===A&&j.trim()?"Execute workflow via webhook URL":_.trim()&&b.trim()?"Execute workflow via n8n API":"Enter workflow name and API key to execute via API":"Enter your n8n instance URL to enable execution"})]})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:async()=>{if(!y.trim()||!b.trim())return O({success:!1,error:"Please enter instance URL and API key to list workflows"}),void z(!0);q(!0),O(null),z(!0);try{const e=await fetch("/api/n8n/list-workflows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({instanceUrl:y.trim(),apiKey:b.trim()})}),t=await e.json();t.success?(Y(t.workflows),t.workflows&&t.workflows.length>0?(K(!0),O({success:!0,message:t.message})):(O({success:!1,error:"No workflows found in your n8n instance"}),z(!0))):O({success:!1,error:t.error})}catch(e){O({success:!1,error:"Failed to list workflows. Please check your configuration and try again."})}finally{q(!1)}},disabled:H||!y.trim()||!b.trim(),children:H?vs.jsx(uw,{className:"h-3 w-3 animate-spin"}):vs.jsx(dw,{className:"h-3 w-3"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"List workflows to find correct ID/name"})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>window.open("https://docs.n8n.io/api/","_blank"),children:vs.jsx($b,{className:"h-3 w-3"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Open n8n API documentation"})})]})})]}),Q&&vs.jsxs("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsx("h4",{className:"text-xs font-medium text-gray-700",children:"Select Workflow"}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:ae,children:vs.jsx(yj,{className:"h-3 w-3"})})]}),vs.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:$.length>0?$.map(((e,t)=>vs.jsxs("div",{className:fN("p-2 rounded cursor-pointer border transition-colors text-xs",J===t?"bg-orange-100 border-orange-300":"bg-white border-gray-200 hover:bg-gray-50"),onClick:()=>((e,t)=>{I(e.id.toString()),Z(t),K(!1),O({success:!0,message:`✓ Selected workflow: "${e.name}" (ID: ${e.id})`}),z(!0),setTimeout((()=>{z(!1)}),3e3)})(e,t),children:[vs.jsxs("div",{className:"font-medium text-gray-900",children:["ID: ",e.id," - Name: ",e.name]}),vs.jsxs("div",{className:"text-gray-500 mt-1",children:["Active: ",e.active?"Yes":"No"]})]},t))):vs.jsxs("div",{className:"p-4 text-center text-gray-500 text-xs",children:[vs.jsx(xj,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),vs.jsx("p",{children:"No workflows found"}),vs.jsx("p",{className:"text-gray-400 mt-1",children:"Create workflows in your n8n instance first"})]})}),vs.jsx("div",{className:"mt-2 text-xs text-gray-500",children:$.length>0?"Click on a workflow to select it and populate the Workflow ID/Name field.":"Make sure your n8n instance is running and contains workflows."})]}),R&&P&&vs.jsxs("div",{className:fN("p-2 rounded text-xs",P.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[P.success?vs.jsx(Db,{className:"h-3 w-3 text-green-600"}):vs.jsx(Lb,{className:"h-3 w-3 text-red-600"}),vs.jsx("span",{className:P.success?"text-green-800":"text-red-800",children:P.success?"Connection Successful":"Connection Failed"})]}),P.message&&vs.jsx("p",{className:"text-muted-foreground",children:P.message}),P.error&&vs.jsx("p",{className:"text-red-700",children:P.error})]})]})}),vs.jsx(_0,{type:"target",position:WX.Left,style:{width:12,height:12,backgroundColor:"#f97316",border:"2px solid white"},isConnectable:n})]})},google_sheets:function({id:e,data:t,isConnectable:n}){var a,r,s,i,o,l,c,d,u,f,m;const[p,h]=cs.useState(!1),[g,x]=cs.useState(t.serviceAccountJson||""),[y,v]=cs.useState(t.spreadsheetId||""),[b,w]=cs.useState(t.sheetName||""),[j,N]=cs.useState(t.operation||"append_row"),[C,S]=cs.useState(t.config||{}),[k,M]=cs.useState(t.variableMappings||[]),[_,I]=cs.useState(t.timeout||30),[A,E]=cs.useState(!1),[L,T]=cs.useState(null),[D,P]=cs.useState(!1),[O,R]=cs.useState(!1),[z,F]=cs.useState(null),[B,U]=cs.useState({}),[W,G]=cs.useState(!1),[V,H]=cs.useState(0),[q,$]=cs.useState([]),{setNodes:Y}=f1(),{onDeleteNode:Q,onDuplicateNode:K}=B8(),J=cs.useCallback((t=>{Y((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,Y]),Z={width:12,height:12,backgroundColor:"#22c55e",border:"2px solid white"},X=async(e,t)=>{try{await navigator.clipboard.writeText(e),F(t),setTimeout((()=>F(null)),2e3)}catch(pBe){}},ee=(e,t,n=!1)=>{let a=!0,r="";if(n&&!t.trim())a=!1,r="This field is required";else if("serviceAccountJson"===e&&t.trim())try{JSON.parse(t)}catch{a=!1,r="Invalid JSON format"}else if("spreadsheetId"===e&&t.trim()){/^[a-zA-Z0-9-_]{44}$/.test(t)||(a=!1,r="Invalid Google Sheets ID format")}return U((t=>({...t,[e]:{isValid:a,message:r}}))),a};cs.useEffect((()=>{(()=>{const e=[g,y,b,j],t=e.filter((e=>e&&e.toString().trim())).length,n=[JSON.stringify(C)],a=n.filter((e=>e&&e.trim()&&"{}"!==e)).length,r=t/e.length*80+a/n.length*20;H(Math.round(r))})()}),[g,y,b,j,C]),cs.useEffect((()=>{J({serviceAccountJson:g,spreadsheetId:y,sheetName:b,operation:j,config:C,variableMappings:k,timeout:_})}),[J,g,y,b,j,C,k,_]);const te=(e,t)=>{S((n=>({...n,[e]:t})))},ne=()=>{try{return JSON.parse(g).client_email||""}catch{return""}};return vs.jsxs("div",{className:"node-google-sheets p-3 rounded-lg bg-white border border-green-200 shadow-sm min-w-[380px] max-w-[480px] group",children:[vs.jsxs("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>K(e),children:vs.jsx(Ub,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Duplicate node"})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>Q(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Delete node"})})]})})]}),vs.jsx(_0,{type:"target",position:WX.Left,isConnectable:n,style:Z}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Bw,{className:"h-4 w-4 text-green-600"})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Google Sheets Integration"})})]})}),vs.jsx("span",{children:"Google Sheets"}),V>0&&vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs(dk,{variant:"secondary",className:"text-[10px] px-1.5 py-0.5 bg-green-100 text-green-800",children:[V,"%"]})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs",children:"Configuration Progress"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:100===V?"Fully configured and ready to use":"Complete all required fields for full functionality"})]})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>h(!p),children:p?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:p?"Hide configuration options":"Show configuration options"})})]})})]}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsx("span",{className:"text-lg",children:(null==(a=L6.find((e=>e.id===j)))?void 0:a.icon)||"📊"}),vs.jsx("span",{className:fN("font-medium",(e=>{const t=L6.find((t=>t.id===e));return(null==t?void 0:t.color)||"text-gray-600"})(j)),children:(null==(r=L6.find((e=>e.id===j)))?void 0:r.name)||j})]})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs font-medium",children:null==(s=L6.find((e=>e.id===j)))?void 0:s.name}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:null==(i=L6.find((e=>e.id===j)))?void 0:i.tooltip})]})]})}),vs.jsx("span",{className:"text-muted-foreground",children:"•"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs("div",{className:"flex items-center gap-1",children:[y&&b?vs.jsx(Db,{className:"h-3 w-3 text-green-600"}):vs.jsx(Lb,{className:"h-3 w-3 text-yellow-600"}),vs.jsx("span",{className:"text-xs text-muted-foreground truncate",children:y&&b?"Configured":"Not configured"})]})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:y&&b?"Google Sheets connection is properly configured":"Please configure Google Sheets credentials and sheet details"})})]})})]}),vs.jsxs("div",{className:"flex flex-wrap gap-1 text-[10px]",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(dk,{variant:"outline",className:"text-[9px] px-1 py-0",children:g?"🔐 Auth":"❌ No Auth"})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:g?"Service account credentials configured":"Service account credentials required"})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(dk,{variant:"outline",className:"text-[9px] px-1 py-0",children:y?"📄 Sheet":"❌ No Sheet"})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:y?`Sheet ID: ${y.substring(0,10)}...`:"Google Sheet ID required"})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(dk,{variant:"outline",className:"text-[9px] px-1 py-0",children:b?`📋 ${b}`:"❌ No Tab"})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:b?`Sheet tab: ${b}`:"Sheet tab name required"})})]})}),Object.keys(C).length>0&&vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(dk,{variant:"outline",className:"text-[9px] px-1 py-0",children:"⚙️ Config"})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs",children:"Operation configuration completed"}),vs.jsxs("p",{className:"text-xs text-muted-foreground",children:[Object.keys(C).length," configuration option(s) set"]})]})]})}),k.length>0&&vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs(dk,{variant:"outline",className:"text-[9px] px-1 py-0",children:["🔗 ",k.length," Vars"]})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs",children:"Variable mappings configured"}),vs.jsxs("p",{className:"text-xs text-muted-foreground",children:[k.length," output variable(s) will be created"]})]})]})})]})]}),vs.jsx(E6,{className:"mt-3"}),p&&vs.jsxs("div",{className:"mt-3 text-xs space-y-3 border rounded p-2 bg-secondary/10",children:[vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[vs.jsx(Yw,{className:"h-3.5 w-3.5 text-green-600"}),vs.jsx(EB,{className:"font-medium",children:"Quick Templates"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs",children:"Pre-configured templates for common Google Sheets operations"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a template to quickly set up your integration"})]})]})})]}),vs.jsxs(ZU,{value:"",onValueChange:e=>{const t=T6.find((t=>t.id===e));if(t){N(t.operation);const e=Object.fromEntries(Object.entries(t.config).filter((([e,t])=>void 0!==t)));S(e)}},children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Choose a template..."})}),vs.jsx(rW,{children:T6.map((e=>{var t,n;return vs.jsx(sW,{value:e.id,children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("span",{className:"text-sm",children:null==(t=L6.find((t=>t.id===e.operation)))?void 0:t.icon}),vs.jsxs("div",{children:[vs.jsx("div",{className:"font-medium",children:e.name}),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:null==(n=L6.find((t=>t.id===e.operation)))?void 0:n.description})]})]})},e.id)}))})]})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 mb-3",children:[vs.jsx("h4",{className:"font-medium text-amber-700 mb-1",children:"⚠️ Legacy Authentication"}),vs.jsx("p",{className:"text-xs text-amber-600",children:"Service Account JSON authentication is deprecated. Please use the OAuth connection above for a better, more secure experience. This section is maintained for backward compatibility only."})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[vs.jsx(EB,{className:"font-medium text-muted-foreground",children:"Service Account JSON (Legacy)"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"left",className:"max-w-sm",children:[vs.jsx("p",{className:"text-xs font-medium",children:"Google Service Account Credentials"}),vs.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Paste your Google Service Account JSON credentials here. Create one in Google Cloud Console → IAM & Admin → Service Accounts."}),vs.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"📋 Setup Steps:"}),vs.jsxs("ol",{className:"text-xs text-muted-foreground list-decimal list-inside space-y-1 mt-1",children:[vs.jsx("li",{children:"Copy the service account email from the JSON"}),vs.jsx("li",{children:"Open your Google Sheet"}),vs.jsx("li",{children:'Click "Share" → Add the service account email'}),vs.jsx("li",{children:'Give it "Editor" or "Viewer" permissions'})]})]})]})}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-auto",onClick:()=>X(g,"serviceAccountJson"),disabled:!g,children:"serviceAccountJson"===z?vs.jsx(Db,{className:"h-3 w-3 text-green-600"}):vs.jsx(Ub,{className:"h-3 w-3"})})]}),vs.jsx(TB,{value:g,onChange:e=>{x(e.target.value),ee("serviceAccountJson",e.target.value,!0)},placeholder:'{"type": "service_account", "project_id": "your-project", ...}',className:fN("text-xs h-20 resize-none",!1===(null==(o=B.serviceAccountJson)?void 0:o.isValid)?"border-red-500":!0===(null==(l=B.serviceAccountJson)?void 0:l.isValid)?"border-green-500":"")}),(null==(c=B.serviceAccountJson)?void 0:c.message)&&vs.jsx("p",{className:"text-[10px] text-red-600 mt-1",children:B.serviceAccountJson.message}),ne()&&vs.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("span",{className:"text-blue-800 font-medium",children:"Service Account Email:"}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>X(ne(),"serviceAccountEmail"),children:"serviceAccountEmail"===z?vs.jsx(Db,{className:"h-3 w-3 text-green-600"}):vs.jsx(Ub,{className:"h-3 w-3"})})]}),vs.jsx("p",{className:"text-blue-700 font-mono text-[10px] break-all mt-1",children:ne()}),vs.jsx("p",{className:"text-blue-600 text-[10px] mt-1",children:"👆 Share your Google Sheet with this email address"})]})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[vs.jsx(EB,{className:"font-medium",children:"Google Sheet ID"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"left",className:"max-w-xs",children:[vs.jsx("p",{className:"text-xs font-medium",children:"Google Sheets Document ID"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Found in the Google Sheets URL between '/d/' and '/edit'"}),vs.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Example: docs.google.com/spreadsheets/d/[SHEET_ID]/edit"})]})]})}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-auto",onClick:()=>X(y,"spreadsheetId"),disabled:!y,children:"spreadsheetId"===z?vs.jsx(Db,{className:"h-3 w-3 text-green-600"}):vs.jsx(Ub,{className:"h-3 w-3"})})]}),vs.jsx(LB,{value:y,onChange:e=>{v(e.target.value),ee("spreadsheetId",e.target.value,!0)},placeholder:"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",className:fN("text-xs h-7",!1===(null==(d=B.spreadsheetId)?void 0:d.isValid)?"border-red-500":!0===(null==(u=B.spreadsheetId)?void 0:u.isValid)?"border-green-500":"")}),(null==(f=B.spreadsheetId)?void 0:f.message)&&vs.jsx("p",{className:"text-[10px] text-red-600 mt-1",children:B.spreadsheetId.message})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[vs.jsx(EB,{className:"font-medium",children:"Sheet Name"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"left",className:"max-w-xs",children:[vs.jsx("p",{className:"text-xs font-medium",children:"Sheet Tab Name"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"The name of the specific sheet tab within your Google Sheets document"}),vs.jsx("p",{className:"text-xs text-blue-600 mt-1",children:'Default is usually "Sheet1" for new sheets'})]})]})})]}),vs.jsx(LB,{value:b,onChange:e=>w(e.target.value),placeholder:"Sheet1",className:"text-xs h-7"})]})]}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs(lk,{variant:"outline",size:"sm",className:"h-7 px-2 flex-1",onClick:async()=>{var e,t,n,a,r;if(!g.trim()||!y.trim())return T({success:!1,message:"Please provide Service Account JSON and Spreadsheet ID"}),void P(!0);E(!0),T(null);try{const i=await fetch("/api/google/sheets/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({serviceAccountJson:g,spreadsheetId:y,sheetName:b||"Sheet1",useOAuth:!0})}),o=await i.json();if(o.success){(null==(e=o.data)?void 0:e.sheets)&&$(o.data.sheets.map((e=>e.properties.title)));try{const e=await fetch("/api/google/sheets/add-test-data",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({serviceAccountJson:g,spreadsheetId:y,sheetName:b||"Sheet1"})}),r=await e.json();r.success?T({success:!0,message:`✅ Connection successful!\n📊 Test data added to "${(null==(t=o.data)?void 0:t.title)||"Google Sheet"}"\n\nTest data includes:\n• Sample contact information\n• Timestamp: ${(new Date).toLocaleString()}\n• Row added at: ${(null==(n=r.data)?void 0:n.range)||"Unknown range"}`,data:{...o.data,testData:r.data}}):T({success:!0,message:`✅ Connection successful to "${(null==(a=o.data)?void 0:a.title)||"Google Sheet"}"\n⚠️ Could not add test data: ${r.error}`,data:o.data})}catch(s){T({success:!0,message:`✅ Connection successful to "${(null==(r=o.data)?void 0:r.title)||"Google Sheet"}"\n⚠️ Could not add test data due to network error`,data:o.data})}}else T({success:!1,message:o.error||"Failed to connect to Google Sheets"})}catch(i){T({success:!1,message:"Network error: Unable to test connection"})}finally{E(!1),P(!0)}},disabled:A||!g.trim()||!y.trim(),children:[A?vs.jsx(uw,{className:"h-3 w-3 animate-spin mr-1"}):vs.jsx(_w,{className:"h-3 w-3 mr-1"}),"Test & Add Sample Data"]})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs",children:"Test connection and add sample data"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:g.trim()&&y.trim()?"Verify your configuration and add test data to the sheet":"Complete required fields to enable testing"}),vs.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"📊 Will add a sample row with contact information"})]})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>window.open("https://console.cloud.google.com/iam-admin/serviceaccounts","_blank"),children:vs.jsx($b,{className:"h-3 w-3"})})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs",children:"Open Google Cloud Console"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Create service account credentials"})]})]})})]}),D&&L&&vs.jsxs("div",{className:fN("p-2 rounded border text-xs mt-2",L.success?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"),children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{className:"flex items-center gap-1",children:[L.success?vs.jsx(Db,{className:"h-3 w-3"}):vs.jsx(zb,{className:"h-3 w-3"}),vs.jsx("span",{className:"font-medium",children:L.success?"Connection Successful":"Connection Failed"})]}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>P(!1),children:vs.jsx(yj,{className:"h-3 w-3"})})]}),vs.jsx("div",{className:"mt-1 whitespace-pre-line",children:L.message}),L.success&&(null==(m=L.data)?void 0:m.sheets)&&vs.jsxs("div",{className:"mt-2",children:[vs.jsx("p",{className:"font-medium",children:"Available sheets:"}),vs.jsx("p",{className:"text-muted-foreground",children:L.data.sheets.map((e=>e.properties.title)).join(", ")})]})]}),vs.jsx("div",{className:"space-y-2 pt-2 border-t",children:vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[vs.jsx(EB,{className:"font-medium",children:"Google Sheets Operation"}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs",children:"Choose the type of Google Sheets operation to perform"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Each operation has different configuration options"})]})]})})]}),vs.jsxs(ZU,{value:j,onValueChange:N,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select operation"})}),vs.jsx(rW,{className:"z-[9998]",children:L6.map((e=>vs.jsx(sW,{value:e.id,children:vs.jsxs("div",{className:"flex items-center gap-2 w-full",title:`${e.name}: ${e.tooltip}`,children:[vs.jsx("span",{className:"text-sm",children:e.icon}),vs.jsxs("div",{className:"flex-1",children:[vs.jsx("div",{className:fN("font-medium",e.color),children:e.name}),vs.jsx("div",{className:"text-[10px] text-muted-foreground",children:e.description})]})]})},e.id)))})]})]})}),D6[j]&&vs.jsxs(k6,{open:W,onOpenChange:G,children:[vs.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[vs.jsx(M6,{asChild:!0,children:vs.jsxs(lk,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:[W?vs.jsx(Mb,{className:"h-3 w-3 mr-1"}):vs.jsx(Ib,{className:"h-3 w-3 mr-1"}),"Operation Configuration"]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),vs.jsxs(ek,{side:"top",children:[vs.jsx("p",{className:"text-xs",children:"Configure specific options for the selected operation"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Settings vary based on operation type"})]})]})})]}),vs.jsx(_6,{className:"space-y-2",children:D6[j].map((e=>vs.jsx("div",{className:"bg-secondary/20 p-2 rounded border",children:vs.jsxs("div",{className:"flex gap-2 items-start",children:[vs.jsxs("div",{className:"flex-1",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsxs(EB,{className:"text-[10px] font-medium",children:[e.label,e.required&&vs.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.tooltip&&vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(Ob,{className:"h-2.5 w-2.5 text-muted-foreground cursor-help"})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs max-w-48",children:e.tooltip})})]})})]}),"duplicateCheck"===e.key?vs.jsx(P6,{value:C[e.key]||{},onChange:t=>te(e.key,t)}):"object"===e.type?vs.jsx(TB,{value:"object"==typeof C[e.key]?JSON.stringify(C[e.key],null,2):C[e.key]||"",onChange:t=>{try{const n=JSON.parse(t.target.value);te(e.key,n)}catch{te(e.key,t.target.value)}},placeholder:e.placeholder,className:"text-[10px] h-16 resize-none"}):"boolean"===e.type?vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("input",{type:"checkbox",checked:C[e.key]||e.default||!1,onChange:t=>te(e.key,t.target.checked),className:"h-3 w-3"}),vs.jsx("span",{className:"text-[10px] text-muted-foreground",children:e.description})]}):"number"===e.type?vs.jsx(LB,{type:"number",value:C[e.key]||e.default||"",onChange:t=>te(e.key,parseInt(t.target.value)||0),placeholder:e.placeholder,className:"text-[10px] h-6"}):vs.jsx(LB,{value:C[e.key]||"",onChange:t=>te(e.key,t.target.value),placeholder:e.placeholder,className:"text-[10px] h-6"})]}),vs.jsx(lk,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 mt-4",onClick:()=>{return t=e.key,void S((e=>{const n={...e};return delete n[t],n}));var t},children:vs.jsx(yj,{className:"h-2.5 w-2.5"})})]})},e.key)))})]}),vs.jsxs("div",{className:"mt-3 p-2 bg-green-50 border border-green-200 rounded",children:[vs.jsx("div",{className:"flex items-center gap-1 mb-1",children:vs.jsx("span",{className:"text-xs font-medium text-green-800",children:"💡 Quick Examples"})}),vs.jsxs("div",{className:"text-[10px] text-green-700 space-y-1",children:["append_row"===j&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("p",{children:["• Column mapping: ","{",'"Name": "',"{{contact.name}}",'", "Phone": "',"{{contact.phone}}",'", "Message": "',"{{message.content}}",'"',"}"]}),vs.jsx("p",{children:"• Use variables from conversation context"})]}),"read_rows"===j&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("p",{children:['• Filter by phone: filterColumn="Phone", filterValue="',"{{contact.phone}}",'"']}),vs.jsx("p",{children:"• Limit results with maxRows for better performance"})]}),"update_row"===j&&vs.jsxs(vs.Fragment,{children:[vs.jsxs("p",{children:['• Match by ID: matchColumn="Order ID", matchValue="',"{{order.id}}",'"']}),vs.jsxs("p",{children:["• Update specific columns: ","{",'"Status": "',"{{order.status}}",'", "Updated": "',"{{current.timestamp}}",'"',"}"]})]}),"get_sheet_info"===j&&vs.jsxs(vs.Fragment,{children:[vs.jsx("p",{children:"• No configuration needed - returns sheet metadata"}),vs.jsx("p",{children:"• Use to get column headers and sheet information"})]})]})]})]}),vs.jsx(_0,{type:"source",position:WX.Right,isConnectable:n,style:Z})]})},bot_disable:function({id:e,data:t,isConnectable:n}){var a;const[r,s]=cs.useState(!1),[i,o]=cs.useState(t.disableDuration||"30"),[l,c]=cs.useState(t.customDuration||60),[d,u]=cs.useState(t.customDurationUnit||"minutes"),[f,m]=cs.useState(t.triggerMethod||"always"),[p,h]=cs.useState(t.keyword||"agent"),[g,x]=cs.useState(t.caseSensitive||!1),[y,v]=cs.useState(t.assignToAgent||""),[b,w]=cs.useState(void 0===t.notifyAgent||t.notifyAgent),[j,N]=cs.useState(t.handoffMessage||"A customer is requesting human assistance."),{setNodes:C}=f1(),{onDeleteNode:S,onDuplicateNode:k}=B8(),{data:M=[],isLoading:_,error:I}=Sy({queryKey:["/api/agents"],queryFn:async()=>{const e=await _y("GET","/api/agents");if(!e.ok){const t=await e.text();throw new Error(`Failed to fetch agents: ${e.status} ${t}`)}return e.json()},retry:1,staleTime:3e5}),A=[{id:"auto",name:"Auto-assign to available agent"},...M.map((e=>({id:e.id.toString(),name:`${e.fullName} (${e.role})`})))],E=cs.useCallback((t=>{C((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,C]);return cs.useEffect((()=>{E({disableDuration:i,customDuration:l,customDurationUnit:d,triggerMethod:f,keyword:p,caseSensitive:g,assignToAgent:y,notifyAgent:b,handoffMessage:j})}),[E,i,l,d,f,p,g,y,b,j]),vs.jsxs("div",{className:"node-bot-disable p-3 rounded-lg bg-white border border-orange-200 shadow-sm max-w-[320px] group",children:[vs.jsxs("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>k(e),children:vs.jsx(Ub,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Duplicate node"})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>S(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Delete node"})})]})})]}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(ij,{className:"h-4 w-4 text-orange-600"}),vs.jsx("span",{children:"Agent Handoff"}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>s(!r),children:r?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[vs.jsx(Cw,{className:"h-3.5 w-3.5 text-muted-foreground"}),vs.jsx("span",{className:"font-medium text-orange-600",children:"Disable Bot"}),vs.jsx("span",{className:"text-muted-foreground",children:"•"}),vs.jsx("span",{className:"text-xs text-muted-foreground truncate",children:(()=>{if("manual"===i)return"Until manually re-enabled";if("custom"===i)return`${l} ${d}`;{const e=f3.find((e=>e.value===i));return(null==e?void 0:e.label)||"30 minutes"}})()})]}),vs.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[vs.jsx("span",{className:"text-[10px] bg-orange-100 text-orange-800 px-1 py-0.5 rounded",children:"keyword"===f?`When "${p}" detected`:"Always when executed"}),y&&vs.jsx("span",{className:"text-[10px] bg-blue-100 text-blue-800 px-1 py-0.5 rounded",children:(null==(a=A.find((e=>e.id===y)))?void 0:a.name.split(" ")[0])||"Agent"}),b&&vs.jsx("span",{className:"text-[10px] bg-green-100 text-green-800 px-1 py-0.5 rounded",children:"Notify Agent"})]})]}),r&&vs.jsxs("div",{className:"mt-3 text-xs space-y-3 border rounded p-2 bg-secondary/10",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-2 font-medium",children:"Trigger Method"}),vs.jsxs(d3,{value:f,onValueChange:m,className:"space-y-2",children:[vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(u3,{value:"always",id:"always"}),vs.jsx(EB,{htmlFor:"always",className:"text-xs",children:"Always disable when this node executes"})]}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(u3,{value:"keyword",id:"keyword"}),vs.jsx(EB,{htmlFor:"keyword",className:"text-xs",children:"Disable only when specific keyword is detected"})]})]})]}),"keyword"===f&&vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Trigger Keyword"}),vs.jsx(LB,{placeholder:"e.g., agent, human, help",value:p,onChange:e=>h(e.target.value),className:"text-xs h-7"})]}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(L4,{id:"case-sensitive",checked:g,onCheckedChange:x}),vs.jsx(EB,{htmlFor:"case-sensitive",className:"text-xs",children:"Case sensitive matching"})]})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Disable Duration"}),vs.jsxs(ZU,{value:i,onValueChange:o,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select duration..."})}),vs.jsx(rW,{children:f3.map((e=>vs.jsx(sW,{value:e.value,children:e.label},e.value)))})]}),"custom"===i&&vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(LB,{type:"number",placeholder:"Duration",value:l,onChange:e=>c(Number(e.target.value)),className:"text-xs h-7 flex-1",min:"1"}),vs.jsxs(ZU,{value:d,onValueChange:u,children:[vs.jsx(tW,{className:"text-xs h-7 w-20",children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"minutes",children:"min"}),vs.jsx(sW,{value:"hours",children:"hrs"}),vs.jsx(sW,{value:"days",children:"days"})]})]})]})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Agent Assignment"}),vs.jsxs(ZU,{value:y,onValueChange:v,disabled:_,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:_?"Loading agents...":"Select agent..."})}),vs.jsx(rW,{children:_?vs.jsx(sW,{value:"loading",disabled:!0,children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(uw,{className:"h-3 w-3 mr-2 animate-spin"}),"Loading agents..."]})}):I?vs.jsx(sW,{value:"error",disabled:!0,children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(fj,{className:"h-3 w-3 mr-2"}),"Error loading agents"]})}):0===A.length?vs.jsx(sW,{value:"empty",disabled:!0,children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(fj,{className:"h-3 w-3 mr-2"}),"No agents available"]})}):A.map((e=>vs.jsx(sW,{value:e.id,children:e.name},e.id)))})]})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(L4,{id:"notify-agent",checked:b,onCheckedChange:w}),vs.jsx(EB,{htmlFor:"notify-agent",className:"text-xs font-medium",children:"Notify assigned agent"})]}),b&&vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Handoff Message"}),vs.jsx(LB,{placeholder:"Message to send to agent",value:j,onChange:e=>N(e.target.value),className:"text-xs h-7"})]})]})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:n})]})},bot_reset:function({id:e,data:t,isConnectable:n}){const[a,r]=cs.useState(!1),[s,i]=cs.useState(t.resetScope||"bot_only"),[o,l]=cs.useState(t.confirmationMessage||"Bot assistance has been re-enabled. How can I help you?"),[c,d]=cs.useState(void 0===t.sendConfirmation||t.sendConfirmation),[u,f]=cs.useState(void 0!==t.clearVariables&&t.clearVariables),[m,p]=cs.useState(void 0!==t.resetFlowPosition&&t.resetFlowPosition),[h,g]=cs.useState(void 0===t.notifyAgent||t.notifyAgent),[x,y]=cs.useState(void 0!==t.autoReassign&&t.autoReassign),{setNodes:v}=f1(),{onDeleteNode:b,onDuplicateNode:w}=B8(),j=cs.useCallback((t=>{v((n=>n.map((n=>n.id===e?{...n,data:{...n.data,...t}}:n))))}),[e,v]);return cs.useEffect((()=>{j({resetScope:s,confirmationMessage:o,sendConfirmation:c,clearVariables:u,resetFlowPosition:m,notifyAgent:h,autoReassign:x})}),[j,s,o,c,u,m,h,x]),vs.jsxs("div",{className:"node-bot-reset p-3 rounded-lg bg-white border border-green-200 shadow-sm max-w-[320px] group",children:[vs.jsxs("div",{className:"absolute -top-8 -right-2 bg-background border rounded-md shadow-sm flex z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>w(e),children:vs.jsx(Ub,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Duplicate node"})})]})}),vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>b(e),children:vs.jsx(Zw,{className:"h-3.5 w-3.5"})})}),vs.jsx(ek,{side:"top",children:vs.jsx("p",{className:"text-xs",children:"Delete node"})})]})})]}),vs.jsxs("div",{className:"font-medium flex items-center gap-2 mb-2",children:[vs.jsx(Lw,{className:"h-4 w-4 text-green-600"}),vs.jsx("span",{children:"Reset Bot"}),vs.jsx("button",{className:"ml-auto text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>r(!a),children:a?vs.jsxs(vs.Fragment,{children:[vs.jsx(Yb,{className:"h-3 w-3"}),"Hide"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Qb,{className:"h-3 w-3"}),"Edit"]})})]}),vs.jsxs("div",{className:"text-sm p-2 bg-secondary/40 rounded border border-border",children:[vs.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[(()=>{switch(s){case"bot_only":return vs.jsx(Db,{className:"h-3.5 w-3.5 text-green-600"});case"bot_and_context":return vs.jsx(Dw,{className:"h-3.5 w-3.5 text-blue-600"});case"full_reset":return vs.jsx(Lb,{className:"h-3.5 w-3.5 text-red-600"});default:return vs.jsx(Lw,{className:"h-3.5 w-3.5 text-muted-foreground"})}})(),vs.jsx("span",{className:"font-medium text-green-600",children:"Re-enable Bot"}),vs.jsx("span",{className:"text-muted-foreground",children:"•"}),vs.jsx("span",{className:"text-xs text-muted-foreground truncate",children:(()=>{const e=m3.find((e=>e.value===s));return(null==e?void 0:e.label)||"Re-enable bot only"})()})]}),vs.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[c&&vs.jsx("span",{className:"text-[10px] bg-green-100 text-green-800 px-1 py-0.5 rounded",children:"Send Confirmation"}),u&&vs.jsx("span",{className:"text-[10px] bg-blue-100 text-blue-800 px-1 py-0.5 rounded",children:"Clear Variables"}),m&&vs.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-1 py-0.5 rounded",children:"Reset Flow"}),h&&vs.jsx("span",{className:"text-[10px] bg-orange-100 text-orange-800 px-1 py-0.5 rounded",children:"Notify Agent"})]})]}),a&&vs.jsxs("div",{className:"mt-3 text-xs space-y-3 border rounded p-2 bg-secondary/10",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-2 font-medium",children:"Reset Scope"}),vs.jsxs(ZU,{value:s,onValueChange:i,children:[vs.jsx(tW,{className:"text-xs h-7",children:vs.jsx(eW,{placeholder:"Select reset scope..."})}),vs.jsx(rW,{children:m3.map((e=>vs.jsx(sW,{value:e.value,children:vs.jsxs("div",{children:[vs.jsx("div",{className:"font-medium",children:e.label}),vs.jsx("div",{className:"text-xs text-muted-foreground",children:e.description})]})},e.value)))})]})]}),"bot_only"!==s&&vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Advanced Options"}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(L4,{id:"clear-variables",checked:u,onCheckedChange:f}),vs.jsx(EB,{htmlFor:"clear-variables",className:"text-xs",children:"Clear all flow variables"})]}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(L4,{id:"reset-flow-position",checked:m,onCheckedChange:p}),vs.jsx(EB,{htmlFor:"reset-flow-position",className:"text-xs",children:"Reset flow to beginning"})]})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(L4,{id:"send-confirmation",checked:c,onCheckedChange:d}),vs.jsx(EB,{htmlFor:"send-confirmation",className:"text-xs font-medium",children:"Send confirmation message"})]}),c&&vs.jsxs("div",{children:[vs.jsx(EB,{className:"block mb-1 text-xs",children:"Confirmation Message"}),vs.jsx(TB,{placeholder:"Message to send when bot is re-enabled",value:o,onChange:e=>l(e.target.value),className:"text-xs min-h-[60px] resize-none"})]})]}),vs.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[vs.jsx(EB,{className:"block mb-1 font-medium",children:"Agent Notification"}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(L4,{id:"notify-agent",checked:h,onCheckedChange:g}),vs.jsx(EB,{htmlFor:"notify-agent",className:"text-xs",children:"Notify agent of bot re-enablement"})]}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(L4,{id:"auto-reassign",checked:x,onCheckedChange:y}),vs.jsx(EB,{htmlFor:"auto-reassign",className:"text-xs",children:"Auto-reassign conversation to bot"})]})]})]}),vs.jsx(_0,{type:"target",position:WX.Left,style:D4,isConnectable:n})]})}},P8=({id:e,sourceX:t,sourceY:n,targetX:a,targetY:r,sourcePosition:s,targetPosition:i,style:o={},markerEnd:l,selected:c})=>{const{setEdges:d}=f1(),[u,f,m]=KX({sourceX:t,sourceY:n,sourcePosition:s,targetX:a,targetY:r,targetPosition:i});return vs.jsxs(vs.Fragment,{children:[vs.jsx(_X,{path:u,markerEnd:l,style:o}),c&&vs.jsx(B2,{children:vs.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${f}px,${m}px)`,fontSize:12,pointerEvents:"all"},className:"nodrag nopan",children:vs.jsx("button",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-white border border-red-500 text-red-500 hover:bg-red-50 transition-colors",onClick:()=>{d((t=>t.filter((t=>t.id!==e))))},children:vs.jsx(Zw,{size:12})})})})]})},O8={custom:P8,smoothstep:P8};function R8({onAdd:e,nodes:t}){const{t:n}=mk(),[a,r]=cs.useState(""),s=t.some((e=>"trigger"===e.type)),i=t.some((e=>"ai_assistant"===e.type)),o=t.some((e=>"typebot"===e.type)),l=t.some((e=>"flowise"===e.type)),c=t.some((e=>"n8n"===e.type));t.some((e=>"google_sheets"===e.type));const{data:d,isLoading:u}=Sy({queryKey:["/api/google/calendar/status"],queryFn:async()=>{const e=await fetch("/api/google/calendar/status");return e.ok?e.json():{connected:!1}}}),f=(null==d?void 0:d.connected)||!1,m=e=>{switch(e){case"trigger":return{disabled:s,tooltip:s?n("flow_builder.trigger_node_exists","Only one Message Received trigger allowed per flow"):""};case"ai_assistant":return{disabled:i,tooltip:i?n("flow_builder.ai_assistant_node_exists","Only one AI Assistant node allowed per flow"):""};case"typebot":return{disabled:o,tooltip:o?n("flow_builder.typebot_node_exists","Only one Typebot node allowed per flow"):""};case"flowise":return{disabled:l,tooltip:l?n("flow_builder.flowise_node_exists","Only one Flowise node allowed per flow"):""};case"n8n":return{disabled:c,tooltip:c?n("flow_builder.n8n_node_exists","Only one n8n node allowed per flow"):""};default:return{disabled:!1,tooltip:""}}},p=[{type:"trigger",name:"WhatsApp Message",section:"Triggers",icon:vw,color:"text-green-500",...m("trigger")},{type:"message",name:"Text Message",section:"Messages",icon:vw,color:"text-secondry",disabled:!1},{type:"quickreply",name:"Quick Reply Options",section:"Messages",icon:cw,color:"text-blue-500",disabled:!1},{type:"follow_up",name:"Follow-up Message",section:"Messages",icon:Bb,color:"text-orange-500",disabled:!1},{type:"image",name:"Image Message",section:"Messages",icon:iw,color:"text-blue-500",disabled:!1},{type:"video",name:"Video Message",section:"Messages",icon:Xb,color:"text-red-500",disabled:!1},{type:"audio",name:"Audio Message",section:"Messages",icon:Kb,color:"text-purple-500",disabled:!1},{type:"document",name:"Document Message",section:"Messages",icon:ew,color:"text-amber-600",disabled:!1},{type:"google_calendar_event",name:"Create Calendar Event",section:"Google Calendar",icon:Nb,color:"text-green-600",disabled:!f},{type:"google_calendar_availability",name:"Check Availability",section:"Google Calendar",icon:Nb,color:"text-blue-600",disabled:!f},{type:"condition",name:"Condition",section:"Flow Control",icon:Lb,color:"text-amber-500",disabled:!1},{type:"wait",name:"Wait",section:"Flow Control",icon:Bb,color:"text-orange-500",disabled:!1},{type:"ai_assistant",name:"AI Assistant",section:"Flow Control",icon:({className:e})=>vs.jsx(IF,{className:e,size:16}),color:"text-violet-500",...m("ai_assistant")},{type:"update_pipeline_stage",name:"Pipeline",section:"Flow Control",icon:Tb,color:"text-teal-500",disabled:!1},{type:"bot_disable",name:"Agent Handoff",section:"Flow Control",icon:ij,color:"text-orange-600",disabled:!1},{type:"n8n",name:"n8n",section:"Integrations",icon:xj,color:"text-orange-600",...m("n8n")},{type:"http_request",name:"HTTP Request",section:"Integrations",icon:jw,color:"text-purple-500",disabled:!1},{type:"google_sheets",name:"Google Sheets",section:"Integrations",icon:Bw,color:"text-green-600",...m("google_sheets")},{type:"webhook",name:"Webhook",section:"Integrations",icon:nw,color:"text-blue-500",disabled:!1},{type:"shopify",name:"Shopify",section:"Integrations",icon:Ww,color:"text-green-500",disabled:!1},{type:"woocommerce",name:"WooCommerce",section:"Integrations",icon:Gw,color:"text-purple-500",disabled:!1},{type:"typebot",name:"Typebot",section:"Integrations",icon:yw,color:"text-blue-600",...m("typebot")},{type:"flowise",name:"Flowise",section:"Integrations",icon:wb,color:"text-purple-600",...m("flowise")}],h=""===a.trim()?p:p.filter((e=>{const t=a.toLowerCase();return e.name.toLowerCase().includes(t)||e.section.toLowerCase().includes(t)||e.type.toLowerCase().includes(t)})),g=h.reduce(((e,t)=>(e[t.section]||(e[t.section]=[]),e[t.section].push(t),e)),{}),x=()=>{r("")};return vs.jsxs("div",{className:"w-full flex flex-col h-full",children:[vs.jsxs("div",{className:"relative mb-3 flex-shrink-0",children:[vs.jsx(Ow,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),vs.jsx(LB,{type:"text",placeholder:n("flow_builder.search_nodes","Search nodes..."),value:a,onChange:e=>r(e.target.value),onKeyDown:t=>{"Escape"===t.key?x():"Enter"===t.key&&1===h.length&&e(h[0].type)},className:"pl-10 pr-10 h-9 text-sm"}),a&&vs.jsx(lk,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 p-0 hover:bg-muted",onClick:x,children:vs.jsx(yj,{className:"h-3 w-3"})})]}),vs.jsx("h3",{className:"font-medium mb-3 flex-shrink-0",children:n("flow_builder.add_node","Add Node")}),vs.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",style:{scrollbarWidth:"thin",scrollbarColor:"#cbd5e1 #f1f5f9",maxHeight:"calc(100vh - 200px)",overflowY:"auto",paddingRight:"4px"},children:[a&&0===h.length&&vs.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[vs.jsx(Ow,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),vs.jsx("p",{className:"text-sm",children:n("flow_builder.no_nodes_found","No nodes found")}),vs.jsx("p",{className:"text-xs",children:n("flow_builder.try_different_search","Try a different search term")})]}),h.length>0&&vs.jsx("div",{className:"grid gap-4 pr-2",children:Object.entries(g).map((([t,a])=>vs.jsxs("div",{children:["Google Calendar"===t?vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("h4",{className:"text-xs font-medium text-muted-foreground mb-2",children:t}),u?vs.jsx("span",{className:"text-xs text-muted-foreground mb-2",children:n("flow_builder.checking","Checking...")}):f?vs.jsxs("span",{className:"text-xs text-green-600 mb-2 flex items-center",children:[vs.jsx(kb,{className:"h-3 w-3 mr-1"}),n("flow_builder.connected","Connected")]}):vs.jsx("a",{href:"/api/google/auth",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 mb-2",children:n("flow_builder.connect","Connect")})]}):vs.jsx("h4",{className:"text-xs font-medium text-muted-foreground mb-2",children:t}),vs.jsx("div",{className:"Triggers"===t?"w-full":"grid gap-2",children:a.map((a=>{const r=a.icon;return vs.jsxs(lk,{variant:"outline",className:`${"Triggers"===t?"justify-start w-full":"justify-start"} ${a.disabled?"opacity-50 cursor-not-allowed":""}`,onClick:()=>e(a.type),disabled:a.disabled,title:a.tooltip?a.tooltip:a.disabled&&"Google Calendar"===t?n("flow_builder.connect_google_calendar_first","Connect to Google Calendar first"):"",children:[vs.jsx(r,{className:`h-4 w-4 mr-2 ${a.disabled?"text-muted-foreground":a.color}`}),a.name]},a.type)}))})]},t)))})]})]})}function z8(){const{t:e}=mk(),[t,n]=px("/flows/:id"),a=t?parseInt(n.id):null,r=null!==a,{toast:s}=Fy(),[,i]=fx(),o=cs.useRef(null),l=f1(),c=r?[]:[{id:"trigger-node",type:"trigger",position:{x:250,y:50},data:{label:"WhatsApp Message Trigger",channel:"WhatsApp",conditionType:"any",conditionValue:""}}],[d,u,f]=W2(c),[m,p,h]=G2([]),[g,x]=cs.useState(""),[y,v]=cs.useState(!1),{data:b,isLoading:w}=Sy({queryKey:["/api/flows",a],queryFn:async()=>{if(!a)return null;const e=await fetch(`/api/flows/${a}`);if(!e.ok)throw new Error("Failed to load flow");return e.json()},enabled:r});cs.useEffect((()=>{if(b){x(b.name);try{const e="string"==typeof b.nodes?JSON.parse(b.nodes):b.nodes,t="string"==typeof b.edges?JSON.parse(b.edges):b.edges;u(e||[]),p(t||[])}catch(t){s({title:e("flow_builder.error_loading_flow","Error loading flow"),description:e("flow_builder.could_not_parse_flow_data","Could not parse flow data"),variant:"destructive"})}}}),[b,u,p,s]);const j=ky({mutationFn:async e=>(await _y("POST","/api/flows",e)).json(),onSuccess:t=>{Ay.invalidateQueries({queryKey:["/api/flows"]}),i(`/flows/${t.id}`),s({title:e("flow_builder.flow_created","Flow created"),description:e("flow_builder.flow_created_successfully","Your flow has been created successfully.")})},onError:t=>{s({title:e("flow_builder.error_creating_flow","Error creating flow"),description:t.message||e("flow_builder.something_went_wrong","Something went wrong"),variant:"destructive"})}}),N=ky({mutationFn:async({id:e,data:t})=>(await _y("PATCH",`/api/flows/${e}`,t)).json(),onSuccess:()=>{Ay.invalidateQueries({queryKey:["/api/flows",a]}),s({title:e("flow_builder.flow_updated","Flow updated"),description:e("flow_builder.flow_updated_successfully","Your flow has been updated successfully.")})},onError:t=>{s({title:e("flow_builder.error_updating_flow","Error updating flow"),description:t.message||e("flow_builder.something_went_wrong","Something went wrong"),variant:"destructive"})}}),C=cs.useCallback((e=>{p((t=>l0({...e,animated:!0,type:"smoothstep"},t)))}),[p]),S=cs.useCallback((t=>{u((e=>e.filter((e=>e.id!==t)))),p((e=>e.filter((e=>e.source!==t&&e.target!==t)))),s({title:e("flow_builder.node_deleted","Node deleted"),description:e("flow_builder.node_connections_removed","Node and its connections have been removed.")})}),[u,p,s]),k=cs.useCallback((t=>{const n=d.find((e=>e.id===t));if(!n)return;if(["trigger","ai_assistant","typebot","flowise"].includes(n.type||"")){const t={trigger:e("flow_builder.message_received_trigger","Message Received trigger"),ai_assistant:e("flow_builder.ai_assistant","AI Assistant"),typebot:e("flow_builder.typebot","Typebot"),flowise:e("flow_builder.flowise","Flowise")}[n.type||""]||"This";return void s({title:e("flow_builder.cannot_duplicate_singleton","Cannot Duplicate Node"),description:e("flow_builder.singleton_node_unique",`${t} nodes cannot be duplicated. Only one instance is allowed per flow.`),variant:"destructive"})}const a=`node_${N8()}`,r={...n,id:a,position:{x:n.position.x+30,y:n.position.y+30}};u((e=>e.concat(r))),s({title:e("flow_builder.node_duplicated","Node duplicated"),description:e("flow_builder.node_copy_created","A copy of the node has been created.")})}),[d,u,s]),M=cs.useCallback((t=>{if(!o.current)return;if(["trigger","ai_assistant","typebot","flowise"].includes(t)){if(d.find((e=>e.type===t))){const n={trigger:e("flow_builder.message_received_trigger","Message Received trigger"),ai_assistant:e("flow_builder.ai_assistant","AI Assistant"),typebot:e("flow_builder.typebot","Typebot"),flowise:e("flow_builder.flowise","Flowise")}[t]||"This";return void s({title:e("flow_builder.singleton_node_exists_title",`${n} Already Exists`),description:e("flow_builder.singleton_node_exists_description",`Only one ${n} node is allowed per flow. Please use the existing node.`),variant:"destructive"})}}const n=d.find((e=>"trigger"===e.type)),a=(null==n?void 0:n.id)||"",r=m.some((e=>e.source===a)),i=`node_${N8()}`;let c={label:`${t.charAt(0).toUpperCase()+t.slice(1)} Node`};switch(t){case"message":c={...c,message:"Hello! How can I help you?"};break;case"quickreply":c={...c,message:"Please select an option to continue:",options:["I have a question about my order.","I have a question about a product.","I have another question."]};break;case"follow_up":c={...c,messageType:"text",messageContent:"Thank you for your interest! How can we help you further?",mediaUrl:"",caption:"",templateId:void 0,triggerEvent:"conversation_start",delayAmount:24,delayUnit:"hours",specificDatetime:"",maxRetries:3};break;case"condition":c={...c,condition:"Contains('help')"};break;case"action":c={...c,action:"Create ticket"};break;case"image":c={...c,mediaUrl:"",caption:e("flow_builder.default_image_caption","Check out this image!")};break;case"video":c={...c,mediaUrl:"",caption:e("flow_builder.default_video_caption","Watch this video!")};break;case"audio":c={...c,mediaUrl:"",caption:e("flow_builder.default_audio_caption","Listen to this audio!")};break;case"document":c={...c,mediaUrl:"",fileName:"document.pdf",caption:e("flow_builder.default_document_caption_full","Here is the document you requested.")};break;case"wait":c={...c,timeValue:5,timeUnit:"minutes"};break;case"google_calendar_event":c={...c,summary:"Meeting with customer",description:"Discuss product requirements and timeline",startDateTime:new Date(Date.now()+864e5).toISOString(),endDateTime:new Date(Date.now()+864e5+36e5).toISOString(),attendees:[],onDeleteNode:S,onDuplicateNode:k};break;case"google_calendar_availability":c={...c,date:(new Date).toISOString(),durationMinutes:60,onDeleteNode:S,onDuplicateNode:k};break;case"ai_assistant":c={...c,provider:"openai",model:"gpt-4o",apiKey:"",prompt:"You are a helpful assistant. Answer user questions concisely and accurately.",enableHistory:!0,enableAudio:!1,enableTaskExecution:!1,tasks:[],onDeleteNode:S,onDuplicateNode:k};break;case"update_pipeline_stage":c={...c,stageId:null,dealIdVariable:"{{contact.id}}",type:"update_pipeline_stage"};break;case"webhook":c={...c,url:"",method:"POST",headers:[],body:'{"message": "{{message.content}}", "contact": "{{contact.name}}"}',authType:"none",authToken:"",authUsername:"",authPassword:"",authApiKey:"",authApiKeyHeader:"X-API-Key",timeout:30,followRedirects:!0,onDeleteNode:S,onDuplicateNode:k};break;case"http_request":c={...c,url:"",method:"GET",headers:[{key:"Accept",value:"application/json"}],body:"",authType:"none",authToken:"",authUsername:"",authPassword:"",authApiKey:"",authApiKeyHeader:"X-API-Key",timeout:30,followRedirects:!0,responseType:"auto",retryCount:0,retryDelay:1e3,variableMappings:[],onDeleteNode:S,onDuplicateNode:k};break;case"shopify":c={...c,shopDomain:"",apiKey:"",apiPassword:"",resource:"orders",action:"get",filters:{limit:"10"},variableMappings:[],rateLimitDelay:500,onDeleteNode:S,onDuplicateNode:k};break;case"woocommerce":c={...c,siteUrl:"",consumerKey:"",consumerSecret:"",resource:"orders",action:"get",filters:{per_page:"10"},variableMappings:[],apiVersion:"v3",onDeleteNode:S,onDuplicateNode:k};break;case"typebot":c={...c,apiToken:"",workspaceId:"",typebotId:"",botName:"",operation:"start_conversation",config:{},variableMappings:[],sessionTimeout:3600,onDeleteNode:S,onDuplicateNode:k};break;case"flowise":c={...c,instanceUrl:"",apiKey:"",chatflowId:"",chatflowName:"",operation:"start_chatflow",config:{},variableMappings:[],sessionTimeout:3600,onDeleteNode:S,onDuplicateNode:k};break;case"n8n":c={...c,instanceUrl:"",apiKey:"",webhookUrl:"",workflowId:"",workflowName:"",operation:"webhook_trigger",config:{},variableMappings:[],timeout:30,onDeleteNode:S,onDuplicateNode:k};break;case"bot_disable":c={...c,disableDuration:"30",customDuration:60,customDurationUnit:"minutes",triggerMethod:"always",keyword:"agent",caseSensitive:!1,assignToAgent:"auto",notifyAgent:!0,handoffMessage:"A customer is requesting human assistance."};break;case"bot_reset":c={...c,resetScope:"bot_only",confirmationMessage:"Bot assistance has been re-enabled. How can I help you?",sendConfirmation:!0,clearVariables:!1,resetFlowPosition:!1,notifyAgent:!0,autoReassign:!1}}const f={id:i,type:t,position:{x:n?n.position.x:250,y:n?n.position.y+150:150},data:c};if(u((e=>e.concat(f))),n&&!r&&"trigger"!==t){const e={id:`edge-${a}-${i}`,source:a,target:i,animated:!0,type:"smoothstep"};p((t=>t.concat(e)))}setTimeout((()=>{try{l.fitView({nodes:[{id:i}],duration:800,padding:.3,maxZoom:1.2,minZoom:.5})}catch(e){}}),100)}),[d,m,u,p,l]),[_,I]=cs.useState(!1);return cs.useEffect((()=>{const e=()=>{window.innerWidth>=768?I(!0):I(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),r&&w?vs.jsx("div",{className:"flex justify-center items-center h-full",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):vs.jsxs("div",{className:"flow-builder h-full flex flex-col",children:[vs.jsx("div",{className:"flow-header p-4 border-b flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:vs.jsxs("div",{className:"flex flex-col sm:flex-row w-full sm:w-auto gap-4 items-start sm:items-center",children:[vs.jsx(LB,{placeholder:e("flow_builder.flow_name","Flow name"),value:g,onChange:e=>x(e.target.value),className:"w-full sm:w-64"}),vs.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[vs.jsxs(lk,{variant:"outline",onClick:async()=>{if(g.trim()){v(!0);try{const e={name:g,nodes:JSON.stringify(d),edges:JSON.stringify(m),status:"draft"};r&&a?await N.mutateAsync({id:a,data:e}):await j.mutateAsync(e)}finally{v(!1)}}else s({title:e("flow_builder.name_required","Name required"),description:e("flow_builder.provide_flow_name","Please provide a name for your flow"),variant:"destructive"})},disabled:y,className:"flex-1 sm:flex-none btn-brand-primary",children:[y?vs.jsx(uw,{className:"h-4 w-4 mr-2 animate-spin"}):vs.jsx(Pw,{className:"h-4 w-4 mr-2"}),e("common.save","Save")]}),vs.jsx(yx,{href:"/flows",className:"flex-1 sm:flex-none",children:vs.jsx(lk,{variant:"outline",className:"w-full",children:e("common.cancel","Cancel")})}),vs.jsx(lk,{variant:"outline",size:"icon",className:"md:hidden",onClick:()=>I(!_),children:_?vs.jsx(Tb,{}):vs.jsx(vw,{})})]})]})}),vs.jsxs("div",{className:"flex-1 flex relative min-h-0",children:[_&&vs.jsx("div",{className:"fixed inset-0 bg-black/50 z-10 md:hidden",onClick:()=>I(!1)}),vs.jsxs("div",{className:"flow-sidebar border-r bg-background shadow-lg md:shadow-none z-20 transition-all duration-300 ease-in-out "+(_?"absolute md:relative h-full w-full sm:w-80 md:w-auto md:min-w-[280px] md:max-w-[320px] lg:min-w-[300px] lg:max-w-[350px]":"hidden md:flex md:min-w-[280px] md:max-w-[320px] lg:min-w-[300px] lg:max-w-[350px]"),children:[vs.jsxs("div",{className:"flex justify-between items-center p-4 border-b md:hidden",children:[vs.jsx("h3",{className:"font-medium",children:e("flow_builder.node_selection","Node Selection")}),vs.jsx(lk,{variant:"outline",size:"icon",onClick:()=>I(!1),children:vs.jsx(Tb,{})})]}),vs.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:vs.jsx(R8,{nodes:d,onAdd:e=>{M(e),window.innerWidth<768&&I(!1)}})})]}),vs.jsx("div",{className:"flow-container flex-1 relative "+(_?"hidden md:flex":"flex"),ref:o,style:{minHeight:"90vh"},children:vs.jsx(F8,{onDeleteNode:S,onDuplicateNode:k,children:vs.jsxs(z2,{nodes:d,edges:m,onNodesChange:f,onEdgesChange:h,onConnect:C,nodeTypes:D8,edgeTypes:O8,proOptions:{hideAttribution:!0},defaultEdgeOptions:{animated:!0,type:"smoothstep",style:{stroke:"#64748b"}},children:[vs.jsx(v4,{}),vs.jsx(u4,{}),vs.jsx(X2,{}),vs.jsx(oX,{position:"top-right",className:"bg-background p-2 rounded-md shadow-sm border",children:vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsxs("div",{className:"text-xs flex items-center gap-1",children:[vs.jsx("div",{className:"w-2 h-2 rounded-full "+(r?"active"===(null==b?void 0:b.status)?"bg-green-500":"bg-amber-500":"bg-blue-500")}),r?"active"===(null==b?void 0:b.status)?e("flow_builder.active","Active"):e("flow_builder.draft","Draft"):e("flow_builder.creating_new_flow","Creating New Flow")]})}),vs.jsx(ek,{children:vs.jsx("p",{children:e("flow_builder.current_flow_status","Current flow status")})})]})})})]})})})]})]})}function F8({children:e,onDeleteNode:t,onDuplicateNode:n}){return vs.jsx(I8.Provider,{value:{onDeleteNode:t,onDuplicateNode:n},children:e})}function B8(){const e=cs.useContext(I8);if(!e)throw new Error("useFlowContext must be used within a FlowProvider");return e}function U8(){return vs.jsx(A2,{children:vs.jsx(z8,{})})}function W8({currentPage:e,totalPages:t,onPageChange:n}){return t<=1?null:vs.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-6",children:[vs.jsx("button",{onClick:()=>n(Math.max(1,e-1)),disabled:1===e,className:"px-3 py-1 rounded-md "+(1===e?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-50"),children:vs.jsx("i",{className:"ri-arrow-left-s-line"})}),(()=>{const n=[];n.push(1),e>3&&n.push("...");for(let a=Math.max(2,e-1);a<=Math.min(t-1,e+1);a++)a<t&&n.push(a);return e<t-2&&n.push("..."),t>1&&n.push(t),n})().map(((t,a)=>vs.jsx("button",{onClick:()=>"number"==typeof t?n(t):null,className:"px-3 py-1 rounded-md "+(t===e?"bg-primary-500 text-white":"..."===t?"bg-white text-gray-600 cursor-default":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-50"),children:t},a))),vs.jsx("button",{onClick:()=>n(Math.min(t,e+1)),disabled:e===t,className:"px-3 py-1 rounded-md "+(e===t?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-50"),children:vs.jsx("i",{className:"ri-arrow-right-s-line"})})]})}function G8({contact:e,isOpen:t,onClose:n}){const[a,r]=cs.useState({name:"",email:"",phone:"",company:"",identifierType:"",identifier:"",notes:"",tags:""}),[s,i]=cs.useState(!1),o=vy(),{toast:l}=Fy(),{t:c}=mk();cs.useEffect((()=>{e&&r({name:e.name||"",email:e.email||"",phone:e.phone||"",company:e.company||"",identifierType:e.identifierType||"",identifier:e.identifier||"",notes:e.notes||"",tags:Array.isArray(e.tags)?e.tags.join(", "):""})}),[e]);const d=ky({mutationFn:async t=>{if(!(null==e?void 0:e.id))throw new Error(c("contacts.edit.contact_id_missing","Contact ID is missing"));const n=await _y("PATCH",`/api/contacts/${e.id}`,t);if(!n.ok){const e=await n.json();throw new Error(e.message||c("contacts.edit.update_failed","Failed to update contact"))}return n.json()},onSuccess:()=>{l({title:c("contacts.edit.success_title","Contact updated"),description:c("contacts.edit.success_description","The contact has been successfully updated.")}),o.invalidateQueries({queryKey:["/api/contacts"]}),n()},onError:e=>{l({title:c("contacts.edit.error_title","Update failed"),description:e.message,variant:"destructive"})},onSettled:()=>{i(!1)}}),u=e=>{const{name:t,value:n}=e.target;r((e=>({...e,[t]:n})))};return vs.jsx(yB,{open:t,onOpenChange:n,children:vs.jsxs(NB,{className:"sm:max-w-[500px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:c("contacts.edit.title","Edit Contact")}),vs.jsx(MB,{children:c("contacts.edit.description","Make changes to the contact information below.")})]}),vs.jsxs("form",{onSubmit:e=>{e.preventDefault(),i(!0);const t=a.tags?a.tags.split(",").map((e=>e.trim())).filter(Boolean):[];d.mutate({...a,tags:t})},className:"space-y-4 pt-4",children:[vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs(EB,{htmlFor:"name",children:[c("contacts.edit.name_label","Name")," *"]}),vs.jsx(LB,{id:"name",name:"name",value:a.name,onChange:u,required:!0})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"email",children:c("contacts.edit.email_label","Email")}),vs.jsx(LB,{id:"email",name:"email",type:"email",value:a.email,onChange:u})]})]}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"phone",children:c("contacts.edit.phone_label","Phone")}),vs.jsx(LB,{id:"phone",name:"phone",value:a.phone,onChange:u})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"company",children:c("contacts.edit.company_label","Company")}),vs.jsx(LB,{id:"company",name:"company",value:a.company,onChange:u})]})]}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"identifierType",children:c("contacts.edit.channel_label","Channel")}),vs.jsxs(ZU,{value:a.identifierType,onValueChange:e=>((e,t)=>{r((n=>({...n,[e]:t})))})("identifierType",e),children:[vs.jsx(tW,{children:vs.jsx(eW,{placeholder:c("contacts.edit.select_channel_placeholder","Select channel")})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"whatsapp",children:c("contacts.edit.channel.whatsapp_official","WhatsApp Official")}),vs.jsx(sW,{value:"whatsapp_unofficial",children:c("contacts.edit.channel.whatsapp_unofficial","WhatsApp Unofficial")}),vs.jsx(sW,{value:"messenger",children:c("contacts.edit.channel.messenger","Facebook Messenger")}),vs.jsx(sW,{value:"instagram",children:c("contacts.edit.channel.instagram","Instagram")})]})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"identifier",children:c("contacts.edit.channel_identifier_label","Channel Identifier")}),vs.jsx(LB,{id:"identifier",name:"identifier",value:a.identifier,onChange:u,placeholder:c("contacts.edit.channel_identifier_placeholder","Phone number or ID")})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"tags",children:c("contacts.edit.tags_label","Tags (comma separated)")}),vs.jsx(LB,{id:"tags",name:"tags",value:a.tags,onChange:u,placeholder:c("contacts.edit.tags_placeholder","lead, customer, etc.")})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"notes",children:c("contacts.edit.notes_label","Notes")}),vs.jsx(TB,{id:"notes",name:"notes",value:a.notes,onChange:u,rows:3})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:n,disabled:s,children:c("common.cancel","Cancel")}),vs.jsx(lk,{type:"submit",disabled:s,variant:"brand",className:"btn-brand-primary",children:s?c("contacts.edit.saving","Saving..."):c("contacts.edit.save_changes","Save Changes")})]})]})]})})}var V8="AlertDialog",[H8,q8]=Vy(V8,[TF]),$8=TF(),Y8=e=>{const{__scopeAlertDialog:t,...n}=e,a=$8(t);return vs.jsx(dB,{...a,...n,modal:!0})};Y8.displayName=V8;var Q8=cs.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...a}=e,r=$8(n);return vs.jsx(uB,{...r,...a,ref:t})}));Q8.displayName="AlertDialogTrigger";var K8=e=>{const{__scopeAlertDialog:t,...n}=e,a=$8(t);return vs.jsx(fB,{...a,...n})};K8.displayName="AlertDialogPortal";var J8=cs.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...a}=e,r=$8(n);return vs.jsx(mB,{...r,...a,ref:t})}));J8.displayName="AlertDialogOverlay";var Z8="AlertDialogContent",[X8,e7]=H8(Z8),t7=Ky("AlertDialogContent"),n7=cs.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,children:a,...r}=e,s=$8(n),i=cs.useRef(null),o=Gy(t,i),l=cs.useRef(null);return vs.jsx(iB,{contentName:Z8,titleName:a7,docsSlug:"alert-dialog",children:vs.jsx(X8,{scope:n,cancelRef:l,children:vs.jsxs(pB,{role:"alertdialog",...s,...r,ref:o,onOpenAutoFocus:By(r.onOpenAutoFocus,(e=>{var t;e.preventDefault(),null==(t=l.current)||t.focus({preventScroll:!0})})),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[vs.jsx(t7,{children:a}),vs.jsx(d7,{contentRef:i})]})})})}));n7.displayName=Z8;var a7="AlertDialogTitle",r7=cs.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...a}=e,r=$8(n);return vs.jsx(hB,{...r,...a,ref:t})}));r7.displayName=a7;var s7="AlertDialogDescription",i7=cs.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...a}=e,r=$8(n);return vs.jsx(gB,{...r,...a,ref:t})}));i7.displayName=s7;var o7=cs.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...a}=e,r=$8(n);return vs.jsx(xB,{...r,...a,ref:t})}));o7.displayName="AlertDialogAction";var l7="AlertDialogCancel",c7=cs.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...a}=e,{cancelRef:r}=e7(l7,n),s=$8(n),i=Gy(t,r);return vs.jsx(xB,{...s,...a,ref:i})}));c7.displayName=l7;var d7=({contentRef:e})=>{const t=`\`${Z8}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${Z8}\` by passing a \`${s7}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Z8}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return cs.useEffect((()=>{var t;document.getElementById(null==(t=e.current)?void 0:t.getAttribute("aria-describedby"))}),[t,e]),null},u7=J8,f7=n7,m7=o7,p7=c7,h7=r7,g7=i7;const x7=Y8,y7=Q8,v7=K8,b7=cs.forwardRef((({className:e,...t},n)=>vs.jsx(u7,{className:fN("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n})));b7.displayName=u7.displayName;const w7=cs.forwardRef((({className:e,children:t,...n},a)=>vs.jsxs(v7,{children:[vs.jsx(b7,{}),vs.jsx(f7,{ref:a,className:fN("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg max-h-[85vh] translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg overflow-y-auto",e),...n,children:vs.jsx("div",{className:"overflow-y-auto pr-1",children:t})})]})));w7.displayName=f7.displayName;const j7=({className:e,...t})=>vs.jsx("div",{className:fN("flex flex-col space-y-2 text-center sm:text-left",e),...t});j7.displayName="AlertDialogHeader";const N7=({className:e,...t})=>vs.jsx("div",{className:fN("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});N7.displayName="AlertDialogFooter";const C7=cs.forwardRef((({className:e,...t},n)=>vs.jsx(h7,{ref:n,className:fN("text-lg ",e),...t})));C7.displayName=h7.displayName;const S7=cs.forwardRef((({className:e,...t},n)=>vs.jsx(g7,{ref:n,className:fN("text-sm text-muted-foreground",e),...t})));S7.displayName=g7.displayName;const k7=cs.forwardRef((({className:e,...t},n)=>vs.jsx(m7,{ref:n,className:fN(ok(),e),...t})));k7.displayName=m7.displayName;const M7=cs.forwardRef((({className:e,...t},n)=>vs.jsx(p7,{ref:n,className:fN(ok({variant:"outline"}),"mt-2 sm:mt-0",e),...t})));M7.displayName=p7.displayName;var _7="Checkbox",[I7,A7]=Vy(_7),[E7,L7]=I7(_7);function T7(e){const{__scopeCheckbox:t,checked:n,children:a,defaultChecked:r,disabled:s,form:i,name:o,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:u}=e,[f,m]=yv({prop:n,defaultProp:r??!1,onChange:l,caller:_7}),[p,h]=cs.useState(null),[g,x]=cs.useState(null),y=cs.useRef(!1),v=!p||(!!i||!!p.closest("form")),b={checked:f,disabled:s,setChecked:m,control:p,setControl:h,name:o,form:i,value:d,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:!W7(r)&&r,isFormControl:v,bubbleInput:g,setBubbleInput:x};return vs.jsx(E7,{scope:t,...b,children:U7(u)?u(b):a})}var D7="CheckboxTrigger",P7=cs.forwardRef((({__scopeCheckbox:e,onKeyDown:t,onClick:n,...a},r)=>{const{control:s,value:i,disabled:o,checked:l,required:c,setControl:d,setChecked:u,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:p}=L7(D7,e),h=Gy(r,d),g=cs.useRef(l);return cs.useEffect((()=>{const e=null==s?void 0:s.form;if(e){const t=()=>u(g.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}}),[s,u]),vs.jsx(Xy.button,{type:"button",role:"checkbox","aria-checked":W7(l)?"mixed":l,"aria-required":c,"data-state":G7(l),"data-disabled":o?"":void 0,disabled:o,value:i,...a,ref:h,onKeyDown:By(t,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:By(n,(e=>{u((e=>!!W7(e)||!e)),p&&m&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())}))})}));P7.displayName=D7;var O7=cs.forwardRef(((e,t)=>{const{__scopeCheckbox:n,name:a,checked:r,defaultChecked:s,required:i,disabled:o,value:l,onCheckedChange:c,form:d,...u}=e;return vs.jsx(T7,{__scopeCheckbox:n,checked:r,defaultChecked:s,disabled:o,required:i,onCheckedChange:c,name:a,form:d,value:l,internal_do_not_use_render:({isFormControl:e})=>vs.jsxs(vs.Fragment,{children:[vs.jsx(P7,{...u,ref:t,__scopeCheckbox:n}),e&&vs.jsx(B7,{__scopeCheckbox:n})]})})}));O7.displayName=_7;var R7="CheckboxIndicator",z7=cs.forwardRef(((e,t)=>{const{__scopeCheckbox:n,forceMount:a,...r}=e,s=L7(R7,n);return vs.jsx(hv,{present:a||W7(s.checked)||!0===s.checked,children:vs.jsx(Xy.span,{"data-state":G7(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...e.style}})})}));z7.displayName=R7;var F7="CheckboxBubbleInput",B7=cs.forwardRef((({__scopeCheckbox:e,...t},n)=>{const{control:a,hasConsumerStoppedPropagationRef:r,checked:s,defaultChecked:i,required:o,disabled:l,name:c,value:d,form:u,bubbleInput:f,setBubbleInput:m}=L7(F7,e),p=Gy(n,m),h=PB(s),g=nS(a);cs.useEffect((()=>{const e=f;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set,a=!r.current;if(h!==s&&n){const t=new Event("click",{bubbles:a});e.indeterminate=W7(s),n.call(e,!W7(s)&&s),e.dispatchEvent(t)}}),[f,h,s,r]);const x=cs.useRef(!W7(s)&&s);return vs.jsx(Xy.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??x.current,required:o,disabled:l,name:c,value:d,form:u,...t,tabIndex:-1,ref:p,style:{...t.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})}));function U7(e){return"function"==typeof e}function W7(e){return"indeterminate"===e}function G7(e){return W7(e)?"indeterminate":e?"checked":"unchecked"}B7.displayName=F7;const V7=cs.forwardRef((({className:e,...t},n)=>vs.jsx(O7,{ref:n,className:fN("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:vs.jsx(z7,{className:fN("flex items-center justify-center text-current"),children:vs.jsx(kb,{className:"h-4 w-4"})})})));function H7(){const[e,t]=cs.useState(1),[n,a]=cs.useState(""),[r,s]=cs.useState(""),[i,o]=cs.useState(""),[l]=cs.useState(10),[c,d]=cs.useState(null),[u,f]=cs.useState(!1),[m,p]=cs.useState(null),[h,g]=cs.useState(!1),[x,y]=cs.useState(!1),[v,b]=cs.useState({name:"",email:"",phone:"",company:"",identifierType:"",identifier:"",notes:"",tags:""}),[w,j]=cs.useState(!1),[N,C]=cs.useState(!1),[S,k]=cs.useState(null),[M,_]=cs.useState(0),[I,A]=cs.useState(!1),[E,L]=cs.useState(null),[T,D]=cs.useState("skip"),[P,O]=cs.useState([]),[R,z]=cs.useState(!1),[F,B]=cs.useState(new Set),[U,W]=cs.useState(!1),[G,V]=cs.useState(!1),H=vy(),{toast:q}=Fy(),{t:$}=mk(),[,Y]=fx();cs.useEffect((()=>{const e=setTimeout((()=>{s(n),t(1)}),300);return()=>clearTimeout(e)}),[n]);const{data:Q,isLoading:K}=Sy({queryKey:["/api/contacts",e,r,i,l],queryFn:async()=>{const t=new URLSearchParams;t.append("page",e.toString()),t.append("limit",l.toString()),r&&t.append("search",r),i&&t.append("channel",i);const n=await fetch(`/api/contacts?${t.toString()}`);if(!n.ok)throw new Error("Failed to fetch contacts");return n.json()},refetchOnWindowFocus:!1}),J=Array.isArray(null==Q?void 0:Q.contacts)?Q.contacts:[],Z=(null==Q?void 0:Q.total)||0,X=Math.ceil(Z/l),ee=ky({mutationFn:async e=>{const t=await _y("DELETE",`/api/contacts/${e}`);if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to delete contact")}return t.json()},onSuccess:()=>{q({title:"Contact deleted",description:"The contact has been successfully deleted."}),H.invalidateQueries({queryKey:["/api/contacts"]})},onError:e=>{q({title:"Delete failed",description:e.message,variant:"destructive"})}}),te=ky({mutationFn:async e=>{const t=await _y("POST","/api/contacts",e);if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to create contact")}return t.json()},onMutate:()=>{j(!0)},onSuccess:()=>{q({title:$("contacts.add.success_title","Contact created"),description:$("contacts.add.success_description","The contact has been successfully created.")}),H.invalidateQueries({queryKey:["/api/contacts"]}),y(!1),re()},onError:e=>{q({title:$("contacts.add.error_title","Creation failed"),description:e.message,variant:"destructive"})},onSettled:()=>{j(!1)}}),ne=ky({mutationFn:async({file:e,duplicateHandling:t})=>{const n=new FormData;return n.append("csvFile",e),n.append("duplicateHandling",t),new Promise(((e,t)=>{const a=new XMLHttpRequest;a.upload.onprogress=e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);_(t)}},a.onload=()=>{if(200===a.status)try{const t=JSON.parse(a.responseText);e(t)}catch(n){t(new Error("Invalid response format"))}else try{const e=JSON.parse(a.responseText);t(new Error(e.error||"Import failed"))}catch(n){t(new Error(`Import failed with status ${a.status}`))}},a.onerror=()=>t(new Error("Network error during import")),a.open("POST","/api/contacts/import"),a.send(n)}))},onMutate:()=>{A(!0),_(0),L(null)},onSuccess:e=>{L(e),q({title:$("contacts.import.success_title","Import completed"),description:$("contacts.import.success_description","Successfully imported {{count}} contacts",{count:e.successful})}),H.invalidateQueries({queryKey:["/api/contacts"]})},onError:e=>{q({title:$("contacts.import.error_title","Import failed"),description:e.message,variant:"destructive"})},onSettled:()=>{A(!1),_(0)}}),ae=ky({mutationFn:async e=>{const t=await _y("DELETE","/api/contacts/bulk",{contactIds:e});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to delete contacts")}return t.json()},onMutate:()=>{V(!0)},onSuccess:e=>{const{successful:t,failed:n,total:a}=e;t.length>0&&q({title:$("contacts.bulk_delete.success_title","Contacts deleted"),description:$("contacts.bulk_delete.success_description","Successfully deleted {{count}} of {{total}} contacts",{count:t.length,total:a})}),n.length>0&&q({title:$("contacts.bulk_delete.partial_failure_title","Some deletions failed"),description:$("contacts.bulk_delete.partial_failure_description","{{count}} contacts could not be deleted",{count:n.length}),variant:"destructive"}),H.invalidateQueries({queryKey:["/api/contacts"]}),B(new Set),W(!1)},onError:e=>{q({title:$("contacts.bulk_delete.error_title","Bulk delete failed"),description:e.message,variant:"destructive"})},onSettled:()=>{V(!1)}}),re=()=>{b({name:"",email:"",phone:"",company:"",identifierType:"",identifier:"",notes:"",tags:""})},se=e=>{const t=new FileReader;t.onload=e=>{var t,n;const a=(null==(t=e.target)?void 0:t.result).split("\n").filter((e=>e.trim())),r=null==(n=a[0])?void 0:n.split(",").map((e=>e.trim())),s=a.slice(1,6).map((e=>{const t=e.split(",").map((e=>e.trim())),n={};return null==r||r.forEach(((e,a)=>{n[e]=t[a]||""})),n}));O(s),z(!0)},t.readAsText(e)},ie=J.length>0&&F.size===J.length,oe=F.size>0&&F.size<J.length,le=e=>{e.id&&e.identifierType&&(localStorage.setItem("selectedContactId",e.id.toString()),localStorage.setItem("selectedChannelType",e.identifierType),Y("/"),q({title:$("contacts.redirecting_to_inbox","Redirecting to inbox"),description:$("contacts.opening_conversation_with","Opening conversation with {{name}}",{name:e.name})}))};return vs.jsxs("div",{className:"h-screen flex flex-col overflow-hidden font-sans text-gray-800",children:[vs.jsx(uR,{}),vs.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[vs.jsx(yR,{}),vs.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[vs.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[vs.jsx("h1",{className:"text-2xl",children:$("nav.contacts","Contacts")}),vs.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[vs.jsxs(lk,{onClick:()=>y(!0),className:"flex items-center gap-2",variant:"default",children:[vs.jsx(Iw,{className:"h-4 w-4"}),$("contacts.add_contact","Add Contact")]}),vs.jsxs(lk,{onClick:()=>C(!0),variant:"outline",className:"flex items-center gap-2",children:[vs.jsx(sj,{className:"h-4 w-4"}),$("contacts.import.button","Import CSV")]})]})]}),F.size>0&&vs.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[vs.jsxs("div",{className:"flex items-center gap-3",children:[vs.jsx("span",{className:"text-sm font-medium text-blue-900",children:$("contacts.bulk_actions.selected_count","{{count}} contacts selected",{count:F.size})}),vs.jsx(lk,{variant:"outline",size:"sm",onClick:()=>{B(new Set)},className:"text-blue-700 border-blue-300 hover:bg-blue-100",children:$("contacts.bulk_actions.clear_selection","Clear Selection")})]}),vs.jsx("div",{className:"flex items-center gap-2",children:vs.jsx(lk,{variant:"destructive",size:"sm",onClick:()=>{0!==F.size&&W(!0)},disabled:G,className:"flex items-center gap-2",children:G?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin"}),$("contacts.bulk_actions.deleting","Deleting...")]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Zw,{className:"h-4 w-4"}),$("contacts.bulk_actions.delete_selected","Delete Selected")]})})})]}),vs.jsxs("div",{className:"flex mb-6",children:[vs.jsxs("div",{className:"relative flex-1 max-w-md",children:[vs.jsx("input",{type:"search",placeholder:$("contacts.search_placeholder","Search contacts..."),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300",value:n,onChange:e=>a(e.target.value)}),vs.jsx("i",{className:"ri-search-line absolute left-3 top-2.5 text-gray-400"})]}),vs.jsx("div",{className:"ml-4",children:vs.jsxs("select",{className:"p-2 border border-gray-300 rounded-lg",value:i,onChange:e=>{o(e.target.value),t(1)},children:[vs.jsx("option",{value:"",children:$("contacts.all_channels","All Channels")}),vs.jsx("option",{value:"whatsapp",children:$("contacts.whatsapp_official","WhatsApp Official")}),vs.jsx("option",{value:"whatsapp_unofficial",children:$("contacts.whatsapp_unofficial","WhatsApp Unofficial")}),vs.jsx("option",{value:"messenger",children:$("contacts.facebook_messenger","Facebook Messenger")}),vs.jsx("option",{value:"instagram",children:$("contacts.instagram","Instagram")})]})})]}),K?vs.jsxs("div",{className:"animate-pulse space-y-4",children:[vs.jsx("div",{className:"h-8 bg-gray-200 rounded w-full"}),vs.jsx("div",{className:"h-8 bg-gray-200 rounded w-full"}),vs.jsx("div",{className:"h-8 bg-gray-200 rounded w-full"}),vs.jsx("div",{className:"h-8 bg-gray-200 rounded w-full"}),vs.jsx("div",{className:"h-8 bg-gray-200 rounded w-full"})]}):0===J.length?vs.jsxs("div",{className:"text-center py-10",children:[vs.jsx("div",{className:"text-5xl text-gray-300 mb-3",children:vs.jsx("i",{className:"ri-user-search-line"})}),vs.jsx("h3",{className:"text-lg font-medium text-gray-700",children:$("contacts.no_contacts_found","No contacts found")}),vs.jsx("p",{className:"text-gray-500",children:n||i?$("contacts.try_adjusting_filters","Try adjusting your search or filters"):$("contacts.add_first_contact","Add your first contact to get started")})]}):vs.jsxs(vs.Fragment,{children:[vs.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:vs.jsxs(EY,{children:[vs.jsx(LY,{children:vs.jsxs(DY,{children:[vs.jsx(PY,{className:"w-12",children:vs.jsx(V7,{checked:ie,onCheckedChange:e=>{if(e){const e=new Set(J.map((e=>"string"==typeof e.id?parseInt(e.id,10):e.id)).filter((e=>!isNaN(e))));B(e)}else B(new Set)},"aria-label":$("contacts.bulk_actions.select_all","Select all contacts"),className:"data-[state=indeterminate]:bg-primary data-[state=indeterminate]:text-primary-foreground",...oe&&{"data-state":"indeterminate"}})}),vs.jsx(PY,{children:$("contacts.table.name","Name")}),vs.jsx(PY,{children:$("contacts.table.contact_info","Contact Info")}),vs.jsx(PY,{children:$("contacts.table.company","Company")}),vs.jsx(PY,{children:$("contacts.table.channel","Channel")}),vs.jsx(PY,{children:$("contacts.table.tags","Tags")}),vs.jsx(PY,{children:$("contacts.table.last_updated","Last Updated")}),vs.jsx(PY,{children:$("contacts.table.actions","Actions")})]})}),vs.jsx(TY,{children:J.map((e=>{var t;const n="string"==typeof e.id?parseInt(e.id,10):e.id;return vs.jsxs(DY,{className:F.has(n)?"bg-blue-50 border-blue-200":"",children:[vs.jsx(OY,{children:vs.jsx(V7,{checked:F.has(n),onCheckedChange:e=>((e,t)=>{const n=new Set(F),a="string"==typeof e?parseInt(e,10):e;isNaN(a)||(t?n.add(a):n.delete(a),B(n))})(n,e),"aria-label":$("contacts.bulk_actions.select_contact","Select contact {{name}}",{name:e.name})})}),vs.jsx(OY,{className:"font-medium",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsxs("div",{className:"relative mr-3",children:[vs.jsx("img",{src:e.avatarUrl||`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random`,alt:e.name,className:"w-8 h-8 rounded-full"}),vs.jsx("span",{className:`absolute bottom-0 right-0 block h-2 w-2 rounded-full ${e.isActive?"bg-green-500":"bg-gray-300"} border border-white`})]}),e.name]})}),vs.jsx(OY,{children:vs.jsxs("div",{children:[e.email&&vs.jsx("div",{className:"text-sm",children:e.email}),e.phone&&vs.jsx("div",{className:"text-sm text-gray-500",children:e.phone})]})}),vs.jsx(OY,{children:e.company||"-"}),vs.jsx(OY,{children:vs.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 cursor-pointer hover:bg-gray-200",onClick:()=>le(e),children:["whatsapp"===e.identifierType&&vs.jsx("i",{className:"ri-whatsapp-line text-green-600 mr-1"}),"whatsapp_unofficial"===e.identifierType&&vs.jsx("i",{className:"ri-whatsapp-line text-green-600 mr-1"}),"messenger"===e.identifierType&&vs.jsx("i",{className:"ri-messenger-line text-blue-600 mr-1"}),"instagram"===e.identifierType&&vs.jsx("i",{className:"ri-instagram-line text-pink-600 mr-1"}),e.identifierType||"Unknown"]})}),vs.jsx(OY,{children:vs.jsx("div",{className:"flex flex-wrap gap-1",children:null==(t=e.tags)?void 0:t.map(((e,t)=>vs.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-800",children:e},t)))})}),vs.jsx(OY,{children:(a=e.updatedAt,a?Rz(new Date(a),{addSuffix:!0}):"Never")}),vs.jsx(OY,{children:vs.jsxs("div",{className:"flex space-x-2",children:[vs.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",title:$("contacts.message","Message"),onClick:()=>(e=>{le(e)})(e),children:vs.jsx("i",{className:"ri-message-3-line text-blue-500"})}),vs.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",title:$("common.edit","Edit"),onClick:()=>(e=>{p(e),g(!0)})(e),children:vs.jsx("i",{className:"ri-edit-line text-gray-500"})}),vs.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",title:$("common.delete","Delete"),onClick:()=>{return t=e.id,d(t),void f(!0);var t},children:vs.jsx("i",{className:"ri-delete-bin-line text-red-500"})})]})})]},e.id);var a}))})]})}),vs.jsx(W8,{currentPage:e,totalPages:X,onPageChange:t})]})]})]}),vs.jsx(x7,{open:u,onOpenChange:f,children:vs.jsxs(w7,{children:[vs.jsxs(j7,{children:[vs.jsx(C7,{children:$("contacts.delete_contact","Delete Contact")}),vs.jsx(S7,{children:$("contacts.delete_warning","This will permanently delete this contact and all associated conversations, messages, and notes. This action cannot be undone.")})]}),vs.jsxs(N7,{children:[vs.jsx(M7,{children:$("common.cancel","Cancel")}),vs.jsx(k7,{onClick:()=>{c&&ee.mutate(c),f(!1)},className:"bg-red-500 hover:bg-red-600",children:$("common.delete","Delete")})]})]})}),vs.jsx(x7,{open:U,onOpenChange:W,children:vs.jsxs(w7,{children:[vs.jsxs(j7,{children:[vs.jsx(C7,{children:$("contacts.bulk_delete.title","Delete {{count}} Contacts",{count:F.size})}),vs.jsx(S7,{children:$("contacts.bulk_delete.warning","This will permanently delete these contacts and all associated conversations, messages, and notes. This action cannot be undone.")})]}),vs.jsxs(N7,{children:[vs.jsx(M7,{disabled:G,children:$("common.cancel","Cancel")}),vs.jsx(k7,{onClick:()=>{const e=Array.from(F).map((e=>{const t="string"==typeof e?parseInt(e,10):Number(e);return isNaN(t)?null:t})).filter((e=>null!==e));0!==e.length?ae.mutate(e):q({title:$("common.error","Error"),description:"No valid contact IDs selected for deletion",variant:"destructive"})},disabled:G,className:"bg-red-500 hover:bg-red-600",children:G?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),$("contacts.bulk_delete.deleting","Deleting...")]}):$("contacts.bulk_delete.confirm","Delete {{count}} Contacts",{count:F.size})})]})]})}),vs.jsx(G8,{contact:m,isOpen:h,onClose:()=>{g(!1),p(null)}}),vs.jsx(yB,{open:x,onOpenChange:y,children:vs.jsxs(NB,{className:"sm:max-w-[500px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:$("contacts.add.title","Add New Contact")}),vs.jsx(MB,{children:$("contacts.add.description","Create a new contact with the information below.")})]}),vs.jsxs("div",{className:"space-y-4 pt-4",children:[vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs(EB,{htmlFor:"add-name",children:[$("contacts.add.name_label","Name")," *"]}),vs.jsx(LB,{id:"add-name",value:v.name,onChange:e=>b((t=>({...t,name:e.target.value}))),placeholder:$("contacts.add.name_placeholder","Enter contact name"),disabled:w})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"add-email",children:$("contacts.add.email_label","Email")}),vs.jsx(LB,{id:"add-email",type:"email",value:v.email,onChange:e=>b((t=>({...t,email:e.target.value}))),placeholder:$("contacts.add.email_placeholder","Enter email address"),disabled:w})]})]}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"add-phone",children:$("contacts.add.phone_label","Phone")}),vs.jsx(LB,{id:"add-phone",value:v.phone,onChange:e=>b((t=>({...t,phone:e.target.value}))),placeholder:$("contacts.add.phone_placeholder","Enter phone number"),disabled:w})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"add-company",children:$("contacts.add.company_label","Company")}),vs.jsx(LB,{id:"add-company",value:v.company,onChange:e=>b((t=>({...t,company:e.target.value}))),placeholder:$("contacts.add.company_placeholder","Enter company name"),disabled:w})]})]}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"add-channel",children:$("contacts.add.channel_label","Channel")}),vs.jsxs(ZU,{value:v.identifierType,onValueChange:e=>b((t=>({...t,identifierType:e}))),disabled:w,children:[vs.jsx(tW,{children:vs.jsx(eW,{placeholder:$("contacts.add.select_channel_placeholder","Select channel")})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"whatsapp",children:$("contacts.add.channel.whatsapp_official","WhatsApp Official")}),vs.jsx(sW,{value:"whatsapp_unofficial",children:$("contacts.add.channel.whatsapp_unofficial","WhatsApp Unofficial")}),vs.jsx(sW,{value:"messenger",children:$("contacts.add.channel.messenger","Facebook Messenger")}),vs.jsx(sW,{value:"instagram",children:$("contacts.add.channel.instagram","Instagram")})]})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"add-identifier",children:$("contacts.add.channel_identifier_label","Channel Identifier")}),vs.jsx(LB,{id:"add-identifier",value:v.identifier,onChange:e=>b((t=>({...t,identifier:e.target.value}))),placeholder:$("contacts.add.channel_identifier_placeholder","Phone number or ID"),disabled:w})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"add-tags",children:$("contacts.add.tags_label","Tags (comma separated)")}),vs.jsx(LB,{id:"add-tags",value:v.tags,onChange:e=>b((t=>({...t,tags:e.target.value}))),placeholder:$("contacts.add.tags_placeholder","lead, customer, etc."),disabled:w})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"add-notes",children:$("contacts.add.notes_label","Notes")}),vs.jsx(TB,{id:"add-notes",value:v.notes,onChange:e=>b((t=>({...t,notes:e.target.value}))),placeholder:$("contacts.add.notes_placeholder","Additional notes about this contact..."),rows:3,disabled:w})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{variant:"outline",onClick:()=>{y(!1),re()},disabled:w,children:$("common.cancel","Cancel")}),vs.jsx(lk,{onClick:()=>{if(!v.name.trim())return void q({title:$("common.error","Error"),description:$("contacts.add.name_required","Contact name is required"),variant:"destructive"});const e=v.tags?v.tags.split(",").map((e=>e.trim())).filter(Boolean):[];te.mutate({...v,tags:e})},disabled:w,children:w?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),$("contacts.add.creating","Creating...")]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Iw,{className:"mr-2 h-4 w-4"}),$("contacts.add.create_button","Create Contact")]})})]})]})}),vs.jsx(yB,{open:N,onOpenChange:C,children:vs.jsxs(NB,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:$("contacts.import.title","Import Contacts from CSV")}),vs.jsx(MB,{children:$("contacts.import.description","Upload a CSV file to import multiple contacts at once. Download the template to see the required format.")})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("div",{className:"flex justify-between items-center",children:vs.jsxs(lk,{variant:"outline",onClick:()=>{const e=[["name","email","phone","company","identifierType","identifier","notes","tags"].join(","),'Abid,admin@pointer.pk,+923059002132,Pointer Software,whatsapp,+923059020132,Sales lead,"lead,customer"','Niamat,niamat@pointer.pk,+923000052443,Pointer Software,messenger,niamat.shakran,Marketing contact,"prospect,vip"'].join("\n"),t=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="contacts_template.csv",a.click(),window.URL.revokeObjectURL(n)},className:"flex items-center gap-2",children:[vs.jsx(Hb,{className:"h-4 w-4"}),$("contacts.import.download_template","Download Template")]})}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{children:$("contacts.import.file_label","CSV File")}),vs.jsx(T3,{onFileSelected:e=>{k(e),se(e)},fileType:".csv",maxSize:10,className:"w-full",showProgress:I,progress:M}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:$("contacts.import.file_help","Maximum file size: 10MB. Only CSV files are supported.")})]}),R&&P.length>0&&vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{children:$("contacts.import.preview_label","Preview (first 5 rows)")}),vs.jsx("div",{className:"border rounded-md overflow-x-auto",children:vs.jsxs("table",{className:"w-full text-sm",children:[vs.jsx("thead",{className:"bg-gray-50",children:vs.jsx("tr",{children:Object.keys(P[0]||{}).map((e=>vs.jsx("th",{className:"px-3 py-2 text-left font-medium",children:e},e)))})}),vs.jsx("tbody",{children:P.map(((e,t)=>vs.jsx("tr",{className:"border-t",children:Object.values(e).map(((e,t)=>vs.jsx("td",{className:"px-3 py-2",children:e},t)))},t)))})]})})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{children:$("contacts.import.duplicate_handling_label","Duplicate Handling")}),vs.jsxs(ZU,{value:T,onValueChange:e=>D(e),disabled:I,children:[vs.jsx(tW,{children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"skip",children:$("contacts.import.duplicate.skip","Skip duplicates")}),vs.jsx(sW,{value:"update",children:$("contacts.import.duplicate.update","Update existing")}),vs.jsx(sW,{value:"create",children:$("contacts.import.duplicate.create","Create new")})]})]}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:$("contacts.import.duplicate_help","How to handle contacts with duplicate email addresses")})]}),I&&vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"flex justify-between text-sm",children:[vs.jsx("span",{children:$("contacts.import.importing","Importing...")}),vs.jsxs("span",{children:[M,"%"]})]}),vs.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:vs.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${M}%`}})})]}),E&&vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{children:$("contacts.import.results_label","Import Results")}),vs.jsxs("div",{className:"p-4 border rounded-md bg-gray-50",children:[vs.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[vs.jsx(Db,{className:"h-4 w-4"}),vs.jsx("span",{children:$("contacts.import.successful","Successfully imported: {{count}}",{count:E.successful})})]}),E.failed>0&&vs.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-2",children:[vs.jsx(Lb,{className:"h-4 w-4"}),vs.jsx("span",{children:$("contacts.import.failed","Failed to import: {{count}}",{count:E.failed})})]}),E.errors.length>0&&vs.jsxs("div",{className:"mt-2",children:[vs.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:$("contacts.import.errors","Errors:")}),vs.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[E.errors.slice(0,5).map(((e,t)=>vs.jsxs("li",{children:["• ",e]},t))),E.errors.length>5&&vs.jsxs("li",{children:["• ",$("contacts.import.more_errors","And {{count}} more errors...",{count:E.errors.length-5})]})]})]})]})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{variant:"outline",onClick:()=>{C(!1),k(null),_(0),L(null),O([]),z(!1),D("skip")},disabled:I,children:E?$("common.close","Close"):$("common.cancel","Cancel")}),!E&&vs.jsx(lk,{onClick:()=>{S?ne.mutate({file:S,duplicateHandling:T}):q({title:$("common.error","Error"),description:$("contacts.import.no_file_selected","Please select a CSV file to import"),variant:"destructive"})},disabled:!S||I,children:I?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),$("contacts.import.importing","Importing...")]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(sj,{className:"mr-2 h-4 w-4"}),$("contacts.import.import_button","Import Contacts")]})})]})]})})]})}V7.displayName=O7.displayName;const q7={1:{name:"Work",color:"bg-blue-500"},2:{name:"Personal",color:"bg-green-500"},3:{name:"Family",color:"bg-red-500"},4:{name:"Health",color:"bg-purple-500"},5:{name:"Projects",color:"bg-amber-500"},default:{name:"Default",color:"bg-slate-500"}},$7={1:"bg-blue-500",2:"bg-green-500",3:"bg-purple-500",4:"bg-red-500",5:"bg-yellow-500",6:"bg-orange-500",7:"bg-pink-500",8:"bg-indigo-500",9:"bg-teal-500",10:"bg-lime-500",11:"bg-amber-500",default:"bg-gray-500"},Y7={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",red:"bg-red-500",yellow:"bg-yellow-500",orange:"bg-orange-500",pink:"bg-pink-500",indigo:"bg-indigo-500",teal:"bg-teal-500",lime:"bg-lime-500",amber:"bg-amber-500"};function Q7(){var e;const{t:t}=mk(),{toast:n}=Fy(),{isConnected:a}=d9(),[r,s]=cs.useState(new Date),[i,o]=cs.useState(new Date),[l,c]=cs.useState("month"),[d,u]=cs.useState(null),[f,m]=cs.useState(!1),[p,h]=cs.useState(!1),[g,x]=cs.useState(!1),[y,v]=cs.useState(!1),[b,w]=cs.useState(!1),[j,N]=cs.useState(!1),[C,S]=cs.useState(!1),[k,M]=cs.useState(""),[_,I]=cs.useState("blue"),[A,E]=cs.useState(null),[L,T]=cs.useState(null),[D,P]=cs.useState("60"),[O,R]=cs.useState([]),[z,F]=cs.useState([{id:"1",name:"Work",selected:!0,color:"blue"},{id:"2",name:"Personal",selected:!0,color:"green"},{id:"3",name:"Family",selected:!0,color:"red"},{id:"4",name:"Health",selected:!0,color:"purple"},{id:"5",name:"Projects",selected:!0,color:"amber"}]),[B,U]=cs.useState([]),[W,G]=cs.useState({summary:"",description:"",location:"",startDateTime:zz(new Date),endDateTime:zz(_R(new Date,1)),attendees:[],attendeeInput:"",colorId:"1"}),V=cs.useMemo((()=>{let e,t;if("month"===l){const n=new Date(r.getFullYear(),r.getMonth(),1),a=new Date(r.getFullYear(),r.getMonth()+1,0);e=ER(n),t=KR(a)}else"week"===l?(e=ER(r),t=KR(r)):(e=r,t=r);return{start:Dz(e,"yyyy-MM-dd"),end:Dz(t,"yyyy-MM-dd")}}),[r,l]),H=Dz(i,"yyyy-MM-dd"),{data:q,isLoading:$,isError:Y,refetch:Q}=Sy({queryKey:["/api/google/calendar/events",V.start,V.end],queryFn:async()=>{const e=`${V.start}T00:00:00Z`,t=`${V.end}T23:59:59Z`;return(await _y("GET",`/api/google/calendar/events?timeMin=${encodeURIComponent(e)}&timeMax=${encodeURIComponent(t)}&maxResults=100`)).json()},enabled:!0});cs.useEffect((()=>{if(null==q?void 0:q.items){const e={};q.items.forEach((t=>{const n=t.colorId||"default",a=q7[n]||q7.default,r=a.name,s=a.color;e[n]||(e[n]={count:0,name:r,color:s}),e[n].count++}));const t=Object.entries(e).map((([e,t])=>({id:e,name:t.name,color:t.color,count:t.count,selected:!0})));U(t)}}),[null==q?void 0:q.items]);const{data:K}=Sy({queryKey:["/api/google/calendar/status"],queryFn:async()=>(await _y("GET","/api/google/calendar/status")).json()}),{data:J,isLoading:Z,refetch:X}=Sy({queryKey:["/api/google/calendar/availability",H,D],queryFn:async()=>(await _y("GET",`/api/google/calendar/availability?date=${H}&duration=${D}`)).json(),enabled:!1}),ee=ky({mutationFn:async e=>(await _y("POST","/api/google/calendar/events",e)).json(),onSuccess:()=>{n({title:t("calendar.event_created","Event Created"),description:t("calendar.appointment_created_success","Your appointment has been successfully created")}),m(!1),v(!1),Ay.invalidateQueries({queryKey:["/api/google/calendar/events"]}),Q(),ae()},onError:e=>{n({title:t("common.error","Error"),description:t("calendar.event_create_failed","Failed to create event: {{error}}",{error:e.message}),variant:"destructive"})}}),te=ky({mutationFn:async e=>(await _y("PATCH",`/api/google/calendar/events/${e.eventId}`,e.eventData)).json(),onSuccess:()=>{n({title:t("calendar.event_updated","Event Updated"),description:t("calendar.appointment_updated_success","Your appointment has been successfully updated")}),h(!1),Ay.invalidateQueries({queryKey:["/api/google/calendar/events"]}),Q(),u(null)},onError:e=>{n({title:t("common.error","Error"),description:t("calendar.event_update_failed","Failed to update event: {{error}}",{error:e.message}),variant:"destructive"})}}),ne=ky({mutationFn:async e=>{if((await _y("DELETE",`/api/google/calendar/events/${e}`)).ok)return{success:!0};throw new Error("Failed to delete event")},onSuccess:()=>{n({title:t("calendar.event_canceled","Event Canceled"),description:t("calendar.appointment_canceled_success","Your appointment has been successfully canceled")}),x(!1),Ay.invalidateQueries({queryKey:["/api/google/calendar/events"]}),Q(),u(null)},onError:e=>{n({title:t("common.error","Error"),description:t("calendar.event_cancel_failed","Failed to cancel event: {{error}}",{error:e.message}),variant:"destructive"})}}),ae=()=>{G({summary:"",description:"",location:"",startDateTime:zz(i||new Date),endDateTime:zz(_R(i||new Date,1)),attendees:[],attendeeInput:"",colorId:"1"}),T(null)};cs.useEffect((()=>{d&&p&&G({summary:d.summary||"",description:d.description||"",location:d.location||"",startDateTime:d.start.dateTime,endDateTime:d.end.dateTime,attendees:d.attendees?d.attendees.map((e=>e.email)):[],attendeeInput:"",colorId:d.colorId||"1"})}),[d,p]),cs.useEffect((()=>{(null==J?void 0:J.success)&&J.timeSlots&&R(J.timeSlots)}),[J]);const re=()=>{W.attendeeInput.trim()&&!W.attendees.includes(W.attendeeInput.trim())&&G({...W,attendees:[...W.attendees,W.attendeeInput.trim()],attendeeInput:""})},se=e=>{G({...W,attendees:W.attendees.filter((t=>t!==e))})},ie=cs.useMemo((()=>{if("month"===l){const e=new Date(r.getFullYear(),r.getMonth(),1),t=Vz(e,bR(e).getDay()),n=$R({start:t,end:jR(t,41)}),a=[];for(let r=0;r<6;r++)a.push(n.slice(7*r,7*(r+1)));return a}if("week"===l){const e=ER(r);return $R({start:e,end:jR(e,6)})}return[r]}),[r,l]),oe=cs.useMemo((()=>{if(!(null==q?void 0:q.items))return[];const e=B.filter((e=>e.selected)).map((e=>e.id)),t=z.filter((e=>e.selected)).map((e=>e.id));let n=q.items;return e.length!==B.length&&(n=q.items.filter((t=>!t.colorId||e.includes(t.colorId)))),t.length>0&&t.length!==z.length?n.filter((e=>{for(const n of t){const t=z.find((e=>e.id===n));if(!t)continue;const a=(e.summary||"").toLowerCase(),r=(e.description||"").toLowerCase(),s=t.name.toLowerCase();if(a.includes(s)||r.includes(s))return!0}return!1})):n}),[q,B,z]);cs.useMemo((()=>oe.length?oe.filter((e=>UR(new Date(e.start.dateTime),i))).sort(((e,t)=>new Date(e.start.dateTime).getTime()-new Date(t.start.dateTime).getTime())):[]),[oe,i]);const le=cs.useMemo((()=>{if(!oe.length)return new Map;const e=new Map;return oe.forEach((t=>{const n=Dz(new Date(t.start.dateTime),"yyyy-MM-dd");e.has(n)||e.set(n,[]),e.get(n).push(t)})),e}),[oe]),ce=e=>{const t=Dz(e,"yyyy-MM-dd");return le.get(t)||[]},de=(e,t)=>{const n=ce(e);return vs.jsxs("div",{className:"flex-1 flex flex-col min-h-[800px]",children:[vs.jsxs("div",{className:"text-center py-2 font-medium "+(Gz(e)?"bg-blue-100":"bg-gray-50"),children:[vs.jsx("div",{children:Dz(e,"EEE")}),vs.jsx("div",{className:"text-lg "+(Gz(e)?"text-blue-600":""),children:Dz(e,"d")})]}),vs.jsx("div",{className:"flex-1 flex flex-col border-l",children:t.map(((e,t)=>vs.jsxs("div",{className:"border-b py-2 px-1 flex-1 min-h-[60px] relative",children:[vs.jsx("div",{className:"text-xs text-gray-400 absolute top-0 left-1",children:e}),n.filter((t=>Dz(Hz(t.start.dateTime),"h a")===e)).map((e=>vs.jsxs("div",{className:`mt-4 p-1 rounded-sm text-xs text-white ${$7[e.colorId||"default"]}`,onClick:()=>{u(e),h(!0)},children:[Dz(Hz(e.start.dateTime),"h:mm a")," - ",e.summary]},e.id)))]},e)))})]})},ue=["8 am","9 am","10 am","11 am","12 pm","1 pm","2 pm","3 pm","4 pm","5 pm","6 pm"];return vs.jsxs("div",{className:"h-screen flex flex-col overflow-hidden font-poppins text-gray-800 bg-gray-50",children:[vs.jsx(uR,{}),vs.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[vs.jsx(yR,{}),vs.jsx("div",{className:"flex-1 overflow-y-auto",children:vs.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[vs.jsx(u9,{className:"mb-6",onAuthSuccess:()=>{window.location.reload()}}),vs.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[vs.jsxs("div",{className:"border-b p-4 flex justify-between items-center",children:[vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx("div",{className:"text-xl ",children:t("nav.calendar","Calendar")}),vs.jsx("div",{className:"text-sm text-gray-500",children:t("calendar.personal_teams","Personal, Teams")})]}),vs.jsxs("div",{className:"flex items-center space-x-4",children:[vs.jsx(lk,{variant:"outline",size:"sm",onClick:()=>{s(new Date),o(new Date)},children:t("calendar.today","Today")}),vs.jsxs("div",{className:"flex",children:[vs.jsx(lk,{variant:"ghost",size:"icon",onClick:()=>{s("month"===l?nF(r):"week"===l?RR(r,-1):Vz(r,1))},children:vs.jsx(_b,{className:"h-4 w-4"})}),vs.jsx(lk,{variant:"ghost",size:"icon",onClick:()=>{s("month"===l?NR(r,1):"week"===l?RR(r,1):jR(r,1))},children:vs.jsx(Ib,{className:"h-4 w-4"})})]}),vs.jsxs("div",{className:"text-lg ",children:["month"===l&&Dz(r,"MMMM yyyy"),"week"===l&&`Week of ${Dz(ER(r),"MMM d")} - ${Dz(KR(r),"MMM d, yyyy")}`,"day"===l&&Dz(r,"MMMM d, yyyy")]}),vs.jsxs("div",{className:"ml-4 flex items-center space-x-2",children:[vs.jsxs(ZU,{value:l,onValueChange:e=>c(e),children:[vs.jsx(tW,{className:"w-[100px]",children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"month",children:t("calendar.month","Month")}),vs.jsx(sW,{value:"week",children:t("calendar.week","Week")}),vs.jsx(sW,{value:"day",children:t("calendar.day","Day")})]})]}),vs.jsx(lk,{size:"icon",variant:"ghost",children:vs.jsx(Ow,{className:"h-4 w-4"})})]})]})]}),vs.jsxs("div",{className:"flex flex-1 h-full",children:[vs.jsxs("div",{className:"w-[260px] border-r p-4",children:[vs.jsxs("div",{className:"mb-6",children:[vs.jsxs("div",{className:"flex justify-between items-center mb-2",children:[vs.jsx("span",{className:"text-sm font-medium",children:Dz(r,"MMMM yyyy")}),vs.jsxs("div",{className:"flex",children:[vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(nF(r)),children:vs.jsx(_b,{className:"h-3 w-3"})}),vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(NR(r,1)),children:vs.jsx(Ib,{className:"h-3 w-3"})})]})]}),vs.jsx("div",{className:"grid grid-cols-7 text-center text-xs mb-1",children:["S","M","T","W","T","F","S"].map(((e,t)=>vs.jsx("div",{className:"py-1",children:e},t)))}),vs.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:$R({start:ER(new Date(r.getFullYear(),r.getMonth(),1)),end:KR(new Date(r.getFullYear(),r.getMonth()+1,0))}).map((e=>{const t=Wz(e,r),n=UR(e,i);return vs.jsx("button",{className:"h-7 w-7 flex items-center justify-center rounded-full "+(n?"bg-blue-600 text-white":Gz(e)?"bg-blue-100 text-blue-700":t?"":"text-gray-400"),onClick:()=>o(e),children:Dz(e,"d")},e.toString())}))})]}),vs.jsxs("div",{className:"mb-6",children:[vs.jsxs("div",{className:"flex justify-between items-center mb-4",children:[vs.jsx("span",{className:"text-base ",children:t("calendar.my_schedules","My Schedules")}),vs.jsxs("div",{className:"flex",children:[vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>w(!0),children:vs.jsx(Rb,{className:"h-4 w-4"})}),vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-6 w-6",children:vs.jsx(Mb,{className:"h-4 w-4"})})]})]}),vs.jsx("div",{className:"space-y-3",children:z.map((e=>vs.jsxs("div",{className:"flex items-center justify-between group",children:[vs.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>{return t=e.id,void F(z.map((e=>e.id===t?{...e,selected:!e.selected}:e)));var t},children:[vs.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center ${e.selected?Y7[e.color||"blue"]:"border-2 border-gray-300"}`,children:e.selected&&vs.jsx(kb,{className:"h-3 w-3 text-white"})}),vs.jsx("span",{className:"ml-2 text-sm font-medium",children:e.name})]}),vs.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:t=>{t.stopPropagation(),E(e),N(!0)},children:vs.jsx(kw,{className:"h-3 w-3"})}),vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500",onClick:t=>{t.stopPropagation(),E(e),S(!0)},children:vs.jsx(Xw,{className:"h-3 w-3"})})]})]},e.id)))})]}),vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex justify-between items-center mb-4",children:[vs.jsx("span",{className:"text-base ",children:t("calendar.categories","Categories")}),vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-6 w-6",children:vs.jsx(Mb,{className:"h-4 w-4"})})]}),vs.jsx("div",{className:"space-y-3",children:B.map((e=>vs.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>{return t=e.id,void U(B.map((e=>e.id===t?{...e,selected:!e.selected}:e)));var t},children:[vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:`w-4 h-4 rounded-full ${e.color}`}),vs.jsx("span",{className:"ml-2 text-sm font-medium",children:e.name})]}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx("span",{className:"text-xs bg-gray-100 rounded-full px-2 py-0.5",children:e.count}),vs.jsx("div",{className:"w-5 h-5 rounded flex items-center justify-center "+(e.selected?"bg-indigo-600":"border-2 border-gray-300"),children:e.selected&&vs.jsx(kb,{className:"h-3 w-3 text-white"})})]})]},e.id)))})]})]}),vs.jsxs("div",{className:"flex-1 overflow-auto",children:["month"===l&&vs.jsxs("div",{children:[vs.jsx("div",{className:"grid grid-cols-7 text-center border-b py-2 bg-gray-50",children:[t("calendar.sun","Sun"),t("calendar.mon","Mon"),t("calendar.tue","Tue"),t("calendar.wed","Wed"),t("calendar.thu","Thu"),t("calendar.fri","Fri"),t("calendar.sat","Sat")].map((e=>vs.jsx("div",{className:"text-sm font-medium text-gray-600",children:e},e)))}),vs.jsx("div",{className:"grid grid-cols-7",children:ie.flat().map((e=>(e=>{const n=ce(e),a=Wz(e,r),s=UR(e,i),l=Dz(e,"d");return vs.jsxs("div",{className:"border border-gray-200 min-h-[100px] p-1 transition-colors "+(Gz(e)?"bg-blue-50":a?s?"bg-blue-100":"":"bg-gray-50 text-gray-400"),onClick:()=>o(e),children:[vs.jsx("div",{className:"flex justify-between items-start",children:vs.jsx("span",{className:"text-sm font-medium "+(Gz(e)?"text-blue-700 w-6 h-6 rounded-full bg-blue-200 flex items-center justify-center":""),children:l})}),vs.jsxs("div",{className:"mt-1 space-y-1 max-h-[80px] overflow-hidden",children:[n.slice(0,3).map(((e,t)=>vs.jsxs("div",{className:`text-xs px-1 py-0.5 rounded truncate ${$7[e.colorId||"default"]} text-white`,onClick:t=>{t.stopPropagation(),u(e),h(!0)},children:[Dz(Hz(e.start.dateTime),"h:mm a")," ",e.summary]},e.id||t))),n.length>3&&vs.jsxs("div",{className:"text-xs text-gray-500 pl-1",children:["+",n.length-3," ",t("calendar.more","more")]})]})]},e.toString())})(e)))})]}),"week"===l&&vs.jsxs("div",{className:"flex h-full",children:[vs.jsx("div",{className:"w-16 pt-10 bg-gray-50 border-r",children:ue.map((e=>vs.jsx("div",{className:"h-[60px] border-b px-2 text-xs text-gray-500",children:e},e)))}),vs.jsx("div",{className:"flex-1 flex",children:ie.map((e=>de(e,ue)))})]}),"day"===l&&vs.jsxs("div",{className:"flex h-full",children:[vs.jsx("div",{className:"w-16 pt-10 bg-gray-50 border-r",children:ue.map((e=>vs.jsx("div",{className:"h-[60px] border-b px-2 text-xs text-gray-500",children:e},e)))}),vs.jsx("div",{className:"flex-1",children:de(r,ue)})]})]})]})]}),vs.jsxs("div",{className:"fixed bottom-8 right-8 flex space-x-2",children:[vs.jsxs(lk,{variant:"outline",onClick:()=>{a?(v(!0),X()):n({title:t("calendar.not_connected","Google Calendar Not Connected"),description:t("calendar.connect_first","Please connect your Google Calendar above first"),variant:"destructive"})},className:"rounded-full shadow-sm",children:[vs.jsx(Bb,{className:"h-4 w-4 mr-2"})," ",t("calendar.check_availability","Check Availability")]}),vs.jsxs(lk,{onClick:()=>{a?(ae(),m(!0)):n({title:t("calendar.not_connected","Google Calendar Not Connected"),description:t("calendar.connect_first","Please connect your Google Calendar above first"),variant:"destructive"})},className:"rounded-full shadow-sm text-green-600 btn-brand-primary",children:[vs.jsx(Nb,{className:"h-4 w-4 mr-2 "})," ",t("calendar.schedule_appointment","Schedule Appointment")]})]})]})})]}),vs.jsx(yB,{open:f,onOpenChange:m,children:vs.jsxs(NB,{className:"sm:max-w-[600px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:t("calendar.schedule_new_appointment","Schedule New Appointment")}),vs.jsx(MB,{children:t("calendar.create_new_event","Create a new event on your calendar.")})]}),vs.jsxs("div",{className:"grid gap-4 py-4",children:[vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsxs(EB,{htmlFor:"summary",className:"text-right",children:[t("calendar.title","Title"),"*"]}),vs.jsx(LB,{id:"summary",value:W.summary,onChange:e=>G({...W,summary:e.target.value}),className:"col-span-3"})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"description",className:"text-right",children:t("calendar.description","Description")}),vs.jsx(TB,{id:"description",value:W.description,onChange:e=>G({...W,description:e.target.value}),className:"col-span-3"})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"location",className:"text-right",children:t("calendar.location","Location")}),vs.jsx(LB,{id:"location",value:W.location,onChange:e=>G({...W,location:e.target.value}),className:"col-span-3"})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"colorId",className:"text-right",children:t("calendar.category","Category")}),vs.jsxs(ZU,{value:W.colorId,onValueChange:e=>G({...W,colorId:e}),children:[vs.jsx(tW,{className:"col-span-3",children:vs.jsx(eW,{placeholder:t("calendar.select_category","Select category")})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"1",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),vs.jsx("span",{children:"Blue"})]})}),vs.jsx(sW,{value:"2",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mr-2"}),vs.jsx("span",{children:"Green"})]})}),vs.jsx(sW,{value:"3",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500 mr-2"}),vs.jsx("span",{children:"Purple"})]})}),vs.jsx(sW,{value:"4",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mr-2"}),vs.jsx("span",{children:"Red"})]})}),vs.jsx(sW,{value:"5",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),vs.jsx("span",{children:"Yellow"})]})}),vs.jsx(sW,{value:"6",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500 mr-2"}),vs.jsx("span",{children:"Orange"})]})}),vs.jsx(sW,{value:"7",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-500 mr-2"}),vs.jsx("span",{children:"Turquoise"})]})}),vs.jsx(sW,{value:"8",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500 mr-2"}),vs.jsx("span",{children:"Gray"})]})})]})]})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"startDateTime",className:"text-right",children:"Start Time*"}),vs.jsx(LB,{id:"startDateTime",type:"datetime-local",value:W.startDateTime.slice(0,16),onChange:e=>G({...W,startDateTime:e.target.value}),className:"col-span-3"})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"endDateTime",className:"text-right",children:"End Time*"}),vs.jsx(LB,{id:"endDateTime",type:"datetime-local",value:W.endDateTime.slice(0,16),onChange:e=>G({...W,endDateTime:e.target.value}),className:"col-span-3"})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[vs.jsx(EB,{htmlFor:"attendees",className:"text-right pt-2",children:"Attendees"}),vs.jsxs("div",{className:"col-span-3 space-y-2",children:[vs.jsxs("div",{className:"flex space-x-2",children:[vs.jsx(LB,{id:"attendees",placeholder:"Enter email address",value:W.attendeeInput,onChange:e=>G({...W,attendeeInput:e.target.value}),className:"flex-1"}),vs.jsx(lk,{type:"button",className:"btn-brand-primary",onClick:re,children:"Add"})]}),vs.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:W.attendees.map((e=>vs.jsxs(dk,{variant:"secondary",className:"gap-1",children:[e,vs.jsx("button",{type:"button",onClick:()=>se(e),className:"ml-1 text-blue-600 hover:text-blue-800",children:vs.jsx(yj,{className:"h-3 w-3"})})]},e)))})]})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"outline",className:"btn-brand-primary",onClick:()=>m(!1),children:"Cancel"}),vs.jsx(lk,{type:"button",onClick:()=>{if(!W.summary||!W.startDateTime||!W.endDateTime)return void n({title:t("common.missing_information","Missing Information"),description:t("common.fill_required_fields","Please fill in all required fields"),variant:"destructive"});const e={summary:W.summary,description:W.description,location:W.location,startDateTime:W.startDateTime,endDateTime:W.endDateTime,attendees:W.attendees,colorId:W.colorId};ee.mutate(e)},disabled:ee.isPending,children:ee.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Appointment"})]})]})}),vs.jsx(yB,{open:p,onOpenChange:h,children:vs.jsxs(NB,{className:"sm:max-w-[600px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Edit Appointment"}),vs.jsx(MB,{children:"Update the details of your appointment."})]}),vs.jsxs("div",{className:"grid gap-4 py-4",children:[vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"edit-summary",className:"text-right",children:"Title*"}),vs.jsx(LB,{id:"edit-summary",value:W.summary,onChange:e=>G({...W,summary:e.target.value}),className:"col-span-3"})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"edit-description",className:"text-right",children:"Description"}),vs.jsx(TB,{id:"edit-description",value:W.description,onChange:e=>G({...W,description:e.target.value}),className:"col-span-3"})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"edit-location",className:"text-right",children:"Location"}),vs.jsx(LB,{id:"edit-location",value:W.location,onChange:e=>G({...W,location:e.target.value}),className:"col-span-3"})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"edit-colorId",className:"text-right",children:"Category"}),vs.jsxs(ZU,{value:W.colorId,onValueChange:e=>G({...W,colorId:e}),children:[vs.jsx(tW,{className:"col-span-3",children:vs.jsx(eW,{placeholder:"Select category"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"1",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),vs.jsx("span",{children:"Blue"})]})}),vs.jsx(sW,{value:"2",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mr-2"}),vs.jsx("span",{children:"Green"})]})}),vs.jsx(sW,{value:"3",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500 mr-2"}),vs.jsx("span",{children:"Purple"})]})}),vs.jsx(sW,{value:"4",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mr-2"}),vs.jsx("span",{children:"Red"})]})}),vs.jsx(sW,{value:"5",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),vs.jsx("span",{children:"Yellow"})]})}),vs.jsx(sW,{value:"6",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500 mr-2"}),vs.jsx("span",{children:"Orange"})]})}),vs.jsx(sW,{value:"7",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-500 mr-2"}),vs.jsx("span",{children:"Turquoise"})]})}),vs.jsx(sW,{value:"8",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500 mr-2"}),vs.jsx("span",{children:"Gray"})]})})]})]})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"edit-startDateTime",className:"text-right",children:"Start Time*"}),vs.jsx(LB,{id:"edit-startDateTime",type:"datetime-local",value:W.startDateTime.slice(0,16),onChange:e=>G({...W,startDateTime:e.target.value}),className:"col-span-3"})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"edit-endDateTime",className:"text-right",children:"End Time*"}),vs.jsx(LB,{id:"edit-endDateTime",type:"datetime-local",value:W.endDateTime.slice(0,16),onChange:e=>G({...W,endDateTime:e.target.value}),className:"col-span-3"})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[vs.jsx(EB,{htmlFor:"edit-attendees",className:"text-right pt-2",children:"Attendees"}),vs.jsxs("div",{className:"col-span-3 space-y-2",children:[vs.jsxs("div",{className:"flex space-x-2",children:[vs.jsx(LB,{id:"edit-attendees",placeholder:"Enter email address",value:W.attendeeInput,onChange:e=>G({...W,attendeeInput:e.target.value}),className:"flex-1"}),vs.jsx(lk,{type:"button",className:"btn-brand-primary",onClick:re,children:"Add"})]}),vs.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:W.attendees.map((e=>vs.jsxs(dk,{variant:"secondary",className:"gap-1",children:[e,vs.jsx("button",{type:"button",onClick:()=>se(e),className:"ml-1 text-blue-600 hover:text-blue-800",children:vs.jsx(yj,{className:"h-3 w-3"})})]},e)))})]})]})]}),vs.jsxs(SB,{className:"flex justify-between",children:[vs.jsx(lk,{type:"button",variant:"destructive",onClick:()=>{h(!1),x(!0)},children:"Delete"}),vs.jsxs("div",{className:"flex space-x-2",children:[vs.jsx(lk,{type:"button",variant:"outline",className:"btn-brand-primary",onClick:()=>h(!1),children:"Cancel"}),vs.jsx(lk,{type:"button",onClick:()=>{if(!(d&&W.summary&&W.startDateTime&&W.endDateTime))return void n({title:t("common.missing_information","Missing Information"),description:t("common.fill_required_fields","Please fill in all required fields"),variant:"destructive"});const e={summary:W.summary,description:W.description,location:W.location,startDateTime:W.startDateTime,endDateTime:W.endDateTime,attendees:W.attendees.map((e=>({email:e}))),colorId:W.colorId};te.mutate({eventId:d.id,eventData:e})},disabled:te.isPending,children:te.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Appointment"})]})]})]})}),vs.jsx(x7,{open:g,onOpenChange:x,children:vs.jsxs(w7,{children:[vs.jsxs(j7,{children:[vs.jsx(C7,{children:"Cancel Appointment"}),vs.jsxs(S7,{children:["Are you sure you want to cancel this appointment? This action cannot be undone.",d&&vs.jsxs("div",{className:"mt-2 font-medium",children:[d.summary," on ",(e=>{try{return Dz(Hz(e),"MMM d, yyyy h:mm a")}catch(t){return e}})(d.start.dateTime)]})]})]}),vs.jsxs(N7,{children:[vs.jsx(M7,{children:"No, Keep It"}),vs.jsx(k7,{onClick:()=>{(null==d?void 0:d.id)&&ne.mutate(d.id)},className:"bg-red-600 focus:ring-red-600",children:ne.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Canceling..."]}):"Yes, Cancel Appointment"})]})]})}),vs.jsx(yB,{open:b,onOpenChange:w,children:vs.jsxs(NB,{className:"sm:max-w-[425px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Add New Schedule"}),vs.jsx(MB,{children:"Create a new schedule to organize your events."})]}),vs.jsxs("div",{className:"grid gap-4 py-4",children:[vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"scheduleName",className:"text-right",children:"Name"}),vs.jsx(LB,{id:"scheduleName",placeholder:"Enter schedule name",value:k,onChange:e=>M(e.target.value),className:"col-span-3"})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"scheduleColor",className:"text-right",children:"Color"}),vs.jsxs(ZU,{value:_,onValueChange:I,children:[vs.jsx(tW,{className:"col-span-3",children:vs.jsx(eW,{placeholder:"Select color",children:_&&vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:`w-3 h-3 rounded-full ${Y7[_]} mr-2`}),vs.jsx("span",{children:_.charAt(0).toUpperCase()+_.slice(1)})]})})}),vs.jsx(rW,{children:Object.entries(Y7).map((([e,t])=>vs.jsx(sW,{value:e,children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:`w-3 h-3 rounded-full ${t} mr-2`}),vs.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)})]})},e)))})]})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"outline",className:"btn-brand-primary",onClick:()=>w(!1),children:"Cancel"}),vs.jsx(lk,{type:"button",onClick:()=>{if(!k.trim())return void n({title:t("common.missing_information","Missing Information"),description:t("calendar.enter_schedule_name","Please enter a schedule name"),variant:"destructive"});const e=(Math.max(...z.map((e=>parseInt(e.id))),0)+1).toString();F((t=>[...t,{id:e,name:k.trim(),selected:!0,color:_}])),M(""),I("blue"),w(!1),n({title:t("calendar.schedule_added","Schedule Added"),description:t("calendar.schedule_added_success",'New schedule "{{name}}" has been added',{name:k.trim()})})},children:"Add Schedule"})]})]})}),vs.jsx(yB,{open:j,onOpenChange:N,children:vs.jsxs(NB,{className:"sm:max-w-[425px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Edit Schedule"}),vs.jsx(MB,{children:"Update your schedule details."})]}),vs.jsxs("div",{className:"grid gap-4 py-4",children:[vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"editScheduleName",className:"text-right",children:"Name"}),vs.jsx(LB,{id:"editScheduleName",value:k,onChange:e=>M(e.target.value),className:"col-span-3",placeholder:"Work, Personal, etc."})]}),vs.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[vs.jsx(EB,{htmlFor:"editScheduleColor",className:"text-right",children:"Color"}),vs.jsxs(ZU,{value:_,onValueChange:I,children:[vs.jsx(tW,{className:"col-span-3",children:vs.jsx(eW,{placeholder:"Select color",children:_&&vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:`w-3 h-3 rounded-full ${Y7[_]} mr-2`}),vs.jsx("span",{children:_.charAt(0).toUpperCase()+_.slice(1)})]})})}),vs.jsx(rW,{children:Object.entries(Y7).map((([e,t])=>vs.jsx(sW,{value:e,children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:`w-3 h-3 rounded-full ${t} mr-2`}),vs.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)})]})},e)))})]})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"outline",className:"btn-brand-primary",onClick:()=>N(!1),children:"Cancel"}),vs.jsx(lk,{variant:"brand",className:"btn-brand-primary",type:"button",onClick:()=>{A&&k.trim()?(F((e=>e.map((e=>e.id===A.id?{...e,name:k.trim(),color:_}:e)))),M(""),I("blue"),N(!1),E(null),n({title:t("calendar.schedule_updated","Schedule Updated"),description:t("calendar.schedule_updated_success",'Schedule "{{name}}" has been updated',{name:k.trim()})})):n({title:t("common.missing_information","Missing Information"),description:t("calendar.enter_schedule_name","Please enter a schedule name"),variant:"destructive"})},children:"Save Changes"})]})]})}),vs.jsx(x7,{open:C,onOpenChange:S,children:vs.jsxs(w7,{children:[vs.jsxs(j7,{children:[vs.jsx(C7,{children:"Delete Schedule"}),vs.jsxs(S7,{children:["Are you sure you want to delete this schedule? This action cannot be undone.",A&&vs.jsxs("div",{className:"mt-2 font-medium flex items-center",children:[vs.jsx("div",{className:`w-3 h-3 rounded-full ${Y7[A.color||"blue"]} mr-2`}),A.name]})]})]}),vs.jsxs(N7,{children:[vs.jsx(M7,{children:"Cancel"}),vs.jsx(k7,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{A&&(F((e=>e.filter((e=>e.id!==A.id)))),S(!1),E(null),n({title:t("calendar.schedule_deleted","Schedule Deleted"),description:t("calendar.schedule_deleted_success",'Schedule "{{name}}" has been deleted',{name:A.name})}))},children:"Delete"})]})]})}),vs.jsx(yB,{open:y,onOpenChange:v,children:vs.jsxs(NB,{className:"sm:max-w-[600px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Available Time Slots"}),vs.jsx(MB,{children:"Select a time slot to create a new appointment."})]}),vs.jsxs("div",{className:"py-4",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-4",children:[vs.jsx("div",{className:"text-sm text-gray-500",children:i?Dz(i,"MMMM d, yyyy"):""}),vs.jsxs(ZU,{value:D,onValueChange:P,children:[vs.jsx(tW,{className:"w-[180px]",children:vs.jsx(eW,{placeholder:"Duration"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"15",children:"15 minutes"}),vs.jsx(sW,{value:"30",children:"30 minutes"}),vs.jsx(sW,{value:"60",children:"60 minutes"}),vs.jsx(sW,{value:"90",children:"90 minutes"})]})]})]}),Z?vs.jsx("div",{className:"flex justify-center p-6",children:vs.jsx(uw,{className:"h-6 w-6 animate-spin"})}):vs.jsx(vs.Fragment,{children:(null==O?void 0:O.length)>0&&(null==(e=O[0].slots)?void 0:e.length)>0?vs.jsx("div",{className:"grid grid-cols-3 gap-2",children:O[0].slots.map(((e,t)=>vs.jsx(lk,{variant:"brand",className:"text-center",onClick:()=>(e=>{var t;T(e);const[n,a]=(null==(t=e.match(/(\d+):(\d+)/))?void 0:t.slice(1,3).map(Number))||[0,0],r=e.toLowerCase().includes("pm"),s=r&&12!==n?n+12:r||12!==n?n:0,o=new Date(i||new Date);o.setHours(s,a,0,0);const l=new Date(o);l.setMinutes(l.getMinutes()+Number(D)),G({...W,startDateTime:zz(o),endDateTime:zz(l)}),v(!1),m(!0)})(e),children:e},t)))}):vs.jsxs("div",{className:"text-center py-8",children:[vs.jsx("div",{className:"text-gray-400 mb-2",children:vs.jsx("i",{className:"ri-time-line text-4xl"})}),vs.jsx("p",{className:"text-gray-500",children:"No available time slots found for the selected date and duration"})]})})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Cancel"}),vs.jsx(lk,{type:"button",onClick:()=>X(),disabled:Z,children:Z?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Checking..."]}):"Refresh Availability"})]})]})})]})}var K7=Array.isArray,J7="object"==typeof Nr&&Nr&&Nr.Object===Object&&Nr,Z7=J7,X7="object"==typeof self&&self&&self.Object===Object&&self,eee=Z7||X7||Function("return this")(),tee=eee.Symbol,nee=tee,aee=Object.prototype,ree=aee.hasOwnProperty,see=aee.toString,iee=nee?nee.toStringTag:void 0;var oee=function(e){var t=ree.call(e,iee),n=e[iee];try{e[iee]=void 0;var a=!0}catch(s){}var r=see.call(e);return a&&(t?e[iee]=n:delete e[iee]),r},lee=Object.prototype.toString;var cee=oee,dee=function(e){return lee.call(e)},uee=tee?tee.toStringTag:void 0;var fee=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":uee&&uee in Object(e)?cee(e):dee(e)};var mee=function(e){return null!=e&&"object"==typeof e},pee=fee,hee=mee;var gee=function(e){return"symbol"==typeof e||hee(e)&&"[object Symbol]"==pee(e)},xee=K7,yee=gee,vee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bee=/^\w*$/;var wee=function(e,t){if(xee(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!yee(e))||(bee.test(e)||!vee.test(e)||null!=t&&e in Object(t))};var jee=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const Nee=Cr(jee);var Cee=fee,See=jee;var kee=function(e){if(!See(e))return!1;var t=Cee(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const Mee=Cr(kee);var _ee,Iee=eee["__core-js_shared__"],Aee=(_ee=/[^.]+$/.exec(Iee&&Iee.keys&&Iee.keys.IE_PROTO||""))?"Symbol(src)_1."+_ee:"";var Eee=function(e){return!!Aee&&Aee in e},Lee=Function.prototype.toString;var Tee=function(e){if(null!=e){try{return Lee.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Dee=kee,Pee=Eee,Oee=jee,Ree=Tee,zee=/^\[object .+?Constructor\]$/,Fee=Function.prototype,Bee=Object.prototype,Uee=Fee.toString,Wee=Bee.hasOwnProperty,Gee=RegExp("^"+Uee.call(Wee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Vee=function(e){return!(!Oee(e)||Pee(e))&&(Dee(e)?Gee:zee).test(Ree(e))},Hee=function(e,t){return null==e?void 0:e[t]};var qee=function(e,t){var n=Hee(e,t);return Vee(n)?n:void 0},$ee=qee(Object,"create"),Yee=$ee;var Qee=function(){this.__data__=Yee?Yee(null):{},this.size=0};var Kee=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Jee=$ee,Zee=Object.prototype.hasOwnProperty;var Xee=function(e){var t=this.__data__;if(Jee){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Zee.call(t,e)?t[e]:void 0},ete=$ee,tte=Object.prototype.hasOwnProperty;var nte=$ee;var ate=Qee,rte=Kee,ste=Xee,ite=function(e){var t=this.__data__;return ete?void 0!==t[e]:tte.call(t,e)},ote=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nte&&void 0===t?"__lodash_hash_undefined__":t,this};function lte(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}lte.prototype.clear=ate,lte.prototype.delete=rte,lte.prototype.get=ste,lte.prototype.has=ite,lte.prototype.set=ote;var cte=lte;var dte=function(){this.__data__=[],this.size=0};var ute=function(e,t){return e===t||e!=e&&t!=t},fte=ute;var mte=function(e,t){for(var n=e.length;n--;)if(fte(e[n][0],t))return n;return-1},pte=mte,hte=Array.prototype.splice;var gte=mte;var xte=mte;var yte=mte;var vte=dte,bte=function(e){var t=this.__data__,n=pte(t,e);return!(n<0)&&(n==t.length-1?t.pop():hte.call(t,n,1),--this.size,!0)},wte=function(e){var t=this.__data__,n=gte(t,e);return n<0?void 0:t[n][1]},jte=function(e){return xte(this.__data__,e)>-1},Nte=function(e,t){var n=this.__data__,a=yte(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this};function Cte(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Cte.prototype.clear=vte,Cte.prototype.delete=bte,Cte.prototype.get=wte,Cte.prototype.has=jte,Cte.prototype.set=Nte;var Ste=Cte,kte=qee(eee,"Map"),Mte=cte,_te=Ste,Ite=kte;var Ate=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Ete=function(e,t){var n=e.__data__;return Ate(t)?n["string"==typeof t?"string":"hash"]:n.map},Lte=Ete;var Tte=Ete;var Dte=Ete;var Pte=Ete;var Ote=function(){this.size=0,this.__data__={hash:new Mte,map:new(Ite||_te),string:new Mte}},Rte=function(e){var t=Lte(this,e).delete(e);return this.size-=t?1:0,t},zte=function(e){return Tte(this,e).get(e)},Fte=function(e){return Dte(this,e).has(e)},Bte=function(e,t){var n=Pte(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this};function Ute(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Ute.prototype.clear=Ote,Ute.prototype.delete=Rte,Ute.prototype.get=zte,Ute.prototype.has=Fte,Ute.prototype.set=Bte;var Wte=Ute,Gte=Wte;function Vte(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],s=n.cache;if(s.has(r))return s.get(r);var i=e.apply(this,a);return n.cache=s.set(r,i)||s,i};return n.cache=new(Vte.Cache||Gte),n}Vte.Cache=Gte;var Hte=Vte;const qte=Cr(Hte);var $te=Hte;var Yte=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qte=/\\(\\)?/g,Kte=function(e){var t=$te(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Yte,(function(e,n,a,r){t.push(a?r.replace(Qte,"$1"):n||e)})),t}));var Jte=function(e,t){for(var n=-1,a=null==e?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r},Zte=Jte,Xte=K7,ene=gee,tne=tee?tee.prototype:void 0,nne=tne?tne.toString:void 0;var ane=function e(t){if("string"==typeof t)return t;if(Xte(t))return Zte(t,e)+"";if(ene(t))return nne?nne.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},rne=ane;var sne=function(e){return null==e?"":rne(e)},ine=K7,one=wee,lne=Kte,cne=sne;var dne=function(e,t){return ine(e)?e:one(e,t)?[e]:lne(cne(e))},une=gee;var fne=function(e){if("string"==typeof e||une(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},mne=dne,pne=fne;var hne=function(e,t){for(var n=0,a=(t=mne(t,e)).length;null!=e&&n<a;)e=e[pne(t[n++])];return n&&n==a?e:void 0},gne=hne;var xne=function(e,t,n){var a=null==e?void 0:gne(e,t);return void 0===a?n:a};const yne=Cr(xne);const vne=Cr((function(e){return null==e}));var bne=fee,wne=K7,jne=mee;const Nne=Cr((function(e){return"string"==typeof e||!wne(e)&&jne(e)&&"[object String]"==bne(e)}));var Cne,Sne={exports:{}},kne={},Mne=Symbol.for("react.element"),_ne=Symbol.for("react.portal"),Ine=Symbol.for("react.fragment"),Ane=Symbol.for("react.strict_mode"),Ene=Symbol.for("react.profiler"),Lne=Symbol.for("react.provider"),Tne=Symbol.for("react.context"),Dne=Symbol.for("react.server_context"),Pne=Symbol.for("react.forward_ref"),One=Symbol.for("react.suspense"),Rne=Symbol.for("react.suspense_list"),zne=Symbol.for("react.memo"),Fne=Symbol.for("react.lazy"),Bne=Symbol.for("react.offscreen");function Une(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Mne:switch(e=e.type){case Ine:case Ene:case Ane:case One:case Rne:return e;default:switch(e=e&&e.$$typeof){case Dne:case Tne:case Pne:case Fne:case zne:case Lne:return e;default:return t}}case _ne:return t}}}Cne=Symbol.for("react.module.reference"),kne.ContextConsumer=Tne,kne.ContextProvider=Lne,kne.Element=Mne,kne.ForwardRef=Pne,kne.Fragment=Ine,kne.Lazy=Fne,kne.Memo=zne,kne.Portal=_ne,kne.Profiler=Ene,kne.StrictMode=Ane,kne.Suspense=One,kne.SuspenseList=Rne,kne.isAsyncMode=function(){return!1},kne.isConcurrentMode=function(){return!1},kne.isContextConsumer=function(e){return Une(e)===Tne},kne.isContextProvider=function(e){return Une(e)===Lne},kne.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Mne},kne.isForwardRef=function(e){return Une(e)===Pne},kne.isFragment=function(e){return Une(e)===Ine},kne.isLazy=function(e){return Une(e)===Fne},kne.isMemo=function(e){return Une(e)===zne},kne.isPortal=function(e){return Une(e)===_ne},kne.isProfiler=function(e){return Une(e)===Ene},kne.isStrictMode=function(e){return Une(e)===Ane},kne.isSuspense=function(e){return Une(e)===One},kne.isSuspenseList=function(e){return Une(e)===Rne},kne.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Ine||e===Ene||e===Ane||e===One||e===Rne||e===Bne||"object"==typeof e&&null!==e&&(e.$$typeof===Fne||e.$$typeof===zne||e.$$typeof===Lne||e.$$typeof===Tne||e.$$typeof===Pne||e.$$typeof===Cne||void 0!==e.getModuleId)},kne.typeOf=Une,Sne.exports=kne;var Wne=Sne.exports,Gne=fee,Vne=mee;var Hne=function(e){return"number"==typeof e||Vne(e)&&"[object Number]"==Gne(e)};const qne=Cr(Hne);var $ne=Hne;const Yne=Cr((function(e){return $ne(e)&&e!=+e}));var Qne=function(e){return 0===e?0:e>0?1:-1},Kne=function(e){return Nne(e)&&e.indexOf("%")===e.length-1},Jne=function(e){return qne(e)&&!Yne(e)},Zne=function(e){return Jne(e)||Nne(e)},Xne=0,eae=function(e){var t=++Xne;return"".concat(e||"").concat(t)},tae=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Jne(e)&&!Nne(e))return a;if(Kne(e)){var s=e.indexOf("%");n=t*parseFloat(e.slice(0,s))/100}else n=+e;return Yne(n)&&(n=a),r&&n>t&&(n=t),n},nae=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},aae=function(e,t){return Jne(e)&&Jne(t)?function(n){return e+n*(t-e)}:function(){return t}};function rae(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"==typeof t?t(e):yne(e,t))===n})):null}var sae=function(e){if(!e||!e.length)return null;for(var t=e.length,n=0,a=0,r=0,s=0,i=1/0,o=-1/0,l=0,c=0,d=0;d<t;d++)n+=l=e[d].cx||0,a+=c=e[d].cy||0,r+=l*c,s+=l*l,i=Math.min(i,l),o=Math.max(o,l);var u=t*s!==n*n?(t*r-n*a)/(t*s-n*n):0;return{xmin:i,xmax:o,a:u,b:(a-u*n)/t}},iae=function(e,t){return Jne(e)&&Jne(t)?e-t:Nne(e)&&Nne(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function oae(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function lae(e){return(lae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var cae=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],dae=["points","pathLength"],uae={svg:["viewBox","children"],polygon:dae,polyline:dae},fae=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],mae=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if(cs.isValidElement(e)&&(n=e.props),!Nee(n))return null;var a={};return Object.keys(n).forEach((function(e){fae.includes(e)&&(a[e]=t||function(t){return n[e](n,t)})})),a},pae=function(e,t,n){if(!Nee(e)||"object"!==lae(e))return null;var a=null;return Object.keys(e).forEach((function(r){var s=e[r];fae.includes(r)&&"function"==typeof s&&(a||(a={}),a[r]=function(e,t,n){return function(a){return e(t,n,a),null}}(s,t,n))})),a},hae=["children"],gae=["children"];function xae(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yae(e){return(yae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var vae={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},bae=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},wae=null,jae=null,Nae=function e(t){if(t===wae&&Array.isArray(jae))return jae;var n=[];return cs.Children.forEach(t,(function(t){vne(t)||(Wne.isFragment(t)?n=n.concat(e(t.props.children)):n.push(t))})),jae=n,wae=t,n};function Cae(e,t){var n=[],a=[];return a=Array.isArray(t)?t.map((function(e){return bae(e)})):[bae(t)],Nae(e).forEach((function(e){var t=yne(e,"type.displayName")||yne(e,"type.name");-1!==a.indexOf(t)&&n.push(e)})),n}function Sae(e,t){var n=Cae(e,t);return n&&n[0]}var kae=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,a=t.height;return!(!Jne(n)||n<=0||!Jne(a)||a<=0)},Mae=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],_ae=function(e){return e&&"object"===yae(e)&&"clipDot"in e},Iae=function(e,t,n){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var a=e;if(cs.isValidElement(e)&&(a=e.props),!Nee(a))return null;var r={};return Object.keys(a).forEach((function(e){var s;(function(e,t,n,a){var r,s=null!==(r=null==uae?void 0:uae[a])&&void 0!==r?r:[];return t.startsWith("data-")||!Mee(e)&&(a&&s.includes(t)||cae.includes(t))||n&&fae.includes(t)})(null===(s=a)||void 0===s?void 0:s[e],e,t,n)&&(r[e]=a[e])})),r},Aae=function e(t,n){if(t===n)return!0;var a=cs.Children.count(t);if(a!==cs.Children.count(n))return!1;if(0===a)return!0;if(1===a)return Eae(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var r=0;r<a;r++){var s=t[r],i=n[r];if(Array.isArray(s)||Array.isArray(i)){if(!e(s,i))return!1}else if(!Eae(s,i))return!1}return!0},Eae=function(e,t){if(vne(e)&&vne(t))return!0;if(!vne(e)&&!vne(t)){var n=e.props||{},a=n.children,r=xae(n,hae),s=t.props||{},i=s.children,o=xae(s,gae);return a&&i?oae(r,o)&&Aae(a,i):!a&&!i&&oae(r,o)}return!1},Lae=function(e,t){var n=[],a={};return Nae(e).forEach((function(e,r){if(function(e){return e&&e.type&&Nne(e.type)&&Mae.indexOf(e.type)>=0}(e))n.push(e);else if(e){var s=bae(e.type),i=t[s]||{},o=i.handler,l=i.once;if(o&&(!l||!a[s])){var c=o(e,s,r);n.push(c),a[s]=!0}}})),n},Tae=["children","width","height","viewBox","className","style","title","desc"];function Dae(){return Dae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dae.apply(this,arguments)}function Pae(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Oae(e){var t=e.children,n=e.width,a=e.height,r=e.viewBox,s=e.className,i=e.style,o=e.title,l=e.desc,c=Pae(e,Tae),d=r||{width:n,height:a,x:0,y:0},u=cb("recharts-surface",s);return ds.createElement("svg",Dae({},Iae(c,!0,"svg"),{className:u,width:n,height:a,style:i,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),ds.createElement("title",null,o),ds.createElement("desc",null,l),t)}var Rae=["children","className"];function zae(){return zae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zae.apply(this,arguments)}function Fae(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Bae=ds.forwardRef((function(e,t){var n=e.children,a=e.className,r=Fae(e,Rae),s=cb("recharts-layer",a);return ds.createElement("g",zae({className:s},Iae(r,!0),{ref:t}),n)})),Uae=function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r]};var Wae=function(e,t,n){var a=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(r);++a<r;)s[a]=e[a+t];return s};var Gae=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:Wae(e,t,n)},Vae=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Hae=function(e){return Vae.test(e)};var qae=function(e){return e.split("")},$ae="\\ud800-\\udfff",Yae="["+$ae+"]",Qae="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Kae="\\ud83c[\\udffb-\\udfff]",Jae="[^"+$ae+"]",Zae="(?:\\ud83c[\\udde6-\\uddff]){2}",Xae="[\\ud800-\\udbff][\\udc00-\\udfff]",ere="(?:"+Qae+"|"+Kae+")"+"?",tre="[\\ufe0e\\ufe0f]?",nre=tre+ere+("(?:\\u200d(?:"+[Jae,Zae,Xae].join("|")+")"+tre+ere+")*"),are="(?:"+[Jae+Qae+"?",Qae,Zae,Xae,Yae].join("|")+")",rre=RegExp(Kae+"(?="+Kae+")|"+are+nre,"g");var sre=qae,ire=Hae,ore=function(e){return e.match(rre)||[]};var lre=Gae,cre=Hae,dre=function(e){return ire(e)?ore(e):sre(e)},ure=sne;const fre=Cr(function(e){return function(t){t=ure(t);var n=cre(t)?dre(t):void 0,a=n?n[0]:t.charAt(0),r=n?lre(n,1).join(""):t.slice(1);return a[e]()+r}}("toUpperCase"));function mre(e){return function(){return e}}const pre=Math.cos,hre=Math.sin,gre=Math.sqrt,xre=Math.PI,yre=2*xre,vre=Math.PI,bre=2*vre,wre=1e-6,jre=bre-wre;function Nre(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class Cre{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Nre:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Nre;const n=10**t;return function(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,a){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,t,n,a,r,s){this._append`C${+e},${+t},${+n},${+a},${this._x1=+r},${this._y1=+s}`}arcTo(e,t,n,a,r){if(e=+e,t=+t,n=+n,a=+a,(r=+r)<0)throw new Error(`negative radius: ${r}`);let s=this._x1,i=this._y1,o=n-e,l=a-t,c=s-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>wre)if(Math.abs(d*o-l*c)>wre&&r){let f=n-s,m=a-i,p=o*o+l*l,h=f*f+m*m,g=Math.sqrt(p),x=Math.sqrt(u),y=r*Math.tan((vre-Math.acos((p+u-h)/(2*g*x)))/2),v=y/x,b=y/g;Math.abs(v-1)>wre&&this._append`L${e+v*c},${t+v*d}`,this._append`A${r},${r},0,0,${+(d*f>c*m)},${this._x1=e+b*o},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,a,r,s){if(e=+e,t=+t,s=!!s,(n=+n)<0)throw new Error(`negative radius: ${n}`);let i=n*Math.cos(a),o=n*Math.sin(a),l=e+i,c=t+o,d=1^s,u=s?a-r:r-a;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>wre||Math.abs(this._y1-c)>wre)&&this._append`L${l},${c}`,n&&(u<0&&(u=u%bre+bre),u>jre?this._append`A${n},${n},0,1,${d},${e-i},${t-o}A${n},${n},0,1,${d},${this._x1=l},${this._y1=c}`:u>wre&&this._append`A${n},${n},0,${+(u>=vre)},${d},${this._x1=e+n*Math.cos(r)},${this._y1=t+n*Math.sin(r)}`)}rect(e,t,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Sre(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new Cre(t)}function kre(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Mre(e){this._context=e}function _re(e){return new Mre(e)}function Ire(e){return e[0]}function Are(e){return e[1]}function Ere(e,t){var n=mre(!0),a=null,r=_re,s=null,i=Sre(o);function o(o){var l,c,d,u=(o=kre(o)).length,f=!1;for(null==a&&(s=r(d=i())),l=0;l<=u;++l)!(l<u&&n(c=o[l],l,o))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(c,l,o),+t(c,l,o));if(d)return s=null,d+""||null}return e="function"==typeof e?e:void 0===e?Ire:mre(e),t="function"==typeof t?t:void 0===t?Are:mre(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:mre(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:mre(+e),o):t},o.defined=function(e){return arguments.length?(n="function"==typeof e?e:mre(!!e),o):n},o.curve=function(e){return arguments.length?(r=e,null!=a&&(s=r(a)),o):r},o.context=function(e){return arguments.length?(null==e?a=s=null:s=r(a=e),o):a},o}function Lre(e,t,n){var a=null,r=mre(!0),s=null,i=_re,o=null,l=Sre(c);function c(c){var d,u,f,m,p,h=(c=kre(c)).length,g=!1,x=new Array(h),y=new Array(h);for(null==s&&(o=i(p=l())),d=0;d<=h;++d){if(!(d<h&&r(m=c[d],d,c))===g)if(g=!g)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),f=d-1;f>=u;--f)o.point(x[f],y[f]);o.lineEnd(),o.areaEnd()}g&&(x[d]=+e(m,d,c),y[d]=+t(m,d,c),o.point(a?+a(m,d,c):x[d],n?+n(m,d,c):y[d]))}if(p)return o=null,p+""||null}function d(){return Ere().defined(r).curve(i).context(s)}return e="function"==typeof e?e:void 0===e?Ire:mre(+e),t="function"==typeof t?t:mre(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?Are:mre(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:mre(+t),a=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:mre(+t),c):e},c.x1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:mre(+e),c):a},c.y=function(e){return arguments.length?(t="function"==typeof e?e:mre(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:mre(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:mre(+e),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(a).y(t)},c.defined=function(e){return arguments.length?(r="function"==typeof e?e:mre(!!e),c):r},c.curve=function(e){return arguments.length?(i=e,null!=s&&(o=i(s)),c):i},c.context=function(e){return arguments.length?(null==e?s=o=null:o=i(s=e),c):s},c}Mre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class Tre{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const Dre={draw(e,t){const n=gre(t/xre);e.moveTo(n,0),e.arc(0,0,n,0,yre)}},Pre={draw(e,t){const n=gre(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Ore=gre(1/3),Rre=2*Ore,zre={draw(e,t){const n=gre(t/Rre),a=n*Ore;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},Fre={draw(e,t){const n=gre(t),a=-n/2;e.rect(a,a,n,n)}},Bre=hre(xre/10)/hre(7*xre/10),Ure=hre(yre/10)*Bre,Wre=-pre(yre/10)*Bre,Gre={draw(e,t){const n=gre(.8908130915292852*t),a=Ure*n,r=Wre*n;e.moveTo(0,-n),e.lineTo(a,r);for(let s=1;s<5;++s){const t=yre*s/5,i=pre(t),o=hre(t);e.lineTo(o*n,-i*n),e.lineTo(i*a-o*r,o*a+i*r)}e.closePath()}},Vre=gre(3),Hre={draw(e,t){const n=-gre(t/(3*Vre));e.moveTo(0,2*n),e.lineTo(-Vre*n,-n),e.lineTo(Vre*n,-n),e.closePath()}},qre=-.5,$re=gre(3)/2,Yre=1/gre(12),Qre=3*(Yre/2+1),Kre={draw(e,t){const n=gre(t/Qre),a=n/2,r=n*Yre,s=a,i=n*Yre+n,o=-s,l=i;e.moveTo(a,r),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(qre*a-$re*r,$re*a+qre*r),e.lineTo(qre*s-$re*i,$re*s+qre*i),e.lineTo(qre*o-$re*l,$re*o+qre*l),e.lineTo(qre*a+$re*r,qre*r-$re*a),e.lineTo(qre*s+$re*i,qre*i-$re*s),e.lineTo(qre*o+$re*l,qre*l-$re*o),e.closePath()}};function Jre(){}function Zre(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Xre(e){this._context=e}function ese(e){this._context=e}function tse(e){this._context=e}function nse(e){this._context=e}function ase(e){return e<0?-1:1}function rse(e,t,n){var a=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(a||r<0&&-0),i=(n-e._y1)/(r||a<0&&-0),o=(s*r+i*a)/(a+r);return(ase(s)+ase(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function sse(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ise(e,t,n){var a=e._x0,r=e._y0,s=e._x1,i=e._y1,o=(s-a)/3;e._context.bezierCurveTo(a+o,r+o*t,s-o,i-o*n,s,i)}function ose(e){this._context=e}function lse(e){this._context=new cse(e)}function cse(e){this._context=e}function dse(e){this._context=e}function use(e){var t,n,a=e.length-1,r=new Array(a),s=new Array(a),i=new Array(a);for(r[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<a-1;++t)r[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(r[a-1]=2,s[a-1]=7,i[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)n=r[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(r[a-1]=i[a-1]/s[a-1],t=a-2;t>=0;--t)r[t]=(i[t]-r[t+1])/s[t];for(s[a-1]=(e[a]+r[a-1])/2,t=0;t<a-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function fse(e,t){this._context=e,this._t=t}function mse(e,t){if((r=e.length)>1)for(var n,a,r,s=1,i=e[t[0]],o=i.length;s<r;++s)for(a=i,i=e[t[s]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function pse(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function hse(e,t){return e[t]}function gse(e){const t=[];return t.key=e,t}function xse(e){return(xse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Xre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zre(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zre(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ese.prototype={areaStart:Jre,areaEnd:Jre,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Zre(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},tse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Zre(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},nse.prototype={areaStart:Jre,areaEnd:Jre,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},ose.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ise(this,this._t0,sse(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ise(this,sse(this,n=rse(this,e,t)),n);break;default:ise(this,this._t0,n=rse(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(lse.prototype=Object.create(ose.prototype)).point=function(e,t){ose.prototype.point.call(this,t,e)},cse.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,r,s){this._context.bezierCurveTo(t,e,a,n,s,r)}},dse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var a=use(e),r=use(t),s=0,i=1;i<n;++s,++i)this._context.bezierCurveTo(a[0][s],r[0][s],a[1][s],r[1][s],e[i],t[i]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},fse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var yse=["type","size","sizeType"];function vse(){return vse=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vse.apply(this,arguments)}function bse(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function wse(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bse(Object(n),!0).forEach((function(t){jse(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bse(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jse(e,t,n){var a;return a=function(e,t){if("object"!=xse(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=xse(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==xse(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nse(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Cse={symbolCircle:Dre,symbolCross:Pre,symbolDiamond:zre,symbolSquare:Fre,symbolStar:Gre,symbolTriangle:Hre,symbolWye:Kre},Sse=Math.PI/180,kse=function(e){var t,n,a=e.type,r=void 0===a?"circle":a,s=e.size,i=void 0===s?64:s,o=e.sizeType,l=void 0===o?"area":o,c=wse(wse({},Nse(e,yse)),{},{type:r,size:i,sizeType:l}),d=c.className,u=c.cx,f=c.cy,m=Iae(c,!0);return u===+u&&f===+f&&i===+i?ds.createElement("path",vse({},m,{className:cb("recharts-symbols",d),transform:"translate(".concat(u,", ").concat(f,")"),d:(t=function(e){var t="symbol".concat(fre(e));return Cse[t]||Dre}(r),n=function(e,t){let n=null,a=Sre(r);function r(){let r;if(n||(n=r=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"==typeof e?e:mre(e||Dre),t="function"==typeof t?t:mre(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"==typeof t?t:mre(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:mre(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type(t).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var a=18*Sse;return 1.25*e*e*(Math.tan(a)-Math.tan(2*a)*Math.pow(Math.tan(a),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(i,l,r)),n())})):null};function Mse(e){return(Mse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _se(){return _se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_se.apply(this,arguments)}function Ise(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ase(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ose(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ese(e,t,n){return t=Tse(t),function(e,t){if(t&&("object"===Mse(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lse()?Reflect.construct(t,n||[],Tse(e).constructor):t.apply(e,n))}function Lse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lse=function(){return!!e})()}function Tse(e){return(Tse=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dse(e,t){return(Dse=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pse(e,t,n){return(t=Ose(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ose(e){var t=function(e,t){if("object"!=Mse(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Mse(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Mse(t)?t:t+""}kse.registerSymbol=function(e,t){Cse["symbol".concat(fre(e))]=t};var Rse=32,zse=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ese(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dse(e,t)}(e,cs.PureComponent),Ase(e,[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,a=Rse/6,r=Rse/3,s=e.inactive?t:e.color;if("plainline"===e.type)return ds.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:Rse,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return ds.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(n,"h").concat(r,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*r,",").concat(n,"\n            H").concat(Rse,"M").concat(2*r,",").concat(n,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(r,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return ds.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(4,"h").concat(Rse,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(ds.isValidElement(e.legendIcon)){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ise(Object(n),!0).forEach((function(t){Pse(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ise(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete i.legendIcon,ds.cloneElement(e.legendIcon,i)}return ds.createElement(kse,{fill:s,cx:n,cy:n,size:Rse,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,a=t.iconSize,r=t.layout,s=t.formatter,i=t.inactiveColor,o={x:0,y:0,width:Rse,height:Rse},l={display:"horizontal"===r?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(t,n){var r=t.formatter||s,d=cb(Pse(Pse({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",t.inactive));if("none"===t.type)return null;var u=Mee(t.value)?null:t.value;Uae(!Mee(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var f=t.inactive?i:t.color;return ds.createElement("li",_se({className:d,style:l,key:"legend-item-".concat(n)},pae(e.props,t,n)),ds.createElement(Oae,{width:a,height:a,viewBox:o,style:c},e.renderIcon(t)),ds.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},r?r(u,t,n):u))}))}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,a=e.align;if(!t||!t.length)return null;var r={padding:0,margin:0,textAlign:"horizontal"===n?a:"left"};return ds.createElement("ul",{className:"recharts-default-legend",style:r},this.renderItems())}}])}();Pse(zse,"displayName","Legend"),Pse(zse,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Fse=Ste;var Bse=Ste,Use=kte,Wse=Wte;var Gse=Ste,Vse=function(){this.__data__=new Fse,this.size=0},Hse=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},qse=function(e){return this.__data__.get(e)},$se=function(e){return this.__data__.has(e)},Yse=function(e,t){var n=this.__data__;if(n instanceof Bse){var a=n.__data__;if(!Use||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new Wse(a)}return n.set(e,t),this.size=n.size,this};function Qse(e){var t=this.__data__=new Gse(e);this.size=t.size}Qse.prototype.clear=Vse,Qse.prototype.delete=Hse,Qse.prototype.get=qse,Qse.prototype.has=$se,Qse.prototype.set=Yse;var Kse=Qse;var Jse=Wte,Zse=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Xse=function(e){return this.__data__.has(e)};function eie(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Jse;++t<n;)this.add(e[t])}eie.prototype.add=eie.prototype.push=Zse,eie.prototype.has=Xse;var tie=eie;var nie=function(e,t){for(var n=-1,a=null==e?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1};var aie=function(e,t){return e.has(t)},rie=tie,sie=nie,iie=aie;var oie=function(e,t,n,a,r,s){var i=1&n,o=e.length,l=t.length;if(o!=l&&!(i&&l>o))return!1;var c=s.get(e),d=s.get(t);if(c&&d)return c==t&&d==e;var u=-1,f=!0,m=2&n?new rie:void 0;for(s.set(e,t),s.set(t,e);++u<o;){var p=e[u],h=t[u];if(a)var g=i?a(h,p,u,t,e,s):a(p,h,u,e,t,s);if(void 0!==g){if(g)continue;f=!1;break}if(m){if(!sie(t,(function(e,t){if(!iie(m,t)&&(p===e||r(p,e,n,a,s)))return m.push(t)}))){f=!1;break}}else if(p!==h&&!r(p,h,n,a,s)){f=!1;break}}return s.delete(e),s.delete(t),f};var lie=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},cie=eee.Uint8Array,die=ute,uie=oie,fie=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,a){n[++t]=[a,e]})),n},mie=lie,pie=tee?tee.prototype:void 0,hie=pie?pie.valueOf:void 0;var gie=function(e,t,n,a,r,s,i){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new cie(e),new cie(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return die(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=fie;case"[object Set]":var l=1&a;if(o||(o=mie),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;a|=2,i.set(e,t);var d=uie(o(e),o(t),a,r,s,i);return i.delete(e),d;case"[object Symbol]":if(hie)return hie.call(e)==hie.call(t)}return!1};var xie=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e},yie=xie,vie=K7;var bie=function(e,t,n){var a=t(e);return vie(e)?a:yie(a,n(e))};var wie=function(e,t){for(var n=-1,a=null==e?0:e.length,r=0,s=[];++n<a;){var i=e[n];t(i,n,e)&&(s[r++]=i)}return s},jie=function(){return[]},Nie=Object.prototype.propertyIsEnumerable,Cie=Object.getOwnPropertySymbols,Sie=Cie?function(e){return null==e?[]:(e=Object(e),wie(Cie(e),(function(t){return Nie.call(e,t)})))}:jie;var kie=function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a},Mie=fee,_ie=mee;var Iie,Aie,Eie,Lie,Tie,Die,Pie,Oie,Rie=function(e){return _ie(e)&&"[object Arguments]"==Mie(e)},zie=mee,Fie=Object.prototype,Bie=Fie.hasOwnProperty,Uie=Fie.propertyIsEnumerable,Wie=Rie(function(){return arguments}())?Rie:function(e){return zie(e)&&Bie.call(e,"callee")&&!Uie.call(e,"callee")},Gie={exports:{}};Iie=Gie,Eie=eee,Lie=function(){return!1},Tie=(Aie=Gie.exports)&&!Aie.nodeType&&Aie,Die=Tie&&Iie&&!Iie.nodeType&&Iie,Pie=Die&&Die.exports===Tie?Eie.Buffer:void 0,Oie=(Pie?Pie.isBuffer:void 0)||Lie,Iie.exports=Oie;var Vie=Gie.exports,Hie=/^(?:0|[1-9]\d*)$/;var qie=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Hie.test(e))&&e>-1&&e%1==0&&e<t};var $ie=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Yie=fee,Qie=$ie,Kie=mee,Jie={};Jie["[object Float32Array]"]=Jie["[object Float64Array]"]=Jie["[object Int8Array]"]=Jie["[object Int16Array]"]=Jie["[object Int32Array]"]=Jie["[object Uint8Array]"]=Jie["[object Uint8ClampedArray]"]=Jie["[object Uint16Array]"]=Jie["[object Uint32Array]"]=!0,Jie["[object Arguments]"]=Jie["[object Array]"]=Jie["[object ArrayBuffer]"]=Jie["[object Boolean]"]=Jie["[object DataView]"]=Jie["[object Date]"]=Jie["[object Error]"]=Jie["[object Function]"]=Jie["[object Map]"]=Jie["[object Number]"]=Jie["[object Object]"]=Jie["[object RegExp]"]=Jie["[object Set]"]=Jie["[object String]"]=Jie["[object WeakMap]"]=!1;var Zie=function(e){return Kie(e)&&Qie(e.length)&&!!Jie[Yie(e)]};var Xie=function(e){return function(t){return e(t)}},eoe={exports:{}};!function(e,t){var n=J7,a=t&&!t.nodeType&&t,r=a&&e&&!e.nodeType&&e,s=r&&r.exports===a&&n.process,i=function(){try{var e=r&&r.require&&r.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=i}(eoe,eoe.exports);var toe=eoe.exports,noe=Zie,aoe=Xie,roe=toe&&toe.isTypedArray,soe=roe?aoe(roe):noe,ioe=kie,ooe=Wie,loe=K7,coe=Vie,doe=qie,uoe=soe,foe=Object.prototype.hasOwnProperty;var moe=function(e,t){var n=loe(e),a=!n&&ooe(e),r=!n&&!a&&coe(e),s=!n&&!a&&!r&&uoe(e),i=n||a||r||s,o=i?ioe(e.length,String):[],l=o.length;for(var c in e)!t&&!foe.call(e,c)||i&&("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||doe(c,l))||o.push(c);return o},poe=Object.prototype;var hoe=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||poe)};var goe=function(e,t){return function(n){return e(t(n))}},xoe=goe(Object.keys,Object),yoe=hoe,voe=xoe,boe=Object.prototype.hasOwnProperty;var woe=kee,joe=$ie;var Noe=function(e){return null!=e&&joe(e.length)&&!woe(e)},Coe=moe,Soe=function(e){if(!yoe(e))return voe(e);var t=[];for(var n in Object(e))boe.call(e,n)&&"constructor"!=n&&t.push(n);return t},koe=Noe;var Moe=function(e){return koe(e)?Coe(e):Soe(e)},_oe=bie,Ioe=Sie,Aoe=Moe;var Eoe=function(e){return _oe(e,Aoe,Ioe)},Loe=Object.prototype.hasOwnProperty;var Toe=function(e,t,n,a,r,s){var i=1&n,o=Eoe(e),l=o.length;if(l!=Eoe(t).length&&!i)return!1;for(var c=l;c--;){var d=o[c];if(!(i?d in t:Loe.call(t,d)))return!1}var u=s.get(e),f=s.get(t);if(u&&f)return u==t&&f==e;var m=!0;s.set(e,t),s.set(t,e);for(var p=i;++c<l;){var h=e[d=o[c]],g=t[d];if(a)var x=i?a(g,h,d,t,e,s):a(h,g,d,e,t,s);if(!(void 0===x?h===g||r(h,g,n,a,s):x)){m=!1;break}p||(p="constructor"==d)}if(m&&!p){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(m=!1)}return s.delete(e),s.delete(t),m},Doe=qee(eee,"DataView"),Poe=qee(eee,"Promise"),Ooe=qee(eee,"Set"),Roe=Doe,zoe=kte,Foe=Poe,Boe=Ooe,Uoe=qee(eee,"WeakMap"),Woe=fee,Goe=Tee,Voe="[object Map]",Hoe="[object Promise]",qoe="[object Set]",$oe="[object WeakMap]",Yoe="[object DataView]",Qoe=Goe(Roe),Koe=Goe(zoe),Joe=Goe(Foe),Zoe=Goe(Boe),Xoe=Goe(Uoe),ele=Woe;(Roe&&ele(new Roe(new ArrayBuffer(1)))!=Yoe||zoe&&ele(new zoe)!=Voe||Foe&&ele(Foe.resolve())!=Hoe||Boe&&ele(new Boe)!=qoe||Uoe&&ele(new Uoe)!=$oe)&&(ele=function(e){var t=Woe(e),n="[object Object]"==t?e.constructor:void 0,a=n?Goe(n):"";if(a)switch(a){case Qoe:return Yoe;case Koe:return Voe;case Joe:return Hoe;case Zoe:return qoe;case Xoe:return $oe}return t});var tle=Kse,nle=oie,ale=gie,rle=Toe,sle=ele,ile=K7,ole=Vie,lle=soe,cle="[object Arguments]",dle="[object Array]",ule="[object Object]",fle=Object.prototype.hasOwnProperty;var mle=function(e,t,n,a,r,s){var i=ile(e),o=ile(t),l=i?dle:sle(e),c=o?dle:sle(t),d=(l=l==cle?ule:l)==ule,u=(c=c==cle?ule:c)==ule,f=l==c;if(f&&ole(e)){if(!ole(t))return!1;i=!0,d=!1}if(f&&!d)return s||(s=new tle),i||lle(e)?nle(e,t,n,a,r,s):ale(e,t,l,n,a,r,s);if(!(1&n)){var m=d&&fle.call(e,"__wrapped__"),p=u&&fle.call(t,"__wrapped__");if(m||p){var h=m?e.value():e,g=p?t.value():t;return s||(s=new tle),r(h,g,n,a,s)}}return!!f&&(s||(s=new tle),rle(e,t,n,a,r,s))},ple=mee;var hle=function e(t,n,a,r,s){return t===n||(null==t||null==n||!ple(t)&&!ple(n)?t!=t&&n!=n:mle(t,n,a,r,e,s))},gle=Kse,xle=hle;var yle=jee;var vle=function(e){return e==e&&!yle(e)},ble=vle,wle=Moe;var jle=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},Nle=function(e,t,n,a){var r=n.length,s=r,i=!a;if(null==e)return!s;for(e=Object(e);r--;){var o=n[r];if(i&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++r<s;){var l=(o=n[r])[0],c=e[l],d=o[1];if(i&&o[2]){if(void 0===c&&!(l in e))return!1}else{var u=new gle;if(a)var f=a(c,d,l,e,t,u);if(!(void 0===f?xle(d,c,3,a,u):f))return!1}}return!0},Cle=function(e){for(var t=wle(e),n=t.length;n--;){var a=t[n],r=e[a];t[n]=[a,r,ble(r)]}return t},Sle=jle;var kle=dne,Mle=Wie,_le=K7,Ile=qie,Ale=$ie,Ele=fne;var Lle=function(e,t){return null!=e&&t in Object(e)},Tle=function(e,t,n){for(var a=-1,r=(t=kle(t,e)).length,s=!1;++a<r;){var i=Ele(t[a]);if(!(s=null!=e&&n(e,i)))break;e=e[i]}return s||++a!=r?s:!!(r=null==e?0:e.length)&&Ale(r)&&Ile(i,r)&&(_le(e)||Mle(e))};var Dle=hle,Ple=xne,Ole=function(e,t){return null!=e&&Tle(e,t,Lle)},Rle=wee,zle=vle,Fle=jle,Ble=fne;var Ule=function(e){return e};var Wle=hne;var Gle=function(e){return function(t){return null==t?void 0:t[e]}},Vle=function(e){return function(t){return Wle(t,e)}},Hle=wee,qle=fne;var $le=function(e){var t=Cle(e);return 1==t.length&&t[0][2]?Sle(t[0][0],t[0][1]):function(n){return n===e||Nle(n,e,t)}},Yle=function(e,t){return Rle(e)&&zle(t)?Fle(Ble(e),t):function(n){var a=Ple(n,e);return void 0===a&&a===t?Ole(n,e):Dle(t,a,3)}},Qle=Ule,Kle=K7,Jle=function(e){return Hle(e)?Gle(qle(e)):Vle(e)};var Zle=function(e){return"function"==typeof e?e:null==e?Qle:"object"==typeof e?Kle(e)?Yle(e[0],e[1]):$le(e):Jle(e)};var Xle=function(e,t,n,a){for(var r=e.length,s=n+(a?1:-1);a?s--:++s<r;)if(t(e[s],s,e))return s;return-1};var ece=Xle,tce=function(e){return e!=e},nce=function(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1};var ace=function(e,t,n){return t==t?nce(e,t,n):ece(e,tce,n)};var rce=function(e,t){return!!(null==e?0:e.length)&&ace(e,t,0)>-1};var sce=function(e,t,n){for(var a=-1,r=null==e?0:e.length;++a<r;)if(n(t,e[a]))return!0;return!1};var ice=Ooe,oce=function(){},lce=ice&&1/lie(new ice([,-0]))[1]==1/0?function(e){return new ice(e)}:oce,cce=tie,dce=rce,uce=sce,fce=aie,mce=lce,pce=lie;var hce=Zle,gce=function(e,t,n){var a=-1,r=dce,s=e.length,i=!0,o=[],l=o;if(n)i=!1,r=uce;else if(s>=200){var c=t?null:mce(e);if(c)return pce(c);i=!1,r=fce,l=new cce}else l=t?[]:o;e:for(;++a<s;){var d=e[a],u=t?t(d):d;if(d=n||0!==d?d:0,i&&u==u){for(var f=l.length;f--;)if(l[f]===u)continue e;t&&l.push(u),o.push(d)}else r(l,u,n)||(l!==o&&l.push(u),o.push(d))}return o};const xce=Cr((function(e,t){return e&&e.length?gce(e,hce(t)):[]}));function yce(e,t,n){return!0===t?xce(e,n):Mee(t)?xce(e,t):e}function vce(e){return(vce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var bce=["ref"];function wce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function jce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wce(Object(n),!0).forEach((function(t){_ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nce(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ice(a.key),a)}}function Cce(e,t,n){return t=kce(t),function(e,t){if(t&&("object"===vce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Sce()?Reflect.construct(t,n||[],kce(e).constructor):t.apply(e,n))}function Sce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sce=function(){return!!e})()}function kce(e){return(kce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mce(e,t){return(Mce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _ce(e,t,n){return(t=Ice(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ice(e){var t=function(e,t){if("object"!=vce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=vce(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==vce(t)?t:t+""}function Ace(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ece(e){return e.value}var Lce=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return _ce(t=Cce(this,e,[].concat(a)),"lastBoundingBox",{width:-1,height:-1}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mce(e,t)}(e,cs.PureComponent),t=e,a=[{key:"getWithHeight",value:function(e,t){var n=jce(jce({},this.defaultProps),e.props).layout;return"vertical"===n&&Jne(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],(n=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?jce({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,a=this.props,r=a.layout,s=a.align,i=a.verticalAlign,o=a.margin,l=a.chartWidth,c=a.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===s&&"vertical"===r?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===s?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===i?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===i?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),jce(jce({},t),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,a=t.width,r=t.height,s=t.wrapperStyle,i=t.payloadUniqBy,o=t.payload,l=jce(jce({position:"absolute",width:a||"auto",height:r||"auto"},this.getDefaultPosition(s)),s);return ds.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,t){if(ds.isValidElement(e))return ds.cloneElement(e,t);if("function"==typeof e)return ds.createElement(e,t);t.ref;var n=Ace(t,bce);return ds.createElement(zse,n)}(n,jce(jce({},this.props),{},{payload:yce(o,i,Ece)})))}}])&&Nce(t.prototype,n),a&&Nce(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();_ce(Lce,"displayName","Legend"),_ce(Lce,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Tce=Wie,Dce=K7,Pce=tee?tee.isConcatSpreadable:void 0;var Oce=xie,Rce=function(e){return Dce(e)||Tce(e)||!!(Pce&&e&&e[Pce])};var zce=function e(t,n,a,r,s){var i=-1,o=t.length;for(a||(a=Rce),s||(s=[]);++i<o;){var l=t[i];n>0&&a(l)?n>1?e(l,n-1,a,r,s):Oce(s,l):r||(s[s.length]=l)}return s};var Fce=function(e){return function(t,n,a){for(var r=-1,s=Object(t),i=a(t),o=i.length;o--;){var l=i[e?o:++r];if(!1===n(s[l],l,s))break}return t}}(),Bce=Moe;var Uce=function(e,t){return e&&Fce(e,t,Bce)},Wce=Noe;var Gce=function(e,t){return function(n,a){if(null==n)return n;if(!Wce(n))return e(n,a);for(var r=n.length,s=t?r:-1,i=Object(n);(t?s--:++s<r)&&!1!==a(i[s],s,i););return n}}(Uce),Vce=Gce,Hce=Noe;var qce=function(e,t){var n=-1,a=Hce(e)?Array(e.length):[];return Vce(e,(function(e,r,s){a[++n]=t(e,r,s)})),a};var $ce=gee;var Yce=function(e,t){if(e!==t){var n=void 0!==e,a=null===e,r=e==e,s=$ce(e),i=void 0!==t,o=null===t,l=t==t,c=$ce(t);if(!o&&!c&&!s&&e>t||s&&i&&l&&!o&&!c||a&&i&&l||!n&&l||!r)return 1;if(!a&&!s&&!c&&e<t||c&&n&&r&&!a&&!s||o&&n&&r||!i&&r||!l)return-1}return 0};var Qce=Jte,Kce=hne,Jce=Zle,Zce=qce,Xce=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},ede=Xie,tde=function(e,t,n){for(var a=-1,r=e.criteria,s=t.criteria,i=r.length,o=n.length;++a<i;){var l=Yce(r[a],s[a]);if(l)return a>=o?l:l*("desc"==n[a]?-1:1)}return e.index-t.index},nde=Ule,ade=K7;var rde=function(e,t,n){t=t.length?Qce(t,(function(e){return ade(e)?function(t){return Kce(t,1===e.length?e[0]:e)}:e})):[nde];var a=-1;t=Qce(t,ede(Jce));var r=Zce(e,(function(e,n,r){return{criteria:Qce(t,(function(t){return t(e)})),index:++a,value:e}}));return Xce(r,(function(e,t){return tde(e,t,n)}))};var sde=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},ide=sde,ode=Math.max;var lde=function(e,t,n){return t=ode(void 0===t?e.length-1:t,0),function(){for(var a=arguments,r=-1,s=ode(a.length-t,0),i=Array(s);++r<s;)i[r]=a[t+r];r=-1;for(var o=Array(t+1);++r<t;)o[r]=a[r];return o[t]=n(i),ide(e,this,o)}};var cde=function(e){return function(){return e}},dde=qee,ude=function(){try{var e=dde(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),fde=cde,mde=ude,pde=mde?function(e,t){return mde(e,"toString",{configurable:!0,enumerable:!1,value:fde(t),writable:!0})}:Ule,hde=Date.now;var gde=function(e){var t=0,n=0;return function(){var a=hde(),r=16-(a-n);if(n=a,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(pde),xde=Ule,yde=lde,vde=gde;var bde=ute,wde=Noe,jde=qie,Nde=jee;var Cde=function(e,t,n){if(!Nde(n))return!1;var a=typeof t;return!!("number"==a?wde(n)&&jde(t,n.length):"string"==a&&t in n)&&bde(n[t],e)},Sde=zce,kde=rde,Mde=Cde;const _de=Cr(function(e,t){return vde(yde(e,t,xde),e+"")}((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Mde(e,t[0],t[1])?t=[]:n>2&&Mde(t[0],t[1],t[2])&&(t=[t[0]]),kde(e,Sde(t,1),[])})));function Ide(e){return(Ide="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ade(){return Ade=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ade.apply(this,arguments)}function Ede(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t);else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lde(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lde(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lde(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Tde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tde(Object(n),!0).forEach((function(t){Pde(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tde(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pde(e,t,n){var a;return a=function(e,t){if("object"!=Ide(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Ide(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ide(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ode(e){return Array.isArray(e)&&Zne(e[0])&&Zne(e[1])?e.join(" ~ "):e}var Rde=function(e){var t=e.separator,n=void 0===t?" : ":t,a=e.contentStyle,r=void 0===a?{}:a,s=e.itemStyle,i=void 0===s?{}:s,o=e.labelStyle,l=void 0===o?{}:o,c=e.payload,d=e.formatter,u=e.itemSorter,f=e.wrapperClassName,m=e.labelClassName,p=e.label,h=e.labelFormatter,g=e.accessibilityLayer,x=void 0!==g&&g,y=Dde({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=Dde({margin:0},l),b=!vne(p),w=b?p:"",j=cb("recharts-default-tooltip",f),N=cb("recharts-tooltip-label",m);b&&h&&null!=c&&(w=h(p,c));var C=x?{role:"status","aria-live":"assertive"}:{};return ds.createElement("div",Ade({className:j,style:y},C),ds.createElement("p",{className:N,style:v},ds.isValidElement(w)?w:"".concat(w)),function(){if(c&&c.length){var e=(u?_de(c,u):c).map((function(e,t){if("none"===e.type)return null;var a=Dde({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i),r=e.formatter||d||Ode,s=e.value,o=e.name,l=s,u=o;if(r&&null!=l&&null!=u){var f=r(s,o,e,t,c);if(Array.isArray(f)){var m=Ede(f,2);l=m[0],u=m[1]}else l=f}return ds.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:a},Zne(u)?ds.createElement("span",{className:"recharts-tooltip-item-name"},u):null,Zne(u)?ds.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ds.createElement("span",{className:"recharts-tooltip-item-value"},l),ds.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return ds.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function zde(e){return(zde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fde(e,t,n){var a;return a=function(e,t){if("object"!=zde(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=zde(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==zde(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bde="recharts-tooltip-wrapper",Ude={visibility:"hidden"};function Wde(e){var t=e.coordinate,n=e.translateX,a=e.translateY;return cb(Bde,Fde(Fde(Fde(Fde({},"".concat(Bde,"-right"),Jne(n)&&t&&Jne(t.x)&&n>=t.x),"".concat(Bde,"-left"),Jne(n)&&t&&Jne(t.x)&&n<t.x),"".concat(Bde,"-bottom"),Jne(a)&&t&&Jne(t.y)&&a>=t.y),"".concat(Bde,"-top"),Jne(a)&&t&&Jne(t.y)&&a<t.y))}function Gde(e){var t=e.allowEscapeViewBox,n=e.coordinate,a=e.key,r=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(s&&Jne(s[a]))return s[a];var d=n[a]-o-r,u=n[a]+r;return t[a]?i[a]?d:u:i[a]?d<l[a]?Math.max(u,l[a]):Math.max(d,l[a]):u+o>l[a]+c?Math.max(d,l[a]):Math.max(u,l[a])}function Vde(e){return(Vde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function qde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hde(Object(n),!0).forEach((function(t){Zde(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hde(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $de(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Xde(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yde(e,t,n){return t=Kde(t),function(e,t){if(t&&("object"===Vde(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qde()?Reflect.construct(t,n||[],Kde(e).constructor):t.apply(e,n))}function Qde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qde=function(){return!!e})()}function Kde(e){return(Kde=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jde(e,t){return(Jde=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zde(e,t,n){return(t=Xde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xde(e){var t=function(e,t){if("object"!=Vde(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Vde(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Vde(t)?t:t+""}var eue=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return Zde(t=Yde(this,e,[].concat(a)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Zde(t,"handleKeyDown",(function(e){var n,a,r,s;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(a=t.props.coordinate)||void 0===a?void 0:a.x)&&void 0!==n?n:0,y:null!==(r=null===(s=t.props.coordinate)||void 0===s?void 0:s.y)&&void 0!==r?r:0}})})),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jde(e,t)}(e,cs.PureComponent),$de(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,a=t.allowEscapeViewBox,r=t.animationDuration,s=t.animationEasing,i=t.children,o=t.coordinate,l=t.hasPayload,c=t.isAnimationActive,d=t.offset,u=t.position,f=t.reverseDirection,m=t.useTranslate3d,p=t.viewBox,h=t.wrapperStyle,g=function(e){var t,n,a=e.allowEscapeViewBox,r=e.coordinate,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,d=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&r?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=Gde({allowEscapeViewBox:a,coordinate:r,key:"x",offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),translateY:n=Gde({allowEscapeViewBox:a,coordinate:r,key:"y",offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):Ude,cssClasses:Wde({translateX:t,translateY:n,coordinate:r})}}({allowEscapeViewBox:a,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:f,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:p}),x=g.cssClasses,y=g.cssProperties,v=qde(qde({transition:c&&n?"transform ".concat(r,"ms ").concat(s):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&l?"visible":"hidden",position:"absolute",top:0,left:0},h);return ds.createElement("div",{tabIndex:-1,className:x,style:v,ref:function(t){e.wrapperNode=t}},i)}}])}(),tue={isSsr:!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout)};function nue(e){return(nue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function rue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aue(Object(n),!0).forEach((function(t){due(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sue(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,uue(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function iue(e,t,n){return t=lue(t),function(e,t){if(t&&("object"===nue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oue()?Reflect.construct(t,n||[],lue(e).constructor):t.apply(e,n))}function oue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oue=function(){return!!e})()}function lue(e){return(lue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cue(e,t){return(cue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function due(e,t,n){return(t=uue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uue(e){var t=function(e,t){if("object"!=nue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=nue(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==nue(t)?t:t+""}function fue(e){return e.dataKey}var mue=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),iue(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cue(e,t)}(e,cs.PureComponent),sue(e,[{key:"render",value:function(){var e=this,t=this.props,n=t.active,a=t.allowEscapeViewBox,r=t.animationDuration,s=t.animationEasing,i=t.content,o=t.coordinate,l=t.filterNull,c=t.isAnimationActive,d=t.offset,u=t.payload,f=t.payloadUniqBy,m=t.position,p=t.reverseDirection,h=t.useTranslate3d,g=t.viewBox,x=t.wrapperStyle,y=null!=u?u:[];l&&y.length&&(y=yce(u.filter((function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)})),f,fue));var v=y.length>0;return ds.createElement(eue,{allowEscapeViewBox:a,animationDuration:r,animationEasing:s,isAnimationActive:c,active:n,coordinate:o,hasPayload:v,offset:d,position:m,reverseDirection:p,useTranslate3d:h,viewBox:g,wrapperStyle:x},function(e,t){return ds.isValidElement(e)?ds.cloneElement(e,t):"function"==typeof e?ds.createElement(e,t):ds.createElement(Rde,t)}(i,rue(rue({},this.props),{},{payload:y})))}}])}();due(mue,"displayName","Tooltip"),due(mue,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!tue.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var pue=eee,hue=/\s/;var gue=function(e){for(var t=e.length;t--&&hue.test(e.charAt(t)););return t},xue=/^\s+/;var yue=function(e){return e?e.slice(0,gue(e)+1).replace(xue,""):e},vue=jee,bue=gee,wue=/^[-+]0x[0-9a-f]+$/i,jue=/^0b[01]+$/i,Nue=/^0o[0-7]+$/i,Cue=parseInt;var Sue=function(e){if("number"==typeof e)return e;if(bue(e))return NaN;if(vue(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=vue(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=yue(e);var n=jue.test(e);return n||Nue.test(e)?Cue(e.slice(2),n?2:8):wue.test(e)?NaN:+e},kue=jee,Mue=function(){return pue.Date.now()},_ue=Sue,Iue=Math.max,Aue=Math.min;var Eue=function(e,t,n){var a,r,s,i,o,l,c=0,d=!1,u=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=a,s=r;return a=r=void 0,c=t,i=e.apply(s,n)}function p(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=s}function h(){var e=Mue();if(p(e))return g(e);o=setTimeout(h,function(e){var n=t-(e-l);return u?Aue(n,s-(e-c)):n}(e))}function g(e){return o=void 0,f&&a?m(e):(a=r=void 0,i)}function x(){var e=Mue(),n=p(e);if(a=arguments,r=this,l=e,n){if(void 0===o)return function(e){return c=e,o=setTimeout(h,t),d?m(e):i}(l);if(u)return clearTimeout(o),o=setTimeout(h,t),m(l)}return void 0===o&&(o=setTimeout(h,t)),i}return t=_ue(t)||0,kue(n)&&(d=!!n.leading,s=(u="maxWait"in n)?Iue(_ue(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f),x.cancel=function(){void 0!==o&&clearTimeout(o),c=0,a=l=r=o=void 0},x.flush=function(){return void 0===o?i:g(Mue())},x},Lue=Eue,Tue=jee;var Due=function(e,t,n){var a=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Tue(n)&&(a="leading"in n?!!n.leading:a,r="trailing"in n?!!n.trailing:r),Lue(e,t,{leading:a,maxWait:t,trailing:r})};const Pue=Cr(Due);function Oue(e){return(Oue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function zue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rue(Object(n),!0).forEach((function(t){Fue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fue(e,t,n){var a;return a=function(e,t){if("object"!=Oue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Oue(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Oue(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t);else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Uue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Wue=cs.forwardRef((function(e,t){var n=e.aspect,a=e.initialDimension,r=void 0===a?{width:-1,height:-1}:a,s=e.width,i=void 0===s?"100%":s,o=e.height,l=void 0===o?"100%":o,c=e.minWidth,d=void 0===c?0:c,u=e.minHeight,f=e.maxHeight,m=e.children,p=e.debounce,h=void 0===p?0:p,g=e.id,x=e.className,y=e.onResize,v=e.style,b=void 0===v?{}:v,w=cs.useRef(null),j=cs.useRef();j.current=y,cs.useImperativeHandle(t,(function(){return Object.defineProperty(w.current,"current",{get:function(){return w.current},configurable:!0})}));var N=Bue(cs.useState({containerWidth:r.width,containerHeight:r.height}),2),C=N[0],S=N[1],k=cs.useCallback((function(e,t){S((function(n){var a=Math.round(e),r=Math.round(t);return n.containerWidth===a&&n.containerHeight===r?n:{containerWidth:a,containerHeight:r}}))}),[]);cs.useEffect((function(){var e=function(e){var t,n=e[0].contentRect,a=n.width,r=n.height;k(a,r),null===(t=j.current)||void 0===t||t.call(j,a,r)};h>0&&(e=Pue(e,h,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=w.current.getBoundingClientRect(),a=n.width,r=n.height;return k(a,r),t.observe(w.current),function(){t.disconnect()}}),[k,h]);var M=cs.useMemo((function(){var e=C.containerWidth,t=C.containerHeight;if(e<0||t<0)return null;Uae(Kne(i)||Kne(l),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",i,l),Uae(!n||n>0,"The aspect(%s) must be greater than zero.",n);var a=Kne(i)?e:i,r=Kne(l)?t:l;n&&n>0&&(a?r=a/n:r&&(a=r*n),f&&r>f&&(r=f)),Uae(a>0||r>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",a,r,i,l,d,u,n);var s=!Array.isArray(m)&&bae(m.type).endsWith("Chart");return ds.Children.map(m,(function(e){return ds.isValidElement(e)?cs.cloneElement(e,zue({width:a,height:r},s?{style:zue({height:"100%",width:"100%",maxHeight:r,maxWidth:a},e.props.style)}:{})):e}))}),[n,m,l,f,u,d,C,i]);return ds.createElement("div",{id:g?"".concat(g):void 0,className:cb("recharts-responsive-container",x),style:zue(zue({},b),{},{width:i,height:l,minWidth:d,minHeight:u,maxHeight:f}),ref:w},M)})),Gue=function(e){return null};function Vue(e){return(Vue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function que(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hue(Object(n),!0).forEach((function(t){$ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $ue(e,t,n){var a;return a=function(e,t){if("object"!=Vue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Vue(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Vue(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Gue.displayName="Cell";var Yue={widthCache:{},cacheCount:0},Que={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Kue="recharts_measurement_span";var Jue=function(e){if(null==e||tue.isSsr)return{width:0,height:0};var t,n=(t=que({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t),a=JSON.stringify({text:e,copyStyle:n});if(Yue.widthCache[a])return Yue.widthCache[a];try{var r=document.getElementById(Kue);r||((r=document.createElement("span")).setAttribute("id",Kue),r.setAttribute("aria-hidden","true"),document.body.appendChild(r));var s=que(que({},Que),n);Object.assign(r.style,s),r.textContent="".concat(e);var i=r.getBoundingClientRect(),o={width:i.width,height:i.height};return Yue.widthCache[a]=o,++Yue.cacheCount>2e3&&(Yue.cacheCount=0,Yue.widthCache={}),o}catch(l){return{width:0,height:0}}};function Zue(e){return(Zue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return efe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return efe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function efe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function tfe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,nfe(a.key),a)}}function nfe(e){var t=function(e,t){if("object"!=Zue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Zue(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Zue(t)?t:t+""}var afe=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rfe=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sfe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ife=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ofe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},lfe=Object.keys(ofe),cfe="NaN";var dfe=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||sfe.test(n)||(this.num=NaN,this.unit=""),lfe.includes(n)&&(this.num=function(e,t){return e*ofe[t]}(t,n),this.unit="px")}return t=e,a=[{key:"parse",value:function(t){var n,a=Xue(null!==(n=ife.exec(t))&&void 0!==n?n:[],3),r=a[1],s=a[2];return new e(parseFloat(r),null!=s?s:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&tfe(t.prototype,n),a&&tfe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();function ufe(e){if(e.includes(cfe))return cfe;for(var t=e;t.includes("*")||t.includes("/");){var n,a=Xue(null!==(n=afe.exec(t))&&void 0!==n?n:[],4),r=a[1],s=a[2],i=a[3],o=dfe.parse(null!=r?r:""),l=dfe.parse(null!=i?i:""),c="*"===s?o.multiply(l):o.divide(l);if(c.isNaN())return cfe;t=t.replace(afe,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,u=Xue(null!==(d=rfe.exec(t))&&void 0!==d?d:[],4),f=u[1],m=u[2],p=u[3],h=dfe.parse(null!=f?f:""),g=dfe.parse(null!=p?p:""),x="+"===m?h.add(g):h.subtract(g);if(x.isNaN())return cfe;t=t.replace(rfe,x.toString())}return t}var ffe=/\(([^()]*)\)/;function mfe(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=Xue(ffe.exec(t),2)[1];t=t.replace(ffe,ufe(n))}return t}(t),t=ufe(t)}function pfe(e){var t=function(e){try{return mfe(e)}catch(t){return cfe}}(e.slice(5,-1));return t===cfe?"":t}var hfe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],gfe=["dx","dy","angle","className","breakAll"];function xfe(){return xfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xfe.apply(this,arguments)}function yfe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vfe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bfe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bfe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bfe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var wfe=/[ \f\n\r\t\v\u2028\u2029]+/,jfe=function(e){var t=e.children,n=e.breakAll,a=e.style;try{var r=[];return vne(t)||(r=n?t.toString().split(""):t.toString().split(wfe)),{wordsWithComputedWidth:r.map((function(e){return{word:e,width:Jue(e,a).width}})),spaceWidth:n?0:Jue(" ",a).width}}catch(s){return null}},Nfe=function(e){return[{words:vne(e)?[]:e.toString().split(wfe)}]},Cfe=function(e){var t=e.width,n=e.scaleToFit,a=e.children,r=e.style,s=e.breakAll,i=e.maxLines;if((t||n)&&!tue.isSsr){var o=jfe({breakAll:s,children:a,style:r});return o?function(e,t,n,a,r){var s=e.maxLines,i=e.children,o=e.style,l=e.breakAll,c=Jne(s),d=i,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var s=t.word,i=t.width,o=e[e.length-1];if(o&&(null==a||r||o.width+i+n<Number(a)))o.words.push(s),o.width+=i+n;else{var l={words:[s],width:i};e.push(l)}return e}),[])},f=u(t);if(!c)return f;for(var m,p=function(e){var t=d.slice(0,e),n=jfe({breakAll:l,style:o,children:t+"…"}).wordsWithComputedWidth,r=u(n),i=r.length>s||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(r).width>Number(a);return[i,r]},h=0,g=d.length-1,x=0;h<=g&&x<=d.length-1;){var y=Math.floor((h+g)/2),v=vfe(p(y-1),2),b=v[0],w=v[1],j=vfe(p(y),1)[0];if(b||j||(h=y+1),b&&j&&(g=y-1),!b&&j){m=w;break}x++}return m||f}({breakAll:s,children:a,maxLines:i,style:r},o.wordsWithComputedWidth,o.spaceWidth,t,n):Nfe(a)}return Nfe(a)},Sfe="#808080",kfe=function(e){var t=e.x,n=void 0===t?0:t,a=e.y,r=void 0===a?0:a,s=e.lineHeight,i=void 0===s?"1em":s,o=e.capHeight,l=void 0===o?"0.71em":o,c=e.scaleToFit,d=void 0!==c&&c,u=e.textAnchor,f=void 0===u?"start":u,m=e.verticalAnchor,p=void 0===m?"end":m,h=e.fill,g=void 0===h?Sfe:h,x=yfe(e,hfe),y=cs.useMemo((function(){return Cfe({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:d,style:x.style,width:x.width})}),[x.breakAll,x.children,x.maxLines,d,x.style,x.width]),v=x.dx,b=x.dy,w=x.angle,j=x.className,N=x.breakAll,C=yfe(x,gfe);if(!Zne(n)||!Zne(r))return null;var S,k=n+(Jne(v)?v:0),M=r+(Jne(b)?b:0);switch(p){case"start":S=pfe("calc(".concat(l,")"));break;case"middle":S=pfe("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:S=pfe("calc(".concat(y.length-1," * -").concat(i,")"))}var _=[];if(d){var I=y[0].width,A=x.width;_.push("scale(".concat((Jne(A)?A/I:1)/I,")"))}return w&&_.push("rotate(".concat(w,", ").concat(k,", ").concat(M,")")),_.length&&(C.transform=_.join(" ")),ds.createElement("text",xfe({},Iae(C,!0),{x:k,y:M,className:cb("recharts-text",j),textAnchor:f,fill:g.includes("url")?Sfe:g}),y.map((function(e,t){var n=e.words.join(N?"":" ");return ds.createElement("tspan",{x:k,dy:0===t?S:i,key:"".concat(n,"-").concat(t)},n)})))};function Mfe(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _fe(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ife(e){let t,n,a;function r(e,a,r=0,s=e.length){if(r<s){if(0!==t(a,a))return s;do{const t=r+s>>>1;n(e[t],a)<0?r=t+1:s=t}while(r<s)}return r}return 2!==e.length?(t=Mfe,n=(t,n)=>Mfe(e(t),n),a=(t,n)=>e(t)-n):(t=e===Mfe||e===_fe?e:Afe,n=e,a=e),{left:r,center:function(e,t,n=0,s=e.length){const i=r(e,t,n,s-1);return i>n&&a(e[i-1],t)>-a(e[i],t)?i-1:i},right:function(e,a,r=0,s=e.length){if(r<s){if(0!==t(a,a))return s;do{const t=r+s>>>1;n(e[t],a)<=0?r=t+1:s=t}while(r<s)}return r}}}function Afe(){return 0}function Efe(e){return null===e?NaN:+e}const Lfe=Ife(Mfe).right;Ife(Efe).center;class Tfe extends Map{constructor(e,t=Pfe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(Dfe(this,e))}has(e){return super.has(Dfe(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const a=t(n);e.has(a)&&(n=e.get(a),e.delete(a));return n}(this,e))}}function Dfe({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function Pfe(e){return null!==e&&"object"==typeof e?e.valueOf():e}function Ofe(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const Rfe=Math.sqrt(50),zfe=Math.sqrt(10),Ffe=Math.sqrt(2);function Bfe(e,t,n){const a=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(a)),s=a/Math.pow(10,r),i=s>=Rfe?10:s>=zfe?5:s>=Ffe?2:1;let o,l,c;return r<0?(c=Math.pow(10,-r)/i,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*i,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?Bfe(e,t,2*n):[o,l,c]}function Ufe(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const a=t<e,[r,s,i]=a?Bfe(t,e,n):Bfe(e,t,n);if(!(s>=r))return[];const o=s-r+1,l=new Array(o);if(a)if(i<0)for(let c=0;c<o;++c)l[c]=(s-c)/-i;else for(let c=0;c<o;++c)l[c]=(s-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(r+c)/-i;else for(let c=0;c<o;++c)l[c]=(r+c)*i;return l}function Wfe(e,t,n){return Bfe(e=+e,t=+t,n=+n)[2]}function Gfe(e,t,n){n=+n;const a=(t=+t)<(e=+e),r=a?Wfe(t,e,n):Wfe(e,t,n);return(a?-1:1)*(r<0?1/-r:r)}function Vfe(e,t){let n;for(const a of e)null!=a&&(n<a||void 0===n&&a>=a)&&(n=a);return n}function Hfe(e,t){let n;for(const a of e)null!=a&&(n>a||void 0===n&&a>=a)&&(n=a);return n}function qfe(e,t,n=0,a=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(r=void 0===r?Ofe:function(e=Mfe){if(e===Mfe)return Ofe;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||0===a?a:(0===e(n,n))-(0===e(t,t))}}(r);a>n;){if(a-n>600){const s=a-n+1,i=t-n+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(i-s/2<0?-1:1);qfe(e,t,Math.max(n,Math.floor(t-i*l/s+c)),Math.min(a,Math.floor(t+(s-i)*l/s+c)),r)}const s=e[t];let i=n,o=a;for($fe(e,n,t),r(e[a],s)>0&&$fe(e,n,a);i<o;){for($fe(e,i,o),++i,--o;r(e[i],s)<0;)++i;for(;r(e[o],s)>0;)--o}0===r(e[n],s)?$fe(e,n,o):(++o,$fe(e,o,a)),o<=t&&(n=o+1),t<=o&&(a=o-1)}return e}function $fe(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function Yfe(e,t,n=Efe){if((a=e.length)&&!isNaN(t=+t)){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,r=(a-1)*t,s=Math.floor(r),i=+n(e[s],s,e);return i+(+n(e[s+1],s+1,e)-i)*(r-s)}}function Qfe(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Kfe(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const Jfe=Symbol("implicit");function Zfe(){var e=new Tfe,t=[],n=[],a=Jfe;function r(r){let s=e.get(r);if(void 0===s){if(a!==Jfe)return a;e.set(r,s=t.push(r)-1)}return n[s%n.length]}return r.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Tfe;for(const a of n)e.has(a)||e.set(a,t.push(a)-1);return r},r.range=function(e){return arguments.length?(n=Array.from(e),r):n.slice()},r.unknown=function(e){return arguments.length?(a=e,r):a},r.copy=function(){return Zfe(t,n).unknown(a)},Qfe.apply(r,arguments),r}function Xfe(){var e,t,n=Zfe().unknown(void 0),a=n.domain,r=n.range,s=0,i=1,o=!1,l=0,c=0,d=.5;function u(){var n=a().length,u=i<s,f=u?i:s,m=u?s:i;e=(m-f)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),f+=(m-f-e*(n-l))*d,t=e*(1-l),o&&(f=Math.round(f),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var a=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(r);++a<r;)s[a]=e+a*n;return s}(n).map((function(t){return f+e*t}));return r(u?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(a(e),u()):a()},n.range=function(e){return arguments.length?([s,i]=e,s=+s,i=+i,u()):[s,i]},n.rangeRound=function(e){return[s,i]=e,s=+s,i=+i,o=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,u()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},n.copy=function(){return Xfe(a(),[s,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},Qfe.apply(u(),arguments)}function eme(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eme(t())},e}function tme(){return eme(Xfe.apply(null,arguments).paddingInner(1))}function nme(e){return+e}var ame=[0,1];function rme(e){return e}function sme(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function ime(e,t,n){var a=e[0],r=e[1],s=t[0],i=t[1];return r<a?(a=sme(r,a),s=n(i,s)):(a=sme(a,r),s=n(s,i)),function(e){return s(a(e))}}function ome(e,t,n){var a=Math.min(e.length,t.length)-1,r=new Array(a),s=new Array(a),i=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<a;)r[i]=sme(e[i],e[i+1]),s[i]=n(t[i],t[i+1]);return function(t){var n=Lfe(e,t,1,a)-1;return s[n](r[n](t))}}function lme(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function cme(){var e,t,n,a,r,s,i=ame,o=ame,l=_J,c=rme;function d(){var e=Math.min(i.length,o.length);return c!==rme&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(i[0],i[e-1])),a=e>2?ome:ime,r=s=null,u}function u(t){return null==t||isNaN(t=+t)?n:(r||(r=a(i.map(e),o,l)))(e(c(t)))}return u.invert=function(n){return c(t((s||(s=a(o,i.map(e),NJ)))(n)))},u.domain=function(e){return arguments.length?(i=Array.from(e,nme),d()):i.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=IJ,d()},u.clamp=function(e){return arguments.length?(c=!!e||rme,d()):c!==rme},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(n=e,u):n},function(n,a){return e=n,t=a,d()}}function dme(){return cme()(rme,rme)}function ume(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function fme(e){return(e=ume(Math.abs(e)))?e[1]:NaN}var mme,pme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hme(e){if(!(t=pme.exec(e)))throw new Error("invalid format: "+e);var t;return new gme({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function gme(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function xme(e,t){var n=ume(e,t);if(!n)return e+"";var a=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+a:a.length>r+1?a.slice(0,r+1)+"."+a.slice(r+1):a+new Array(r-a.length+2).join("0")}hme.prototype=gme.prototype,gme.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const yme={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>xme(100*e,t),r:xme,s:function(e,t){var n=ume(e,t);if(!n)return e+"";var a=n[0],r=n[1],s=r-(mme=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,i=a.length;return s===i?a:s>i?a+new Array(s-i+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+ume(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vme(e){return e}var bme,wme,jme,Nme=Array.prototype.map,Cme=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Sme(e){var t,n,a=void 0===e.grouping||void 0===e.thousands?vme:(t=Nme.call(e.grouping,Number),n=e.thousands+"",function(e,a){for(var r=e.length,s=[],i=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>a&&(o=Math.max(1,a-l)),s.push(e.substring(r-=o,r+o)),!((l+=o+1)>a));)o=t[i=(i+1)%t.length];return s.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?vme:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Nme.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=hme(e)).fill,n=e.align,u=e.sign,f=e.symbol,m=e.zero,p=e.width,h=e.comma,g=e.precision,x=e.trim,y=e.type;"n"===y?(h=!0,y="g"):yme[y]||(void 0===g&&(g=12),x=!0,y="g"),(m||"0"===t&&"="===n)&&(m=!0,t="0",n="=");var v="$"===f?r:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===f?s:/[%p]/.test(y)?l:"",w=yme[y],j=/[defgprs%]/.test(y);function N(e){var r,s,l,f=v,N=b;if("c"===y)N=w(e)+N,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:w(Math.abs(e),g),x&&(e=function(e){e:for(var t,n=e.length,a=1,r=-1;a<n;++a)switch(e[a]){case".":r=t=a;break;case"0":0===r&&(r=a),t=a;break;default:if(!+e[a])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),C&&0===+e&&"+"!==u&&(C=!1),f=(C?"("===u?u:c:"-"===u||"("===u?"":u)+f,N=("s"===y?Cme[8+mme/3]:"")+N+(C&&"("===u?")":""),j)for(r=-1,s=e.length;++r<s;)if(48>(l=e.charCodeAt(r))||l>57){N=(46===l?i+e.slice(r+1):e.slice(r))+N,e=e.slice(0,r);break}}h&&!m&&(e=a(e,1/0));var S=f.length+e.length+N.length,k=S<p?new Array(p-S+1).join(t):"";switch(h&&m&&(e=a(k+e,k.length?p-N.length:1/0),k=""),n){case"<":e=f+e+N+k;break;case"=":e=f+k+e+N;break;case"^":e=k.slice(0,S=k.length>>1)+f+e+N+k.slice(S);break;default:e=k+f+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var n=u(((e=hme(e)).type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(fme(t)/3))),r=Math.pow(10,-a),s=Cme[8+a/3];return function(e){return n(r*e)+s}}}}function kme(e,t,n,a){var r,s=Gfe(e,t,n);switch((a=hme(null==a?",f":a)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=a.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(fme(t)/3)))-fme(Math.abs(e)))}(s,i))||(a.precision=r),jme(a,i);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,fme(t)-fme(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(a.precision=r-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(r=function(e){return Math.max(0,-fme(Math.abs(e)))}(s))||(a.precision=r-2*("%"===a.type))}return wme(a)}function Mme(e){var t=e.domain;return e.ticks=function(e){var n=t();return Ufe(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var a=t();return kme(a[0],a[a.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var a,r,s=t(),i=0,o=s.length-1,l=s[i],c=s[o],d=10;for(c<l&&(r=l,l=c,c=r,r=i,i=o,o=r);d-- >0;){if((r=Wfe(l,c,n))===a)return s[i]=l,s[o]=c,t(s);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}a=r}return e},e}function _me(){var e=dme();return e.copy=function(){return lme(e,_me())},Qfe.apply(e,arguments),Mme(e)}function Ime(e,t){var n,a=0,r=(e=e.slice()).length-1,s=e[a],i=e[r];return i<s&&(n=a,a=r,r=n,n=s,s=i,i=n),e[a]=t.floor(s),e[r]=t.ceil(i),e}function Ame(e){return Math.log(e)}function Eme(e){return Math.exp(e)}function Lme(e){return-Math.log(-e)}function Tme(e){return-Math.exp(-e)}function Dme(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Pme(e){return(t,n)=>-e(-t,n)}function Ome(e){const t=e(Ame,Eme),n=t.domain;let a,r,s=10;function i(){return a=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),r=function(e){return 10===e?Dme:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),n()[0]<0?(a=Pme(a),r=Pme(r),e(Lme,Tme)):e(Ame,Eme),t}return t.base=function(e){return arguments.length?(s=+e,i()):s},t.domain=function(e){return arguments.length?(n(e),i()):n()},t.ticks=e=>{const t=n();let i=t[0],o=t[t.length-1];const l=o<i;l&&([i,o]=[o,i]);let c,d,u=a(i),f=a(o);const m=null==e?10:+e;let p=[];if(!(s%1)&&f-u<m){if(u=Math.floor(u),f=Math.ceil(f),i>0){for(;u<=f;++u)for(c=1;c<s;++c)if(d=u<0?c/r(-u):c*r(u),!(d<i)){if(d>o)break;p.push(d)}}else for(;u<=f;++u)for(c=s-1;c>=1;--c)if(d=u>0?c/r(-u):c*r(u),!(d<i)){if(d>o)break;p.push(d)}2*p.length<m&&(p=Ufe(i,o,m))}else p=Ufe(u,f,Math.min(f-u,m)).map(r);return l?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===s?"s":","),"function"!=typeof n&&(s%1||null!=(n=hme(n)).precision||(n.trim=!0),n=wme(n)),e===1/0)return n;const i=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/r(Math.round(a(e)));return t*s<s-.5&&(t*=s),t<=i?n(e):""}},t.nice=()=>n(Ime(n(),{floor:e=>r(Math.floor(a(e))),ceil:e=>r(Math.ceil(a(e)))})),t}function Rme(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function zme(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Fme(e){var t=1,n=e(Rme(t),zme(t));return n.constant=function(n){return arguments.length?e(Rme(t=+n),zme(t)):t},Mme(n)}function Bme(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ume(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Wme(e){return e<0?-e*e:e*e}function Gme(e){var t=e(rme,rme),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(rme,rme):.5===n?e(Ume,Wme):e(Bme(n),Bme(1/n)):n},Mme(t)}function Vme(){var e=Gme(cme());return e.copy=function(){return lme(e,Vme()).exponent(e.exponent())},Qfe.apply(e,arguments),e}function Hme(e){return Math.sign(e)*e*e}bme=Sme({thousands:",",grouping:[3],currency:["$",""]}),wme=bme.format,jme=bme.formatPrefix;const qme=new Date,$me=new Date;function Yme(e,t,n,a){function r(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return r.floor=t=>(e(t=new Date(+t)),t),r.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),r.round=e=>{const t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),r.range=(n,a,s)=>{const i=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<a&&s>0))return i;let o;do{i.push(o=new Date(+n)),t(n,s),e(n)}while(o<n&&n<a);return i},r.filter=n=>Yme((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,a)=>{if(e>=e)if(a<0)for(;++a<=0;)for(;t(e,-1),!n(e););else for(;--a>=0;)for(;t(e,1),!n(e););})),n&&(r.count=(t,a)=>(qme.setTime(+t),$me.setTime(+a),e(qme),e($me),Math.floor(n(qme,$me))),r.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(a?t=>a(t)%e===0:t=>r.count(0,t)%e===0):r:null)),r}const Qme=Yme((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));Qme.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Yme((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):Qme:null),Qme.range;const Kme=1e3,Jme=6e4,Zme=36e5,Xme=864e5,epe=6048e5,tpe=2592e6,npe=31536e6,ape=Yme((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*Kme)}),((e,t)=>(t-e)/Kme),(e=>e.getUTCSeconds()));ape.range;const rpe=Yme((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kme)}),((e,t)=>{e.setTime(+e+t*Jme)}),((e,t)=>(t-e)/Jme),(e=>e.getMinutes()));rpe.range;const spe=Yme((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*Jme)}),((e,t)=>(t-e)/Jme),(e=>e.getUTCMinutes()));spe.range;const ipe=Yme((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kme-e.getMinutes()*Jme)}),((e,t)=>{e.setTime(+e+t*Zme)}),((e,t)=>(t-e)/Zme),(e=>e.getHours()));ipe.range;const ope=Yme((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*Zme)}),((e,t)=>(t-e)/Zme),(e=>e.getUTCHours()));ope.range;const lpe=Yme((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jme)/Xme),(e=>e.getDate()-1));lpe.range;const cpe=Yme((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/Xme),(e=>e.getUTCDate()-1));cpe.range;const dpe=Yme((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/Xme),(e=>Math.floor(e/Xme)));function upe(e){return Yme((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jme)/epe))}dpe.range;const fpe=upe(0),mpe=upe(1),ppe=upe(2),hpe=upe(3),gpe=upe(4),xpe=upe(5),ype=upe(6);function vpe(e){return Yme((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/epe))}fpe.range,mpe.range,ppe.range,hpe.range,gpe.range,xpe.range,ype.range;const bpe=vpe(0),wpe=vpe(1),jpe=vpe(2),Npe=vpe(3),Cpe=vpe(4),Spe=vpe(5),kpe=vpe(6);bpe.range,wpe.range,jpe.range,Npe.range,Cpe.range,Spe.range,kpe.range;const Mpe=Yme((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()));Mpe.range;const _pe=Yme((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()));_pe.range;const Ipe=Yme((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));Ipe.every=e=>isFinite(e=Math.floor(e))&&e>0?Yme((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null,Ipe.range;const Ape=Yme((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function Epe(e,t,n,a,r,s){const i=[[ape,1,Kme],[ape,5,5e3],[ape,15,15e3],[ape,30,3e4],[s,1,Jme],[s,5,3e5],[s,15,9e5],[s,30,18e5],[r,1,Zme],[r,3,108e5],[r,6,216e5],[r,12,432e5],[a,1,Xme],[a,2,1728e5],[n,1,epe],[t,1,tpe],[t,3,7776e6],[e,1,npe]];function o(t,n,a){const r=Math.abs(n-t)/a,s=Ife((([,,e])=>e)).right(i,r);if(s===i.length)return e.every(Gfe(t/npe,n/npe,a));if(0===s)return Qme.every(Math.max(Gfe(t,n,a),1));const[o,l]=i[r/i[s-1][2]<i[s][2]/r?s-1:s];return o.every(l)}return[function(e,t,n){const a=t<e;a&&([e,t]=[t,e]);const r=n&&"function"==typeof n.range?n:o(e,t,n),s=r?r.range(e,+t+1):[];return a?s.reverse():s},o]}Ape.every=e=>isFinite(e=Math.floor(e))&&e>0?Yme((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null,Ape.range;const[Lpe,Tpe]=Epe(Ape,_pe,bpe,dpe,ope,spe),[Dpe,Ppe]=Epe(Ipe,Mpe,fpe,lpe,ipe,rpe);function Ope(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Rpe(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zpe(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Fpe,Bpe,Upe,Wpe={"-":"",_:" ",0:"0"},Gpe=/^\s*\d+/,Vpe=/^%/,Hpe=/[\\^$*+?|[\]().{}]/g;function qpe(e,t,n){var a=e<0?"-":"",r=(a?-e:e)+"",s=r.length;return a+(s<n?new Array(n-s+1).join(t)+r:r)}function $pe(e){return e.replace(Hpe,"\\$&")}function Ype(e){return new RegExp("^(?:"+e.map($pe).join("|")+")","i")}function Qpe(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Kpe(e,t,n){var a=Gpe.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function Jpe(e,t,n){var a=Gpe.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function Zpe(e,t,n){var a=Gpe.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function Xpe(e,t,n){var a=Gpe.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function ehe(e,t,n){var a=Gpe.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function the(e,t,n){var a=Gpe.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function nhe(e,t,n){var a=Gpe.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function ahe(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function rhe(e,t,n){var a=Gpe.exec(t.slice(n,n+1));return a?(e.q=3*a[0]-3,n+a[0].length):-1}function she(e,t,n){var a=Gpe.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function ihe(e,t,n){var a=Gpe.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function ohe(e,t,n){var a=Gpe.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function lhe(e,t,n){var a=Gpe.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function che(e,t,n){var a=Gpe.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function dhe(e,t,n){var a=Gpe.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function uhe(e,t,n){var a=Gpe.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function fhe(e,t,n){var a=Gpe.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function mhe(e,t,n){var a=Vpe.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function phe(e,t,n){var a=Gpe.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function hhe(e,t,n){var a=Gpe.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function ghe(e,t){return qpe(e.getDate(),t,2)}function xhe(e,t){return qpe(e.getHours(),t,2)}function yhe(e,t){return qpe(e.getHours()%12||12,t,2)}function vhe(e,t){return qpe(1+lpe.count(Ipe(e),e),t,3)}function bhe(e,t){return qpe(e.getMilliseconds(),t,3)}function whe(e,t){return bhe(e,t)+"000"}function jhe(e,t){return qpe(e.getMonth()+1,t,2)}function Nhe(e,t){return qpe(e.getMinutes(),t,2)}function Che(e,t){return qpe(e.getSeconds(),t,2)}function She(e){var t=e.getDay();return 0===t?7:t}function khe(e,t){return qpe(fpe.count(Ipe(e)-1,e),t,2)}function Mhe(e){var t=e.getDay();return t>=4||0===t?gpe(e):gpe.ceil(e)}function _he(e,t){return e=Mhe(e),qpe(gpe.count(Ipe(e),e)+(4===Ipe(e).getDay()),t,2)}function Ihe(e){return e.getDay()}function Ahe(e,t){return qpe(mpe.count(Ipe(e)-1,e),t,2)}function Ehe(e,t){return qpe(e.getFullYear()%100,t,2)}function Lhe(e,t){return qpe((e=Mhe(e)).getFullYear()%100,t,2)}function The(e,t){return qpe(e.getFullYear()%1e4,t,4)}function Dhe(e,t){var n=e.getDay();return qpe((e=n>=4||0===n?gpe(e):gpe.ceil(e)).getFullYear()%1e4,t,4)}function Phe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+qpe(t/60|0,"0",2)+qpe(t%60,"0",2)}function Ohe(e,t){return qpe(e.getUTCDate(),t,2)}function Rhe(e,t){return qpe(e.getUTCHours(),t,2)}function zhe(e,t){return qpe(e.getUTCHours()%12||12,t,2)}function Fhe(e,t){return qpe(1+cpe.count(Ape(e),e),t,3)}function Bhe(e,t){return qpe(e.getUTCMilliseconds(),t,3)}function Uhe(e,t){return Bhe(e,t)+"000"}function Whe(e,t){return qpe(e.getUTCMonth()+1,t,2)}function Ghe(e,t){return qpe(e.getUTCMinutes(),t,2)}function Vhe(e,t){return qpe(e.getUTCSeconds(),t,2)}function Hhe(e){var t=e.getUTCDay();return 0===t?7:t}function qhe(e,t){return qpe(bpe.count(Ape(e)-1,e),t,2)}function $he(e){var t=e.getUTCDay();return t>=4||0===t?Cpe(e):Cpe.ceil(e)}function Yhe(e,t){return e=$he(e),qpe(Cpe.count(Ape(e),e)+(4===Ape(e).getUTCDay()),t,2)}function Qhe(e){return e.getUTCDay()}function Khe(e,t){return qpe(wpe.count(Ape(e)-1,e),t,2)}function Jhe(e,t){return qpe(e.getUTCFullYear()%100,t,2)}function Zhe(e,t){return qpe((e=$he(e)).getUTCFullYear()%100,t,2)}function Xhe(e,t){return qpe(e.getUTCFullYear()%1e4,t,4)}function ege(e,t){var n=e.getUTCDay();return qpe((e=n>=4||0===n?Cpe(e):Cpe.ceil(e)).getUTCFullYear()%1e4,t,4)}function tge(){return"+0000"}function nge(){return"%"}function age(e){return+e}function rge(e){return Math.floor(+e/1e3)}function sge(e){return new Date(e)}function ige(e){return e instanceof Date?+e:+new Date(+e)}function oge(e,t,n,a,r,s,i,o,l,c){var d=dme(),u=d.invert,f=d.domain,m=c(".%L"),p=c(":%S"),h=c("%I:%M"),g=c("%I %p"),x=c("%a %d"),y=c("%b %d"),v=c("%B"),b=c("%Y");function w(e){return(l(e)<e?m:o(e)<e?p:i(e)<e?h:s(e)<e?g:a(e)<e?r(e)<e?x:y:n(e)<e?v:b)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?f(Array.from(e,ige)):f().map(sge)},d.ticks=function(t){var n=f();return e(n[0],n[n.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?w:c(t)},d.nice=function(e){var n=f();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?f(Ime(n,e)):d},d.copy=function(){return lme(d,oge(e,t,n,a,r,s,i,o,l,c))},d}function lge(){var e,t,n,a,r,s=0,i=1,o=rme,l=!1;function c(t){return null==t||isNaN(t=+t)?r:o(0===n?.5:(t=(a(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var n,a;return arguments.length?([n,a]=t,o=e(n,a),c):[o(0),o(1)]}}return c.domain=function(r){return arguments.length?([s,i]=r,e=a(s=+s),t=a(i=+i),n=e===t?0:1/(t-e),c):[s,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(_J),c.rangeRound=d(IJ),c.unknown=function(e){return arguments.length?(r=e,c):r},function(r){return a=r,e=r(s),t=r(i),n=e===t?0:1/(t-e),c}}function cge(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dge(){var e=Gme(lge());return e.copy=function(){return cge(e,dge()).exponent(e.exponent())},Kfe.apply(e,arguments)}function uge(){var e,t,n,a,r,s,i,o=0,l=.5,c=1,d=1,u=rme,f=!1;function m(e){return isNaN(e=+e)?i:(e=.5+((e=+s(e))-t)*(d*e<d*t?a:r),u(f?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,a,r;return arguments.length?([n,a,r]=t,u=function(e,t){void 0===t&&(t=e,e=_J);for(var n=0,a=t.length-1,r=t[0],s=new Array(a<0?0:a);n<a;)s[n]=e(r,r=t[++n]);return function(e){var t=Math.max(0,Math.min(a-1,Math.floor(e*=a)));return s[t](e-t)}}(e,[n,a,r]),m):[u(0),u(.5),u(1)]}}return m.domain=function(i){return arguments.length?([o,l,c]=i,e=s(o=+o),t=s(l=+l),n=s(c=+c),a=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),d=t<e?-1:1,m):[o,l,c]},m.clamp=function(e){return arguments.length?(f=!!e,m):f},m.interpolator=function(e){return arguments.length?(u=e,m):u},m.range=p(_J),m.rangeRound=p(IJ),m.unknown=function(e){return arguments.length?(i=e,m):i},function(i){return s=i,e=i(o),t=i(l),n=i(c),a=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),d=t<e?-1:1,m}}function fge(){var e=Gme(uge());return e.copy=function(){return cge(e,fge()).exponent(e.exponent())},Kfe.apply(e,arguments)}!function(e){Fpe=function(e){var t=e.dateTime,n=e.date,a=e.time,r=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,c=Ype(r),d=Qpe(r),u=Ype(s),f=Qpe(s),m=Ype(i),p=Qpe(i),h=Ype(o),g=Qpe(o),x=Ype(l),y=Qpe(l),v={a:function(e){return i[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:ghe,e:ghe,f:whe,g:Lhe,G:Dhe,H:xhe,I:yhe,j:vhe,L:bhe,m:jhe,M:Nhe,p:function(e){return r[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:age,s:rge,S:Che,u:She,U:khe,V:_he,w:Ihe,W:Ahe,x:null,X:null,y:Ehe,Y:The,Z:Phe,"%":nge},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:Ohe,e:Ohe,f:Uhe,g:Zhe,G:ege,H:Rhe,I:zhe,j:Fhe,L:Bhe,m:Whe,M:Ghe,p:function(e){return r[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:age,s:rge,S:Vhe,u:Hhe,U:qhe,V:Yhe,w:Qhe,W:Khe,x:null,X:null,y:Jhe,Y:Xhe,Z:tge,"%":nge},w={a:function(e,t,n){var a=m.exec(t.slice(n));return a?(e.w=p.get(a[0].toLowerCase()),n+a[0].length):-1},A:function(e,t,n){var a=u.exec(t.slice(n));return a?(e.w=f.get(a[0].toLowerCase()),n+a[0].length):-1},b:function(e,t,n){var a=x.exec(t.slice(n));return a?(e.m=y.get(a[0].toLowerCase()),n+a[0].length):-1},B:function(e,t,n){var a=h.exec(t.slice(n));return a?(e.m=g.get(a[0].toLowerCase()),n+a[0].length):-1},c:function(e,n,a){return C(e,t,n,a)},d:ihe,e:ihe,f:fhe,g:nhe,G:the,H:lhe,I:lhe,j:ohe,L:uhe,m:she,M:che,p:function(e,t,n){var a=c.exec(t.slice(n));return a?(e.p=d.get(a[0].toLowerCase()),n+a[0].length):-1},q:rhe,Q:phe,s:hhe,S:dhe,u:Jpe,U:Zpe,V:Xpe,w:Kpe,W:ehe,x:function(e,t,a){return C(e,n,t,a)},X:function(e,t,n){return C(e,a,t,n)},y:nhe,Y:the,Z:ahe,"%":mhe};function j(e,t){return function(n){var a,r,s,i=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(i.push(e.slice(l,o)),null!=(r=Wpe[a=e.charAt(++o)])?a=e.charAt(++o):r="e"===a?" ":"0",(s=t[a])&&(a=s(n,r)),i.push(a),l=o+1);return i.push(e.slice(l,o)),i.join("")}}function N(e,t){return function(n){var a,r,s=zpe(1900,void 0,1);if(C(s,e,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(a=Rpe(zpe(s.y,0,1))).getUTCDay(),a=r>4||0===r?wpe.ceil(a):wpe(a),a=cpe.offset(a,7*(s.V-1)),s.y=a.getUTCFullYear(),s.m=a.getUTCMonth(),s.d=a.getUTCDate()+(s.w+6)%7):(r=(a=Ope(zpe(s.y,0,1))).getDay(),a=r>4||0===r?mpe.ceil(a):mpe(a),a=lpe.offset(a,7*(s.V-1)),s.y=a.getFullYear(),s.m=a.getMonth(),s.d=a.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?Rpe(zpe(s.y,0,1)).getUTCDay():Ope(zpe(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Rpe(s)):Ope(s)}}function C(e,t,n,a){for(var r,s,i=0,o=t.length,l=n.length;i<o;){if(a>=l)return-1;if(37===(r=t.charCodeAt(i++))){if(r=t.charAt(i++),!(s=w[r in Wpe?t.charAt(i++):r])||(a=s(e,n,a))<0)return-1}else if(r!=n.charCodeAt(a++))return-1}return a}return v.x=j(n,v),v.X=j(a,v),v.c=j(t,v),b.x=j(n,b),b.X=j(a,b),b.c=j(t,b),{format:function(e){var t=j(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=j(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),Bpe=Fpe.format,Fpe.parse,Upe=Fpe.utcFormat,Fpe.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const mge=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Xfe,scaleDiverging:function e(){var t=Mme(uge()(rme));return t.copy=function(){return cge(t,e())},Kfe.apply(t,arguments)},scaleDivergingLog:function e(){var t=Ome(uge()).domain([.1,1,10]);return t.copy=function(){return cge(t,e()).base(t.base())},Kfe.apply(t,arguments)},scaleDivergingPow:fge,scaleDivergingSqrt:function(){return fge.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=Fme(uge());return t.copy=function(){return cge(t,e()).constant(t.constant())},Kfe.apply(t,arguments)},scaleIdentity:function e(t){var n;function a(e){return null==e||isNaN(e=+e)?n:e}return a.invert=a,a.domain=a.range=function(e){return arguments.length?(t=Array.from(e,nme),a):t.slice()},a.unknown=function(e){return arguments.length?(n=e,a):n},a.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,nme):[0,1],Mme(a)},scaleImplicit:Jfe,scaleLinear:_me,scaleLog:function e(){const t=Ome(cme()).domain([1,10]);return t.copy=()=>lme(t,e()).base(t.base()),Qfe.apply(t,arguments),t},scaleOrdinal:Zfe,scalePoint:tme,scalePow:Vme,scaleQuantile:function e(){var t,n=[],a=[],r=[];function s(){var e=0,t=Math.max(1,a.length);for(r=new Array(t-1);++e<t;)r[e-1]=Yfe(n,e/t);return i}function i(e){return null==e||isNaN(e=+e)?t:a[Lfe(r,e)]}return i.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:[t>0?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]},i.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(Mfe),s()},i.range=function(e){return arguments.length?(a=Array.from(e),s()):a.slice()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.quantiles=function(){return r.slice()},i.copy=function(){return e().domain(n).range(a).unknown(t)},Qfe.apply(i,arguments)},scaleQuantize:function e(){var t,n=0,a=1,r=1,s=[.5],i=[0,1];function o(e){return null!=e&&e<=e?i[Lfe(s,e,0,r)]:t}function l(){var e=-1;for(s=new Array(r);++e<r;)s[e]=((e+1)*a-(e-r)*n)/(r+1);return o}return o.domain=function(e){return arguments.length?([n,a]=e,n=+n,a=+a,l()):[n,a]},o.range=function(e){return arguments.length?(r=(i=Array.from(e)).length-1,l()):i.slice()},o.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,s[0]]:t>=r?[s[r-1],a]:[s[t-1],s[t]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return s.slice()},o.copy=function(){return e().domain([n,a]).range(i).unknown(t)},Qfe.apply(Mme(o),arguments)},scaleRadial:function e(){var t,n=dme(),a=[0,1],r=!1;function s(e){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(n(e));return isNaN(a)?t:r?Math.round(a):a}return s.invert=function(e){return n.invert(Hme(e))},s.domain=function(e){return arguments.length?(n.domain(e),s):n.domain()},s.range=function(e){return arguments.length?(n.range((a=Array.from(e,nme)).map(Hme)),s):a.slice()},s.rangeRound=function(e){return s.range(e).round(!0)},s.round=function(e){return arguments.length?(r=!!e,s):r},s.clamp=function(e){return arguments.length?(n.clamp(e),s):n.clamp()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e(n.domain(),a).round(r).clamp(n.clamp()).unknown(t)},Qfe.apply(s,arguments),Mme(s)},scaleSequential:function e(){var t=Mme(lge()(rme));return t.copy=function(){return cge(t,e())},Kfe.apply(t,arguments)},scaleSequentialLog:function e(){var t=Ome(lge()).domain([1,10]);return t.copy=function(){return cge(t,e()).base(t.base())},Kfe.apply(t,arguments)},scaleSequentialPow:dge,scaleSequentialQuantile:function e(){var t=[],n=rme;function a(e){if(null!=e&&!isNaN(e=+e))return n((Lfe(t,e,1)-1)/(t.length-1))}return a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(Mfe),a},a.interpolator=function(e){return arguments.length?(n=e,a):n},a.range=function(){return t.map(((e,a)=>n(a/(t.length-1))))},a.quantiles=function(e){return Array.from({length:e+1},((n,a)=>function(e,t){if((n=(e=Float64Array.from(function*(e){for(let t of e)null!=t&&(t=+t)>=t&&(yield t)}(e))).length)&&!isNaN(t=+t)){if(t<=0||n<2)return Hfe(e);if(t>=1)return Vfe(e);var n,a=(n-1)*t,r=Math.floor(a),s=Vfe(qfe(e,r).subarray(0,r+1));return s+(Hfe(e.subarray(r+1))-s)*(a-r)}}(t,a/e)))},a.copy=function(){return e(n).domain(t)},Kfe.apply(a,arguments)},scaleSequentialSqrt:function(){return dge.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=Fme(lge());return t.copy=function(){return cge(t,e()).constant(t.constant())},Kfe.apply(t,arguments)},scaleSqrt:function(){return Vme.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=Fme(cme());return t.copy=function(){return lme(t,e()).constant(t.constant())},Qfe.apply(t,arguments)},scaleThreshold:function e(){var t,n=[.5],a=[0,1],r=1;function s(e){return null!=e&&e<=e?a[Lfe(n,e,0,r)]:t}return s.domain=function(e){return arguments.length?(n=Array.from(e),r=Math.min(n.length,a.length-1),s):n.slice()},s.range=function(e){return arguments.length?(a=Array.from(e),r=Math.min(n.length,a.length-1),s):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return[n[t-1],n[t]]},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e().domain(n).range(a).unknown(t)},Qfe.apply(s,arguments)},scaleTime:function(){return Qfe.apply(oge(Dpe,Ppe,Ipe,Mpe,fpe,lpe,ipe,rpe,ape,Bpe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return Qfe.apply(oge(Lpe,Tpe,Ape,_pe,bpe,cpe,ope,spe,ape,Upe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:kme},Symbol.toStringTag,{value:"Module"}));var pge=gee;var hge=function(e,t,n){for(var a=-1,r=e.length;++a<r;){var s=e[a],i=t(s);if(null!=i&&(void 0===o?i==i&&!pge(i):n(i,o)))var o=i,l=s}return l};var gge=function(e,t){return e>t},xge=hge,yge=gge,vge=Ule;const bge=Cr((function(e){return e&&e.length?xge(e,vge,yge):void 0}));var wge=function(e,t){return e<t},jge=hge,Nge=wge,Cge=Ule;const Sge=Cr((function(e){return e&&e.length?jge(e,Cge,Nge):void 0}));var kge=Jte,Mge=Zle,_ge=qce,Ige=K7;var Age=zce,Ege=function(e,t){return(Ige(e)?kge:_ge)(e,Mge(t))};const Lge=Cr((function(e,t){return Age(Ege(e,t),1)}));var Tge=hle;const Dge=Cr((function(e,t){return Tge(e,t)}));var Pge,Oge=1e9,Rge=!0,zge="[DecimalError] ",Fge=zge+"Invalid argument: ",Bge=zge+"Exponent out of range: ",Uge=Math.floor,Wge=Math.pow,Gge=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vge=1e7,Hge=9007199254740991,qge=Uge(1286742750677284.5),$ge={};function Yge(e,t){var n,a,r,s,i,o,l,c,d=e.constructor,u=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Rge?rxe(t,u):t;if(l=e.d,c=t.d,i=e.e,r=t.e,l=l.slice(),s=i-r){for(s<0?(a=l,s=-s,o=c.length):(a=c,r=i,o=l.length),s>(o=(i=Math.ceil(u/7))>o?i+1:o+1)&&(s=o,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for((o=l.length)-(s=c.length)<0&&(s=o,a=c,c=l,l=a),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/Vge|0,l[s]%=Vge;for(n&&(l.unshift(n),++r),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=r,Rge?rxe(t,u):t}function Qge(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Fge+e)}function Kge(e){var t,n,a,r=e.length-1,s="",i=e[0];if(r>0){for(s+=i,t=1;t<r;t++)(n=7-(a=e[t]+"").length)&&(s+=txe(n)),s+=a;(n=7-(a=(i=e[t])+"").length)&&(s+=txe(n))}else if(0===i)return"0";for(;i%10==0;)i/=10;return s+i}$ge.absoluteValue=$ge.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},$ge.comparedTo=$ge.cmp=function(e){var t,n,a,r,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,n=(a=s.d.length)<(r=e.d.length)?a:r;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return a===r?0:a>r^s.s<0?1:-1},$ge.decimalPlaces=$ge.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},$ge.dividedBy=$ge.div=function(e){return Jge(this,new this.constructor(e))},$ge.dividedToIntegerBy=$ge.idiv=function(e){var t=this.constructor;return rxe(Jge(this,new t(e),0,1),t.precision)},$ge.equals=$ge.eq=function(e){return!this.cmp(e)},$ge.exponent=function(){return Xge(this)},$ge.greaterThan=$ge.gt=function(e){return this.cmp(e)>0},$ge.greaterThanOrEqualTo=$ge.gte=function(e){return this.cmp(e)>=0},$ge.isInteger=$ge.isint=function(){return this.e>this.d.length-2},$ge.isNegative=$ge.isneg=function(){return this.s<0},$ge.isPositive=$ge.ispos=function(){return this.s>0},$ge.isZero=function(){return 0===this.s},$ge.lessThan=$ge.lt=function(e){return this.cmp(e)<0},$ge.lessThanOrEqualTo=$ge.lte=function(e){return this.cmp(e)<1},$ge.logarithm=$ge.log=function(e){var t,n=this,a=n.constructor,r=a.precision,s=r+5;if(void 0===e)e=new a(10);else if((e=new a(e)).s<1||e.eq(Pge))throw Error(zge+"NaN");if(n.s<1)throw Error(zge+(n.s?"NaN":"-Infinity"));return n.eq(Pge)?new a(0):(Rge=!1,t=Jge(nxe(n,s),nxe(e,s),s),Rge=!0,rxe(t,r))},$ge.minus=$ge.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sxe(t,e):Yge(t,(e.s=-e.s,e))},$ge.modulo=$ge.mod=function(e){var t,n=this,a=n.constructor,r=a.precision;if(!(e=new a(e)).s)throw Error(zge+"NaN");return n.s?(Rge=!1,t=Jge(n,e,0,1).times(e),Rge=!0,n.minus(t)):rxe(new a(n),r)},$ge.naturalExponential=$ge.exp=function(){return Zge(this)},$ge.naturalLogarithm=$ge.ln=function(){return nxe(this)},$ge.negated=$ge.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},$ge.plus=$ge.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Yge(t,e):sxe(t,(e.s=-e.s,e))},$ge.precision=$ge.sd=function(e){var t,n,a,r=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Fge+e);if(t=Xge(r)+1,n=7*(a=r.d.length-1)+1,a=r.d[a]){for(;a%10==0;a/=10)n--;for(a=r.d[0];a>=10;a/=10)n++}return e&&t>n?t:n},$ge.squareRoot=$ge.sqrt=function(){var e,t,n,a,r,s,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(zge+"NaN")}for(e=Xge(o),Rge=!1,0==(r=Math.sqrt(+o))||r==1/0?(((t=Kge(o.d)).length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=Uge((e+1)/2)-(e<0||e%2),a=new l(t=r==1/0?"5e"+e:(t=r.toExponential()).slice(0,t.indexOf("e")+1)+e)):a=new l(r.toString()),r=i=(n=l.precision)+3;;)if(a=(s=a).plus(Jge(o,s,i+2)).times(.5),Kge(s.d).slice(0,i)===(t=Kge(a.d)).slice(0,i)){if(t=t.slice(i-3,i+1),r==i&&"4999"==t){if(rxe(s,n+1,0),s.times(s).eq(o)){a=s;break}}else if("9999"!=t)break;i+=4}return Rge=!0,rxe(a,n)},$ge.times=$ge.mul=function(e){var t,n,a,r,s,i,o,l,c,d=this,u=d.constructor,f=d.d,m=(e=new u(e)).d;if(!d.s||!e.s)return new u(0);for(e.s*=d.s,n=d.e+e.e,(l=f.length)<(c=m.length)&&(s=f,f=m,m=s,i=l,l=c,c=i),s=[],a=i=l+c;a--;)s.push(0);for(a=c;--a>=0;){for(t=0,r=l+a;r>a;)o=s[r]+m[a]*f[r-a-1]+t,s[r--]=o%Vge|0,t=o/Vge|0;s[r]=(s[r]+t)%Vge|0}for(;!s[--i];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Rge?rxe(e,u.precision):e},$ge.toDecimalPlaces=$ge.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),void 0===e?n:(Qge(e,0,Oge),void 0===t?t=a.rounding:Qge(t,0,8),rxe(n,e+Xge(n)+1,t))},$ge.toExponential=function(e,t){var n,a=this,r=a.constructor;return void 0===e?n=ixe(a,!0):(Qge(e,0,Oge),void 0===t?t=r.rounding:Qge(t,0,8),n=ixe(a=rxe(new r(a),e+1,t),!0,e+1)),n},$ge.toFixed=function(e,t){var n,a,r=this,s=r.constructor;return void 0===e?ixe(r):(Qge(e,0,Oge),void 0===t?t=s.rounding:Qge(t,0,8),n=ixe((a=rxe(new s(r),e+Xge(r)+1,t)).abs(),!1,e+Xge(a)+1),r.isneg()&&!r.isZero()?"-"+n:n)},$ge.toInteger=$ge.toint=function(){var e=this,t=e.constructor;return rxe(new t(e),Xge(e)+1,t.rounding)},$ge.toNumber=function(){return+this},$ge.toPower=$ge.pow=function(e){var t,n,a,r,s,i,o=this,l=o.constructor,c=+(e=new l(e));if(!e.s)return new l(Pge);if(!(o=new l(o)).s){if(e.s<1)throw Error(zge+"Infinity");return o}if(o.eq(Pge))return o;if(a=l.precision,e.eq(Pge))return rxe(o,a);if(i=(t=e.e)>=(n=e.d.length-1),s=o.s,i){if((n=c<0?-c:c)<=Hge){for(r=new l(Pge),t=Math.ceil(a/7+4),Rge=!1;n%2&&oxe((r=r.times(o)).d,t),0!==(n=Uge(n/2));)oxe((o=o.times(o)).d,t);return Rge=!0,e.s<0?new l(Pge).div(r):rxe(r,a)}}else if(s<0)throw Error(zge+"NaN");return s=s<0&&1&e.d[Math.max(t,n)]?-1:1,o.s=1,Rge=!1,r=e.times(nxe(o,a+12)),Rge=!0,(r=Zge(r)).s=s,r},$ge.toPrecision=function(e,t){var n,a,r=this,s=r.constructor;return void 0===e?a=ixe(r,(n=Xge(r))<=s.toExpNeg||n>=s.toExpPos):(Qge(e,1,Oge),void 0===t?t=s.rounding:Qge(t,0,8),a=ixe(r=rxe(new s(r),e,t),e<=(n=Xge(r))||n<=s.toExpNeg,e)),a},$ge.toSignificantDigits=$ge.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(Qge(e,1,Oge),void 0===t?t=n.rounding:Qge(t,0,8)),rxe(new n(this),e,t)},$ge.toString=$ge.valueOf=$ge.val=$ge.toJSON=$ge[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Xge(e),n=e.constructor;return ixe(e,t<=n.toExpNeg||t>=n.toExpPos)};var Jge=function(){function e(e,t){var n,a=0,r=e.length;for(e=e.slice();r--;)n=e[r]*t+a,e[r]=n%Vge|0,a=n/Vge|0;return a&&e.unshift(a),e}function t(e,t,n,a){var r,s;if(n!=a)s=n>a?1:-1;else for(r=s=0;r<n;r++)if(e[r]!=t[r]){s=e[r]>t[r]?1:-1;break}return s}function n(e,t,n){for(var a=0;n--;)e[n]-=a,a=e[n]<t[n]?1:0,e[n]=a*Vge+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(a,r,s,i){var o,l,c,d,u,f,m,p,h,g,x,y,v,b,w,j,N,C,S=a.constructor,k=a.s==r.s?1:-1,M=a.d,_=r.d;if(!a.s)return new S(a);if(!r.s)throw Error(zge+"Division by zero");for(l=a.e-r.e,N=_.length,w=M.length,p=(m=new S(k)).d=[],c=0;_[c]==(M[c]||0);)++c;if(_[c]>(M[c]||0)&&--l,(y=null==s?s=S.precision:i?s+(Xge(a)-Xge(r))+1:s)<0)return new S(0);if(y=y/7+2|0,c=0,1==N)for(d=0,_=_[0],y++;(c<w||d)&&y--;c++)v=d*Vge+(M[c]||0),p[c]=v/_|0,d=v%_|0;else{for((d=Vge/(_[0]+1)|0)>1&&(_=e(_,d),M=e(M,d),N=_.length,w=M.length),b=N,g=(h=M.slice(0,N)).length;g<N;)h[g++]=0;(C=_.slice()).unshift(0),j=_[0],_[1]>=Vge/2&&++j;do{d=0,(o=t(_,h,N,g))<0?(x=h[0],N!=g&&(x=x*Vge+(h[1]||0)),(d=x/j|0)>1?(d>=Vge&&(d=Vge-1),1==(o=t(u=e(_,d),h,f=u.length,g=h.length))&&(d--,n(u,N<f?C:_,f))):(0==d&&(o=d=1),u=_.slice()),(f=u.length)<g&&u.unshift(0),n(h,u,g),-1==o&&(o=t(_,h,N,g=h.length))<1&&(d++,n(h,N<g?C:_,g)),g=h.length):0===o&&(d++,h=[0]),p[c++]=d,o&&h[0]?h[g++]=M[b]||0:(h=[M[b]],g=1)}while((b++<w||void 0!==h[0])&&y--)}return p[0]||p.shift(),m.e=l,rxe(m,i?s+Xge(m)+1:s)}}();function Zge(e,t){var n,a,r,s,i,o=0,l=0,c=e.constructor,d=c.precision;if(Xge(e)>16)throw Error(Bge+Xge(e));if(!e.s)return new c(Pge);for(Rge=!1,i=d,s=new c(.03125);e.abs().gte(.1);)e=e.times(s),l+=5;for(i+=Math.log(Wge(2,l))/Math.LN10*2+5|0,n=a=r=new c(Pge),c.precision=i;;){if(a=rxe(a.times(e),i),n=n.times(++o),Kge((s=r.plus(Jge(a,n,i))).d).slice(0,i)===Kge(r.d).slice(0,i)){for(;l--;)r=rxe(r.times(r),i);return c.precision=d,null==t?(Rge=!0,rxe(r,d)):r}r=s}}function Xge(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function exe(e,t,n){if(t>e.LN10.sd())throw Rge=!0,n&&(e.precision=n),Error(zge+"LN10 precision limit exceeded");return rxe(new e(e.LN10),t)}function txe(e){for(var t="";e--;)t+="0";return t}function nxe(e,t){var n,a,r,s,i,o,l,c,d,u=1,f=e,m=f.d,p=f.constructor,h=p.precision;if(f.s<1)throw Error(zge+(f.s?"NaN":"-Infinity"));if(f.eq(Pge))return new p(0);if(null==t?(Rge=!1,c=h):c=t,f.eq(10))return null==t&&(Rge=!0),exe(p,c);if(c+=10,p.precision=c,a=(n=Kge(m)).charAt(0),s=Xge(f),!(Math.abs(s)<15e14))return l=exe(p,c+2,h).times(s+""),f=nxe(new p(a+"."+n.slice(1)),c-10).plus(l),p.precision=h,null==t?(Rge=!0,rxe(f,h)):f;for(;a<7&&1!=a||1==a&&n.charAt(1)>3;)a=(n=Kge((f=f.times(e)).d)).charAt(0),u++;for(s=Xge(f),a>1?(f=new p("0."+n),s++):f=new p(a+"."+n.slice(1)),o=i=f=Jge(f.minus(Pge),f.plus(Pge),c),d=rxe(f.times(f),c),r=3;;){if(i=rxe(i.times(d),c),Kge((l=o.plus(Jge(i,new p(r),c))).d).slice(0,c)===Kge(o.d).slice(0,c))return o=o.times(2),0!==s&&(o=o.plus(exe(p,c+2,h).times(s+""))),o=Jge(o,new p(u),c),p.precision=h,null==t?(Rge=!0,rxe(o,h)):o;o=l,r+=2}}function axe(e,t){var n,a,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;48===t.charCodeAt(a);)++a;for(r=t.length;48===t.charCodeAt(r-1);)--r;if(t=t.slice(a,r)){if(r-=a,n=n-a-1,e.e=Uge(n/7),e.d=[],a=(n+1)%7,n<0&&(a+=7),a<r){for(a&&e.d.push(+t.slice(0,a)),r-=7;a<r;)e.d.push(+t.slice(a,a+=7));a=7-(t=t.slice(a)).length}else a-=r;for(;a--;)t+="0";if(e.d.push(+t),Rge&&(e.e>qge||e.e<-qge))throw Error(Bge+n)}else e.s=0,e.e=0,e.d=[0];return e}function rxe(e,t,n){var a,r,s,i,o,l,c,d,u=e.d;for(i=1,s=u[0];s>=10;s/=10)i++;if((a=t-i)<0)a+=7,r=t,c=u[d=0];else{if((d=Math.ceil((a+1)/7))>=(s=u.length))return e;for(c=s=u[d],i=1;s>=10;s/=10)i++;r=(a%=7)-7+i}if(void 0!==n&&(o=c/(s=Wge(10,i-r-1))%10|0,l=t<0||void 0!==u[d+1]||c%s,l=n<4?(o||l)&&(0==n||n==(e.s<0?3:2)):o>5||5==o&&(4==n||l||6==n&&(a>0?r>0?c/Wge(10,i-r):0:u[d-1])%10&1||n==(e.s<0?8:7))),t<1||!u[0])return l?(s=Xge(e),u.length=1,t=t-s-1,u[0]=Wge(10,(7-t%7)%7),e.e=Uge(-t/7)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(0==a?(u.length=d,s=1,d--):(u.length=d+1,s=Wge(10,7-a),u[d]=r>0?(c/Wge(10,i-r)%Wge(10,r)|0)*s:0),l)for(;;){if(0==d){(u[0]+=s)==Vge&&(u[0]=1,++e.e);break}if(u[d]+=s,u[d]!=Vge)break;u[d--]=0,s=1}for(a=u.length;0===u[--a];)u.pop();if(Rge&&(e.e>qge||e.e<-qge))throw Error(Bge+Xge(e));return e}function sxe(e,t){var n,a,r,s,i,o,l,c,d,u,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Rge?rxe(t,m):t;if(l=e.d,u=t.d,a=t.e,c=e.e,l=l.slice(),i=c-a){for((d=i<0)?(n=l,i=-i,o=u.length):(n=u,a=c,o=l.length),i>(r=Math.max(Math.ceil(m/7),o)+2)&&(i=r,n.length=1),n.reverse(),r=i;r--;)n.push(0);n.reverse()}else{for((d=(r=l.length)<(o=u.length))&&(o=r),r=0;r<o;r++)if(l[r]!=u[r]){d=l[r]<u[r];break}i=0}for(d&&(n=l,l=u,u=n,t.s=-t.s),o=l.length,r=u.length-o;r>0;--r)l[o++]=0;for(r=u.length;r>i;){if(l[--r]<u[r]){for(s=r;s&&0===l[--s];)l[s]=Vge-1;--l[s],l[r]+=Vge}l[r]-=u[r]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--a;return l[0]?(t.d=l,t.e=a,Rge?rxe(t,m):t):new f(0)}function ixe(e,t,n){var a,r=Xge(e),s=Kge(e.d),i=s.length;return t?(n&&(a=n-i)>0?s=s.charAt(0)+"."+s.slice(1)+txe(a):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r<0?"e":"e+")+r):r<0?(s="0."+txe(-r-1)+s,n&&(a=n-i)>0&&(s+=txe(a))):r>=i?(s+=txe(r+1-i),n&&(a=n-r-1)>0&&(s=s+"."+txe(a))):((a=r+1)<i&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-i)>0&&(r+1===i&&(s+="."),s+=txe(a))),e.s<0?"-"+s:s}function oxe(e,t){if(e.length>t)return e.length=t,!0}function lxe(e){if(!e||"object"!=typeof e)throw Error(zge+"Object expected");var t,n,a,r=["precision",1,Oge,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if(void 0!==(a=e[n=r[t]])){if(!(Uge(a)===a&&a>=r[t+1]&&a<=r[t+2]))throw Error(Fge+n+": "+a);this[n]=a}if(void 0!==(a=e[n="LN10"])){if(a!=Math.LN10)throw Error(Fge+n+": "+a);this[n]=new this(a)}return this}var cxe=function e(t){var n,a,r;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(Fge+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):axe(t,e.toString())}if("string"!=typeof e)throw Error(Fge+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!Gge.test(e))throw Error(Fge+e);axe(t,e)}if(s.prototype=$ge,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=lxe,void 0===t&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<r.length;)t.hasOwnProperty(a=r[n++])||(t[a]=this[a]);return s.config(t),s}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});Pge=new cxe(1);const dxe=cxe;function uxe(e){return function(e){if(Array.isArray(e))return fxe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fxe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fxe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fxe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var mxe=function(e){return e},pxe={},hxe=function(e){return e===pxe},gxe=function(e){return function t(){return 0===arguments.length||1===arguments.length&&hxe(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},xxe=function e(t,n){return 1===t?n:gxe((function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];var i=r.filter((function(e){return e!==pxe})).length;return i>=t?n.apply(void 0,r):e(t-i,gxe((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var s=r.map((function(e){return hxe(e)?t.shift():e}));return n.apply(void 0,uxe(s).concat(t))})))}))},yxe=function(e){return xxe(e.length,e)},vxe=function(e,t){for(var n=[],a=e;a<t;++a)n[a-e]=a;return n},bxe=yxe((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),wxe=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},jxe=function(e){var t=null,n=null;return function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return t&&r.every((function(e,n){return e===t[n]}))?n:(t=r,n=e.apply(void 0,r))}};var Nxe=yxe((function(e,t,n){var a=+e;return a+n*(+t-a)})),Cxe=yxe((function(e,t,n){var a=t-+e;return(n-e)/(a=a||1/0)})),Sxe=yxe((function(e,t,n){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(n-e)/a))}));const kxe={rangeStep:function(e,t,n){for(var a=new dxe(e),r=0,s=[];a.lt(t)&&r<1e5;)s.push(a.toNumber()),a=a.add(n),r++;return s},getDigitCount:function(e){return 0===e?1:Math.floor(new dxe(e).abs().log(10).toNumber())+1},interpolateNumber:Nxe,uninterpolateNumber:Cxe,uninterpolateTruncation:Sxe};function Mxe(e){return function(e){if(Array.isArray(e))return Axe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ixe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(pBe){r=!0,s=pBe}finally{try{a||null==o.return||o.return()}finally{if(r)throw s}}return n}(e,t)||Ixe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ixe(e,t){if(e){if("string"==typeof e)return Axe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Axe(e,t):void 0}}function Axe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Exe(e){var t=_xe(e,2),n=t[0],a=t[1],r=n,s=a;return n>a&&(r=a,s=n),[r,s]}function Lxe(e,t,n){if(e.lte(0))return new dxe(0);var a=kxe.getDigitCount(e.toNumber()),r=new dxe(10).pow(a),s=e.div(r),i=1!==a?.05:.1,o=new dxe(Math.ceil(s.div(i).toNumber())).add(n).mul(i).mul(r);return t?o:new dxe(Math.ceil(o))}function Txe(e,t,n){var a=1,r=new dxe(e);if(!r.isint()&&n){var s=Math.abs(e);s<1?(a=new dxe(10).pow(kxe.getDigitCount(e)-1),r=new dxe(Math.floor(r.div(a).toNumber())).mul(a)):s>1&&(r=new dxe(Math.floor(e)))}else 0===e?r=new dxe(Math.floor((t-1)/2)):n||(r=new dxe(Math.floor(e)));var i=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return mxe;var a=t.reverse(),r=a[0],s=a.slice(1);return function(){return s.reduce((function(e,t){return t(e)}),r.apply(void 0,arguments))}}(bxe((function(e){return r.add(new dxe(e-i).mul(a)).toNumber()})),vxe);return o(0,t)}function Dxe(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new dxe(0),tickMin:new dxe(0),tickMax:new dxe(0)};var s,i=Lxe(new dxe(t).sub(e).div(n-1),a,r);s=e<=0&&t>=0?new dxe(0):(s=new dxe(e).add(t).div(2)).sub(new dxe(s).mod(i));var o=Math.ceil(s.sub(e).div(i).toNumber()),l=Math.ceil(new dxe(t).sub(s).div(i).toNumber()),c=o+l+1;return c>n?Dxe(e,t,n,a,r+1):(c<n&&(l=t>0?l+(n-c):l,o=t>0?o:o+(n-c)),{step:i,tickMin:s.sub(new dxe(o).mul(i)),tickMax:s.add(new dxe(l).mul(i))})}var Pxe=jxe((function(e){var t=_xe(e,2),n=t[0],a=t[1],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(r,2),o=_xe(Exe([n,a]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var d=c===1/0?[l].concat(Mxe(vxe(0,r-1).map((function(){return 1/0})))):[].concat(Mxe(vxe(0,r-1).map((function(){return-1/0}))),[c]);return n>a?wxe(d):d}if(l===c)return Txe(l,r,s);var u=Dxe(l,c,i,s),f=u.step,m=u.tickMin,p=u.tickMax,h=kxe.rangeStep(m,p.add(new dxe(.1).mul(f)),f);return n>a?wxe(h):h})),Oxe=jxe((function(e,t){var n=_xe(e,2),a=n[0],r=n[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=_xe(Exe([a,r]),2),o=i[0],l=i[1];if(o===-1/0||l===1/0)return[a,r];if(o===l)return[o];var c=Math.max(t,2),d=Lxe(new dxe(l).sub(o).div(c-1),s,0),u=[].concat(Mxe(kxe.rangeStep(new dxe(o),new dxe(l).sub(new dxe(.99).mul(d)),d)),[l]);return a>r?wxe(u):u}));function Rxe(e,t){throw new Error("Invariant failed")}var zxe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Fxe(e){return(Fxe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bxe(){return Bxe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bxe.apply(this,arguments)}function Uxe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t);else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wxe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wxe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wxe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Gxe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vxe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Kxe(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hxe(e,t,n){return t=$xe(t),function(e,t){if(t&&("object"===Fxe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qxe()?Reflect.construct(t,n||[],$xe(e).constructor):t.apply(e,n))}function qxe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qxe=function(){return!!e})()}function $xe(e){return($xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yxe(e,t){return(Yxe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qxe(e,t,n){return(t=Kxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kxe(e){var t=function(e,t){if("object"!=Fxe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Fxe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Fxe(t)?t:t+""}var Jxe=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Hxe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yxe(e,t)}(e,ds.Component),Vxe(e,[{key:"render",value:function(){var e=this.props,t=e.offset,n=e.layout,a=e.width,r=e.dataKey,s=e.data,i=e.dataPointFormatter,o=e.xAxis,l=e.yAxis,c=Gxe(e,zxe),d=Iae(c,!1);"x"===this.props.direction&&"number"!==o.type&&Rxe();var u=s.map((function(e){var s=i(e,r),c=s.x,u=s.y,f=s.value,m=s.errorVal;if(!m)return null;var p,h,g=[];if(Array.isArray(m)){var x=Uxe(m,2);p=x[0],h=x[1]}else p=h=m;if("vertical"===n){var y=o.scale,v=u+t,b=v+a,w=v-a,j=y(f-p),N=y(f+h);g.push({x1:N,y1:b,x2:N,y2:w}),g.push({x1:j,y1:v,x2:N,y2:v}),g.push({x1:j,y1:b,x2:j,y2:w})}else if("horizontal"===n){var C=l.scale,S=c+t,k=S-a,M=S+a,_=C(f-p),I=C(f+h);g.push({x1:k,y1:I,x2:M,y2:I}),g.push({x1:S,y1:_,x2:S,y2:I}),g.push({x1:k,y1:_,x2:M,y2:_})}return ds.createElement(Bae,Bxe({className:"recharts-errorBar",key:"bar-".concat(g.map((function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)})))},d),g.map((function(e){return ds.createElement("line",Bxe({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))})))}));return ds.createElement(Bae,{className:"recharts-errorBars"},u)}}])}();function Zxe(e){return(Zxe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function eye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xxe(Object(n),!0).forEach((function(t){tye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xxe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tye(e,t,n){var a;return a=function(e,t){if("object"!=Zxe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Zxe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Zxe(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Qxe(Jxe,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),Qxe(Jxe,"displayName","ErrorBar");var nye=function(e){var t=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,r=e.legendContent,s=Sae(t,Lce);if(!s)return null;var i,o=Lce.defaultProps,l=void 0!==o?eye(eye({},o),s.props):{};return i=s.props&&s.props.payload?s.props&&s.props.payload:"children"===r?(n||[]).reduce((function(e,t){var n=t.item,a=t.props,r=a.sectors||a.data||[];return e.concat(r.map((function(e){return{type:s.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(n||[]).map((function(e){var t=e.item,n=t.type.defaultProps,a=void 0!==n?eye(eye({},n),t.props):{},r=a.dataKey,s=a.name,i=a.legendType;return{inactive:a.hide,dataKey:r,type:l.iconType||i||"square",color:uye(t),value:s||r,payload:a}})),eye(eye(eye({},l),Lce.getWithHeight(s,a)),{},{payload:i,item:s})};function aye(e){return(aye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rye(e){return function(e){if(Array.isArray(e))return sye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return sye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function iye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function oye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iye(Object(n),!0).forEach((function(t){lye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lye(e,t,n){var a;return a=function(e,t){if("object"!=aye(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=aye(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==aye(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cye(e,t,n){return vne(e)||vne(t)?n:Zne(t)?yne(e,t,n):Mee(t)?t(e):n}function dye(e,t,n,a){var r=Lge(e,(function(e){return cye(e,t)}));if("number"===n){var s=r.filter((function(e){return Jne(e)||parseFloat(e)}));return s.length?[Sge(s),bge(s)]:[1/0,-1/0]}return(a?r.filter((function(e){return!vne(e)})):r).map((function(e){return Zne(e)||e instanceof Date?e:""}))}var uye=function(e){var t,n,a=e.type.displayName,r=null!==(t=e.type)&&void 0!==t&&t.defaultProps?oye(oye({},e.type.defaultProps),e.props):e.props,s=r.stroke,i=r.fill;switch(a){case"Line":n=s;break;case"Area":case"Radar":n=s&&"none"!==s?s:i;break;default:n=i}return n},fye=function(e,t,n,a,r){var s=Cae(t.props.children,Jxe).filter((function(e){return function(e,t,n){return!!vne(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(a,r,e.props.direction)}));if(s&&s.length){var i=s.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var a=cye(t,n);if(vne(a))return e;var r=Array.isArray(a)?[Sge(a),bge(a)]:[a,a],s=i.reduce((function(e,n){var a=cye(t,n,0),s=r[0]-Math.abs(Array.isArray(a)?a[0]:a),i=r[1]+Math.abs(Array.isArray(a)?a[1]:a);return[Math.min(s,e[0]),Math.max(i,e[1])]}),[1/0,-1/0]);return[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}),[1/0,-1/0])}return null},mye=function(e,t,n,a,r){var s=t.map((function(t){var s=t.props.dataKey;return"number"===n&&s&&fye(e,t,s,a)||dye(e,s,n,r)}));if("number"===n)return s.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var i={};return s.reduce((function(e,t){for(var n=0,a=t.length;n<a;n++)i[t[n]]||(i[t[n]]=!0,e.push(t[n]));return e}),[])},pye=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},hye=function(e,t,n,a){if(a)return e.map((function(e){return e.coordinate}));var r,s,i=e.map((function(e){return e.coordinate===t&&(r=!0),e.coordinate===n&&(s=!0),e.coordinate}));return r||i.push(t),s||i.push(n),i},gye=function(e,t,n){if(!e)return null;var a=e.scale,r=e.duplicateDomain,s=e.type,i=e.range,o="scaleBand"===e.realScaleType?a.bandwidth()/2:2,l=(t||n)&&"category"===s&&a.bandwidth?a.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null==i?void 0:i.length)>=2?2*Qne(i[0]-i[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=r?r.indexOf(e):e;return{coordinate:a(t)+l,value:e,offset:l}})).filter((function(e){return!Yne(e.coordinate)})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:a(e)+l,value:e,index:t,offset:l}})):a.ticks&&!n?a.ticks(e.tickCount).map((function(e){return{coordinate:a(e)+l,value:e,offset:l}})):a.domain().map((function(e,t){return{coordinate:a(e)+l,value:r?r[e]:e,index:t,offset:l}}))},xye=new WeakMap,yye=function(e,t){if("function"!=typeof t)return e;xye.has(e)||xye.set(e,new WeakMap);var n=xye.get(e);if(n.has(t))return n.get(t);var a=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,a),a},vye=function(e,t,n){var a=e.scale,r=e.type,s=e.layout,i=e.axisType;if("auto"===a)return"radial"===s&&"radiusAxis"===i?{scale:Xfe(),realScaleType:"band"}:"radial"===s&&"angleAxis"===i?{scale:_me(),realScaleType:"linear"}:"category"===r&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:tme(),realScaleType:"point"}:"category"===r?{scale:Xfe(),realScaleType:"band"}:{scale:_me(),realScaleType:"linear"};if(Nne(a)){var o="scale".concat(fre(a));return{scale:(mge[o]||tme)(),realScaleType:mge[o]?o:"point"}}return Mee(a)?{scale:a}:{scale:tme(),realScaleType:"point"}},bye=1e-4,wye=function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,a=e.range(),r=Math.min(a[0],a[1])-bye,s=Math.max(a[0],a[1])+bye,i=e(t[0]),o=e(t[n-1]);(i<r||i>s||o<r||o>s)&&e.domain([t[0],t[n-1]])}},jye={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,a=e[0].length;n<a;++n)for(var r=0,s=0,i=0;i<t;++i){var o=Yne(e[i][n][1])?e[i][n][0]:e[i][n][1];o>=0?(e[i][n][0]=r,e[i][n][1]=r+o,r=e[i][n][1]):(e[i][n][0]=s,e[i][n][1]=s+o,s=e[i][n][1])}},expand:function(e,t){if((a=e.length)>0){for(var n,a,r,s=0,i=e[0].length;s<i;++s){for(r=n=0;n<a;++n)r+=e[n][s][1]||0;if(r)for(n=0;n<a;++n)e[n][s][1]/=r}mse(e,t)}},none:mse,silhouette:function(e,t){if((n=e.length)>0){for(var n,a=0,r=e[t[0]],s=r.length;a<s;++a){for(var i=0,o=0;i<n;++i)o+=e[i][a][1]||0;r[a][1]+=r[a][0]=-o/2}mse(e,t)}},wiggle:function(e,t){if((r=e.length)>0&&(a=(n=e[t[0]]).length)>0){for(var n,a,r,s=0,i=1;i<a;++i){for(var o=0,l=0,c=0;o<r;++o){for(var d=e[t[o]],u=d[i][1]||0,f=(u-(d[i-1][1]||0))/2,m=0;m<o;++m){var p=e[t[m]];f+=(p[i][1]||0)-(p[i-1][1]||0)}l+=u,c+=f*u}n[i-1][1]+=n[i-1][0]=s,l&&(s-=c/l)}n[i-1][1]+=n[i-1][0]=s,mse(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,a=e[0].length;n<a;++n)for(var r=0,s=0;s<t;++s){var i=Yne(e[s][n][1])?e[s][n][0]:e[s][n][1];i>=0?(e[s][n][0]=r,e[s][n][1]=r+i,r=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}}},Nye=function(e,t,n){var a=t.map((function(e){return e.props.dataKey})),r=jye[n],s=function(){var e=mre([]),t=pse,n=mse,a=hse;function r(r){var s,i,o=Array.from(e.apply(this,arguments),gse),l=o.length,c=-1;for(const e of r)for(s=0,++c;s<l;++s)(o[s][c]=[0,+a(e,o[s].key,c,r)]).data=e;for(s=0,i=kre(t(o));s<l;++s)o[i[s]].index=s;return n(o,i),o}return r.keys=function(t){return arguments.length?(e="function"==typeof t?t:mre(Array.from(t)),r):e},r.value=function(e){return arguments.length?(a="function"==typeof e?e:mre(+e),r):a},r.order=function(e){return arguments.length?(t=null==e?pse:"function"==typeof e?e:mre(Array.from(e)),r):t},r.offset=function(e){return arguments.length?(n=null==e?mse:e,r):n},r}().keys(a).value((function(e,t){return+cye(e,t,0)})).order(pse).offset(r);return s(e)},Cye=function(e,t){var n=t.realScaleType,a=t.type,r=t.tickCount,s=t.originalDomain,i=t.allowDecimals,o=n||t.scale;if("auto"!==o&&"linear"!==o)return null;if(r&&"number"===a&&s&&("auto"===s[0]||"auto"===s[1])){var l=e.domain();if(!l.length)return null;var c=Pxe(l,r,i);return e.domain([Sge(c),bge(c)]),{niceTicks:c}}if(r&&"number"===a){var d=e.domain();return{niceTicks:Oxe(d,r,i)}}return null};function Sye(e){var t=e.axis,n=e.ticks,a=e.bandSize,r=e.entry,s=e.index,i=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!vne(r[t.dataKey])){var o=rae(n,"value",r[t.dataKey]);if(o)return o.coordinate+a/2}return n[s]?n[s].coordinate+a/2:null}var l=cye(r,vne(i)?t.dataKey:i);return vne(l)?null:t.scale(l)}var kye=function(e){var t=e.axis,n=e.ticks,a=e.offset,r=e.bandSize,s=e.entry,i=e.index;if("category"===t.type)return n[i]?n[i].coordinate+a:null;var o=cye(s,t.dataKey,t.domain[i]);return vne(o)?null:t.scale(o)-r/2+a},Mye=function(e,t,n){return Object.keys(e).reduce((function(a,r){var s=e[r].stackedData.reduce((function(e,a){var r=a.slice(t,n+1).reduce((function(e,t){return[Sge(t.concat([e[0]]).filter(Jne)),bge(t.concat([e[1]]).filter(Jne))]}),[1/0,-1/0]);return[Math.min(e[0],r[0]),Math.max(e[1],r[1])]}),[1/0,-1/0]);return[Math.min(s[0],a[0]),Math.max(s[1],a[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},_ye=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Iye=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Aye=function(e,t,n){if(Mee(e))return e(t,n);if(!Array.isArray(e))return t;var a=[];if(Jne(e[0]))a[0]=n?e[0]:Math.min(e[0],t[0]);else if(_ye.test(e[0])){var r=+_ye.exec(e[0])[1];a[0]=t[0]-r}else Mee(e[0])?a[0]=e[0](t[0]):a[0]=t[0];if(Jne(e[1]))a[1]=n?e[1]:Math.max(e[1],t[1]);else if(Iye.test(e[1])){var s=+Iye.exec(e[1])[1];a[1]=t[1]+s}else Mee(e[1])?a[1]=e[1](t[1]):a[1]=t[1];return a},Eye=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var r=_de(t,(function(e){return e.coordinate})),s=1/0,i=1,o=r.length;i<o;i++){var l=r[i],c=r[i-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},Lye=function(e,t,n){return e&&e.length?Dge(e,yne(n,"type.defaultProps.domain"))?t:e:t},Tye=function(e,t){var n=e.type.defaultProps?oye(oye({},e.type.defaultProps),e.props):e.props,a=n.dataKey,r=n.name,s=n.unit,i=n.formatter,o=n.tooltipType,l=n.chartType,c=n.hide;return oye(oye({},Iae(e,!1)),{},{dataKey:a,unit:s,formatter:i,name:r||a,color:uye(e),value:cye(t,a),type:o,payload:t,chartType:l,hide:c})};function Dye(e){return(Dye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Oye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pye(Object(n),!0).forEach((function(t){Rye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rye(e,t,n){var a;return a=function(e,t){if("object"!=Dye(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Dye(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Dye(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t);else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Bye=Math.PI/180,Uye=function(e){return 180*e/Math.PI},Wye=function(e,t,n,a){return{x:e+Math.cos(-Bye*a)*n,y:t+Math.sin(-Bye*a)*n}},Gye=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},Vye=function(e,t){var n=e.x,a=e.y,r=t.cx,s=t.cy,i=function(e,t){var n=e.x,a=e.y,r=t.x,s=t.y;return Math.sqrt(Math.pow(n-r,2)+Math.pow(a-s,2))}({x:n,y:a},{x:r,y:s});if(i<=0)return{radius:i};var o=(n-r)/i,l=Math.acos(o);return a>s&&(l=2*Math.PI-l),{radius:i,angle:Uye(l),angleInRadian:l}},Hye=function(e,t){var n=t.startAngle,a=t.endAngle,r=Math.floor(n/360),s=Math.floor(a/360);return e+360*Math.min(r,s)},qye=function(e,t){var n=e.x,a=e.y,r=Vye({x:n,y:a},t),s=r.radius,i=r.angle,o=t.innerRadius,l=t.outerRadius;if(s<o||s>l)return!1;if(0===s)return!0;var c,d=function(e){var t=e.startAngle,n=e.endAngle,a=Math.floor(t/360),r=Math.floor(n/360),s=Math.min(a,r);return{startAngle:t-360*s,endAngle:n-360*s}}(t),u=d.startAngle,f=d.endAngle,m=i;if(u<=f){for(;m>f;)m-=360;for(;m<u;)m+=360;c=m>=u&&m<=f}else{for(;m>u;)m-=360;for(;m<f;)m+=360;c=m>=f&&m<=u}return c?Oye(Oye({},t),{},{radius:s,angle:Hye(m,t)}):null},$ye=function(e){return cs.isValidElement(e)||Mee(e)||"boolean"==typeof e?"":e.className};function Yye(e){return(Yye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Qye=["offset"];function Kye(e){return function(e){if(Array.isArray(e))return Jye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Jye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Zye(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function eve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xye(Object(n),!0).forEach((function(t){tve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tve(e,t,n){var a;return a=function(e,t){if("object"!=Yye(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Yye(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Yye(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nve(){return nve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nve.apply(this,arguments)}var ave=function(e,t,n){var a,r,s=e.position,i=e.viewBox,o=e.offset,l=e.className,c=i,d=c.cx,u=c.cy,f=c.innerRadius,m=c.outerRadius,p=c.startAngle,h=c.endAngle,g=c.clockWise,x=(f+m)/2,y=function(e,t){return Qne(t-e)*Math.min(Math.abs(t-e),360)}(p,h),v=y>=0?1:-1;"insideStart"===s?(a=p+v*o,r=g):"insideEnd"===s?(a=h-v*o,r=!g):"end"===s&&(a=h+v*o,r=g),r=y<=0?r:!r;var b=Wye(d,u,x,a),w=Wye(d,u,x,a+359*(r?1:-1)),j="M".concat(b.x,",").concat(b.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(r?0:1,",\n    ").concat(w.x,",").concat(w.y),N=vne(e.id)?eae("recharts-radial-line-"):e.id;return ds.createElement("text",nve({},n,{dominantBaseline:"central",className:cb("recharts-radial-bar-label",l)}),ds.createElement("defs",null,ds.createElement("path",{id:N,d:j})),ds.createElement("textPath",{xlinkHref:"#".concat(N)},t))};function rve(e){var t,n=e.offset,a=eve({offset:void 0===n?5:n},Zye(e,Qye)),r=a.viewBox,s=a.position,i=a.value,o=a.children,l=a.content,c=a.className,d=void 0===c?"":c,u=a.textBreakAll;if(!r||vne(i)&&vne(o)&&!cs.isValidElement(l)&&!Mee(l))return null;if(cs.isValidElement(l))return cs.cloneElement(l,a);if(Mee(l)){if(t=cs.createElement(l,a),cs.isValidElement(t))return t}else t=function(e){var t=e.value,n=e.formatter,a=vne(e.children)?t:e.children;return Mee(n)?n(a):a}(a);var f=function(e){return"cx"in e&&Jne(e.cx)}(r),m=Iae(a,!0);if(f&&("insideStart"===s||"insideEnd"===s||"end"===s))return ave(a,t,m);var p=f?function(e){var t=e.viewBox,n=e.offset,a=e.position,r=t,s=r.cx,i=r.cy,o=r.innerRadius,l=r.outerRadius,c=(r.startAngle+r.endAngle)/2;if("outside"===a){var d=Wye(s,i,l+n,c),u=d.x;return{x:u,y:d.y,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if("center"===a)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===a)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===a)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var f=Wye(s,i,(o+l)/2,c);return{x:f.x,y:f.y,textAnchor:"middle",verticalAnchor:"middle"}}(a):function(e){var t=e.viewBox,n=e.parentViewBox,a=e.offset,r=e.position,s=t,i=s.x,o=s.y,l=s.width,c=s.height,d=c>=0?1:-1,u=d*a,f=d>0?"end":"start",m=d>0?"start":"end",p=l>=0?1:-1,h=p*a,g=p>0?"end":"start",x=p>0?"start":"end";if("top"===r)return eve(eve({},{x:i+l/2,y:o-d*a,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(o-n.y,0),width:l}:{});if("bottom"===r)return eve(eve({},{x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:m}),n?{height:Math.max(n.y+n.height-(o+c),0),width:l}:{});if("left"===r){var y={x:i-h,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return eve(eve({},y),n?{width:Math.max(y.x-n.x,0),height:c}:{})}if("right"===r){var v={x:i+l+h,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return eve(eve({},v),n?{width:Math.max(n.x+n.width-v.x,0),height:c}:{})}var b=n?{width:l,height:c}:{};return"insideLeft"===r?eve({x:i+h,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},b):"insideRight"===r?eve({x:i+l-h,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===r?eve({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:m},b):"insideBottom"===r?eve({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:f},b):"insideTopLeft"===r?eve({x:i+h,y:o+u,textAnchor:x,verticalAnchor:m},b):"insideTopRight"===r?eve({x:i+l-h,y:o+u,textAnchor:g,verticalAnchor:m},b):"insideBottomLeft"===r?eve({x:i+h,y:o+c-u,textAnchor:x,verticalAnchor:f},b):"insideBottomRight"===r?eve({x:i+l-h,y:o+c-u,textAnchor:g,verticalAnchor:f},b):Nee(r)&&(Jne(r.x)||Kne(r.x))&&(Jne(r.y)||Kne(r.y))?eve({x:i+tae(r.x,l),y:o+tae(r.y,c),textAnchor:"end",verticalAnchor:"end"},b):eve({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(a);return ds.createElement(kfe,nve({className:cb("recharts-label",d)},m,p,{breakAll:u}),t)}rve.displayName="Label";var sve=function(e){var t=e.cx,n=e.cy,a=e.angle,r=e.startAngle,s=e.endAngle,i=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,d=e.x,u=e.y,f=e.top,m=e.left,p=e.width,h=e.height,g=e.clockWise,x=e.labelViewBox;if(x)return x;if(Jne(p)&&Jne(h)){if(Jne(d)&&Jne(u))return{x:d,y:u,width:p,height:h};if(Jne(f)&&Jne(m))return{x:f,y:m,width:p,height:h}}return Jne(d)&&Jne(u)?{x:d,y:u,width:0,height:0}:Jne(t)&&Jne(n)?{cx:t,cy:n,startAngle:r||a||0,endAngle:s||a||0,innerRadius:l||0,outerRadius:c||o||i||0,clockWise:g}:e.viewBox?e.viewBox:{}};rve.parseViewBox=sve,rve.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var a=e.children,r=sve(e),s=Cae(a,rve).map((function(e,n){return cs.cloneElement(e,{viewBox:t||r,key:"label-".concat(n)})}));if(!n)return s;var i=function(e,t){return e?!0===e?ds.createElement(rve,{key:"label-implicit",viewBox:t}):Zne(e)?ds.createElement(rve,{key:"label-implicit",viewBox:t,value:e}):cs.isValidElement(e)?e.type===rve?cs.cloneElement(e,{key:"label-implicit",viewBox:t}):ds.createElement(rve,{key:"label-implicit",content:e,viewBox:t}):Mee(e)?ds.createElement(rve,{key:"label-implicit",content:e,viewBox:t}):Nee(e)?ds.createElement(rve,nve({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||r);return[i].concat(Kye(s))};const ive=Cr((function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}));function ove(e){return(ove="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var lve=["valueAccessor"],cve=["data","dataKey","clockWise","id","textBreakAll"];function dve(e){return function(e){if(Array.isArray(e))return uve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return uve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uve(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function fve(){return fve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fve.apply(this,arguments)}function mve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mve(Object(n),!0).forEach((function(t){hve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hve(e,t,n){var a;return a=function(e,t){if("object"!=ove(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=ove(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ove(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gve(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var xve=function(e){return Array.isArray(e.value)?ive(e.value):e.value};function yve(e){var t=e.valueAccessor,n=void 0===t?xve:t,a=gve(e,lve),r=a.data,s=a.dataKey,i=a.clockWise,o=a.id,l=a.textBreakAll,c=gve(a,cve);return r&&r.length?ds.createElement(Bae,{className:"recharts-label-list"},r.map((function(e,t){var a=vne(s)?n(e,t):cye(e&&e.payload,s),r=vne(o)?{}:{id:"".concat(o,"-").concat(t)};return ds.createElement(rve,fve({},Iae(e,!0),c,r,{parentViewBox:e.parentViewBox,value:a,textBreakAll:l,viewBox:rve.parseViewBox(vne(i)?e:pve(pve({},e),{},{clockWise:i})),key:"label-".concat(t),index:t}))}))):null}function vve(e){return(vve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bve(){return bve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bve.apply(this,arguments)}function wve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function jve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wve(Object(n),!0).forEach((function(t){Nve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nve(e,t,n){var a;return a=function(e,t){if("object"!=vve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=vve(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==vve(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}yve.displayName="LabelList",yve.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var a=Cae(e.children,yve).map((function(e,n){return cs.cloneElement(e,{data:t,key:"labelList-".concat(n)})}));return n?[function(e,t){return e?!0===e?ds.createElement(yve,{key:"labelList-implicit",data:t}):ds.isValidElement(e)||Mee(e)?ds.createElement(yve,{key:"labelList-implicit",data:t,content:e}):Nee(e)?ds.createElement(yve,fve({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t)].concat(dve(a)):a};var Cve=function(e){var t=e.cx,n=e.cy,a=e.radius,r=e.angle,s=e.sign,i=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(i?1:-1)+a,d=Math.asin(o/c)/Bye,u=l?r:r+s*d,f=l?r-s*d:r;return{center:Wye(t,n,c,u),circleTangency:Wye(t,n,a,u),lineTangency:Wye(t,n,c*Math.cos(d*Bye),f),theta:d}},Sve=function(e){var t=e.cx,n=e.cy,a=e.innerRadius,r=e.outerRadius,s=e.startAngle,i=function(e,t){return Qne(t-e)*Math.min(Math.abs(t-e),359.999)}(s,e.endAngle),o=s+i,l=Wye(t,n,r,s),c=Wye(t,n,r,o),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(r,",").concat(r,",0,\n    ").concat(+(Math.abs(i)>180),",").concat(+(s>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(a>0){var u=Wye(t,n,a,s),f=Wye(t,n,a,o);d+="L ".concat(f.x,",").concat(f.y,"\n            A ").concat(a,",").concat(a,",0,\n            ").concat(+(Math.abs(i)>180),",").concat(+(s<=o),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},kve={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Mve=function(e){var t=jve(jve({},kve),e),n=t.cx,a=t.cy,r=t.innerRadius,s=t.outerRadius,i=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,d=t.endAngle,u=t.className;if(s<r||c===d)return null;var f,m=cb("recharts-sector",u),p=s-r,h=tae(i,p,0,!0);return f=h>0&&Math.abs(c-d)<360?function(e){var t=e.cx,n=e.cy,a=e.innerRadius,r=e.outerRadius,s=e.cornerRadius,i=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,d=Qne(c-l),u=Cve({cx:t,cy:n,radius:r,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),f=u.circleTangency,m=u.lineTangency,p=u.theta,h=Cve({cx:t,cy:n,radius:r,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:o}),g=h.circleTangency,x=h.lineTangency,y=h.theta,v=o?Math.abs(l-c):Math.abs(l-c)-p-y;if(v<0)return i?"M ".concat(m.x,",").concat(m.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):Sve({cx:t,cy:n,innerRadius:a,outerRadius:r,startAngle:l,endAngle:c});var b="M ".concat(m.x,",").concat(m.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,"\n    A").concat(r,",").concat(r,",0,").concat(+(v>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,"\n  ");if(a>0){var w=Cve({cx:t,cy:n,radius:a,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),j=w.circleTangency,N=w.lineTangency,C=w.theta,S=Cve({cx:t,cy:n,radius:a,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),k=S.circleTangency,M=S.lineTangency,_=S.theta,I=o?Math.abs(l-c):Math.abs(l-c)-C-_;if(I<0&&0===s)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+="L".concat(M.x,",").concat(M.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(k.x,",").concat(k.y,"\n      A").concat(a,",").concat(a,",0,").concat(+(I>180),",").concat(+(d>0),",").concat(j.x,",").concat(j.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else b+="L".concat(t,",").concat(n,"Z");return b}({cx:n,cy:a,innerRadius:r,outerRadius:s,cornerRadius:Math.min(h,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}):Sve({cx:n,cy:a,innerRadius:r,outerRadius:s,startAngle:c,endAngle:d}),ds.createElement("path",bve({},Iae(t,!0),{className:m,d:f,role:"img"}))};function _ve(e){return(_ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ive(){return Ive=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ive.apply(this,arguments)}function Ave(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Eve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ave(Object(n),!0).forEach((function(t){Lve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ave(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lve(e,t,n){var a;return a=function(e,t){if("object"!=_ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=_ve(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==_ve(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tve={curveBasisClosed:function(e){return new ese(e)},curveBasisOpen:function(e){return new tse(e)},curveBasis:function(e){return new Xre(e)},curveBumpX:function(e){return new Tre(e,!0)},curveBumpY:function(e){return new Tre(e,!1)},curveLinearClosed:function(e){return new nse(e)},curveLinear:_re,curveMonotoneX:function(e){return new ose(e)},curveMonotoneY:function(e){return new lse(e)},curveNatural:function(e){return new dse(e)},curveStep:function(e){return new fse(e,.5)},curveStepAfter:function(e){return new fse(e,1)},curveStepBefore:function(e){return new fse(e,0)}},Dve=function(e){return e.x===+e.x&&e.y===+e.y},Pve=function(e){return e.x},Ove=function(e){return e.y},Rve=function(e){var t,n=e.type,a=void 0===n?"linear":n,r=e.points,s=void 0===r?[]:r,i=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,d=function(e,t){if(Mee(e))return e;var n="curve".concat(fre(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?Tve[n]||_re:Tve["".concat(n).concat("vertical"===t?"Y":"X")]}(a,o),u=c?s.filter((function(e){return Dve(e)})):s;if(Array.isArray(i)){var f=c?i.filter((function(e){return Dve(e)})):i,m=u.map((function(e,t){return Eve(Eve({},e),{},{base:f[t]})}));return(t="vertical"===o?Lre().y(Ove).x1(Pve).x0((function(e){return e.base.x})):Lre().x(Pve).y1(Ove).y0((function(e){return e.base.y}))).defined(Dve).curve(d),t(m)}return(t="vertical"===o&&Jne(i)?Lre().y(Ove).x1(Pve).x0(i):Jne(i)?Lre().x(Pve).y1(Ove).y0(i):Ere().x(Pve).y(Ove)).defined(Dve).curve(d),t(u)},zve=function(e){var t=e.className,n=e.points,a=e.path,r=e.pathRef;if(!(n&&n.length||a))return null;var s=n&&n.length?Rve(e):a;return ds.createElement("path",Ive({},Iae(e,!1),mae(e),{className:cb("recharts-curve",t),d:s,ref:r}))},Fve={exports:{}};function Bve(){}function Uve(){}Uve.resetWarningCache=Bve;Fve.exports=function(){function e(e,t,n,a,r,s){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==s){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Uve,resetWarningCache:Bve};return n.PropTypes=n,n}();const Wve=Cr(Fve.exports);var Gve=Object.getOwnPropertyNames,Vve=Object.getOwnPropertySymbols,Hve=Object.prototype.hasOwnProperty;function qve(e,t){return function(n,a,r){return e(n,a,r)&&t(n,a,r)}}function $ve(e){return function(t,n,a){if(!t||!n||"object"!=typeof t||"object"!=typeof n)return e(t,n,a);var r=a.cache,s=r.get(t),i=r.get(n);if(s&&i)return s===n&&i===t;r.set(t,n),r.set(n,t);var o=e(t,n,a);return r.delete(t),r.delete(n),o}}function Yve(e){return Gve(e).concat(Vve(e))}var Qve=Object.hasOwn||function(e,t){return Hve.call(e,t)};function Kve(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var Jve=Object.getOwnPropertyDescriptor,Zve=Object.keys;function Xve(e,t,n){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!n.equals(e[a],t[a],a,a,e,t,n))return!1;return!0}function ebe(e,t){return Kve(e.getTime(),t.getTime())}function tbe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function nbe(e,t){return e===t}function abe(e,t,n){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var r,s,i=new Array(a),o=e.entries(),l=0;(r=o.next())&&!r.done;){for(var c=t.entries(),d=!1,u=0;(s=c.next())&&!s.done;)if(i[u])u++;else{var f=r.value,m=s.value;if(n.equals(f[0],m[0],l,u,e,t,n)&&n.equals(f[1],m[1],f[0],m[0],e,t,n)){d=i[u]=!0;break}u++}if(!d)return!1;l++}return!0}var rbe=Kve;function sbe(e,t,n){var a=Zve(e),r=a.length;if(Zve(t).length!==r)return!1;for(;r-- >0;)if(!fbe(e,t,n,a[r]))return!1;return!0}function ibe(e,t,n){var a,r,s,i=Yve(e),o=i.length;if(Yve(t).length!==o)return!1;for(;o-- >0;){if(!fbe(e,t,n,a=i[o]))return!1;if(r=Jve(e,a),s=Jve(t,a),(r||s)&&(!r||!s||r.configurable!==s.configurable||r.enumerable!==s.enumerable||r.writable!==s.writable))return!1}return!0}function obe(e,t){return Kve(e.valueOf(),t.valueOf())}function lbe(e,t){return e.source===t.source&&e.flags===t.flags}function cbe(e,t,n){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var r,s,i=new Array(a),o=e.values();(r=o.next())&&!r.done;){for(var l=t.values(),c=!1,d=0;(s=l.next())&&!s.done;){if(!i[d]&&n.equals(r.value,s.value,r.value,s.value,e,t,n)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function dbe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function ube(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function fbe(e,t,n,a){return!("_owner"!==a&&"__o"!==a&&"__v"!==a||!e.$$typeof&&!t.$$typeof)||Qve(t,a)&&n.equals(e[a],t[a],a,a,e,t,n)}var mbe=Array.isArray,pbe="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,hbe=Object.assign,gbe=Object.prototype.toString.call.bind(Object.prototype.toString);var xbe=ybe();function ybe(e){void 0===e&&(e={});var t,n=e.circular,a=void 0!==n&&n,r=e.createInternalComparator,s=e.createState,i=e.strict,o=void 0!==i&&i,l=function(e){var t=e.circular,n=e.createCustomConfig,a=e.strict,r={areArraysEqual:a?ibe:Xve,areDatesEqual:ebe,areErrorsEqual:tbe,areFunctionsEqual:nbe,areMapsEqual:a?qve(abe,ibe):abe,areNumbersEqual:rbe,areObjectsEqual:a?ibe:sbe,arePrimitiveWrappersEqual:obe,areRegExpsEqual:lbe,areSetsEqual:a?qve(cbe,ibe):cbe,areTypedArraysEqual:a?ibe:dbe,areUrlsEqual:ube};if(n&&(r=hbe({},r,n(r))),t){var s=$ve(r.areArraysEqual),i=$ve(r.areMapsEqual),o=$ve(r.areObjectsEqual),l=$ve(r.areSetsEqual);r=hbe({},r,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return r}(e),c=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,a=e.areErrorsEqual,r=e.areFunctionsEqual,s=e.areMapsEqual,i=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,u=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(e,m,p){if(e===m)return!0;if(null==e||null==m)return!1;var h=typeof e;if(h!==typeof m)return!1;if("object"!==h)return"number"===h?i(e,m,p):"function"===h&&r(e,m,p);var g=e.constructor;if(g!==m.constructor)return!1;if(g===Object)return o(e,m,p);if(mbe(e))return t(e,m,p);if(null!=pbe&&pbe(e))return u(e,m,p);if(g===Date)return n(e,m,p);if(g===RegExp)return c(e,m,p);if(g===Map)return s(e,m,p);if(g===Set)return d(e,m,p);var x=gbe(e);return"[object Date]"===x?n(e,m,p):"[object RegExp]"===x?c(e,m,p):"[object Map]"===x?s(e,m,p):"[object Set]"===x?d(e,m,p):"[object Object]"===x?"function"!=typeof e.then&&"function"!=typeof m.then&&o(e,m,p):"[object URL]"===x?f(e,m,p):"[object Error]"===x?a(e,m,p):"[object Arguments]"===x?o(e,m,p):("[object Boolean]"===x||"[object Number]"===x||"[object String]"===x)&&l(e,m,p)}}(l),d=r?r(c):(t=c,function(e,n,a,r,s,i,o){return t(e,n,o)});return function(e){var t=e.circular,n=e.comparator,a=e.createState,r=e.equals,s=e.strict;if(a)return function(e,i){var o=a(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,d=o.meta;return n(e,i,{cache:c,equals:r,meta:d,strict:s})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};var i={cache:void 0,equals:r,meta:void 0,strict:s};return function(e,t){return n(e,t,i)}}({circular:a,comparator:c,createState:s,equals:d,strict:o})}function vbe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function a(r){n<0&&(n=r),r-n>t?(e(r),n=-1):function(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}(a)}))}function bbe(e){return(bbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wbe(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return jbe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jbe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jbe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Nbe(){var e=function(){return null},t=!1,n=function n(a){if(!t){if(Array.isArray(a)){if(!a.length)return;var r=wbe(a),s=r[0],i=r.slice(1);return"number"==typeof s?void vbe(n.bind(null,i),s):(n(s),void vbe(n.bind(null,i)))}"object"===bbe(a)&&e(a),"function"==typeof a&&a()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function Cbe(e){return(Cbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function kbe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sbe(Object(n),!0).forEach((function(t){Mbe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sbe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mbe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Cbe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!==Cbe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Cbe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ybe({strict:!0}),ybe({circular:!0}),ybe({circular:!0,strict:!0}),ybe({createInternalComparator:function(){return Kve}}),ybe({strict:!0,createInternalComparator:function(){return Kve}}),ybe({circular:!0,createInternalComparator:function(){return Kve}}),ybe({circular:!0,createInternalComparator:function(){return Kve},strict:!0});var _be=function(e){return e},Ibe=function(e,t){return Object.keys(t).reduce((function(n,a){return kbe(kbe({},n),{},Mbe({},a,e(a,t[a])))}),{})},Abe=function(e,t,n){return e.map((function(e){return"".concat((a=e,a.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(n);var a})).join(",")};function Ebe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t);else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||Tbe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lbe(e){return function(e){if(Array.isArray(e))return Dbe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Tbe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tbe(e,t){if(e){if("string"==typeof e)return Dbe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dbe(e,t):void 0}}function Dbe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Pbe=1e-4,Obe=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},Rbe=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},zbe=function(e,t){return function(n){var a=Obe(e,t);return Rbe(a,n)}},Fbe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],r=t[1],s=t[2],i=t[3];if(1===t.length)switch(t[0]){case"linear":a=0,r=0,s=1,i=1;break;case"ease":a=.25,r=.1,s=.25,i=1;break;case"ease-in":a=.42,r=0,s=1,i=1;break;case"ease-out":a=.42,r=0,s=.58,i=1;break;case"ease-in-out":a=0,r=0,s=.58,i=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=Ebe(o[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),4);a=l[0],r=l[1],s=l[2],i=l[3]}}var c,d,u=zbe(a,s),f=zbe(r,i),m=(c=a,d=s,function(e){var t=Obe(c,d),n=[].concat(Lbe(t.map((function(e,t){return e*t})).slice(1)),[0]);return Rbe(n,e)}),p=function(e){for(var t,n=e>1?1:e,a=n,r=0;r<8;++r){var s=u(a)-n,i=m(a);if(Math.abs(s-n)<Pbe||i<Pbe)return f(a);a=(t=a-s/i)>1?1:t<0?0:t}return f(a)};return p.isStepper=!1,p},Bbe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0];if("string"==typeof a)switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Fbe(a);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,a=e.damping,r=void 0===a?8:a,s=e.dt,i=void 0===s?17:s,o=function(e,t,a){var s=a+(-(e-t)*n-a*r)*i/1e3,o=a*i/1e3+e;return Math.abs(o-t)<Pbe&&Math.abs(s)<Pbe?[t,0]:[o,s]};return o.isStepper=!0,o.dt=i,o}();default:if("cubic-bezier"===a.split("(")[0])return Fbe(a)}return"function"==typeof a?a:null};function Ube(e){return(Ube="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wbe(e){return function(e){if(Array.isArray(e))return Ybe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Vbe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gbe(Object(n),!0).forEach((function(t){Hbe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gbe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hbe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ube(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!==Ube(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ube(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qbe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t);else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||$be(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $be(e,t){if(e){if("string"==typeof e)return Ybe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ybe(e,t):void 0}}function Ybe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Qbe=function(e,t,n){return e+(t-e)*n},Kbe=function(e){return e.from!==e.to},Jbe=function e(t,n,a){var r=Ibe((function(e,n){if(Kbe(n)){var a=qbe(t(n.from,n.to,n.velocity),2),r=a[0],s=a[1];return Vbe(Vbe({},n),{},{from:r,velocity:s})}return n}),n);return a<1?Ibe((function(e,t){return Kbe(t)?Vbe(Vbe({},t),{},{velocity:Qbe(t.velocity,r[e].velocity,a),from:Qbe(t.from,r[e].from,a)}):t}),n):e(t,r,a-1)};const Zbe=function(e,t,n,a,r){var s,i,o,l,c=(s=e,i=t,[Object.keys(s),Object.keys(i)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),d=c.reduce((function(n,a){return Vbe(Vbe({},n),{},Hbe({},a,[e[a],t[a]]))}),{}),u=c.reduce((function(n,a){return Vbe(Vbe({},n),{},Hbe({},a,{from:e[a],velocity:0,to:t[a]}))}),{}),f=-1,m=function(){return null};return m=n.isStepper?function(a){o||(o=a);var s=(a-o)/n.dt;u=Jbe(n,u,s),r(Vbe(Vbe(Vbe({},e),t),Ibe((function(e,t){return t.from}),u))),o=a,Object.values(u).filter(Kbe).length&&(f=requestAnimationFrame(m))}:function(s){l||(l=s);var i=(s-l)/a,o=Ibe((function(e,t){return Qbe.apply(void 0,Wbe(t).concat([n(i)]))}),d);if(r(Vbe(Vbe(Vbe({},e),t),o)),i<1)f=requestAnimationFrame(m);else{var c=Ibe((function(e,t){return Qbe.apply(void 0,Wbe(t).concat([n(1)]))}),d);r(Vbe(Vbe(Vbe({},e),t),c))}},function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(f)}}};function Xbe(e){return(Xbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ewe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function twe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nwe(e){return function(e){if(Array.isArray(e))return awe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return awe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return awe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function awe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function rwe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function swe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rwe(Object(n),!0).forEach((function(t){iwe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rwe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iwe(e,t,n){return(t=lwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function owe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,lwe(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lwe(e){var t=function(e,t){if("object"!==Xbe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!==Xbe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xbe(t)?t:String(t)}function cwe(e,t){return(cwe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dwe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=mwe(e);if(t){var r=mwe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return uwe(this,n)}}function uwe(e,t){if(t&&("object"===Xbe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fwe(e)}function fwe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mwe(e){return(mwe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pwe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cwe(e,t)}(t,cs.PureComponent);var e=dwe(t);function t(n,a){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=(r=e.call(this,n,a)).props,i=s.isActive,o=s.attributeName,l=s.from,c=s.to,d=s.steps,u=s.children,f=s.duration;if(r.handleStyleChange=r.handleStyleChange.bind(fwe(r)),r.changeStyle=r.changeStyle.bind(fwe(r)),!i||f<=0)return r.state={style:{}},"function"==typeof u&&(r.state={style:c}),uwe(r);if(d&&d.length)r.state={style:d[0].style};else if(l){if("function"==typeof u)return r.state={style:l},uwe(r);r.state={style:o?iwe({},o,l):l}}else r.state={style:{}};return r}return owe(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,a=t.canBegin,r=t.attributeName,s=t.shouldReAnimate,i=t.to,o=t.from,l=this.state.style;if(a)if(n){if(!(xbe(e.to,i)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||s?o:e.to;if(this.state&&l){var u={style:r?iwe({},r,d):d};(r&&l[r]!==d||!r&&l!==d)&&this.setState(u)}this.runAnimation(swe(swe({},this.props),{},{from:d,begin:0}))}}else{var f={style:r?iwe({},r,i):i};this.state&&l&&(r&&l[r]!==i||!r&&l!==i)&&this.setState(f)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,a=e.to,r=e.duration,s=e.easing,i=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=Zbe(n,a,Bbe(s),r,this.changeStyle);this.manager.start([l,i,function(){t.stopJSAnimation=c()},r,o])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,a=e.begin,r=e.onAnimationStart,s=n[0],i=s.style,o=s.duration,l=void 0===o?0:o;return this.manager.start([r].concat(nwe(n.reduce((function(e,a,r){if(0===r)return e;var s=a.duration,i=a.easing,o=void 0===i?"ease":i,l=a.style,c=a.properties,d=a.onAnimationEnd,u=r>0?n[r-1]:a,f=c||Object.keys(l);if("function"==typeof o||"spring"===o)return[].concat(nwe(e),[t.runJSAnimation.bind(t,{from:u.style,to:l,duration:s,easing:o}),s]);var m=Abe(f,s,o),p=swe(swe(swe({},u.style),l),{},{transition:m});return[].concat(nwe(e),[p,s,d]).filter(_be)}),[i,Math.max(l,a)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=Nbe());var t=e.begin,n=e.duration,a=e.attributeName,r=e.to,s=e.easing,i=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,d=this.manager;if(this.unSubscribe=d.subscribe(this.handleStyleChange),"function"!=typeof s&&"function"!=typeof c&&"spring"!==s)if(l.length>1)this.runStepAnimation(e);else{var u=a?iwe({},a,r):r,f=Abe(Object.keys(u),n,s);d.start([i,t,swe(swe({},u),{},{transition:f}),n,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children;e.begin;var n=e.duration;e.attributeName,e.easing;var a=e.isActive;e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart;var r=twe(e,ewe),s=cs.Children.count(t),i=this.state.style;if("function"==typeof t)return t(i);if(!a||0===s||n<=0)return t;var o=function(e){var t=e.props,n=t.style,a=void 0===n?{}:n,s=t.className;return cs.cloneElement(e,swe(swe({},r),{},{style:swe(swe({},a),i),className:s}))};return 1===s?o(cs.Children.only(t)):ds.createElement("div",null,cs.Children.map(t,(function(e){return o(e)})))}}]),t}();function hwe(){return hwe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hwe.apply(null,arguments)}function gwe(e){return(gwe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xwe(){return xwe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xwe.apply(this,arguments)}function ywe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t);else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vwe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vwe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vwe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function bwe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function wwe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bwe(Object(n),!0).forEach((function(t){jwe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bwe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jwe(e,t,n){var a;return a=function(e,t){if("object"!=gwe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=gwe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==gwe(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}pwe.displayName="Animate",pwe.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},pwe.propTypes={from:Wve.oneOfType([Wve.object,Wve.string]),to:Wve.oneOfType([Wve.object,Wve.string]),attributeName:Wve.string,duration:Wve.number,begin:Wve.number,easing:Wve.oneOfType([Wve.string,Wve.func]),steps:Wve.arrayOf(Wve.shape({duration:Wve.number.isRequired,style:Wve.object.isRequired,easing:Wve.oneOfType([Wve.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Wve.func]),properties:Wve.arrayOf("string"),onAnimationEnd:Wve.func})),children:Wve.oneOfType([Wve.node,Wve.func]),isActive:Wve.bool,canBegin:Wve.bool,onAnimationEnd:Wve.func,shouldReAnimate:Wve.bool,onAnimationStart:Wve.func,onAnimationReStart:Wve.func};var Nwe=function(e,t,n,a,r){var s,i=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,l=n>=0?1:-1,c=a>=0&&n>=0||a<0&&n<0?1:0;if(i>0&&r instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=r[u]>i?i:r[u];s="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(s+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),s+="L ".concat(e+n-l*d[1],",").concat(t),d[1]>0&&(s+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+o*d[1])),s+="L ".concat(e+n,",").concat(t+a-o*d[2]),d[2]>0&&(s+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+n-l*d[2],",").concat(t+a)),s+="L ".concat(e+l*d[3],",").concat(t+a),d[3]>0&&(s+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+a-o*d[3])),s+="Z"}else if(i>0&&r===+r&&r>0){var f=Math.min(i,r);s="M ".concat(e,",").concat(t+o*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+l*f,",").concat(t,"\n            L ").concat(e+n-l*f,",").concat(t,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n,",").concat(t+o*f,"\n            L ").concat(e+n,",").concat(t+a-o*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n-l*f,",").concat(t+a,"\n            L ").concat(e+l*f,",").concat(t+a,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e,",").concat(t+a-o*f," Z")}else s="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return s},Cwe=function(e,t){if(!e||!t)return!1;var n=e.x,a=e.y,r=t.x,s=t.y,i=t.width,o=t.height;if(Math.abs(i)>0&&Math.abs(o)>0){var l=Math.min(r,r+i),c=Math.max(r,r+i),d=Math.min(s,s+o),u=Math.max(s,s+o);return n>=l&&n<=c&&a>=d&&a<=u}return!1},Swe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kwe=function(e){var t=wwe(wwe({},Swe),e),n=cs.useRef(),a=ywe(cs.useState(-1),2),r=a[0],s=a[1];cs.useEffect((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&s(e)}catch(pBe){}}),[]);var i=t.x,o=t.y,l=t.width,c=t.height,d=t.radius,u=t.className,f=t.animationEasing,m=t.animationDuration,p=t.animationBegin,h=t.isAnimationActive,g=t.isUpdateAnimationActive;if(i!==+i||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var x=cb("recharts-rectangle",u);return g?ds.createElement(pwe,{canBegin:r>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:m,animationEasing:f,isActive:g},(function(e){var a=e.width,s=e.height,i=e.x,o=e.y;return ds.createElement(pwe,{canBegin:r>0,from:"0px ".concat(-1===r?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,isActive:h,easing:f},ds.createElement("path",xwe({},Iae(t,!0),{className:x,d:Nwe(i,o,a,s,d),ref:n})))})):ds.createElement("path",xwe({},Iae(t,!0),{className:x,d:Nwe(i,o,l,c,d)}))},Mwe=["points","className","baseLinePoints","connectNulls"];function _we(){return _we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_we.apply(this,arguments)}function Iwe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Awe(e){return function(e){if(Array.isArray(e))return Ewe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ewe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ewe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ewe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Lwe=function(e){return e&&e.x===+e.x&&e.y===+e.y},Twe=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((function(e){Lwe(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),Lwe(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce((function(e,t){return[].concat(Awe(e),Awe(t))}),[])]);var a=n.map((function(e){return e.reduce((function(e,t,n){return"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)}),"")})).join("");return 1===n.length?"".concat(a,"Z"):a},Dwe=function(e){var t=e.points,n=e.className,a=e.baseLinePoints,r=e.connectNulls,s=Iwe(e,Mwe);if(!t||!t.length)return null;var i=cb("recharts-polygon",n);if(a&&a.length){var o=s.stroke&&"none"!==s.stroke,l=function(e,t,n){var a=Twe(e,n);return"".concat("Z"===a.slice(-1)?a.slice(0,-1):a,"L").concat(Twe(t.reverse(),n).slice(1))}(t,a,r);return ds.createElement("g",{className:i},ds.createElement("path",_we({},Iae(s,!0),{fill:"Z"===l.slice(-1)?s.fill:"none",stroke:"none",d:l})),o?ds.createElement("path",_we({},Iae(s,!0),{fill:"none",d:Twe(t,r)})):null,o?ds.createElement("path",_we({},Iae(s,!0),{fill:"none",d:Twe(a,r)})):null)}var c=Twe(t,r);return ds.createElement("path",_we({},Iae(s,!0),{fill:"Z"===c.slice(-1)?s.fill:"none",className:i,d:c}))};function Pwe(){return Pwe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pwe.apply(this,arguments)}var Owe=function(e){var t=e.cx,n=e.cy,a=e.r,r=cb("recharts-dot",e.className);return t===+t&&n===+n&&a===+a?ds.createElement("circle",Pwe({},Iae(e,!1),mae(e),{className:r,cx:t,cy:n,r:a})):null};function Rwe(e){return(Rwe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var zwe=["x","y","top","left","width","height","className"];function Fwe(){return Fwe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fwe.apply(this,arguments)}function Bwe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Uwe(e,t,n){var a;return a=function(e,t){if("object"!=Rwe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Rwe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Rwe(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wwe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Gwe=function(e,t,n,a,r,s){return"M".concat(e,",").concat(r,"v").concat(a,"M").concat(s,",").concat(t,"h").concat(n)},Vwe=function(e){var t=e.x,n=void 0===t?0:t,a=e.y,r=void 0===a?0:a,s=e.top,i=void 0===s?0:s,o=e.left,l=void 0===o?0:o,c=e.width,d=void 0===c?0:c,u=e.height,f=void 0===u?0:u,m=e.className,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bwe(Object(n),!0).forEach((function(t){Uwe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bwe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:n,y:r,top:i,left:l,width:d,height:f},Wwe(e,zwe));return Jne(n)&&Jne(r)&&Jne(d)&&Jne(f)&&Jne(i)&&Jne(l)?ds.createElement("path",Fwe({},Iae(p,!0),{className:cb("recharts-cross",m),d:Gwe(n,r,d,f,i,l)})):null},Hwe=hge,qwe=gge,$we=Zle;const Ywe=Cr((function(e,t){return e&&e.length?Hwe(e,$we(t),qwe):void 0}));var Qwe=hge,Kwe=Zle,Jwe=wge;const Zwe=Cr((function(e,t){return e&&e.length?Qwe(e,Kwe(t),Jwe):void 0}));var Xwe=["cx","cy","angle","ticks","axisLine"],eje=["ticks","tick","angle","tickFormatter","stroke"];function tje(e){return(tje="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nje(){return nje=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nje.apply(this,arguments)}function aje(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function rje(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aje(Object(n),!0).forEach((function(t){uje(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aje(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sje(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ije(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,fje(a.key),a)}}function oje(e,t,n){return t=cje(t),function(e,t){if(t&&("object"===tje(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,lje()?Reflect.construct(t,n||[],cje(e).constructor):t.apply(e,n))}function lje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lje=function(){return!!e})()}function cje(e){return(cje=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dje(e,t){return(dje=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uje(e,t,n){return(t=fje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fje(e){var t=function(e,t){if("object"!=tje(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=tje(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==tje(t)?t:t+""}var mje=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oje(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dje(e,t)}(e,cs.PureComponent),t=e,a=[{key:"renderTickItem",value:function(e,t,n){return ds.isValidElement(e)?ds.cloneElement(e,t):Mee(e)?e(t):ds.createElement(kfe,nje({},t,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],(n=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,a=n.angle,r=n.cx,s=n.cy;return Wye(r,s,t,a)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,a=e.angle,r=e.ticks,s=Ywe(r,(function(e){return e.coordinate||0}));return{cx:t,cy:n,startAngle:a,endAngle:a,innerRadius:Zwe(r,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:s.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,a=e.angle,r=e.ticks,s=e.axisLine,i=sje(e,Xwe),o=r.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),l=Wye(t,n,o[0],a),c=Wye(t,n,o[1],a),d=rje(rje(rje({},Iae(i,!1)),{},{fill:"none"},Iae(s,!1)),{},{x1:l.x,y1:l.y,x2:c.x,y2:c.y});return ds.createElement("line",nje({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var t=this,n=this.props,a=n.ticks,r=n.tick,s=n.angle,i=n.tickFormatter,o=n.stroke,l=sje(n,eje),c=this.getTickTextAnchor(),d=Iae(l,!1),u=Iae(r,!1),f=a.map((function(n,a){var l=t.getTickValueCoord(n),f=rje(rje(rje(rje({textAnchor:c,transform:"rotate(".concat(90-s,", ").concat(l.x,", ").concat(l.y,")")},d),{},{stroke:"none",fill:o},u),{},{index:a},l),{},{payload:n});return ds.createElement(Bae,nje({className:cb("recharts-polar-radius-axis-tick",$ye(r)),key:"tick-".concat(n.coordinate)},pae(t.props,n,a)),e.renderTickItem(r,f,i?i(n.value,a):n.value))}));return ds.createElement(Bae,{className:"recharts-polar-radius-axis-ticks"},f)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.axisLine,a=e.tick;return t&&t.length?ds.createElement(Bae,{className:cb("recharts-polar-radius-axis",this.props.className)},n&&this.renderAxisLine(),a&&this.renderTicks(),rve.renderCallByParent(this.props,this.getViewBox())):null}}])&&ije(t.prototype,n),a&&ije(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();function pje(e){return(pje="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hje(){return hje=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hje.apply(this,arguments)}function gje(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xje(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gje(Object(n),!0).forEach((function(t){Nje(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gje(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yje(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Cje(a.key),a)}}function vje(e,t,n){return t=wje(t),function(e,t){if(t&&("object"===pje(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bje()?Reflect.construct(t,n||[],wje(e).constructor):t.apply(e,n))}function bje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bje=function(){return!!e})()}function wje(e){return(wje=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jje(e,t){return(jje=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nje(e,t,n){return(t=Cje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cje(e){var t=function(e,t){if("object"!=pje(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=pje(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==pje(t)?t:t+""}uje(mje,"displayName","PolarRadiusAxis"),uje(mje,"axisType","radiusAxis"),uje(mje,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var Sje=Math.PI/180,kje=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vje(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jje(e,t)}(e,cs.PureComponent),t=e,a=[{key:"renderTickItem",value:function(e,t,n){return ds.isValidElement(e)?ds.cloneElement(e,t):Mee(e)?e(t):ds.createElement(kfe,hje({},t,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],(n=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,a=t.cy,r=t.radius,s=t.orientation,i=t.tickSize||8,o=Wye(n,a,r,e.coordinate),l=Wye(n,a,r+("inner"===s?-1:1)*i,e.coordinate);return{x1:o.x,y1:o.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*Sje);return n>1e-5?"outer"===t?"start":"end":n<-1e-5?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,a=e.radius,r=e.axisLine,s=e.axisLineType,i=xje(xje({},Iae(this.props,!1)),{},{fill:"none"},Iae(r,!1));if("circle"===s)return ds.createElement(Owe,hje({className:"recharts-polar-angle-axis-line"},i,{cx:t,cy:n,r:a}));var o=this.props.ticks.map((function(e){return Wye(t,n,a,e.coordinate)}));return ds.createElement(Dwe,hje({className:"recharts-polar-angle-axis-line"},i,{points:o}))}},{key:"renderTicks",value:function(){var t=this,n=this.props,a=n.ticks,r=n.tick,s=n.tickLine,i=n.tickFormatter,o=n.stroke,l=Iae(this.props,!1),c=Iae(r,!1),d=xje(xje({},l),{},{fill:"none"},Iae(s,!1)),u=a.map((function(n,a){var u=t.getTickLineCoord(n),f=xje(xje(xje({textAnchor:t.getTickTextAnchor(n)},l),{},{stroke:"none",fill:o},c),{},{index:a,payload:n,x:u.x2,y:u.y2});return ds.createElement(Bae,hje({className:cb("recharts-polar-angle-axis-tick",$ye(r)),key:"tick-".concat(n.coordinate)},pae(t.props,n,a)),s&&ds.createElement("line",hje({className:"recharts-polar-angle-axis-tick-line"},d,u)),r&&e.renderTickItem(r,f,i?i(n.value,a):n.value))}));return ds.createElement(Bae,{className:"recharts-polar-angle-axis-ticks"},u)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.radius,a=e.axisLine;return n<=0||!t||!t.length?null:ds.createElement(Bae,{className:cb("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}])&&yje(t.prototype,n),a&&yje(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();Nje(kje,"displayName","PolarAngleAxis"),Nje(kje,"axisType","angleAxis"),Nje(kje,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Mje=goe(Object.getPrototypeOf,Object),_je=fee,Ije=Mje,Aje=mee,Eje=Function.prototype,Lje=Object.prototype,Tje=Eje.toString,Dje=Lje.hasOwnProperty,Pje=Tje.call(Object);const Oje=Cr((function(e){if(!Aje(e)||"[object Object]"!=_je(e))return!1;var t=Ije(e);if(null===t)return!0;var n=Dje.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Tje.call(n)==Pje}));var Rje=fee,zje=mee;const Fje=Cr((function(e){return!0===e||!1===e||zje(e)&&"[object Boolean]"==Rje(e)}));function Bje(e){return(Bje="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uje(){return Uje=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Uje.apply(this,arguments)}function Wje(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t);else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gje(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gje(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gje(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Vje(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Hje(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vje(Object(n),!0).forEach((function(t){qje(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vje(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qje(e,t,n){var a;return a=function(e,t){if("object"!=Bje(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Bje(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Bje(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $je,Yje=function(e,t,n,a,r){var s,i=n-a;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+n,",").concat(t),s+="L ".concat(e+n-i/2,",").concat(t+r),s+="L ".concat(e+n-i/2-a,",").concat(t+r),s+="L ".concat(e,",").concat(t," Z")},Qje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Kje=function(e){var t=Hje(Hje({},Qje),e),n=cs.useRef(),a=Wje(cs.useState(-1),2),r=a[0],s=a[1];cs.useEffect((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&s(e)}catch(pBe){}}),[]);var i=t.x,o=t.y,l=t.upperWidth,c=t.lowerWidth,d=t.height,u=t.className,f=t.animationEasing,m=t.animationDuration,p=t.animationBegin,h=t.isUpdateAnimationActive;if(i!==+i||o!==+o||l!==+l||c!==+c||d!==+d||0===l&&0===c||0===d)return null;var g=cb("recharts-trapezoid",u);return h?ds.createElement(pwe,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:d,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:d,x:i,y:o},duration:m,animationEasing:f,isActive:h},(function(e){var a=e.upperWidth,s=e.lowerWidth,i=e.height,o=e.x,l=e.y;return ds.createElement(pwe,{canBegin:r>0,from:"0px ".concat(-1===r?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,easing:f},ds.createElement("path",Uje({},Iae(t,!0),{className:g,d:Yje(o,l,a,s,i),ref:n})))})):ds.createElement("g",null,ds.createElement("path",Uje({},Iae(t,!0),{className:g,d:Yje(i,o,l,c,d)})))},Jje=["option","shapeType","propTransformer","activeClassName","isActive"];function Zje(e){return(Zje="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xje(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eNe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function tNe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eNe(Object(n),!0).forEach((function(t){nNe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eNe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nNe(e,t,n){var a;return a=function(e,t){if("object"!=Zje(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Zje(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Zje(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aNe(e,t){return tNe(tNe({},t),e)}function rNe(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return ds.createElement(kwe,n);case"trapezoid":return ds.createElement(Kje,n);case"sector":return ds.createElement(Mve,n);case"symbols":if(function(e){return"symbols"===e}(t))return ds.createElement(kse,n);break;default:return null}}function sNe(e){var t,n=e.option,a=e.shapeType,r=e.propTransformer,s=void 0===r?aNe:r,i=e.activeClassName,o=void 0===i?"recharts-active-shape":i,l=e.isActive,c=Xje(e,Jje);if(cs.isValidElement(n))t=cs.cloneElement(n,tNe(tNe({},c),function(e){return cs.isValidElement(e)?e.props:e}(n)));else if(Mee(n))t=n(c);else if(Oje(n)&&!Fje(n)){var d=s(n,c);t=ds.createElement(rNe,{shapeType:a,elementProps:d})}else{var u=c;t=ds.createElement(rNe,{shapeType:a,elementProps:u})}return l?ds.createElement(Bae,{className:o},t):t}function iNe(e,t){return null!=t&&"trapezoids"in e.props}function oNe(e,t){return null!=t&&"sectors"in e.props}function lNe(e,t){return null!=t&&"points"in e.props}function cNe(e,t){var n,a,r=e.x===(null==t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,s=e.y===(null==t||null===(a=t.labelViewBox)||void 0===a?void 0:a.y)||e.y===t.y;return r&&s}function dNe(e,t){var n=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return n&&a}function uNe(e,t){var n=e.x===t.x,a=e.y===t.y,r=e.z===t.z;return n&&a&&r}function fNe(e){var t=e.activeTooltipItem,n=e.graphicalItem,a=e.itemData,r=function(e,t){var n;return iNe(e,t)?n="trapezoids":oNe(e,t)?n="sectors":lNe(e,t)&&(n="points"),n}(n,t),s=function(e,t){var n,a;return iNe(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:oNe(e,t)?null===(a=t.tooltipPayload)||void 0===a||null===(a=a[0])||void 0===a||null===(a=a.payload)||void 0===a?void 0:a.payload:lNe(e,t)?t.payload:{}}(n,t),i=a.filter((function(e,a){var i=Dge(s,e),o=n.props[r].filter((function(e){var a=function(e,t){var n;return iNe(e,t)?n=cNe:oNe(e,t)?n=dNe:lNe(e,t)&&(n=uNe),n}(n,t);return a(e,t)})),l=n.props[r].indexOf(o[o.length-1]);return i&&a===l}));return a.indexOf(i[i.length-1])}function mNe(e){return(mNe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pNe(){return pNe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pNe.apply(this,arguments)}function hNe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function gNe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hNe(Object(n),!0).forEach((function(t){jNe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hNe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xNe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,NNe(a.key),a)}}function yNe(e,t,n){return t=bNe(t),function(e,t){if(t&&("object"===mNe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vNe()?Reflect.construct(t,n||[],bNe(e).constructor):t.apply(e,n))}function vNe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vNe=function(){return!!e})()}function bNe(e){return(bNe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wNe(e,t){return(wNe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jNe(e,t,n){return(t=NNe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NNe(e){var t=function(e,t){if("object"!=mNe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=mNe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==mNe(t)?t:t+""}var CNe=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jNe(n=yNe(this,e,[t]),"pieRef",null),jNe(n,"sectorRefs",[]),jNe(n,"id",eae("recharts-pie-")),jNe(n,"handleAnimationEnd",(function(){var e=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Mee(e)&&e()})),jNe(n,"handleAnimationStart",(function(){var e=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Mee(e)&&e()})),n.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wNe(e,t)}(e,cs.PureComponent),t=e,a=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,n){if(ds.isValidElement(e))return ds.cloneElement(e,t);if(Mee(e))return e(t);var a=cb("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return ds.createElement(zve,pNe({},t,{key:n,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(e,t,n){if(ds.isValidElement(e))return ds.cloneElement(e,t);var a=n;if(Mee(e)&&(a=e(t),ds.isValidElement(a)))return a;var r=cb("recharts-pie-label-text","boolean"==typeof e||Mee(e)?"":e.className);return ds.createElement(kfe,pNe({},t,{alignmentBaseline:"middle",className:r}),a)}}],(n=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,a=n.label,r=n.labelLine,s=n.dataKey,i=n.valueKey,o=Iae(this.props,!1),l=Iae(a,!1),c=Iae(r,!1),d=a&&a.offsetRadius||20,u=t.map((function(t,n){var u=(t.startAngle+t.endAngle)/2,f=Wye(t.cx,t.cy,t.outerRadius+d,u),m=gNe(gNe(gNe(gNe({},o),t),{},{stroke:"none"},l),{},{index:n,textAnchor:e.getTextAnchor(f.x,t.cx)},f),p=gNe(gNe(gNe(gNe({},o),t),{},{fill:"none",stroke:t.fill},c),{},{index:n,points:[Wye(t.cx,t.cy,t.outerRadius,u),f]}),h=s;return vne(s)&&vne(i)?h="value":vne(s)&&(h=i),ds.createElement(Bae,{key:"label-".concat(t.startAngle,"-").concat(t.endAngle,"-").concat(t.midAngle,"-").concat(n)},r&&e.renderLabelLineItem(r,p,"line"),e.renderLabelItem(a,m,cye(t,h)))}));return ds.createElement(Bae,{className:"recharts-pie-labels"},u)}},{key:"renderSectorsStatically",value:function(e){var t=this,n=this.props,a=n.activeShape,r=n.blendStroke,s=n.inactiveShape;return e.map((function(n,i){if(0===(null==n?void 0:n.startAngle)&&0===(null==n?void 0:n.endAngle)&&1!==e.length)return null;var o=t.isActiveIndex(i),l=s&&t.hasActiveIndex()?s:null,c=o?a:l,d=gNe(gNe({},n),{},{stroke:r?n.fill:n.stroke,tabIndex:-1});return ds.createElement(Bae,pNe({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},pae(t.props,n,i),{key:"sector-".concat(null==n?void 0:n.startAngle,"-").concat(null==n?void 0:n.endAngle,"-").concat(n.midAngle,"-").concat(i)}),ds.createElement(sNe,pNe({option:c,isActive:o,shapeType:"sector"},d)))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,n=t.sectors,a=t.isAnimationActive,r=t.animationBegin,s=t.animationDuration,i=t.animationEasing,o=t.animationId,l=this.state,c=l.prevSectors,d=l.prevIsAnimationActive;return ds.createElement(pwe,{begin:r,duration:s,isActive:a,easing:i,from:{t:0},to:{t:1},key:"pie-".concat(o,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(t){var a=t.t,r=[],s=(n&&n[0]).startAngle;return n.forEach((function(e,t){var n=c&&c[t],i=t>0?yne(e,"paddingAngle",0):0;if(n){var o=aae(n.endAngle-n.startAngle,e.endAngle-e.startAngle),l=gNe(gNe({},e),{},{startAngle:s+i,endAngle:s+o(a)+i});r.push(l),s=l.endAngle}else{var d=e.endAngle,u=e.startAngle,f=aae(0,d-u)(a),m=gNe(gNe({},e),{},{startAngle:s+i,endAngle:s+f+i});r.push(m),s=m.endAngle}})),ds.createElement(Bae,null,e.renderSectorsStatically(r))}))}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var n=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"ArrowRight":var a=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[a].focus(),t.setState({sectorToFocus:a});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,a=this.state.prevSectors;return!(n&&t&&t.length)||a&&Dge(a,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.hide,a=t.sectors,r=t.className,s=t.label,i=t.cx,o=t.cy,l=t.innerRadius,c=t.outerRadius,d=t.isAnimationActive,u=this.state.isAnimationFinished;if(n||!a||!a.length||!Jne(i)||!Jne(o)||!Jne(l)||!Jne(c))return null;var f=cb("recharts-pie",r);return ds.createElement(Bae,{tabIndex:this.props.rootTabIndex,className:f,ref:function(t){e.pieRef=t}},this.renderSectors(),s&&this.renderLabels(a),rve.renderCallByParent(this.props,null,!1),(!d||u)&&yve.renderCallByParent(this.props,a,!1))}}])&&xNe(t.prototype,n),a&&xNe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();$je=CNe,jNe(CNe,"displayName","Pie"),jNe(CNe,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!tue.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),jNe(CNe,"parseDeltaAngle",(function(e,t){return Qne(t-e)*Math.min(Math.abs(t-e),360)})),jNe(CNe,"getRealPieData",(function(e){var t=e.data,n=e.children,a=Iae(e,!1),r=Cae(n,Gue);return t&&t.length?t.map((function(e,t){return gNe(gNe(gNe({payload:e},a),e),r&&r[t]&&r[t].props)})):r&&r.length?r.map((function(e){return gNe(gNe({},a),e.props)})):[]})),jNe(CNe,"parseCoordinateOfPie",(function(e,t){var n=t.top,a=t.left,r=t.width,s=t.height,i=Gye(r,s);return{cx:a+tae(e.cx,r,r/2),cy:n+tae(e.cy,s,s/2),innerRadius:tae(e.innerRadius,i,0),outerRadius:tae(e.outerRadius,i,.8*i),maxRadius:e.maxRadius||Math.sqrt(r*r+s*s)/2}})),jNe(CNe,"getComposedData",(function(e){var t=e.item,n=e.offset,a=void 0!==t.type.defaultProps?gNe(gNe({},t.type.defaultProps),t.props):t.props,r=$je.getRealPieData(a);if(!r||!r.length)return null;var s=a.cornerRadius,i=a.startAngle,o=a.endAngle,l=a.paddingAngle,c=a.dataKey,d=a.nameKey,u=a.valueKey,f=a.tooltipType,m=Math.abs(a.minAngle),p=$je.parseCoordinateOfPie(a,n),h=$je.parseDeltaAngle(i,o),g=Math.abs(h),x=c;vne(c)&&vne(u)?(Uae(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),x="value"):vne(c)&&(Uae(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),x=u);var y,v,b=r.filter((function(e){return 0!==cye(e,x,0)})).length,w=g-b*m-(g>=360?b:b-1)*l,j=r.reduce((function(e,t){var n=cye(t,x,0);return e+(Jne(n)?n:0)}),0);j>0&&(y=r.map((function(e,t){var n,a=cye(e,x,0),r=cye(e,d,t),o=(Jne(a)?a:0)/j,c=(n=t?v.endAngle+Qne(h)*l*(0!==a?1:0):i)+Qne(h)*((0!==a?m:0)+o*w),u=(n+c)/2,g=(p.innerRadius+p.outerRadius)/2,y=[{name:r,value:a,payload:e,dataKey:x,type:f}],b=Wye(p.cx,p.cy,g,u);return v=gNe(gNe(gNe({percent:o,cornerRadius:s,name:r,tooltipPayload:y,midAngle:u,middleRadius:g,tooltipPosition:b},e),p),{},{value:cye(e,x),startAngle:n,endAngle:c,payload:e,paddingAngle:Qne(h)*l})})));return gNe(gNe({},p),{},{sectors:y,data:r})}));var SNe=Math.ceil,kNe=Math.max;var MNe=Sue,_Ne=1/0;var INe=function(e){return e?(e=MNe(e))===_Ne||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},ANe=function(e,t,n,a){for(var r=-1,s=kNe(SNe((t-e)/(n||1)),0),i=Array(s);s--;)i[a?s:++r]=e,e+=n;return i},ENe=Cde,LNe=INe;const TNe=Cr(function(e){return function(t,n,a){return a&&"number"!=typeof a&&ENe(t,n,a)&&(n=a=void 0),t=LNe(t),void 0===n?(n=t,t=0):n=LNe(n),a=void 0===a?t<n?1:-1:LNe(a),ANe(t,n,a,e)}}());function DNe(e){return(DNe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PNe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ONe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PNe(Object(n),!0).forEach((function(t){RNe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PNe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RNe(e,t,n){var a;return a=function(e,t){if("object"!=DNe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=DNe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==DNe(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zNe=["Webkit","Moz","O","ms"];function FNe(e){return(FNe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BNe(){return BNe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},BNe.apply(this,arguments)}function UNe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function WNe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UNe(Object(n),!0).forEach((function(t){YNe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UNe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GNe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,QNe(a.key),a)}}function VNe(e,t,n){return t=qNe(t),function(e,t){if(t&&("object"===FNe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,HNe()?Reflect.construct(t,n||[],qNe(e).constructor):t.apply(e,n))}function HNe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(HNe=function(){return!!e})()}function qNe(e){return(qNe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $Ne(e,t){return($Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function YNe(e,t,n){return(t=QNe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QNe(e){var t=function(e,t){if("object"!=FNe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=FNe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==FNe(t)?t:t+""}var KNe=function(e){return e.changedTouches&&!!e.changedTouches.length},JNe=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),YNe(n=VNe(this,e,[t]),"handleDrag",(function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)})),YNe(n,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])})),YNe(n,"handleDragEnd",(function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var e=n.props,t=e.endIndex,a=e.onDragEnd,r=e.startIndex;null==a||a({endIndex:t,startIndex:r})})),n.detachDragEndListener()})),YNe(n,"handleLeaveWrapper",(function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))})),YNe(n,"handleEnterSlideOrTraveller",(function(){n.setState({isTextActive:!0})})),YNe(n,"handleLeaveSlideOrTraveller",(function(){n.setState({isTextActive:!1})})),YNe(n,"handleSlideDragStart",(function(e){var t=KNe(e)?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),n.attachDragEndListener()})),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$Ne(e,t)}(e,cs.PureComponent),t=e,a=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,a=e.width,r=e.height,s=e.stroke,i=Math.floor(n+r/2)-1;return ds.createElement(ds.Fragment,null,ds.createElement("rect",{x:t,y:n,width:a,height:r,fill:s,stroke:"none"}),ds.createElement("line",{x1:t+1,y1:i,x2:t+a-1,y2:i,fill:"none",stroke:"#fff"}),ds.createElement("line",{x1:t+1,y1:i+2,x2:t+a-1,y2:i+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,n){return ds.isValidElement(t)?ds.cloneElement(t,n):Mee(t)?t(n):e.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,a=e.width,r=e.x,s=e.travellerWidth,i=e.updateId,o=e.startIndex,l=e.endIndex;if(n!==t.prevData||i!==t.prevUpdateId)return WNe({prevData:n,prevTravellerWidth:s,prevUpdateId:i,prevX:r,prevWidth:a},n&&n.length?function(e){var t=e.data,n=e.startIndex,a=e.endIndex,r=e.x,s=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=tme().domain(TNe(0,o)).range([r,r+s-i]),c=l.domain().map((function(e){return l(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(a),scale:l,scaleValues:c}}({data:n,width:a,x:r,travellerWidth:s,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(a!==t.prevWidth||r!==t.prevX||s!==t.prevTravellerWidth)){t.scale.range([r,r+a-s]);var c=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:s,prevUpdateId:i,prevX:r,prevWidth:a,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,a=e.length-1;a-n>1;){var r=Math.floor((n+a)/2);e[r]>t?a=r:n=r}return t>=e[a]?a:n}}],(n=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var n=t.startX,a=t.endX,r=this.state.scaleValues,s=this.props,i=s.gap,o=s.data.length-1,l=Math.min(n,a),c=Math.max(n,a),d=e.getIndexInRange(r,l),u=e.getIndexInRange(r,c);return{startIndex:d-d%i,endIndex:u===o?o:u-u%i}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,a=t.tickFormatter,r=t.dataKey,s=cye(n[e],r,e);return Mee(a)?a(s,e):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,a=t.startX,r=t.endX,s=this.props,i=s.x,o=s.width,l=s.travellerWidth,c=s.startIndex,d=s.endIndex,u=s.onChange,f=e.pageX-n;f>0?f=Math.min(f,i+o-l-r,i+o-l-a):f<0&&(f=Math.max(f,i-a,i-r));var m=this.getIndex({startX:a+f,endX:r+f});m.startIndex===c&&m.endIndex===d||!u||u(m),this.setState({startX:a+f,endX:r+f,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=KNe(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,a=t.movingTravellerId,r=t.endX,s=t.startX,i=this.state[a],o=this.props,l=o.x,c=o.width,d=o.travellerWidth,u=o.onChange,f=o.gap,m=o.data,p={startX:this.state.startX,endX:this.state.endX},h=e.pageX-n;h>0?h=Math.min(h,l+c-d-i):h<0&&(h=Math.max(h,l-i)),p[a]=i+h;var g=this.getIndex(p),x=g.startIndex,y=g.endIndex;this.setState(YNe(YNe({},a,i+h),"brushMoveStartX",e.pageX),(function(){var e;u&&(e=m.length-1,("startX"===a&&(r>s?x%f===0:y%f===0)||r<s&&y===e||"endX"===a&&(r>s?y%f===0:x%f===0)||r>s&&y===e)&&u(g))}))}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,a=this.state,r=a.scaleValues,s=a.startX,i=a.endX,o=this.state[t],l=r.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=r.length)){var d=r[c];"startX"===t&&d>=i||"endX"===t&&d<=s||this.setState(YNe({},t,d),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,a=e.width,r=e.height,s=e.fill,i=e.stroke;return ds.createElement("rect",{stroke:i,fill:s,x:t,y:n,width:a,height:r})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,a=e.width,r=e.height,s=e.data,i=e.children,o=e.padding,l=cs.Children.only(i);return l?ds.cloneElement(l,{x:t,y:n,width:a,height:r,margin:o,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(t,n){var a,r,s=this,i=this.props,o=i.y,l=i.travellerWidth,c=i.height,d=i.traveller,u=i.ariaLabel,f=i.data,m=i.startIndex,p=i.endIndex,h=Math.max(t,this.props.x),g=WNe(WNe({},Iae(this.props,!1)),{},{x:h,y:o,width:l,height:c}),x=u||"Min value: ".concat(null===(a=f[m])||void 0===a?void 0:a.name,", Max value: ").concat(null===(r=f[p])||void 0===r?void 0:r.name);return ds.createElement(Bae,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),s.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,g))}},{key:"renderSlide",value:function(e,t){var n=this.props,a=n.y,r=n.height,s=n.stroke,i=n.travellerWidth,o=Math.min(e,t)+i,l=Math.max(Math.abs(t-e)-i,0);return ds.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:o,y:a,width:l,height:r})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,a=e.y,r=e.height,s=e.travellerWidth,i=e.stroke,o=this.state,l=o.startX,c=o.endX,d={pointerEvents:"none",fill:i};return ds.createElement(Bae,{className:"recharts-brush-texts"},ds.createElement(kfe,BNe({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:a+r/2},d),this.getTextOfTick(t)),ds.createElement(kfe,BNe({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+s+5,y:a+r/2},d),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,a=e.children,r=e.x,s=e.y,i=e.width,o=e.height,l=e.alwaysShowText,c=this.state,d=c.startX,u=c.endX,f=c.isTextActive,m=c.isSlideMoving,p=c.isTravellerMoving,h=c.isTravellerFocused;if(!t||!t.length||!Jne(r)||!Jne(s)||!Jne(i)||!Jne(o)||i<=0||o<=0)return null;var g,x,y,v,b=cb("recharts-brush",n),w=1===ds.Children.count(a),j=(x="none",y=(g="userSelect").replace(/(\w)/,(function(e){return e.toUpperCase()})),(v=zNe.reduce((function(e,t){return ONe(ONe({},e),{},RNe({},t+y,x))}),{}))[g]=x,v);return ds.createElement(Bae,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(d,u),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(u,"endX"),(f||m||p||h||l)&&this.renderText())}}])&&GNe(t.prototype,n),a&&GNe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();YNe(JNe,"displayName","Brush"),YNe(JNe,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ZNe=Gce;var XNe=nie,eCe=Zle,tCe=function(e,t){var n;return ZNe(e,(function(e,a,r){return!(n=t(e,a,r))})),!!n},nCe=K7,aCe=Cde;const rCe=Cr((function(e,t,n){var a=nCe(e)?XNe:tCe;return n&&aCe(e,t,n)&&(t=void 0),a(e,eCe(t))}));var sCe=function(e,t){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===t},iCe=ude;var oCe=function(e,t,n){"__proto__"==t&&iCe?iCe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},lCe=Uce,cCe=Zle;const dCe=Cr((function(e,t){var n={};return t=cCe(t),lCe(e,(function(e,a,r){oCe(n,a,t(e,a,r))})),n}));var uCe=Gce;var fCe=function(e,t){for(var n=-1,a=null==e?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0},mCe=function(e,t){var n=!0;return uCe(e,(function(e,a,r){return n=!!t(e,a,r)})),n},pCe=Zle,hCe=K7,gCe=Cde;const xCe=Cr((function(e,t,n){var a=hCe(e)?fCe:mCe;return n&&gCe(e,t,n)&&(t=void 0),a(e,pCe(t))}));var yCe=["x","y"];function vCe(e){return(vCe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bCe(){return bCe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bCe.apply(this,arguments)}function wCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function jCe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wCe(Object(n),!0).forEach((function(t){NCe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NCe(e,t,n){var a;return a=function(e,t){if("object"!=vCe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=vCe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==vCe(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CCe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SCe(e,t){var n=e.x,a=e.y,r=CCe(e,yCe),s="".concat(n),i=parseInt(s,10),o="".concat(a),l=parseInt(o,10),c="".concat(t.height||r.height),d=parseInt(c,10),u="".concat(t.width||r.width),f=parseInt(u,10);return jCe(jCe(jCe(jCe(jCe({},t),r),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:f,name:t.name,radius:t.radius})}function kCe(e){return ds.createElement(sNe,bCe({shapeType:"rectangle",propTransformer:SCe,activeClassName:"recharts-active-bar"},e))}var MCe,_Ce=["value","background"];function ICe(e){return(ICe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ACe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ECe(){return ECe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ECe.apply(this,arguments)}function LCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function TCe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LCe(Object(n),!0).forEach((function(t){FCe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DCe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,BCe(a.key),a)}}function PCe(e,t,n){return t=RCe(t),function(e,t){if(t&&("object"===ICe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,OCe()?Reflect.construct(t,n||[],RCe(e).constructor):t.apply(e,n))}function OCe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(OCe=function(){return!!e})()}function RCe(e){return(RCe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zCe(e,t){return(zCe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function FCe(e,t,n){return(t=BCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BCe(e){var t=function(e,t){if("object"!=ICe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=ICe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ICe(t)?t:t+""}var UCe=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return FCe(t=PCe(this,e,[].concat(a)),"state",{isAnimationFinished:!1}),FCe(t,"id",eae("recharts-bar-")),FCe(t,"handleAnimationEnd",(function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()})),FCe(t,"handleAnimationStart",(function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()})),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zCe(e,t)}(e,cs.PureComponent),t=e,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],(n=[{key:"renderRectanglesStatically",value:function(e){var t=this,n=this.props,a=n.shape,r=n.dataKey,s=n.activeIndex,i=n.activeBar,o=Iae(this.props,!1);return e&&e.map((function(e,n){var l=n===s,c=l?i:a,d=TCe(TCe(TCe({},o),e),{},{isActive:l,option:c,index:n,dataKey:r,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return ds.createElement(Bae,ECe({className:"recharts-bar-rectangle"},pae(t.props,e,n),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(n)}),ds.createElement(kCe,d))}))}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,n=t.data,a=t.layout,r=t.isAnimationActive,s=t.animationBegin,i=t.animationDuration,o=t.animationEasing,l=t.animationId,c=this.state.prevData;return ds.createElement(pwe,{begin:s,duration:i,isActive:r,easing:o,from:{t:0},to:{t:1},key:"bar-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(t){var r=t.t,s=n.map((function(e,t){var n=c&&c[t];if(n){var s=aae(n.x,e.x),i=aae(n.y,e.y),o=aae(n.width,e.width),l=aae(n.height,e.height);return TCe(TCe({},e),{},{x:s(r),y:i(r),width:o(r),height:l(r)})}if("horizontal"===a){var d=aae(0,e.height)(r);return TCe(TCe({},e),{},{y:e.y+e.height-d,height:d})}var u=aae(0,e.width)(r);return TCe(TCe({},e),{},{width:u})}));return ds.createElement(Bae,null,e.renderRectanglesStatically(s))}))}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,a=this.state.prevData;return!(n&&t&&t.length)||a&&Dge(a,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,n=t.data,a=t.dataKey,r=t.activeIndex,s=Iae(this.props.background,!1);return n.map((function(t,n){t.value;var i=t.background,o=ACe(t,_Ce);if(!i)return null;var l=TCe(TCe(TCe(TCe(TCe({},o),{},{fill:"#eee"},i),s),pae(e.props,t,n)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:a,index:n,className:"recharts-bar-background-rectangle"});return ds.createElement(kCe,ECe({key:"background-bar-".concat(n),option:e.props.background,isActive:n===r},l))}))}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,a=n.data,r=n.xAxis,s=n.yAxis,i=n.layout,o=Cae(n.children,Jxe);if(!o)return null;var l="vertical"===i?a[0].height/2:a[0].width/2,c=function(e,t){var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:cye(e,t)}},d={clipPath:e?"url(#clipPath-".concat(t,")"):null};return ds.createElement(Bae,d,o.map((function(e){return ds.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:a,xAxis:r,yAxis:s,layout:i,offset:l,dataPointFormatter:c})})))}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.data,a=e.className,r=e.xAxis,s=e.yAxis,i=e.left,o=e.top,l=e.width,c=e.height,d=e.isAnimationActive,u=e.background,f=e.id;if(t||!n||!n.length)return null;var m=this.state.isAnimationFinished,p=cb("recharts-bar",a),h=r&&r.allowDataOverflow,g=s&&s.allowDataOverflow,x=h||g,y=vne(f)?this.id:f;return ds.createElement(Bae,{className:p},h||g?ds.createElement("defs",null,ds.createElement("clipPath",{id:"clipPath-".concat(y)},ds.createElement("rect",{x:h?i:i-l/2,y:g?o:o-c/2,width:h?l:2*l,height:g?c:2*c}))):null,ds.createElement(Bae,{className:"recharts-bar-rectangles",clipPath:x?"url(#clipPath-".concat(y,")"):null},u?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(x,y),(!d||m)&&yve.renderCallByParent(this.props,n))}}])&&DCe(t.prototype,n),a&&DCe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();function WCe(e){return(WCe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GCe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$Ce(a.key),a)}}function VCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function HCe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VCe(Object(n),!0).forEach((function(t){qCe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qCe(e,t,n){return(t=$Ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $Ce(e){var t=function(e,t){if("object"!=WCe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=WCe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WCe(t)?t:t+""}MCe=UCe,FCe(UCe,"displayName","Bar"),FCe(UCe,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!tue.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),FCe(UCe,"getComposedData",(function(e){var t=e.props,n=e.item,a=e.barPosition,r=e.bandSize,s=e.xAxis,i=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,f=e.offset,m=function(e,t){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===t)return e[n].position;return null}(a,n);if(!m)return null;var p=t.layout,h=n.type.defaultProps,g=void 0!==h?TCe(TCe({},h),n.props):n.props,x=g.dataKey,y=g.children,v=g.minPointSize,b="horizontal"===p?i:s,w=c?b.scale.domain():null,j=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var a=Math.min(n[0],n[1]),r=Math.max(n[0],n[1]);return a<=0&&r>=0?0:r<0?r:a}return n[0]}({numericAxis:b}),N=Cae(y,Gue),C=u.map((function(e,t){var a,u,f,h,g,y;c?a=function(e,t){if(!t||2!==t.length||!Jne(t[0])||!Jne(t[1]))return e;var n=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!Jne(e[0])||e[0]<n)&&(r[0]=n),(!Jne(e[1])||e[1]>a)&&(r[1]=a),r[0]>a&&(r[0]=a),r[1]<n&&(r[1]=n),r}(c[d+t],w):(a=cye(e,x),Array.isArray(a)||(a=[j,a]));var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,a){if("number"==typeof e)return e;var r="number"==typeof n;return r?e(n,a):(r||Rxe(),t)}}(v,MCe.defaultProps.minPointSize)(a[1],t);if("horizontal"===p){var C,S=[i.scale(a[0]),i.scale(a[1])],k=S[0],M=S[1];u=kye({axis:s,ticks:o,bandSize:r,offset:m.offset,entry:e,index:t}),f=null!==(C=null!=M?M:k)&&void 0!==C?C:void 0,h=m.size;var _=k-M;if(g=Number.isNaN(_)?0:_,y={x:u,y:i.y,width:h,height:i.height},Math.abs(b)>0&&Math.abs(g)<Math.abs(b)){var I=Qne(g||b)*(Math.abs(b)-Math.abs(g));f-=I,g+=I}}else{var A=[s.scale(a[0]),s.scale(a[1])],E=A[0],L=A[1];if(u=E,f=kye({axis:i,ticks:l,bandSize:r,offset:m.offset,entry:e,index:t}),h=L-E,g=m.size,y={x:s.x,y:f,width:s.width,height:g},Math.abs(b)>0&&Math.abs(h)<Math.abs(b))h+=Qne(h||b)*(Math.abs(b)-Math.abs(h))}return TCe(TCe(TCe({},e),{},{x:u,y:f,width:h,height:g,value:c?a:a[1],payload:e,background:y},N&&N[t]&&N[t].props),{},{tooltipPayload:[Tye(n,e)],tooltipPosition:{x:u+h/2,y:f+g/2}})}));return TCe({data:C,layout:p},f)}));var YCe=function(e,t,n,a,r){var s=e.width,i=e.height,o=e.layout,l=e.children,c=Object.keys(t),d={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:i-n.bottom,bottomMirror:i-n.bottom},u=!!Sae(l,UCe);return c.reduce((function(s,i){var l,c,f,m,p,h=t[i],g=h.orientation,x=h.domain,y=h.padding,v=void 0===y?{}:y,b=h.mirror,w=h.reversed,j="".concat(g).concat(b?"Mirror":"");if("number"===h.type&&("gap"===h.padding||"no-gap"===h.padding)){var N=x[1]-x[0],C=1/0,S=h.categoricalDomain.sort(iae);if(S.forEach((function(e,t){t>0&&(C=Math.min((e||0)-(S[t-1]||0),C))})),Number.isFinite(C)){var k=C/N,M="vertical"===h.layout?n.height:n.width;if("gap"===h.padding&&(l=k*M/2),"no-gap"===h.padding){var _=tae(e.barCategoryGap,k*M),I=k*M/2;l=I-_-(I-_)/M*_}}}c="xAxis"===a?[n.left+(v.left||0)+(l||0),n.left+n.width-(v.right||0)-(l||0)]:"yAxis"===a?"horizontal"===o?[n.top+n.height-(v.bottom||0),n.top+(v.top||0)]:[n.top+(v.top||0)+(l||0),n.top+n.height-(v.bottom||0)-(l||0)]:h.range,w&&(c=[c[1],c[0]]);var A=vye(h,r,u),E=A.scale,L=A.realScaleType;E.domain(x).range(c),wye(E);var T=Cye(E,HCe(HCe({},h),{},{realScaleType:L}));"xAxis"===a?(p="top"===g&&!b||"bottom"===g&&b,f=n.left,m=d[j]-p*h.height):"yAxis"===a&&(p="left"===g&&!b||"right"===g&&b,f=d[j]-p*h.width,m=n.top);var D=HCe(HCe(HCe({},h),T),{},{realScaleType:L,x:f,y:m,scale:E,width:"xAxis"===a?n.width:h.width,height:"yAxis"===a?n.height:h.height});return D.bandSize=Eye(D,T),h.hide||"xAxis"!==a?h.hide||(d[j]+=(p?-1:1)*D.width):d[j]+=(p?-1:1)*D.height,HCe(HCe({},s),{},qCe({},i,D))}),{})},QCe=function(e,t){var n=e.x,a=e.y,r=t.x,s=t.y;return{x:Math.min(n,r),y:Math.min(a,s),width:Math.abs(r-n),height:Math.abs(s-a)}},KCe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,a=t.position;if(void 0!==e){if(a)switch(a){case"start":default:return this.scale(e);case"middle":var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+r;case"end":var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}if(n){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],a=t[t.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}],a=[{key:"create",value:function(t){return new e(t)}}],n&&GCe(t.prototype,n),a&&GCe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();qCe(KCe,"EPS",1e-4);var JCe=function(e){var t=Object.keys(e).reduce((function(t,n){return HCe(HCe({},t),{},qCe({},n,KCe.create(e[n])))}),{});return HCe(HCe({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.bandAware,r=n.position;return dCe(e,(function(e,n){return t[n].apply(e,{bandAware:a,position:r})}))},isInRange:function(e){return xCe(e,(function(e,n){return t[n].isInRange(e)}))}})};var ZCe=Zle,XCe=Noe,eSe=Moe;var tSe=function(e){return function(t,n,a){var r=Object(t);if(!XCe(t)){var s=ZCe(n);t=eSe(t),n=function(e){return s(r[e],e,r)}}var i=e(t,n,a);return i>-1?r[s?t[i]:i]:void 0}},nSe=INe;var aSe=Xle,rSe=Zle,sSe=function(e){var t=nSe(e),n=t%1;return t==t?n?t-n:t:0},iSe=Math.max;const oSe=Cr(tSe((function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var r=null==n?0:sSe(n);return r<0&&(r=iSe(a+r,0)),aSe(e,rSe(t),r)})));var lSe=qte((function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}}),(function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")})),cSe=cs.createContext(void 0),dSe=cs.createContext(void 0),uSe=cs.createContext(void 0),fSe=cs.createContext({}),mSe=cs.createContext(void 0),pSe=cs.createContext(0),hSe=cs.createContext(0),gSe=function(e){var t=e.state,n=t.xAxisMap,a=t.yAxisMap,r=t.offset,s=e.clipPathId,i=e.children,o=e.width,l=e.height,c=lSe(r);return ds.createElement(cSe.Provider,{value:n},ds.createElement(dSe.Provider,{value:a},ds.createElement(fSe.Provider,{value:r},ds.createElement(uSe.Provider,{value:c},ds.createElement(mSe.Provider,{value:s},ds.createElement(pSe.Provider,{value:l},ds.createElement(hSe.Provider,{value:o},i)))))))},xSe=function(e){var t=cs.useContext(cSe);null==t&&Rxe();var n=t[e];return null==n&&Rxe(),n},ySe=function(e){var t=cs.useContext(dSe);null==t&&Rxe();var n=t[e];return null==n&&Rxe(),n},vSe=function(){return cs.useContext(hSe)},bSe=function(){return cs.useContext(pSe)};function wSe(e){return(wSe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jSe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ASe(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NSe(e,t,n){return t=SSe(t),function(e,t){if(t&&("object"===wSe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,CSe()?Reflect.construct(t,n||[],SSe(e).constructor):t.apply(e,n))}function CSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(CSe=function(){return!!e})()}function SSe(e){return(SSe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kSe(e,t){return(kSe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function MSe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MSe(Object(n),!0).forEach((function(t){ISe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MSe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ISe(e,t,n){return(t=ASe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ASe(e){var t=function(e,t){if("object"!=wSe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=wSe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==wSe(t)?t:t+""}function ESe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t);else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LSe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LSe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LSe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function TSe(){return TSe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},TSe.apply(this,arguments)}function DSe(e){var t=e.x,n=e.y,a=e.segment,r=e.xAxisId,s=e.yAxisId,i=e.shape,o=e.className,l=e.alwaysShow,c=cs.useContext(mSe),d=xSe(r),u=ySe(s),f=cs.useContext(uSe);if(!c||!f)return null;Uae(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=function(e,t,n,a,r,s,i,o,l){var c=r.x,d=r.y,u=r.width,f=r.height;if(n){var m=l.y,p=e.y.apply(m,{position:s});if(sCe(l,"discard")&&!e.y.isInRange(p))return null;var h=[{x:c+u,y:p},{x:c,y:p}];return"left"===o?h.reverse():h}if(t){var g=l.x,x=e.x.apply(g,{position:s});if(sCe(l,"discard")&&!e.x.isInRange(x))return null;var y=[{x:x,y:d+f},{x:x,y:d}];return"top"===i?y.reverse():y}if(a){var v=l.segment.map((function(t){return e.apply(t,{position:s})}));return sCe(l,"discard")&&rCe(v,(function(t){return!e.isInRange(t)}))?null:v}return null}(JCe({x:d.scale,y:u.scale}),Zne(t),Zne(n),a&&2===a.length,f,e.position,d.orientation,u.orientation,e);if(!m)return null;var p=ESe(m,2),h=p[0],g=h.x,x=h.y,y=p[1],v=y.x,b=y.y,w=_Se(_Se({clipPath:sCe(e,"hidden")?"url(#".concat(c,")"):void 0},Iae(e,!0)),{},{x1:g,y1:x,x2:v,y2:b});return ds.createElement(Bae,{className:cb("recharts-reference-line",o)},function(e,t){return ds.isValidElement(e)?ds.cloneElement(e,t):Mee(e)?e(t):ds.createElement("line",TSe({},t,{className:"recharts-reference-line-line"}))}(i,w),rve.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,a=e.x2,r=e.y2;return QCe({x:t,y:n},{x:a,y:r})}({x1:g,y1:x,x2:v,y2:b})))}var PSe=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),NSe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kSe(e,t)}(e,ds.Component),jSe(e,[{key:"render",value:function(){return ds.createElement(DSe,this.props)}}])}();function OSe(){return OSe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},OSe.apply(this,arguments)}function RSe(e){return(RSe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zSe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function FSe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zSe(Object(n),!0).forEach((function(t){HSe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zSe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BSe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,qSe(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function USe(e,t,n){return t=GSe(t),function(e,t){if(t&&("object"===RSe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,WSe()?Reflect.construct(t,n||[],GSe(e).constructor):t.apply(e,n))}function WSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WSe=function(){return!!e})()}function GSe(e){return(GSe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VSe(e,t){return(VSe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function HSe(e,t,n){return(t=qSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qSe(e){var t=function(e,t){if("object"!=RSe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=RSe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==RSe(t)?t:t+""}ISe(PSe,"displayName","ReferenceLine"),ISe(PSe,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var $Se=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),USe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VSe(e,t)}(e,ds.Component),BSe(e,[{key:"render",value:function(){var t=this.props,n=t.x,a=t.y,r=t.r,s=t.alwaysShow,i=t.clipPathId,o=Zne(n),l=Zne(a);if(Uae(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!o||!l)return null;var c=function(e){var t=e.x,n=e.y,a=e.xAxis,r=e.yAxis,s=JCe({x:a.scale,y:r.scale}),i=s.apply({x:t,y:n},{bandAware:!0});return sCe(e,"discard")&&!s.isInRange(i)?null:i}(this.props);if(!c)return null;var d=c.x,u=c.y,f=this.props,m=f.shape,p=f.className,h=FSe(FSe({clipPath:sCe(this.props,"hidden")?"url(#".concat(i,")"):void 0},Iae(this.props,!0)),{},{cx:d,cy:u});return ds.createElement(Bae,{className:cb("recharts-reference-dot",p)},e.renderDot(m,h),rve.renderCallByParent(this.props,{x:d-r,y:u-r,width:2*r,height:2*r}))}}])}();function YSe(){return YSe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},YSe.apply(this,arguments)}function QSe(e){return(QSe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KSe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function JSe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KSe(Object(n),!0).forEach((function(t){ake(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KSe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZSe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,rke(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function XSe(e,t,n){return t=tke(t),function(e,t){if(t&&("object"===QSe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,eke()?Reflect.construct(t,n||[],tke(e).constructor):t.apply(e,n))}function eke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(eke=function(){return!!e})()}function tke(e){return(tke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nke(e,t){return(nke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ake(e,t,n){return(t=rke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rke(e){var t=function(e,t){if("object"!=QSe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=QSe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==QSe(t)?t:t+""}HSe($Se,"displayName","ReferenceDot"),HSe($Se,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),HSe($Se,"renderDot",(function(e,t){return ds.isValidElement(e)?ds.cloneElement(e,t):Mee(e)?e(t):ds.createElement(Owe,OSe({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))}));var ske=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),XSe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nke(e,t)}(e,ds.Component),ZSe(e,[{key:"render",value:function(){var t=this.props,n=t.x1,a=t.x2,r=t.y1,s=t.y2,i=t.className,o=t.alwaysShow,l=t.clipPathId;Uae(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=Zne(n),d=Zne(a),u=Zne(r),f=Zne(s),m=this.props.shape;if(!(c||d||u||f||m))return null;var p=function(e,t,n,a,r){var s=r.x1,i=r.x2,o=r.y1,l=r.y2,c=r.xAxis,d=r.yAxis;if(!c||!d)return null;var u=JCe({x:c.scale,y:d.scale}),f={x:e?u.x.apply(s,{position:"start"}):u.x.rangeMin,y:n?u.y.apply(o,{position:"start"}):u.y.rangeMin},m={x:t?u.x.apply(i,{position:"end"}):u.x.rangeMax,y:a?u.y.apply(l,{position:"end"}):u.y.rangeMax};return!sCe(r,"discard")||u.isInRange(f)&&u.isInRange(m)?QCe(f,m):null}(c,d,u,f,this.props);if(!p&&!m)return null;var h=sCe(this.props,"hidden")?"url(#".concat(l,")"):void 0;return ds.createElement(Bae,{className:cb("recharts-reference-area",i)},e.renderRect(m,JSe(JSe({clipPath:h},Iae(this.props,!0)),p)),rve.renderCallByParent(this.props,p))}}])}();function ike(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var a=[],r=0;r<e.length;r+=t)a.push(e[r]);return a}function oke(e,t,n){return function(e){var t=e.width,n=e.height,a=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),r=a*Math.PI/180,s=Math.atan(n/t),i=r>s&&r<Math.PI-s?n/Math.sin(r):t/Math.cos(r);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},n)}function lke(e,t,n,a,r){if(e*t<e*a||e*t>e*r)return!1;var s=n();return e*(t-e*s/2-a)>=0&&e*(t+e*s/2-r)<=0}function cke(e){return(cke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function uke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dke(Object(n),!0).forEach((function(t){fke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fke(e,t,n){var a;return a=function(e,t){if("object"!=cke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=cke(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==cke(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mke(e,t,n){var a=e.tick,r=e.ticks,s=e.viewBox,i=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!r||!r.length||!a)return[];if(Jne(l)||tue.isSsr)return function(e,t){return ike(e,t+1)}(r,"number"==typeof l&&Jne(l)?l:0);var f=[],m="top"===o||"bottom"===o?"width":"height",p=d&&"width"===m?Jue(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},h=function(e,a){var r=Mee(c)?c(e.value,a):e.value;return"width"===m?oke(Jue(r,{fontSize:t,letterSpacing:n}),p,u):Jue(r,{fontSize:t,letterSpacing:n})[m]},g=r.length>=2?Qne(r[1].coordinate-r[0].coordinate):1,x=function(e,t,n){var a="width"===n,r=e.x,s=e.y,i=e.width,o=e.height;return 1===t?{start:a?r:s,end:a?r+i:s+o}:{start:a?r+i:s+o,end:a?r:s}}(s,g,m);return"equidistantPreserveStart"===l?function(e,t,n,a,r){for(var s,i=(a||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,f=function(){var t=null==a?void 0:a[c];if(void 0===t)return{v:ike(a,d)};var s,i=c,f=function(){return void 0===s&&(s=n(t,i)),s},m=t.coordinate,p=0===c||lke(e,m,f,u,l);p||(c=0,u=o,d+=1),p&&(u=m+e*(f()/2+r),c+=d)};d<=i.length;)if(s=f())return s.v;return[]}(g,x,h,r,i):(f="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,a,r,s){var i=(a||[]).slice(),o=i.length,l=t.start,c=t.end;if(s){var d=a[o-1],u=n(d,o-1),f=e*(d.coordinate+e*u/2-c);i[o-1]=d=uke(uke({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate}),lke(e,d.tickCoord,(function(){return u}),l,c)&&(c=d.tickCoord-e*(u/2+r),i[o-1]=uke(uke({},d),{},{isShow:!0}))}for(var m=s?o-1:o,p=function(t){var a,s=i[t],o=function(){return void 0===a&&(a=n(s,t)),a};if(0===t){var d=e*(s.coordinate-e*o()/2-l);i[t]=s=uke(uke({},s),{},{tickCoord:d<0?s.coordinate-d*e:s.coordinate})}else i[t]=s=uke(uke({},s),{},{tickCoord:s.coordinate});lke(e,s.tickCoord,o,l,c)&&(l=s.tickCoord+e*(o()/2+r),i[t]=uke(uke({},s),{},{isShow:!0}))},h=0;h<m;h++)p(h);return i}(g,x,h,r,i,"preserveStartEnd"===l):function(e,t,n,a,r){for(var s=(a||[]).slice(),i=s.length,o=t.start,l=t.end,c=function(t){var a,c=s[t],d=function(){return void 0===a&&(a=n(c,t)),a};if(t===i-1){var u=e*(c.coordinate+e*d()/2-l);s[t]=c=uke(uke({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else s[t]=c=uke(uke({},c),{},{tickCoord:c.coordinate});lke(e,c.tickCoord,d,o,l)&&(l=c.tickCoord-e*(d()/2+r),s[t]=uke(uke({},c),{},{isShow:!0}))},d=i-1;d>=0;d--)c(d);return s}(g,x,h,r,i),f.filter((function(e){return e.isShow})))}ake(ske,"displayName","ReferenceArea"),ake(ske,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),ake(ske,"renderRect",(function(e,t){return ds.isValidElement(e)?ds.cloneElement(e,t):Mee(e)?e(t):ds.createElement(kwe,YSe({},t,{className:"recharts-reference-area-rect"}))}));var pke=["viewBox"],hke=["viewBox"],gke=["ticks"];function xke(e){return(xke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yke(){return yke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yke.apply(this,arguments)}function vke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function bke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vke(Object(n),!0).forEach((function(t){Mke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wke(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jke(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_ke(a.key),a)}}function Nke(e,t,n){return t=Ske(t),function(e,t){if(t&&("object"===xke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Cke()?Reflect.construct(t,n||[],Ske(e).constructor):t.apply(e,n))}function Cke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Cke=function(){return!!e})()}function Ske(e){return(Ske=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kke(e,t){return(kke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Mke(e,t,n){return(t=_ke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _ke(e){var t=function(e,t){if("object"!=xke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=xke(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==xke(t)?t:t+""}var Ike=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Nke(this,e,[t])).state={fontSize:"",letterSpacing:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kke(e,t)}(e,cs.Component),t=e,a=[{key:"renderTickItem",value:function(e,t,n){return ds.isValidElement(e)?ds.cloneElement(e,t):Mee(e)?e(t):ds.createElement(kfe,yke({},t,{className:"recharts-cartesian-axis-tick-value"}),n)}}],(n=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,a=wke(e,pke),r=this.props,s=r.viewBox,i=wke(r,hke);return!oae(n,s)||!oae(a,i)||!oae(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,n,a,r,s,i,o=this.props,l=o.x,c=o.y,d=o.width,u=o.height,f=o.orientation,m=o.tickSize,p=o.mirror,h=o.tickMargin,g=p?-1:1,x=e.tickSize||m,y=Jne(e.tickCoord)?e.tickCoord:e.coordinate;switch(f){case"top":t=n=e.coordinate,i=(a=(r=c+ +!p*u)-g*x)-g*h,s=y;break;case"left":a=r=e.coordinate,s=(t=(n=l+ +!p*d)-g*x)-g*h,i=y;break;case"right":a=r=e.coordinate,s=(t=(n=l+ +p*d)+g*x)+g*h,i=y;break;default:t=n=e.coordinate,i=(a=(r=c+ +p*u)+g*x)+g*h,s=y}return{line:{x1:t,y1:a,x2:n,y2:r},tick:{x:s,y:i}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,a=t.mirror;switch(n){case"left":e=a?"start":"end";break;case"right":e=a?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,a="end";switch(t){case"left":case"right":a="middle";break;case"top":a=n?"start":"end";break;default:a=n?"end":"start"}return a}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,n=e.y,a=e.width,r=e.height,s=e.orientation,i=e.mirror,o=e.axisLine,l=bke(bke(bke({},Iae(this.props,!1)),Iae(o,!1)),{},{fill:"none"});if("top"===s||"bottom"===s){var c=+("top"===s&&!i||"bottom"===s&&i);l=bke(bke({},l),{},{x1:t,y1:n+c*r,x2:t+a,y2:n+c*r})}else{var d=+("left"===s&&!i||"right"===s&&i);l=bke(bke({},l),{},{x1:t+d*a,y1:n,x2:t+d*a,y2:n+r})}return ds.createElement("line",yke({},l,{className:cb("recharts-cartesian-axis-line",yne(o,"className"))}))}},{key:"renderTicks",value:function(t,n,a){var r=this,s=this.props,i=s.tickLine,o=s.stroke,l=s.tick,c=s.tickFormatter,d=s.unit,u=mke(bke(bke({},this.props),{},{ticks:t}),n,a),f=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),p=Iae(this.props,!1),h=Iae(l,!1),g=bke(bke({},p),{},{fill:"none"},Iae(i,!1)),x=u.map((function(t,n){var a=r.getTickLineCoord(t),s=a.line,x=a.tick,y=bke(bke(bke(bke({textAnchor:f,verticalAnchor:m},p),{},{stroke:"none",fill:o},h),x),{},{index:n,payload:t,visibleTicksCount:u.length,tickFormatter:c});return ds.createElement(Bae,yke({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},pae(r.props,t,n)),i&&ds.createElement("line",yke({},g,s,{className:cb("recharts-cartesian-axis-tick-line",yne(i,"className"))})),l&&e.renderTickItem(l,y,"".concat(Mee(c)?c(t.value,n):t.value).concat(d||"")))}));return ds.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var e=this,t=this.props,n=t.axisLine,a=t.width,r=t.height,s=t.ticksGenerator,i=t.className;if(t.hide)return null;var o=this.props,l=o.ticks,c=wke(o,gke),d=l;return Mee(s)&&(d=l&&l.length>0?s(this.props):s(c)),a<=0||r<=0||!d||!d.length?null:ds.createElement(Bae,{className:cb("recharts-cartesian-axis",i),ref:function(t){e.layerReference=t}},n&&this.renderAxisLine(),this.renderTicks(d,this.state.fontSize,this.state.letterSpacing),rve.renderCallByParent(this.props))}}])&&jke(t.prototype,n),a&&jke(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();Mke(Ike,"displayName","CartesianAxis"),Mke(Ike,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Ake=["x1","y1","x2","y2","key"],Eke=["offset"];function Lke(e){return(Lke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tke(Object(n),!0).forEach((function(t){Pke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pke(e,t,n){var a;return a=function(e,t){if("object"!=Lke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Lke(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Lke(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oke(){return Oke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Oke.apply(this,arguments)}function Rke(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var zke=function(e){var t=e.fill;if(!t||"none"===t)return null;var n=e.fillOpacity,a=e.x,r=e.y,s=e.width,i=e.height,o=e.ry;return ds.createElement("rect",{x:a,y:r,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Fke(e,t){var n;if(ds.isValidElement(e))n=ds.cloneElement(e,t);else if(Mee(e))n=e(t);else{var a=t.x1,r=t.y1,s=t.x2,i=t.y2,o=t.key,l=Rke(t,Ake),c=Iae(l,!1);c.offset;var d=Rke(c,Eke);n=ds.createElement("line",Oke({},d,{x1:a,y1:r,x2:s,y2:i,fill:"none",key:o}))}return n}function Bke(e){var t=e.x,n=e.width,a=e.horizontal,r=void 0===a||a,s=e.horizontalPoints;if(!r||!s||!s.length)return null;var i=s.map((function(a,s){var i=Dke(Dke({},e),{},{x1:t,y1:a,x2:t+n,y2:a,key:"line-".concat(s),index:s});return Fke(r,i)}));return ds.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function Uke(e){var t=e.y,n=e.height,a=e.vertical,r=void 0===a||a,s=e.verticalPoints;if(!r||!s||!s.length)return null;var i=s.map((function(a,s){var i=Dke(Dke({},e),{},{x1:a,y1:t,x2:a,y2:t+n,key:"line-".concat(s),index:s});return Fke(r,i)}));return ds.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function Wke(e){var t=e.horizontalFill,n=e.fillOpacity,a=e.x,r=e.y,s=e.width,i=e.height,o=e.horizontalPoints,l=e.horizontal;if(!(void 0===l||l)||!t||!t.length)return null;var c=o.map((function(e){return Math.round(e+r-r)})).sort((function(e,t){return e-t}));r!==c[0]&&c.unshift(0);var d=c.map((function(e,o){var l=!c[o+1]?r+i-e:c[o+1]-e;if(l<=0)return null;var d=o%t.length;return ds.createElement("rect",{key:"react-".concat(o),y:e,x:a,height:l,width:s,stroke:"none",fill:t[d],fillOpacity:n,className:"recharts-cartesian-grid-bg"})}));return ds.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Gke(e){var t=e.vertical,n=void 0===t||t,a=e.verticalFill,r=e.fillOpacity,s=e.x,i=e.y,o=e.width,l=e.height,c=e.verticalPoints;if(!n||!a||!a.length)return null;var d=c.map((function(e){return Math.round(e+s-s)})).sort((function(e,t){return e-t}));s!==d[0]&&d.unshift(0);var u=d.map((function(e,t){var n=!d[t+1]?s+o-e:d[t+1]-e;if(n<=0)return null;var c=t%a.length;return ds.createElement("rect",{key:"react-".concat(t),x:e,y:i,width:n,height:l,stroke:"none",fill:a[c],fillOpacity:r,className:"recharts-cartesian-grid-bg"})}));return ds.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var Vke=function(e,t){var n=e.xAxis,a=e.width,r=e.height,s=e.offset;return hye(mke(Dke(Dke(Dke({},Ike.defaultProps),n),{},{ticks:gye(n,!0),viewBox:{x:0,y:0,width:a,height:r}})),s.left,s.left+s.width,t)},Hke=function(e,t){var n=e.yAxis,a=e.width,r=e.height,s=e.offset;return hye(mke(Dke(Dke(Dke({},Ike.defaultProps),n),{},{ticks:gye(n,!0),viewBox:{x:0,y:0,width:a,height:r}})),s.top,s.top+s.height,t)},qke={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function $ke(e){var t,n,a,r,s,i,o,l,c=vSe(),d=bSe(),u=cs.useContext(fSe),f=Dke(Dke({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:qke.stroke,fill:null!==(n=e.fill)&&void 0!==n?n:qke.fill,horizontal:null!==(a=e.horizontal)&&void 0!==a?a:qke.horizontal,horizontalFill:null!==(r=e.horizontalFill)&&void 0!==r?r:qke.horizontalFill,vertical:null!==(s=e.vertical)&&void 0!==s?s:qke.vertical,verticalFill:null!==(i=e.verticalFill)&&void 0!==i?i:qke.verticalFill,x:Jne(e.x)?e.x:u.left,y:Jne(e.y)?e.y:u.top,width:Jne(e.width)?e.width:u.width,height:Jne(e.height)?e.height:u.height}),m=f.x,p=f.y,h=f.width,g=f.height,x=f.syncWithTicks,y=f.horizontalValues,v=f.verticalValues,b=(o=cs.useContext(cSe),nae(o)),w=(l=cs.useContext(dSe),oSe(l,(function(e){return xCe(e.domain,Number.isFinite)}))||nae(l));if(!Jne(h)||h<=0||!Jne(g)||g<=0||!Jne(m)||m!==+m||!Jne(p)||p!==+p)return null;var j=f.verticalCoordinatesGenerator||Vke,N=f.horizontalCoordinatesGenerator||Hke,C=f.horizontalPoints,S=f.verticalPoints;if((!C||!C.length)&&Mee(N)){var k=y&&y.length,M=N({yAxis:w?Dke(Dke({},w),{},{ticks:k?y:w.ticks}):void 0,width:c,height:d,offset:u},!!k||x);Uae(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Lke(M),"]")),Array.isArray(M)&&(C=M)}if((!S||!S.length)&&Mee(j)){var _=v&&v.length,I=j({xAxis:b?Dke(Dke({},b),{},{ticks:_?v:b.ticks}):void 0,width:c,height:d,offset:u},!!_||x);Uae(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Lke(I),"]")),Array.isArray(I)&&(S=I)}return ds.createElement("g",{className:"recharts-cartesian-grid"},ds.createElement(zke,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),ds.createElement(Bke,Oke({},f,{offset:u,horizontalPoints:C,xAxis:b,yAxis:w})),ds.createElement(Uke,Oke({},f,{offset:u,verticalPoints:S,xAxis:b,yAxis:w})),ds.createElement(Wke,Oke({},f,{horizontalPoints:C})),ds.createElement(Gke,Oke({},f,{verticalPoints:S})))}$ke.displayName="CartesianGrid";var Yke=["type","layout","connectNulls","ref"],Qke=["key"];function Kke(e){return(Kke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jke(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zke(){return Zke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zke.apply(this,arguments)}function Xke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function eMe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xke(Object(n),!0).forEach((function(t){lMe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tMe(e){return function(e){if(Array.isArray(e))return nMe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return nMe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nMe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nMe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function aMe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,cMe(a.key),a)}}function rMe(e,t,n){return t=iMe(t),function(e,t){if(t&&("object"===Kke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sMe()?Reflect.construct(t,n||[],iMe(e).constructor):t.apply(e,n))}function sMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sMe=function(){return!!e})()}function iMe(e){return(iMe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oMe(e,t){return(oMe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lMe(e,t,n){return(t=cMe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cMe(e){var t=function(e,t){if("object"!=Kke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Kke(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Kke(t)?t:t+""}var dMe=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return lMe(t=rMe(this,e,[].concat(a)),"state",{isAnimationFinished:!0,totalLength:0}),lMe(t,"generateSimpleStrokeDasharray",(function(e,t){return"".concat(t,"px ").concat(e-t,"px")})),lMe(t,"getStrokeDasharray",(function(n,a,r){var s=r.reduce((function(e,t){return e+t}));if(!s)return t.generateSimpleStrokeDasharray(a,n);for(var i=Math.floor(n/s),o=n%s,l=a-n,c=[],d=0,u=0;d<r.length;u+=r[d],++d)if(u+r[d]>o){c=[].concat(tMe(r.slice(0,d)),[o-u]);break}var f=c.length%2==0?[0,l]:[l];return[].concat(tMe(e.repeat(r,i)),tMe(c),f).map((function(e){return"".concat(e,"px")})).join(", ")})),lMe(t,"id",eae("recharts-line-")),lMe(t,"pathRef",(function(e){t.mainCurve=e})),lMe(t,"handleAnimationEnd",(function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()})),lMe(t,"handleAnimationStart",(function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()})),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oMe(e,t)}(e,cs.PureComponent),t=e,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var n=e.length%2!=0?[].concat(tMe(e),[0]):e,a=[],r=0;r<t;++r)a=[].concat(tMe(a),tMe(n));return a}},{key:"renderDotItem",value:function(e,t){var n;if(ds.isValidElement(e))n=ds.cloneElement(e,t);else if(Mee(e))n=e(t);else{var a=t.key,r=Jke(t,Qke),s=cb("recharts-line-dot","boolean"!=typeof e?e.className:"");n=ds.createElement(Owe,Zke({key:a},r,{className:s}))}return n}}],(n=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(pBe){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,a=n.points,r=n.xAxis,s=n.yAxis,i=n.layout,o=Cae(n.children,Jxe);if(!o)return null;var l=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:cye(e.payload,t)}},c={clipPath:e?"url(#clipPath-".concat(t,")"):null};return ds.createElement(Bae,c,o.map((function(e){return ds.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:a,xAxis:r,yAxis:s,layout:i,dataPointFormatter:l})})))}},{key:"renderDots",value:function(t,n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,s=r.dot,i=r.points,o=r.dataKey,l=Iae(this.props,!1),c=Iae(s,!0),d=i.map((function(t,n){var a=eMe(eMe(eMe({key:"dot-".concat(n),r:3},l),c),{},{index:n,cx:t.x,cy:t.y,value:t.value,dataKey:o,payload:t.payload,points:i});return e.renderDotItem(s,a)})),u={clipPath:t?"url(#clipPath-".concat(n?"":"dots-").concat(a,")"):null};return ds.createElement(Bae,Zke({className:"recharts-line-dots",key:"dots"},u),d)}},{key:"renderCurveStatically",value:function(e,t,n,a){var r=this.props,s=r.type,i=r.layout,o=r.connectNulls;r.ref;var l=Jke(r,Yke),c=eMe(eMe(eMe({},Iae(l,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(n,")"):null,points:e},a),{},{type:s,layout:i,connectNulls:o});return ds.createElement(zve,Zke({},c,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var n=this,a=this.props,r=a.points,s=a.strokeDasharray,i=a.isAnimationActive,o=a.animationBegin,l=a.animationDuration,c=a.animationEasing,d=a.animationId,u=a.animateNewValues,f=a.width,m=a.height,p=this.state,h=p.prevPoints,g=p.totalLength;return ds.createElement(pwe,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(a){var i=a.t;if(h){var o=h.length/r.length,l=r.map((function(e,t){var n=Math.floor(t*o);if(h[n]){var a=h[n],r=aae(a.x,e.x),s=aae(a.y,e.y);return eMe(eMe({},e),{},{x:r(i),y:s(i)})}if(u){var l=aae(2*f,e.x),c=aae(m/2,e.y);return eMe(eMe({},e),{},{x:l(i),y:c(i)})}return eMe(eMe({},e),{},{x:e.x,y:e.y})}));return n.renderCurveStatically(l,e,t)}var c,d=aae(0,g)(i);if(s){var p="".concat(s).split(/[,\s]+/gim).map((function(e){return parseFloat(e)}));c=n.getStrokeDasharray(d,g,p)}else c=n.generateSimpleStrokeDasharray(g,d);return n.renderCurveStatically(r,e,t,{strokeDasharray:c})}))}},{key:"renderCurve",value:function(e,t){var n=this.props,a=n.points,r=n.isAnimationActive,s=this.state,i=s.prevPoints,o=s.totalLength;return r&&a&&a.length&&(!i&&o>0||!Dge(i,a))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(a,e,t)}},{key:"render",value:function(){var e,t=this.props,n=t.hide,a=t.dot,r=t.points,s=t.className,i=t.xAxis,o=t.yAxis,l=t.top,c=t.left,d=t.width,u=t.height,f=t.isAnimationActive,m=t.id;if(n||!r||!r.length)return null;var p=this.state.isAnimationFinished,h=1===r.length,g=cb("recharts-line",s),x=i&&i.allowDataOverflow,y=o&&o.allowDataOverflow,v=x||y,b=vne(m)?this.id:m,w=null!==(e=Iae(a,!1))&&void 0!==e?e:{r:3,strokeWidth:2},j=w.r,N=void 0===j?3:j,C=w.strokeWidth,S=void 0===C?2:C,k=(_ae(a)?a:{}).clipDot,M=void 0===k||k,_=2*N+S;return ds.createElement(Bae,{className:g},x||y?ds.createElement("defs",null,ds.createElement("clipPath",{id:"clipPath-".concat(b)},ds.createElement("rect",{x:x?c:c-d/2,y:y?l:l-u/2,width:x?d:2*d,height:y?u:2*u})),!M&&ds.createElement("clipPath",{id:"clipPath-dots-".concat(b)},ds.createElement("rect",{x:c-_/2,y:l-_/2,width:d+_,height:u+_}))):null,!h&&this.renderCurve(v,b),this.renderErrorBar(v,b),(h||a)&&this.renderDots(v,M,b),(!f||p)&&yve.renderCallByParent(this.props,r))}}])&&aMe(t.prototype,n),a&&aMe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();function uMe(e){return(uMe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fMe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,yMe(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mMe(e,t,n){return t=hMe(t),function(e,t){if(t&&("object"===uMe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pMe()?Reflect.construct(t,n||[],hMe(e).constructor):t.apply(e,n))}function pMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pMe=function(){return!!e})()}function hMe(e){return(hMe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gMe(e,t){return(gMe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xMe(e,t,n){return(t=yMe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yMe(e){var t=function(e,t){if("object"!=uMe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=uMe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==uMe(t)?t:t+""}function vMe(){return vMe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vMe.apply(this,arguments)}function bMe(e){var t=e.xAxisId,n=vSe(),a=bSe(),r=xSe(t);return null==r?null:ds.createElement(Ike,vMe({},r,{className:cb("recharts-".concat(r.axisType," ").concat(r.axisType),r.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(e){return gye(e,!0)}}))}lMe(dMe,"displayName","Line"),lMe(dMe,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!tue.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),lMe(dMe,"getComposedData",(function(e){var t=e.props,n=e.xAxis,a=e.yAxis,r=e.xAxisTicks,s=e.yAxisTicks,i=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,d=t.layout;return eMe({points:l.map((function(e,t){var l=cye(e,i);return"horizontal"===d?{x:Sye({axis:n,ticks:r,bandSize:o,entry:e,index:t}),y:vne(l)?null:a.scale(l),value:l,payload:e}:{x:vne(l)?null:n.scale(l),y:Sye({axis:a,ticks:s,bandSize:o,entry:e,index:t}),value:l,payload:e}})),layout:d},c)}));var wMe=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mMe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gMe(e,t)}(e,ds.Component),fMe(e,[{key:"render",value:function(){return ds.createElement(bMe,this.props)}}])}();function jMe(e){return(jMe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NMe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,IMe(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CMe(e,t,n){return t=kMe(t),function(e,t){if(t&&("object"===jMe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,SMe()?Reflect.construct(t,n||[],kMe(e).constructor):t.apply(e,n))}function SMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(SMe=function(){return!!e})()}function kMe(e){return(kMe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MMe(e,t){return(MMe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _Me(e,t,n){return(t=IMe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IMe(e){var t=function(e,t){if("object"!=jMe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=jMe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==jMe(t)?t:t+""}function AMe(){return AMe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},AMe.apply(this,arguments)}xMe(wMe,"displayName","XAxis"),xMe(wMe,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var EMe=function(e){var t=e.yAxisId,n=vSe(),a=bSe(),r=ySe(t);return null==r?null:ds.createElement(Ike,AMe({},r,{className:cb("recharts-".concat(r.axisType," ").concat(r.axisType),r.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(e){return gye(e,!0)}}))},LMe=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),CMe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MMe(e,t)}(e,ds.Component),NMe(e,[{key:"render",value:function(){return ds.createElement(EMe,this.props)}}])}();function TMe(e){return function(e){if(Array.isArray(e))return DMe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return DMe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DMe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DMe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}_Me(LMe,"displayName","YAxis"),_Me(LMe,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var PMe=function(e,t,n,a,r){var s=Cae(e,PSe),i=Cae(e,$Se),o=[].concat(TMe(s),TMe(i)),l=Cae(e,ske),c="".concat(a,"Id"),d=a[0],u=t;if(o.length&&(u=o.reduce((function(e,t){if(t.props[c]===n&&sCe(t.props,"extendDomain")&&Jne(t.props[d])){var a=t.props[d];return[Math.min(e[0],a),Math.max(e[1],a)]}return e}),u)),l.length){var f="".concat(d,"1"),m="".concat(d,"2");u=l.reduce((function(e,t){if(t.props[c]===n&&sCe(t.props,"extendDomain")&&Jne(t.props[f])&&Jne(t.props[m])){var a=t.props[f],r=t.props[m];return[Math.min(e[0],a,r),Math.max(e[1],a,r)]}return e}),u)}return r&&r.length&&(u=r.reduce((function(e,t){return Jne(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),u)),u},OMe={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,a,s,i){if("function"!=typeof a)throw new TypeError("The listener must be a function");var o=new r(a,s||e,i),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new a:delete e._events[t]}function o(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,a,r=[];if(0===this._eventsCount)return r;for(a in e=this._events)t.call(e,a)&&r.push(n?a.slice(1):a);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=n?n+e:e,a=this._events[t];if(!a)return[];if(a.fn)return[a.fn];for(var r=0,s=a.length,i=new Array(s);r<s;r++)i[r]=a[r].fn;return i},o.prototype.listenerCount=function(e){var t=n?n+e:e,a=this._events[t];return a?a.fn?1:a.length:0},o.prototype.emit=function(e,t,a,r,s,i){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,a),!0;case 4:return d.fn.call(d.context,t,a,r),!0;case 5:return d.fn.call(d.context,t,a,r,s),!0;case 6:return d.fn.call(d.context,t,a,r,s,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var f,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,a);break;case 4:d[c].fn.call(d[c].context,t,a,r);break;default:if(!l)for(f=1,l=new Array(u-1);f<u;f++)l[f-1]=arguments[f];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,a,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||r&&!o.once||a&&o.context!==a||i(this,s);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||r&&!o[l].once||a&&o[l].context!==a)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:i(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new a,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(OMe);var RMe=new(Cr(OMe.exports)),zMe="recharts.syncMouseEvents";function FMe(e){return(FMe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BMe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,WMe(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UMe(e,t,n){return(t=WMe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WMe(e){var t=function(e,t){if("object"!=FMe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=FMe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==FMe(t)?t:t+""}var GMe=function(){return BMe((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),UMe(this,"activeIndex",0),UMe(this,"coordinateList",[]),UMe(this,"layout","horizontal")}),[{key:"setDetails",value:function(e){var t,n=e.coordinateList,a=void 0===n?null:n,r=e.container,s=void 0===r?null:r,i=e.layout,o=void 0===i?null:i,l=e.offset,c=void 0===l?null:l,d=e.mouseHandlerCallback,u=void 0===d?null:d;this.coordinateList=null!==(t=null!=a?a:this.coordinateList)&&void 0!==t?t:[],this.container=null!=s?s:this.container,this.layout=null!=o?o:this.layout,this.offset=null!=c?c:this.offset,this.mouseHandlerCallback=null!=u?u:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),a=n.x,r=n.y,s=n.height,i=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=a+i+o,d=r+this.offset.top+s/2+l;this.mouseHandlerCallback({pageX:c,pageY:d})}}}])}();function VMe(e){var t=e.cx,n=e.cy,a=e.radius,r=e.startAngle,s=e.endAngle;return{points:[Wye(t,n,a,r),Wye(t,n,a,s)],cx:t,cy:n,radius:a,startAngle:r,endAngle:s}}function HMe(e,t,n){var a,r,s,i;if("horizontal"===e)s=a=t.x,r=n.top,i=n.top+n.height;else if("vertical"===e)i=r=t.y,a=n.left,s=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return VMe(t);var o=t.cx,l=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.angle,f=Wye(o,l,c,u),m=Wye(o,l,d,u);a=f.x,r=f.y,s=m.x,i=m.y}return[{x:a,y:r},{x:s,y:i}]}function qMe(e){return(qMe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function YMe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$Me(Object(n),!0).forEach((function(t){QMe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function QMe(e,t,n){var a;return a=function(e,t){if("object"!=qMe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=qMe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==qMe(a)?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KMe(e){var t,n,a,r=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,f=e.layout,m=e.chartName,p=null!==(t=r.props.cursor)&&void 0!==t?t:null===(n=r.type.defaultProps)||void 0===n?void 0:n.cursor;if(!r||!p||!i||!o||"ScatterChart"!==m&&"axis"!==s)return null;var h=zve;if("ScatterChart"===m)a=o,h=Vwe;else if("BarChart"===m)a=function(e,t,n,a){var r=a/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-r:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-r,width:"horizontal"===e?a:n.width-1,height:"horizontal"===e?n.height-1:a}}(f,o,c,u),h=kwe;else if("radial"===f){var g=VMe(o),x=g.cx,y=g.cy,v=g.radius;a={cx:x,cy:y,startAngle:g.startAngle,endAngle:g.endAngle,innerRadius:v,outerRadius:v},h=Mve}else a={points:HMe(f,o,c)},h=zve;var b=YMe(YMe(YMe(YMe({stroke:"#ccc",pointerEvents:"none"},c),a),Iae(p,!1)),{},{payload:l,payloadIndex:d,className:cb("recharts-tooltip-cursor",p.className)});return cs.isValidElement(p)?cs.cloneElement(p,b):cs.createElement(h,b)}var JMe=["item"],ZMe=["children","className","width","height","style","compact","title","desc"];function XMe(e){return(XMe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e_e(){return e_e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},e_e.apply(this,arguments)}function t_e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t);else for(;!(l=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||c_e(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n_e(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function a_e(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,p_e(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function r_e(e,t,n){return t=i_e(t),function(e,t){if(t&&("object"===XMe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s_e()?Reflect.construct(t,n||[],i_e(e).constructor):t.apply(e,n))}function s_e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s_e=function(){return!!e})()}function i_e(e){return(i_e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o_e(e,t){return(o_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l_e(e){return function(e){if(Array.isArray(e))return d_e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c_e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c_e(e,t){if(e){if("string"==typeof e)return d_e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d_e(e,t):void 0}}function d_e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u_e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f_e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u_e(Object(n),!0).forEach((function(t){m_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m_e(e,t,n){return(t=p_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p_e(e){var t=function(e,t){if("object"!=XMe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=XMe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XMe(t)?t:t+""}var h_e={xAxis:["bottom","top"],yAxis:["left","right"]},g_e={width:"100%",height:"100%"},x_e={x:0,y:0};function y_e(e){return e}var v_e=function(e,t){var n=t.graphicalItems,a=t.dataStartIndex,r=t.dataEndIndex,s=(null!=n?n:[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(l_e(e),l_e(n)):e}),[]);return s.length>0?s:e&&e.length&&Jne(a)&&Jne(r)?e.slice(a,r+1):[]};function b_e(e){return"number"===e?[0,"auto"]:void 0}var w_e=function(e,t,n,a){var r=e.graphicalItems,s=e.tooltipAxis,i=v_e(t,e);return n<0||!r||!r.length||n>=i.length?null:r.reduce((function(r,o){var l,c,d=null!==(l=o.props.data)&&void 0!==l?l:t;(d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1)),s.dataKey&&!s.allowDuplicatedCategory)?c=rae(void 0===d?i:d,s.dataKey,a):c=d&&d[n]||i[n];return c?[].concat(l_e(r),[Tye(o,c)]):r}),[])},j_e=function(e,t,n,a){var r=a||{x:e.chartX,y:e.chartY},s=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(r,n),i=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,s=-1,i=null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0;if(i<=1)return 0;if(r&&"angleAxis"===r.axisType&&Math.abs(Math.abs(r.range[1]-r.range[0])-360)<=1e-6)for(var o=r.range,l=0;l<i;l++){var c=l>0?a[l-1].coordinate:a[i-1].coordinate,d=a[l].coordinate,u=l>=i-1?a[0].coordinate:a[l+1].coordinate,f=void 0;if(Qne(d-c)!==Qne(u-d)){var m=[];if(Qne(u-d)===Qne(o[1]-o[0])){f=u;var p=d+o[1]-o[0];m[0]=Math.min(p,(p+c)/2),m[1]=Math.max(p,(p+c)/2)}else{f=c;var h=u+o[1]-o[0];m[0]=Math.min(d,(h+d)/2),m[1]=Math.max(d,(h+d)/2)}var g=[Math.min(d,(f+d)/2),Math.max(d,(f+d)/2)];if(e>g[0]&&e<=g[1]||e>=m[0]&&e<=m[1]){s=a[l].index;break}}else{var x=Math.min(c,u),y=Math.max(c,u);if(e>(x+d)/2&&e<=(y+d)/2){s=a[l].index;break}}}else for(var v=0;v<i;v++)if(0===v&&e<=(n[v].coordinate+n[v+1].coordinate)/2||v>0&&v<i-1&&e>(n[v].coordinate+n[v-1].coordinate)/2&&e<=(n[v].coordinate+n[v+1].coordinate)/2||v===i-1&&e>(n[v].coordinate+n[v-1].coordinate)/2){s=n[v].index;break}return s}(s,i,l,o);if(c>=0&&l){var d=l[c]&&l[c].value,u=w_e(e,t,c,d),f=function(e,t,n,a){var r=t.find((function(e){return e&&e.index===n}));if(r){if("horizontal"===e)return{x:r.coordinate,y:a.y};if("vertical"===e)return{x:a.x,y:r.coordinate};if("centric"===e){var s=r.coordinate,i=a.radius;return f_e(f_e(f_e({},a),Wye(a.cx,a.cy,i,s)),{},{angle:s,radius:i})}var o=r.coordinate,l=a.angle;return f_e(f_e(f_e({},a),Wye(a.cx,a.cy,o,l)),{},{angle:l,radius:o})}return x_e}(n,i,c,r);return{activeTooltipIndex:c,activeLabel:d,activePayload:u,activeCoordinate:f}}return null},N_e=function(e,t){var n=t.axes,a=t.graphicalItems,r=t.axisType,s=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=e.stackOffset,f=pye(c,r);return n.reduce((function(t,n){var m,p=void 0!==n.type.defaultProps?f_e(f_e({},n.type.defaultProps),n.props):n.props,h=p.type,g=p.dataKey,x=p.allowDataOverflow,y=p.allowDuplicatedCategory,v=p.scale,b=p.ticks,w=p.includeHidden,j=p[s];if(t[j])return t;var N,C,S,k=v_e(e.data,{graphicalItems:a.filter((function(e){var t;return(s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s])===j})),dataStartIndex:o,dataEndIndex:l}),M=k.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var a=null==e?void 0:e[0],r=null==e?void 0:e[1];if(a&&r&&Jne(a)&&Jne(r))return!0}return!1})(p.domain,x,h)&&(N=Aye(p.domain,null,x),!f||"number"!==h&&"auto"===v||(S=dye(k,g,"category")));var _=b_e(h);if(!N||0===N.length){var I,A=null!==(I=p.domain)&&void 0!==I?I:_;if(g){if(N=dye(k,g,h),"category"===h&&f){var E=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++){if(n[e[a]])return!0;n[e[a]]=!0}return!1}(N);y&&E?(C=N,N=TNe(0,M)):y||(N=Lye(A,N,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(l_e(e),[t])}),[]))}else if("category"===h)N=y?N.filter((function(e){return""!==e&&!vne(e)})):Lye(A,N,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||vne(t)?e:[].concat(l_e(e),[t])}),[]);else if("number"===h){var L=function(e,t,n,a,r){var s=t.map((function(t){return fye(e,t,n,r,a)})).filter((function(e){return!vne(e)}));return s&&s.length?s.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(k,a.filter((function(e){var t,n,a=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],r="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return a===j&&(w||!r)})),g,r,c);L&&(N=L)}!f||"number"!==h&&"auto"===v||(S=dye(k,g,"category"))}else N=f?TNe(0,M):i&&i[j]&&i[j].hasStack&&"number"===h?"expand"===u?[0,1]:Mye(i[j].stackGroups,o,l):mye(k,a.filter((function(e){var t=s in e.props?e.props[s]:e.type.defaultProps[s],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===j&&(w||!n)})),h,c,!0);if("number"===h)N=PMe(d,N,j,r,b),A&&(N=Aye(A,N,x));else if("category"===h&&A){var T=A;N.every((function(e){return T.indexOf(e)>=0}))&&(N=T)}}return f_e(f_e({},t),{},m_e({},j,f_e(f_e({},p),{},{axisType:r,domain:N,categoricalDomain:S,duplicateDomain:C,originalDomain:null!==(m=p.domain)&&void 0!==m?m:_,isCategorical:f,layout:c})))}),{})},C_e=function(e,t){var n=t.axisType,a=void 0===n?"xAxis":n,r=t.AxisComp,s=t.graphicalItems,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,d="".concat(a,"Id"),u=Cae(c,r),f={};return u&&u.length?f=N_e(e,{axes:u,graphicalItems:s,axisType:a,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l}):s&&s.length&&(f=function(e,t){var n=t.graphicalItems,a=t.Axis,r=t.axisType,s=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=v_e(e.data,{graphicalItems:n,dataStartIndex:o,dataEndIndex:l}),f=u.length,m=pye(c,r),p=-1;return n.reduce((function(e,t){var h,g=(void 0!==t.type.defaultProps?f_e(f_e({},t.type.defaultProps),t.props):t.props)[s],x=b_e("number");return e[g]?e:(p++,m?h=TNe(0,f):i&&i[g]&&i[g].hasStack?(h=Mye(i[g].stackGroups,o,l),h=PMe(d,h,g,r)):(h=Aye(x,mye(u,n.filter((function(e){var t,n,a=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],r="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return a===g&&!r})),"number",c),a.defaultProps.allowDataOverflow),h=PMe(d,h,g,r)),f_e(f_e({},e),{},m_e({},g,f_e(f_e({axisType:r},a.defaultProps),{},{hide:!0,orientation:yne(h_e,"".concat(r,".").concat(p%2),null),domain:h,originalDomain:x,isCategorical:m,layout:c}))))}),{})}(e,{Axis:r,graphicalItems:s,axisType:a,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l})),f},S_e=function(e){var t=e.children,n=e.defaultShowTooltip,a=Sae(t,JNe),r=0,s=0;return e.data&&0!==e.data.length&&(s=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(r=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:r,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},k_e=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},M_e=function(e,t){var n=e.props,a=(e.graphicalItems,e.xAxisMap),r=void 0===a?{}:a,s=e.yAxisMap,i=void 0===s?{}:s,o=n.width,l=n.height,c=n.children,d=n.margin||{},u=Sae(c,JNe),f=Sae(c,Lce),m=Object.keys(i).reduce((function(e,t){var n=i[t],a=n.orientation;return n.mirror||n.hide?e:f_e(f_e({},e),{},m_e({},a,e[a]+n.width))}),{left:d.left||0,right:d.right||0}),p=Object.keys(r).reduce((function(e,t){var n=r[t],a=n.orientation;return n.mirror||n.hide?e:f_e(f_e({},e),{},m_e({},a,yne(e,"".concat(a))+n.height))}),{top:d.top||0,bottom:d.bottom||0}),h=f_e(f_e({},p),m),g=h.bottom;u&&(h.bottom+=u.props.height||JNe.defaultProps.height),f&&t&&(h=function(e,t,n,a){var r=n.children,s=n.width,i=n.margin,o=s-(i.left||0)-(i.right||0),l=nye({children:r,legendWidth:o});if(l){var c=a||{},d=c.width,u=c.height,f=l.align,m=l.verticalAlign,p=l.layout;if(("vertical"===p||"horizontal"===p&&"middle"===m)&&"center"!==f&&Jne(e[f]))return oye(oye({},e),{},lye({},f,e[f]+(d||0)));if(("horizontal"===p||"vertical"===p&&"center"===f)&&"middle"!==m&&Jne(e[m]))return oye(oye({},e),{},lye({},m,e[m]+(u||0)))}return e}(h,0,n,t));var x=o-h.left-h.right,y=l-h.top-h.bottom;return f_e(f_e({brushBottom:g},h),{},{width:Math.max(x,0),height:Math.max(y,0)})},__e=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},I_e=function(e){var t=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,r=void 0===a?"axis":a,s=e.validateTooltipEventTypes,i=void 0===s?["axis"]:s,o=e.axisComponents,l=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,u=function(e,t){var n=t.graphicalItems,a=t.stackGroups,r=t.offset,s=t.updateId,i=t.dataStartIndex,l=t.dataEndIndex,c=e.barSize,d=e.layout,u=e.barGap,f=e.barCategoryGap,m=e.maxBarSize,p=k_e(d),h=p.numericAxisName,g=p.cateAxisName,x=function(e){return!(!e||!e.length)&&e.some((function(e){var t=bae(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),y=[];return n.forEach((function(n,p){var v=v_e(e.data,{graphicalItems:[n],dataStartIndex:i,dataEndIndex:l}),b=void 0!==n.type.defaultProps?f_e(f_e({},n.type.defaultProps),n.props):n.props,w=b.dataKey,j=b.maxBarSize,N=b["".concat(h,"Id")],C=b["".concat(g,"Id")],S=o.reduce((function(e,n){var a=t["".concat(n.axisType,"Map")],r=b["".concat(n.axisType,"Id")];a&&a[r]||"zAxis"===n.axisType||Rxe();var s=a[r];return f_e(f_e({},e),{},m_e(m_e({},n.axisType,s),"".concat(n.axisType,"Ticks"),gye(s)))}),{}),k=S[g],M=S["".concat(g,"Ticks")],_=a&&a[N]&&a[N].hasStack&&function(e,t){var n,a=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?oye(oye({},e.type.defaultProps),e.props):e.props).stackId;if(Zne(a)){var r=t[a];if(r){var s=r.items.indexOf(e);return s>=0?r.stackedData[s]:null}}return null}(n,a[N].stackGroups),I=bae(n.type).indexOf("Bar")>=0,A=Eye(k,M),E=[],L=x&&function(e){var t=e.barSize,n=e.totalSize,a=e.stackGroups,r=void 0===a?{}:a;if(!r)return{};for(var s={},i=Object.keys(r),o=0,l=i.length;o<l;o++)for(var c=r[i[o]].stackGroups,d=Object.keys(c),u=0,f=d.length;u<f;u++){var m=c[d[u]],p=m.items,h=m.cateAxisId,g=p.filter((function(e){return bae(e.type).indexOf("Bar")>=0}));if(g&&g.length){var x=g[0].type.defaultProps,y=void 0!==x?oye(oye({},x),g[0].props):g[0].props,v=y.barSize,b=y[h];s[b]||(s[b]=[]);var w=vne(v)?t:v;s[b].push({item:g[0],stackList:g.slice(1),barSize:vne(w)?void 0:tae(w,n,0)})}}return s}({barSize:c,stackGroups:a,totalSize:__e(S,g)});if(I){var T,D,P=vne(j)?m:j,O=null!==(T=null!==(D=Eye(k,M,!0))&&void 0!==D?D:P)&&void 0!==T?T:0;E=function(e){var t=e.barGap,n=e.barCategoryGap,a=e.bandSize,r=e.sizeList,s=void 0===r?[]:r,i=e.maxBarSize,o=s.length;if(o<1)return null;var l,c=tae(t,a,0,!0),d=[];if(s[0].barSize===+s[0].barSize){var u=!1,f=a/o,m=s.reduce((function(e,t){return e+t.barSize||0}),0);(m+=(o-1)*c)>=a&&(m-=(o-1)*c,c=0),m>=a&&f>0&&(u=!0,m=o*(f*=.9));var p={offset:((a-m)/2|0)-c,size:0};l=s.reduce((function(e,t){var n={item:t.item,position:{offset:p.offset+p.size+c,size:u?f:t.barSize}},a=[].concat(rye(e),[n]);return p=a[a.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){a.push({item:e,position:p})})),a}),d)}else{var h=tae(n,a,0,!0);a-2*h-(o-1)*c<=0&&(c=0);var g=(a-2*h-(o-1)*c)/o;g>1&&(g>>=0);var x=i===+i?Math.min(g,i):g;l=s.reduce((function(e,t,n){var a=[].concat(rye(e),[{item:t.item,position:{offset:h+(g+c)*n+(g-x)/2,size:x}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){a.push({item:e,position:a[a.length-1].position})})),a}),d)}return l}({barGap:u,barCategoryGap:f,bandSize:O!==A?O:A,sizeList:L[C],maxBarSize:P}),O!==A&&(E=E.map((function(e){return f_e(f_e({},e),{},{position:f_e(f_e({},e.position),{},{offset:e.position.offset-O/2})})})))}var R,z,F=n&&n.type&&n.type.getComposedData;F&&y.push({props:f_e(f_e({},F(f_e(f_e({},S),{},{displayedData:v,props:e,dataKey:w,item:n,bandSize:A,barPosition:E,offset:r,stackedData:_,layout:d,dataStartIndex:i,dataEndIndex:l}))),{},m_e(m_e(m_e({key:n.key||"item-".concat(p)},h,S[h]),g,S[g]),"animationId",s)),childIndex:(R=n,z=e.children,Nae(z).indexOf(R)),item:n})})),y},f=function(e,a){var r=e.props,s=e.dataStartIndex,i=e.dataEndIndex,l=e.updateId;if(!kae({props:r}))return null;var d=r.children,f=r.layout,m=r.stackOffset,p=r.data,h=r.reverseStackOrder,g=k_e(f),x=g.numericAxisName,y=g.cateAxisName,v=Cae(d,n),b=function(e,t,n,a,r,s){if(!e)return null;var i=(s?t.reverse():t).reduce((function(e,t){var r,s=null!==(r=t.type)&&void 0!==r&&r.defaultProps?oye(oye({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(s.hide)return e;var o=s[n],l=e[o]||{hasStack:!1,stackGroups:{}};if(Zne(i)){var c=l.stackGroups[i]||{numericAxisId:n,cateAxisId:a,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[i]=c}else l.stackGroups[eae("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[t]};return oye(oye({},e),{},lye({},o,l))}),{});return Object.keys(i).reduce((function(t,s){var o=i[s];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce((function(t,s){var i=o.stackGroups[s];return oye(oye({},t),{},lye({},s,{numericAxisId:n,cateAxisId:a,items:i.items,stackedData:Nye(e,i.items,r)}))}),{})),oye(oye({},t),{},lye({},s,o))}),{})}(p,v,"".concat(x,"Id"),"".concat(y,"Id"),m,h),w=o.reduce((function(e,t){var n="".concat(t.axisType,"Map");return f_e(f_e({},e),{},m_e({},n,C_e(r,f_e(f_e({},t),{},{graphicalItems:v,stackGroups:t.axisType===x&&b,dataStartIndex:s,dataEndIndex:i}))))}),{}),j=M_e(f_e(f_e({},w),{},{props:r,graphicalItems:v}),null==a?void 0:a.legendBBox);Object.keys(w).forEach((function(e){w[e]=c(r,w[e],j,e.replace("Map",""),t)}));var N,C,S=w["".concat(y,"Map")],k=(N=nae(S),{tooltipTicks:C=gye(N,!1,!0),orderedTooltipTicks:_de(C,(function(e){return e.coordinate})),tooltipAxis:N,tooltipAxisBandSize:Eye(N,C)}),M=u(r,f_e(f_e({},w),{},{dataStartIndex:s,dataEndIndex:i,updateId:l,graphicalItems:v,stackGroups:b,offset:j}));return f_e(f_e({formattedGraphicalItems:M,graphicalItems:v,offset:j,stackGroups:b},k),w)},m=function(){function e(n){var a,r,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m_e(s=r_e(this,e,[n]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),m_e(s,"accessibilityManager",new GMe),m_e(s,"handleLegendBBoxUpdate",(function(e){if(e){var t=s.state,n=t.dataStartIndex,a=t.dataEndIndex,r=t.updateId;s.setState(f_e({legendBBox:e},f({props:s.props,dataStartIndex:n,dataEndIndex:a,updateId:r},f_e(f_e({},s.state),{},{legendBBox:e}))))}})),m_e(s,"handleReceiveSyncEvent",(function(e,t,n){if(s.props.syncId===e){if(n===s.eventEmitterSymbol&&"function"!=typeof s.props.syncMethod)return;s.applySyncEvent(t)}})),m_e(s,"handleBrushChange",(function(e){var t=e.startIndex,n=e.endIndex;if(t!==s.state.dataStartIndex||n!==s.state.dataEndIndex){var a=s.state.updateId;s.setState((function(){return f_e({dataStartIndex:t,dataEndIndex:n},f({props:s.props,dataStartIndex:t,dataEndIndex:n,updateId:a},s.state))})),s.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}})),m_e(s,"handleMouseEnter",(function(e){var t=s.getMouseInfo(e);if(t){var n=f_e(f_e({},t),{},{isTooltipActive:!0});s.setState(n),s.triggerSyncEvent(n);var a=s.props.onMouseEnter;Mee(a)&&a(n,e)}})),m_e(s,"triggeredAfterMouseMove",(function(e){var t=s.getMouseInfo(e),n=t?f_e(f_e({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};s.setState(n),s.triggerSyncEvent(n);var a=s.props.onMouseMove;Mee(a)&&a(n,e)})),m_e(s,"handleItemMouseEnter",(function(e){s.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))})),m_e(s,"handleItemMouseLeave",(function(){s.setState((function(){return{isTooltipActive:!1}}))})),m_e(s,"handleMouseMove",(function(e){e.persist(),s.throttleTriggeredAfterMouseMove(e)})),m_e(s,"handleMouseLeave",(function(e){s.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};s.setState(t),s.triggerSyncEvent(t);var n=s.props.onMouseLeave;Mee(n)&&n(t,e)})),m_e(s,"handleOuterEvent",(function(e){var t,n=function(e){var t=e&&e.type;return t&&vae[t]?vae[t]:null}(e),a=yne(s.props,"".concat(n));n&&Mee(a)&&a(null!==(t=/.*touch.*/i.test(n)?s.getMouseInfo(e.changedTouches[0]):s.getMouseInfo(e))&&void 0!==t?t:{},e)})),m_e(s,"handleClick",(function(e){var t=s.getMouseInfo(e);if(t){var n=f_e(f_e({},t),{},{isTooltipActive:!0});s.setState(n),s.triggerSyncEvent(n);var a=s.props.onClick;Mee(a)&&a(n,e)}})),m_e(s,"handleMouseDown",(function(e){var t=s.props.onMouseDown;Mee(t)&&t(s.getMouseInfo(e),e)})),m_e(s,"handleMouseUp",(function(e){var t=s.props.onMouseUp;Mee(t)&&t(s.getMouseInfo(e),e)})),m_e(s,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.throttleTriggeredAfterMouseMove(e.changedTouches[0])})),m_e(s,"handleTouchStart",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseDown(e.changedTouches[0])})),m_e(s,"handleTouchEnd",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseUp(e.changedTouches[0])})),m_e(s,"handleDoubleClick",(function(e){var t=s.props.onDoubleClick;Mee(t)&&t(s.getMouseInfo(e),e)})),m_e(s,"handleContextMenu",(function(e){var t=s.props.onContextMenu;Mee(t)&&t(s.getMouseInfo(e),e)})),m_e(s,"triggerSyncEvent",(function(e){void 0!==s.props.syncId&&RMe.emit(zMe,s.props.syncId,e,s.eventEmitterSymbol)})),m_e(s,"applySyncEvent",(function(e){var t=s.props,n=t.layout,a=t.syncMethod,r=s.state.updateId,i=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)s.setState(f_e({dataStartIndex:i,dataEndIndex:o},f({props:s.props,dataStartIndex:i,dataEndIndex:o,updateId:r},s.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,d=e.activeTooltipIndex,u=s.state,m=u.offset,p=u.tooltipTicks;if(!m)return;if("function"==typeof a)d=a(p,e);else if("value"===a){d=-1;for(var h=0;h<p.length;h++)if(p[h].value===e.activeLabel){d=h;break}}var g=f_e(f_e({},m),{},{x:m.left,y:m.top}),x=Math.min(l,g.x+g.width),y=Math.min(c,g.y+g.height),v=p[d]&&p[d].value,b=w_e(s.state,s.props.data,d),w=p[d]?{x:"horizontal"===n?p[d].coordinate:x,y:"horizontal"===n?y:p[d].coordinate}:x_e;s.setState(f_e(f_e({},e),{},{activeLabel:v,activeCoordinate:w,activePayload:b,activeTooltipIndex:d}))}else s.setState(e)})),m_e(s,"renderCursor",(function(e){var n,a=s.state,r=a.isTooltipActive,i=a.activeCoordinate,o=a.activePayload,l=a.offset,c=a.activeTooltipIndex,d=a.tooltipAxisBandSize,u=s.getTooltipEventType(),f=null!==(n=e.props.active)&&void 0!==n?n:r,m=s.props.layout,p=e.key||"_recharts-cursor";return ds.createElement(KMe,{key:p,activeCoordinate:i,activePayload:o,activeTooltipIndex:c,chartName:t,element:e,isActive:f,layout:m,offset:l,tooltipAxisBandSize:d,tooltipEventType:u})})),m_e(s,"renderPolarAxis",(function(e,t,n){var a=yne(e,"type.axisType"),r=yne(s.state,"".concat(a,"Map")),i=e.type.defaultProps,o=void 0!==i?f_e(f_e({},i),e.props):e.props,l=r&&r[o["".concat(a,"Id")]];return cs.cloneElement(e,f_e(f_e({},l),{},{className:cb(a,l.className),key:e.key||"".concat(t,"-").concat(n),ticks:gye(l,!0)}))})),m_e(s,"renderPolarGrid",(function(e){var t=e.props,n=t.radialLines,a=t.polarAngles,r=t.polarRadius,i=s.state,o=i.radiusAxisMap,l=i.angleAxisMap,c=nae(o),d=nae(l),u=d.cx,f=d.cy,m=d.innerRadius,p=d.outerRadius;return cs.cloneElement(e,{polarAngles:Array.isArray(a)?a:gye(d,!0).map((function(e){return e.coordinate})),polarRadius:Array.isArray(r)?r:gye(c,!0).map((function(e){return e.coordinate})),cx:u,cy:f,innerRadius:m,outerRadius:p,key:e.key||"polar-grid",radialLines:n})})),m_e(s,"renderLegend",(function(){var e=s.state.formattedGraphicalItems,t=s.props,n=t.children,a=t.width,r=t.height,i=s.props.margin||{},o=a-(i.left||0)-(i.right||0),c=nye({children:n,formattedGraphicalItems:e,legendWidth:o,legendContent:l});if(!c)return null;var d=c.item,u=n_e(c,JMe);return cs.cloneElement(d,f_e(f_e({},u),{},{chartWidth:a,chartHeight:r,margin:i,onBBoxUpdate:s.handleLegendBBoxUpdate}))})),m_e(s,"renderTooltip",(function(){var e,t=s.props,n=t.children,a=t.accessibilityLayer,r=Sae(n,mue);if(!r)return null;var i=s.state,o=i.isTooltipActive,l=i.activeCoordinate,c=i.activePayload,d=i.activeLabel,u=i.offset,f=null!==(e=r.props.active)&&void 0!==e?e:o;return cs.cloneElement(r,{viewBox:f_e(f_e({},u),{},{x:u.left,y:u.top}),active:f,label:d,payload:f?c:[],coordinate:l,accessibilityLayer:a})})),m_e(s,"renderBrush",(function(e){var t=s.props,n=t.margin,a=t.data,r=s.state,i=r.offset,o=r.dataStartIndex,l=r.dataEndIndex,c=r.updateId;return cs.cloneElement(e,{key:e.key||"_recharts-brush",onChange:yye(s.handleBrushChange,e.props.onChange),data:a,x:Jne(e.props.x)?e.props.x:i.left,y:Jne(e.props.y)?e.props.y:i.top+i.height+i.brushBottom-(n.bottom||0),width:Jne(e.props.width)?e.props.width:i.width,startIndex:o,endIndex:l,updateId:"brush-".concat(c)})})),m_e(s,"renderReferenceElement",(function(e,t,n){if(!e)return null;var a=s.clipPathId,r=s.state,i=r.xAxisMap,o=r.yAxisMap,l=r.offset,c=e.type.defaultProps||{},d=e.props,u=d.xAxisId,f=void 0===u?c.xAxisId:u,m=d.yAxisId,p=void 0===m?c.yAxisId:m;return cs.cloneElement(e,{key:e.key||"".concat(t,"-").concat(n),xAxis:i[f],yAxis:o[p],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:a})})),m_e(s,"renderActivePoints",(function(t){var n=t.item,a=t.activePoint,r=t.basePoint,s=t.childIndex,i=t.isRange,o=[],l=n.props.key,c=void 0!==n.item.type.defaultProps?f_e(f_e({},n.item.type.defaultProps),n.item.props):n.item.props,d=c.activeDot,u=f_e(f_e({index:s,dataKey:c.dataKey,cx:a.x,cy:a.y,r:4,fill:uye(n.item),strokeWidth:2,stroke:"#fff",payload:a.payload,value:a.value},Iae(d,!1)),mae(d));return o.push(e.renderActiveDot(d,u,"".concat(l,"-activePoint-").concat(s))),r?o.push(e.renderActiveDot(d,f_e(f_e({},u),{},{cx:r.x,cy:r.y}),"".concat(l,"-basePoint-").concat(s))):i&&o.push(null),o})),m_e(s,"renderGraphicChild",(function(e,t,n){var a=s.filterFormatItem(e,t,n);if(!a)return null;var r=s.getTooltipEventType(),i=s.state,o=i.isTooltipActive,l=i.tooltipAxis,c=i.activeTooltipIndex,d=i.activeLabel,u=Sae(s.props.children,mue),f=a.props,m=f.points,p=f.isRange,h=f.baseLine,g=void 0!==a.item.type.defaultProps?f_e(f_e({},a.item.type.defaultProps),a.item.props):a.item.props,x=g.activeDot,y=g.hide,v=g.activeBar,b=g.activeShape,w=Boolean(!y&&o&&u&&(x||v||b)),j={};"axis"!==r&&u&&"click"===u.props.trigger?j={onClick:yye(s.handleItemMouseEnter,e.props.onClick)}:"axis"!==r&&(j={onMouseLeave:yye(s.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:yye(s.handleItemMouseEnter,e.props.onMouseEnter)});var N=cs.cloneElement(e,f_e(f_e({},a.props),j));if(w){if(!(c>=0)){var C,S=(null!==(C=s.getItemByXY(s.state.activeCoordinate))&&void 0!==C?C:{graphicalItem:N}).graphicalItem,k=S.item,M=void 0===k?e:k,_=S.childIndex,I=f_e(f_e(f_e({},a.props),j),{},{activeIndex:_});return[cs.cloneElement(M,I),null,null]}var A,E;if(l.dataKey&&!l.allowDuplicatedCategory){var L="function"==typeof l.dataKey?function(e){return"function"==typeof l.dataKey?l.dataKey(e.payload):null}:"payload.".concat(l.dataKey.toString());A=rae(m,L,d),E=p&&h&&rae(h,L,d)}else A=null==m?void 0:m[c],E=p&&h&&h[c];if(b||v){var T=void 0!==e.props.activeIndex?e.props.activeIndex:c;return[cs.cloneElement(e,f_e(f_e(f_e({},a.props),j),{},{activeIndex:T})),null,null]}if(!vne(A))return[N].concat(l_e(s.renderActivePoints({item:a,activePoint:A,basePoint:E,childIndex:c,isRange:p})))}return p?[N,null,null]:[N,null]})),m_e(s,"renderCustomized",(function(e,t,n){return cs.cloneElement(e,f_e(f_e({key:"recharts-customized-".concat(n)},s.props),s.state))})),m_e(s,"renderMap",{CartesianGrid:{handler:y_e,once:!0},ReferenceArea:{handler:s.renderReferenceElement},ReferenceLine:{handler:y_e},ReferenceDot:{handler:s.renderReferenceElement},XAxis:{handler:y_e},YAxis:{handler:y_e},Brush:{handler:s.renderBrush,once:!0},Bar:{handler:s.renderGraphicChild},Line:{handler:s.renderGraphicChild},Area:{handler:s.renderGraphicChild},Radar:{handler:s.renderGraphicChild},RadialBar:{handler:s.renderGraphicChild},Scatter:{handler:s.renderGraphicChild},Pie:{handler:s.renderGraphicChild},Funnel:{handler:s.renderGraphicChild},Tooltip:{handler:s.renderCursor,once:!0},PolarGrid:{handler:s.renderPolarGrid,once:!0},PolarAngleAxis:{handler:s.renderPolarAxis},PolarRadiusAxis:{handler:s.renderPolarAxis},Customized:{handler:s.renderCustomized}}),s.clipPathId="".concat(null!==(a=n.id)&&void 0!==a?a:eae("recharts"),"-clip"),s.throttleTriggeredAfterMouseMove=Pue(s.triggeredAfterMouseMove,null!==(r=n.throttleDelay)&&void 0!==r?r:1e3/60),s.state={},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o_e(e,t)}(e,cs.Component),a_e(e,[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,a=e.height,r=e.layout,s=Sae(t,mue);if(s){var i=s.props.defaultIndex;if(!("number"!=typeof i||i<0||i>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[i]&&this.state.tooltipTicks[i].value,l=w_e(this.state,n,i,o),c=this.state.tooltipTicks[i].coordinate,d=(this.state.offset.top+a)/2,u="horizontal"===r?{x:c,y:d}:{y:c,x:d},f=this.state.formattedGraphicalItems.find((function(e){return"Scatter"===e.item.type.name}));f&&(u=f_e(f_e({},u),f.props.points[i].tooltipPosition),l=f.props.points[i].tooltipPayload);var m={activeTooltipIndex:i,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:u};this.setState(m),this.renderCursor(s),this.accessibilityManager.setIndex(i)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){if(!this.props.accessibilityLayer)return null;var n,a;(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin)&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(a=this.props.margin.top)&&void 0!==a?a:0}});return null}},{key:"componentDidUpdate",value:function(e){Aae([Sae(e.children,mue)],[Sae(this.props.children,mue)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=Sae(this.props.children,mue);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return i.indexOf(t)>=0?t:r}return r}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,a=n.getBoundingClientRect(),r={top:(t=a).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},s={chartX:Math.round(e.pageX-r.left),chartY:Math.round(e.pageY-r.top)},i=a.width/n.offsetWidth||1,o=this.inRange(s.chartX,s.chartY,i);if(!o)return null;var l=this.state,c=l.xAxisMap,d=l.yAxisMap,u=this.getTooltipEventType(),f=j_e(this.state,this.props.data,this.props.layout,o);if("axis"!==u&&c&&d){var m=nae(c).scale,p=nae(d).scale,h=m&&m.invert?m.invert(s.chartX):null,g=p&&p.invert?p.invert(s.chartY):null;return f_e(f_e({},s),{},{xValue:h,yValue:g},f)}return f?f_e(f_e({},s),f):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=this.props.layout,r=e/n,s=t/n;if("horizontal"===a||"vertical"===a){var i=this.state.offset;return r>=i.left&&r<=i.left+i.width&&s>=i.top&&s<=i.top+i.height?{x:r,y:s}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var d=nae(l);return qye({x:r,y:s},d)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=Sae(e,mue),a={};return n&&"axis"===t&&(a="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),f_e(f_e({},mae(this.props,this.handleOuterEvent)),a)}},{key:"addListener",value:function(){RMe.on(zMe,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){RMe.removeListener(zMe,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var a=this.state.formattedGraphicalItems,r=0,s=a.length;r<s;r++){var i=a[r];if(i.item===e||i.props.key===e.key||t===bae(i.item.type)&&n===i.childIndex)return i}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,a=t.top,r=t.height,s=t.width;return ds.createElement("defs",null,ds.createElement("clipPath",{id:e},ds.createElement("rect",{x:n,y:a,height:r,width:s})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=t_e(t,2),a=n[0],r=n[1];return f_e(f_e({},e),{},m_e({},a,r.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=t_e(t,2),a=n[0],r=n[1];return f_e(f_e({},e),{},m_e({},a,r.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,a=t.activeItem;if(n&&n.length)for(var r=0,s=n.length;r<s;r++){var i=n[r],o=i.props,l=i.item,c=void 0!==l.type.defaultProps?f_e(f_e({},l.type.defaultProps),l.props):l.props,d=bae(l.type);if("Bar"===d){var u=(o.data||[]).find((function(t){return Cwe(e,t)}));if(u)return{graphicalItem:i,payload:u}}else if("RadialBar"===d){var f=(o.data||[]).find((function(t){return qye(e,t)}));if(f)return{graphicalItem:i,payload:f}}else if(iNe(i,a)||oNe(i,a)||lNe(i,a)){var m=fNe({graphicalItem:i,activeTooltipItem:a,itemData:c.data}),p=void 0===c.activeIndex?m:c.activeIndex;return{graphicalItem:f_e(f_e({},i),{},{childIndex:p}),payload:lNe(i,a)?c.data[m]:i.props.data[m]}}}return null}},{key:"render",value:function(){var e=this;if(!kae(this))return null;var t,n,a=this.props,r=a.children,s=a.className,i=a.width,o=a.height,l=a.style,c=a.compact,d=a.title,u=a.desc,f=n_e(a,ZMe),m=Iae(f,!1);if(c)return ds.createElement(gSe,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ds.createElement(Oae,e_e({},m,{width:i,height:o,title:d,desc:u}),this.renderClipPath(),Lae(r,this.renderMap)));this.props.accessibilityLayer&&(m.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,m.role=null!==(n=this.props.role)&&void 0!==n?n:"application",m.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},m.onFocus=function(){e.accessibilityManager.focus()});var p=this.parseEventsOfWrapper();return ds.createElement(gSe,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ds.createElement("div",e_e({className:cb("recharts-wrapper",s),style:f_e({position:"relative",cursor:"default",width:i,height:o},l)},p,{ref:function(t){e.container=t}}),ds.createElement(Oae,e_e({},m,{width:i,height:o,title:d,desc:u,style:g_e}),this.renderClipPath(),Lae(r,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}();m_e(m,"displayName",t),m_e(m,"defaultProps",f_e({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),m_e(m,"getDerivedStateFromProps",(function(e,t){var n=e.dataKey,a=e.data,r=e.children,s=e.width,i=e.height,o=e.layout,l=e.stackOffset,c=e.margin,d=t.dataStartIndex,u=t.dataEndIndex;if(void 0===t.updateId){var m=S_e(e);return f_e(f_e(f_e({},m),{},{updateId:0},f(f_e(f_e({props:e},m),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:a,prevWidth:s,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:r})}if(n!==t.prevDataKey||a!==t.prevData||s!==t.prevWidth||i!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!oae(c,t.prevMargin)){var p=S_e(e),h={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=f_e(f_e({},j_e(t,a,o)),{},{updateId:t.updateId+1}),x=f_e(f_e(f_e({},p),h),g);return f_e(f_e(f_e({},x),f(f_e({props:e},x),t)),{},{prevDataKey:n,prevData:a,prevWidth:s,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:r})}if(!Aae(r,t.prevChildren)){var y,v,b,w,j=Sae(r,JNe),N=j&&null!==(y=null===(v=j.props)||void 0===v?void 0:v.startIndex)&&void 0!==y?y:d,C=j&&null!==(b=null===(w=j.props)||void 0===w?void 0:w.endIndex)&&void 0!==b?b:u,S=N!==d||C!==u,k=!vne(a)&&!S?t.updateId:t.updateId+1;return f_e(f_e({updateId:k},f(f_e(f_e({props:e},t),{},{updateId:k,dataStartIndex:N,dataEndIndex:C}),t)),{},{prevChildren:r,dataStartIndex:N,dataEndIndex:C})}return null})),m_e(m,"renderActiveDot",(function(e,t,n){var a;return a=cs.isValidElement(e)?cs.cloneElement(e,t):Mee(e)?e(t):ds.createElement(Owe,t),ds.createElement(Bae,{className:"recharts-active-dot",key:n},a)}));var p=cs.forwardRef((function(e,t){return ds.createElement(m,e_e({},e,{ref:t}))}));return p.displayName=m.displayName,p},A_e=I_e({chartName:"LineChart",GraphicalChild:dMe,axisComponents:[{axisType:"xAxis",AxisComp:wMe},{axisType:"yAxis",AxisComp:LMe}],formatAxisMap:YCe}),E_e=I_e({chartName:"PieChart",GraphicalChild:CNe,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:kje},{axisType:"radiusAxis",AxisComp:mje}],formatAxisMap:function(e,t,n,a,r){var s=e.width,i=e.height,o=e.startAngle,l=e.endAngle,c=tae(e.cx,s,s/2),d=tae(e.cy,i,i/2),u=Gye(s,i,n),f=tae(e.innerRadius,u,0),m=tae(e.outerRadius,u,.8*u);return Object.keys(t).reduce((function(e,n){var s,i=t[n],u=i.domain,p=i.reversed;if(vne(i.range))"angleAxis"===a?s=[o,l]:"radiusAxis"===a&&(s=[f,m]),p&&(s=[s[1],s[0]]);else{var h=zye(s=i.range,2);o=h[0],l=h[1]}var g=vye(i,r),x=g.realScaleType,y=g.scale;y.domain(u).range(s),wye(y);var v=Cye(y,Oye(Oye({},i),{},{realScaleType:x})),b=Oye(Oye(Oye({},i),v),{},{range:s,radius:m,realScaleType:x,scale:y,cx:c,cy:d,innerRadius:f,outerRadius:m,startAngle:o,endAngle:l});return Oye(Oye({},e),{},Rye({},n,b))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function L_e(){var e,t,n,a,r,s,i,o,l,c,d,u,f,m,p,h,g;const[x,y]=cs.useState("7days"),[v,b]=cs.useState({from:Vz(new Date,7),to:new Date}),[w,j]=cs.useState(!1),{t:N}=mk();Fy();const{data:C,isLoading:S,error:k}=Sy({queryKey:["/api/analytics/overview",x,v],queryFn:async()=>{const e=new URLSearchParams;e.append("period",x),w&&v.from&&v.to&&(e.append("from",v.from.toISOString()),e.append("to",v.to.toISOString()));const t=await _y("GET",`/api/analytics/overview?${e.toString()}`);if(!t.ok)throw new Error("Failed to fetch analytics data");return t.json()},refetchOnWindowFocus:!1,staleTime:3e5}),M=((null==C?void 0:C.conversationsByDay)||[{name:"Mon",whatsapp_official:0,whatsapp_unofficial:0,messenger:0,instagram:0},{name:"Tue",whatsapp_official:0,whatsapp_unofficial:0,messenger:0,instagram:0},{name:"Wed",whatsapp_official:0,whatsapp_unofficial:0,messenger:0,instagram:0},{name:"Thu",whatsapp_official:0,whatsapp_unofficial:0,messenger:0,instagram:0},{name:"Fri",whatsapp_official:0,whatsapp_unofficial:0,messenger:0,instagram:0},{name:"Sat",whatsapp_official:0,whatsapp_unofficial:0,messenger:0,instagram:0},{name:"Sun",whatsapp_official:0,whatsapp_unofficial:0,messenger:0,instagram:0}]).map((e=>{if(e.name&&e.name.includes("-")){const t=new Date(e.name);return{...e,name:t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}}return e})),_=(null==C?void 0:C.channelDistribution)||[{name:"WhatsApp Official",value:0},{name:"WhatsApp Unofficial",value:0},{name:"Messenger",value:0},{name:"Instagram",value:0}],I=["#25D366","#F59E0B","#1877F2","#E4405F"];return vs.jsxs("div",{className:"h-screen flex flex-col overflow-hidden font-sans text-gray-800",children:[vs.jsx(uR,{}),vs.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[vs.jsx(yR,{}),vs.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-6",children:[vs.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4",children:[vs.jsx("h1",{className:"text-2xl",children:N("analytics.title","Analytics")}),vs.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[vs.jsxs(ZU,{value:x,onValueChange:e=>{if(y(e),"custom"!==e){j(!1);const t=new Date;let n=new Date;switch(e){case"today":n=DR(t);break;case"yesterday":n=DR(Vz(t,1));break;case"7days":default:n=Vz(t,7);break;case"30days":n=Vz(t,30);break;case"90days":n=Vz(t,90)}b({from:n,to:t})}else j(!0)},children:[vs.jsx(tW,{className:"w-full sm:w-[180px] h-10",children:vs.jsx(eW,{placeholder:N("analytics.select_period","Select time period")})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"today",children:N("analytics.period.today","Today")}),vs.jsx(sW,{value:"yesterday",children:N("analytics.period.yesterday","Yesterday")}),vs.jsx(sW,{value:"7days",children:N("analytics.period.7days","Last 7 days")}),vs.jsx(sW,{value:"30days",children:N("analytics.period.30days","Last 30 days")}),vs.jsx(sW,{value:"90days",children:N("analytics.period.90days","Last 90 days")}),vs.jsx(sW,{value:"custom",children:N("analytics.period.custom","Custom Range")})]})]}),w&&vs.jsxs(r6,{children:[vs.jsx(s6,{asChild:!0,children:vs.jsxs(lk,{variant:"outline",className:fN("w-full sm:w-[280px] justify-start text-left font-normal h-10",!v&&"text-muted-foreground"),children:[vs.jsx(Nb,{className:"mr-2 h-4 w-4"}),(null==v?void 0:v.from)?v.to?vs.jsxs(vs.Fragment,{children:[Dz(v.from,"LLL dd, y")," -"," ",Dz(v.to,"LLL dd, y")]}):Dz(v.from,"LLL dd, y"):vs.jsx("span",{children:N("analytics.pick_date","Pick a date")})]})}),vs.jsx(i6,{className:"w-auto p-0",align:"start",children:vs.jsx(o9,{initialFocus:!0,mode:"range",defaultMonth:null==v?void 0:v.from,selected:v,onSelect:e=>{(null==e?void 0:e.from)&&(null==e?void 0:e.to)&&b({from:e.from,to:e.to})},numberOfMonths:2})})]})]})]}),S?vs.jsxs("div",{className:"flex justify-center items-center h-64",children:[vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"}),vs.jsx("span",{className:"ml-2",children:"Loading analytics data..."})]}):k?vs.jsxs("div",{className:"flex flex-col justify-center items-center h-64 text-red-500 space-y-2",children:[vs.jsx(Lb,{className:"h-8 w-8"}),vs.jsx("p",{className:"text-center",children:k instanceof Error?k.message:"Failed to load analytics data"}),vs.jsx(lk,{variant:"outline",onClick:()=>window.location.reload(),className:"mt-4",children:N("common.retry","Retry")})]}):vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6",children:[vs.jsx(tk,{className:"hover:shadow-md transition-shadow",children:vs.jsxs(sk,{className:"pt-6",children:[vs.jsxs("div",{className:"flex justify-between items-start",children:[vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsx("p",{className:"text-sm text-gray-500 truncate",children:N("analytics.cards.total_conversations","Total Conversations")}),vs.jsx("p",{className:"text-2xl sm:text-3xl font-bold mt-1 text-gray-900",children:(null==(t=null==(e=null==C?void 0:C.overview)?void 0:e.conversationsCount)?void 0:t.toLocaleString())||0})]}),vs.jsx("div",{className:"p-2 bg-green-100 text-green-700 rounded-md flex-shrink-0",children:vs.jsx(vw,{className:"h-5 w-5"})})]}),vs.jsxs("div",{className:"flex items-center mt-3 text-sm",children:[vs.jsxs("span",{className:"text-green-500 flex items-center",children:[vs.jsx(tj,{className:"h-4 w-4 mr-1"}),(null==(n=null==C?void 0:C.overview)?void 0:n.conversationsGrowth)||0,"%"]}),vs.jsx("span",{className:"text-gray-500 ml-2",children:N("analytics.vs_last_period","vs last period")})]})]})}),vs.jsx(tk,{className:"hover:shadow-md transition-shadow",children:vs.jsxs(sk,{className:"pt-6",children:[vs.jsxs("div",{className:"flex justify-between items-start",children:[vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsx("p",{className:"text-sm text-gray-500 truncate",children:N("analytics.cards.total_contacts","Total Contacts")}),vs.jsx("p",{className:"text-2xl sm:text-3xl font-bold mt-1 text-gray-900",children:(null==(r=null==(a=null==C?void 0:C.overview)?void 0:a.contactsCount)?void 0:r.toLocaleString())||0})]}),vs.jsx("div",{className:"p-2 bg-blue-100 text-blue-700 rounded-md flex-shrink-0",children:vs.jsx(fj,{className:"h-5 w-5"})})]}),vs.jsxs("div",{className:"flex items-center mt-3 text-sm",children:[vs.jsxs("span",{className:fN("flex items-center",((null==(s=null==C?void 0:C.overview)?void 0:s.contactsGrowth)||0)>=0?"text-green-500":"text-red-500"),children:[((null==(i=null==C?void 0:C.overview)?void 0:i.contactsGrowth)||0)>=0?vs.jsx(tj,{className:"h-4 w-4 mr-1"}):vs.jsx(ej,{className:"h-4 w-4 mr-1"}),Math.abs((null==(o=null==C?void 0:C.overview)?void 0:o.contactsGrowth)||0),"%"]}),vs.jsx("span",{className:"text-gray-500 ml-2",children:N("analytics.vs_last_period","vs last period")})]})]})}),vs.jsx(tk,{className:"hover:shadow-md transition-shadow",children:vs.jsxs(sk,{className:"pt-6",children:[vs.jsxs("div",{className:"flex justify-between items-start",children:[vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsx("p",{className:"text-sm text-gray-500 truncate",children:N("analytics.cards.total_messages","Total Messages")}),vs.jsx("p",{className:"text-2xl sm:text-3xl font-bold mt-1 text-gray-900",children:(null==(c=null==(l=null==C?void 0:C.overview)?void 0:l.messagesCount)?void 0:c.toLocaleString())||0})]}),vs.jsx("div",{className:"p-2 bg-purple-100 text-purple-700 rounded-md flex-shrink-0",children:vs.jsx(vw,{className:"h-5 w-5"})})]}),vs.jsxs("div",{className:"flex items-center mt-3 text-sm",children:[vs.jsxs("span",{className:fN("flex items-center",((null==(d=null==C?void 0:C.overview)?void 0:d.messagesGrowth)||0)>=0?"text-green-500":"text-red-500"),children:[((null==(u=null==C?void 0:C.overview)?void 0:u.messagesGrowth)||0)>=0?vs.jsx(tj,{className:"h-4 w-4 mr-1"}):vs.jsx(ej,{className:"h-4 w-4 mr-1"}),Math.abs((null==(f=null==C?void 0:C.overview)?void 0:f.messagesGrowth)||0),"%"]}),vs.jsx("span",{className:"text-gray-500 ml-2",children:N("analytics.vs_last_period","vs last period")})]})]})}),vs.jsx(tk,{className:"hover:shadow-md transition-shadow",children:vs.jsxs(sk,{className:"pt-6",children:[vs.jsxs("div",{className:"flex justify-between items-start",children:[vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsx("p",{className:"text-sm text-gray-500 truncate",children:N("analytics.cards.response_rate","Response Rate")}),vs.jsxs("p",{className:"text-2xl sm:text-3xl font-bold mt-1 text-gray-900",children:[(null==(m=null==C?void 0:C.overview)?void 0:m.responseRate)||0,"%"]})]}),vs.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-700 rounded-md flex-shrink-0",children:vs.jsx(Db,{className:"h-5 w-5"})})]}),vs.jsxs("div",{className:"flex items-center mt-3 text-sm",children:[vs.jsxs("span",{className:fN("flex items-center",((null==(p=null==C?void 0:C.overview)?void 0:p.responseRateGrowth)||0)>=0?"text-green-500":"text-red-500"),children:[((null==(h=null==C?void 0:C.overview)?void 0:h.responseRateGrowth)||0)>=0?vs.jsx(tj,{className:"h-4 w-4 mr-1"}):vs.jsx(ej,{className:"h-4 w-4 mr-1"}),Math.abs((null==(g=null==C?void 0:C.overview)?void 0:g.responseRateGrowth)||0),"%"]}),vs.jsx("span",{className:"text-gray-500 ml-2",children:N("analytics.vs_last_period","vs last period")})]})]})})]}),vs.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-6 mb-6",children:[vs.jsxs(tk,{className:"hover:shadow-md transition-shadow",children:[vs.jsx(nk,{className:"pb-3",children:vs.jsx(ak,{className:"text-lg sm:text-xl",children:N("analytics.charts.conversations_by_channel","Conversations by Channel")})}),vs.jsx(sk,{children:vs.jsx("div",{className:"w-full overflow-x-auto",children:vs.jsx(Wue,{width:"100%",height:300,minWidth:300,children:vs.jsxs(A_e,{data:M,margin:{top:20,right:30,left:0,bottom:0},children:[vs.jsx($ke,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),vs.jsx(wMe,{dataKey:"name",tick:{fontSize:12},tickLine:{stroke:"#e0e0e0"}}),vs.jsx(LMe,{tick:{fontSize:12},tickLine:{stroke:"#e0e0e0"}}),vs.jsx(mue,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e0e0e0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),vs.jsx(Lce,{}),vs.jsx(dMe,{type:"monotone",dataKey:"whatsapp_official",name:N("analytics.channels.whatsapp_official","WhatsApp Official"),stroke:"#25D366",strokeWidth:2,dot:{fill:"#25D366",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#25D366",strokeWidth:2}}),vs.jsx(dMe,{type:"monotone",dataKey:"whatsapp_unofficial",name:N("analytics.channels.whatsapp_unofficial","WhatsApp Unofficial"),stroke:"#F59E0B",strokeWidth:2,dot:{fill:"#F59E0B",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#F59E0B",strokeWidth:2}}),vs.jsx(dMe,{type:"monotone",dataKey:"messenger",name:N("analytics.channels.messenger","Messenger"),stroke:"#1877F2",strokeWidth:2,dot:{fill:"#1877F2",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#1877F2",strokeWidth:2}}),vs.jsx(dMe,{type:"monotone",dataKey:"instagram",name:N("analytics.channels.instagram","Instagram"),stroke:"#E4405F",strokeWidth:2,dot:{fill:"#E4405F",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#E4405F",strokeWidth:2}})]})})})})]}),vs.jsxs(tk,{className:"hover:shadow-md transition-shadow",children:[vs.jsx(nk,{className:"pb-3",children:vs.jsx(ak,{className:"text-lg sm:text-xl",children:N("analytics.charts.channel_distribution","Channel Distribution")})}),vs.jsx(sk,{children:vs.jsx("div",{className:"w-full overflow-x-auto",children:vs.jsx(Wue,{width:"100%",height:300,minWidth:300,children:vs.jsxs(E_e,{children:[vs.jsx(mue,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e0e0e0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),vs.jsx(Lce,{}),vs.jsx(CNe,{data:_,cx:"50%",cy:"50%",labelLine:!1,label:({cx:e,cy:t,midAngle:n,innerRadius:a,outerRadius:r,percent:s})=>{const i=a+.5*(r-a),o=e+i*Math.cos(-n*Math.PI/180),l=t+i*Math.sin(-n*Math.PI/180);return vs.jsx("text",{x:o,y:l,fill:"white",textAnchor:"middle",dominantBaseline:"central",children:`${(100*s).toFixed(0)}%`})},outerRadius:100,fill:"#8884d8",dataKey:"value",children:_.map(((e,t)=>vs.jsx(Gue,{fill:I[t%I.length]},`cell-${t}`)))})]})})})})]})]})]})]})]})]})}var T_e="Tabs",[D_e,P_e]=Vy(T_e,[qT]),O_e=qT(),[R_e,z_e]=D_e(T_e),F_e=cs.forwardRef(((e,t)=>{const{__scopeTabs:n,value:a,onValueChange:r,defaultValue:s,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=ST(o),[u,f]=yv({prop:a,onChange:r,defaultProp:s??"",caller:T_e});return vs.jsx(R_e,{scope:n,baseId:SN(),value:u,onValueChange:f,orientation:i,dir:d,activationMode:l,children:vs.jsx(Xy.div,{dir:d,"data-orientation":i,...c,ref:t})})}));F_e.displayName=T_e;var B_e="TabsList",U_e=cs.forwardRef(((e,t)=>{const{__scopeTabs:n,loop:a=!0,...r}=e,s=z_e(B_e,n),i=O_e(n);return vs.jsx(tD,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:a,children:vs.jsx(Xy.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:t})})}));U_e.displayName=B_e;var W_e="TabsTrigger",G_e=cs.forwardRef(((e,t)=>{const{__scopeTabs:n,value:a,disabled:r=!1,...s}=e,i=z_e(W_e,n),o=O_e(n),l=q_e(i.baseId,a),c=$_e(i.baseId,a),d=a===i.value;return vs.jsx(nD,{asChild:!0,...o,focusable:!r,active:d,children:vs.jsx(Xy.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:t,onMouseDown:By(e.onMouseDown,(e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(a)})),onKeyDown:By(e.onKeyDown,(e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(a)})),onFocus:By(e.onFocus,(()=>{const e="manual"!==i.activationMode;d||r||!e||i.onValueChange(a)}))})})}));G_e.displayName=W_e;var V_e="TabsContent",H_e=cs.forwardRef(((e,t)=>{const{__scopeTabs:n,value:a,forceMount:r,children:s,...i}=e,o=z_e(V_e,n),l=q_e(o.baseId,a),c=$_e(o.baseId,a),d=a===o.value,u=cs.useRef(d);return cs.useEffect((()=>{const e=requestAnimationFrame((()=>u.current=!1));return()=>cancelAnimationFrame(e)}),[]),vs.jsx(hv,{present:r||d,children:({present:n})=>vs.jsx(Xy.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!n,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:n&&s})})}));function q_e(e,t){return`${e}-trigger-${t}`}function $_e(e,t){return`${e}-content-${t}`}H_e.displayName=V_e;var Y_e=U_e,Q_e=G_e,K_e=H_e;const J_e=F_e,Z_e=cs.forwardRef((({className:e,...t},n)=>vs.jsx(Y_e,{ref:n,className:fN("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t})));Z_e.displayName=Y_e.displayName;const X_e=cs.forwardRef((({className:e,...t},n)=>vs.jsx(Q_e,{ref:n,className:fN("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t})));X_e.displayName=Q_e.displayName;const eIe=cs.forwardRef((({className:e,...t},n)=>vs.jsx(K_e,{ref:n,className:fN("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t})));function tIe({children:e,className:t}){const n=cs.useRef(null),[a,r]=cs.useState(!1),[s,i]=cs.useState(!1),[o,l]=cs.useState(!1),c=()=>{const e=n.current;if(!e)return;const{scrollLeft:t,scrollWidth:a,clientWidth:s}=e;r(t>0),i(t<a-s-1)},d=()=>{const e=n.current;if(!e)return;l(!0);const t=.8*e.clientWidth;e.scrollBy({left:-t,behavior:"smooth"}),setTimeout((()=>l(!1)),300)},u=()=>{const e=n.current;if(!e)return;l(!0);const t=.8*e.clientWidth;e.scrollBy({left:t,behavior:"smooth"}),setTimeout((()=>l(!1)),300)};return cs.useEffect((()=>{const e=n.current;if(!e)return;c();const t=()=>{o||c()},a=()=>{c()},r=t=>{t.target===e&&("ArrowLeft"===t.key?(t.preventDefault(),d()):"ArrowRight"===t.key&&(t.preventDefault(),u()))};e.addEventListener("scroll",t,{passive:!0}),e.addEventListener("keydown",r),window.addEventListener("resize",a);const s=new ResizeObserver((()=>{c()}));return s.observe(e),()=>{e.removeEventListener("scroll",t),e.removeEventListener("keydown",r),window.removeEventListener("resize",a),s.disconnect()}}),[o]),vs.jsxs("div",{className:"relative",children:[a&&vs.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-4 bg-gradient-to-r from-white to-transparent z-10 pointer-events-none"}),s&&vs.jsx("div",{className:"absolute right-8 top-0 bottom-0 w-4 bg-gradient-to-l from-white to-transparent z-10 pointer-events-none"}),a&&vs.jsx(lk,{variant:"outline",size:"sm",className:"absolute left-0 top-1/2 -translate-y-1/2 z-20 h-8 w-8 p-0 bg-white shadow-lg border-gray-200 hover:bg-gray-50 rounded-full",onClick:d,"aria-label":"Scroll tabs left",children:vs.jsx(_b,{className:"h-4 w-4"})}),s&&vs.jsx(lk,{variant:"outline",size:"sm",className:"absolute right-0 top-1/2 -translate-y-1/2 z-20 h-8 w-8 p-0 bg-white shadow-lg border-gray-200 hover:bg-gray-50 rounded-full",onClick:u,"aria-label":"Scroll tabs right",children:vs.jsx(Ib,{className:"h-4 w-4"})}),vs.jsx("div",{ref:n,tabIndex:0,role:"tablist","aria-label":"Settings navigation tabs",className:fN("overflow-x-auto overflow-y-hidden scrollbar-hide","scroll-smooth",a&&"pl-10",s&&"pr-10","touch-pan-x","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-md",t),style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},onTouchStart:e=>{e.currentTarget.style.touchAction="pan-x"},children:vs.jsx("div",{className:"flex min-w-max",children:e})}),vs.jsx("style",{jsx:!0,children:"\n        .scrollbar-hide::-webkit-scrollbar {\n          display: none;\n        }\n      "})]})}function nIe({plan:e,isCurrentPlan:t,onSelectPlan:n}){return vs.jsxs(tk,{className:"w-full "+(t?"border-primary border-2":""),children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:e.name}),vs.jsx(rk,{children:e.description})]}),vs.jsxs(sk,{children:[vs.jsxs("div",{className:"mb-4",children:[vs.jsxs("span",{className:"text-3xl font-bold",children:["$",e.price]}),vs.jsx("span",{className:"text-muted-foreground",children:"/month"})]}),vs.jsxs("ul",{className:"space-y-2",children:[e.features.map(((e,t)=>vs.jsxs("li",{className:"flex items-center",children:[vs.jsx(kb,{className:"h-4 w-4 mr-2 text-secondry"}),vs.jsx("span",{children:e})]},t))),vs.jsxs("li",{className:"flex items-center",children:[vs.jsx(kb,{className:"h-4 w-4 mr-2 text-secondry"}),vs.jsxs("span",{children:[e.maxUsers," team members"]})]}),vs.jsxs("li",{className:"flex items-center",children:[vs.jsx(kb,{className:"h-4 w-4 mr-2 text-secondry"}),vs.jsxs("span",{children:[e.maxContacts.toLocaleString()," contacts"]})]}),vs.jsxs("li",{className:"flex items-center",children:[vs.jsx(kb,{className:"h-4 w-4 mr-2 text-secondry"}),vs.jsxs("span",{children:[e.maxChannels," channels"]})]}),vs.jsxs("li",{className:"flex items-center",children:[vs.jsx(kb,{className:"h-4 w-4 mr-2 text-secondry"}),vs.jsxs("span",{children:[e.maxFlows," flows"]})]})]})]}),vs.jsx(ik,{children:t?vs.jsx(lk,{className:"w-full",variant:"outline",disabled:!0,children:"Current Plan"}):vs.jsx(lk,{className:"w-full btn-brand-primary",onClick:()=>n(e),children:"Select Plan"})})]})}function aIe({paymentMethods:e,selectedMethod:t,onSelectMethod:n}){return vs.jsx(d3,{value:t||void 0,onValueChange:n,className:"space-y-3",children:e.map((e=>vs.jsx("div",{className:"flex items-center space-x-2",children:vs.jsx(tk,{className:"w-full cursor-pointer hover:border-primary transition-colors "+(t===e.id?"border-primary":""),children:vs.jsxs(sk,{className:"p-4",children:[vs.jsx(u3,{value:e.id,id:`payment-${e.id}`,className:"peer sr-only"}),vs.jsxs(EB,{htmlFor:`payment-${e.id}`,className:"flex items-center justify-between cursor-pointer",children:[vs.jsxs("div",{className:"flex items-center gap-4",children:["stripe"===e.id&&vs.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:vs.jsx("i",{className:"ri-bank-card-line text-2xl text-blue-600"})}),"mercadopago"===e.id&&vs.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:vs.jsx("i",{className:"ri-bank-card-line text-2xl text-blue-500"})}),"paypal"===e.id&&vs.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:vs.jsx("i",{className:"ri-paypal-line text-2xl text-blue-700"})}),"moyasar"===e.id&&vs.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:vs.jsx("i",{className:"ri-bank-card-line text-2xl text-green-600"})}),"bank-transfer"===e.id&&vs.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:vs.jsx("i",{className:"ri-bank-line text-2xl text-green-600"})}),vs.jsxs("div",{children:[vs.jsx("div",{className:"font-medium",children:e.name}),vs.jsx("div",{className:"text-sm text-muted-foreground",children:e.description}),e.testMode&&vs.jsx("div",{className:"text-xs text-amber-600 mt-1",children:"Test Mode Enabled"})]})]}),vs.jsx("div",{className:"h-4 w-4 rounded-full border border-primary flex items-center justify-center",children:t===e.id&&vs.jsx("div",{className:"h-2 w-2 rounded-full bg-primary btn-brand-primary "})})]})]})})},e.id)))})}function rIe({isOpen:e,onClose:t,plan:n,paymentMethods:a,onSuccess:r}){var s,i,o,l,c,d,u;const[f,m]=cs.useState(null),[p,h]=cs.useState(null),[g,x]=cs.useState(!1),[y,v]=cs.useState(!1),[b,w]=cs.useState(null),{toast:j}=Fy(),N=ky({mutationFn:async()=>{if(!n||!f)throw new Error("Please select a plan and payment method");const e=await _y("POST",`/api/payment/checkout/${f}`,{planId:n.id});if(!e.ok){const t=await e.json();throw new Error(t.details||t.error||"Failed to create checkout session")}return e.json()},onSuccess:e=>{"bank-transfer"===f?(h(e),x(!0)):"moyasar"===f?(w(e),v(!0)):e.checkoutUrl?window.location.href=e.checkoutUrl:j({title:"Checkout Error",description:"No checkout URL received from server",variant:"destructive"})},onError:e=>{j({title:"Checkout Error",description:e.message,variant:"destructive"})}}),C=e=>{navigator.clipboard.writeText(e),j({title:"Copied to clipboard",description:"The information has been copied to your clipboard."})},S=()=>{x(!1),h(null),t(),r(),j({title:"Payment Instructions Received",description:"Please complete the bank transfer. Your subscription will be activated once payment is confirmed."})},k=()=>{v(!1),w(null)};return cs.useEffect((()=>{if(y&&b){const e=async()=>{if(!document.querySelector('link[href*="moyasar.css"]')){const e=document.createElement("link");e.rel="stylesheet",e.href="https://unpkg.com/moyasar-payment-form@2.0.14/dist/moyasar.css",document.head.appendChild(e)}if(window.Moyasar)t();else{const e=document.createElement("script");e.src="https://unpkg.com/moyasar-payment-form@2.0.14/dist/moyasar.umd.js",e.onload=()=>{t()},e.onerror=e=>{j({title:"Payment System Error",description:"Failed to load payment system. Please try again.",variant:"destructive"})},document.head.appendChild(e)}},t=()=>{const e=document.getElementById("moyasar-form");if(e&&window.Moyasar){e.innerHTML="";try{window.Moyasar.init({element:"#moyasar-form",amount:b.amount,currency:b.currency,description:b.description,publishable_api_key:b.publishableKey,callback_url:b.callbackUrl,methods:["creditcard"]})}catch(t){j({title:"Payment System Error",description:"Failed to initialize payment form. Please try again.",variant:"destructive"})}}};e()}}),[y,b]),n?g&&p?vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"sm:max-w-lg",children:[vs.jsxs(CB,{children:[vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx(Db,{className:"h-5 w-5 text-green-500"}),"Bank Transfer Instructions"]}),vs.jsx(MB,{children:"Please transfer the exact amount to the following bank account. Your subscription will be activated once we confirm the payment."})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsx(ak,{className:"text-lg",children:"Payment Details"})}),vs.jsxs(sk,{className:"space-y-3",children:[vs.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[vs.jsx("span",{className:"font-semibold",children:"Amount:"}),vs.jsxs("span",{className:"text-lg font-bold",children:["$",null==n?void 0:n.price]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-sm font-medium",children:"Account Name"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"flex-1 p-2 bg-muted rounded text-sm",children:null==(s=p.bankDetails)?void 0:s.accountName}),vs.jsx(lk,{size:"sm",variant:"outline",onClick:()=>{var e;return C(null==(e=p.bankDetails)?void 0:e.accountName)},children:vs.jsx(Ub,{className:"h-4 w-4"})})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-sm font-medium",children:"Account Number"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"flex-1 p-2 bg-muted rounded text-sm font-mono",children:null==(i=p.bankDetails)?void 0:i.accountNumber}),vs.jsx(lk,{size:"sm",variant:"outline",onClick:()=>{var e;return C(null==(e=p.bankDetails)?void 0:e.accountNumber)},children:vs.jsx(Ub,{className:"h-4 w-4"})})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-sm font-medium",children:"Bank Name"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"flex-1 p-2 bg-muted rounded text-sm",children:null==(o=p.bankDetails)?void 0:o.bankName}),vs.jsx(lk,{size:"sm",variant:"outline",onClick:()=>{var e;return C(null==(e=p.bankDetails)?void 0:e.bankName)},children:vs.jsx(Ub,{className:"h-4 w-4"})})]})]}),(null==(l=p.bankDetails)?void 0:l.routingNumber)&&vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-sm font-medium",children:"Routing Number"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"flex-1 p-2 bg-muted rounded text-sm font-mono",children:p.bankDetails.routingNumber}),vs.jsx(lk,{size:"sm",variant:"outline",onClick:()=>C(p.bankDetails.routingNumber),children:vs.jsx(Ub,{className:"h-4 w-4"})})]})]}),(null==(c=p.bankDetails)?void 0:c.swiftCode)&&vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-sm font-medium",children:"SWIFT Code"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"flex-1 p-2 bg-muted rounded text-sm font-mono",children:p.bankDetails.swiftCode}),vs.jsx(lk,{size:"sm",variant:"outline",onClick:()=>C(p.bankDetails.swiftCode),children:vs.jsx(Ub,{className:"h-4 w-4"})})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-sm font-medium",children:"Payment Reference"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"flex-1 p-2 bg-yellow-50 border border-yellow-200 rounded text-sm font-mono",children:null==(d=p.bankDetails)?void 0:d.reference}),vs.jsx(lk,{size:"sm",variant:"outline",onClick:()=>{var e;return C(null==(e=p.bankDetails)?void 0:e.reference)},children:vs.jsx(Ub,{className:"h-4 w-4"})})]}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"⚠️ Please include this reference in your transfer to ensure quick processing"})]}),(null==(u=p.bankDetails)?void 0:u.instructions)&&vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-sm font-medium",children:"Additional Instructions"}),vs.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-sm",children:p.bankDetails.instructions})]})]})]}),vs.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[vs.jsx("h4",{className:"font-medium text-amber-800 mb-2",children:"Important Notes:"}),vs.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[vs.jsx("li",{children:"• Please transfer the exact amount shown above"}),vs.jsx("li",{children:"• Include the payment reference in your transfer"}),vs.jsx("li",{children:"• Processing may take 1-3 business days"}),vs.jsx("li",{children:"• You'll receive an email confirmation once payment is verified"})]})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{variant:"outline",onClick:t,children:"Close"}),vs.jsx(lk,{onClick:S,children:"I've Made the Transfer"})]})]})}):y&&b?vs.jsx(yB,{open:e,onOpenChange:e=>!e&&k(),children:vs.jsxs(NB,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[vs.jsxs(CB,{children:[vs.jsxs(kB,{children:["Complete Payment - ",n.name]}),vs.jsx(MB,{children:"Enter your card details to complete the payment securely with Moyasar."})]}),vs.jsxs("div",{className:"py-4",children:[vs.jsxs("div",{className:"mb-4",children:[vs.jsx("h3",{className:"text-sm font-medium mb-2",children:"Payment Summary"}),vs.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[vs.jsxs("div",{className:"flex justify-between mb-2",children:[vs.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),vs.jsx("span",{className:"font-medium",children:n.name})]}),vs.jsxs("div",{className:"flex justify-between",children:[vs.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),vs.jsxs("span",{className:"font-medium",children:[b.amount/100," SAR"]})]})]})]}),vs.jsx("div",{id:"moyasar-form",className:"min-h-[200px]"})]}),vs.jsx(SB,{children:vs.jsx(lk,{variant:"outline",onClick:k,children:"Cancel"})})]})}):vs.jsx(yB,{open:e,onOpenChange:e=>!e&&t(),children:vs.jsxs(NB,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[vs.jsxs(CB,{children:[vs.jsxs(kB,{children:["Subscribe to ",n.name]}),vs.jsx(MB,{children:"Choose your preferred payment method to complete your subscription."})]}),vs.jsxs("div",{className:"py-4",children:[vs.jsxs("div",{className:"mb-4",children:[vs.jsx("h3",{className:"text-sm font-medium mb-2",children:"Plan Details"}),vs.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[vs.jsxs("div",{className:"flex justify-between mb-2",children:[vs.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),vs.jsx("span",{className:"font-medium",children:n.name})]}),vs.jsxs("div",{className:"flex justify-between",children:[vs.jsx("span",{className:"text-muted-foreground",children:"Price:"}),vs.jsxs("span",{className:"font-medium",children:["$",n.price,"/month"]})]})]})]}),vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-sm font-medium mb-2",children:"Payment Method"}),vs.jsx(aIe,{paymentMethods:a,selectedMethod:f,onSelectMethod:m})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{variant:"outline",onClick:t,disabled:N.isPending,children:"Cancel"}),vs.jsxs(lk,{className:"btn-brand-primary",onClick:()=>{f?N.mutate():j({title:"Payment Method Required",description:"Please select a payment method to continue",variant:"destructive"})},disabled:N.isPending,children:[N.isPending&&vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Proceed to Payment"]})]})]})}):null}eIe.displayName=K_e.displayName;var sIe,iIe,oIe=Object.defineProperty,lIe=Object.getOwnPropertySymbols,cIe=Object.prototype.hasOwnProperty,dIe=Object.prototype.propertyIsEnumerable,uIe=(e,t,n)=>t in e?oIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fIe=(e,t)=>{for(var n in t||(t={}))cIe.call(t,n)&&uIe(e,n,t[n]);if(lIe)for(var n of lIe(t))dIe.call(t,n)&&uIe(e,n,t[n]);return e},mIe=(e,t)=>{var n={};for(var a in e)cIe.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&lIe)for(var a of lIe(e))t.indexOf(a)<0&&dIe.call(e,a)&&(n[a]=e[a]);return n};(e=>{const t=class t{constructor(e,n,a,s){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(s<-1||s>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let t=0;t<this.size;t++)i.push(!1);for(let t=0;t<this.size;t++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const o=this.addEccAndInterleave(a);if(this.drawCodewords(o),-1==s){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(s=t,e=n),this.applyMask(t)}}r(0<=s&&s<=7),this.mask=s,this.applyMask(s),this.drawFormatBits(s),this.isFunction=[]}static encodeText(n,a){const r=e.QrSegment.makeSegments(n);return t.encodeSegments(r,a)}static encodeBinary(n,a){const r=e.QrSegment.makeBytes(n);return t.encodeSegments([r],a)}static encodeSegments(e,a,s=1,o=40,l=-1,c=!0){if(!(t.MIN_VERSION<=s&&s<=o&&o<=t.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");let d,u;for(d=s;;d++){const n=8*t.getNumDataCodewords(d,a),r=i.getTotalBits(e,d);if(r<=n){u=r;break}if(d>=o)throw new RangeError("Data too long")}for(const n of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])c&&u<=8*t.getNumDataCodewords(d,n)&&(a=n);let f=[];for(const t of e){n(t.mode.modeBits,4,f),n(t.numChars,t.mode.numCharCountBits(d),f);for(const e of t.getData())f.push(e)}r(f.length==u);const m=8*t.getNumDataCodewords(d,a);r(f.length<=m),n(0,Math.min(4,m-f.length),f),n(0,(8-f.length%8)%8,f),r(f.length%8==0);for(let t=236;f.length<m;t^=253)n(t,8,f);let p=[];for(;8*p.length<f.length;)p.push(0);return f.forEach(((e,t)=>p[t>>>3]|=e<<7-(7&t))),new t(d,a,p,l)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let a=0;a<t;a++)0==n&&0==a||0==n&&a==t-1||n==t-1&&0==a||this.drawAlignmentPattern(e[n],e[a]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let a=0;a<10;a++)n=n<<1^1335*(n>>>9);const s=21522^(t<<10|n);r(s>>>15==0);for(let r=0;r<=5;r++)this.setFunctionModule(8,r,a(s,r));this.setFunctionModule(8,7,a(s,6)),this.setFunctionModule(8,8,a(s,7)),this.setFunctionModule(7,8,a(s,8));for(let r=9;r<15;r++)this.setFunctionModule(14-r,8,a(s,r));for(let r=0;r<8;r++)this.setFunctionModule(this.size-1-r,8,a(s,r));for(let r=8;r<15;r++)this.setFunctionModule(8,this.size-15+r,a(s,r));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;r(t>>>18==0);for(let n=0;n<18;n++){const e=a(t,n),r=this.size-11+n%3,s=Math.floor(n/3);this.setFunctionModule(r,s,e),this.setFunctionModule(s,r,e)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let a=-4;a<=4;a++){const r=Math.max(Math.abs(a),Math.abs(n)),s=e+a,i=t+n;0<=s&&s<this.size&&0<=i&&i<this.size&&this.setFunctionModule(s,i,2!=r&&4!=r)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let a=-2;a<=2;a++)this.setFunctionModule(e+a,t+n,1!=Math.max(Math.abs(a),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,a=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,a))throw new RangeError("Invalid argument");const s=t.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][n],i=t.ECC_CODEWORDS_PER_BLOCK[a.ordinal][n],o=Math.floor(t.getNumRawDataModules(n)/8),l=s-o%s,c=Math.floor(o/s);let d=[];const u=t.reedSolomonComputeDivisor(i);for(let r=0,m=0;r<s;r++){let n=e.slice(m,m+c-i+(r<l?0:1));m+=n.length;const a=t.reedSolomonComputeRemainder(n,u);r<l&&n.push(0),d.push(n.concat(a))}let f=[];for(let t=0;t<d[0].length;t++)d.forEach(((e,n)=>{(t!=c-i||n>=l)&&f.push(e[t])}));return r(f.length==o),f}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let r=0;r<this.size;r++)for(let s=0;s<2;s++){const i=t-s,o=!(t+1&2)?this.size-1-r:r;!this.isFunction[o][i]&&n<8*e.length&&(this.modules[o][i]=a(e[n>>>3],7-(7&n)),n++)}}r(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let a;switch(e){case 0:a=(n+t)%2==0;break;case 1:a=t%2==0;break;case 2:a=n%3==0;break;case 3:a=(n+t)%3==0;break;case 4:a=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:a=n*t%2+n*t%3==0;break;case 6:a=(n*t%2+n*t%3)%2==0;break;case 7:a=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&a&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let r=0;r<this.size;r++){let n=!1,a=0,s=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[r][i]==n?(a++,5==a?e+=t.PENALTY_N1:a>5&&e++):(this.finderPenaltyAddHistory(a,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[r][i],a=1);e+=this.finderPenaltyTerminateAndCount(n,a,s)*t.PENALTY_N3}for(let r=0;r<this.size;r++){let n=!1,a=0,s=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][r]==n?(a++,5==a?e+=t.PENALTY_N1:a>5&&e++):(this.finderPenaltyAddHistory(a,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[i][r],a=1);e+=this.finderPenaltyTerminateAndCount(n,a,s)*t.PENALTY_N3}for(let r=0;r<this.size-1;r++)for(let n=0;n<this.size-1;n++){const a=this.modules[r][n];a==this.modules[r][n+1]&&a==this.modules[r+1][n]&&a==this.modules[r+1][n+1]&&(e+=t.PENALTY_N2)}let n=0;for(const t of this.modules)n=t.reduce(((e,t)=>e+(t?1:0)),n);const a=this.size*this.size,s=Math.ceil(Math.abs(20*n-10*a)/a)-1;return r(0<=s&&s<=9),e+=s*t.PENALTY_N4,r(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let a=this.size-7;n.length<e;a-=t)n.splice(1,0,a);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return r(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let a=1;for(let r=0;r<e;r++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],a),e+1<n.length&&(n[e]^=n[e+1]);a=t.reedSolomonMultiply(a,2)}return n}static reedSolomonComputeRemainder(e,n){let a=n.map((e=>0));for(const r of e){const e=r^a.shift();a.push(0),n.forEach(((n,r)=>a[r]^=t.reedSolomonMultiply(n,e)))}return a}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let a=7;a>=0;a--)n=n<<1^285*(n>>>7),n^=(t>>>a&1)*e;return r(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];r(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function n(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let a=t-1;a>=0;a--)n.push(e>>>a&1)}function a(e,t){return!!(e>>>t&1)}function r(e){if(!e)throw new Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;const s=class e{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(t){let a=[];for(const e of t)n(e,8,a);return new e(e.Mode.BYTE,t.length,a)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let a=[];for(let e=0;e<t.length;){const r=Math.min(t.length-e,3);n(parseInt(t.substring(e,e+r),10),3*r+1,a),e+=r}return new e(e.Mode.NUMERIC,t.length,a)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let a,r=[];for(a=0;a+2<=t.length;a+=2){let s=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a));s+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a+1)),n(s,11,r)}return a<t.length&&n(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a)),6,r),new e(e.Mode.ALPHANUMERIC,t.length,r)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let a=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)n(t,8,a);else if(t<16384)n(2,2,a),n(t,14,a);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,a),n(t,21,a)}return new e(e.Mode.ECI,0,a)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const a of e){const e=a.mode.numCharCountBits(t);if(a.numChars>=1<<e)return 1/0;n+=4+e+a.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substring(n+1,n+3),16)),n+=2);return t}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let i=s;e.QrSegment=s})(sIe||(sIe={})),(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})((iIe=sIe||(sIe={})).QrCode||(iIe.QrCode={})),(e=>{(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(e.QrSegment||(e.QrSegment={}))})(sIe||(sIe={}));var pIe=sIe,hIe={L:pIe.QrCode.Ecc.LOW,M:pIe.QrCode.Ecc.MEDIUM,Q:pIe.QrCode.Ecc.QUARTILE,H:pIe.QrCode.Ecc.HIGH},gIe=128,xIe="L",yIe="#FFFFFF",vIe="#000000",bIe=!1,wIe=1;function jIe(e,t=0){const n=[];return e.forEach((function(e,a){let r=null;e.forEach((function(s,i){if(!s&&null!==r)return n.push(`M${r+t} ${a+t}h${i-r}v1H${r+t}z`),void(r=null);if(i!==e.length-1)s&&null===r&&(r=i);else{if(!s)return;null===r?n.push(`M${i+t},${a+t} h1v1H${i+t}z`):n.push(`M${r+t},${a+t} h${i+1-r}v1H${r+t}z`)}}))})),n.join("")}function NIe(e,t){return e.slice().map(((e,n)=>n<t.y||n>=t.y+t.h?e:e.map(((e,n)=>(n<t.x||n>=t.x+t.w)&&e))))}function CIe({value:e,level:t,minVersion:n,includeMargin:a,marginSize:r,imageSettings:s,size:i,boostLevel:o}){let l=ds.useMemo((()=>{const a=(Array.isArray(e)?e:[e]).reduce(((e,t)=>(e.push(...pIe.QrSegment.makeSegments(t)),e)),[]);return pIe.QrCode.encodeSegments(a,hIe[t],n,void 0,void 0,o)}),[e,t,n,o]);const{cells:c,margin:d,numCells:u,calculatedImageSettings:f}=ds.useMemo((()=>{let e=l.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(a,r),n=e.length+2*t,o=function(e,t,n,a){if(null==a)return null;const r=e.length+2*n,s=Math.floor(.1*t),i=r/t,o=(a.width||s)*i,l=(a.height||s)*i,c=null==a.x?e.length/2-o/2:a.x*i,d=null==a.y?e.length/2-l/2:a.y*i,u=null==a.opacity?1:a.opacity;let f=null;if(a.excavate){let e=Math.floor(c),t=Math.floor(d);f={x:e,y:t,w:Math.ceil(o+c-e),h:Math.ceil(l+d-t)}}return{x:c,y:d,h:l,w:o,excavation:f,opacity:u,crossOrigin:a.crossOrigin}}(e,i,t,s);return{cells:e,margin:t,numCells:n,calculatedImageSettings:o}}),[l,i,s,a,r]);return{qrcode:l,margin:d,cells:c,numCells:u,calculatedImageSettings:f}}var SIe=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}();ds.forwardRef((function(e,t){const n=e,{value:a,size:r=gIe,level:s=xIe,bgColor:i=yIe,fgColor:o=vIe,includeMargin:l=bIe,minVersion:c=wIe,boostLevel:d,marginSize:u,imageSettings:f}=n,m=mIe(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:p}=m,h=mIe(m,["style"]),g=null==f?void 0:f.src,x=ds.useRef(null),y=ds.useRef(null),v=ds.useCallback((e=>{x.current=e,"function"==typeof t?t(e):t&&(t.current=e)}),[t]),[b,w]=ds.useState(!1),{margin:j,cells:N,numCells:C,calculatedImageSettings:S}=CIe({value:a,level:s,minVersion:c,boostLevel:d,includeMargin:l,marginSize:u,imageSettings:f,size:r});ds.useEffect((()=>{if(null!=x.current){const e=x.current,t=e.getContext("2d");if(!t)return;let n=N;const a=y.current,s=null!=S&&null!==a&&a.complete&&0!==a.naturalHeight&&0!==a.naturalWidth;s&&null!=S.excavation&&(n=NIe(N,S.excavation));const l=window.devicePixelRatio||1;e.height=e.width=r*l;const c=r/C*l;t.scale(c,c),t.fillStyle=i,t.fillRect(0,0,C,C),t.fillStyle=o,SIe?t.fill(new Path2D(jIe(n,j))):N.forEach((function(e,n){e.forEach((function(e,a){e&&t.fillRect(a+j,n+j,1,1)}))})),S&&(t.globalAlpha=S.opacity),s&&t.drawImage(a,S.x+j,S.y+j,S.w,S.h)}})),ds.useEffect((()=>{w(!1)}),[g]);const k=fIe({height:r,width:r},p);let M=null;return null!=g&&(M=ds.createElement("img",{src:g,key:g,style:{display:"none"},onLoad:()=>{w(!0)},ref:y,crossOrigin:null==S?void 0:S.crossOrigin})),ds.createElement(ds.Fragment,null,ds.createElement("canvas",fIe({style:k,height:r,width:r,ref:v,role:"img"},h)),M)})).displayName="QRCodeCanvas";var kIe=ds.forwardRef((function(e,t){const n=e,{value:a,size:r=gIe,level:s=xIe,bgColor:i=yIe,fgColor:o=vIe,includeMargin:l=bIe,minVersion:c=wIe,boostLevel:d,title:u,marginSize:f,imageSettings:m}=n,p=mIe(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:h,cells:g,numCells:x,calculatedImageSettings:y}=CIe({value:a,level:s,minVersion:c,boostLevel:d,includeMargin:l,marginSize:f,imageSettings:m,size:r});let v=g,b=null;null!=m&&null!=y&&(null!=y.excavation&&(v=NIe(g,y.excavation)),b=ds.createElement("image",{href:m.src,height:y.h,width:y.w,x:y.x+h,y:y.y+h,preserveAspectRatio:"none",opacity:y.opacity,crossOrigin:y.crossOrigin}));const w=jIe(v,h);return ds.createElement("svg",fIe({height:r,width:r,viewBox:`0 0 ${x} ${x}`,ref:t,role:"img"},p),!!u&&ds.createElement("title",null,u),ds.createElement("path",{fill:i,d:`M0,0 h${x}v${x}H0z`,shapeRendering:"crispEdges"}),ds.createElement("path",{fill:o,d:w,shapeRendering:"crispEdges"}),b)}));kIe.displayName="QRCodeSVG";var MIe="Accordion",_Ie=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[IIe,AIe,EIe]=Zy(MIe),[LIe,TIe]=Vy(MIe,[EIe,m6]),DIe=m6(),PIe=ds.forwardRef(((e,t)=>{const{type:n,...a}=e,r=a,s=a;return vs.jsx(IIe.Provider,{scope:e.__scopeAccordion,children:"multiple"===n?vs.jsx(UIe,{...s,ref:t}):vs.jsx(BIe,{...r,ref:t})})}));PIe.displayName=MIe;var[OIe,RIe]=LIe(MIe),[zIe,FIe]=LIe(MIe,{collapsible:!1}),BIe=ds.forwardRef(((e,t)=>{const{value:n,defaultValue:a,onValueChange:r=()=>{},collapsible:s=!1,...i}=e,[o,l]=yv({prop:n,defaultProp:a??"",onChange:r,caller:MIe});return vs.jsx(OIe,{scope:e.__scopeAccordion,value:ds.useMemo((()=>o?[o]:[]),[o]),onItemOpen:l,onItemClose:ds.useCallback((()=>s&&l("")),[s,l]),children:vs.jsx(zIe,{scope:e.__scopeAccordion,collapsible:s,children:vs.jsx(VIe,{...i,ref:t})})})})),UIe=ds.forwardRef(((e,t)=>{const{value:n,defaultValue:a,onValueChange:r=()=>{},...s}=e,[i,o]=yv({prop:n,defaultProp:a??[],onChange:r,caller:MIe}),l=ds.useCallback((e=>o(((t=[])=>[...t,e]))),[o]),c=ds.useCallback((e=>o(((t=[])=>t.filter((t=>t!==e))))),[o]);return vs.jsx(OIe,{scope:e.__scopeAccordion,value:i,onItemOpen:l,onItemClose:c,children:vs.jsx(zIe,{scope:e.__scopeAccordion,collapsible:!0,children:vs.jsx(VIe,{...s,ref:t})})})})),[WIe,GIe]=LIe(MIe),VIe=ds.forwardRef(((e,t)=>{const{__scopeAccordion:n,disabled:a,dir:r,orientation:s="vertical",...i}=e,o=Gy(ds.useRef(null),t),l=AIe(n),c="ltr"===ST(r),d=By(e.onKeyDown,(e=>{var t;if(!_Ie.includes(e.key))return;const n=e.target,a=l().filter((e=>{var t;return!(null==(t=e.ref.current)?void 0:t.disabled)})),r=a.findIndex((e=>e.ref.current===n)),i=a.length;if(-1===r)return;e.preventDefault();let o=r;const d=i-1,u=()=>{o=r+1,o>d&&(o=0)},f=()=>{o=r-1,o<0&&(o=d)};switch(e.key){case"Home":o=0;break;case"End":o=d;break;case"ArrowRight":"horizontal"===s&&(c?u():f());break;case"ArrowDown":"vertical"===s&&u();break;case"ArrowLeft":"horizontal"===s&&(c?f():u());break;case"ArrowUp":"vertical"===s&&f()}null==(t=a[o%i].ref.current)||t.focus()}));return vs.jsx(WIe,{scope:n,disabled:a,direction:r,orientation:s,children:vs.jsx(IIe.Slot,{scope:n,children:vs.jsx(Xy.div,{...i,"data-orientation":s,ref:o,onKeyDown:a?void 0:d})})})})),HIe="AccordionItem",[qIe,$Ie]=LIe(HIe),YIe=ds.forwardRef(((e,t)=>{const{__scopeAccordion:n,value:a,...r}=e,s=GIe(HIe,n),i=RIe(HIe,n),o=DIe(n),l=SN(),c=a&&i.value.includes(a)||!1,d=s.disabled||e.disabled;return vs.jsx(qIe,{scope:n,open:c,disabled:d,triggerId:l,children:vs.jsx(N6,{"data-orientation":s.orientation,"data-state":tAe(c),...o,...r,ref:t,disabled:d,open:c,onOpenChange:e=>{e?i.onItemOpen(a):i.onItemClose(a)}})})}));YIe.displayName=HIe;var QIe="AccordionHeader",KIe=ds.forwardRef(((e,t)=>{const{__scopeAccordion:n,...a}=e,r=GIe(MIe,n),s=$Ie(QIe,n);return vs.jsx(Xy.h3,{"data-orientation":r.orientation,"data-state":tAe(s.open),"data-disabled":s.disabled?"":void 0,...a,ref:t})}));KIe.displayName=QIe;var JIe="AccordionTrigger",ZIe=ds.forwardRef(((e,t)=>{const{__scopeAccordion:n,...a}=e,r=GIe(MIe,n),s=$Ie(JIe,n),i=FIe(JIe,n),o=DIe(n);return vs.jsx(IIe.ItemSlot,{scope:n,children:vs.jsx(C6,{"aria-disabled":s.open&&!i.collapsible||void 0,"data-orientation":r.orientation,id:s.triggerId,...o,...a,ref:t})})}));ZIe.displayName=JIe;var XIe="AccordionContent",eAe=ds.forwardRef(((e,t)=>{const{__scopeAccordion:n,...a}=e,r=GIe(MIe,n),s=$Ie(XIe,n),i=DIe(n);return vs.jsx(S6,{role:"region","aria-labelledby":s.triggerId,"data-orientation":r.orientation,...i,...a,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})}));function tAe(e){return e?"open":"closed"}eAe.displayName=XIe;var nAe=YIe,aAe=KIe,rAe=ZIe,sAe=eAe;const iAe=PIe,oAe=cs.forwardRef((({className:e,...t},n)=>vs.jsx(nAe,{ref:n,className:fN("border-b",e),...t})));oAe.displayName="AccordionItem";const lAe=cs.forwardRef((({className:e,children:t,...n},a)=>vs.jsx(aAe,{className:"flex",children:vs.jsxs(rAe,{ref:a,className:fN("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,vs.jsx(Mb,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})));lAe.displayName=rAe.displayName;const cAe=cs.forwardRef((({className:e,children:t,...n},a)=>vs.jsx(sAe,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:vs.jsx("div",{className:fN("pb-4 pt-0",e),children:t})})));cAe.displayName=sAe.displayName;var dAe=e=>"checkbox"===e.type,uAe=e=>e instanceof Date,fAe=e=>null==e;const mAe=e=>"object"==typeof e;var pAe=e=>!fAe(e)&&!Array.isArray(e)&&mAe(e)&&!uAe(e),hAe=e=>pAe(e)&&e.target?dAe(e.target)?e.target.checked:e.target.value:e,gAe=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),xAe="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function yAe(e){let t;const n=Array.isArray(e),a="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(xAe&&(e instanceof Blob||a)||!n&&!pAe(e))return e;if(t=n?[]:{},n||(e=>{const t=e.constructor&&e.constructor.prototype;return pAe(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=yAe(e[n]));else t=e}return t}var vAe=e=>Array.isArray(e)?e.filter(Boolean):[],bAe=e=>void 0===e,wAe=(e,t,n)=>{if(!t||!pAe(e))return n;const a=vAe(t.split(/[,[\].]+?/)).reduce(((e,t)=>fAe(e)?e:e[t]),e);return bAe(a)||a===e?bAe(e[t])?n:e[t]:a},jAe=e=>"boolean"==typeof e,NAe=e=>/^\w*$/.test(e),CAe=e=>vAe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),SAe=(e,t,n)=>{let a=-1;const r=NAe(t)?[t]:CAe(t),s=r.length,i=s-1;for(;++a<s;){const t=r[a];let s=n;if(a!==i){const n=e[t];s=pAe(n)||Array.isArray(n)?n:isNaN(+r[a+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=s,e=e[t]}};const kAe="blur",MAe="focusout",_Ae="change",IAe="onBlur",AAe="onChange",EAe="onSubmit",LAe="onTouched",TAe="all",DAe="max",PAe="min",OAe="maxLength",RAe="minLength",zAe="pattern",FAe="required",BAe="validate",UAe=ds.createContext(null),WAe=()=>ds.useContext(UAe);var GAe=(e,t,n,a=!0)=>{const r={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(r,s,{get:()=>{const r=s;return t._proxyFormState[r]!==TAe&&(t._proxyFormState[r]=!a||TAe),n&&(n[r]=!0),e[r]}});return r};const VAe="undefined"!=typeof window?cs.useLayoutEffect:cs.useEffect;var HAe=e=>"string"==typeof e,qAe=(e,t,n,a,r)=>HAe(e)?(a&&t.watch.add(e),wAe(n,e,r)):Array.isArray(e)?e.map((e=>(a&&t.watch.add(e),wAe(n,e)))):(a&&(t.watchAll=!0),n);function $Ae(e){const t=WAe(),{name:n,disabled:a,control:r=t.control,shouldUnregister:s}=e,i=gAe(r._names.array,n),o=function(e){const t=WAe(),{control:n=t.control,name:a,defaultValue:r,disabled:s,exact:i}=e||{},o=ds.useRef(r),[l,c]=ds.useState(n._getWatch(a,o.current));return VAe((()=>n._subscribe({name:a,formState:{values:!0},exact:i,callback:e=>!s&&c(qAe(a,n._names,e.values||n._formValues,!1,o.current))})),[a,n,s,i]),ds.useEffect((()=>n._removeUnmounted())),l}({control:r,name:n,defaultValue:wAe(r._formValues,n,wAe(r._defaultValues,n,e.defaultValue)),exact:!0}),l=function(e){const t=WAe(),{control:n=t.control,disabled:a,name:r,exact:s}=e||{},[i,o]=ds.useState(n._formState),l=ds.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return VAe((()=>n._subscribe({name:r,formState:l.current,exact:s,callback:e=>{!a&&o({...n._formState,...e})}})),[r,a,s]),ds.useEffect((()=>{l.current.isValid&&n._setValid(!0)}),[n]),ds.useMemo((()=>GAe(i,n,l.current,!1)),[i,n])}({control:r,name:n,exact:!0}),c=ds.useRef(e),d=ds.useRef(r.register(n,{...e.rules,value:o,...jAe(e.disabled)?{disabled:e.disabled}:{}})),u=ds.useMemo((()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!wAe(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!wAe(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!wAe(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!wAe(l.validatingFields,n)},error:{enumerable:!0,get:()=>wAe(l.errors,n)}})),[l,n]),f=ds.useCallback((e=>d.current.onChange({target:{value:hAe(e),name:n},type:_Ae})),[n]),m=ds.useCallback((()=>d.current.onBlur({target:{value:wAe(r._formValues,n),name:n},type:kAe})),[n,r._formValues]),p=ds.useCallback((e=>{const t=wAe(r._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}),[r._fields,n]),h=ds.useMemo((()=>({name:n,value:o,...jAe(a)||l.disabled?{disabled:l.disabled||a}:{},onChange:f,onBlur:m,ref:p})),[n,a,l.disabled,f,m,p,o]);return ds.useEffect((()=>{const e=r._options.shouldUnregister||s;r.register(n,{...c.current.rules,...jAe(c.current.disabled)?{disabled:c.current.disabled}:{}});const t=(e,t)=>{const n=wAe(r._fields,e);n&&n._f&&(n._f.mount=t)};if(t(n,!0),e){const e=yAe(wAe(r._options.defaultValues,n));SAe(r._defaultValues,n,e),bAe(wAe(r._formValues,n))&&SAe(r._formValues,n,e)}return!i&&r.register(n),()=>{(i?e&&!r._state.action:e)?r.unregister(n):t(n,!1)}}),[n,r,i,s]),ds.useEffect((()=>{r._setDisabledField({disabled:a,name:n})}),[a,n,r]),ds.useMemo((()=>({field:h,formState:l,fieldState:u})),[h,l,u])}const YAe=e=>e.render($Ae(e));var QAe=(e,t,n,a,r)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[a]:r||!0}}:{},KAe=e=>Array.isArray(e)?e:[e],JAe=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},ZAe=e=>fAe(e)||!mAe(e);function XAe(e,t){if(ZAe(e)||ZAe(t))return e===t;if(uAe(e)&&uAe(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(const r of n){const n=e[r];if(!a.includes(r))return!1;if("ref"!==r){const e=t[r];if(uAe(n)&&uAe(e)||pAe(n)&&pAe(e)||Array.isArray(n)&&Array.isArray(e)?!XAe(n,e):n!==e)return!1}}return!0}var eEe=e=>pAe(e)&&!Object.keys(e).length,tEe=e=>"file"===e.type,nEe=e=>"function"==typeof e,aEe=e=>{if(!xAe)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},rEe=e=>"select-multiple"===e.type,sEe=e=>"radio"===e.type,iEe=e=>aEe(e)&&e.isConnected;function oEe(e,t){const n=Array.isArray(t)?t:NAe(t)?[t]:CAe(t),a=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let a=0;for(;a<n;)e=bAe(e)?a++:e[t[a++]];return e}(e,n),r=n.length-1,s=n[r];return a&&delete a[s],0!==r&&(pAe(a)&&eEe(a)||Array.isArray(a)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!bAe(e[t]))return!1;return!0}(a))&&oEe(e,n.slice(0,-1)),e}var lEe=e=>{for(const t in e)if(nEe(e[t]))return!0;return!1};function cEe(e,t={}){const n=Array.isArray(e);if(pAe(e)||n)for(const a in e)Array.isArray(e[a])||pAe(e[a])&&!lEe(e[a])?(t[a]=Array.isArray(e[a])?[]:{},cEe(e[a],t[a])):fAe(e[a])||(t[a]=!0);return t}function dEe(e,t,n){const a=Array.isArray(e);if(pAe(e)||a)for(const r in e)Array.isArray(e[r])||pAe(e[r])&&!lEe(e[r])?bAe(t)||ZAe(n[r])?n[r]=Array.isArray(e[r])?cEe(e[r],[]):{...cEe(e[r])}:dEe(e[r],fAe(t)?{}:t[r],n[r]):n[r]=!XAe(e[r],t[r]);return n}var uEe=(e,t)=>dEe(e,t,cEe(t));const fEe={value:!1,isValid:!1},mEe={value:!0,isValid:!0};var pEe=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!bAe(e[0].attributes.value)?bAe(e[0].value)||""===e[0].value?mEe:{value:e[0].value,isValid:!0}:mEe:fEe}return fEe},hEe=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:a})=>bAe(e)?e:t?""===e?NaN:e?+e:e:n&&HAe(e)?new Date(e):a?a(e):e;const gEe={isValid:!1,value:null};var xEe=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),gEe):gEe;function yEe(e){const t=e.ref;return tEe(t)?t.files:sEe(t)?xEe(e.refs).value:rEe(t)?[...t.selectedOptions].map((({value:e})=>e)):dAe(t)?pEe(e.refs).value:hEe(bAe(t.value)?e.ref.value:t.value,e)}var vEe=e=>e instanceof RegExp,bEe=e=>bAe(e)?e:vEe(e)?e.source:pAe(e)?vEe(e.value)?e.value.source:e.value:e,wEe=e=>({isOnSubmit:!e||e===EAe,isOnBlur:e===IAe,isOnChange:e===AAe,isOnAll:e===TAe,isOnTouch:e===LAe});const jEe="AsyncFunction";var NEe=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const CEe=(e,t,n,a)=>{for(const r of n||Object.keys(e)){const n=wAe(e,r);if(n){const{_f:e,...s}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],r)&&!a)return!0;if(e.ref&&t(e.ref,e.name)&&!a)return!0;if(CEe(s,t))break}else if(pAe(s)&&CEe(s,t))break}}};function SEe(e,t,n){const a=wAe(e,n);if(a||NAe(n))return{error:a,name:n};const r=n.split(".");for(;r.length;){const a=r.join("."),s=wAe(t,a),i=wAe(e,a);if(s&&!Array.isArray(s)&&n!==a)return{name:n};if(i&&i.type)return{name:a,error:i};r.pop()}return{name:n}}var kEe=(e,t,n)=>{const a=KAe(wAe(e,n));return SAe(a,"root",t[n]),SAe(e,n,a),e},MEe=e=>HAe(e);function _Ee(e,t,n="validate"){if(MEe(e)||Array.isArray(e)&&e.every(MEe)||jAe(e)&&!e)return{type:n,message:MEe(e)?e:"",ref:t}}var IEe=e=>pAe(e)&&!vEe(e)?e:{value:e,message:""},AEe=async(e,t,n,a,r,s)=>{const{ref:i,refs:o,required:l,maxLength:c,minLength:d,min:u,max:f,pattern:m,validate:p,name:h,valueAsNumber:g,mount:x}=e._f,y=wAe(n,h);if(!x||t.has(h))return{};const v=o?o[0]:i,b=e=>{r&&v.reportValidity&&(v.setCustomValidity(jAe(e)?"":e||""),v.reportValidity())},w={},j=sEe(i),N=dAe(i),C=j||N,S=(g||tEe(i))&&bAe(i.value)&&bAe(y)||aEe(i)&&""===i.value||""===y||Array.isArray(y)&&!y.length,k=QAe.bind(null,h,a,w),M=(e,t,n,a=OAe,r=RAe)=>{const s=e?t:n;w[h]={type:e?a:r,message:s,ref:i,...k(e?a:r,s)}};if(s?!Array.isArray(y)||!y.length:l&&(!C&&(S||fAe(y))||jAe(y)&&!y||N&&!pEe(o).isValid||j&&!xEe(o).isValid)){const{value:e,message:t}=MEe(l)?{value:!!l,message:l}:IEe(l);if(e&&(w[h]={type:FAe,message:t,ref:v,...k(FAe,t)},!a))return b(t),w}if(!(S||fAe(u)&&fAe(f))){let e,t;const n=IEe(f),r=IEe(u);if(fAe(y)||isNaN(y)){const a=i.valueAsDate||new Date(y),s=e=>new Date((new Date).toDateString()+" "+e),o="time"==i.type,l="week"==i.type;HAe(n.value)&&y&&(e=o?s(y)>s(n.value):l?y>n.value:a>new Date(n.value)),HAe(r.value)&&y&&(t=o?s(y)<s(r.value):l?y<r.value:a<new Date(r.value))}else{const a=i.valueAsNumber||(y?+y:y);fAe(n.value)||(e=a>n.value),fAe(r.value)||(t=a<r.value)}if((e||t)&&(M(!!e,n.message,r.message,DAe,PAe),!a))return b(w[h].message),w}if((c||d)&&!S&&(HAe(y)||s&&Array.isArray(y))){const e=IEe(c),t=IEe(d),n=!fAe(e.value)&&y.length>+e.value,r=!fAe(t.value)&&y.length<+t.value;if((n||r)&&(M(n,e.message,t.message),!a))return b(w[h].message),w}if(m&&!S&&HAe(y)){const{value:e,message:t}=IEe(m);if(vEe(e)&&!y.match(e)&&(w[h]={type:zAe,message:t,ref:i,...k(zAe,t)},!a))return b(t),w}if(p)if(nEe(p)){const e=_Ee(await p(y,n),v);if(e&&(w[h]={...e,...k(BAe,e.message)},!a))return b(e.message),w}else if(pAe(p)){let e={};for(const t in p){if(!eEe(e)&&!a)break;const r=_Ee(await p[t](y,n),v,t);r&&(e={...r,...k(t,r.message)},b(r.message),a&&(w[h]=e))}if(!eEe(e)&&(w[h]={ref:v,...e},!a))return w}return b(!0),w};const EEe={mode:EAe,reValidateMode:AAe,shouldFocusError:!0};function LEe(e={}){let t={...EEe,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:nEe(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const a={};let r,s=(pAe(t.defaultValues)||pAe(t.values))&&yAe(t.defaultValues||t.values)||{},i=t.shouldUnregister?{}:yAe(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...d};const f={array:JAe(),state:JAe()},m=t.criteriaMode===TAe,p=async e=>{if(!t.disabled&&(d.isValid||u.isValid||e)){const e=t.resolver?eEe((await v()).errors):await b(a,!0);e!==n.isValid&&f.state.next({isValid:e})}},h=(e,a)=>{!t.disabled&&(d.isValidating||d.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(l.mount)).forEach((e=>{e&&(a?SAe(n.validatingFields,e,a):oEe(n.validatingFields,e))})),f.state.next({validatingFields:n.validatingFields,isValidating:!eEe(n.validatingFields)}))},g=(e,t,n,r)=>{const l=wAe(a,e);if(l){const a=wAe(i,e,bAe(n)?wAe(s,e):n);bAe(a)||r&&r.defaultChecked||t?SAe(i,e,t?a:yEe(l._f)):N(e,a),o.mount&&p()}},x=(e,a,r,i,o)=>{let l=!1,c=!1;const m={name:e};if(!t.disabled){if(!r||i){(d.isDirty||u.isDirty)&&(c=n.isDirty,n.isDirty=m.isDirty=w(),l=c!==m.isDirty);const t=XAe(wAe(s,e),a);c=!!wAe(n.dirtyFields,e),t?oEe(n.dirtyFields,e):SAe(n.dirtyFields,e,!0),m.dirtyFields=n.dirtyFields,l=l||(d.dirtyFields||u.dirtyFields)&&c!==!t}if(r){const t=wAe(n.touchedFields,e);t||(SAe(n.touchedFields,e,r),m.touchedFields=n.touchedFields,l=l||(d.touchedFields||u.touchedFields)&&t!==r)}l&&o&&f.state.next(m)}return l?m:{}},y=(e,a,s,i)=>{const o=wAe(n.errors,e),l=(d.isValid||u.isValid)&&jAe(a)&&n.isValid!==a;var m;if(t.delayError&&s?(m=()=>((e,t)=>{SAe(n.errors,e,t),f.state.next({errors:n.errors})})(e,s),r=e=>{clearTimeout(c),c=setTimeout(m,e)},r(t.delayError)):(clearTimeout(c),r=null,s?SAe(n.errors,e,s):oEe(n.errors,e)),(s?!XAe(o,s):o)||!eEe(i)||l){const t={...i,...l&&jAe(a)?{isValid:a}:{},errors:n.errors,name:e};n={...n,...t},f.state.next(t)}},v=async e=>{h(e,!0);const n=await t.resolver(i,t.context,((e,t,n,a)=>{const r={};for(const s of e){const e=wAe(t,s);e&&SAe(r,s,e._f)}return{criteriaMode:n,names:[...e],fields:r,shouldUseNativeValidation:a}})(e||l.mount,a,t.criteriaMode,t.shouldUseNativeValidation));return h(e),n},b=async(e,a,r={valid:!0})=>{for(const o in e){const c=e[o];if(c){const{_f:e,...u}=c;if(e){const u=l.array.has(e.name),f=c._f&&(!!(s=c._f)&&!!s.validate&&!!(nEe(s.validate)&&s.validate.constructor.name===jEe||pAe(s.validate)&&Object.values(s.validate).find((e=>e.constructor.name===jEe))));f&&d.validatingFields&&h([o],!0);const p=await AEe(c,l.disabled,i,m,t.shouldUseNativeValidation&&!a,u);if(f&&d.validatingFields&&h([o]),p[e.name]&&(r.valid=!1,a))break;!a&&(wAe(p,e.name)?u?kEe(n.errors,p,e.name):SAe(n.errors,e.name,p[e.name]):oEe(n.errors,e.name))}!eEe(u)&&await b(u,a,r)}}var s;return r.valid},w=(e,n)=>!t.disabled&&(e&&n&&SAe(i,e,n),!XAe(I(),s)),j=(e,t,n)=>qAe(e,l,{...o.mount?i:bAe(t)?s:HAe(e)?{[e]:t}:t},n,t),N=(e,t,n={})=>{const r=wAe(a,e);let s=t;if(r){const n=r._f;n&&(!n.disabled&&SAe(i,e,hEe(t,n)),s=aEe(n.ref)&&fAe(t)?"":t,rEe(n.ref)?[...n.ref.options].forEach((e=>e.selected=s.includes(e.value))):n.refs?dAe(n.ref)?n.refs.forEach((e=>{e.defaultChecked&&e.disabled||(Array.isArray(s)?e.checked=!!s.find((t=>t===e.value)):e.checked=s===e.value||!!s)})):n.refs.forEach((e=>e.checked=e.value===s)):tEe(n.ref)?n.ref.value="":(n.ref.value=s,n.ref.type||f.state.next({name:e,values:yAe(i)})))}(n.shouldDirty||n.shouldTouch)&&x(e,s,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&_(e)},C=(e,t,n)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const s=t[r],i=`${e}.${r}`,o=wAe(a,i);(l.array.has(e)||pAe(s)||o&&!o._f)&&!uAe(s)?C(i,s,n):N(i,s,n)}},S=(e,t,r={})=>{const c=wAe(a,e),m=l.array.has(e),p=yAe(t);SAe(i,e,p),m?(f.array.next({name:e,values:yAe(i)}),(d.isDirty||d.dirtyFields||u.isDirty||u.dirtyFields)&&r.shouldDirty&&f.state.next({name:e,dirtyFields:uEe(s,i),isDirty:w(e,p)})):!c||c._f||fAe(p)?N(e,p,r):C(e,p,r),NEe(e,l)&&f.state.next({...n}),f.state.next({name:o.mount?e:void 0,values:yAe(i)})},k=async e=>{o.mount=!0;const s=e.target;let c=s.name,g=!0;const w=wAe(a,c),j=e=>{g=Number.isNaN(e)||uAe(e)&&isNaN(e.getTime())||XAe(e,wAe(i,c,e))},N=wEe(t.mode),C=wEe(t.reValidateMode);if(w){let o,S;const k=s.type?yEe(w._f):hAe(e),M=e.type===kAe||e.type===MAe,I=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(w._f)&&!t.resolver&&!wAe(n.errors,c)&&!w._f.deps||((e,t,n,a,r)=>!r.isOnAll&&(!n&&r.isOnTouch?!(t||e):(n?a.isOnBlur:r.isOnBlur)?!e:!(n?a.isOnChange:r.isOnChange)||e))(M,wAe(n.touchedFields,c),n.isSubmitted,C,N),A=NEe(c,l,M);SAe(i,c,k),M?(w._f.onBlur&&w._f.onBlur(e),r&&r(0)):w._f.onChange&&w._f.onChange(e);const E=x(c,k,M),L=!eEe(E)||A;if(!M&&f.state.next({name:c,type:e.type,values:yAe(i)}),I)return(d.isValid||u.isValid)&&("onBlur"===t.mode?M&&p():M||p()),L&&f.state.next({name:c,...A?{}:E});if(!M&&A&&f.state.next({...n}),t.resolver){const{errors:e}=await v([c]);if(j(k),g){const t=SEe(n.errors,a,c),r=SEe(e,a,t.name||c);o=r.error,c=r.name,S=eEe(e)}}else h([c],!0),o=(await AEe(w,l.disabled,i,m,t.shouldUseNativeValidation))[c],h([c]),j(k),g&&(o?S=!1:(d.isValid||u.isValid)&&(S=await b(a,!0)));g&&(w._f.deps&&_(w._f.deps),y(c,S,o,E))}},M=(e,t)=>{if(wAe(n.errors,t)&&e.focus)return e.focus(),1},_=async(e,r={})=>{let s,i;const o=KAe(e);if(t.resolver){const t=await(async e=>{const{errors:t}=await v(e);if(e)for(const a of e){const e=wAe(t,a);e?SAe(n.errors,a,e):oEe(n.errors,a)}else n.errors=t;return t})(bAe(e)?e:o);s=eEe(t),i=e?!o.some((e=>wAe(t,e))):s}else e?(i=(await Promise.all(o.map((async e=>{const t=wAe(a,e);return await b(t&&t._f?{[e]:t}:t)})))).every(Boolean),(i||n.isValid)&&p()):i=s=await b(a);return f.state.next({...!HAe(e)||(d.isValid||u.isValid)&&s!==n.isValid?{}:{name:e},...t.resolver||!e?{isValid:s}:{},errors:n.errors}),r.shouldFocus&&!i&&CEe(a,M,e?o:l.mount),i},I=e=>{const t={...o.mount?i:s};return bAe(e)?t:HAe(e)?wAe(t,e):e.map((e=>wAe(t,e)))},A=(e,t)=>({invalid:!!wAe((t||n).errors,e),isDirty:!!wAe((t||n).dirtyFields,e),error:wAe((t||n).errors,e),isValidating:!!wAe(n.validatingFields,e),isTouched:!!wAe((t||n).touchedFields,e)}),E=(e,t,r)=>{const s=(wAe(a,e,{_f:{}})._f||{}).ref,i=wAe(n.errors,e)||{},{ref:o,message:l,type:c,...d}=i;SAe(n.errors,e,{...d,...t,ref:s}),f.state.next({name:e,errors:n.errors,isValid:!1}),r&&r.shouldFocus&&s&&s.focus&&s.focus()},L=e=>f.state.subscribe({next:t=>{var a,r,s;a=e.name,r=t.name,s=e.exact,a&&r&&a!==r&&!KAe(a).some((e=>e&&(s?e===r:e.startsWith(r)||r.startsWith(e))))||!((e,t,n,a)=>{n(e);const{name:r,...s}=e;return eEe(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find((e=>t[e]===(!a||TAe)))})(t,e.formState||d,B,e.reRenderRoot)||e.callback({values:{...i},...n,...t})}}).unsubscribe,T=(e,r={})=>{for(const o of e?KAe(e):l.mount)l.mount.delete(o),l.array.delete(o),r.keepValue||(oEe(a,o),oEe(i,o)),!r.keepError&&oEe(n.errors,o),!r.keepDirty&&oEe(n.dirtyFields,o),!r.keepTouched&&oEe(n.touchedFields,o),!r.keepIsValidating&&oEe(n.validatingFields,o),!t.shouldUnregister&&!r.keepDefaultValue&&oEe(s,o);f.state.next({values:yAe(i)}),f.state.next({...n,...r.keepDirty?{isDirty:w()}:{}}),!r.keepIsValid&&p()},D=({disabled:e,name:t})=>{(jAe(e)&&o.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},P=(e,n={})=>{let r=wAe(a,e);const i=jAe(n.disabled)||jAe(t.disabled);return SAe(a,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...n}}),l.mount.add(e),r?D({disabled:jAe(n.disabled)?n.disabled:t.disabled,name:e}):g(e,!0,n.value),{...i?{disabled:n.disabled||t.disabled}:{},...t.progressive?{required:!!n.required,min:bEe(n.min),max:bEe(n.max),minLength:bEe(n.minLength),maxLength:bEe(n.maxLength),pattern:bEe(n.pattern)}:{},name:e,onChange:k,onBlur:k,ref:i=>{if(i){P(e,n),r=wAe(a,e);const t=bAe(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=(e=>sEe(e)||dAe(e))(t),l=r._f.refs||[];if(o?l.find((e=>e===t)):t===r._f.ref)return;SAe(a,e,{_f:{...r._f,...o?{refs:[...l.filter(iEe),t,...Array.isArray(wAe(s,e))?[{}]:[]],ref:{type:t.type,name:e}}:{ref:t}}}),g(e,!1,void 0,t)}else r=wAe(a,e,{}),r._f&&(r._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&(!gAe(l.array,e)||!o.action)&&l.unMount.add(e)}}},O=()=>t.shouldFocusError&&CEe(a,M,l.mount),R=(e,r)=>async s=>{let o;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let c=yAe(i);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:e,values:t}=await v();n.errors=e,c=t}else await b(a);if(l.disabled.size)for(const e of l.disabled)SAe(c,e,void 0);if(oEe(n.errors,"root"),eEe(n.errors)){f.state.next({errors:{}});try{await e(c,s)}catch(d){o=d}}else r&&await r({...n.errors},s),O(),setTimeout(O);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:eEe(n.errors)&&!o,submitCount:n.submitCount+1,errors:n.errors}),o)throw o},z=(e,r={})=>{const c=e?yAe(e):s,u=yAe(c),m=eEe(e),p=m?s:u;if(r.keepDefaultValues||(s=c),!r.keepValues){if(r.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(uEe(s,i))]);for(const t of Array.from(e))wAe(n.dirtyFields,t)?SAe(p,t,wAe(i,t)):S(t,wAe(p,t))}else{if(xAe&&bAe(e))for(const e of l.mount){const t=wAe(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(aEe(e)){const t=e.closest("form");if(t){t.reset();break}}}}for(const e of l.mount)S(e,wAe(p,e))}i=yAe(p),f.array.next({values:{...p}}),f.state.next({values:{...p}})}l={mount:r.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!r.keepIsValid||!!r.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:r.keepSubmitCount?n.submitCount:0,isDirty:!m&&(r.keepDirty?n.isDirty:!(!r.keepDefaultValues||XAe(e,s))),isSubmitted:!!r.keepIsSubmitted&&n.isSubmitted,dirtyFields:m?{}:r.keepDirtyValues?r.keepDefaultValues&&i?uEe(s,i):n.dirtyFields:r.keepDefaultValues&&e?uEe(s,e):r.keepDirty?n.dirtyFields:{},touchedFields:r.keepTouched?n.touchedFields:{},errors:r.keepErrors?n.errors:{},isSubmitSuccessful:!!r.keepIsSubmitSuccessful&&n.isSubmitSuccessful,isSubmitting:!1})},F=(e,t)=>z(nEe(e)?e(i):e,t),B=e=>{n={...n,...e}},U={control:{register:P,unregister:T,getFieldState:A,handleSubmit:R,setError:E,_subscribe:L,_runSchema:v,_getWatch:j,_getDirty:w,_setValid:p,_setFieldArray:(e,r=[],l,c,m=!0,p=!0)=>{if(c&&l&&!t.disabled){if(o.action=!0,p&&Array.isArray(wAe(a,e))){const t=l(wAe(a,e),c.argA,c.argB);m&&SAe(a,e,t)}if(p&&Array.isArray(wAe(n.errors,e))){const t=l(wAe(n.errors,e),c.argA,c.argB);m&&SAe(n.errors,e,t),((e,t)=>{!vAe(wAe(e,t)).length&&oEe(e,t)})(n.errors,e)}if((d.touchedFields||u.touchedFields)&&p&&Array.isArray(wAe(n.touchedFields,e))){const t=l(wAe(n.touchedFields,e),c.argA,c.argB);m&&SAe(n.touchedFields,e,t)}(d.dirtyFields||u.dirtyFields)&&(n.dirtyFields=uEe(s,i)),f.state.next({name:e,isDirty:w(e,r),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else SAe(i,e,r)},_setDisabledField:D,_setErrors:e=>{n.errors=e,f.state.next({errors:n.errors,isValid:!1})},_getFieldArray:e=>vAe(wAe(o.mount?i:s,e,t.shouldUnregister?wAe(s,e,[]):[])),_reset:z,_resetDefaultValues:()=>nEe(t.defaultValues)&&t.defaultValues().then((e=>{F(e,t.resetOptions),f.state.next({isLoading:!1})})),_removeUnmounted:()=>{for(const e of l.unMount){const t=wAe(a,e);t&&(t._f.refs?t._f.refs.every((e=>!iEe(e))):!iEe(t._f.ref))&&T(e)}l.unMount=new Set},_disableForm:e=>{jAe(e)&&(f.state.next({disabled:e}),CEe(a,((t,n)=>{const r=wAe(a,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach((t=>{t.disabled=r._f.disabled||e})))}),0,!1))},_subjects:f,_proxyFormState:d,get _fields(){return a},get _formValues(){return i},get _state(){return o},set _state(e){o=e},get _defaultValues(){return s},get _names(){return l},set _names(e){l=e},get _formState(){return n},get _options(){return t},set _options(e){t={...t,...e}}},subscribe:e=>(o.mount=!0,u={...u,...e.formState},L({...e,formState:u})),trigger:_,register:P,handleSubmit:R,watch:(e,t)=>nEe(e)?f.state.subscribe({next:n=>e(j(void 0,t),n)}):j(e,t,!0),setValue:S,getValues:I,reset:F,resetField:(e,t={})=>{wAe(a,e)&&(bAe(t.defaultValue)?S(e,yAe(wAe(s,e))):(S(e,t.defaultValue),SAe(s,e,yAe(t.defaultValue))),t.keepTouched||oEe(n.touchedFields,e),t.keepDirty||(oEe(n.dirtyFields,e),n.isDirty=t.defaultValue?w(e,yAe(wAe(s,e))):w()),t.keepError||(oEe(n.errors,e),d.isValid&&p()),f.state.next({...n}))},clearErrors:e=>{e&&KAe(e).forEach((e=>oEe(n.errors,e))),f.state.next({errors:e?n.errors:{}})},unregister:T,setError:E,setFocus:(e,t={})=>{const n=wAe(a,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&nEe(e.select)&&e.select())}},getFieldState:A};return{...U,formControl:U}}function TEe(e={}){const t=ds.useRef(void 0),n=ds.useRef(void 0),[a,r]=ds.useState({isDirty:!1,isValidating:!1,isLoading:nEe(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:nEe(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:LEe(e),formState:a},e.formControl&&e.defaultValues&&!nEe(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const s=t.current.control;return s._options=e,VAe((()=>{const e=s._subscribe({formState:s._proxyFormState,callback:()=>r({...s._formState}),reRenderRoot:!0});return r((e=>({...e,isReady:!0}))),s._formState.isReady=!0,e}),[s]),ds.useEffect((()=>s._disableForm(e.disabled)),[s,e.disabled]),ds.useEffect((()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode),e.errors&&!eEe(e.errors)&&s._setErrors(e.errors)}),[s,e.errors,e.mode,e.reValidateMode]),ds.useEffect((()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})}),[s,e.shouldUnregister]),ds.useEffect((()=>{if(s._proxyFormState.isDirty){const e=s._getDirty();e!==a.isDirty&&s._subjects.state.next({isDirty:e})}}),[s,a.isDirty]),ds.useEffect((()=>{e.values&&!XAe(e.values,n.current)?(s._reset(e.values,s._options.resetOptions),n.current=e.values,r((e=>({...e})))):s._resetDefaultValues()}),[s,e.values]),ds.useEffect((()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()})),t.current.formState=GAe(a,s),t.current}const DEe=e=>{const{children:t,...n}=e;return ds.createElement(UAe.Provider,{value:n},t)},PEe=cs.createContext({}),OEe=({...e})=>vs.jsx(PEe.Provider,{value:{name:e.name},children:vs.jsx(YAe,{...e})}),REe=()=>{const e=cs.useContext(PEe),t=cs.useContext(zEe),{getFieldState:n,formState:a}=WAe(),r=n(e.name,a);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:s}=t;return{id:s,name:e.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...r}},zEe=cs.createContext({}),FEe=cs.forwardRef((({className:e,...t},n)=>{const a=cs.useId();return vs.jsx(zEe.Provider,{value:{id:a},children:vs.jsx("div",{ref:n,className:fN("space-y-2",e),...t})})}));FEe.displayName="FormItem";const BEe=cs.forwardRef((({className:e,...t},n)=>{const{error:a,formItemId:r}=REe();return vs.jsx(EB,{ref:n,className:fN(a&&"text-destructive",e),htmlFor:r,...t})}));BEe.displayName="FormLabel";const UEe=cs.forwardRef((({...e},t)=>{const{error:n,formItemId:a,formDescriptionId:r,formMessageId:s}=REe();return vs.jsx($y,{ref:t,id:a,"aria-describedby":n?`${r} ${s}`:`${r}`,"aria-invalid":!!n,...e})}));UEe.displayName="FormControl";const WEe=cs.forwardRef((({className:e,...t},n)=>{const{formDescriptionId:a}=REe();return vs.jsx("p",{ref:n,id:a,className:fN("text-sm text-muted-foreground",e),...t})}));WEe.displayName="FormDescription";const GEe=cs.forwardRef((({className:e,children:t,...n},a)=>{const{error:r,formMessageId:s}=REe(),i=r?String((null==r?void 0:r.message)??""):t;return i?vs.jsx("p",{ref:a,id:s,className:fN("text-sm font-medium text-destructive",e),...n,children:i}):null}));function VEe(e,t="v22.0"){return new Promise((n=>{if(document.getElementById("facebook-jssdk"))return void n();window.fbAsyncInit=function(){window.FB.init({appId:e,autoLogAppEvents:!0,xfbml:!0,version:t}),n()};const a=document.createElement("script");a.id="facebook-jssdk",a.src="https://connect.facebook.net/en_US/sdk.js",a.async=!0,a.defer=!0,a.crossOrigin="anonymous",document.head.appendChild(a)}))}function HEe(e){window.addEventListener("message",(t=>{if("https://www.facebook.com"===t.origin||"https://web.facebook.com"===t.origin)try{const n=JSON.parse(t.data);"WA_EMBEDDED_SIGNUP"===n.type&&e(n)}catch{}}))}function qEe(e,t){window.FB&&window.FB.login(t,{config_id:e,response_type:"code",override_default_response_type:!0,extras:{setup:{},featureType:"",sessionInfoVersion:"3"}})}GEe.displayName="FormMessage";const $Ee="YOUR_FB_APP_ID",YEe="YOUR_WHATSAPP_CONFIG_ID",QEe="v18.0";function KEe({isOpen:e,onClose:t,onSuccess:n}){const{toast:a}=Fy(),[r,s]=cs.useState(!1),[i,o]=cs.useState(!1),[l,c]=cs.useState(!1),[d,u]=cs.useState(null),[f,m]=cs.useState({acceptTerms:!1,acceptPrivacyPolicy:!1});cs.useEffect((()=>{if(e&&!r){(async()=>{try{const e=function(){const e=[];return e.push("VITE_FACEBOOK_APP_ID"),e.push("VITE_WHATSAPP_CONFIG_ID"),{isValid:0===e.length,missingFields:e}}();if(!e.isValid)return u(`Missing configuration: ${e.missingFields.join(", ")}`),c(!1),void a({title:"Configuration Error",description:`Missing environment variables: ${e.missingFields.join(", ")}. Please contact your administrator.`,variant:"destructive"});c(!0),u(null),await VEe($Ee,QEe),s(!0),HEe((e=>{e.wabaId&&e.phoneNumberId?g(e.wabaId,e.phoneNumberId):e.screen&&a({title:"Signup Incomplete",description:`Signup was abandoned at the ${e.screen} screen. Please try again.`,variant:"destructive"})}))}catch(e){u("Failed to initialize Facebook SDK"),a({title:"Integration Error",description:"Failed to initialize the WhatsApp Business signup process. Please try again later.",variant:"destructive"})}})()}}),[e,r,a]);const p=e=>{e.authResponse&&e.authResponse.code?h(e.authResponse.code):(o(!1),a({title:"Signup Cancelled",description:"The WhatsApp Business signup process was cancelled or encountered an error.",variant:"destructive"}))},h=async e=>{try{const r=await fetch("/api/channel-connections/whatsapp-embedded-signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})});if(!r.ok){const e=await r.json();throw new Error(e.message||"Failed to connect WhatsApp Business account")}await r.json();a({title:"Connection Successful",description:"Your WhatsApp Business account has been connected successfully."}),n(),t()}catch(r){a({title:"Connection Error",description:r.message||"Failed to connect your WhatsApp Business account.",variant:"destructive"})}finally{o(!1)}},g=async(e,r)=>{try{const s=await fetch("/api/channel-connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channelType:"whatsapp_official",accountId:e,accountName:"WhatsApp Business",connectionData:{phoneNumberId:r,wabaId:e}})});if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to connect WhatsApp Business account")}a({title:"Connection Successful",description:"Your WhatsApp Business account has been connected successfully."}),n(),t()}catch(s){a({title:"Connection Error",description:s.message||"Failed to connect your WhatsApp Business account.",variant:"destructive"})}finally{o(!1)}};return vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"sm:max-w-[500px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"WhatsApp Business API - Easy Setup"}),vs.jsx(MB,{children:"Quickly create a WhatsApp Business API account through Facebook Business. This is the official Meta-approved integration method."})]}),vs.jsxs("div",{className:"py-4",children:[vs.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-4 mb-4",children:[vs.jsx("h3",{className:"text-sm font-medium mb-2",children:"How it works:"}),vs.jsxs("ol",{className:"list-decimal pl-5 text-sm text-gray-600 space-y-1",children:[vs.jsx("li",{children:"You'll be redirected to Facebook to connect your business account"}),vs.jsx("li",{children:"Select a Facebook Business Manager account or create a new one"}),vs.jsx("li",{children:"Provide your business information and verify your phone number"}),vs.jsx("li",{children:"We'll create a WhatsApp Business API connection automatically"})]}),!l&&d&&vs.jsxs("div",{className:"mt-3 flex p-2 text-red-800 bg-red-50 rounded border border-red-200",children:[vs.jsx("i",{className:"ri-error-warning-line mt-0.5 mr-2"}),vs.jsxs("p",{className:"text-xs",children:[vs.jsx("strong",{children:"Configuration Error:"})," ",d,". Contact your administrator to set up the required environment variables."]})]}),l&&vs.jsxs("div",{className:"mt-3 flex p-2 text-green-800 bg-green-50 rounded border border-green-200",children:[vs.jsx("i",{className:"ri-check-line mt-0.5 mr-2"}),vs.jsxs("p",{className:"text-xs",children:[vs.jsx("strong",{children:"Configuration Valid:"})," WhatsApp Business API integration is properly configured."]})]}),!l&&!d&&vs.jsxs("div",{className:"mt-3 flex p-2 text-amber-800 bg-amber-50 rounded border border-amber-200",children:[vs.jsx("i",{className:"ri-error-warning-line mt-0.5 mr-2"}),vs.jsxs("p",{className:"text-xs",children:[vs.jsx("strong",{children:"Note:"})," This feature requires configuration of a Facebook App with WhatsApp Business permissions. Contact your administrator to set up the app credentials."]})]})]}),vs.jsxs("div",{className:"space-y-4 pt-2",children:[vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(V7,{id:"terms",checked:f.acceptTerms,onCheckedChange:e=>(e=>{m({...f,acceptTerms:e})})(!0===e)}),vs.jsxs("label",{htmlFor:"terms",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:["I agree to the ",vs.jsx("a",{href:"https://www.facebook.com/legal/whatsapp_api_terms_of_service",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"WhatsApp Business API Terms of Service"})]})]}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(V7,{id:"privacy",checked:f.acceptPrivacyPolicy,onCheckedChange:e=>(e=>{m({...f,acceptPrivacyPolicy:e})})(!0===e)}),vs.jsxs("label",{htmlFor:"privacy",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:["I agree to the ",vs.jsx("a",{href:"https://www.facebook.com/privacy/policy/",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"Meta Privacy Policy"})]})]})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"ghost",onClick:t,disabled:i,children:"Cancel"}),vs.jsx(lk,{onClick:()=>{if(f.acceptTerms&&f.acceptPrivacyPolicy)if(l){if(o(!0),!r)return a({title:"Please Wait",description:"The signup process is still initializing. Please try again in a moment."}),void o(!1);try{qEe(YEe,p)}catch(e){a({title:"Launch Error",description:e.message||"Failed to launch WhatsApp Business signup flow.",variant:"destructive"}),o(!1)}}else a({title:"Configuration Error",description:d||"WhatsApp Business API is not properly configured.",variant:"destructive"});else a({title:"Terms Required",description:"Please accept both the terms and privacy policy to continue.",variant:"destructive"})},disabled:i||!r||!l,children:i?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Connecting..."]}):vs.jsxs(vs.Fragment,{children:[vs.jsx("i",{className:"ri-facebook-fill w-4 h-4 mr-2 text-blue-600"}),"Continue with Facebook"]})})]})]})})}function JEe({isOpen:e,onClose:t,onSuccess:n}){const{toast:a}=Fy(),[r,s]=cs.useState(!1),[i,o]=cs.useState(!1),[l,c]=cs.useState({accountName:"",phoneNumberId:"",businessAccountId:"",accessToken:"",appId:"",appSecret:""}),d=e=>{const{name:t,value:n}=e.target;c({...l,[t]:n})},u=()=>{c({accountName:"",phoneNumberId:"",businessAccountId:"",accessToken:"",appId:"",appSecret:""}),s(!1),o(!1)},f=async()=>{var e;if(!l.accessToken||!l.phoneNumberId)return a({title:"Validation Error",description:"Access Token and Phone Number ID are required for validation.",variant:"destructive"}),!1;o(!0);try{const t=await fetch(`https://graph.facebook.com/v18.0/${l.phoneNumberId}?access_token=${l.accessToken}`);if(t.ok){const e=await t.json();return a({title:"Credentials Valid",description:`Successfully validated phone number: ${e.display_phone_number||l.phoneNumberId}`}),!0}{const n=await t.json();throw new Error((null==(e=n.error)?void 0:e.message)||"Invalid credentials")}}catch(t){return a({title:"Validation Failed",description:t.message||"Failed to validate WhatsApp Business API credentials.",variant:"destructive"}),!1}finally{o(!1)}};return vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"sm:max-w-[500px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Connect WhatsApp Business API"}),vs.jsx(MB,{children:"Connect your existing WhatsApp Business API account. You'll need your Meta for Developers credentials."})]}),vs.jsxs("form",{onSubmit:async e=>{e.preventDefault(),s(!0);try{if(!(await f()))return void s(!1);const e=await fetch("/api/channel-connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channelType:"whatsapp_official",accountId:l.phoneNumberId,accountName:l.accountName,accessToken:l.accessToken,connectionData:{phoneNumberId:l.phoneNumberId,businessAccountId:l.businessAccountId,accessToken:l.accessToken,appId:l.appId,appSecret:l.appSecret,wabaId:l.businessAccountId}})});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to create WhatsApp Business API connection")}t(),a({title:"WhatsApp Business API Connected",description:"Your WhatsApp Business API account has been connected successfully!"}),u(),n()}catch(r){a({title:"Connection Error",description:r.message||"Failed to connect to WhatsApp Business API",variant:"destructive"})}finally{s(!1)}},children:[vs.jsxs("div",{className:"grid gap-4 py-4",children:[vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"accountName",children:"Account Name"}),vs.jsx(LB,{id:"accountName",name:"accountName",value:l.accountName,onChange:d,placeholder:"e.g. My Business",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"A name to identify this connection"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"phoneNumberId",children:"Phone Number ID"}),vs.jsx(LB,{id:"phoneNumberId",name:"phoneNumberId",value:l.phoneNumberId,onChange:d,placeholder:"1234567890",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"From Meta for Developers dashboard"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"businessAccountId",children:"Business Account ID"}),vs.jsx(LB,{id:"businessAccountId",name:"businessAccountId",value:l.businessAccountId,onChange:d,placeholder:"1234567890",required:!0})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"accessToken",children:"Access Token"}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(LB,{id:"accessToken",name:"accessToken",value:l.accessToken,onChange:d,placeholder:"EAAxxxxx...",required:!0,className:"flex-1"}),vs.jsx(lk,{type:"button",variant:"outline",onClick:f,disabled:i||!l.accessToken||!l.phoneNumberId,className:"whitespace-nowrap",children:i?"Validating...":"Test"})]}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Long-lived or permanent access token from Meta for Developers"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"appId",children:"App ID"}),vs.jsx(LB,{id:"appId",name:"appId",value:l.appId,onChange:d,placeholder:"1234567890",required:!0})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"appSecret",children:"App Secret"}),vs.jsx(LB,{id:"appSecret",name:"appSecret",type:"password",value:l.appSecret,onChange:d,placeholder:"••••••••",required:!0})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:()=>{u(),t()},children:"Cancel"}),vs.jsx(lk,{type:"submit",variant:"outline",className:"btn-brand-primary",disabled:r||i,children:r?"Connecting...":"Connect"})]})]})]})})}function ZEe({isOpen:e,onClose:t,onSuccess:n}){const{toast:a}=Fy(),[r,s]=cs.useState(""),[i,o]=cs.useState(!1),[l,c]=cs.useState(!1),[d,u]=cs.useState(!1),[f,m]=cs.useState(!1);cs.useEffect((()=>{e&&p()}),[e]);const p=async()=>{try{m(!0);const e=await fetch("/api/admin/partner-configurations/meta");if(e.ok){const t=await e.json();u(t.isActive),t.isActive&&await h(t)}else u(!1)}catch(e){u(!1)}finally{m(!1)}},h=async e=>{try{await VEe(e.partnerApiKey),c(!0),HEe((async e=>{await g(e)}))}catch(t){a({title:"SDK Error",description:"Failed to initialize Facebook SDK",variant:"destructive"})}},g=async e=>{try{if("connected"!==e.status)throw new Error("Signup was not completed successfully");await x(e)}catch(t){a({title:"Signup Error",description:"Failed to process WhatsApp Business account signup",variant:"destructive"})}},x=async e=>{var s;try{o(!0);const i=await fetch("/api/channel-connections/meta-whatsapp-embedded-signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionName:r,signupData:e})});if(!i.ok){const e=await i.json();throw new Error(e.message||"Failed to process signup")}const l=await i.json();a({title:"Success!",description:`WhatsApp Business account connected successfully. ${(null==(s=l.phoneNumbers)?void 0:s.length)||0} phone number(s) configured.`}),n(),t()}catch(i){a({title:"Error",description:i instanceof Error?i.message:"Failed to process signup",variant:"destructive"})}finally{o(!1)}},y=()=>{i||t()};return f?vs.jsx(yB,{open:e,onOpenChange:y,children:vs.jsx(NB,{children:vs.jsxs("div",{className:"flex items-center justify-center py-8",children:[vs.jsx(uw,{className:"h-8 w-8 animate-spin"}),vs.jsx("span",{className:"ml-2",children:"Checking configuration..."})]})})}):d?vs.jsx(yB,{open:e,onOpenChange:y,children:vs.jsxs(NB,{className:"max-w-md",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Meta WhatsApp Business API - Easy Setup"}),vs.jsx(MB,{children:"Connect your WhatsApp Business account in just a few clicks using our integrated onboarding flow."})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"connectionName",children:"Connection Name"}),vs.jsx(LB,{id:"connectionName",value:r,onChange:e=>s(e.target.value),placeholder:"e.g., Main WhatsApp Business",disabled:i}),vs.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Give this connection a memorable name"})]}),vs.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[vs.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens next:"}),vs.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[vs.jsx("li",{children:"• Connect your Meta Business account"}),vs.jsx("li",{children:"• Select your WhatsApp Business account"}),vs.jsx("li",{children:"• Choose phone numbers to integrate"}),vs.jsx("li",{children:"• Automatic configuration and setup"})]})]}),!l&&vs.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(uw,{className:"h-4 w-4 text-yellow-600 animate-spin mr-2"}),vs.jsx("span",{className:"text-sm text-yellow-800",children:"Initializing Facebook SDK..."})]})})]}),vs.jsxs(SB,{className:"flex flex-col sm:flex-row gap-2",children:[vs.jsx(lk,{onClick:y,variant:"outline",disabled:i,className:"w-full sm:w-auto",children:"Cancel"}),vs.jsx(lk,{onClick:async()=>{if(r.trim())if(l)try{const e="your-whatsapp-config-id";await qEe(e,g)}catch(e){a({title:"Error",description:"Failed to launch WhatsApp signup",variant:"destructive"})}else a({title:"Error",description:"Facebook SDK not initialized",variant:"destructive"});else a({title:"Error",description:"Please enter a connection name",variant:"destructive"})},disabled:i||!l||!r.trim(),className:"w-full sm:w-auto",children:i?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):vs.jsxs(vs.Fragment,{children:[vs.jsx($b,{className:"w-4 h-4 mr-2"}),"Start Easy Setup"]})})]})]})}):vs.jsx(yB,{open:e,onOpenChange:y,children:vs.jsxs(NB,{children:[vs.jsxs(CB,{children:[vs.jsxs(kB,{className:"flex items-center",children:[vs.jsx(Lb,{className:"h-5 w-5 text-yellow-500 mr-2"}),"Configuration Required"]}),vs.jsx(MB,{children:"Meta WhatsApp Business API Partner integration is not configured. Please contact your system administrator to set up the Partner API credentials."})]}),vs.jsx(SB,{children:vs.jsx(lk,{onClick:y,variant:"outline",children:"Close"})})]})})}function XEe(){const{toast:e}=Fy(),[t,n]=cs.useState([]),[a,r]=cs.useState(null),[s,i]=cs.useState(!0),[o,l]=cs.useState(!1),[c,d]=cs.useState(!1),[u,f]=cs.useState(""),[m,p]=cs.useState(""),[h,g]=cs.useState(!1);cs.useEffect((()=>{x(),y()}),[]);const x=async()=>{try{const e=await fetch("/api/settings/api-keys");if(e.ok){const t=await e.json();n(t)}}catch(t){e({title:"Error",description:"Failed to load API keys",variant:"destructive"})}finally{i(!1)}},y=async()=>{try{const e=await fetch("/api/settings/api-usage-stats");if(e.ok){const t=await e.json();r(t)}}catch(e){}};return s?vs.jsxs("div",{className:"flex items-center justify-center py-8",children:[vs.jsx(Lw,{className:"h-8 w-8 animate-spin"}),vs.jsx("span",{className:"ml-2",children:"Loading API access..."})]}):vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{children:[vs.jsx("h2",{className:"text-2xl font-bold",children:"API Access"}),vs.jsx("p",{className:"text-gray-600",children:"Manage API keys and programmatic access to your channels"})]}),vs.jsxs(lk,{onClick:()=>l(!0),children:[vs.jsx(Iw,{className:"w-4 h-4 mr-2"}),"Create API Key"]})]}),vs.jsxs(J_e,{defaultValue:"keys",className:"space-y-4",children:[vs.jsxs(Z_e,{children:[vs.jsxs(X_e,{value:"keys",children:[vs.jsx(lw,{className:"w-4 h-4 mr-2"}),"API Keys"]}),vs.jsxs(X_e,{value:"usage",children:[vs.jsx(Cb,{className:"w-4 h-4 mr-2"}),"Usage Statistics"]}),vs.jsxs(X_e,{value:"docs",children:[vs.jsx(bb,{className:"w-4 h-4 mr-2"}),"Documentation"]})]}),vs.jsx(eIe,{value:"keys",className:"space-y-4",children:0===t.length?vs.jsx(tk,{children:vs.jsxs(sk,{className:"flex flex-col items-center justify-center py-8",children:[vs.jsx(lw,{className:"h-12 w-12 text-gray-400 mb-4"}),vs.jsx("h3",{className:"text-lg font-medium mb-2",children:"No API Keys"}),vs.jsx("p",{className:"text-gray-600 text-center mb-4",children:"Create your first API key to start sending messages programmatically"}),vs.jsxs(lk,{onClick:()=>l(!0),children:[vs.jsx(Iw,{className:"w-4 h-4 mr-2"}),"Create API Key"]})]})}):vs.jsx("div",{className:"grid gap-4",children:t.map((t=>vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{children:[vs.jsxs(ak,{className:"flex items-center",children:[t.name,vs.jsx(dk,{variant:t.isActive?"default":"secondary",className:"ml-2",children:t.isActive?vs.jsxs(vs.Fragment,{children:[vs.jsx(Db,{className:"w-3 h-3 mr-1"}),"Active"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(zb,{className:"w-3 h-3 mr-1"}),"Inactive"]})})]}),vs.jsxs(rk,{children:["Key: ",t.keyPrefix,"••••••••"]})]}),vs.jsxs("div",{className:"flex space-x-2",children:[vs.jsx(lk,{variant:"outline",size:"sm",onClick:()=>(async(t,n)=>{try{if(!(await fetch(`/api/settings/api-keys/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!n})})).ok)throw new Error("Failed to update API key");await x(),e({title:"Success",description:`API key ${n?"deactivated":"activated"} successfully`})}catch(a){e({title:"Error",description:a.message||"Failed to update API key",variant:"destructive"})}})(t.id,t.isActive),children:t.isActive?"Deactivate":"Activate"}),vs.jsx(lk,{variant:"outline",size:"sm",onClick:()=>(async(t,n)=>{if(confirm(`Are you sure you want to delete the API key "${n}"? This action cannot be undone.`))try{if(!(await fetch(`/api/settings/api-keys/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete API key");await x(),e({title:"Success",description:"API key deleted successfully"})}catch(a){e({title:"Error",description:a.message||"Failed to delete API key",variant:"destructive"})}})(t.id,t.name),children:vs.jsx(Zw,{className:"w-4 h-4"})})]})]})}),vs.jsx(sk,{children:vs.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-gray-500",children:"Created"}),vs.jsxs("p",{className:"flex items-center",children:[vs.jsx(Nb,{className:"w-3 h-3 mr-1"}),Rz(new Date(t.createdAt),{addSuffix:!0})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-gray-500",children:"Last Used"}),vs.jsxs("p",{className:"flex items-center",children:[vs.jsx(Bb,{className:"w-3 h-3 mr-1"}),t.lastUsedAt?Rz(new Date(t.lastUsedAt),{addSuffix:!0}):"Never"]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-gray-500",children:"Rate Limits"}),vs.jsxs("p",{children:[t.rateLimitPerMinute,"/min, ",t.rateLimitPerHour,"/hr"]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{className:"text-gray-500",children:"Permissions"}),vs.jsx("p",{children:t.permissions.join(", ")})]})]})})]},t.id)))})}),vs.jsx(eIe,{value:"usage",className:"space-y-4",children:a&&vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[vs.jsx(tk,{children:vs.jsx(sk,{className:"p-4",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(xb,{className:"h-4 w-4 text-blue-500"}),vs.jsxs("div",{className:"ml-2",children:[vs.jsx("p",{className:"text-sm font-medium",children:"Total Requests"}),vs.jsx("p",{className:"text-2xl font-bold",children:a.totalRequests.toLocaleString()})]})]})})}),vs.jsx(tk,{children:vs.jsx(sk,{className:"p-4",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(Db,{className:"h-4 w-4 text-green-500"}),vs.jsxs("div",{className:"ml-2",children:[vs.jsx("p",{className:"text-sm font-medium",children:"Successful"}),vs.jsx("p",{className:"text-2xl font-bold",children:a.successfulRequests.toLocaleString()})]})]})})}),vs.jsx(tk,{children:vs.jsx(sk,{className:"p-4",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(zb,{className:"h-4 w-4 text-red-500"}),vs.jsxs("div",{className:"ml-2",children:[vs.jsx("p",{className:"text-sm font-medium",children:"Failed"}),vs.jsx("p",{className:"text-2xl font-bold",children:a.failedRequests.toLocaleString()})]})]})})}),vs.jsx(tk,{children:vs.jsx(sk,{className:"p-4",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(Bb,{className:"h-4 w-4 text-yellow-500"}),vs.jsxs("div",{className:"ml-2",children:[vs.jsx("p",{className:"text-sm font-medium",children:"Avg Duration"}),vs.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(a.avgDuration),"ms"]})]})]})})}),vs.jsx(tk,{children:vs.jsx(sk,{className:"p-4",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(Cb,{className:"h-4 w-4 text-purple-500"}),vs.jsxs("div",{className:"ml-2",children:[vs.jsx("p",{className:"text-sm font-medium",children:"Data Transfer"}),vs.jsx("p",{className:"text-2xl font-bold",children:(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(a.totalDataTransfer)})]})]})})})]})}),vs.jsx(eIe,{value:"docs",className:"space-y-4",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"API Documentation"}),vs.jsx(rk,{children:"Complete guide to integrate WhatsApp messaging into your applications"})]}),vs.jsx(sk,{children:vs.jsxs(J_e,{defaultValue:"overview",className:"space-y-4",children:[vs.jsxs(Z_e,{className:"grid w-full grid-cols-6",children:[vs.jsx(X_e,{value:"overview",children:"Overview"}),vs.jsx(X_e,{value:"channels",children:"Channels"}),vs.jsx(X_e,{value:"messages",children:"Messages"}),vs.jsx(X_e,{value:"media",children:"Media"}),vs.jsx(X_e,{value:"errors",children:"Errors"}),vs.jsx(X_e,{value:"examples",children:"Examples"})]}),vs.jsx(eIe,{value:"overview",className:"space-y-4",children:vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[vs.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"🚀 Getting Started"}),vs.jsx("p",{className:"text-blue-800 text-sm",children:"The API allows you to send WhatsApp messages programmatically. Follow this guide to integrate messaging capabilities into your applications."})]}),vs.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[vs.jsx("h4",{className:"font-medium mb-2",children:"Base URL"}),vs.jsxs("code",{className:"text-sm bg-white px-3 py-2 rounded border block",children:[window.location.origin,"/api/v1"]})]}),vs.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[vs.jsx("h4",{className:"font-medium mb-2",children:"Content Type"}),vs.jsx("code",{className:"text-sm bg-white px-3 py-2 rounded border block",children:"application/json"})]})]}),vs.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[vs.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"🔐 Authentication"}),vs.jsx("p",{className:"text-yellow-800 text-sm mb-3",children:"All API requests require authentication using your API key in the Authorization header:"}),vs.jsx("code",{className:"text-sm bg-white px-3 py-2 rounded border block",children:"Authorization: Bearer YOUR_API_KEY"})]}),vs.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[vs.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"⚡ Rate Limits"}),vs.jsxs("div",{className:"text-green-800 text-sm space-y-1",children:[vs.jsxs("p",{children:["• ",vs.jsx("strong",{children:"Per Minute:"})," 60 requests"]}),vs.jsxs("p",{children:["• ",vs.jsx("strong",{children:"Per Hour:"})," 1,000 requests"]}),vs.jsxs("p",{children:["• ",vs.jsx("strong",{children:"Per Day:"})," 10,000 requests"]}),vs.jsx("p",{className:"mt-2 text-xs",children:"Rate limits are enforced per API key. Exceeded limits return HTTP 429."})]})]}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsx("h4",{className:"font-semibold",children:"Quick Start Workflow"}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded border-l-4 border-blue-500",children:[vs.jsx("div",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3",children:"1"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"font-medium",children:"Get Available Channels"}),vs.jsx("p",{className:"text-sm text-gray-600",children:"Fetch your configured WhatsApp channels"})]})]}),vs.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded border-l-4 border-green-500",children:[vs.jsx("div",{className:"bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3",children:"2"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"font-medium",children:"Send Messages"}),vs.jsx("p",{className:"text-sm text-gray-600",children:"Send text or media messages through your channels"})]})]}),vs.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded border-l-4 border-purple-500",children:[vs.jsx("div",{className:"bg-purple-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3",children:"3"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"font-medium",children:"Handle Responses"}),vs.jsx("p",{className:"text-sm text-gray-600",children:"Process success/error responses and message IDs"})]})]})]})]})]})}),vs.jsx(eIe,{value:"channels",className:"space-y-4",children:vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-semibold mb-3",children:"GET /channels"}),vs.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Retrieve all active WhatsApp channels configured for your account."})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[vs.jsx("h5",{className:"font-medium mb-2",children:"Request"}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(dk,{variant:"outline",children:"GET"}),vs.jsx("code",{className:"text-sm",children:"/api/v1/channels"})]}),vs.jsxs("div",{className:"text-sm",children:[vs.jsx("strong",{children:"Headers:"}),vs.jsx("pre",{className:"bg-white p-2 rounded border mt-1 text-xs overflow-x-auto",children:"Authorization: Bearer YOUR_API_KEY\nContent-Type: application/json"})]})]})]}),vs.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-green-900",children:"Success Response (200)"}),vs.jsx("pre",{className:"bg-white p-3 rounded border text-xs overflow-x-auto",children:'{\n  "success": true,\n  "data": [\n    {\n      "id": 1,\n      "name": "MyBusinessNumber",\n      "type": "whatsapp_unofficial",\n      "status": "active",\n      "phoneNumber": "1234567890",\n      "displayName": "My Business"\n    }\n  ],\n  "count": 1\n}'})]}),vs.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-blue-900",children:"Response Fields"}),vs.jsxs("div",{className:"space-y-2 text-sm",children:[vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"id"})," - Unique channel identifier"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"name"})," - Channel display name"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"type"})," - Channel type (whatsapp_unofficial, whatsapp_360dialog, etc.)"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"status"})," - Channel status (active, inactive)"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"phoneNumber"})," - WhatsApp phone number (if available)"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"displayName"})," - WhatsApp display name"]})]})]}),vs.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[vs.jsx("h5",{className:"font-medium mb-2",children:"cURL Example"}),vs.jsx("pre",{className:"bg-white p-3 rounded border text-xs overflow-x-auto",children:`curl -X GET "${window.location.origin}/api/v1/channels" \\\n  -H "Authorization: Bearer YOUR_API_KEY" \\\n  -H "Content-Type: application/json"`})]})]})]})}),vs.jsx(eIe,{value:"messages",className:"space-y-4",children:vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-semibold mb-3",children:"POST /messages/send"}),vs.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Send text messages through your configured WhatsApp channels."})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[vs.jsx("h5",{className:"font-medium mb-2",children:"Request"}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(dk,{variant:"outline",children:"POST"}),vs.jsx("code",{className:"text-sm",children:"/api/v1/messages/send"})]}),vs.jsxs("div",{className:"text-sm",children:[vs.jsx("strong",{children:"Headers:"}),vs.jsx("pre",{className:"bg-white p-2 rounded border mt-1 text-xs overflow-x-auto",children:"Authorization: Bearer YOUR_API_KEY\nContent-Type: application/json"})]}),vs.jsxs("div",{className:"text-sm",children:[vs.jsx("strong",{children:"Body:"}),vs.jsx("pre",{className:"bg-white p-2 rounded border mt-1 text-xs overflow-x-auto",children:'{\n  "channelId": 1,\n  "to": "1234567890",\n  "message": "Hello! This is a test message from PowerChatPlus API."\n}'})]})]})]}),vs.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-blue-900",children:"Request Parameters"}),vs.jsxs("div",{className:"space-y-2 text-sm",children:[vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"channelId"})," ",vs.jsx("span",{className:"text-red-500",children:"*"})," - Channel ID from /channels endpoint"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"to"})," ",vs.jsx("span",{className:"text-red-500",children:"*"})," - Recipient phone number (with country code)"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"message"})," ",vs.jsx("span",{className:"text-red-500",children:"*"})," - Text message content (max 4096 characters)"]}),vs.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[vs.jsx("span",{className:"text-red-500",children:"*"})," Required fields"]})]})]}),vs.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-green-900",children:"Success Response (200)"}),vs.jsx("pre",{className:"bg-white p-3 rounded border text-xs overflow-x-auto",children:'{\n  "success": true,\n  "data": {\n    "messageId": "msg_1234567890",\n    "status": "sent",\n    "channelId": 1,\n    "to": "1234567890",\n    "sentAt": "2024-01-15T10:30:00Z"\n  }\n}'})]}),vs.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[vs.jsx("h5",{className:"font-medium mb-2",children:"cURL Example"}),vs.jsx("pre",{className:"bg-white p-3 rounded border text-xs overflow-x-auto",children:`curl -X POST "${window.location.origin}/api/v1/messages/send" \\\n  -H "Authorization: Bearer YOUR_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d '{\n    "channelId": 1,\n    "to": "1234567890",\n    "message": "Hello from PowerChatPlus API!"\n  }'`})]}),vs.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-yellow-900",children:"📱 Phone Number Format"}),vs.jsxs("div",{className:"text-sm text-yellow-800 space-y-1",children:[vs.jsx("p",{children:"• Include country code (e.g., 1 for US, 44 for UK)"}),vs.jsx("p",{children:"• No spaces, dashes, or special characters"}),vs.jsx("p",{children:"• Examples: 1234567890, 447123456789"})]})]})]})]})}),vs.jsx(eIe,{value:"media",className:"space-y-4",children:vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-semibold mb-3",children:"POST /messages/send-media"}),vs.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Send media messages (images, documents, audio, video) through WhatsApp."})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[vs.jsx("h5",{className:"font-medium mb-2",children:"Request"}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(dk,{variant:"outline",children:"POST"}),vs.jsx("code",{className:"text-sm",children:"/api/v1/messages/send-media"})]}),vs.jsxs("div",{className:"text-sm",children:[vs.jsx("strong",{children:"Headers:"}),vs.jsx("pre",{className:"bg-white p-2 rounded border mt-1 text-xs overflow-x-auto",children:"Authorization: Bearer YOUR_API_KEY\nContent-Type: application/json"})]}),vs.jsxs("div",{className:"text-sm",children:[vs.jsx("strong",{children:"Body (URL Method):"}),vs.jsx("pre",{className:"bg-white p-2 rounded border mt-1 text-xs overflow-x-auto",children:'{\n  "channelId": 1,\n  "to": "1234567890",\n  "mediaUrl": "https://example.com/image.jpg",\n  "mediaType": "image",\n  "caption": "Check out this image!"\n}'})]})]})]}),vs.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-blue-900",children:"Request Parameters"}),vs.jsxs("div",{className:"space-y-2 text-sm",children:[vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"channelId"})," ",vs.jsx("span",{className:"text-red-500",children:"*"})," - Channel ID from /channels endpoint"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"to"})," ",vs.jsx("span",{className:"text-red-500",children:"*"})," - Recipient phone number"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"mediaUrl"})," ",vs.jsx("span",{className:"text-red-500",children:"*"})," - Public URL to media file"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"mediaType"})," ",vs.jsx("span",{className:"text-red-500",children:"*"})," - Media type: image, document, audio, video"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"caption"})," - Optional caption text"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"filename"})," - Optional filename for documents"]})]})]}),vs.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-green-900",children:"Success Response (200)"}),vs.jsx("pre",{className:"bg-white p-3 rounded border text-xs overflow-x-auto",children:'{\n  "success": true,\n  "data": {\n    "messageId": "msg_media_1234567890",\n    "status": "sent",\n    "channelId": 1,\n    "to": "1234567890",\n    "mediaType": "image",\n    "sentAt": "2024-01-15T10:30:00Z"\n  }\n}'})]}),vs.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-purple-900",children:"📎 Supported Media Types"}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[vs.jsxs("div",{children:[vs.jsx("strong",{children:"Images:"}),vs.jsxs("ul",{className:"text-xs mt-1 space-y-1",children:[vs.jsx("li",{children:"• JPEG, PNG, WebP"}),vs.jsx("li",{children:"• Max 5MB"}),vs.jsx("li",{children:"• Max 4096x4096px"})]})]}),vs.jsxs("div",{children:[vs.jsx("strong",{children:"Documents:"}),vs.jsxs("ul",{className:"text-xs mt-1 space-y-1",children:[vs.jsx("li",{children:"• PDF, DOC, DOCX, XLS, etc."}),vs.jsx("li",{children:"• Max 100MB"}),vs.jsx("li",{children:"• Include filename parameter"})]})]}),vs.jsxs("div",{children:[vs.jsx("strong",{children:"Audio:"}),vs.jsxs("ul",{className:"text-xs mt-1 space-y-1",children:[vs.jsx("li",{children:"• MP3, AAC, OGG"}),vs.jsx("li",{children:"• Max 16MB"}),vs.jsx("li",{children:"• Max 30 minutes"})]})]}),vs.jsxs("div",{children:[vs.jsx("strong",{children:"Video:"}),vs.jsxs("ul",{className:"text-xs mt-1 space-y-1",children:[vs.jsx("li",{children:"• MP4, 3GPP"}),vs.jsx("li",{children:"• Max 16MB"}),vs.jsx("li",{children:"• Max 30 seconds"})]})]})]})]})]})]})}),vs.jsx(eIe,{value:"errors",className:"space-y-4",children:vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-semibold mb-3",children:"Error Handling"}),vs.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Understanding API error responses and how to handle them in your application."})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-red-900",children:"HTTP Status Codes"}),vs.jsxs("div",{className:"space-y-2 text-sm",children:[vs.jsxs("div",{className:"flex justify-between",children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"200"})," ",vs.jsx("span",{children:"Success"})]}),vs.jsxs("div",{className:"flex justify-between",children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"400"})," ",vs.jsx("span",{children:"Bad Request - Invalid parameters"})]}),vs.jsxs("div",{className:"flex justify-between",children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"401"})," ",vs.jsx("span",{children:"Unauthorized - Invalid API key"})]}),vs.jsxs("div",{className:"flex justify-between",children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"403"})," ",vs.jsx("span",{children:"Forbidden - Insufficient permissions"})]}),vs.jsxs("div",{className:"flex justify-between",children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"404"})," ",vs.jsx("span",{children:"Not Found - Resource doesn't exist"})]}),vs.jsxs("div",{className:"flex justify-between",children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"429"})," ",vs.jsx("span",{children:"Rate Limited - Too many requests"})]}),vs.jsxs("div",{className:"flex justify-between",children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"500"})," ",vs.jsx("span",{children:"Server Error - Internal error"})]})]})]}),vs.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[vs.jsx("h5",{className:"font-medium mb-2",children:"Error Response Format"}),vs.jsx("pre",{className:"bg-white p-3 rounded border text-xs overflow-x-auto",children:'{\n  "success": false,\n  "error": {\n    "code": "INVALID_PHONE_NUMBER",\n    "message": "The phone number format is invalid",\n    "details": "Phone number must include country code"\n  }\n}'})]}),vs.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-yellow-900",children:"Common Error Codes"}),vs.jsxs("div",{className:"space-y-2 text-sm",children:[vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"INVALID_API_KEY"})," - API key is invalid or expired"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"INSUFFICIENT_PERMISSIONS"})," - API key lacks required permissions"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"CHANNEL_NOT_FOUND"})," - Specified channel ID doesn't exist"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"CHANNEL_INACTIVE"})," - Channel is not active"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"INVALID_PHONE_NUMBER"})," - Phone number format is incorrect"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"MESSAGE_TOO_LONG"})," - Message exceeds character limit"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"MEDIA_TOO_LARGE"})," - Media file exceeds size limit"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"UNSUPPORTED_MEDIA_TYPE"})," - Media type not supported"]}),vs.jsxs("div",{children:[vs.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"RATE_LIMIT_EXCEEDED"})," - Too many requests"]})]})]}),vs.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-blue-900",children:"Rate Limit Response"}),vs.jsx("pre",{className:"bg-white p-3 rounded border text-xs overflow-x-auto",children:'HTTP/1.1 429 Too Many Requests\nX-RateLimit-Limit: 60\nX-RateLimit-Remaining: 0\nX-RateLimit-Reset: 1642248000\nRetry-After: 60\n\n{\n  "success": false,\n  "error": {\n    "code": "RATE_LIMIT_EXCEEDED",\n    "message": "Rate limit exceeded",\n    "details": "Try again in 60 seconds"\n  }\n}'})]})]})]})}),vs.jsx(eIe,{value:"examples",className:"space-y-4",children:vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-semibold mb-3",children:"cURL Examples"}),vs.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Universal cURL command examples that work across all platforms and programming languages."})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[vs.jsx("h5",{className:"font-medium mb-2",children:"Get Channels"}),vs.jsx("pre",{className:"bg-white p-3 rounded border text-xs overflow-x-auto",children:`curl -X GET "${window.location.origin}/api/v1/channels" \\\n  -H "Authorization: Bearer YOUR_API_KEY" \\\n  -H "Content-Type: application/json"`})]}),vs.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[vs.jsx("h5",{className:"font-medium mb-2",children:"Send Text Message"}),vs.jsx("pre",{className:"bg-white p-3 rounded border text-xs overflow-x-auto",children:`curl -X POST "${window.location.origin}/api/v1/messages/send" \\\n  -H "Authorization: Bearer YOUR_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d '{\n    "channelId": 1,\n    "to": "1234567890",\n    "message": "Hello from cURL!"\n  }'`})]}),vs.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[vs.jsx("h5",{className:"font-medium mb-2",children:"Send Media Message"}),vs.jsx("pre",{className:"bg-white p-3 rounded border text-xs overflow-x-auto",children:`curl -X POST "${window.location.origin}/api/v1/messages/send-media" \\\n  -H "Authorization: Bearer YOUR_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d '{\n    "channelId": 1,\n    "to": "1234567890",\n    "mediaUrl": "https://example.com/document.pdf",\n    "mediaType": "document",\n    "caption": "Here is the document you requested",\n    "filename": "report.pdf"\n  }'`})]}),vs.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[vs.jsx("h5",{className:"font-medium mb-2 text-blue-900",children:"💡 Pro Tips"}),vs.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[vs.jsx("p",{children:"• Replace YOUR_API_KEY with your actual API key"}),vs.jsx("p",{children:"• Use proper phone number format with country code"}),vs.jsx("p",{children:"• Check response status codes for error handling"}),vs.jsx("p",{children:"• Implement retry logic for rate-limited requests"}),vs.jsx("p",{children:"• Store API keys securely, never in client-side code"})]})]})]})]})})]})})]})})]}),vs.jsx(yB,{open:o,onOpenChange:l,children:vs.jsxs(NB,{children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Create New API Key"}),vs.jsx(MB,{children:"Create a new API key to access the messaging API programmatically."})]}),vs.jsx("div",{className:"space-y-4",children:vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"keyName",children:"API Key Name"}),vs.jsx(LB,{id:"keyName",value:m,onChange:e=>p(e.target.value),placeholder:"e.g., Production Bot, Marketing Automation"})]})}),vs.jsxs(SB,{children:[vs.jsx(lk,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),vs.jsx(lk,{onClick:async()=>{if(m.trim()){g(!0);try{const t=await fetch("/api/settings/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.trim()})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to create API key")}{const n=await t.json();f(n.key),d(!0),l(!1),p(""),await x(),e({title:"Success",description:"API key created successfully"})}}catch(t){e({title:"Error",description:t.message||"Failed to create API key",variant:"destructive"})}finally{g(!1)}}else e({title:"Error",description:"Please enter a name for the API key",variant:"destructive"})},disabled:h,children:h?vs.jsxs(vs.Fragment,{children:[vs.jsx(Lw,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):"Create API Key"})]})]})}),vs.jsx(yB,{open:c,onOpenChange:d,children:vs.jsxs(NB,{children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"API Key Created"}),vs.jsx(MB,{children:"Your API key has been created. Copy it now as it won't be shown again."})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("code",{className:"text-sm font-mono break-all",children:u}),vs.jsx(lk,{variant:"outline",size:"sm",onClick:()=>{return t=u,navigator.clipboard.writeText(t),void e({title:"Copied",description:"API key copied to clipboard"});var t},children:vs.jsx(Ub,{className:"w-4 h-4"})})]})}),vs.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:vs.jsxs("p",{className:"text-sm text-yellow-800",children:[vs.jsx("strong",{children:"Important:"})," Store this API key securely. You won't be able to see it again."]})})]}),vs.jsx(SB,{children:vs.jsx(lk,{onClick:()=>d(!1),children:"I've Saved the Key"})})]})})]})}function eLe({isOpen:e,onClose:t,onSuccess:n}){const{toast:a}=Fy(),[r,s]=cs.useState(!1),[i,o]=cs.useState(!1),[l,c]=cs.useState({accountName:"",accountSid:"",authToken:"",conversationServiceSid:"",whatsappNumber:"whatsapp:+14155238886"}),d=e=>{const{name:t,value:n}=e.target;c((e=>({...e,[t]:n})))},u=()=>{c({accountName:"",accountSid:"",authToken:"",conversationServiceSid:"",whatsappNumber:"whatsapp:+14155238886"}),s(!1),o(!1)},f=async()=>{if(!l.accountSid||!l.authToken||!l.conversationServiceSid)return a({title:"Validation Error",description:"Account SID, Auth Token, and Conversation Service SID are required for validation.",variant:"destructive"}),!1;o(!0);try{const e=btoa(`${l.accountSid}:${l.authToken}`),t=await fetch(`https://conversations.twilio.com/v1/Services/${l.conversationServiceSid}`,{headers:{Authorization:`Basic ${e}`}});if(t.ok){const e=await t.json();return a({title:"Credentials Valid",description:`Successfully validated Twilio service: ${e.friendly_name||l.conversationServiceSid}`}),!0}{const e=await t.json();throw new Error(e.message||"Invalid credentials")}}catch(e){return a({title:"Validation Failed",description:e.message||"Failed to validate Twilio credentials.",variant:"destructive"}),!1}finally{o(!1)}},m=()=>{u(),t()};return vs.jsx(yB,{open:e,onOpenChange:m,children:vs.jsxs(NB,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[vs.jsx(CB,{children:vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx("i",{className:"ri-whatsapp-line text-green-500"}),"Connect Twilio WhatsApp"]})}),vs.jsxs("form",{onSubmit:async e=>{e.preventDefault(),s(!0);try{if(!(await f()))return void s(!1);const e=await fetch("/api/channel-connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channelType:"whatsapp_twilio",accountId:l.conversationServiceSid,accountName:l.accountName,connectionData:{accountSid:l.accountSid,authToken:l.authToken,conversationServiceSid:l.conversationServiceSid,whatsappNumber:l.whatsappNumber}})});if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to create connection")}a({title:"Success",description:"Twilio WhatsApp connection created successfully!"}),u(),n(),t()}catch(r){a({title:"Connection Error",description:r.message||"Failed to connect to Twilio WhatsApp",variant:"destructive"})}finally{s(!1)}},className:"space-y-4",children:[vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"accountName",children:"Connection Name"}),vs.jsx(LB,{id:"accountName",name:"accountName",value:l.accountName,onChange:d,placeholder:"My Twilio WhatsApp",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"A friendly name for this connection"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"accountSid",children:"Account SID"}),vs.jsx(LB,{id:"accountSid",name:"accountSid",value:l.accountSid,onChange:d,placeholder:"ACxxxxx...",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your Twilio Account SID from the console"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"authToken",children:"Auth Token"}),vs.jsx(LB,{id:"authToken",name:"authToken",type:"password",value:l.authToken,onChange:d,placeholder:"Your auth token...",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your Twilio Auth Token (keep this secure)"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"conversationServiceSid",children:"Conversation Service SID"}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(LB,{id:"conversationServiceSid",name:"conversationServiceSid",value:l.conversationServiceSid,onChange:d,placeholder:"ISxxxxx...",required:!0,className:"flex-1"}),vs.jsx(lk,{type:"button",variant:"outline",onClick:f,disabled:i||!l.accountSid||!l.authToken||!l.conversationServiceSid,className:"whitespace-nowrap",children:i?"Validating...":"Test"})]}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your Twilio Conversations Service SID"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"whatsappNumber",children:"WhatsApp Number"}),vs.jsx(LB,{id:"whatsappNumber",name:"whatsappNumber",value:l.whatsappNumber,onChange:d,placeholder:"whatsapp:+14155238886",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your Twilio WhatsApp number (sandbox or approved number)"})]})]}),vs.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:vs.jsxs("div",{className:"flex items-start",children:[vs.jsx("i",{className:"ri-information-line text-blue-500 mr-2 mt-0.5"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Twilio WhatsApp Setup"}),vs.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["1. Create a Twilio account and Conversations Service",vs.jsx("br",{}),"2. Enable WhatsApp for your service",vs.jsx("br",{}),"3. Configure webhook: https://yourdomain.com/api/webhooks/twilio-whatsapp",vs.jsx("br",{}),"4. Use sandbox number for testing or get approved for production"]})]})]})}),vs.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:m,children:"Cancel"}),vs.jsx(lk,{type:"submit",variant:"outline",className:"btn-brand-primary",disabled:r||i,children:r?"Connecting...":"Connect"})]})]})]})})}function tLe({isOpen:e,onClose:t,onSuccess:n}){const{toast:a}=Fy(),[r,s]=cs.useState(!1),[i,o]=cs.useState(!1),[l,c]=cs.useState(!1),[d,u]=cs.useState(""),[f,m]=cs.useState({connectionName:"My WhatsApp Business"});cs.useEffect((()=>{e&&p()}),[e]);const p=async()=>{o(!0);try{const e=await fetch("/api/admin/partner-configurations/360dialog");if(e.ok){const t=await e.json();c(!0),u(t.partnerId)}else c(!1)}catch(e){c(!1)}finally{o(!1)}},h=()=>{m({connectionName:"My WhatsApp Business"}),s(!1)},g=async(e,r)=>{s(!0);try{const s=await fetch("/api/channel-connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channelType:"whatsapp_360dialog",accountId:e,accountName:f.connectionName,connectionData:{clientId:e,channels:r,onboardedAt:(new Date).toISOString()}})});if(!s.ok){const e=await s.json();throw new Error(e.error||"Failed to create connection")}a({title:"Success",description:"360Dialog WhatsApp connection created successfully! Your channels are being set up."}),h(),n(),t()}catch(i){a({title:"Connection Error",description:i.message||"Failed to create 360Dialog WhatsApp connection",variant:"destructive"})}finally{s(!1)}},x=()=>{h(),t()};return i?vs.jsx(yB,{open:e,onOpenChange:x,children:vs.jsx(NB,{className:"sm:max-w-[500px]",children:vs.jsx("div",{className:"flex items-center justify-center p-8",children:vs.jsxs("div",{className:"text-center",children:[vs.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),vs.jsx("p",{children:"Checking configuration..."})]})})})}):l?vs.jsx(yB,{open:e,onOpenChange:x,children:vs.jsxs(NB,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[vs.jsx(CB,{children:vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx("i",{className:"ri-whatsapp-line text-green-500"}),"Connect 360Dialog WhatsApp Business"]})}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("div",{className:"space-y-4",children:vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"connectionName",children:"Connection Name"}),vs.jsx(LB,{id:"connectionName",name:"connectionName",value:f.connectionName,onChange:e=>{const{name:t,value:n}=e.target;m((e=>({...e,[t]:n})))},placeholder:"My WhatsApp Business",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"A friendly name for this WhatsApp Business connection"})]})}),vs.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:vs.jsxs("div",{className:"flex items-start",children:[vs.jsx("i",{className:"ri-information-line text-blue-500 mr-2 mt-0.5"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Integrated Onboarding"}),vs.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Click \"Start Onboarding\" to connect your WhatsApp Business account through 360Dialog's secure onboarding process. You'll be guided through:"}),vs.jsxs("ul",{className:"text-xs text-blue-600 mt-2 ml-4 list-disc",children:[vs.jsx("li",{children:"WhatsApp Business account verification"}),vs.jsx("li",{children:"Phone number registration"}),vs.jsx("li",{children:"Business profile setup"}),vs.jsx("li",{children:"API access configuration"})]})]})]})}),vs.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:x,children:"Cancel"}),vs.jsx(lk,{type:"button",variant:"outline",className:"btn-brand-primary",onClick:()=>{if(!l||!d)return void a({title:"Configuration Error",description:"360Dialog Partner API is not configured. Please contact your administrator.",variant:"destructive"});const e=`${window.location.origin}/settings/channels/360dialog/callback`,t=`https://hub.360dialog.com/dashboard/app/${d}/permissions?redirect_url=${encodeURIComponent(e)}`,n=window.open(t,"360dialog-onboarding","width=600,height=700,scrollbars=yes,resizable=yes");if(!n)return void a({title:"Popup Blocked",description:"Please allow popups for this site and try again.",variant:"destructive"});const r=e=>{e.origin===window.location.origin&&("360dialog-onboarding-success"===e.data.type?(window.removeEventListener("message",r),n.close(),g(e.data.clientId,e.data.channels)):"360dialog-onboarding-error"===e.data.type&&(window.removeEventListener("message",r),n.close(),a({title:"Onboarding Failed",description:e.data.error||"Failed to complete WhatsApp Business onboarding.",variant:"destructive"})))};window.addEventListener("message",r);const s=setInterval((()=>{n.closed&&(clearInterval(s),window.removeEventListener("message",r))}),1e3)},disabled:r,children:r?"Processing...":"Start Onboarding"})]})]})]})}):vs.jsx(yB,{open:e,onOpenChange:x,children:vs.jsxs(NB,{className:"sm:max-w-[500px]",children:[vs.jsx(CB,{children:vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx("i",{className:"ri-whatsapp-line text-green-500"}),"360Dialog WhatsApp Integration"]})}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:vs.jsxs("div",{className:"flex items-start",children:[vs.jsx("i",{className:"ri-information-line text-yellow-500 mr-2 mt-0.5"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-yellow-700 font-medium",children:"Partner Configuration Required"}),vs.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"360Dialog Partner API is not configured. Please contact your system administrator to set up the Partner API credentials."})]})]})}),vs.jsx("div",{className:"flex justify-end gap-2 pt-4",children:vs.jsx(lk,{type:"button",variant:"outline",onClick:x,children:"Close"})})]})]})})}function nLe({isOpen:e,onClose:t,onSuccess:n}){const{toast:a}=Fy(),[r,s]=cs.useState(!1),[i,o]=cs.useState({accountName:"",instagramAccountId:"",accessToken:"",appId:"",appSecret:""}),l=e=>{const{name:t,value:n}=e.target;o((e=>({...e,[t]:n})))};return vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"sm:max-w-[500px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Connect Instagram Business Account"}),vs.jsx(MB,{children:"Connect your Instagram Business account to receive and send direct messages. You'll need your Meta for Developers credentials."})]}),vs.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),s(!0),!(i.accountName&&i.instagramAccountId&&i.accessToken&&i.appId))return a({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"}),void s(!1);try{const e=await fetch("/api/channel-connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channelType:"instagram",accountId:i.instagramAccountId,accountName:i.accountName,accessToken:i.accessToken,connectionData:{instagramAccountId:i.instagramAccountId,appId:i.appId,appSecret:i.appSecret}})});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to create Instagram connection")}await e.json();a({title:"Instagram Connected",description:"Your Instagram account has been connected successfully."}),o({accountName:"",instagramAccountId:"",accessToken:"",appId:"",appSecret:""}),n(),t()}catch(r){a({title:"Connection Failed",description:r.message||"Failed to connect Instagram account. Please check your credentials and try again.",variant:"destructive"})}finally{s(!1)}},children:[vs.jsxs("div",{className:"grid gap-4 py-4",children:[vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"accountName",children:"Account Name *"}),vs.jsx(LB,{id:"accountName",name:"accountName",value:i.accountName,onChange:l,placeholder:"e.g. My Instagram Business",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"A name to identify this connection"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"instagramAccountId",children:"Instagram Account ID *"}),vs.jsx(LB,{id:"instagramAccountId",name:"instagramAccountId",value:i.instagramAccountId,onChange:l,placeholder:"1234567890",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your Instagram Business Account ID from Meta for Developers"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"accessToken",children:"Page Access Token *"}),vs.jsx(LB,{id:"accessToken",name:"accessToken",type:"password",value:i.accessToken,onChange:l,placeholder:"Your page access token",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Long-lived page access token from Meta for Developers"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"appId",children:"App ID *"}),vs.jsx(LB,{id:"appId",name:"appId",value:i.appId,onChange:l,placeholder:"Your app ID",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your Meta app ID"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"appSecret",children:"App Secret"}),vs.jsx(LB,{id:"appSecret",name:"appSecret",type:"password",value:i.appSecret,onChange:l,placeholder:"Your app secret (optional)"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your Meta app secret (optional, for webhook verification)"})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),vs.jsx(lk,{type:"submit",variant:"outline",className:"btn-brand-primary",disabled:r,children:r?"Connecting...":"Connect Instagram"})]})]})]})})}function aLe({isOpen:e,onClose:t,onSuccess:n}){const{toast:a}=Fy(),[r,s]=cs.useState(!1),[i,o]=cs.useState({accountName:"",pageId:"",accessToken:"",appId:"",appSecret:""}),l=e=>{const{name:t,value:n}=e.target;o((e=>({...e,[t]:n})))};return vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"sm:max-w-[500px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Connect Facebook Messenger"}),vs.jsx(MB,{children:"Connect your Facebook page to receive and send messages via Messenger. You'll need your Meta for Developers credentials."})]}),vs.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),s(!0),!(i.accountName&&i.pageId&&i.accessToken&&i.appId))return a({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"}),void s(!1);try{const e=await fetch("/api/channel-connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channelType:"messenger",accountId:i.pageId,accountName:i.accountName,accessToken:i.accessToken,connectionData:{pageId:i.pageId,appId:i.appId,appSecret:i.appSecret}})});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to create Messenger connection")}await e.json();a({title:"Messenger Connected",description:"Your Facebook page has been connected successfully."}),o({accountName:"",pageId:"",accessToken:"",appId:"",appSecret:""}),n(),t()}catch(r){a({title:"Connection Failed",description:r.message||"Failed to connect Facebook page. Please check your credentials and try again.",variant:"destructive"})}finally{s(!1)}},children:[vs.jsxs("div",{className:"grid gap-4 py-4",children:[vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"accountName",children:"Account Name *"}),vs.jsx(LB,{id:"accountName",name:"accountName",value:i.accountName,onChange:l,placeholder:"e.g. My Facebook Page",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"A name to identify this connection"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"pageId",children:"Facebook Page ID *"}),vs.jsx(LB,{id:"pageId",name:"pageId",value:i.pageId,onChange:l,placeholder:"1234567890",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your Facebook Page ID from Meta for Developers"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"accessToken",children:"Page Access Token *"}),vs.jsx(LB,{id:"accessToken",name:"accessToken",type:"password",value:i.accessToken,onChange:l,placeholder:"Your page access token",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Long-lived page access token from Meta for Developers"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"appId",children:"App ID *"}),vs.jsx(LB,{id:"appId",name:"appId",value:i.appId,onChange:l,placeholder:"Your app ID",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your Meta app ID"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"appSecret",children:"App Secret"}),vs.jsx(LB,{id:"appSecret",name:"appSecret",type:"password",value:i.appSecret,onChange:l,placeholder:"Your app secret (optional)"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your Meta app secret (optional, for webhook verification)"})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),vs.jsx(lk,{type:"submit",variant:"outline",className:"btn-brand-primary",disabled:r,children:r?"Connecting...":"Connect Messenger"})]})]})]})})}function rLe({isOpen:e,onClose:t,onSuccess:n}){const[a,r]=cs.useState(""),[s,i]=cs.useState(""),[o,l]=cs.useState(""),[c,d]=cs.useState(""),[u,f]=cs.useState(!1),[m,p]=cs.useState("agent"),{toast:h}=Fy(),g=ky({mutationFn:async e=>{const t=await _y("POST","/api/team/members",e);return await t.json()},onSuccess:()=>{h({title:"Team Member Created",description:`${a} has been added to your team and can log in immediately.`}),x(),t(),Ay.invalidateQueries({queryKey:["/api/team/members"]}),n&&n()},onError:e=>{h({title:"Error",description:`Failed to create team member: ${e.message}`,variant:"destructive"})}}),x=()=>{r(""),i(""),l(""),d(""),p("agent")};return vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"sm:max-w-[500px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Add Team Member"}),vs.jsx(MB,{children:"Create a new team member account. They can log in immediately after creation. Permissions can be customized later in the Roles & Permissions section."})]}),vs.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!a.trim())return void h({title:"Error",description:"Please enter a full name",variant:"destructive"});if(!s.trim())return void h({title:"Error",description:"Please enter a username",variant:"destructive"});if(!o.trim())return void h({title:"Error",description:"Please enter an email address",variant:"destructive"});/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?!c.trim()||c.length<6?h({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"}):g.mutate({fullName:a,username:s,email:o,password:c,role:m}):h({title:"Error",description:"Please enter a valid email address",variant:"destructive"})},className:"space-y-4 py-4",children:[vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"fullName",children:"Full Name"}),vs.jsx(LB,{id:"fullName",placeholder:"John Doe",value:a,onChange:e=>r(e.target.value),required:!0})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"username",children:"Username"}),vs.jsx(LB,{id:"username",placeholder:"johndoe",value:s,onChange:e=>i(e.target.value),required:!0})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"email",children:"Email Address"}),vs.jsx(LB,{id:"email",type:"email",placeholder:"john@company.com",value:o,onChange:e=>l(e.target.value),required:!0})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"password",children:"Password"}),vs.jsxs("div",{className:"relative",children:[vs.jsx(LB,{id:"password",type:u?"text":"password",placeholder:"Minimum 6 characters",value:c,onChange:e=>d(e.target.value),required:!0}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!u),children:u?vs.jsx(Yb,{className:"h-4 w-4"}):vs.jsx(Qb,{className:"h-4 w-4"})})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"role",children:"Role"}),vs.jsxs(ZU,{value:m,onValueChange:p,children:[vs.jsx(tW,{id:"role",children:vs.jsx(eW,{placeholder:"Select a role"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"admin",children:"Administrator"}),vs.jsx(sW,{value:"agent",children:"Agent"})]})]}),vs.jsx("p",{className:"text-xs text-gray-500",children:"admin"===m?"Administrators have full access to all features. Permissions can be customized in Settings → Roles & Permissions.":"Agents have limited access by default. Permissions can be customized in Settings → Roles & Permissions."})]}),vs.jsxs(SB,{className:"mt-6",children:[vs.jsx(lk,{variant:"outline",type:"button",onClick:t,children:"Cancel"}),vs.jsxs(lk,{type:"submit",variant:"brand",disabled:g.isPending,className:"btn-brand-primary",children:[g.isPending&&vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Team Member"]})]})]})]})})}function sLe({isOpen:e,onClose:t,onSuccess:n,teamMember:a}){const[r,s]=cs.useState(""),[i,o]=cs.useState(""),[l,c]=cs.useState(""),[d,u]=cs.useState(!1),[f,m]=cs.useState("agent"),{toast:p}=Fy();cs.useEffect((()=>{a&&e&&(s(a.fullName),o(a.email),c(""),u(!1),m(a.role))}),[a,e]);const h=ky({mutationFn:async e=>{const t=await _y("PATCH",`/api/team/members/${null==a?void 0:a.id}`,e);return await t.json()},onSuccess:()=>{const e=l.trim().length>0;p({title:"Team Member Updated",description:`${r} has been updated successfully${e?" (including password)":""}. Permissions are managed through Settings > Roles & Permissions.`}),c(""),u(!1),t(),Ay.invalidateQueries({queryKey:["/api/team/members"]}),Ay.invalidateQueries({queryKey:["userPermissions"]}),n&&n()},onError:e=>{p({title:"Error",description:`Failed to update team member: ${e.message}`,variant:"destructive"})}});return a?vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"sm:max-w-[500px]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Edit Team Member"}),vs.jsxs(MB,{children:["Update team member information. Permissions are managed centrally through Settings ",">"," Roles & Permissions."]})]}),vs.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!r.trim())return void p({title:"Error",description:"Please enter a full name",variant:"destructive"});if(!i.trim())return void p({title:"Error",description:"Please enter an email address",variant:"destructive"});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i))return void p({title:"Error",description:"Please enter a valid email address",variant:"destructive"});if(l.trim()&&l.length<6)return void p({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"});const t={fullName:r,email:i,role:f};l.trim()&&(t.password=l),h.mutate(t)},className:"space-y-4 py-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"edit-fullName",children:"Full Name"}),vs.jsx(LB,{id:"edit-fullName",value:r,onChange:e=>s(e.target.value),required:!0})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"edit-email",children:"Email Address"}),vs.jsx(LB,{id:"edit-email",type:"email",value:i,onChange:e=>o(e.target.value),required:!0})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"edit-password",children:"Password"}),vs.jsxs("div",{className:"relative",children:[vs.jsx(LB,{id:"edit-password",type:d?"text":"password",placeholder:"Leave blank to keep current password",value:l,onChange:e=>c(e.target.value)}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>u(!d),children:d?vs.jsx(Yb,{className:"h-4 w-4"}):vs.jsx(Qb,{className:"h-4 w-4"})})]}),vs.jsx("p",{className:"text-xs text-gray-500",children:"Optional: Enter a new password or leave blank to keep the current password. Minimum 6 characters if provided."})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"edit-role",children:"Role"}),vs.jsxs(ZU,{value:f,onValueChange:m,children:[vs.jsx(tW,{id:"edit-role",children:vs.jsx(eW,{placeholder:"Select a role"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"admin",children:"Administrator"}),vs.jsx(sW,{value:"agent",children:"Agent"})]})]}),vs.jsx("p",{className:"text-xs text-gray-500",children:"admin"===f?"Administrators inherit full permissions by default. Customize permissions in Settings → Roles & Permissions.":"Agents inherit limited permissions by default. Customize permissions in Settings → Roles & Permissions."})]}),vs.jsxs(SB,{className:"mt-6",children:[vs.jsx(lk,{variant:"outline",type:"button",onClick:t,children:"Cancel"}),vs.jsxs(lk,{type:"submit",variant:"brand",disabled:h.isPending,className:"btn-brand-primary",children:[h.isPending&&vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Team Member"]})]})]})]})}):null}function iLe(){const[e,t]=cs.useState(!1),[n,a]=cs.useState(!1),[r,s]=cs.useState(!1),[i,o]=cs.useState(null),[l,c]=cs.useState(null),[d,u]=cs.useState(null),[f,m]=cs.useState("invitation"),{toast:p}=Fy(),{data:h=[],isLoading:g}=Sy({queryKey:["/api/team/members"],refetchOnWindowFocus:!1}),{data:x=[],isLoading:y}=Sy({queryKey:["/api/team/invitations"],refetchOnWindowFocus:!1}),{data:v}=Sy({queryKey:["/api/user"],refetchOnWindowFocus:!1}),b=ky({mutationFn:async e=>{const t=await _y("DELETE",`/api/team/invitations/${e}`);return await t.json()},onSuccess:()=>{p({title:"Invitation Canceled",description:"The team invitation has been canceled"}),Ay.invalidateQueries({queryKey:["/api/team/invitations"]})},onError:e=>{p({title:"Error",description:`Failed to cancel invitation: ${e.message}`,variant:"destructive"})}}),w=ky({mutationFn:async e=>{const t=await _y("POST",`/api/team/invitations/${e}/resend`);return await t.json()},onSuccess:(e,t)=>{const n=x.find((e=>e.id===t));p({title:"Invitation Resent",description:n?`Invitation has been resent to ${n.email}`:"Invitation has been resent"})},onError:e=>{p({title:"Error",description:`Failed to resend invitation: ${e.message}`,variant:"destructive"})}}),j=ky({mutationFn:async e=>{const t=await _y("DELETE",`/api/team/members/${e}`);return await t.json()},onSuccess:(e,t)=>{const n=h.find((e=>e.id===t));p({title:"Team Member Removed",description:n?`${n.fullName} has been removed from your team`:"Team member has been removed"}),Ay.invalidateQueries({queryKey:["/api/team/members"]})},onError:e=>{p({title:"Error",description:`Failed to remove team member: ${e.message}`,variant:"destructive"})}}),N=e=>{const t=["bg-primary-100 text-primary-600","bg-blue-100 text-blue-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-amber-100 text-amber-600","bg-cyan-100 text-cyan-600"];return t[e%t.length]};return vs.jsxs(vs.Fragment,{children:[vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{className:"flex justify-between items-center",children:[vs.jsxs("h3",{className:"text-lg font-medium",children:["Members (",h.length,"/5)"]}),vs.jsxs(lk,{className:"btn-brand-primary",onClick:()=>t(!0),children:[vs.jsx("i",{className:"ri-user-add-line mr-1  "})," Add Team Member"]})]}),g||y?vs.jsx("div",{className:"flex justify-center py-8",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):vs.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:vs.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[vs.jsx("thead",{className:"bg-gray-50",children:vs.jsxs("tr",{children:[vs.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),vs.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),vs.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),vs.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),vs.jsx("th",{scope:"col",className:"relative px-6 py-3",children:vs.jsx("span",{className:"sr-only",children:"Actions"})})]})}),vs.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[h.map((e=>{return vs.jsxs("tr",{children:[vs.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:`flex-shrink-0 h-10 w-10 rounded-full ${N(e.id)} flex items-center justify-center text-sm font-medium`,children:e.avatarUrl?vs.jsx("img",{src:e.avatarUrl,alt:e.fullName,className:"h-10 w-10 rounded-full"}):(t=e.fullName,t.split(" ").map((e=>e[0])).join("").toUpperCase().substring(0,2))}),vs.jsxs("div",{className:"ml-4",children:[vs.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.fullName}),(null==v?void 0:v.id)===e.id&&vs.jsx("div",{className:"text-xs text-gray-500",children:"You"})]})]})}),vs.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),vs.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:vs.jsx(dk,{variant:"admin"===e.role?"secondary":"default",className:"capitalize",children:"admin"===e.role?"Administrator":"Agent"})}),vs.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:vs.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"Active"})}),vs.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:(null==v?void 0:v.id)!==e.id&&vs.jsxs(YO,{children:[vs.jsx(QO,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"sm",children:vs.jsx(qb,{className:"h-4 w-4"})})}),vs.jsxs(KO,{align:"end",children:[vs.jsx(ZO,{children:"Actions"}),vs.jsx(XO,{}),vs.jsxs(JO,{onClick:()=>(e=>{c(e),a(!0)})(e),children:[vs.jsx(Hw,{className:"h-4 w-4 mr-2"}),"Edit Member"]}),vs.jsxs(JO,{onClick:()=>(e=>{u(e),m("member"),s(!0)})(e),children:[vs.jsx(dj,{className:"h-4 w-4 mr-2 text-red-600"}),vs.jsx("span",{className:"text-red-600",children:"Remove Member"})]})]})]})})]},`member-${e.id}`);var t})),x.filter((e=>"pending"===e.status)).map((e=>vs.jsxs("tr",{children:[vs.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500",children:vs.jsx("i",{className:"ri-user-line text-lg"})}),vs.jsx("div",{className:"ml-4",children:vs.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Pending Invitation"})})]})}),vs.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),vs.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:vs.jsx(dk,{variant:"admin"===e.role?"secondary":"default",className:"capitalize",children:"admin"===e.role?"Administrator":"Agent"})}),vs.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:vs.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Invited"})}),vs.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:vs.jsxs(YO,{children:[vs.jsx(QO,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"sm",children:vs.jsx(qb,{className:"h-4 w-4"})})}),vs.jsxs(KO,{align:"end",children:[vs.jsx(ZO,{children:"Actions"}),vs.jsx(XO,{}),vs.jsxs(JO,{onClick:()=>{return t=e.id,void w.mutate(t);var t},children:[vs.jsx(hw,{className:"h-4 w-4 mr-2"}),"Resend Invitation"]}),vs.jsxs(JO,{onClick:()=>{return t=e.id,o(t),m("invitation"),void s(!0);var t},children:[vs.jsx(lj,{className:"h-4 w-4 mr-2 text-red-600"}),vs.jsx("span",{className:"text-red-600",children:"Cancel Invitation"})]})]})]})})]},`invite-${e.id}`))),0===h.length&&0===x.filter((e=>"pending"===e.status)).length&&vs.jsx("tr",{children:vs.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-sm text-gray-500",children:"No team members found. Invite members to join your team."})})]})]})})]}),vs.jsx(rLe,{isOpen:e,onClose:()=>t(!1)}),vs.jsx(sLe,{isOpen:n,onClose:()=>{a(!1),c(null)},teamMember:l}),vs.jsx(x7,{open:r,onOpenChange:s,children:vs.jsxs(w7,{children:[vs.jsxs(j7,{children:[vs.jsx(C7,{children:vs.jsxs("div",{className:"flex items-center text-red-600",children:[vs.jsx(nj,{className:"h-5 w-5 mr-2"}),"member"===f?"Remove Team Member":"Cancel Invitation"]})}),vs.jsx(S7,{children:"member"===f&&d?vs.jsxs(vs.Fragment,{children:["Are you sure you want to remove ",vs.jsx("strong",{children:d.fullName})," from your team? This action cannot be undone."]}):"Are you sure you want to cancel this invitation? This action cannot be undone."})]}),vs.jsxs(N7,{children:[vs.jsx(M7,{children:"Cancel"}),vs.jsxs(k7,{onClick:()=>{"invitation"===f&&i?(b.mutate(i),s(!1),o(null)):"member"===f&&d&&(j.mutate(d.id),s(!1),u(null))},className:"bg-red-600 hover:bg-red-700",children:[("member"===f?j.isPending:b.isPending)&&vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"member"===f?"Remove Member":"Cancel Invitation"]})]})]})})]})}const oLe={conversations:{title:"Conversation Management",permissions:{view_all_conversations:"View All Conversations",view_assigned_conversations:"View Assigned Conversations",assign_conversations:"Assign Conversations",manage_conversations:"Manage Conversations"}},contacts:{title:"Contact Management",permissions:{view_contacts:"View Contacts",manage_contacts:"Manage Contacts"}},campaigns:{title:"Campaign Management",permissions:{view_campaigns:"View Campaigns",create_campaigns:"Create Campaigns",edit_campaigns:"Edit Campaigns",delete_campaigns:"Delete Campaigns",manage_templates:"Manage Templates",manage_segments:"Manage Segments",view_campaign_analytics:"View Campaign Analytics",manage_whatsapp_accounts:"Manage WhatsApp Accounts"}},pipeline:{title:"Pipeline Management",permissions:{view_pipeline:"View Pipeline",manage_pipeline:"Manage Pipeline",create_deals:"Create Deals",edit_deals:"Edit Deals",delete_deals:"Delete Deals",manage_pipeline_stages:"Manage Pipeline Stages"}},channels:{title:"Channel Management",permissions:{view_channels:"View Channels",manage_channels:"Manage Channels",configure_channels:"Configure Channels"}},flows:{title:"Flow Management",permissions:{view_flows:"View Flows",manage_flows:"Manage Flows"}},analytics:{title:"Analytics",permissions:{view_analytics:"View Analytics",view_detailed_analytics:"View Detailed Analytics"}},team:{title:"Team Management",permissions:{view_team:"View Team",manage_team:"Manage Team"}},settings:{title:"Settings",permissions:{view_settings:"View Settings",manage_settings:"Manage Settings"}},calendar:{title:"Calendar",permissions:{view_calendar:"View Calendar",manage_calendar:"Manage Calendar"}}};function lLe(){const[e,t]=cs.useState(!1),[n,a]=cs.useState(null),[r,s]=cs.useState({}),{toast:i}=Fy(),{data:o=[],isLoading:l,refetch:c}=Sy({queryKey:["/api/role-permissions"],refetchOnWindowFocus:!1}),d=ky({mutationFn:async e=>{const t=await _y("PUT",`/api/role-permissions/${e.role}`,{permissions:e.permissions});return await t.json()},onSuccess:(e,n)=>{i({title:"Permissions Updated",description:("admin"===n.role?"Administrator":"Agent")+" permissions have been updated successfully."}),t(!1),c(),Ay.invalidateQueries({queryKey:["userPermissions"]})},onError:e=>{i({title:"Error",description:`Failed to update permissions: ${e.message}`,variant:"destructive"})}}),u=e=>{const n=o.find((t=>t.role===e));a(e),s((null==n?void 0:n.permissions)||{}),t(!0)},f=e=>o.find((t=>t.role===e));return l?vs.jsx("div",{className:"flex justify-center py-8",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):vs.jsxs("div",{className:"space-y-6",children:[vs.jsx("div",{className:"flex justify-between items-center",children:vs.jsx("h3",{className:"text-lg font-medium",children:"Roles & Permissions"})}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs(tk,{className:"overflow-hidden",children:[vs.jsx(nk,{children:vs.jsxs("div",{className:"flex justify-between items-start",children:[vs.jsxs("div",{children:[vs.jsx(ak,{className:"text-lg",children:"Administrator"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Full access to all features and settings"})]}),vs.jsx(lk,{variant:"outline",onClick:()=>u("admin"),children:"Edit Permissions"})]})}),vs.jsx(sk,{children:vs.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Object.entries(oLe).map((([e,t])=>{const n=f("admin"),a=Object.keys(t.permissions).some((e=>null==n?void 0:n.permissions[e]));return vs.jsxs("div",{className:"flex items-center p-3 rounded-md border "+(a?"bg-green-50":"bg-red-50"),children:[a?vs.jsx(Pb,{className:"h-4 w-4 text-green-600 mr-2"}):vs.jsx(zb,{className:"h-4 w-4 text-red-600 mr-2"}),vs.jsx("span",{className:"text-sm "+(a?"text-green-800":"text-red-800"),children:t.title})]},`admin-${e}`)}))})})]}),vs.jsxs(tk,{className:"overflow-hidden",children:[vs.jsx(nk,{children:vs.jsxs("div",{className:"flex justify-between items-start",children:[vs.jsxs("div",{children:[vs.jsx(ak,{className:"text-lg",children:"Agent"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Limited access to core features"})]}),vs.jsx(lk,{variant:"outline",onClick:()=>u("agent"),children:"Edit Permissions"})]})}),vs.jsx(sk,{children:vs.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Object.entries(oLe).map((([e,t])=>{const n=f("agent"),a=Object.keys(t.permissions).some((e=>null==n?void 0:n.permissions[e]));return vs.jsxs("div",{className:"flex items-center p-3 rounded-md border "+(a?"bg-green-50":"bg-red-50"),children:[a?vs.jsx(Pb,{className:"h-4 w-4 text-green-600 mr-2"}):vs.jsx(zb,{className:"h-4 w-4 text-red-600 mr-2"}),vs.jsx("span",{className:"text-sm "+(a?"text-green-800":"text-red-800"),children:t.title})]},`agent-${e}`)}))})})]})]}),vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[vs.jsxs(CB,{children:[vs.jsxs(kB,{children:["Edit ","admin"===n?"Administrator":"Agent"," Permissions"]}),vs.jsxs(MB,{children:["Configure permissions for the ","admin"===n?"Administrator":"Agent"," role. Changes will apply to all users with this role."]})]}),vs.jsx("div",{className:"py-4",children:vs.jsxs(J_e,{defaultValue:Object.keys(oLe)[0],className:"w-full",children:[vs.jsx(Z_e,{className:"grid w-full grid-cols-5",children:Object.entries(oLe).slice(0,5).map((([e,t])=>vs.jsx(X_e,{value:e,className:"text-xs",children:t.title.split(" ")[0]},e)))}),vs.jsx(Z_e,{className:"grid w-full grid-cols-5 mt-2",children:Object.entries(oLe).slice(5).map((([e,t])=>vs.jsx(X_e,{value:e,className:"text-xs",children:t.title.split(" ")[0]},e)))}),Object.entries(oLe).map((([e,t])=>vs.jsx(eIe,{value:e,className:"space-y-4",children:vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsx(ak,{className:"text-lg",children:t.title})}),vs.jsx(sk,{children:vs.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(t.permissions).map((([e,t])=>vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(V7,{id:`edit-${e}`,checked:r[e]||!1,onCheckedChange:t=>((e,t)=>{s((n=>({...n,[e]:t})))})(e,!!t)}),vs.jsx(EB,{htmlFor:`edit-${e}`,className:"text-sm font-normal cursor-pointer",children:t})]},e)))})})]})},e)))]})}),vs.jsxs(SB,{className:"mt-6",children:[vs.jsx(lk,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),vs.jsxs(lk,{onClick:()=>{n&&d.mutate({role:n,permissions:r})},disabled:d.isPending,className:"btn-brand-primary",children:[d.isPending&&vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),vs.jsx(Pw,{className:"mr-2 h-4 w-4"}),"Save Permissions"]})]})]})})]})}function cLe(){const[e,t]=cs.useState({host:"",port:587,secure:!1,auth:{user:"",pass:""},senderEmail:"",senderName:""}),[n,a]=cs.useState(""),[r,s]=cs.useState(!1),{toast:i}=Fy(),{data:o,isLoading:l}=Sy({queryKey:["/api/smtp-config"],refetchOnWindowFocus:!1});cs.useEffect((()=>{o&&t(o)}),[o]);const c=ky({mutationFn:async e=>{const t=await _y("POST","/api/smtp-config",e);return await t.json()},onSuccess:()=>{i({title:"SMTP Configuration Saved",description:"Your email settings have been updated successfully"}),Ay.invalidateQueries({queryKey:["/api/smtp-config"]})},onError:e=>{i({title:"Error",description:`Failed to update SMTP configuration: ${e.message}`,variant:"destructive"})}}),d=ky({mutationFn:async({config:e,testEmail:t})=>{const n=await _y("POST","/api/smtp-config/test",{config:e,testEmail:t});return await n.json()},onSuccess:()=>{i({title:"Test Email Sent",description:"A test email has been sent successfully"})},onError:e=>{i({title:"Error",description:`Failed to send test email: ${e.message}`,variant:"destructive"})}}),u=n=>{const{name:a,value:r}=n.target;if(a.includes(".")){const[n,s]=a.split(".");t({...e,[n]:{...e[n],[s]:r}})}else t("port"===a?{...e,[a]:parseInt(r)||0}:{...e,[a]:r})};return l?vs.jsx("div",{className:"flex justify-center py-8",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-lg font-medium mb-2",children:"SMTP Server Configuration"}),vs.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure your email server settings to enable sending verification emails, notifications, and other communications."})]}),vs.jsxs(pR,{children:[vs.jsx(Lb,{className:"h-4 w-4"}),vs.jsx(hR,{children:"Important"}),vs.jsx(gR,{children:"Email functionality is required for team member invitations and password reset features."})]}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"host",children:"SMTP Host"}),vs.jsx(LB,{id:"host",name:"host",value:e.host,onChange:u,placeholder:"smtp.example.com"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"port",children:"SMTP Port"}),vs.jsx(LB,{id:"port",name:"port",type:"number",value:e.port.toString(),onChange:u,placeholder:"587"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"flex justify-between items-center",children:[vs.jsx(EB,{htmlFor:"secure",children:"Use Secure Connection (SSL/TLS)"}),vs.jsx(L4,{id:"secure",checked:e.secure,onCheckedChange:n=>{t({...e,secure:n,port:n?465:587})}})]}),vs.jsx("p",{className:"text-xs text-gray-500",children:"Enable for SSL/TLS connections. Usually port 465 for SSL and port 587 for TLS."})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"auth.user",children:"SMTP Username"}),vs.jsx(LB,{id:"auth.user",name:"auth.user",value:e.auth.user,onChange:u,placeholder:"username@example.com"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"auth.pass",children:"SMTP Password"}),vs.jsxs("div",{className:"relative",children:[vs.jsx(LB,{id:"auth.pass",name:"auth.pass",type:r?"text":"password",value:e.auth.pass,onChange:u,placeholder:"••••••••"}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2 btn-brand-primary",onClick:()=>s(!r),children:r?"Hide":"Show"})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"senderEmail",children:"Sender Email Address"}),vs.jsx(LB,{id:"senderEmail",name:"senderEmail",value:e.senderEmail,onChange:u,placeholder:"no-reply@yourcompany.com"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"senderName",children:"Sender Name"}),vs.jsx(LB,{id:"senderName",name:"senderName",value:e.senderName,onChange:u,placeholder:"Your Company Name"})]})]})]}),vs.jsxs("div",{className:"border-t pt-6 space-y-4",children:[vs.jsx("h4",{className:"font-medium",children:"Test Email Configuration"}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[vs.jsx("div",{className:"md:col-span-2",children:vs.jsx(LB,{value:n,onChange:e=>a(e.target.value),placeholder:"Enter an email address to receive a test message"})}),vs.jsxs(lk,{onClick:()=>{n?e.host&&e.auth.user&&e.auth.pass&&e.senderEmail?d.mutate({config:e,testEmail:n}):i({title:"Validation Error",description:"Please complete all required SMTP configuration fields first",variant:"destructive"}):i({title:"Validation Error",description:"Please enter an email address to send the test email to",variant:"destructive"})},disabled:d.isPending,className:"w-full btn-brand-primary",children:[d.isPending&&vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Test Email"]})]})]}),vs.jsxs("div",{className:"flex justify-end space-x-2",children:[vs.jsx(lk,{variant:"brand",children:"Cancel"}),vs.jsxs(lk,{className:"btn-brand-primary",onClick:()=>{e.host?e.auth.user&&e.auth.pass?e.senderEmail?c.mutate(e):i({title:"Validation Error",description:"Sender email address is required",variant:"destructive"}):i({title:"Validation Error",description:"SMTP username and password are required",variant:"destructive"}):i({title:"Validation Error",description:"SMTP host is required",variant:"destructive"})},disabled:c.isPending,children:[c.isPending&&vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Configuration"]})]})]})}function dLe({isOpen:e,onClose:t,onSuccess:n,provider:a}){const{toast:r}=Fy(),[s,i]=cs.useState(!1),[o,l]=cs.useState(!1),[c,d]=cs.useState(!1),[u,f]=cs.useState(null),[m,p]=cs.useState({partnerApiKey:"",partnerId:"",partnerWebhookUrl:`${window.location.origin}/api/webhooks/360dialog-partner`,redirectUrl:`${window.location.origin}/settings/channels/360dialog/callback`,companyName:"",logoUrl:""});cs.useEffect((()=>{e&&h()}),[e]);const h=async()=>{var e,t;d(!0);try{const n=await fetch(`/api/admin/partner-configurations/${a}`);if(n.ok){const a=await n.json();f(a),p({partnerApiKey:a.partnerApiKey||"",partnerId:a.partnerId||"",partnerWebhookUrl:a.partnerWebhookUrl||`${window.location.origin}/api/webhooks/360dialog-partner`,redirectUrl:a.redirectUrl||`${window.location.origin}/settings/channels/360dialog/callback`,companyName:(null==(e=a.publicProfile)?void 0:e.companyName)||"",logoUrl:(null==(t=a.publicProfile)?void 0:t.logoUrl)||""})}}catch(n){}finally{d(!1)}},g=e=>{const{name:t,value:n}=e.target;p((e=>({...e,[t]:n})))},x=()=>{p({partnerApiKey:"",partnerId:"",partnerWebhookUrl:`${window.location.origin}/api/webhooks/360dialog-partner`,redirectUrl:`${window.location.origin}/settings/channels/360dialog/callback`,companyName:"",logoUrl:""}),f(null),i(!1),l(!1)},y=async()=>{if(!m.partnerApiKey||!m.partnerId)return r({title:"Validation Error",description:"Partner API Key and Partner ID are required for validation.",variant:"destructive"}),!1;l(!0);try{const e=await fetch("/api/admin/partner-configurations/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:a,partnerApiKey:m.partnerApiKey,partnerId:m.partnerId})});if(e.ok){await e.json();return r({title:"Credentials Valid",description:`Successfully validated 360Dialog Partner credentials for Partner ID: ${m.partnerId}`}),!0}{const t=await e.json();throw new Error(t.error||"Invalid partner credentials")}}catch(e){return r({title:"Validation Failed",description:e.message||"Failed to validate 360Dialog Partner credentials.",variant:"destructive"}),!1}finally{l(!1)}},v=()=>{x(),t()};return c?vs.jsx(yB,{open:e,onOpenChange:v,children:vs.jsx(NB,{className:"sm:max-w-[600px]",children:vs.jsx("div",{className:"flex items-center justify-center p-8",children:vs.jsxs("div",{className:"text-center",children:[vs.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),vs.jsx("p",{children:"Loading configuration..."})]})})})}):vs.jsx(yB,{open:e,onOpenChange:v,children:vs.jsxs(NB,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[vs.jsx(CB,{children:vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx("i",{className:"ri-settings-3-line text-blue-500"}),"360Dialog Partner Configuration",u&&vs.jsx("span",{className:"text-sm text-gray-500",children:"(Edit)"})]})}),vs.jsxs("form",{onSubmit:async e=>{e.preventDefault(),i(!0);try{if(!(await y()))return void i(!1);const e={provider:a,partnerApiKey:m.partnerApiKey,partnerId:m.partnerId,partnerWebhookUrl:m.partnerWebhookUrl,redirectUrl:m.redirectUrl,publicProfile:{companyName:m.companyName,logoUrl:m.logoUrl},isActive:!0},s=u?`/api/admin/partner-configurations/${u.id}`:"/api/admin/partner-configurations",o=u?"PUT":"POST",l=await fetch(s,{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok){const e=await l.json();throw new Error(e.error||"Failed to save partner configuration")}r({title:"Success",description:`360Dialog Partner configuration ${u?"updated":"created"} successfully!`}),x(),n(),t()}catch(s){r({title:"Configuration Error",description:s.message||"Failed to save 360Dialog Partner configuration",variant:"destructive"})}finally{i(!1)}},className:"space-y-4",children:[vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:vs.jsxs("div",{className:"flex items-start",children:[vs.jsx("i",{className:"ri-information-line text-yellow-500 mr-2 mt-0.5"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-yellow-700 font-medium",children:"Super Admin Configuration"}),vs.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"This configuration is platform-wide and enables 360Dialog Partner API integration for all companies. Companies will use Integrated Onboarding to connect their WhatsApp accounts."})]})]})}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"partnerApiKey",children:"Partner API Key"}),vs.jsx(LB,{id:"partnerApiKey",name:"partnerApiKey",type:"password",value:m.partnerApiKey,onChange:g,placeholder:"Your 360Dialog Partner API key...",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your 360Dialog Partner API key from the Partner Hub"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"partnerId",children:"Partner ID"}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(LB,{id:"partnerId",name:"partnerId",value:m.partnerId,onChange:g,placeholder:"your-partner-id",required:!0,className:"flex-1"}),vs.jsx(lk,{type:"button",variant:"outline",onClick:y,disabled:o||!m.partnerApiKey||!m.partnerId,className:"whitespace-nowrap",children:o?"Validating...":"Test"})]}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Your unique Partner ID from 360Dialog Partner Hub"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"partnerWebhookUrl",children:"Partner Webhook URL"}),vs.jsx(LB,{id:"partnerWebhookUrl",name:"partnerWebhookUrl",value:m.partnerWebhookUrl,onChange:g,placeholder:"https://yourdomain.com/api/webhooks/360dialog-partner",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"URL where 360Dialog will send partner-level events (channel creation, status changes)"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"redirectUrl",children:"Redirect URL"}),vs.jsx(LB,{id:"redirectUrl",name:"redirectUrl",value:m.redirectUrl,onChange:g,placeholder:"https://yourdomain.com/settings/channels/360dialog/callback",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"URL where users are redirected after completing Integrated Onboarding"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"companyName",children:"Company Name"}),vs.jsx(LB,{id:"companyName",name:"companyName",value:m.companyName,onChange:g,placeholder:"Your Company Name"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Company name displayed during client onboarding"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"logoUrl",children:"Logo URL (Optional)"}),vs.jsx(LB,{id:"logoUrl",name:"logoUrl",value:m.logoUrl,onChange:g,placeholder:"https://yourdomain.com/logo.png"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Company logo displayed during client onboarding"})]})]}),vs.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:v,children:"Cancel"}),vs.jsx(lk,{type:"submit",variant:"outline",className:"btn-brand-primary",disabled:s||o,children:s?"Saving...":u?"Update Configuration":"Save Configuration"})]})]})]})})}var uLe=["PageUp","PageDown"],fLe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],mLe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},pLe="Slider",[hLe,gLe,xLe]=Zy(pLe),[yLe,vLe]=Vy(pLe,[xLe]),[bLe,wLe]=yLe(pLe),jLe=cs.forwardRef(((e,t)=>{const{name:n,min:a=0,max:r=100,step:s=1,orientation:i="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[a],value:d,onValueChange:u=()=>{},onValueCommit:f=()=>{},inverted:m=!1,form:p,...h}=e,g=cs.useRef(new Set),x=cs.useRef(0),y="horizontal"===i?SLe:kLe,[v=[],b]=yv({prop:d,defaultProp:c,onChange:e=>{var t;null==(t=[...g.current][x.current])||t.focus(),u(e)}}),w=cs.useRef(v);function j(e,t,{commit:n}={commit:!1}){const i=function(e){return(String(e).split(".")[1]||"").length}(s),o=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-a)/s)*s+a,i),c=DB(o,[a,r]);b(((e=[])=>{const a=function(e=[],t,n){const a=[...e];return a[n]=t,a.sort(((e,t)=>e-t))}(e,c,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map(((t,n)=>e[n+1]-t))}(e);return Math.min(...n)>=t}return!0}(a,l*s)){x.current=a.indexOf(c);const t=String(a)!==String(e);return t&&n&&f(a),t?a:e}return e}))}return vs.jsx(bLe,{scope:e.__scopeSlider,name:n,disabled:o,min:a,max:r,valueIndexToChangeRef:x,thumbs:g.current,values:v,orientation:i,form:p,children:vs.jsx(hLe.Provider,{scope:e.__scopeSlider,children:vs.jsx(hLe.Slot,{scope:e.__scopeSlider,children:vs.jsx(y,{"aria-disabled":o,"data-disabled":o?"":void 0,...h,ref:t,onPointerDown:By(h.onPointerDown,(()=>{o||(w.current=v)})),min:a,max:r,inverted:m,onSlideStart:o?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map((e=>Math.abs(e-t))),a=Math.min(...n);return n.indexOf(a)}(v,e);j(e,t)},onSlideMove:o?void 0:function(e){j(e,x.current)},onSlideEnd:o?void 0:function(){const e=w.current[x.current];v[x.current]!==e&&f(v)},onHomeKeyDown:()=>!o&&j(a,0,{commit:!0}),onEndKeyDown:()=>!o&&j(r,v.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!o){const n=uLe.includes(e.key)||e.shiftKey&&fLe.includes(e.key)?10:1,a=x.current;j(v[a]+s*n*t,a,{commit:!0})}}})})})})}));jLe.displayName=pLe;var[NLe,CLe]=yLe(pLe,{startEdge:"left",endEdge:"right",size:"width",direction:1}),SLe=cs.forwardRef(((e,t)=>{const{min:n,max:a,dir:r,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,[u,f]=cs.useState(null),m=Gy(t,(e=>f(e))),p=cs.useRef(void 0),h=ST(r),g="ltr"===h,x=g&&!s||!g&&s;function y(e){const t=p.current||u.getBoundingClientRect(),r=RLe([0,t.width],x?[n,a]:[a,n]);return p.current=t,r(e-t.left)}return vs.jsx(NLe,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:vs.jsx(MLe,{dir:h,"data-orientation":"horizontal",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=y(e.clientX);null==i||i(t)},onSlideMove:e=>{const t=y(e.clientX);null==o||o(t)},onSlideEnd:()=>{p.current=void 0,null==l||l()},onStepKeyDown:e=>{const t=mLe[x?"from-left":"from-right"].includes(e.key);null==c||c({event:e,direction:t?-1:1})}})})})),kLe=cs.forwardRef(((e,t)=>{const{min:n,max:a,inverted:r,onSlideStart:s,onSlideMove:i,onSlideEnd:o,onStepKeyDown:l,...c}=e,d=cs.useRef(null),u=Gy(t,d),f=cs.useRef(void 0),m=!r;function p(e){const t=f.current||d.current.getBoundingClientRect(),r=RLe([0,t.height],m?[a,n]:[n,a]);return f.current=t,r(e-t.top)}return vs.jsx(NLe,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:vs.jsx(MLe,{"data-orientation":"vertical",...c,ref:u,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=p(e.clientY);null==s||s(t)},onSlideMove:e=>{const t=p(e.clientY);null==i||i(t)},onSlideEnd:()=>{f.current=void 0,null==o||o()},onStepKeyDown:e=>{const t=mLe[m?"from-bottom":"from-top"].includes(e.key);null==l||l({event:e,direction:t?-1:1})}})})})),MLe=cs.forwardRef(((e,t)=>{const{__scopeSlider:n,onSlideStart:a,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:i,onEndKeyDown:o,onStepKeyDown:l,...c}=e,d=wLe(pLe,n);return vs.jsx(Xy.span,{...c,ref:t,onKeyDown:By(e.onKeyDown,(e=>{"Home"===e.key?(i(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):uLe.concat(fLe).includes(e.key)&&(l(e),e.preventDefault())})),onPointerDown:By(e.onPointerDown,(e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():a(e)})),onPointerMove:By(e.onPointerMove,(e=>{e.target.hasPointerCapture(e.pointerId)&&r(e)})),onPointerUp:By(e.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),s(e))}))})})),_Le="SliderTrack",ILe=cs.forwardRef(((e,t)=>{const{__scopeSlider:n,...a}=e,r=wLe(_Le,n);return vs.jsx(Xy.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...a,ref:t})}));ILe.displayName=_Le;var ALe="SliderRange",ELe=cs.forwardRef(((e,t)=>{const{__scopeSlider:n,...a}=e,r=wLe(ALe,n),s=CLe(ALe,n),i=Gy(t,cs.useRef(null)),o=r.values.length,l=r.values.map((e=>OLe(e,r.min,r.max))),c=o>1?Math.min(...l):0,d=100-Math.max(...l);return vs.jsx(Xy.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...a,ref:i,style:{...e.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}})}));ELe.displayName=ALe;var LLe="SliderThumb",TLe=cs.forwardRef(((e,t)=>{const n=gLe(e.__scopeSlider),[a,r]=cs.useState(null),s=Gy(t,(e=>r(e))),i=cs.useMemo((()=>a?n().findIndex((e=>e.ref.current===a)):-1),[n,a]);return vs.jsx(DLe,{...e,ref:s,index:i})})),DLe=cs.forwardRef(((e,t)=>{const{__scopeSlider:n,index:a,name:r,...s}=e,i=wLe(LLe,n),o=CLe(LLe,n),[l,c]=cs.useState(null),d=Gy(t,(e=>c(e))),u=!l||(i.form||!!l.closest("form")),f=nS(l),m=i.values[a],p=void 0===m?0:OLe(m,i.min,i.max),h=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(a,i.values.length),g=null==f?void 0:f[o.size],x=g?function(e,t,n){const a=e/2,r=RLe([0,50],[0,a]);return(a-r(t)*n)*n}(g,p,o.direction):0;return cs.useEffect((()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}}),[l,i.thumbs]),vs.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${p}% + ${x}px)`},children:[vs.jsx(hLe.ItemSlot,{scope:e.__scopeSlider,children:vs.jsx(Xy.span,{role:"slider","aria-label":e["aria-label"]||h,"aria-valuemin":i.min,"aria-valuenow":m,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...s,ref:d,style:void 0===m?{display:"none"}:e.style,onFocus:By(e.onFocus,(()=>{i.valueIndexToChangeRef.current=a}))})}),u&&vs.jsx(PLe,{name:r??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:m},a)]})}));TLe.displayName=LLe;var PLe=cs.forwardRef((({__scopeSlider:e,value:t,...n},a)=>{const r=cs.useRef(null),s=Gy(r,a),i=PB(t);return cs.useEffect((()=>{const e=r.current;if(!e)return;const n=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(n,"value").set;if(i!==t&&a){const n=new Event("input",{bubbles:!0});a.call(e,t),e.dispatchEvent(n)}}),[i,t]),vs.jsx(Xy.input,{style:{display:"none"},...n,ref:s,defaultValue:t})}));function OLe(e,t,n){return DB(100/(n-t)*(e-t),[0,100])}function RLe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(n-e[0])}}PLe.displayName="RadioBubbleInput";var zLe=jLe,FLe=ILe,BLe=ELe,ULe=TLe;const WLe=cs.forwardRef((({className:e,...t},n)=>vs.jsxs(zLe,{ref:n,className:fN("relative flex w-full touch-none select-none items-center",e),...t,children:[vs.jsx(FLe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:vs.jsx(BLe,{className:"absolute h-full bg-primary"})}),vs.jsx(ULe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})));WLe.displayName=zLe.displayName;const GLe=e=>"number"!=typeof e||isNaN(e)||e<0?0:Math.round(e/1e3*10)/10,VLe=e=>"number"!=typeof e||isNaN(e)||e<0?0:Math.round(1e3*e);function HLe(){const{toast:e}=Fy(),[t,n]=cs.useState({typing:{enabled:!0,wordsPerMinute:50,minDelay:1,maxDelay:5,randomnessFactor:.6,recordingMinDelay:2,recordingMaxDelay:4},messageSplitting:{enabled:!0,maxLength:300,splitMethod:"sentences",delayBetweenMessages:2,randomDelayFactor:.5,preserveFormatting:!0,minChunkSize:20,smartBoundaries:!0,prioritizeSentences:!0}}),[a,r]=cs.useState(!1),[s,i]=cs.useState(!1),[o,l]=cs.useState("Hello! This is a sample message to demonstrate how the typing indicators and message splitting will work. You can see how long messages will be broken down into smaller, more natural chunks that feel more human-like in conversation.");cs.useEffect((()=>{c()}),[]);const c=async()=>{r(!0);try{const e=await fetch("/api/whatsapp/behavior-config",{credentials:"include"});if(e.ok){const t=await e.json();n((e=>({typing:{...e.typing,minDelay:GLe(e.typing.minDelay),maxDelay:GLe(e.typing.maxDelay),recordingMinDelay:GLe(e.typing.recordingMinDelay),recordingMaxDelay:GLe(e.typing.recordingMaxDelay)},messageSplitting:{...e.messageSplitting,delayBetweenMessages:GLe(e.messageSplitting.delayBetweenMessages)}}))(t))}}catch(e){}finally{r(!1)}},d=e=>{if(!t.typing.enabled)return 0;const n=e.split(" ").length/t.typing.wordsPerMinute*60*1e3,a=.7+Math.random()*t.typing.randomnessFactor,r=VLe(t.typing.minDelay),s=VLe(t.typing.maxDelay);return Math.min(Math.max(n*a,r),s)},u=(e,t)=>{if(e.length<=t)return e;const n=Array.from(e.matchAll(/[.!?]+\s+/g));for(const i of n){const n=i.index+i[0].length;if(n<=t&&n>=20)return e.substring(0,n).trim()}const a=Array.from(e.matchAll(/[;:,]\s+/g));for(const i of a){const n=i.index+i[0].length;if(n<=t&&n>=30)return e.substring(0,n).trim()}const r=e.split(/\s+/);let s="";for(const i of r){const e=s+(s?" ":"")+i;if(!(e.length<=t))break;s=e}return s||e.substring(0,t)},f=(e=>{if(!t.messageSplitting.enabled||e.length<=t.messageSplitting.maxLength)return[e];const n=[];let a=e.trim();for(;a.length>0;){if(a.length<=t.messageSplitting.maxLength){n.push(a);break}const e=u(a,t.messageSplitting.maxLength);n.push(e),a=a.substring(e.length).trim()}return n.filter((e=>e.trim().length>0))})(o);return vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(vw,{className:"h-5 w-5"}),vs.jsx(ak,{children:"Typing Indicators"})]}),vs.jsx(rk,{children:"Configure human-like typing indicators that appear before sending messages"})]}),vs.jsxs(sk,{className:"space-y-6",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{className:"space-y-0.5",children:[vs.jsx(EB,{className:"text-base",children:"Enable Typing Indicators"}),vs.jsx("div",{className:"text-sm text-muted-foreground",children:'Show "Typing..." and "Recording..." indicators before sending messages'})]}),vs.jsx(L4,{checked:t.typing.enabled,onCheckedChange:e=>n((t=>({...t,typing:{...t.typing,enabled:e}})))})]}),t.typing.enabled&&vs.jsxs(vs.Fragment,{children:[vs.jsx(R$,{}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"wordsPerMinute",children:"Typing Speed (WPM)"}),vs.jsxs("div",{className:"px-3",children:[vs.jsx(WLe,{id:"wordsPerMinute",min:20,max:100,step:5,value:[t.typing.wordsPerMinute],onValueChange:([e])=>n((t=>({...t,typing:{...t.typing,wordsPerMinute:e}}))),className:"w-full"}),vs.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[vs.jsx("span",{children:"20 WPM"}),vs.jsxs("span",{className:"font-medium",children:[t.typing.wordsPerMinute," WPM"]}),vs.jsx("span",{children:"100 WPM"})]})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"randomnessFactor",children:"Randomness Factor"}),vs.jsxs("div",{className:"px-3",children:[vs.jsx(WLe,{id:"randomnessFactor",min:0,max:1,step:.1,value:[t.typing.randomnessFactor],onValueChange:([e])=>n((t=>({...t,typing:{...t.typing,randomnessFactor:e}}))),className:"w-full"}),vs.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[vs.jsx("span",{children:"Consistent"}),vs.jsxs("span",{className:"font-medium",children:[(100*t.typing.randomnessFactor).toFixed(0),"%"]}),vs.jsx("span",{children:"Random"})]})]})]})]}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"minDelay",children:"Minimum Delay (seconds)"}),vs.jsx(LB,{id:"minDelay",type:"number",min:"0.5",max:"10",step:"0.1",value:t.typing.minDelay,onChange:e=>{const t=parseFloat(e.target.value),a=isNaN(t)?1:Math.max(.5,Math.min(10,t));n((e=>({...e,typing:{...e.typing,minDelay:a}})))},placeholder:"e.g., 1.0"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum time to show typing indicator (0.5-10 seconds)"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"maxDelay",children:"Maximum Delay (seconds)"}),vs.jsx(LB,{id:"maxDelay",type:"number",min:"1",max:"30",step:"0.1",value:t.typing.maxDelay,onChange:e=>{const t=parseFloat(e.target.value),a=isNaN(t)?5:Math.max(1,Math.min(30,t));n((e=>({...e,typing:{...e.typing,maxDelay:a}})))},placeholder:"e.g., 5.0"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum time to show typing indicator (1-30 seconds)"})]})]}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"recordingMinDelay",children:"Recording Min Delay (seconds)"}),vs.jsx(LB,{id:"recordingMinDelay",type:"number",min:"1",max:"10",step:"0.1",value:t.typing.recordingMinDelay,onChange:e=>{const t=parseFloat(e.target.value),a=isNaN(t)?2:Math.max(1,Math.min(10,t));n((e=>({...e,typing:{...e.typing,recordingMinDelay:a}})))},placeholder:"e.g., 2.0"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum time to show recording indicator (1-10 seconds)"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"recordingMaxDelay",children:"Recording Max Delay (seconds)"}),vs.jsx(LB,{id:"recordingMaxDelay",type:"number",min:"2",max:"15",step:"0.1",value:t.typing.recordingMaxDelay,onChange:e=>{const t=parseFloat(e.target.value),a=isNaN(t)?4:Math.max(2,Math.min(15,t));n((e=>({...e,typing:{...e.typing,recordingMaxDelay:a}})))},placeholder:"e.g., 4.0"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum time to show recording indicator (2-15 seconds)"})]})]})]})]})]}),vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(vj,{className:"h-5 w-5"}),vs.jsx(ak,{children:"Message Splitting"})]}),vs.jsx(rk,{children:"Automatically split long messages into smaller, more natural chunks"})]}),vs.jsxs(sk,{className:"space-y-6",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{className:"space-y-0.5",children:[vs.jsx(EB,{className:"text-base",children:"Enable Message Splitting"}),vs.jsx("div",{className:"text-sm text-muted-foreground",children:"Break long bot responses into multiple messages for better readability"})]}),vs.jsx(L4,{checked:t.messageSplitting.enabled,onCheckedChange:e=>n((t=>({...t,messageSplitting:{...t.messageSplitting,enabled:e}})))})]}),t.messageSplitting.enabled&&vs.jsxs(vs.Fragment,{children:[vs.jsx(R$,{}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"maxLength",children:"Maximum Message Length"}),vs.jsxs("div",{className:"px-3",children:[vs.jsx(WLe,{id:"maxLength",min:100,max:1e3,step:50,value:[t.messageSplitting.maxLength],onValueChange:([e])=>n((t=>({...t,messageSplitting:{...t.messageSplitting,maxLength:e}}))),className:"w-full"}),vs.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[vs.jsx("span",{children:"100"}),vs.jsxs("span",{className:"font-medium",children:[t.messageSplitting.maxLength," chars"]}),vs.jsx("span",{children:"1000"})]})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"splitMethod",children:"Split Method"}),vs.jsxs(ZU,{value:t.messageSplitting.splitMethod,onValueChange:e=>n((t=>({...t,messageSplitting:{...t.messageSplitting,splitMethod:e}}))),children:[vs.jsx(tW,{children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"sentences",children:"By Sentences"}),vs.jsx(sW,{value:"paragraphs",children:"By Paragraphs"}),vs.jsx(sW,{value:"characters",children:"By Characters"})]})]})]})]}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"delayBetweenMessages",children:"Delay Between Message Chunks (seconds)"}),vs.jsx(LB,{id:"delayBetweenMessages",type:"number",min:"0.5",max:"10",step:"0.1",value:t.messageSplitting.delayBetweenMessages,onChange:e=>{const t=parseFloat(e.target.value),a=isNaN(t)?2:Math.max(.5,Math.min(10,t));n((e=>({...e,messageSplitting:{...e.messageSplitting,delayBetweenMessages:a}})))},placeholder:"e.g., 2.0"}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Time between split message chunks (0.5-10 seconds)"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"randomDelayFactor",children:"Random Delay Factor"}),vs.jsxs("div",{className:"px-3",children:[vs.jsx(WLe,{id:"randomDelayFactor",min:0,max:1,step:.1,value:[t.messageSplitting.randomDelayFactor],onValueChange:([e])=>n((t=>({...t,messageSplitting:{...t.messageSplitting,randomDelayFactor:e}}))),className:"w-full"}),vs.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[vs.jsx("span",{children:"Consistent"}),vs.jsxs("span",{className:"font-medium",children:[(100*t.messageSplitting.randomDelayFactor).toFixed(0),"%"]}),vs.jsx("span",{children:"Random"})]})]})]})]}),vs.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"minChunkSize",children:"Minimum Chunk Size"}),vs.jsx(LB,{id:"minChunkSize",type:"number",min:"10",max:"100",value:t.messageSplitting.minChunkSize,onChange:e=>n((t=>({...t,messageSplitting:{...t.messageSplitting,minChunkSize:parseInt(e.target.value)||20}})))}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum characters per chunk to avoid very short messages"})]})}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{className:"space-y-0.5",children:[vs.jsx(EB,{className:"text-base",children:"Preserve Formatting"}),vs.jsx("div",{className:"text-sm text-muted-foreground",children:"Maintain markdown and text formatting when splitting messages"})]}),vs.jsx(L4,{checked:t.messageSplitting.preserveFormatting,onCheckedChange:e=>n((t=>({...t,messageSplitting:{...t.messageSplitting,preserveFormatting:e}})))})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{className:"space-y-0.5",children:[vs.jsx(EB,{className:"text-base",children:"Smart Boundary Detection"}),vs.jsx("div",{className:"text-sm text-muted-foreground",children:"Intelligently split at sentence and clause boundaries"})]}),vs.jsx(L4,{checked:t.messageSplitting.smartBoundaries,onCheckedChange:e=>n((t=>({...t,messageSplitting:{...t.messageSplitting,smartBoundaries:e}})))})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{className:"space-y-0.5",children:[vs.jsx(EB,{className:"text-base",children:"Prioritize Sentence Boundaries"}),vs.jsx("div",{className:"text-sm text-muted-foreground",children:"Prefer splitting at sentence endings over character limits"})]}),vs.jsx(L4,{checked:t.messageSplitting.prioritizeSentences,onCheckedChange:e=>n((t=>({...t,messageSplitting:{...t.messageSplitting,prioritizeSentences:e}})))})]})]})]})]})]}),vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Qb,{className:"h-5 w-5"}),vs.jsx(ak,{children:"Preview"})]}),vs.jsx(rk,{children:"See how your settings will affect message delivery"})]}),vs.jsxs(sk,{className:"space-y-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"previewText",children:"Sample Message"}),vs.jsx("textarea",{id:"previewText",className:"w-full min-h-[100px] p-3 border rounded-md resize-none",value:o,onChange:e=>l(e.target.value),placeholder:"Enter a sample message to see how it will be split and timed..."})]}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{className:"text-sm font-medium",children:"Message Preview"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[t.typing.enabled&&vs.jsxs(dk,{variant:"secondary",className:"text-xs",children:[vs.jsx(Bb,{className:"h-3 w-3 mr-1"}),"~",Math.round(d(o)/1e3),"s typing"]}),t.messageSplitting.enabled&&f.length>1&&vs.jsxs(dk,{variant:"outline",className:"text-xs",children:[f.length," messages"]})]})]}),vs.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:f.map(((e,n)=>vs.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsxs("span",{className:"text-xs font-medium text-blue-700",children:["Message ",n+1," of ",f.length]}),vs.jsxs("span",{className:"text-xs text-blue-600",children:[e.length," characters"]})]}),vs.jsx("p",{className:"text-sm text-gray-700",children:e}),t.typing.enabled&&vs.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:[vs.jsx(Bb,{className:"h-3 w-3 inline mr-1"}),"Typing delay: ~",Math.round(d(e)/1e3),"s"]})]},n)))})]})]})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs(lk,{variant:"outline",onClick:()=>{n({typing:{enabled:!0,wordsPerMinute:50,minDelay:1,maxDelay:5,randomnessFactor:.6,recordingMinDelay:2,recordingMaxDelay:4},messageSplitting:{enabled:!0,maxLength:300,splitMethod:"sentences",delayBetweenMessages:2,randomDelayFactor:.5,preserveFormatting:!0,minChunkSize:0,smartBoundaries:!1,prioritizeSentences:!1}})},disabled:a||s,children:[vs.jsx(Dw,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsxs(lk,{variant:"outline",onClick:c,disabled:a||s,children:[a?vs.jsx(zw,{className:"h-4 w-4 mr-2 animate-spin"}):vs.jsx(zw,{className:"h-4 w-4 mr-2"}),"Reload"]}),vs.jsxs(lk,{onClick:async()=>{i(!0);try{const n=(e=>({typing:{...e.typing,minDelay:VLe(e.typing.minDelay),maxDelay:VLe(e.typing.maxDelay),recordingMinDelay:VLe(e.typing.recordingMinDelay),recordingMaxDelay:VLe(e.typing.recordingMaxDelay)},messageSplitting:{...e.messageSplitting,delayBetweenMessages:VLe(e.messageSplitting.delayBetweenMessages)}}))(t);if(!(await fetch("/api/whatsapp/behavior-config",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)})).ok)throw new Error("Failed to save configuration");e({title:"Settings Saved",description:"WhatsApp behavior settings have been updated successfully."})}catch(n){e({title:"Error",description:"Failed to save WhatsApp behavior settings. Please try again.",variant:"destructive"})}finally{i(!1)}},disabled:a||s,children:[s?vs.jsx(zw,{className:"h-4 w-4 mr-2 animate-spin"}):vs.jsx(Pw,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]}),vs.jsxs(pR,{children:[vs.jsx(ow,{className:"h-4 w-4"}),vs.jsx(gR,{children:"These settings apply to all WhatsApp channels and take effect immediately after saving. Typing indicators make bot responses feel more human-like, while message splitting improves readability for long responses."})]})]})}function qLe({isOpen:e,onClose:t,onSuccess:n}){const{toast:a}=Fy(),[r,s]=cs.useState(!1),[i,o]=cs.useState(!1),[l,c]=cs.useState(!1),[d,u]=cs.useState(!1),[f,m]=cs.useState(!1),[p,h]=cs.useState({connectionName:"",emailAddress:"",imapHost:"",imapPort:"993",imapSecure:!0,imapUsername:"",imapPassword:"",smtpHost:"",smtpPort:"587",smtpSecure:!0,smtpUsername:"",smtpPassword:"",syncFolder:"INBOX",maxSyncMessages:"100",useOAuth2:!1,oauth2ClientId:"",oauth2ClientSecret:"",oauth2RefreshToken:""}),g=e=>{const{name:t,value:n}=e.target;h((e=>({...e,[t]:n})))},x=(e,t)=>{h((n=>({...n,[e]:t})))},y=()=>{h({connectionName:"",emailAddress:"",imapHost:"",imapPort:"993",imapSecure:!0,imapUsername:"",imapPassword:"",smtpHost:"",smtpPort:"587",smtpSecure:!0,smtpUsername:"",smtpPassword:"",syncFolder:"INBOX",maxSyncMessages:"100",useOAuth2:!1,oauth2ClientId:"",oauth2ClientSecret:"",oauth2RefreshToken:""})},v=()=>{y(),t()},b=async()=>{if(!p.emailAddress||!p.imapHost||!p.smtpHost)return a({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"}),!1;if(!(p.useOAuth2||p.imapPassword&&p.smtpPassword))return a({title:"Validation Error",description:"Please provide passwords or configure OAuth2",variant:"destructive"}),!1;o(!0);try{const e=await fetch("/api/email/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({imapHost:p.imapHost,imapPort:parseInt(p.imapPort),imapSecure:p.imapSecure,imapUsername:p.imapUsername||p.emailAddress,imapPassword:p.imapPassword,smtpHost:p.smtpHost,smtpPort:parseInt(p.smtpPort),smtpSecure:p.smtpSecure,smtpUsername:p.smtpUsername||p.emailAddress,smtpPassword:p.smtpPassword,useOAuth2:p.useOAuth2,oauth2ClientId:p.oauth2ClientId,oauth2ClientSecret:p.oauth2ClientSecret,oauth2RefreshToken:p.oauth2RefreshToken})});if(e.ok)return a({title:"Connection Test Successful",description:"Email server credentials are valid"}),!0;{const t=await e.json();return a({title:"Connection Test Failed",description:t.error||"Failed to connect to email server",variant:"destructive"}),!1}}catch(e){return a({title:"Connection Test Error",description:e.message||"Failed to test email connection",variant:"destructive"}),!1}finally{o(!1)}};return vs.jsx(yB,{open:e,onOpenChange:v,children:vs.jsxs(NB,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[vs.jsx(CB,{children:vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx(hw,{className:"h-5 w-5 text-blue-500"}),"Connect Email Channel"]})}),vs.jsxs("form",{onSubmit:async e=>{e.preventDefault(),s(!0);try{if(!(await b()))return void s(!1);const e=await fetch("/api/channel-connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channelType:"email",accountId:p.emailAddress,accountName:p.connectionName,connectionData:{emailAddress:p.emailAddress,imapHost:p.imapHost,imapPort:parseInt(p.imapPort),imapSecure:p.imapSecure,imapUsername:p.imapUsername||p.emailAddress,imapPassword:p.imapPassword,smtpHost:p.smtpHost,smtpPort:parseInt(p.smtpPort),smtpSecure:p.smtpSecure,smtpUsername:p.smtpUsername||p.emailAddress,smtpPassword:p.smtpPassword,syncFolder:p.syncFolder,maxSyncMessages:parseInt(p.maxSyncMessages),useOAuth2:p.useOAuth2,oauth2ClientId:p.oauth2ClientId,oauth2ClientSecret:p.oauth2ClientSecret,oauth2RefreshToken:p.oauth2RefreshToken}})});if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to create email connection")}a({title:"Success",description:"Email channel connection created successfully!"}),y(),n(),t()}catch(r){a({title:"Connection Error",description:r.message||"Failed to create email connection",variant:"destructive"})}finally{s(!1)}},className:"space-y-6",children:[vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("h3",{className:"text-lg font-medium",children:"Basic Configuration"}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"connectionName",children:"Connection Name"}),vs.jsx(LB,{id:"connectionName",name:"connectionName",value:p.connectionName,onChange:g,placeholder:"My Email Support",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"A friendly name for this email connection"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"emailAddress",children:"Email Address"}),vs.jsx(LB,{id:"emailAddress",name:"emailAddress",type:"email",value:p.emailAddress,onChange:g,placeholder:"support@company.com",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"The email address for sending and receiving messages"})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("h3",{className:"text-lg font-medium",children:"IMAP Settings (Receiving)"}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"imapHost",children:"IMAP Host"}),vs.jsx(LB,{id:"imapHost",name:"imapHost",value:p.imapHost,onChange:g,placeholder:"imap.gmail.com",required:!0})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"imapPort",children:"IMAP Port"}),vs.jsx(LB,{id:"imapPort",name:"imapPort",value:p.imapPort,onChange:g,placeholder:"993",required:!0})]})]}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(V7,{id:"imapSecure",checked:p.imapSecure,onCheckedChange:e=>x("imapSecure",e)}),vs.jsx(EB,{htmlFor:"imapSecure",children:"Use SSL/TLS for IMAP"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"imapUsername",children:"IMAP Username (optional)"}),vs.jsx(LB,{id:"imapUsername",name:"imapUsername",value:p.imapUsername,onChange:g,placeholder:"Leave empty to use email address"})]}),!p.useOAuth2&&vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"imapPassword",children:"IMAP Password"}),vs.jsxs("div",{className:"relative",children:[vs.jsx(LB,{id:"imapPassword",name:"imapPassword",type:l?"text":"password",value:p.imapPassword,onChange:g,placeholder:"Your email password or app password",required:!p.useOAuth2,className:"pr-10"}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>c(!l),children:l?vs.jsx(Yb,{className:"h-4 w-4"}):vs.jsx(Qb,{className:"h-4 w-4"})})]})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("h3",{className:"text-lg font-medium",children:"SMTP Settings (Sending)"}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"smtpHost",children:"SMTP Host"}),vs.jsx(LB,{id:"smtpHost",name:"smtpHost",value:p.smtpHost,onChange:g,placeholder:"smtp.gmail.com",required:!0})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"smtpPort",children:"SMTP Port"}),vs.jsx(LB,{id:"smtpPort",name:"smtpPort",value:p.smtpPort,onChange:g,placeholder:"587",required:!0})]})]}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(V7,{id:"smtpSecure",checked:p.smtpSecure,onCheckedChange:e=>x("smtpSecure",e)}),vs.jsx(EB,{htmlFor:"smtpSecure",children:"Use SSL/TLS for SMTP"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"smtpUsername",children:"SMTP Username (optional)"}),vs.jsx(LB,{id:"smtpUsername",name:"smtpUsername",value:p.smtpUsername,onChange:g,placeholder:"Leave empty to use email address"})]}),!p.useOAuth2&&vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"smtpPassword",children:"SMTP Password"}),vs.jsxs("div",{className:"relative",children:[vs.jsx(LB,{id:"smtpPassword",name:"smtpPassword",type:d?"text":"password",value:p.smtpPassword,onChange:g,placeholder:"Your email password or app password",required:!p.useOAuth2,className:"pr-10"}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>u(!d),children:d?vs.jsx(Yb,{className:"h-4 w-4"}):vs.jsx(Qb,{className:"h-4 w-4"})})]})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("h3",{className:"text-lg font-medium",children:"Advanced Settings"}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"syncFolder",children:"Sync Folder"}),vs.jsx(LB,{id:"syncFolder",name:"syncFolder",value:p.syncFolder,onChange:g,placeholder:"INBOX"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Email folder to monitor for new messages"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"maxSyncMessages",children:"Max Messages to Sync"}),vs.jsx(LB,{id:"maxSyncMessages",name:"maxSyncMessages",type:"number",value:p.maxSyncMessages,onChange:g,placeholder:"100",min:"1",max:"1000"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Maximum number of messages to sync per check"})]})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(V7,{id:"useOAuth2",checked:p.useOAuth2,onCheckedChange:e=>x("useOAuth2",e)}),vs.jsx(EB,{htmlFor:"useOAuth2",children:"Use OAuth2 Authentication (Recommended for Gmail)"})]}),p.useOAuth2&&vs.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-blue-200",children:[vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"oauth2ClientId",children:"OAuth2 Client ID"}),vs.jsx(LB,{id:"oauth2ClientId",name:"oauth2ClientId",value:p.oauth2ClientId,onChange:g,placeholder:"Your OAuth2 client ID",required:p.useOAuth2})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"oauth2ClientSecret",children:"OAuth2 Client Secret"}),vs.jsxs("div",{className:"relative",children:[vs.jsx(LB,{id:"oauth2ClientSecret",name:"oauth2ClientSecret",type:f?"text":"password",value:p.oauth2ClientSecret,onChange:g,placeholder:"Your OAuth2 client secret",required:p.useOAuth2,className:"pr-10"}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>m(!f),children:f?vs.jsx(Yb,{className:"h-4 w-4"}):vs.jsx(Qb,{className:"h-4 w-4"})})]})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"oauth2RefreshToken",children:"OAuth2 Refresh Token"}),vs.jsx(LB,{id:"oauth2RefreshToken",name:"oauth2RefreshToken",value:p.oauth2RefreshToken,onChange:g,placeholder:"Your OAuth2 refresh token",required:p.useOAuth2}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Obtain this from your OAuth2 provider's authorization flow"})]})]})]}),vs.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:v,children:"Cancel"}),vs.jsxs(lk,{type:"button",variant:"outline",onClick:b,disabled:i||!p.emailAddress||!p.imapHost||!p.smtpHost,className:"flex items-center gap-2",children:[i?vs.jsx(uw,{className:"h-4 w-4 animate-spin"}):vs.jsx(Jw,{className:"h-4 w-4"}),i?"Testing...":"Test Connection"]}),vs.jsxs(lk,{type:"submit",disabled:r||i,className:"flex items-center gap-2",children:[r?vs.jsx(uw,{className:"h-4 w-4 animate-spin"}):vs.jsx(hw,{className:"h-4 w-4"}),r?"Creating...":"Create Connection"]})]})]})]})})}function $Le({isOpen:e,onClose:t,onSuccess:n,connectionId:a}){const{toast:r}=Fy(),[s,i]=cs.useState(!1),[o,l]=cs.useState(!1),[c,d]=cs.useState(!1),[u,f]=cs.useState(!1),[m,p]=cs.useState(!1),[h,g]=cs.useState({connectionName:"",emailAddress:"",displayName:"",signature:"",imapHost:"",imapPort:"993",imapSecure:!0,imapUsername:"",imapPassword:"",smtpHost:"",smtpPort:"587",smtpSecure:!0,smtpUsername:"",smtpPassword:"",syncFolder:"INBOX",maxSyncMessages:"100",useOAuth2:!1,oauth2ClientId:"",oauth2ClientSecret:"",oauth2RefreshToken:""});cs.useEffect((()=>{e&&a&&x()}),[e,a]);const x=async()=>{var e,t,n;i(!0);try{const r=await fetch(`/api/email/config/${a}`,{method:"GET",credentials:"include"});if(!r.ok){const e=await r.json().catch((()=>({})));throw 404===r.status?new Error(e.message||"Email configuration not found. Please check if the email channel is properly configured."):403===r.status?new Error(e.message||"Access denied. You do not have permission to edit this email channel."):401===r.status?new Error(e.message||"Authentication required. Please log in again."):new Error(e.message||`Server error: ${r.status}. Please try again later.`)}const s=await r.json();if(s.success&&s.data){const a=s.data;g({connectionName:a.connectionName||"",emailAddress:a.emailAddress||"",displayName:a.displayName||"",signature:a.signature||"",imapHost:a.imapHost||"",imapPort:(null==(e=a.imapPort)?void 0:e.toString())||"993",imapSecure:!1!==a.imapSecure,imapUsername:a.imapUsername||"",imapPassword:"",smtpHost:a.smtpHost||"",smtpPort:(null==(t=a.smtpPort)?void 0:t.toString())||"587",smtpSecure:!1!==a.smtpSecure,smtpUsername:a.smtpUsername||"",smtpPassword:"",syncFolder:a.syncFolder||"INBOX",maxSyncMessages:(null==(n=a.maxSyncMessages)?void 0:n.toString())||"100",useOAuth2:a.useOAuth2||!1,oauth2ClientId:a.oauth2ClientId||"",oauth2ClientSecret:"",oauth2RefreshToken:""})}}catch(s){r({title:"Error",description:s.message||"Failed to load email configuration",variant:"destructive"})}finally{i(!1)}},y=e=>{const{name:t,value:n}=e.target;g((e=>({...e,[t]:n})))},v=(e,t)=>{g((n=>({...n,[e]:t})))},b=()=>{c||o||t()};return s?vs.jsx(yB,{open:e,onOpenChange:b,children:vs.jsx(NB,{className:"sm:max-w-[600px]",children:vs.jsxs("div",{className:"flex items-center justify-center py-8",children:[vs.jsx(uw,{className:"h-8 w-8 animate-spin"}),vs.jsx("span",{className:"ml-2",children:"Loading email configuration..."})]})})}):vs.jsx(yB,{open:e,onOpenChange:b,children:vs.jsxs(NB,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[vs.jsx(CB,{children:vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx(Hw,{className:"h-5 w-5 text-blue-500"}),"Edit Email Channel"]})}),vs.jsxs("form",{onSubmit:async e=>{e.preventDefault(),d(!0);try{const e=await fetch("/api/email/configure",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({connectionId:a,isUpdate:!0,imapHost:h.imapHost,imapPort:parseInt(h.imapPort),imapSecure:h.imapSecure,imapUsername:h.imapUsername||h.emailAddress,imapPassword:h.imapPassword||void 0,smtpHost:h.smtpHost,smtpPort:parseInt(h.smtpPort),smtpSecure:h.smtpSecure,smtpUsername:h.smtpUsername||h.emailAddress,smtpPassword:h.smtpPassword||void 0,emailAddress:h.emailAddress,displayName:h.displayName,signature:h.signature,syncFolder:h.syncFolder,maxSyncMessages:parseInt(h.maxSyncMessages)})}),t=await e.json();t.success?(r({title:"Email Channel Updated",description:"Your email channel has been updated successfully"}),n(),b()):r({title:"Update Failed",description:t.message||"Failed to update email channel",variant:"destructive"})}catch(t){r({title:"Update Failed",description:t.message||"Failed to update email channel",variant:"destructive"})}finally{d(!1)}},className:"space-y-6",children:[vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("h3",{className:"text-lg font-medium",children:"Basic Configuration"}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"connectionName",children:"Connection Name"}),vs.jsx(LB,{id:"connectionName",name:"connectionName",value:h.connectionName,onChange:y,placeholder:"My Email Support",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"A friendly name for this email connection"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"emailAddress",children:"Email Address"}),vs.jsx(LB,{id:"emailAddress",name:"emailAddress",type:"email",value:h.emailAddress,onChange:y,placeholder:"support@company.com",required:!0}),vs.jsx("p",{className:"text-sm text-gray-500",children:"The email address for sending and receiving messages"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"displayName",children:"Display Name (Optional)"}),vs.jsx(LB,{id:"displayName",name:"displayName",value:h.displayName,onChange:y,placeholder:"Support Team"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"The name that appears when sending emails"})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("h3",{className:"text-lg font-medium",children:"IMAP Settings (Receiving)"}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"imapHost",children:"IMAP Host"}),vs.jsx(LB,{id:"imapHost",name:"imapHost",value:h.imapHost,onChange:y,placeholder:"imap.gmail.com",required:!0})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"imapPort",children:"IMAP Port"}),vs.jsx(LB,{id:"imapPort",name:"imapPort",value:h.imapPort,onChange:y,placeholder:"993",required:!0})]})]}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(V7,{id:"imapSecure",checked:h.imapSecure,onCheckedChange:e=>v("imapSecure",e)}),vs.jsx(EB,{htmlFor:"imapSecure",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Use SSL/TLS for IMAP"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"imapUsername",children:"IMAP Username"}),vs.jsx(LB,{id:"imapUsername",name:"imapUsername",value:h.imapUsername,onChange:y,placeholder:"Leave empty to use email address"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Usually your email address. Leave empty to use the email address above."})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"imapPassword",children:"IMAP Password"}),vs.jsxs("div",{className:"relative",children:[vs.jsx(LB,{id:"imapPassword",name:"imapPassword",type:u?"text":"password",value:h.imapPassword,onChange:y,placeholder:"Leave empty to keep current password"}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!u),children:u?vs.jsx(Yb,{className:"h-4 w-4"}):vs.jsx(Qb,{className:"h-4 w-4"})})]}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Leave empty to keep the current password unchanged"})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("h3",{className:"text-lg font-medium",children:"SMTP Settings (Sending)"}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"smtpHost",children:"SMTP Host"}),vs.jsx(LB,{id:"smtpHost",name:"smtpHost",value:h.smtpHost,onChange:y,placeholder:"smtp.gmail.com",required:!0})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"smtpPort",children:"SMTP Port"}),vs.jsx(LB,{id:"smtpPort",name:"smtpPort",value:h.smtpPort,onChange:y,placeholder:"587",required:!0})]})]}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(V7,{id:"smtpSecure",checked:h.smtpSecure,onCheckedChange:e=>v("smtpSecure",e)}),vs.jsx(EB,{htmlFor:"smtpSecure",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Use SSL/TLS for SMTP"})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"smtpUsername",children:"SMTP Username"}),vs.jsx(LB,{id:"smtpUsername",name:"smtpUsername",value:h.smtpUsername,onChange:y,placeholder:"Leave empty to use email address"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Usually your email address. Leave empty to use the email address above."})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"smtpPassword",children:"SMTP Password"}),vs.jsxs("div",{className:"relative",children:[vs.jsx(LB,{id:"smtpPassword",name:"smtpPassword",type:m?"text":"password",value:h.smtpPassword,onChange:y,placeholder:"Leave empty to keep current password"}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>p(!m),children:m?vs.jsx(Yb,{className:"h-4 w-4"}):vs.jsx(Qb,{className:"h-4 w-4"})})]}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Leave empty to keep the current password unchanged"})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("h3",{className:"text-lg font-medium",children:"Email Settings"}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"signature",children:"Email Signature (Optional)"}),vs.jsx(LB,{id:"signature",name:"signature",value:h.signature,onChange:y,placeholder:"Best regards, Support Team"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Signature to append to outgoing emails"})]}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"syncFolder",children:"Sync Folder"}),vs.jsxs(ZU,{value:h.syncFolder,onValueChange:e=>((e,t)=>{g((n=>({...n,[e]:t})))})("syncFolder",e),children:[vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"Select folder"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"INBOX",children:"INBOX"}),vs.jsx(sW,{value:"All",children:"All Mail"}),vs.jsx(sW,{value:"Sent",children:"Sent"})]})]})]}),vs.jsxs("div",{className:"grid gap-2",children:[vs.jsx(EB,{htmlFor:"maxSyncMessages",children:"Max Messages to Sync"}),vs.jsx(LB,{id:"maxSyncMessages",name:"maxSyncMessages",type:"number",value:h.maxSyncMessages,onChange:y,placeholder:"100",min:"1",max:"1000"})]})]})]}),vs.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:b,children:"Cancel"}),vs.jsxs(lk,{type:"button",variant:"outline",onClick:async()=>{l(!0);try{const e=await fetch("/api/email/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({imapHost:h.imapHost,imapPort:parseInt(h.imapPort),imapSecure:h.imapSecure,imapUsername:h.imapUsername||h.emailAddress,imapPassword:h.imapPassword,smtpHost:h.smtpHost,smtpPort:parseInt(h.smtpPort),smtpSecure:h.smtpSecure,smtpUsername:h.smtpUsername||h.emailAddress,smtpPassword:h.smtpPassword,emailAddress:h.emailAddress})}),t=await e.json();t.success?r({title:"Connection Test Successful",description:"Both IMAP and SMTP connections are working correctly"}):r({title:"Connection Test Failed",description:t.message||"Failed to connect to email server",variant:"destructive"})}catch(e){r({title:"Connection Test Failed",description:e.message||"Failed to test email connection",variant:"destructive"})}finally{l(!1)}},disabled:o||!h.emailAddress||!h.imapHost||!h.smtpHost,className:"flex items-center gap-2",children:[o?vs.jsx(uw,{className:"h-4 w-4 animate-spin"}):vs.jsx(Jw,{className:"h-4 w-4"}),o?"Testing...":"Test Connection"]}),vs.jsxs(lk,{type:"submit",disabled:c||o,className:"flex items-center gap-2",children:[c?vs.jsx(uw,{className:"h-4 w-4 animate-spin"}):vs.jsx(hw,{className:"h-4 w-4"}),c?"Updating...":"Update Channel"]})]})]})]})})}function YLe(){var e,t,n;const[a,r]=cs.useState(""),[s,i]=cs.useState(!1),[o,l]=cs.useState(!1),[c,d]=cs.useState(!1),[u,f]=cs.useState(!1),[m,p]=cs.useState(!1),[h,g]=cs.useState(!1),[x,y]=cs.useState(!1),[v,b]=cs.useState(!1),[w,j]=cs.useState(!1),[N,C]=cs.useState(!1),[S,k]=cs.useState(!1),[M,_]=cs.useState(!1),[I,A]=cs.useState(null),[E,L]=cs.useState(!1),{toast:T}=Fy(),{plans:D,isLoading:P}=function(){const{data:e,isLoading:t,error:n}=Sy({queryKey:["/api/plans"],queryFn:async()=>{const e=await _y("GET","/api/plans");if(!e.ok)throw new Error("Failed to fetch plans");return e.json()}});return{plans:e||[],isLoading:t,error:n}}(),{paymentMethods:O}=function(){const{data:e,isLoading:t,error:n}=Sy({queryKey:["/api/payment/methods"],queryFn:async()=>{const e=await _y("GET","/api/payment/methods");if(!e.ok)throw new Error("Failed to fetch payment methods");return e.json()}});return{paymentMethods:e||[],isLoading:t,error:n}}(),R=TEe({defaultValues:{clientId:"",clientSecret:"",redirectUri:window.location.origin+"/api/google/callback"}}),{data:z}=Sy({queryKey:["/api/user"],refetchOnWindowFocus:!1}),{data:F=[],refetch:B}=Sy({queryKey:["/api/channel-connections"],refetchOnWindowFocus:!1}),{data:U,refetch:W}=Sy({queryKey:["/api/google/calendar/status"],refetchOnWindowFocus:!1}),{data:G,refetch:V}=Sy({queryKey:["/api/google/credentials"],refetchOnWindowFocus:!1,enabled:"admin"===(null==z?void 0:z.role)||(null==z?void 0:z.isSuperAdmin)});cs.useEffect((()=>{G&&R.reset({clientId:G.clientId||"",clientSecret:"",redirectUri:G.redirectUri||window.location.origin+"/api/google/callback"})}),[G,R]);const{data:H}=Sy({queryKey:["/api/google/auth"],refetchOnWindowFocus:!1,enabled:!0===(null==G?void 0:G.configured)}),q=ky({mutationFn:async()=>{const e=await _y("POST","/api/google/calendar/disconnect");return await e.json()},onSuccess:()=>{T({title:"Google Calendar Disconnected",description:"Your Google Calendar account has been disconnected successfully."}),W()},onError:e=>{T({title:"Error",description:`Failed to disconnect Google Calendar: ${e.message}`,variant:"destructive"})}}),$=ky({mutationFn:async e=>{const t=await _y("POST","/api/google/credentials",e);return await t.json()},onSuccess:()=>{T({title:"Google Calendar Credentials Updated",description:"Your Google OAuth credentials have been updated successfully."}),l(!1),V(),q.mutate()},onError:e=>{T({title:"Error",description:`Failed to update Google Calendar credentials: ${e.message}`,variant:"destructive"})}}),[Y,Q]=cs.useState([]);cs.useEffect((()=>{Q(F)}),[F]);const K=()=>{B(),Ay.invalidateQueries({queryKey:["/api/channel-connections"]})},J=e=>{A(e),L(!0)},[Z,X]=cs.useState(!1),[ee,te]=cs.useState(null),[ne,ae]=cs.useState(null),[re,se]=cs.useState(""),[ie,oe]=cs.useState(0),[le,ce]=cs.useState(!0),[de,ue]=cs.useState(30),[fe,me]=cs.useState(!1),[pe,he]=cs.useState(!1),[ge,xe]=cs.useState(null),[ye,ve]=cs.useState(""),[be,we]=cs.useState(!1),[je,Ne]=cs.useState(null);cs.useEffect((()=>{const e="https:"===window.location.protocol?"wss:":"ws:",t=new WebSocket(`${e}//${window.location.host}/ws`);let n=0;const a={current:t},r=()=>{n<5?(n++,a.current.readyState===WebSocket.OPEN&&a.current.close(),setTimeout((()=>{const t=new WebSocket(`${e}//${window.location.host}/ws`);t.onopen=()=>{n=0,(null==z?void 0:z.id)&&t.send(JSON.stringify({type:"authenticate",userId:z.id}))},t.onmessage=e=>{try{const t=JSON.parse(e.data);"whatsappQrCode"===t.type&&t.connectionId===ee?(ae(t.qrCode),se("qr_code")):"whatsappConnectionStatus"===t.type&&t.connectionId===ee?(se(t.status),"connected"===t.status&&(T({title:"WhatsApp Connected",description:"Your WhatsApp account has been connected successfully!"}),B(),Ay.invalidateQueries({queryKey:["/api/channel-connections"]}),setTimeout((()=>{X(!1),ae(null)}),2e3))):"whatsappConnectionError"===t.type&&t.connectionId===ee&&(se("error"),T({title:"Connection Error",description:t.error,variant:"destructive"}))}catch(t){}},t.onerror=e=>{},t.onclose=()=>{setTimeout(r,2e3)},a.current=t}),2e3)):setTimeout((()=>{n=0}),6e4)};return t.onopen=()=>{n=0,(null==z?void 0:z.id)&&t.send(JSON.stringify({type:"authenticate",userId:z.id}))},t.onmessage=e=>{try{const t=JSON.parse(e.data);if("whatsappQrCode"===t.type&&t.connectionId===ee){if(!fe){ae(t.qrCode),se("qr_code"),oe(Date.now()),ce(!0),ue(30);const e=setInterval((()=>{ue((t=>t<=1?(clearInterval(e),ce(!1),0):t-1))}),1e3);return()=>clearInterval(e)}}else"whatsappConnectionStatus"===t.type&&t.connectionId===ee?(se(t.status),"connected"===t.status&&(T({title:"WhatsApp Connected",description:"Your WhatsApp account has been connected successfully!"}),B(),Ay.invalidateQueries({queryKey:["/api/channel-connections"]}),setTimeout((()=>{X(!1),ae(null)}),2e3))):"whatsappConnectionError"===t.type&&t.connectionId===ee&&(se("error"),T({title:"Connection Error",description:t.error,variant:"destructive"}))}catch(t){}},t.onerror=e=>{},t.onclose=()=>{r()},()=>{a.current&&a.current.readyState===WebSocket.OPEN&&a.current.close()}}),[null==z?void 0:z.id,ee,B]);const Ce=async e=>{try{if("WhatsApp Unofficial"===e){const e=await fetch("/api/channel-connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channelType:"whatsapp_unofficial",accountId:`whatsapp-${Date.now()}`,accountName:"WhatsApp Personal",connectionData:{}})});if(!e.ok)throw new Error("Failed to create WhatsApp connection");const t=await e.json();te(t.id),se("connecting"),X(!0),T({title:"WhatsApp Connection Initiated",description:"Preparing QR code for WhatsApp authentication..."})}else"WhatsApp Business API"===e?d(!0):"WhatsApp Business Embedded"===e?p(!0):"WhatsApp Business API (Twilio)"===e?g(!0):"WhatsApp Business API (360Dialog)"===e?y(!0):"Instagram"===e?b(!0):"Messenger"===e?j(!0):"Email"===e?C(!0):T({title:"Channel Connection Initiated",description:`Starting connection flow for ${e}`})}catch(t){T({title:"Connection Error",description:t.message||"Failed to connect to channel",variant:"destructive"})}};return vs.jsxs("div",{className:"h-screen flex flex-col overflow-hidden font-sans text-gray-800",children:[vs.jsx(yB,{open:pe,onOpenChange:he,children:vs.jsxs(NB,{className:"w-[95vw] max-w-md mx-auto",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{className:"text-lg sm:text-xl",children:"Rename Channel"}),vs.jsx(MB,{className:"text-sm",children:"Enter a new name for this channel connection to help identify it better in your sidebar and conversations."})]}),vs.jsxs("div",{className:"py-4",children:[vs.jsx(EB,{htmlFor:"channelName",className:"mb-2 block text-sm",children:"Channel Name"}),vs.jsx(LB,{id:"channelName",value:ye,onChange:e=>ve(e.target.value),placeholder:"Enter new channel name",className:"w-full"})]}),vs.jsxs(SB,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0 sm:justify-between",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:()=>{he(!1),xe(null),ve("")},className:"w-full sm:w-auto",children:"Cancel"}),vs.jsx(lk,{type:"button",variant:"brand",className:"btn-brand-primary w-full sm:w-auto",onClick:async()=>{if(ge&&ye.trim())try{if(!(await fetch(`/api/channel-connections/${ge}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountName:ye.trim()})})).ok)throw new Error("Failed to rename channel connection");B(),Ay.invalidateQueries({queryKey:["/api/channel-connections"]}),he(!1),xe(null),ve(""),T({title:"Channel Renamed",description:"The channel has been renamed successfully"})}catch(e){T({title:"Error",description:e.message||"Failed to rename channel",variant:"destructive"})}else T({title:"Validation Error",description:"Channel name cannot be empty",variant:"destructive"})},disabled:!ye.trim(),children:"Save"})]})]})}),vs.jsx(yB,{open:o,onOpenChange:l,children:vs.jsxs(NB,{className:"w-[95vw] max-w-lg mx-auto max-h-[90vh] overflow-y-auto",children:[vs.jsxs(CB,{children:[vs.jsxs(kB,{className:"text-lg sm:text-xl",children:[(null==G?void 0:G.configured)?"Update":"Configure"," Google Calendar API Credentials"]}),vs.jsx(MB,{className:"text-sm",children:"Enter your company's Google Cloud OAuth credentials to enable Google Calendar integration. These credentials will be used for all users in your company."})]}),vs.jsx("div",{className:"py-4",children:vs.jsx(DEe,{...R,children:vs.jsxs("form",{onSubmit:R.handleSubmit((e=>{_(!0),$.mutate(e,{onSettled:()=>{_(!1)}})})),className:"space-y-4",children:[vs.jsx(OEe,{control:R.control,name:"clientId",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Client ID"}),vs.jsx(UEe,{children:vs.jsx(LB,{...e,placeholder:"Your Google OAuth Client ID",required:!0})}),vs.jsx(GEe,{}),vs.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Client ID from Google Cloud Console OAuth credentials"})]})}),vs.jsx(OEe,{control:R.control,name:"clientSecret",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Client Secret"}),vs.jsx(UEe,{children:vs.jsx(LB,{...e,type:"password",placeholder:"Your Google OAuth Client Secret",required:!0})}),vs.jsx(GEe,{}),vs.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Client Secret from Google Cloud Console OAuth credentials"})]})}),vs.jsx(OEe,{control:R.control,name:"redirectUri",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Redirect URI"}),vs.jsx(UEe,{children:vs.jsx(LB,{...e,placeholder:"https://your-app-url.com/api/google/callback",required:!0})}),vs.jsx(GEe,{}),vs.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This should match the authorized redirect URI in your Google Cloud Console"})]})}),vs.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[vs.jsxs(pR,{className:"mb-4 bg-amber-50 border-amber-200",children:[vs.jsx(nj,{className:"h-4 w-4"}),vs.jsx(hR,{children:"Important"}),vs.jsx(gR,{className:"text-xs",children:"After updating these credentials, you will need to reconnect your Google account. All previous Google Calendar connections will be invalidated."})]}),vs.jsxs(SB,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0 sm:justify-between mt-4",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:()=>{l(!1),R.reset()},className:"w-full sm:w-auto",children:"Cancel"}),vs.jsxs(lk,{variant:"brand",type:"submit",disabled:M,className:"w-full sm:w-auto",children:[M&&vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),M?"Saving...":(null==G?void 0:G.configured)?"Update Credentials":"Save Credentials"]})]})]})]})})})]})}),vs.jsx(uR,{}),vs.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[vs.jsx(yR,{}),vs.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-6",children:[vs.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4",children:vs.jsxs("div",{children:[vs.jsx("h1",{className:"text-2xl",children:"Settings"}),vs.jsx("p",{className:"text-muted-foreground text-sm sm:text-base mt-1",children:"Manage your account, channels, integrations, and team settings"})]})}),vs.jsx(yB,{open:Z,onOpenChange:X,children:vs.jsxs(NB,{className:"w-[95vw] max-w-[330px] sm:max-w-md md:max-w-md rounded-lg",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Connect to WhatsApp"}),vs.jsx(MB,{children:"Scan this QR code with your WhatsApp app to connect your account"})]}),vs.jsxs("div",{className:"flex justify-center items-center py-4",children:["connecting"===re&&vs.jsxs("div",{className:"text-center py-8",children:[vs.jsx(uw,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),vs.jsx("p",{children:"Preparing WhatsApp connection..."})]}),"qr_code"===re&&ne&&vs.jsxs("div",{className:"text-center py-4",children:[vs.jsxs("div",{className:`border-8 ${fe?"border-green-400 relative animate-pulse":"border-white"} inline-block rounded-lg shadow-md`,children:[fe&&vs.jsx("div",{className:"absolute -top-3 -right-3 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"Scanning..."}),vs.jsxs("div",{className:"w-full max-w-[256px] mx-auto",onMouseEnter:()=>me(!0),onMouseLeave:()=>me(!1),onTouchStart:()=>me(!0),onTouchEnd:()=>setTimeout((()=>me(!1)),5e3),children:[vs.jsx("div",{className:"block sm:hidden",children:vs.jsx(kIe,{value:ne,size:180})}),vs.jsx("div",{className:"hidden sm:block md:hidden",children:vs.jsx(kIe,{value:ne,size:220})}),vs.jsx("div",{className:"hidden md:block",children:vs.jsx(kIe,{value:ne,size:256})})]})]}),vs.jsxs("p",{className:"mt-4 text-sm text-gray-500 px-2",children:["1. Open WhatsApp on your phone",vs.jsx("br",{}),"2. Tap Menu or Settings and select WhatsApp Web",vs.jsx("br",{}),"3. Point your phone to this screen to scan the code",vs.jsx("br",{}),vs.jsxs("span",{className:"text-xs mt-2 block text-blue-500",children:["Once you start scanning, the QR code will not refresh automatically.",fe&&vs.jsx("span",{className:"text-green-500 ",children:" QR code is locked while scanning!"})]})]})]}),"connected"===re&&vs.jsxs("div",{className:"text-center py-8 text-green-600",children:[vs.jsx("svg",{className:"h-16 w-16 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:vs.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),vs.jsx("p",{className:"text-lg font-medium",children:"Connected Successfully!"})]}),"error"===re&&vs.jsxs("div",{className:"text-center py-8 text-red-600",children:[vs.jsx("svg",{className:"h-16 w-16 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:vs.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),vs.jsx("p",{className:"text-lg font-medium",children:"Connection Failed"}),vs.jsx("p",{className:"mt-1 text-sm",children:"There was an error connecting to WhatsApp. Please try again."})]})]}),vs.jsxs(SB,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0 sm:justify-between",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:()=>{X(!1),ee&&"connected"!==re&&fetch(`/api/whatsapp/disconnect/${ee}`,{method:"POST"}).then((()=>{B(),Ay.invalidateQueries({queryKey:["/api/channel-connections"]})})).catch((e=>{}))},className:"w-full sm:w-auto",children:"Cancel"}),"qr_code"===re&&vs.jsxs(lk,{type:"button",variant:"brand",disabled:le||fe,onClick:()=>{le||fe||(se("connecting"),ae(null),ce(!0),setTimeout((()=>{Ce("WhatsApp Unofficial")}),500))},className:"w-full sm:w-auto text-sm",children:[vs.jsx(Lw,{className:"h-4 w-4 mr-2 "+(le?"animate-spin":"")}),vs.jsx("span",{className:"hidden sm:inline",children:fe?"Scanning in progress...":le?`Wait ${de}s...`:"Refresh QR Code"}),vs.jsx("span",{className:"sm:hidden",children:fe?"Scanning...":le?`Wait ${de}s`:"Refresh"})]}),"error"===re&&vs.jsx(lk,{type:"button",onClick:()=>Ce("WhatsApp Unofficial"),className:"w-full sm:w-auto",children:"Try Again"})]})]})}),vs.jsx(JEe,{isOpen:c,onClose:()=>d(!1),onSuccess:K}),vs.jsx(KEe,{isOpen:u,onClose:()=>f(!1),onSuccess:K}),vs.jsx(ZEe,{isOpen:m,onClose:()=>p(!1),onSuccess:K}),vs.jsx(eLe,{isOpen:h,onClose:()=>g(!1),onSuccess:K}),vs.jsx(tLe,{isOpen:x,onClose:()=>y(!1),onSuccess:K}),(null==z?void 0:z.isSuperAdmin)&&vs.jsx(dLe,{isOpen:S,onClose:()=>k(!1),onSuccess:()=>{T({title:"Success",description:"Partner configuration updated successfully"})},provider:"360dialog"}),vs.jsx(nLe,{isOpen:v,onClose:()=>b(!1),onSuccess:K}),vs.jsx(aLe,{isOpen:w,onClose:()=>j(!1),onSuccess:K}),vs.jsx(qLe,{isOpen:N,onClose:()=>C(!1),onSuccess:K}),je&&vs.jsx($Le,{isOpen:be,onClose:()=>{we(!1),Ne(null)},onSuccess:()=>{B(),Ay.invalidateQueries({queryKey:["/api/channel-connections"]}),T({title:"Email Channel Updated",description:"Your email channel has been updated successfully"})},connectionId:je}),vs.jsxs(J_e,{defaultValue:"channels",children:[vs.jsx("div",{className:"mb-6",children:vs.jsx(tIe,{children:vs.jsxs(Z_e,{className:"inline-flex h-10 items-center justify-start rounded-md bg-muted p-1 text-muted-foreground min-w-max gap-1 flex-nowrap",children:[vs.jsxs(X_e,{value:"channels",className:"text-xs sm:text-sm whitespace-nowrap px-2 sm:px-3 flex-shrink-0",children:[vs.jsx("span",{className:"hidden sm:inline",children:"Channel Connections"}),vs.jsx("span",{className:"sm:hidden",children:"Channels"})]}),vs.jsxs(X_e,{value:"whatsapp-behavior",className:"text-xs sm:text-sm whitespace-nowrap px-2 sm:px-3 flex-shrink-0",children:[vs.jsx("span",{className:"hidden sm:inline",children:"WhatsApp Behavior"}),vs.jsx("span",{className:"sm:hidden",children:"WhatsApp"})]}),vs.jsxs(X_e,{value:"integrations",className:"text-xs sm:text-sm whitespace-nowrap px-2 sm:px-3 flex-shrink-0",children:[vs.jsx("span",{className:"hidden sm:inline",children:"Integrations"}),vs.jsx("span",{className:"sm:hidden",children:"Integrations"})]}),vs.jsxs(X_e,{value:"smtp",className:"text-xs sm:text-sm whitespace-nowrap px-2 sm:px-3 flex-shrink-0",children:[vs.jsx("span",{className:"hidden sm:inline",children:"Email"}),vs.jsx("span",{className:"sm:hidden",children:"Email"})]}),vs.jsxs(X_e,{value:"billing",className:"text-xs sm:text-sm whitespace-nowrap px-2 sm:px-3 flex-shrink-0",children:[vs.jsx("span",{className:"hidden sm:inline",children:"Billing"}),vs.jsx("span",{className:"sm:hidden",children:"Billing"})]}),vs.jsxs(X_e,{value:"team",className:"text-xs sm:text-sm whitespace-nowrap px-2 sm:px-3 flex-shrink-0",children:[vs.jsx("span",{className:"hidden sm:inline",children:"Team Members"}),vs.jsx("span",{className:"sm:hidden",children:"Team"})]}),vs.jsxs(X_e,{value:"api",className:"text-xs sm:text-sm whitespace-nowrap px-2 sm:px-3 flex-shrink-0",children:[vs.jsx("span",{className:"hidden sm:inline",children:"API Access"}),vs.jsx("span",{className:"sm:hidden",children:"API"})]}),(null==z?void 0:z.isSuperAdmin)&&vs.jsxs(X_e,{value:"platform",className:"text-xs sm:text-sm whitespace-nowrap px-2 sm:px-3 flex-shrink-0",children:[vs.jsx("span",{className:"hidden sm:inline",children:"Platform"}),vs.jsx("span",{className:"sm:hidden",children:"Platform"})]})]})})}),vs.jsx(eIe,{value:"channels",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Channel Connections"}),vs.jsx(rk,{children:"Connect and manage your communication channels"})]}),vs.jsx(sk,{children:vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-base sm:text-lg font-medium mb-4",children:"Connected Channels"}),vs.jsx("div",{className:"space-y-4",children:Y.map((e=>{const t=(e=>{switch(e){case"whatsapp_official":return{icon:"ri-whatsapp-line",color:"#25D366",name:"WhatsApp Business API"};case"whatsapp_unofficial":return{icon:"ri-whatsapp-line",color:"#F59E0B",name:"WhatsApp (Unofficial)"};case"messenger":return{icon:"ri-messenger-line",color:"#1877F2",name:"Facebook Messenger"};case"instagram":return{icon:"ri-instagram-line",color:"#E4405F",name:"Instagram"};default:return{icon:"ri-chat-1-line",color:"#333235",name:"Chat"}}})(e.channelType);return vs.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4",children:[vs.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("i",{className:t.icon+" text-xl sm:text-2xl mr-3",style:{color:t.color}}),vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-medium text-sm sm:text-base",children:e.accountName}),vs.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:t.name}),vs.jsx("p",{className:"text-xs text-gray-500",children:e.accountId})]})]}),vs.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:vs.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[("whatsapp_unofficial"===e.channelType||"whatsapp_official"===e.channelType||"whatsapp_twilio"===e.channelType||"whatsapp_360dialog"===e.channelType)&&vs.jsx(MY,{connectionId:e.id,status:e.status,onReconnectClick:()=>{(async e=>{try{te(e),se("connecting"),ae(null),X(!0),Q((t=>t.map((t=>t.id===e?{...t,status:"reconnecting"}:t))));const t=await fetch(`/api/whatsapp/reconnect/${e}`,{method:"POST"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reconnect WhatsApp")}T({title:"Reconnection Initiated",description:"Generating new QR code for WhatsApp connection..."}),setTimeout((()=>{B(),Ay.invalidateQueries({queryKey:["/api/channel-connections"]})}),3e3)}catch(t){X(!1),te(null),T({title:"Reconnection Failed",description:t instanceof Error?t.message:"An error occurred while reconnecting",variant:"destructive"}),B(),Ay.invalidateQueries({queryKey:["/api/channel-connections"]})}})(e.id)}}),"email"===e.channelType&&vs.jsxs(lk,{variant:"brand",size:"sm",className:"btn-brand-primary text-green-500 hover:text-green-700 text-xs sm:text-sm",onClick:()=>{return t=e.id,Ne(t),void we(!0);var t},children:[vs.jsx("span",{className:"hidden sm:inline",children:"Edit"}),vs.jsx("span",{className:"sm:hidden",children:"Edit"})]}),vs.jsxs(lk,{variant:"brand",size:"sm",className:"btn-brand-primary text-blue-500 hover:text-blue-700 text-xs sm:text-sm",onClick:()=>{return t=e.id,n=e.accountName,xe(t),ve(n),void he(!0);var t,n},children:[vs.jsx("span",{className:"hidden sm:inline",children:"Rename"}),vs.jsx("span",{className:"sm:hidden",children:"Rename"})]}),"whatsapp_unofficial"!==e.channelType&&"whatsapp_official"!==e.channelType&&"whatsapp_twilio"!==e.channelType&&"whatsapp_360dialog"!==e.channelType&&vs.jsxs(lk,{variant:"brand",size:"sm",className:"btn-brand-primary text-orange-500 hover:text-orange-700 text-xs sm:text-sm",onClick:()=>(async e=>{try{if(!(await fetch(`/api/whatsapp/disconnect/${e}`,{method:"POST"})).ok)throw new Error("Failed to disconnect channel");B(),Ay.invalidateQueries({queryKey:["/api/channel-connections"]}),T({title:"Channel Disconnected",description:"The channel has been disconnected successfully"})}catch(t){T({title:"Error",description:t.message||"Failed to disconnect channel",variant:"destructive"})}})(e.id),children:[vs.jsx("span",{className:"hidden sm:inline",children:"Disconnect"}),vs.jsx("span",{className:"sm:hidden",children:"Disconnect"})]}),vs.jsxs(lk,{variant:"brand",size:"sm",className:"btn-brand-primary text-red-500 hover:text-red-700 text-xs sm:text-sm",onClick:()=>(async e=>{try{if(!window.confirm("Are you sure you want to delete this connection? This action cannot be undone."))return;if(!(await fetch(`/api/channel-connections/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete channel connection");B(),Ay.invalidateQueries({queryKey:["/api/channel-connections"]}),T({title:"Channel Deleted",description:"The channel connection has been permanently deleted"})}catch(t){T({title:"Error",description:t.message||"Failed to delete channel connection",variant:"destructive"})}})(e.id),children:[vs.jsx("span",{className:"hidden sm:inline",children:"Delete"}),vs.jsx("span",{className:"sm:hidden",children:"Delete"})]})]})})]}),"whatsapp_unofficial"===e.channelType&&vs.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:vs.jsxs("div",{className:"flex items-start",children:[vs.jsx("i",{className:"ri-error-warning-line text-yellow-500 mr-2 mt-0.5"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-yellow-700 font-medium",children:"Unofficial Connection"}),vs.jsx("p",{className:"text-xs text-yellow-600",children:"This connection is not using the official WhatsApp Business API. It may have limitations and could be subject to blocking by WhatsApp."})]})]})}),"whatsapp_official"===e.channelType&&vs.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-md",children:vs.jsxs("div",{className:"flex items-start",children:[vs.jsx("i",{className:"ri-check-line text-green-500 mr-2 mt-0.5"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Official WhatsApp Business API (Meta)"}),vs.jsx("p",{className:"text-xs text-green-600",children:"This connection uses the official WhatsApp Business API from Meta. It provides reliable messaging with advanced features and compliance."})]})]})}),"whatsapp_twilio"===e.channelType&&vs.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:vs.jsxs("div",{className:"flex items-start",children:[vs.jsx("i",{className:"ri-check-line text-blue-500 mr-2 mt-0.5"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Official WhatsApp Business API (Twilio)"}),vs.jsx("p",{className:"text-xs text-blue-600",children:"This connection uses Twilio's WhatsApp Business API integration. It provides reliable messaging through Twilio's Conversations platform."})]})]})}),"whatsapp_360dialog"===e.channelType&&vs.jsx("div",{className:"mt-3 p-3 bg-purple-50 border border-purple-200 rounded-md",children:vs.jsxs("div",{className:"flex items-start",children:[vs.jsx("i",{className:"ri-check-line text-purple-500 mr-2 mt-0.5"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-purple-700 font-medium",children:"Official WhatsApp Business API (360Dialog Partner)"}),vs.jsx("p",{className:"text-xs text-purple-600",children:"This connection uses 360Dialog's Partner API with Integrated Onboarding. It provides enterprise-grade WhatsApp Business API access with streamlined setup."})]})]})})]},e.id)}))})]}),vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-base sm:text-lg font-medium mb-4",children:"Add New Channel"}),vs.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[vs.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 flex flex-col items-center hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Ce("WhatsApp Business API"),children:[vs.jsx("i",{className:"ri-whatsapp-line text-2xl sm:text-3xl mb-2",style:{color:"#25D366"}}),vs.jsx("h4",{className:"font-medium text-sm sm:text-base text-center",children:"WhatsApp Business API (Meta)"}),vs.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Official Meta WhatsApp Business API"}),vs.jsx(lk,{className:"mt-3 w-full text-xs py-1",variant:"outline",onClick:e=>{e.stopPropagation(),Ce("WhatsApp Business Embedded")},children:"Easy Setup"})]}),vs.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 flex flex-col items-center hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Ce("WhatsApp Business API (Twilio)"),children:[vs.jsx("i",{className:"ri-whatsapp-line text-2xl sm:text-3xl mb-2",style:{color:"#25D366"}}),vs.jsx("h4",{className:"font-medium text-sm sm:text-base text-center",children:"WhatsApp Business API (Twilio)"}),vs.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Twilio Conversations WhatsApp API"})]}),vs.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 flex flex-col items-center hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Ce("WhatsApp Business API (360Dialog)"),children:[vs.jsx("i",{className:"ri-whatsapp-line text-2xl sm:text-3xl mb-2",style:{color:"#25D366"}}),vs.jsx("h4",{className:"font-medium text-sm sm:text-base text-center",children:"WhatsApp Business API (360Dialog)"}),vs.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Integrated Onboarding via 360Dialog"})]}),vs.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 flex flex-col items-center hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Ce("WhatsApp Unofficial"),children:[vs.jsx("i",{className:"ri-whatsapp-line text-2xl sm:text-3xl mb-2",style:{color:"#F59E0B"}}),vs.jsx("h4",{className:"font-medium text-sm sm:text-base text-center",children:"WhatsApp Unofficial"}),vs.jsxs("p",{className:"text-xs text-gray-500 text-center mt-1",children:[vs.jsx("i",{className:"ri-error-warning-line mr-1"}),"Non-official connection"]})]}),vs.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 flex flex-col items-center hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Ce("Messenger"),children:[vs.jsx("i",{className:"ri-messenger-line text-2xl sm:text-3xl mb-2",style:{color:"#1877F2"}}),vs.jsx("h4",{className:"font-medium text-sm sm:text-base text-center",children:"Facebook Messenger"}),vs.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Via Facebook Pages"})]}),vs.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 flex flex-col items-center hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Ce("Instagram"),children:[vs.jsx("i",{className:"ri-instagram-line text-2xl sm:text-3xl mb-2",style:{color:"#E4405F"}}),vs.jsx("h4",{className:"font-medium text-sm sm:text-base text-center",children:"Instagram"}),vs.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Business Account Integration"})]}),vs.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 flex flex-col items-center hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Ce("Email"),children:[vs.jsx("i",{className:"ri-mail-line text-2xl sm:text-3xl mb-2",style:{color:"#3B82F6"}}),vs.jsx("h4",{className:"font-medium text-sm sm:text-base text-center",children:"Email"}),vs.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"IMAP/SMTP Email Integration"})]})]})]})]})})]})}),vs.jsx(eIe,{value:"whatsapp-behavior",children:vs.jsx(HLe,{})}),vs.jsx(eIe,{value:"integrations",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Integrations"}),vs.jsx(rk,{children:"Connect and manage third-party integrations"})]}),vs.jsx(sk,{children:vs.jsxs("div",{className:"space-y-8",children:[vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-4",children:[vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(Nb,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-500 mr-2"}),vs.jsx("h3",{className:"text-base sm:text-lg font-medium",children:"Google Calendar"})]}),(null==U?void 0:U.connected)?vs.jsxs(lk,{variant:"brand",className:"text-red-500 hover:text-red-700 flex items-center gap-1 w-full sm:w-auto text-sm",onClick:()=>q.mutate(),disabled:q.isPending,children:[q.isPending?vs.jsx(uw,{className:"h-4 w-4 mr-1 animate-spin"}):vs.jsx(zb,{className:"h-4 w-4 mr-1"}),"Disconnect"]}):vs.jsxs(lk,{className:"bg-blue-500 hover:bg-blue-600 text-white flex items-center gap-1 w-full sm:w-auto text-sm",onClick:()=>{(null==G?void 0:G.configured)?(null==H?void 0:H.authUrl)?window.open(H.authUrl,"_blank"):T({title:"Error",description:"Failed to generate authentication URL. Please check your credentials.",variant:"destructive"}):T({title:"Configuration Required",description:"Please configure Google OAuth credentials first.",variant:"destructive"})},disabled:!(null==G?void 0:G.configured),children:[vs.jsx($b,{className:"h-4 w-4 mr-1"}),"Connect"]})]}),(null==U?void 0:U.connected)?vs.jsxs(pR,{className:"bg-green-50 border border-green-200",children:[vs.jsx(Pb,{className:"h-5 w-5 text-green-500"}),vs.jsx(hR,{className:"text-green-700",children:"Connected"}),vs.jsx(gR,{className:"text-green-600",children:"Your Google Calendar account is connected and working properly. You can use Google Calendar nodes in the Flow Builder to create events and check availability."})]}):vs.jsxs(pR,{className:""+((null==G?void 0:G.configured)?"bg-gray-50 border border-gray-200":"bg-amber-50 border border-amber-200"),children:[vs.jsx(Nb,{className:"h-5 w-5 "+((null==G?void 0:G.configured)?"text-gray-500":"text-amber-500")}),vs.jsx(hR,{className:(null==G?void 0:G.configured)?"":"text-amber-700",children:(null==G?void 0:G.configured)?"Not Connected":"Configuration Required"}),vs.jsx(gR,{className:(null==G?void 0:G.configured)?"":"text-amber-600",children:(null==G?void 0:G.configured)?"Connect your Google Calendar account to create events and check availability directly from your flows. This integration allows you to schedule meetings with your contacts automatically.":"Google OAuth credentials need to be configured before you can connect your Google Calendar account. Please configure the credentials below first."})]}),("admin"===(null==z?void 0:z.role)||(null==z?void 0:z.isSuperAdmin))&&vs.jsx("div",{className:"mt-4",children:vs.jsx(iAe,{type:"single",collapsible:!0,className:"w-full",children:vs.jsxs(oAe,{value:"credentials",children:[vs.jsx(lAe,{className:"text-sm font-medium",children:"Google OAuth Credentials (Company Settings)"}),vs.jsx(cAe,{children:vs.jsxs("div",{className:"space-y-4 pt-2",children:[vs.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-700",children:vs.jsxs("div",{className:"flex items-start",children:[vs.jsx(lw,{className:"h-4 w-4 mr-2 mt-0.5"}),vs.jsx("p",{children:"Configure your company's Google OAuth credentials for Google Calendar integration. These credentials are stored securely and are specific to your company."})]})}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[vs.jsx(EB,{htmlFor:"clientId",className:"text-sm",children:"Client ID"}),vs.jsx("div",{className:"flex items-center",children:vs.jsx(dk,{variant:(null==G?void 0:G.clientId)?"default":"outline",className:"text-xs",children:(null==G?void 0:G.clientId)?"Configured":"Not Set"})})]}),vs.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[vs.jsx(EB,{htmlFor:"clientSecret",className:"text-sm",children:"Client Secret"}),vs.jsx("div",{className:"flex items-center",children:vs.jsx(dk,{variant:(null==G?void 0:G.clientSecret)?"default":"outline",className:"text-xs",children:(null==G?void 0:G.clientSecret)?"Configured":"Not Set"})})]}),vs.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[vs.jsx(EB,{htmlFor:"redirectUri",className:"text-sm",children:"Redirect URI"}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(dk,{variant:"outline",className:"text-xs",children:"Auto-Generated"}),vs.jsxs(lk,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>{const e=(null==G?void 0:G.redirectUri)||window.location.origin+"/api/google/callback";navigator.clipboard.writeText(e),T({title:"Copied to Clipboard",description:`Redirect URI: ${e}`})},children:[vs.jsx(Ub,{className:"h-3 w-3 mr-1"}),"Copy"]})]})]})]}),vs.jsxs("div",{className:"pt-2",children:[vs.jsx("p",{className:"text-xs text-gray-500 mb-2",children:(null==G?void 0:G.configured)?"Update your Google OAuth credentials. This will disconnect any existing connections.":"Configure your Google OAuth credentials to enable Google Calendar integration for your company."}),vs.jsxs(lk,{variant:"brand",size:"sm",className:"w-full",onClick:()=>l(!0),children:[vs.jsx(zw,{className:"h-4 w-4 mr-1"}),(null==G?void 0:G.configured)?"Update Credentials":"Configure Credentials"]})]})]})})]})})}),vs.jsxs("div",{className:"mt-4 bg-blue-50 border border-blue-100 rounded-md p-4",children:[vs.jsx("h4",{className:"font-medium text-blue-700 mb-2",children:"Features"}),vs.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-600 space-y-1",children:[vs.jsx("li",{children:"Create calendar events with contacts directly from flows"}),vs.jsx("li",{children:"Check availability before scheduling meetings"}),vs.jsx("li",{children:"Automatically send event details to contacts"}),vs.jsx("li",{children:"Track appointments in your Google Calendar"})]})]})]}),vs.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[vs.jsx("h3",{className:"text-base sm:text-lg font-medium mb-4",children:"Coming Soon"}),vs.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[vs.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 flex flex-col items-center bg-gray-50",children:[vs.jsx("i",{className:"ri-calendar-line text-2xl sm:text-3xl mb-2 text-gray-400"}),vs.jsx("h4",{className:"font-medium text-gray-600 text-sm sm:text-base",children:"Calendly"}),vs.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Coming soon"})]}),vs.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 flex flex-col items-center bg-gray-50",children:[vs.jsx("i",{className:"ri-calendar-line text-2xl sm:text-3xl mb-2 text-gray-400"}),vs.jsx("h4",{className:"font-medium text-gray-600 text-sm sm:text-base",children:"Outlook Calendar"}),vs.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Coming soon"})]}),vs.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 flex flex-col items-center bg-gray-50",children:[vs.jsx("i",{className:"ri-flow-chart text-2xl sm:text-3xl mb-2 text-gray-400"}),vs.jsx("h4",{className:"font-medium text-gray-600 text-sm sm:text-base",children:"Zapier"}),vs.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Coming soon"})]})]})]})]})})]})}),vs.jsxs(eIe,{value:"billing",children:[vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Billing & Subscription"}),vs.jsx(rk,{children:"Manage your subscription plan and payment methods"})]}),vs.jsx(sk,{children:vs.jsxs("div",{className:"space-y-8",children:[vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-base sm:text-lg font-medium mb-4",children:"Current Subscription"}),"active"===(null==(e=null==z?void 0:z.company)?void 0:e.subscriptionStatus)?vs.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-3 sm:p-4",children:vs.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-base sm:text-lg font-medium text-primary-700",children:(null==(t=null==z?void 0:z.company)?void 0:t.plan)||"Free Plan"}),vs.jsx("p",{className:"text-sm text-primary-600",children:(null==(n=null==z?void 0:z.company)?void 0:n.subscriptionEndDate)?`Renews on ${new Date(z.company.subscriptionEndDate).toLocaleDateString()}`:"No renewal date"})]}),vs.jsx("div",{className:"flex space-x-2",children:vs.jsx(lk,{variant:"brand",size:"sm",className:"btn-brand-primary w-full sm:w-auto",onClick:()=>{const e=document.getElementById("available-plans");e&&e.scrollIntoView({behavior:"smooth"})},children:"Change Plan"})})]})}):vs.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 sm:p-4",children:vs.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-base sm:text-lg font-medium text-amber-700",children:"No Active Subscription"}),vs.jsx("p",{className:"text-sm text-amber-600",children:"Select a plan below to subscribe"})]})})})]}),vs.jsxs("div",{id:"available-plans",children:[vs.jsx("h3",{className:"text-base sm:text-lg font-medium mb-4",children:"Available Plans"}),P?vs.jsx("div",{className:"flex justify-center py-8",children:vs.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-b-2 border-primary"})}):D&&D.length>0?vs.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:D.map((e=>{var t;return vs.jsx(nIe,{plan:e,isCurrentPlan:(null==(t=null==z?void 0:z.company)?void 0:t.planId)===e.id,onSelectPlan:J},e.id)}))}):vs.jsx("div",{className:"text-center py-8 text-gray-500 text-sm sm:text-base",children:"No plans available at the moment"})]}),vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-base sm:text-lg font-medium mb-4",children:"Payment History"}),(()=>{const{data:e,isLoading:t}=Sy({queryKey:["/api/payment/transactions"],queryFn:async()=>{const e=await _y("GET","/api/payment/transactions");if(!e.ok)throw new Error("Failed to fetch payment history");return e.json()}});return t?vs.jsx("div",{className:"flex justify-center py-4",children:vs.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):e&&0!==e.length?vs.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:vs.jsx("div",{className:"overflow-x-auto",children:vs.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[vs.jsx("thead",{className:"bg-gray-50",children:vs.jsxs("tr",{children:[vs.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),vs.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),vs.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),vs.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),vs.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e=>vs.jsxs("tr",{children:[vs.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),vs.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm font-medium text-gray-900",children:e.planName||"Subscription Payment"}),vs.jsxs("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500 font-medium",children:["$",e.amount.toFixed(2)]}),vs.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:vs.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+("completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]},e.id)))})]})})}):vs.jsx("div",{className:"text-center py-4 text-gray-500 text-sm sm:text-base",children:"No payment history available"})})()]})]})})]}),vs.jsx(rIe,{isOpen:E,onClose:()=>L(!1),plan:I,paymentMethods:O||[],onSuccess:()=>{L(!1),T({title:"Subscription Updated",description:"Your subscription has been updated successfully"}),Ay.invalidateQueries({queryKey:["/api/user"]})}})]}),vs.jsx(eIe,{value:"team",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Team Members"}),vs.jsx(rk,{children:"Manage team members and their permissions"})]}),vs.jsx(sk,{children:vs.jsxs("div",{className:"space-y-8",children:[vs.jsx(iLe,{}),vs.jsx("div",{className:"border-t pt-6",children:vs.jsx(lLe,{})})]})})]})}),vs.jsx(eIe,{value:"api",children:vs.jsx(XEe,{})}),vs.jsx(eIe,{value:"smtp",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Email Configuration"}),vs.jsx(rk,{children:"Configure your email server settings for sending notifications and team invitations"})]}),vs.jsx(sk,{children:vs.jsx(cLe,{})})]})}),(null==z?void 0:z.isSuperAdmin)&&vs.jsx(eIe,{value:"platform",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Platform Configuration"}),vs.jsx(rk,{children:"Configure platform-wide integrations and partner API settings"})]}),vs.jsx(sk,{children:vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{className:"border rounded-lg p-4",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-4",children:[vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-lg font-medium",children:"360Dialog Partner API"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"Configure 360Dialog Partner credentials for company onboarding"})]}),vs.jsxs(lk,{onClick:()=>k(!0),variant:"outline",className:"btn-brand-primary",children:[vs.jsx(zw,{className:"w-4 h-4 mr-2"}),"Configure"]})]}),vs.jsxs("div",{className:"text-sm text-gray-600",children:[vs.jsx("p",{children:"• Platform-wide Partner API integration"}),vs.jsx("p",{children:"• Enables Integrated Onboarding for companies"}),vs.jsx("p",{children:"• Manages client WhatsApp Business accounts"})]})]}),vs.jsx("div",{className:"border rounded-lg p-4 opacity-50",children:vs.jsxs("div",{className:"flex items-center justify-between mb-4",children:[vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-lg font-medium",children:"Additional Integrations"}),vs.jsx("p",{className:"text-sm text-gray-500",children:"More platform-wide integrations coming soon"})]}),vs.jsxs(lk,{variant:"outline",disabled:!0,children:[vs.jsx(zw,{className:"w-4 h-4 mr-2"}),"Coming Soon"]})]})})]})})]})})]})]})]})]})}const QLe=(e,t,n)=>{if(e&&"reportValidity"in e){const a=wAe(n,t);e.setCustomValidity(a&&a.message||""),e.reportValidity()}},KLe=(e,t)=>{for(const n in t.fields){const a=t.fields[n];a&&a.ref&&"reportValidity"in a.ref?QLe(a.ref,n,e):a.refs&&a.refs.forEach((t=>QLe(t,n,e)))}},JLe=(e,t)=>{t.shouldUseNativeValidation&&KLe(e,t);const n={};for(const a in e){const r=wAe(t.fields,a),s=Object.assign(e[a]||{},{ref:r&&r.ref});if(ZLe(t.names||Object.keys(e),a)){const e=Object.assign({},wAe(n,a));SAe(e,"root",s),SAe(n,a,e)}else SAe(n,a,s)}return n},ZLe=(e,t)=>e.some((e=>e.startsWith(t+".")));var XLe=function(e,t){for(var n={};e.length;){var a=e[0],r=a.code,s=a.message,i=a.path.join(".");if(!n[i])if("unionErrors"in a){var o=a.unionErrors[0].errors[0];n[i]={message:o.message,type:o.code}}else n[i]={message:s,type:r};if("unionErrors"in a&&a.unionErrors.forEach((function(t){return t.errors.forEach((function(t){return e.push(t)}))})),t){var l=n[i].types,c=l&&l[a.code];n[i]=QAe(i,t,n,r,c?[].concat(c,a.message):a.message)}e.shift()}return n},eTe=function(e,t,n){return void 0===n&&(n={}),function(a,r,s){try{return Promise.resolve(function(r,i){try{var o=Promise.resolve(e["sync"===n.mode?"parse":"parseAsync"](a,t)).then((function(e){return s.shouldUseNativeValidation&&KLe({},s),{errors:{},values:n.raw?a:e}}))}catch(l){return i(l)}return o&&o.then?o.then(void 0,i):o}(0,(function(e){if(t=e,Array.isArray(null==t?void 0:t.errors))return{values:{},errors:JLe(XLe(e.errors,!s.shouldUseNativeValidation&&"all"===s.criteriaMode),s)};var t;throw e})))}catch(i){return Promise.reject(i)}}};const tTe=ME({fullName:mE().min(2,"Name must be at least 2 characters"),email:mE().email("Please enter a valid email address"),username:mE().min(3,"Username must be at least 3 characters")}),nTe=ME({currentPassword:mE().min(6,"Current password is required"),newPassword:mE().min(8,"Password must be at least 8 characters"),confirmPassword:mE().min(8,"Please confirm your password")}).refine((e=>e.newPassword===e.confirmPassword),{message:"Passwords don't match",path:["confirmPassword"]});function aTe(){const{toast:e}=Fy(),[t,n]=cs.useState("account"),{data:a,isLoading:r,error:s}=Sy({queryKey:["/api/users/me"],refetchOnWindowFocus:!1}),i=TEe({resolver:eTe(tTe),defaultValues:{fullName:"",email:"",username:""}}),o=TEe({resolver:eTe(nTe),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),l=ky({mutationFn:async e=>{const t=await _y("PATCH","/api/users/me",e);if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to update profile")}return t.json()},onSuccess:()=>{e({title:"Profile Updated",description:"Your profile information has been updated successfully."}),Ay.invalidateQueries({queryKey:["/api/users/me"]})},onError:t=>{e({title:"Error",description:`Failed to update profile: ${t.message}`,variant:"destructive"})}}),c=ky({mutationFn:async e=>{const t=await _y("POST","/api/users/change-password",{currentPassword:e.currentPassword,newPassword:e.newPassword});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to change password")}return t.json()},onSuccess:()=>{e({title:"Password Changed",description:"Your password has been changed successfully."}),o.reset()},onError:t=>{e({title:"Error",description:`Failed to change password: ${t.message}`,variant:"destructive"})}});cs.useEffect((()=>{a&&i.reset({fullName:a.fullName,email:a.email,username:a.username})}),[a,i]);return r?vs.jsx("div",{className:"flex h-screen items-center justify-center",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):s?vs.jsx("div",{className:"flex h-screen items-center justify-center",children:vs.jsxs("div",{className:"text-center",children:[vs.jsx("h2",{className:"text-xl ",children:"Error loading profile"}),vs.jsx("p",{className:"text-muted-foreground",children:s.message}),vs.jsx(lk,{className:"mt-4",onClick:()=>Ay.invalidateQueries({queryKey:["/api/users/me"]}),children:"Try Again"})]})}):vs.jsxs("div",{className:"flex h-screen bg-gray-50",children:[vs.jsx(yR,{}),vs.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[vs.jsx(uR,{}),vs.jsx("main",{className:"flex-1 overflow-auto p-6",children:vs.jsxs("div",{className:"max-w-4xl mx-auto",children:[vs.jsx("div",{className:"flex items-center mb-6",children:vs.jsx("h1",{className:"text-2xl ",children:"Account Settings"})}),vs.jsxs(J_e,{value:t,onValueChange:n,children:[vs.jsxs(Z_e,{className:"mb-6",children:[vs.jsx(X_e,{value:"account",children:"Account"}),vs.jsx(X_e,{value:"security",children:"Security"}),vs.jsx(X_e,{value:"notifications",children:"Notifications"})]}),vs.jsx(eIe,{value:"account",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Profile Information"}),vs.jsx(rk,{children:"Update your account details and public profile."})]}),vs.jsxs(sk,{children:[vs.jsxs("div",{className:"flex items-center space-x-6 mb-6",children:[vs.jsxs(yF,{className:"h-20 w-20",children:[(null==a?void 0:a.avatarUrl)?vs.jsx(vF,{src:a.avatarUrl,alt:a.fullName}):null,vs.jsx(bF,{className:"text-lg ",children:(d=(null==a?void 0:a.fullName)||"",(null==d?void 0:d.split(" ").map((e=>e[0])).join(""))||"U")})]}),vs.jsxs("div",{children:[vs.jsx("h3",{className:"text-lg font-medium",children:null==a?void 0:a.fullName}),vs.jsx("p",{className:"text-sm text-muted-foreground",children:null==a?void 0:a.email}),vs.jsx(lk,{variant:"outline",size:"sm",className:"mt-2",children:"Change Avatar"})]})]}),vs.jsx(R$,{className:"my-6"}),vs.jsx(DEe,{...i,children:vs.jsxs("form",{onSubmit:i.handleSubmit((e=>{l.mutate(e)})),className:"space-y-6",children:[vs.jsx(OEe,{control:i.control,name:"fullName",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Full Name"}),vs.jsx(UEe,{children:vs.jsxs("div",{className:"relative",children:[vs.jsx(uj,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),vs.jsx(LB,{className:"pl-9",placeholder:"Your full name",...e})]})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:i.control,name:"email",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Email Address"}),vs.jsx(UEe,{children:vs.jsxs("div",{className:"relative",children:[vs.jsx(hw,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),vs.jsx(LB,{className:"pl-9",placeholder:"your.email@example.com",...e})]})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:i.control,name:"username",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Username"}),vs.jsx(UEe,{children:vs.jsx(LB,{placeholder:"username",...e})}),vs.jsx(WEe,{children:"This is your public display name. It can be your real name or a pseudonym."}),vs.jsx(GEe,{})]})}),vs.jsx(lk,{type:"submit",className:"w-full md:w-auto btn-brand-primary",disabled:l.isPending,children:l.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving Changes"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Pw,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})})]})]})}),vs.jsx(eIe,{value:"security",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Password"}),vs.jsx(rk,{children:"Change your password to keep your account secure."})]}),vs.jsx(sk,{children:vs.jsx(DEe,{...o,children:vs.jsxs("form",{onSubmit:o.handleSubmit((e=>{c.mutate(e)})),className:"space-y-6",children:[vs.jsx(OEe,{control:o.control,name:"currentPassword",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Current Password"}),vs.jsx(UEe,{children:vs.jsxs("div",{className:"relative",children:[vs.jsx(lw,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),vs.jsx(LB,{className:"pl-9",type:"password",placeholder:"••••••••",...e})]})}),vs.jsx(GEe,{})]})}),vs.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[vs.jsx(OEe,{control:o.control,name:"newPassword",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"New Password"}),vs.jsx(UEe,{children:vs.jsx(LB,{type:"password",placeholder:"••••••••",...e})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:o.control,name:"confirmPassword",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Confirm New Password"}),vs.jsx(UEe,{children:vs.jsx(LB,{type:"password",placeholder:"••••••••",...e})}),vs.jsx(GEe,{})]})})]}),vs.jsx(lk,{type:"submit",className:"w-full md:w-auto",disabled:c.isPending,children:c.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Changing Password"]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(kb,{className:"mr-2 h-4 w-4"}),"Change Password"]})})]})})})]})}),vs.jsx(eIe,{value:"notifications",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Notification Settings"}),vs.jsx(rk,{children:"Configure how you want to be notified."})]}),vs.jsx(sk,{children:vs.jsx("p",{className:"text-muted-foreground",children:"Notification settings will be available soon."})})]})})]})]})})]})]});var d}function rTe({isOpen:e,onClose:t,campaignId:n,campaignName:a}){const{toast:r}=Fy(),{t:s}=mk(),[i,o]=cs.useState(!1),[l,c]=cs.useState(!1),[d,u]=cs.useState([]),[f,m]=cs.useState([]),[p,h]=cs.useState(1),[g,x]=cs.useState(""),[y,v]=cs.useState("all"),[b,w]=cs.useState("sentAt"),[j,N]=cs.useState("desc"),[C,S]=cs.useState(new Set);cs.useEffect((()=>{let e=d.filter((e=>{const t=e.contactName.toLowerCase().includes(g.toLowerCase())||e.phoneNumber.includes(g),n="all"===y||e.messageStatus===y;return t&&n}));e.sort(((e,t)=>{const n=e[b],a=t[b];return null===n&&null===a?0:null===n?"asc"===j?-1:1:null===a?"asc"===j?1:-1:n<a?"asc"===j?-1:1:n>a?"asc"===j?1:-1:0})),m(e),h(1)}),[d,g,y,b,j]),cs.useEffect((()=>{e&&n&&(async()=>{o(!0);try{const e=await fetch(`/api/campaigns/${n}/details`,{credentials:"include"});if(!e.ok)throw new Error(s("campaigns.details.fetch_failed","Failed to fetch campaign details"));const t=await e.json();if(!t.success)throw new Error(t.error||s("campaigns.details.fetch_failed","Failed to fetch campaign details"));u(t.data)}catch(e){r({title:s("common.error","Error"),description:s("campaigns.details.fetch_failed","Failed to fetch campaign details"),variant:"destructive"})}finally{o(!1)}})()}),[e,n]);const k=Math.ceil(f.length/50),M=50*(p-1),_=M+50,I=f.slice(M,_),A=(e,t=100)=>e.length<=t?e:e.substring(0,t)+"...",E=e=>{b===e?N("asc"===j?"desc":"asc"):(w(e),N("asc"))};return vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[vs.jsx(CB,{children:vs.jsxs(kB,{children:[s("campaigns.details.title","Campaign Details")," - ",a]})}),vs.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 py-4 border-b",children:[vs.jsxs("div",{className:"flex-1 relative",children:[vs.jsx(Ow,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),vs.jsx(LB,{placeholder:s("campaigns.details.search_placeholder","Search by contact name or phone number..."),value:g,onChange:e=>x(e.target.value),className:"pl-10"})]}),vs.jsxs(ZU,{value:y,onValueChange:v,children:[vs.jsx(tW,{className:"w-full sm:w-48",children:vs.jsx(eW,{placeholder:s("campaigns.details.filter_by_status","Filter by status")})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"all",children:s("campaigns.details.all_statuses","All Statuses")}),vs.jsx(sW,{value:"pending",children:s("campaigns.details.status.pending","Pending")}),vs.jsx(sW,{value:"sent",children:s("campaigns.details.status.sent","Sent")}),vs.jsx(sW,{value:"delivered",children:s("campaigns.details.status.delivered","Delivered")}),vs.jsx(sW,{value:"failed",children:s("campaigns.details.status.failed","Failed")}),vs.jsx(sW,{value:"cancelled",children:s("campaigns.details.status.cancelled","Cancelled")})]})]}),vs.jsx("div",{className:"flex gap-2",children:vs.jsxs(lk,{variant:"outline",size:"sm",onClick:async()=>{c(!0);try{const e=await fetch(`/api/campaigns/${n}/export/excel`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({campaignName:a})});if(!e.ok)throw new Error(s("campaigns.details.export_failed","Failed to export Excel"));const t=await e.blob(),i=window.URL.createObjectURL(t),o=document.createElement("a");o.href=i,o.download=`campaign-${a.replace(/[^a-zA-Z0-9]/g,"-")}-${(new Date).toISOString().split("T")[0]}.xlsx`,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(i),document.body.removeChild(o),r({title:s("common.success","Success"),description:s("campaigns.details.export_success","Campaign data exported to Excel")})}catch(e){r({title:s("common.error","Error"),description:s("campaigns.details.export_failed","Failed to export Excel"),variant:"destructive"})}finally{c(!1)}},disabled:l||i,children:[l?vs.jsx(uw,{className:"h-4 w-4 animate-spin mr-2"}):vs.jsx(Hb,{className:"h-4 w-4 mr-2"}),s("campaigns.details.export_excel","Excel")]})})]}),vs.jsx("div",{className:"flex-1 overflow-auto",children:i?vs.jsx("div",{className:"flex justify-center items-center h-64",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin"})}):0===f.length?vs.jsx("div",{className:"text-center py-8 text-muted-foreground",children:0===d.length?s("campaigns.details.no_data","No campaign data found"):s("campaigns.details.no_results","No results match your search criteria")}):vs.jsxs(EY,{children:[vs.jsx(LY,{children:vs.jsxs(DY,{children:[vs.jsxs(PY,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>E("contactName"),children:[s("campaigns.details.table.contact_name","Contact Name")," ","contactName"===b&&("asc"===j?"↑":"↓")]}),vs.jsxs(PY,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>E("phoneNumber"),children:[s("campaigns.details.table.phone_number","Phone Number")," ","phoneNumber"===b&&("asc"===j?"↑":"↓")]}),vs.jsxs(PY,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>E("whatsappAccount"),children:[s("campaigns.details.table.whatsapp_account","WhatsApp Account")," ","whatsappAccount"===b&&("asc"===j?"↑":"↓")]}),vs.jsxs(PY,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>E("messageStatus"),children:[s("campaigns.details.table.status","Status")," ","messageStatus"===b&&("asc"===j?"↑":"↓")]}),vs.jsxs(PY,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>E("sentAt"),children:[s("campaigns.details.table.sent_at","Sent At")," ","sentAt"===b&&("asc"===j?"↑":"↓")]}),vs.jsx(PY,{children:s("campaigns.details.table.message_content","Message Content")}),vs.jsx(PY,{children:s("campaigns.details.table.error","Error")})]})}),vs.jsx(TY,{children:I.map((e=>{return vs.jsxs(DY,{children:[vs.jsx(OY,{className:"font-medium",children:e.contactName}),vs.jsx(OY,{children:e.phoneNumber}),vs.jsx(OY,{children:e.whatsappAccount}),vs.jsx(OY,{children:(t=e.messageStatus,vs.jsx(dk,{variant:{pending:"outline",sent:"default",delivered:"secondary",failed:"destructive",cancelled:"outline"}[t]||"outline",children:s(`campaigns.details.status.${t}`,t.charAt(0).toUpperCase()+t.slice(1))}))}),vs.jsx(OY,{children:e.sentAt?new Date(e.sentAt).toLocaleString():"-"}),vs.jsx(OY,{className:"max-w-xs",children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("span",{className:"flex-1",children:C.has(e.id)?e.messageContent:A(e.messageContent)}),e.messageContent.length>100&&vs.jsx(lk,{variant:"ghost",size:"sm",onClick:()=>(e=>{const t=new Set(C);t.has(e)?t.delete(e):t.add(e),S(t)})(e.id),children:C.has(e.id)?vs.jsx(Yb,{className:"h-4 w-4"}):vs.jsx(Qb,{className:"h-4 w-4"})})]})}),vs.jsx(OY,{className:"max-w-xs",children:e.errorMessage?vs.jsx("span",{className:"text-destructive text-sm",children:e.errorMessage}):"-"})]},e.id);var t}))})]})}),k>1&&vs.jsxs("div",{className:"flex items-center justify-between py-4 border-t",children:[vs.jsx("div",{className:"text-sm text-muted-foreground",children:s("campaigns.details.pagination.showing","Showing {{start}} to {{end}} of {{total}} results",{start:M+1,end:Math.min(_,f.length),total:f.length})}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsxs(lk,{variant:"outline",size:"sm",onClick:()=>h(Math.max(1,p-1)),disabled:1===p,children:[vs.jsx(_b,{className:"h-4 w-4"}),s("campaigns.details.pagination.previous","Previous")]}),vs.jsx("span",{className:"text-sm",children:s("campaigns.details.pagination.page_info","Page {{current}} of {{total}}",{current:p,total:k})}),vs.jsxs(lk,{variant:"outline",size:"sm",onClick:()=>h(Math.min(k,p+1)),disabled:p===k,children:[s("campaigns.details.pagination.next","Next"),vs.jsx(Ib,{className:"h-4 w-4"})]})]})]})]})})}function sTe(){var e;const[t,n]=cs.useState([]),[a,r]=cs.useState(null),[s,i]=cs.useState(!0),[o,l]=cs.useState("all"),[c,d]=cs.useState({isOpen:!1,campaign:null}),[u,f]=cs.useState({isOpen:!1,campaignId:null,campaignName:""}),[m,p]=cs.useState({}),[h,g]=cs.useState(!0),{toast:x}=Fy(),{t:y}=mk(),{onMessage:v}=yT("/ws"),b=ds.useRef(new Map),w=ds.useRef(new Map),j=ds.useRef(null),N=ds.useCallback((()=>{0!==b.current.size&&(n((e=>e.map((e=>{const t=b.current.get(e.id);return t?{...e,...t}:e})))),b.current.clear())}),[]),C=ds.useCallback(((e,t)=>{const n=Date.now();b.current.set(e,t),N(),w.current.set(e,n)}),[N]);cs.useEffect((()=>{S(),k()}),[o]),cs.useEffect((()=>{let e=null;return t.filter((e=>"running"===e.status)).length>0?e=setInterval((()=>{S()}),2e3):h||(e=setInterval((()=>{S()}),5e3)),()=>{e&&clearInterval(e)}}),[h,t]),cs.useEffect((()=>{const e=v("campaignStatusUpdate",(e=>{var t,s,i,o,l;g(!0),"campaign_completed"===(null==(t=e.data)?void 0:t.eventType)?(n((t=>t.map((t=>t.id===e.data.campaignId?{...t,status:"completed",...void 0!==e.data.totalRecipients&&{totalRecipients:e.data.totalRecipients,processedRecipients:(e.data.successfulSends||0)+(e.data.failedSends||0),successfulSends:e.data.successfulSends||0,failedSends:e.data.failedSends||0}}:t)))),x({title:y("campaigns.completed","Campaign Completed"),description:y("campaigns.finished_processing",'Campaign "{{name}}" has finished processing.',{name:e.data.campaignName})}),k(),S()):"message_sent"===(null==(s=e.data)?void 0:s.eventType)&&(null==(i=e.data)?void 0:i.progress)?(C(e.data.campaignId,{processedRecipients:e.data.progress.processedRecipients,successfulSends:e.data.progress.successfulSends,failedSends:e.data.progress.failedSends,totalRecipients:e.data.progress.totalRecipients}),a&&r((e=>e?{...e,messagesDelivered:e.messagesDelivered+1}:null))):"message_failed"===(null==(o=e.data)?void 0:o.eventType)&&(null==(l=e.data)?void 0:l.progress)&&C(e.data.campaignId,{processedRecipients:e.data.progress.processedRecipients,successfulSends:e.data.progress.successfulSends,failedSends:e.data.progress.failedSends,totalRecipients:e.data.progress.totalRecipients})})),t=setInterval((()=>{const e=w.current.get(-1)||Date.now();Date.now()-e>3e4&&g(!1)}),1e4);return()=>{e(),clearInterval(t),j.current&&clearTimeout(j.current)}}),[v,x,a,C]);const S=async()=>{try{const e=new URLSearchParams;"all"!==o&&e.append("status",o);const t=await fetch(`/api/campaigns?${e}`),a=await t.json();if(!a.success)throw new Error(a.error);{const e=a.data.map((e=>({...e,processedRecipients:e.processedRecipients||0,successfulSends:e.successfulSends||0,failedSends:e.failedSends||0,totalRecipients:e.totalRecipients||0})));n(e)}}catch(e){x({title:y("common.error","Error"),description:y("campaigns.fetch_failed","Failed to fetch campaigns"),variant:"destructive"})}finally{i(!1)}},k=async()=>{try{const e=await fetch("/api/campaigns/stats"),t=await e.json();t.success?r(t.data):x({title:y("common.error","Error"),description:y("campaigns.stats_fetch_failed","Failed to fetch campaign statistics"),variant:"destructive"})}catch(e){x({title:y("common.error","Error"),description:y("campaigns.stats_fetch_failed","Failed to fetch campaign statistics"),variant:"destructive"})}},M=async(e,t)=>{try{const n=await fetch(`/api/campaigns/${e}/${t}`,{method:"POST"}),a=await n.json();if(!a.success)throw new Error(a.error);x({title:y("common.success","Success"),description:a.data.message}),S()}catch(n){x({title:y("common.error","Error"),description:y("campaigns.action_failed","Failed to {{action}} campaign",{action:t}),variant:"destructive"})}},_=e=>{const t={draft:{color:"secondary",icon:Bb},scheduled:{color:"default",icon:Bb},running:{color:"default",icon:_w},paused:{color:"secondary",icon:Cw},completed:{color:"default",icon:Db},cancelled:{color:"secondary",icon:zb},failed:{color:"destructive",icon:Lb}}[e],n=t.icon;return vs.jsxs(dk,{variant:t.color,className:"flex items-center gap-1",children:[vs.jsx(n,{className:"w-3 h-3"}),y(`campaigns.status.${e}`,e.charAt(0).toUpperCase()+e.slice(1))]})},I=e=>{const t=!["running","processing"].includes(e.status),n=!["running","processing"].includes(e.status),a=(()=>{switch(e.status){case"draft":case"scheduled":return vs.jsxs(lk,{size:"sm",onClick:()=>M(e.id,"start"),className:"flex items-center gap-1",children:[vs.jsx(_w,{className:"w-3 h-3"}),y("campaigns.start","Start")]});case"running":return vs.jsxs(lk,{size:"sm",variant:"outline",onClick:()=>M(e.id,"pause"),className:"flex items-center gap-1",children:[vs.jsx(Cw,{className:"w-3 h-3"}),y("campaigns.pause","Pause")]});case"paused":return vs.jsxs(lk,{size:"sm",onClick:()=>M(e.id,"resume"),className:"flex items-center gap-1",children:[vs.jsx(_w,{className:"w-3 h-3"}),y("campaigns.resume","Resume")]});default:return null}})();return vs.jsxs("div",{className:"flex items-center gap-2",children:[a,t&&vs.jsx(yx,{href:`/campaigns/${e.id}/edit`,children:vs.jsxs(lk,{size:"sm",variant:"outline",className:"flex items-center gap-1",children:[vs.jsx(Hw,{className:"w-3 h-3"}),y("common.edit","Edit")]})}),n&&vs.jsxs(lk,{size:"sm",variant:"outline",onClick:()=>(e=>{d({isOpen:!0,campaign:e})})(e),className:"flex items-center gap-1 text-destructive hover:text-destructive",children:[vs.jsx(Zw,{className:"w-3 h-3"}),y("common.delete","Delete")]})]})},A=e=>{if(0===e.totalRecipients)return 0;return Math.round(e.processedRecipients/e.totalRecipients*100)};return s?vs.jsx("div",{className:"flex items-center justify-center h-64",children:vs.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{className:"flex justify-between items-center",children:[vs.jsxs("div",{children:[vs.jsx("h1",{className:"text-2xl",children:y("nav.campaigns","Campaign Dashboard")}),vs.jsxs("div",{className:"flex items-center gap-3",children:[vs.jsx("p",{className:"text-muted-foreground",children:y("campaigns.dashboard_description","Manage and monitor your mass messaging campaigns")}),vs.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[vs.jsx("div",{className:"w-2 h-2 rounded-full "+(h?"bg-green-500":"bg-red-500")}),vs.jsx("span",{className:"text-muted-foreground",children:h?y("campaigns.live_updates","Live updates"):y("campaigns.polling_mode","Polling mode")})]})]})]}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsxs(lk,{variant:"outline",onClick:async()=>{await S(),await k()},className:"flex items-center gap-2",children:[vs.jsx(fj,{className:"w-4 h-4"}),y("campaigns.refresh","Refresh")]}),vs.jsx(yx,{href:"/campaigns/new",children:vs.jsxs(lk,{className:"flex items-center gap-2",children:[vs.jsx(Iw,{className:"w-4 h-4"}),y("campaigns.create_campaign","Create Campaign")]})})]})]}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[vs.jsxs(tk,{children:[vs.jsxs(nk,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[vs.jsx(ak,{className:"text-sm font-medium",children:y("campaigns.total_campaigns","Total Campaigns")}),vs.jsx(fj,{className:"h-4 w-4 text-muted-foreground"})]}),vs.jsx(sk,{children:vs.jsx("div",{className:"text-2xl font-bold",children:a?a.totalCampaigns:vs.jsx("div",{className:"animate-pulse bg-muted h-8 w-8 rounded"})})})]}),vs.jsxs(tk,{children:[vs.jsxs(nk,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[vs.jsx(ak,{className:"text-sm font-medium",children:y("campaigns.active_campaigns","Active Campaigns")}),vs.jsx(_w,{className:"h-4 w-4 text-muted-foreground"})]}),vs.jsx(sk,{children:vs.jsx("div",{className:"text-2xl font-bold",children:a?a.activeCampaigns:vs.jsx("div",{className:"animate-pulse bg-muted h-8 w-8 rounded"})})})]}),vs.jsxs(tk,{children:[vs.jsxs(nk,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[vs.jsx(ak,{className:"text-sm font-medium",children:y("campaigns.total_recipients","Total Recipients")}),vs.jsx(fj,{className:"h-4 w-4 text-muted-foreground"})]}),vs.jsx(sk,{children:vs.jsx("div",{className:"text-2xl font-bold",children:a?a.totalRecipients.toLocaleString():vs.jsx("div",{className:"animate-pulse bg-muted h-8 w-16 rounded"})})})]}),vs.jsxs(tk,{children:[vs.jsxs(nk,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[vs.jsx(ak,{className:"text-sm font-medium",children:y("campaigns.messages_delivered","Messages Delivered")}),vs.jsx(vw,{className:"h-4 w-4 text-muted-foreground"})]}),vs.jsx(sk,{children:vs.jsx("div",{className:"text-2xl font-bold",children:a?a.messagesDelivered.toLocaleString():vs.jsx("div",{className:"animate-pulse bg-muted h-8 w-16 rounded"})})})]}),vs.jsxs(tk,{children:[vs.jsxs(nk,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[vs.jsx(ak,{className:"text-sm font-medium",children:y("campaigns.delivery_rate","Delivery Rate")}),vs.jsx(Db,{className:"h-4 w-4 text-muted-foreground"})]}),vs.jsx(sk,{children:vs.jsx("div",{className:"text-2xl font-bold",children:a?`${a.deliveryRate.toFixed(1)}%`:vs.jsx("div",{className:"animate-pulse bg-muted h-8 w-12 rounded"})})})]})]}),vs.jsx("div",{className:"flex space-x-2",children:["all","draft","running","paused","completed"].map((e=>vs.jsx(lk,{variant:o===e?"default":"outline",size:"sm",onClick:()=>l(e),children:y(`campaigns.filter.${e}`,e.charAt(0).toUpperCase()+e.slice(1))},e)))}),vs.jsx("div",{className:"grid gap-4",children:0===t.length?vs.jsx(tk,{children:vs.jsxs(sk,{className:"flex flex-col items-center justify-center py-12",children:[vs.jsx(vw,{className:"h-12 w-12 text-muted-foreground mb-4"}),vs.jsx("h3",{className:"text-lg font-semibold mb-2",children:y("campaigns.no_campaigns_found","No campaigns found")}),vs.jsx("p",{className:"text-muted-foreground text-center mb-4",children:y("campaigns.get_started_message","Get started by creating your first mass messaging campaign")}),vs.jsx(yx,{href:"/campaigns/new",children:vs.jsxs(lk,{children:[vs.jsx(Iw,{className:"w-4 h-4 mr-2"}),y("campaigns.create_campaign","Create Campaign")]})})]})}):t.map((e=>{var t,n;return vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsxs("div",{className:"flex justify-between items-start",children:[vs.jsxs("div",{className:"space-y-1",children:[vs.jsxs(ak,{className:"flex items-center gap-2",children:[e.name,_(e.status)]}),vs.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]}),vs.jsxs("div",{className:"flex items-center gap-2",children:[I(e),"completed"===e.status&&vs.jsxs(vs.Fragment,{children:[vs.jsxs(lk,{size:"sm",variant:"outline",onClick:()=>f({isOpen:!0,campaignId:e.id,campaignName:e.name}),title:"View detailed campaign results and export data",children:[vs.jsx(Zb,{className:"w-3 h-3 mr-1"}),y("campaigns.details","Details")]}),vs.jsx(lk,{size:"sm",variant:"outline",onClick:()=>(async e=>{p((t=>({...t,[e.id]:{recalculating:!0}})));try{const t=await fetch(`/api/campaigns/${e.id}/recalculate-stats`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const n=await t.json();n.success?(x({title:y("campaigns.stats_recalculated","Stats Recalculated"),description:y("campaigns.stats_updated","Campaign statistics have been updated.")}),await S()):x({title:y("common.error","Error"),description:y("campaigns.stats_recalc_failed","Failed to recalculate stats: {{error}}",{error:n.error}),variant:"destructive"})}catch(t){const e=t instanceof Error?t.message:"Unknown error occurred";x({title:y("common.error","Error"),description:y("campaigns.network_error","Network error: {{error}}",{error:e}),variant:"destructive"})}finally{p((t=>({...t,[e.id]:{recalculating:!1}})))}})(e),disabled:null==(t=m[e.id])?void 0:t.recalculating,title:"Recalculate Campaign Statistics - Force update from database",children:(null==(n=m[e.id])?void 0:n.recalculating)?vs.jsx("div",{className:"w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin"}):"🔄"})]})]})]})}),vs.jsxs(sk,{children:[vs.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[vs.jsxs("div",{children:[vs.jsx("p",{className:"text-muted-foreground",children:y("campaigns.recipients","Recipients")}),vs.jsx("p",{className:"font-medium",children:e.totalRecipients.toLocaleString()})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-muted-foreground",children:y("campaigns.progress","Progress")}),vs.jsxs("p",{className:"font-medium",children:[A(e),"%"]})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-muted-foreground",children:y("campaigns.delivered","Delivered")}),vs.jsx("p",{className:"font-medium",children:e.successfulSends.toLocaleString()})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-muted-foreground",children:y("campaigns.failed","Failed")}),vs.jsx("p",{className:"font-medium",children:e.failedSends.toLocaleString()})]})]}),"running"===e.status&&vs.jsxs("div",{className:"mt-4",children:[vs.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[vs.jsxs("span",{className:"flex items-center gap-2",children:[y("campaigns.progress","Progress"),vs.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),vs.jsxs("span",{className:"font-medium",children:[A(e),"%"]})]}),vs.jsx("div",{className:"w-full bg-secondary rounded-full h-3 overflow-hidden",children:vs.jsx("div",{className:"bg-gradient-to-r from-primary to-primary/80 h-3 rounded-full transition-all duration-500 ease-out relative",style:{width:`${A(e)}%`},children:vs.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse rounded-full"})})}),vs.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[vs.jsxs("span",{children:[e.processedRecipients.toLocaleString()," ",y("campaigns.processed","processed")]}),vs.jsxs("span",{children:[e.totalRecipients.toLocaleString()," ",y("campaigns.total","total")]})]})]})]})]},e.id)}))}),vs.jsx(x7,{open:c.isOpen,onOpenChange:e=>!e&&d({isOpen:!1,campaign:null}),children:vs.jsxs(w7,{children:[vs.jsxs(j7,{children:[vs.jsx(C7,{children:y("campaigns.delete_campaign","Delete Campaign")}),vs.jsx(S7,{children:y("campaigns.delete_confirmation",'Are you sure you want to delete the campaign "{{name}}"? This action cannot be undone and all campaign data will be permanently removed.',{name:null==(e=c.campaign)?void 0:e.name})})]}),vs.jsxs(N7,{children:[vs.jsx(M7,{children:y("common.cancel","Cancel")}),vs.jsx(k7,{onClick:()=>c.campaign&&(async e=>{try{const t=await fetch(`/api/campaigns/${e.id}`,{method:"DELETE"}),n=await t.json();if(!n.success)throw new Error(n.error);x({title:y("common.success","Success"),description:y("campaigns.deleted_successfully",'Campaign "{{name}}" deleted successfully',{name:e.name})}),S(),k()}catch(t){x({title:y("common.error","Error"),description:y("campaigns.delete_failed","Failed to delete campaign"),variant:"destructive"})}finally{d({isOpen:!1,campaign:null})}})(c.campaign),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:y("campaigns.delete_campaign","Delete Campaign")})]})]})}),vs.jsx(rTe,{isOpen:u.isOpen,onClose:()=>f({isOpen:!1,campaignId:null,campaignName:""}),campaignId:u.campaignId||0,campaignName:u.campaignName})]})}function iTe(){return vs.jsxs("div",{className:"h-screen flex flex-col overflow-hidden font-sans text-gray-800",children:[vs.jsx(uR,{}),vs.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[vs.jsx(yR,{}),vs.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:vs.jsx(sTe,{})})]})]})}function oTe({isOpen:e,onClose:t,onSegmentCreated:n}){const[a,r]=cs.useState({name:"",description:""}),[s,i]=cs.useState({tags:[],created_after:"",created_before:""}),[o,l]=cs.useState(""),[c,d]=cs.useState(null),[u,f]=cs.useState([]),[m,p]=cs.useState(!1),[h,g]=cs.useState([]),[x,y]=cs.useState([]),[v,b]=cs.useState(!1),[w,j]=cs.useState(!1),[N,C]=cs.useState(!1),[S,k]=cs.useState(null),[M,_]=cs.useState(!1),[I,A]=cs.useState([]),[E,L]=cs.useState({}),[T,D]=cs.useState("upload"),[P,O]=cs.useState(null),{toast:R}=Fy(),{t:z}=mk();cs.useEffect((()=>{e&&(r({name:"",description:""}),i({tags:[],created_after:"",created_before:""}),l(""),d(null),f([]),p(!1),g([]),y([]),C(!1),k(null),A([]),L({}),D("upload"),O(null))}),[e]);const F=cs.useCallback(function(e,t){let n;return(...a)=>{clearTimeout(n),n=setTimeout((()=>e(...a)),t)}}((async e=>{j(!0);try{const t=await fetch("/api/campaigns/segments/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({criteria:e,includeDetails:!0,limit:50})}),n=await t.json();n.success&&(d(n.data.count),f(n.data.contacts||[]),p(n.data.hasMore||!1))}catch(t){d(null),f([]),p(!1)}finally{j(!1)}}),500),[]);cs.useEffect((()=>{e&&(s.tags.length>0||s.created_after||s.created_before)?F(s):(d(null),f([]),p(!1))}),[s,e,F]);const B=e=>{if(!e)return!1;return e.replace(/[^0-9]/g,"").length<=14},U=u.filter((e=>!h.includes(e.id)&&B(e.phone))),W=u.filter((e=>!B(e.phone))),G=null!==c?Math.max(0,c-h.length-W.length):null,V=()=>{o.trim()&&!s.tags.includes(o.trim())&&(i((e=>({...e,tags:[...e.tags,o.trim()]}))),l(""))},H=e=>{_(!0);const t=new FileReader;t.onload=e=>{var t;try{const n=(null==(t=e.target)?void 0:t.result).split("\n").filter((e=>e.trim()));if(n.length<2)throw new Error(z("segments.csv.insufficient_data","CSV file must contain at least a header row and one data row"));const a=n[0].split(",").map((e=>e.trim().replace(/"/g,""))),r=n.slice(1).map((e=>{const t=e.split(",").map((e=>e.trim().replace(/"/g,""))),n={};return a.forEach(((e,a)=>{n[e]=t[a]||""})),n}));A(r.slice(0,10));const s={},i=["name","phone","email","company","tags","notes"];a.forEach((e=>{const t=e.toLowerCase().replace(/[^a-z]/g,""),n=i.find((e=>e===t||t.includes(e)||e.includes(t)));n&&(s[e]=n)})),L(s),D("mapping")}catch(n){R({title:z("common.error","Error"),description:n instanceof Error?n.message:z("segments.csv.parse_error","Failed to parse CSV file"),variant:"destructive"})}finally{_(!1)}},t.readAsText(e)},q=()=>{C(!1),k(null),A([]),L({}),D("upload"),O(null)};return vs.jsxs(yB,{open:e,onOpenChange:t,children:[vs.jsxs(NB,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[vs.jsx(CB,{children:vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx(fj,{className:"w-5 h-5"}),z("segments.create.title","Create Contact Segment")]})}),vs.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),a.name.trim())if(0!==s.tags.length||s.created_after||s.created_before){b(!0);try{const e=await fetch("/api/campaigns/segments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name,description:a.description,criteria:s,excludedContactIds:h})}),r=await e.json();if(!r.success)throw new Error(r.error);R({title:z("common.success","Success"),description:z("segments.create.success","Segment created successfully")}),n(r.data),t()}catch(r){R({title:z("common.error","Error"),description:z("segments.create.failed","Failed to create segment"),variant:"destructive"})}finally{b(!1)}}else R({title:z("common.error","Error"),description:z("segments.create.criteria_required","Please add at least one filter criteria"),variant:"destructive"});else R({title:z("common.error","Error"),description:z("segments.create.name_required","Please enter a segment name"),variant:"destructive"})},className:"space-y-6",children:[vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"name",children:z("segments.create.name_label","Segment Name")}),vs.jsx(LB,{id:"name",value:a.name,onChange:e=>r((t=>({...t,name:e.target.value}))),placeholder:z("segments.create.name_placeholder","e.g., VIP Customers, New Leads"),required:!0})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"description",children:z("segments.create.description_label","Description (Optional)")}),vs.jsx(TB,{id:"description",value:a.description,onChange:e=>r((t=>({...t,description:e.target.value}))),placeholder:z("segments.create.description_placeholder","Describe this segment..."),rows:2})]})]}),vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("h3",{className:"text-lg font-medium",children:z("segments.create.filter_criteria_title","Filter Criteria")}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:async()=>{try{const e=await fetch("/api/contacts/csv-template");if(!e.ok)throw new Error("Failed to download template");{const t=await e.blob(),n=window.URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="contact_import_template.csv",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n)}}catch(e){R({title:z("common.error","Error"),description:z("segments.csv.template_download_failed","Failed to download CSV template"),variant:"destructive"})}},className:"flex items-center gap-2",children:[vs.jsx(Hb,{className:"w-4 h-4"}),z("segments.csv.download_template","Download Template")]}),vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>C(!0),className:"flex items-center gap-2",children:[vs.jsx(sj,{className:"w-4 h-4"}),z("segments.csv.import_contacts","Import from CSV")]})]})]}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"created_after",children:z("segments.create.created_after_label","Created After")}),vs.jsx(LB,{id:"created_after",type:"date",value:s.created_after,onChange:e=>i((t=>({...t,created_after:e.target.value})))})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"created_before",children:z("segments.create.created_before_label","Created Before")}),vs.jsx(LB,{id:"created_before",type:"date",value:s.created_before,onChange:e=>i((t=>({...t,created_before:e.target.value})))})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{children:z("segments.create.contact_tags_label","Contact Tags")}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(LB,{value:o,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),V())},placeholder:z("segments.create.tag_placeholder","Enter tag name"),className:"flex-1"}),vs.jsx(lk,{type:"button",onClick:V,disabled:!o.trim(),size:"sm",children:vs.jsx(Iw,{className:"w-4 h-4"})})]}),s.tags.length>0&&vs.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map(((e,t)=>vs.jsxs(dk,{variant:"secondary",className:"flex items-center gap-1",children:[vs.jsx(Qw,{className:"w-3 h-3"}),e,vs.jsx("button",{type:"button",onClick:t=>{var n;t.preventDefault(),t.stopPropagation(),n=e,i((e=>({...e,tags:e.tags.filter((e=>e!==n))})))},className:"ml-1 hover:text-destructive",children:vs.jsx(yj,{className:"w-3 h-3"})})]},t)))}),vs.jsx("p",{className:"text-sm text-muted-foreground",children:z("segments.create.tags_description","Contacts must have ALL selected tags")})]})]})]}),vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[vs.jsx(fj,{className:"w-4 h-4"}),z("segments.create.contact_preview_title","Contact Preview")]}),null!==G&&vs.jsxs("div",{className:"text-sm text-muted-foreground",children:[m?vs.jsxs(vs.Fragment,{children:[z("segments.create.showing_first_50","Showing first 50 of")," ",vs.jsx("strong",{children:G})," ",z("segments.create.contacts","contacts")]}):vs.jsxs(vs.Fragment,{children:[vs.jsx("strong",{children:G})," ",z("segments.create.contacts_match_criteria","contacts match these criteria")]}),h.length>0&&vs.jsxs("span",{className:"text-orange-600 ml-2",children:["(",h.length," ",z("segments.create.excluded","excluded"),")"]})]})]}),w?vs.jsx("div",{className:"flex items-center justify-center py-8",children:vs.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[vs.jsx(uw,{className:"w-4 h-4 animate-spin"}),z("segments.create.loading_preview","Loading contact preview...")]})}):U.length>0?vs.jsx("div",{className:"border rounded-lg max-h-80 overflow-y-auto",children:vs.jsxs(EY,{children:[vs.jsx(LY,{children:vs.jsxs(DY,{children:[vs.jsx(PY,{children:z("segments.create.table.contact_name","Contact Name")}),vs.jsx(PY,{children:z("segments.create.table.phone","Phone")}),vs.jsx(PY,{children:z("segments.create.table.email","Email")}),vs.jsx(PY,{children:z("segments.create.table.tags","Tags")}),vs.jsx(PY,{children:z("segments.create.table.created","Created")}),vs.jsx(PY,{children:z("segments.create.table.last_activity","Last Activity")}),vs.jsx(PY,{className:"w-20",children:z("segments.create.table.actions","Actions")})]})}),vs.jsx(TY,{children:U.map((e=>vs.jsxs(DY,{children:[vs.jsx(OY,{className:"font-medium",children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(fj,{className:"w-4 h-4 text-muted-foreground"}),e.name||z("segments.create.table.unknown","Unknown")]})}),vs.jsx(OY,{children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Mw,{className:"w-4 h-4 text-muted-foreground"}),e.phone]})}),vs.jsx(OY,{children:e.email?vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(hw,{className:"w-4 h-4 text-muted-foreground"}),e.email]}):vs.jsx("span",{className:"text-muted-foreground",children:"-"})}),vs.jsx(OY,{children:e.tags&&e.tags.length>0?vs.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,2).map(((e,t)=>vs.jsx(dk,{variant:"outline",className:"text-xs",children:e},t))),e.tags.length>2&&vs.jsxs(dk,{variant:"outline",className:"text-xs",children:["+",e.tags.length-2]})]}):vs.jsx("span",{className:"text-muted-foreground",children:"-"})}),vs.jsx(OY,{children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Nb,{className:"w-4 h-4 text-muted-foreground"}),vs.jsx("span",{className:"text-sm",children:new Date(e.createdAt).toLocaleDateString()})]})}),vs.jsx(OY,{children:e.lastActivity?vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(xb,{className:"w-4 h-4 text-green-500"}),vs.jsx("span",{className:"text-sm",children:new Date(e.lastActivity).toLocaleDateString()})]}):vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(xb,{className:"w-4 h-4 text-muted-foreground"}),vs.jsx("span",{className:"text-sm text-muted-foreground",children:z("segments.create.table.no_activity","No activity")})]})}),vs.jsx(OY,{children:vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{const t=u.find((t=>t.id===e));g((t=>[...t,e])),t&&y((e=>[...e,t])),R({title:z("segments.create.contact_excluded_title","Contact excluded"),description:z("segments.create.contact_excluded_desc","Contact has been removed from this segment preview")})})(e.id)},className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",title:z("segments.create.exclude_contact_tooltip","Exclude contact from segment"),children:vs.jsx(Zw,{className:"w-4 h-4"})})})]},e.id)))})]})}):u.length>0&&0===U.length?vs.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[vs.jsx(fj,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),vs.jsx("p",{children:z("segments.create.all_contacts_excluded","All contacts have been excluded from this segment")}),vs.jsx("p",{className:"text-sm",children:h.length>0&&vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),g([]),y([])},className:"mt-2",children:[vs.jsx(rj,{className:"w-4 h-4 mr-2"}),z("segments.create.restore_all_contacts","Restore all contacts")]})})]}):0===G?vs.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[vs.jsx(fj,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),vs.jsx("p",{children:z("segments.create.no_contacts_match","No contacts match the current criteria")}),vs.jsx("p",{className:"text-sm",children:z("segments.create.try_adjusting_filters","Try adjusting your filters")})]}):vs.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[vs.jsx(fj,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),vs.jsx("p",{children:z("segments.create.add_filter_criteria","Add filter criteria to preview contacts")}),vs.jsx("p",{className:"text-sm",children:z("segments.create.select_tags_or_dates","Select tags or date ranges to see matching contacts")})]}),h.length>0&&vs.jsxs("div",{className:"mt-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsxs("h5",{className:"text-sm font-medium text-orange-800",children:[z("segments.create.excluded_contacts_title","Excluded Contacts")," (",h.length,")"]}),vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),g([]),y([])},className:"text-orange-700 border-orange-300 hover:bg-orange-100",children:[vs.jsx(rj,{className:"w-4 h-4 mr-1"}),z("segments.create.restore_all","Restore All")]})]}),vs.jsx("div",{className:"flex flex-wrap gap-2",children:x.map((e=>vs.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded border border-orange-200",children:[vs.jsx("span",{className:"text-sm text-orange-800",children:e.name||e.phone||`Contact ${e.id}`}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",onClick:t=>{var n;t.preventDefault(),t.stopPropagation(),n=e.id,g((e=>e.filter((e=>e!==n)))),y((e=>e.filter((e=>e.id!==n)))),R({title:z("segments.create.contact_restored_title","Contact restored"),description:z("segments.create.contact_restored_desc","Contact has been added back to the segment preview")})},className:"h-5 w-5 p-0 text-orange-600 hover:text-orange-800",title:z("segments.create.restore_contact_tooltip","Restore contact"),children:vs.jsx(rj,{className:"w-3 h-3"})})]},e.id)))})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:t,children:z("common.cancel","Cancel")}),vs.jsxs(lk,{type:"submit",disabled:v,children:[v&&vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),z("segments.create.create_button","Create Segment")]})]})]})]}),vs.jsx(yB,{open:N,onOpenChange:q,children:vs.jsxs(NB,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[vs.jsxs(CB,{children:[vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx(Zb,{className:"w-5 h-5"}),z("segments.csv.import_title","Import Contacts from CSV")]}),vs.jsx(MB,{children:z("segments.csv.import_description","Upload a CSV file to import contacts into your segment")})]}),vs.jsxs("div",{className:"space-y-6",children:["upload"===T&&vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[vs.jsx(sj,{className:"w-8 h-8 mx-auto mb-4 text-gray-400"}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("p",{className:"text-sm font-medium",children:z("segments.csv.upload_instruction","Choose a CSV file to upload")}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:z("segments.csv.file_requirements","File must be in CSV format with headers: name, phone, email, company, tags, notes")})]}),vs.jsx("input",{type:"file",accept:".csv",onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];n&&"text/csv"===n.type?(k(n),H(n)):R({title:z("common.error","Error"),description:z("segments.csv.invalid_file","Please select a valid CSV file"),variant:"destructive"})},className:"hidden",id:"csv-upload"}),vs.jsxs("label",{htmlFor:"csv-upload",className:"inline-flex items-center gap-2 mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md cursor-pointer hover:bg-primary/90",children:[vs.jsx(sj,{className:"w-4 h-4"}),z("segments.csv.select_file","Select CSV File")]})]}),M&&vs.jsx("div",{className:"flex items-center justify-center py-4",children:vs.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[vs.jsx(uw,{className:"w-4 h-4 animate-spin"}),z("segments.csv.parsing","Parsing CSV file...")]})})]}),"mapping"===T&&I.length>0&&vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-medium mb-2",children:z("segments.csv.column_mapping","Column Mapping")}),vs.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:z("segments.csv.mapping_instruction","Map your CSV columns to contact fields")}),vs.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.keys(I[0]||{}).map((e=>vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{className:"text-sm font-medium",children:e}),vs.jsxs(ZU,{value:E[e]||"",onValueChange:t=>L((n=>({...n,[e]:t}))),children:[vs.jsx(tW,{children:vs.jsx(eW,{placeholder:z("segments.csv.select_field","Select field")})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"__skip__",children:z("segments.csv.skip_column","Skip this column")}),vs.jsx(sW,{value:"name",children:z("segments.csv.field_name","Name")}),vs.jsx(sW,{value:"phone",children:z("segments.csv.field_phone","Phone")}),vs.jsx(sW,{value:"email",children:z("segments.csv.field_email","Email")}),vs.jsx(sW,{value:"company",children:z("segments.csv.field_company","Company")}),vs.jsx(sW,{value:"tags",children:z("segments.csv.field_tags","Tags")}),vs.jsx(sW,{value:"notes",children:z("segments.csv.field_notes","Notes")})]})]})]},e)))})]}),vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-medium mb-2",children:z("segments.csv.preview_title","Data Preview")}),vs.jsx("div",{className:"border rounded-lg max-h-60 overflow-auto",children:vs.jsxs(EY,{children:[vs.jsx(LY,{children:vs.jsx(DY,{children:Object.keys(I[0]||{}).map((e=>vs.jsxs(PY,{className:"text-xs",children:[e,E[e]&&vs.jsxs("div",{className:"text-xs text-muted-foreground",children:["→ ",E[e]]})]},e)))})}),vs.jsx(TY,{children:I.slice(0,5).map(((e,t)=>vs.jsx(DY,{children:Object.values(e).map(((e,t)=>vs.jsxs(OY,{className:"text-xs",children:[String(e).substring(0,30),String(e).length>30&&"..."]},t)))},t)))})]})})]})]}),"importing"===T&&vs.jsx("div",{className:"flex items-center justify-center py-8",children:vs.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[vs.jsx(uw,{className:"w-4 h-4 animate-spin"}),z("segments.csv.importing","Importing contacts...")]})}),"results"===T&&P&&vs.jsx("div",{className:"space-y-4",children:vs.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[vs.jsx("h4",{className:"font-medium text-green-800 mb-2",children:z("segments.csv.import_complete","Import Complete")}),vs.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[vs.jsx("p",{children:z("segments.csv.successful_imports","Successfully imported: {{count}} contacts",{count:P.successful})}),vs.jsx("p",{children:z("segments.csv.failed_imports","Failed imports: {{count}}",{count:P.failed})}),P.errors&&P.errors.length>0&&vs.jsxs("div",{className:"mt-2",children:[vs.jsx("p",{className:"font-medium",children:z("segments.csv.errors","Errors:")}),vs.jsxs("ul",{className:"list-disc list-inside text-xs",children:[P.errors.slice(0,5).map(((e,t)=>vs.jsx("li",{children:e},t))),P.errors.length>5&&vs.jsx("li",{children:z("segments.csv.more_errors","And {{count}} more errors...",{count:P.errors.length-5})})]})]})]})]})})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:q,children:P?z("common.close","Close"):z("common.cancel","Cancel")}),"mapping"===T&&vs.jsxs(lk,{onClick:async()=>{if(S){D("importing"),_(!0);try{const e=new FormData;e.append("csvFile",S),e.append("duplicateHandling","skip"),e.append("columnMapping",JSON.stringify(E));const t=await fetch("/api/contacts/import-for-segment",{method:"POST",body:e}),n=await t.json();if(!t.ok)throw new Error(n.error||z("segments.csv.import_failed","Failed to import contacts"));O(n),D("results"),(s.tags.length>0||s.created_after||s.created_before)&&F(s),R({title:z("common.success","Success"),description:z("segments.csv.import_success","Successfully imported {{count}} contacts",{count:n.successful})})}catch(e){R({title:z("common.error","Error"),description:e instanceof Error?e.message:z("segments.csv.import_failed","Failed to import contacts"),variant:"destructive"})}finally{_(!1)}}},disabled:M||0===Object.keys(E).filter((e=>E[e]&&"__skip__"!==E[e])).length,children:[M&&vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),z("segments.csv.import_button","Import Contacts")]})]})]})})]})}const lTe=e=>[{value:"name",label:e("variables.contact_name","Contact Name"),description:e("variables.contact_name_desc","Full name of the contact"),icon:vs.jsx(uj,{className:"w-4 h-4"}),category:"contact"},{value:"phone",label:e("variables.phone_number","Phone Number"),description:e("variables.phone_number_desc","Contact phone number"),icon:vs.jsx(Mw,{className:"w-4 h-4"}),category:"contact"},{value:"email",label:e("variables.email_address","Email Address"),description:e("variables.email_address_desc","Contact email address"),icon:vs.jsx(hw,{className:"w-4 h-4"}),category:"contact"},{value:"company",label:e("variables.company_name","Company Name"),description:e("variables.company_name_desc","Contact company or organization"),icon:vs.jsx(jb,{className:"w-4 h-4"}),category:"contact"},{value:"date",label:e("variables.current_date","Current Date"),description:e("variables.current_date_desc","Today's date"),icon:vs.jsx(Nb,{className:"w-4 h-4"}),category:"system"},{value:"time",label:e("variables.current_time","Current Time"),description:e("variables.current_time_desc","Current time"),icon:vs.jsx(Nb,{className:"w-4 h-4"}),category:"system"}];function cTe({textareaRef:e,value:t,onChange:n,customVariables:a=[],className:r=""}){const[s,i]=cs.useState(!1),[o,l]=cs.useState(""),[c,d]=cs.useState(0),{t:u}=mk(),f=[...lTe(u),...a.map((e=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1),description:u("variables.custom_variable_desc",`Custom variable: ${e}`,{variable:e}),icon:vs.jsx(Qw,{className:"w-4 h-4"}),category:"custom"})))].filter((e=>e.label.toLowerCase().includes(o.toLowerCase())||e.value.toLowerCase().includes(o.toLowerCase())||e.description.toLowerCase().includes(o.toLowerCase()))).reduce(((e,t)=>{const n=t.category;return e[n]||(e[n]=[]),e[n].push(t),e}),{});cs.useEffect((()=>{const t=e.current;if(!t)return;const n=()=>{d(t.selectionStart)};return t.addEventListener("selectionchange",n),t.addEventListener("click",n),t.addEventListener("keyup",n),()=>{t.removeEventListener("selectionchange",n),t.removeEventListener("click",n),t.removeEventListener("keyup",n)}}),[e]);cs.useEffect((()=>{const n=e.current;if(!n)return;const a=()=>{const e=n.selectionStart;t.substring(0,e).endsWith("{{")&&i(!0)};return n.addEventListener("input",a),()=>n.removeEventListener("input",a)}),[t,e]);const m=e=>{switch(e){case"contact":return vs.jsx(uj,{className:"w-4 h-4"});case"custom":return vs.jsx(Qw,{className:"w-4 h-4"});case"system":return vs.jsx(rw,{className:"w-4 h-4"});default:return vs.jsx(aj,{className:"w-4 h-4"})}},p=e=>{switch(e){case"contact":return u("variables.category.contact","Contact Information");case"custom":return u("variables.category.custom","Custom Variables");case"system":return u("variables.category.system","System Variables");default:return u("variables.category.other","Other")}};return vs.jsxs("div",{className:`flex items-center gap-2 ${r}`,children:[vs.jsxs(r6,{open:s,onOpenChange:i,children:[vs.jsx(s6,{asChild:!0,children:vs.jsxs(lk,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[vs.jsx(mj,{className:"w-4 h-4"}),u("variables.insert_variable","Insert Variable")]})}),vs.jsx(i6,{className:"w-80 p-0",align:"start",children:vs.jsxs(c8,{children:[vs.jsx(d8,{placeholder:u("variables.search_placeholder","Search variables..."),value:o,onValueChange:l}),vs.jsxs(u8,{children:[vs.jsx(f8,{children:u("variables.no_variables_found","No variables found.")}),Object.entries(f).map((([a,r])=>vs.jsx(m8,{heading:vs.jsxs("div",{className:"flex items-center gap-2",children:[m(a),p(a)]}),children:r.map((a=>vs.jsx(p8,{value:a.value,onSelect:()=>(a=>{const r=e.current;if(!r)return;const s=r.selectionStart,o=r.selectionEnd,c=`{{${a}}}`,d=t.substring(0,s)+c+t.substring(o);n(d),setTimeout((()=>{const e=s+c.length;r.setSelectionRange(e,e),r.focus()}),0),i(!1),l("")})(a.value),className:"flex items-center gap-3 p-3",children:vs.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.icon,vs.jsxs("div",{className:"flex-1",children:[vs.jsx("div",{className:"font-medium",children:a.label}),vs.jsx("div",{className:"text-sm text-muted-foreground",children:a.description})]}),vs.jsx(dk,{variant:"secondary",className:"text-xs",children:`{{${a.value}}}`})]})},a.value)))},a)))]})]})})]}),vs.jsxs("div",{className:"text-sm text-muted-foreground",children:[u("variables.help_text","Use variables like")," ",vs.jsx(dk,{variant:"outline",className:"text-xs",children:"{{name}}"})," ",u("variables.for_personalization","for personalization")]})]})}const dTe=["general","marketing","support","notification","welcome","follow-up","promotional"],uTe=10485760;function fTe({isOpen:e,onClose:t,onTemplateCreated:n}){const[a,r]=cs.useState({name:"",description:"",category:"general",content:""}),[s,i]=cs.useState([]),[o,l]=cs.useState(!1),[c,d]=cs.useState({}),u=cs.useRef(null),f=cs.useRef(null),{toast:m}=Fy(),{t:p}=mk();ds.useEffect((()=>{e&&(r({name:"",description:"",category:"general",content:""}),i([]),d({}))}),[e]);const h=e=>{const t=e.type.toLowerCase();return t.startsWith("image/")?"image":t.startsWith("video/")?"video":t.startsWith("audio/")?"audio":"document"},g=e=>{switch(e){case"image":return vs.jsx(iw,{className:"w-4 h-4"});case"video":return vs.jsx(pj,{className:"w-4 h-4"});case"audio":return vs.jsx(ww,{className:"w-4 h-4"});default:return vs.jsx(Zb,{className:"w-4 h-4"})}},x=e=>{if(e.size>uTe)return p("templates.create.file_size_error","File size must be less than 10MB");const t=h(e),n={image:["image/jpeg","image/png","image/webp"],video:["video/mp4","video/3gpp"],audio:["audio/mpeg","audio/aac","audio/ogg"],document:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]};return"image"!==t||n.image.includes(e.type)?"video"!==t||n.video.includes(e.type)?"audio"!==t||n.audio.includes(e.type)?"document"!==t||n.document.includes(e.type)?null:p("templates.create.document_type_error","Only PDF, DOC, and DOCX documents are allowed"):p("templates.create.audio_type_error","Only MP3, AAC, and OGG audio files are allowed"):p("templates.create.video_type_error","Only MP4 and 3GP videos are allowed"):p("templates.create.image_type_error","Only JPEG, PNG, and WebP images are allowed")};return vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[vs.jsx(CB,{children:vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx(Zb,{className:"w-5 h-5"}),p("templates.create.title","Create Template")]})}),vs.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),a.name.trim())if(a.content.trim()){l(!0);try{const e=s.length>0?await(async()=>{const e=[];for(let n=0;n<s.length;n++){const a=s[n],r=new FormData;r.append("media",a.file);try{d((e=>({...e,[n]:0})));const t=await fetch("/api/templates/upload-media",{method:"POST",body:r});if(!t.ok)throw new Error(p("templates.create.upload_failed","Upload failed"));const a=await t.json();e.push(a.url),d((e=>({...e,[n]:100})))}catch(t){throw new Error(p("templates.create.upload_file_failed",`Failed to upload ${a.file.name}`,{filename:a.file.name}))}}return e})():[],r=await fetch("/api/campaigns/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,mediaUrls:e})}),i=await r.json();if(!i.success)throw new Error(i.error);m({title:p("common.success","Success"),description:p("templates.create.success","Template created successfully")}),n(i.data),t()}catch(r){m({title:p("common.error","Error"),description:p("templates.create.failed","Failed to create template"),variant:"destructive"})}finally{l(!1)}}else m({title:p("common.error","Error"),description:p("templates.create.content_required","Please enter template content"),variant:"destructive"});else m({title:p("common.error","Error"),description:p("templates.create.name_required","Please enter a template name"),variant:"destructive"})},className:"space-y-6",children:[vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"name",children:p("templates.create.name_label","Template Name")}),vs.jsx(LB,{id:"name",value:a.name,onChange:e=>r((t=>({...t,name:e.target.value}))),placeholder:p("templates.create.name_placeholder","e.g., Welcome Message"),required:!0})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"category",children:p("templates.create.category_label","Category")}),vs.jsxs(ZU,{value:a.category,onValueChange:e=>r((t=>({...t,category:e}))),children:[vs.jsx(tW,{children:vs.jsx(eW,{})}),vs.jsx(rW,{children:dTe.map((e=>vs.jsx(sW,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))})]})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"description",children:p("templates.create.description_label","Description (Optional)")}),vs.jsx(TB,{id:"description",value:a.description,onChange:e=>r((t=>({...t,description:e.target.value}))),placeholder:p("templates.create.description_placeholder","Describe this template..."),rows:2})]})]}),vs.jsx(R$,{}),vs.jsx("div",{className:"space-y-4",children:vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"content",children:p("templates.create.content_label","Template Content")}),vs.jsx(TB,{ref:f,id:"content",value:a.content,onChange:e=>r((t=>({...t,content:e.target.value}))),placeholder:p("templates.create.content_placeholder","Enter your template content. Click 'Insert Variable' to add personalization..."),rows:6,required:!0}),vs.jsx("div",{className:"mt-2",children:vs.jsx(cTe,{textareaRef:f,value:a.content,onChange:e=>r((t=>({...t,content:e}))),customVariables:["company","position","location","industry"]})})]})}),vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx(EB,{children:p("templates.create.media_files_label","Media Files (Optional)")}),vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=u.current)?void 0:e.click()},className:"flex items-center gap-2",children:[vs.jsx(sj,{className:"w-4 h-4"}),p("templates.create.add_media","Add Media")]})]}),vs.jsx("input",{ref:u,type:"file",multiple:!0,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx",onChange:e=>{const t=Array.from(e.target.files||[]);for(const n of t){const e=x(n);if(e){m({title:p("templates.create.invalid_file","Invalid File"),description:e,variant:"destructive"});continue}const t={file:n,url:URL.createObjectURL(n),type:h(n)};i((e=>[...e,t]))}u.current&&(u.current.value="")},className:"hidden"}),s.length>0&&vs.jsx("div",{className:"space-y-2",children:s.map(((e,t)=>vs.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[g(e.type),vs.jsxs("div",{className:"flex-1",children:[vs.jsx("p",{className:"text-sm font-medium",children:e.file.name}),vs.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.type," • ",(e.file.size/1024/1024).toFixed(2)," MB"]}),void 0!==c[t]&&vs.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-1",children:vs.jsx("div",{className:"bg-primary h-1 rounded-full transition-all",style:{width:`${c[t]}%`}})})]}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{i((t=>{const n=[...t];return URL.revokeObjectURL(n[e].url),n.splice(e,1),n}))})(t),children:vs.jsx(yj,{className:"w-4 h-4"})})]},t)))}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:p("templates.create.supported_files","Supported: Images (JPEG, PNG, WebP), Videos (MP4, 3GP), Audio (MP3, AAC, OGG), Documents (PDF, DOC, DOCX). Max 10MB per file.")})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:t,children:p("common.cancel","Cancel")}),vs.jsxs(lk,{type:"submit",disabled:o,children:[o&&vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),p("templates.create.create_button","Create Template")]})]})]})]})})}function mTe({isOpen:e,onClose:t,segmentId:n,onSegmentUpdated:a}){const[r,s]=cs.useState({name:"",description:""}),[i,o]=cs.useState({tags:[],created_after:"",created_before:""}),[l,c]=cs.useState(""),[d,u]=cs.useState(null),[f,m]=cs.useState([]),[p,h]=cs.useState(!1),[g,x]=cs.useState([]),[y,v]=cs.useState([]),[b,w]=cs.useState(!1),[j,N]=cs.useState(!1),[C,S]=cs.useState(!1),[k,M]=cs.useState(!1),[_,I]=cs.useState(null),{toast:A}=Fy(),{t:E}=mk(),L=cs.useRef(null);cs.useEffect((()=>{e&&n&&T()}),[e,n]);const T=async()=>{N(!0);try{const e=await fetch(`/api/campaigns/segments/${n}`),t=await e.json();if(!t.success)throw new Error(t.error);{const e=t.data;I(e),s({name:e.name,description:e.description||""});const n=e.criteria||{tags:[]};o(n),n.excludedContactIds&&n.excludedContactIds.length>0&&x(n.excludedContactIds),u(e.contactCount),(n.tags.length>0||n.created_after||n.created_before)&&D(n)}}catch(e){A({title:E("common.error","Error"),description:E("segments.edit.load_failed","Failed to load segment"),variant:"destructive"}),t()}finally{N(!1)}},D=cs.useCallback((e=>{L.current&&clearTimeout(L.current),L.current=setTimeout((async()=>{S(!0);try{const t=await fetch("/api/campaigns/segments/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({criteria:e,includeDetails:!0,limit:50})}),n=await t.json();if(n.success&&(u(n.data.count),m(n.data.contacts||[]),h(n.data.hasMore||!1),g.length>0&&0===y.length)){const e=n.data.contacts.filter((e=>g.includes(e.id)));v(e)}}catch(t){u(null),m([]),h(!1)}finally{S(!1)}}),500)}),[g.length,y.length]);cs.useEffect((()=>{e&&(i.tags.length>0||i.created_after||i.created_before)?D(i):(u(null),m([]),h(!1))}),[i,e,D]),cs.useEffect((()=>()=>{L.current&&clearTimeout(L.current)}),[]);const P=e=>{if(!e)return!1;return e.replace(/[^0-9]/g,"").length<=14},O=f.filter((e=>!g.includes(e.id)&&P(e.phone))),R=f.filter((e=>!P(e.phone))),z=null!==d?Math.max(0,d-g.length-R.length):null,F=()=>{l.trim()&&!i.tags.includes(l.trim())&&(o((e=>({...e,tags:[...e.tags,l.trim()]}))),c(""))};return j?vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsx(NB,{className:"sm:max-w-[600px]",children:vs.jsxs("div",{className:"flex items-center justify-center py-12",children:[vs.jsx(uw,{className:"h-8 w-8 animate-spin"}),vs.jsx("span",{className:"ml-2",children:E("segments.edit.loading_segment","Loading segment...")})]})})}):vs.jsxs(vs.Fragment,{children:[vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[vs.jsx(CB,{children:vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx(fj,{className:"w-5 h-5"}),E("segments.edit.title","Edit Contact Segment")]})}),vs.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r.name.trim()){w(!0);try{const e=await fetch(`/api/campaigns/segments/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.name,description:r.description,criteria:{...i,excludedContactIds:g},excludedContactIds:g})}),l=await e.json();if(!l.success)throw new Error(l.error);A({title:E("common.success","Success"),description:E("segments.edit.update_success","Segment updated successfully")}),a(l.data),t(),s({name:"",description:""}),o({tags:[],created_after:"",created_before:""}),c(""),u(null),m([]),h(!1),x([]),v([]),I(null)}catch(l){A({title:E("common.error","Error"),description:E("segments.edit.update_failed","Failed to update segment"),variant:"destructive"})}finally{w(!1)}}else A({title:E("segments.edit.validation_error","Validation Error"),description:E("segments.edit.name_required","Segment name is required"),variant:"destructive"})},className:"space-y-6",children:[vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"name",children:E("segments.edit.name_label","Segment Name")}),vs.jsx(LB,{id:"name",value:r.name,onChange:e=>s((t=>({...t,name:e.target.value}))),placeholder:E("segments.edit.name_placeholder","e.g., VIP Customers, New Leads"),required:!0})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"description",children:E("segments.edit.description_label","Description (Optional)")}),vs.jsx(TB,{id:"description",value:r.description,onChange:e=>s((t=>({...t,description:e.target.value}))),placeholder:E("segments.edit.description_placeholder","Describe this segment..."),rows:2})]})]}),vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("h3",{className:"text-lg font-medium",children:E("segments.edit.filter_criteria_title","Filter Criteria")}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{children:E("segments.edit.contact_tags_label","Contact Tags")}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(LB,{value:l,onChange:e=>c(e.target.value),placeholder:E("segments.edit.tag_placeholder","Add a tag..."),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),F())}}),vs.jsx(lk,{type:"button",onClick:F,size:"sm",children:vs.jsx(Iw,{className:"w-4 h-4"})})]}),i.tags.length>0&&vs.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i.tags.map((e=>vs.jsxs(dk,{variant:"secondary",className:"flex items-center gap-1",children:[vs.jsx(Qw,{className:"w-3 h-3"}),e,vs.jsx("button",{type:"button",onClick:t=>{var n;t.preventDefault(),t.stopPropagation(),n=e,o((e=>({...e,tags:e.tags.filter((e=>e!==n))})))},className:"ml-1 hover:text-destructive",children:vs.jsx(yj,{className:"w-3 h-3"})})]},e)))})]}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"created_after",children:E("segments.edit.created_after_label","Created After")}),vs.jsx(LB,{id:"created_after",type:"date",value:i.created_after,onChange:e=>o((t=>({...t,created_after:e.target.value})))})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"created_before",children:E("segments.edit.created_before_label","Created Before")}),vs.jsx(LB,{id:"created_before",type:"date",value:i.created_before,onChange:e=>o((t=>({...t,created_before:e.target.value})))})]})]})]}),vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[vs.jsx(fj,{className:"w-4 h-4"}),E("segments.edit.contact_preview_title","Contact Preview")]}),null!==z&&vs.jsxs("div",{className:"text-sm text-muted-foreground",children:[p?vs.jsxs(vs.Fragment,{children:[E("segments.edit.showing_first_50","Showing first 50 of")," ",vs.jsx("strong",{children:z})," ",E("segments.edit.contacts","contacts")]}):vs.jsxs(vs.Fragment,{children:[vs.jsx("strong",{children:z})," ",E("segments.edit.contacts_match_criteria","contacts match these criteria")]}),g.length>0&&vs.jsxs("span",{className:"text-orange-600 ml-2",children:["(",g.length," ",E("segments.edit.excluded","excluded"),")"]})]})]}),C?vs.jsx("div",{className:"flex items-center justify-center py-8",children:vs.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[vs.jsx(uw,{className:"w-4 h-4 animate-spin"}),E("segments.edit.loading_preview","Loading contact preview...")]})}):O.length>0?vs.jsx("div",{className:"border rounded-lg max-h-80 overflow-y-auto",children:vs.jsxs(EY,{children:[vs.jsx(LY,{children:vs.jsxs(DY,{children:[vs.jsx(PY,{children:E("segments.edit.table.contact_name","Contact Name")}),vs.jsx(PY,{children:E("segments.edit.table.phone","Phone")}),vs.jsx(PY,{children:E("segments.edit.table.email","Email")}),vs.jsx(PY,{children:E("segments.edit.table.tags","Tags")}),vs.jsx(PY,{children:E("segments.edit.table.created","Created")}),vs.jsx(PY,{children:E("segments.edit.table.last_activity","Last Activity")}),vs.jsx(PY,{className:"w-20",children:E("segments.edit.table.actions","Actions")})]})}),vs.jsx(TY,{children:O.map((e=>vs.jsxs(DY,{children:[vs.jsx(OY,{className:"font-medium",children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(fj,{className:"w-4 h-4 text-muted-foreground"}),e.name||E("segments.edit.table.unknown","Unknown")]})}),vs.jsx(OY,{children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Mw,{className:"w-4 h-4 text-muted-foreground"}),e.phone]})}),vs.jsx(OY,{children:e.email?vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(hw,{className:"w-4 h-4 text-muted-foreground"}),e.email]}):vs.jsx("span",{className:"text-muted-foreground",children:"-"})}),vs.jsx(OY,{children:e.tags&&e.tags.length>0?vs.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,2).map(((e,t)=>vs.jsx(dk,{variant:"outline",className:"text-xs",children:e},t))),e.tags.length>2&&vs.jsxs(dk,{variant:"outline",className:"text-xs",children:["+",e.tags.length-2]})]}):vs.jsx("span",{className:"text-muted-foreground",children:"-"})}),vs.jsx(OY,{children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Nb,{className:"w-4 h-4 text-muted-foreground"}),vs.jsx("span",{className:"text-sm",children:new Date(e.createdAt).toLocaleDateString()})]})}),vs.jsx(OY,{children:e.lastActivity?vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(xb,{className:"w-4 h-4 text-green-500"}),vs.jsx("span",{className:"text-sm",children:new Date(e.lastActivity).toLocaleDateString()})]}):vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(xb,{className:"w-4 h-4 text-muted-foreground"}),vs.jsx("span",{className:"text-sm text-muted-foreground",children:E("segments.edit.table.no_activity","No activity")})]})}),vs.jsx(OY,{children:vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{const t=f.find((t=>t.id===e));x((t=>[...t,e])),t&&v((e=>[...e,t])),A({title:E("segments.edit.contact_excluded_title","Contact excluded"),description:E("segments.edit.contact_excluded_desc","Contact has been removed from this segment preview")})})(e.id)},className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",title:E("segments.edit.exclude_contact_tooltip","Exclude contact from segment"),children:vs.jsx(Zw,{className:"w-4 h-4"})})})]},e.id)))})]})}):f.length>0&&0===O.length?vs.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[vs.jsx(fj,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),vs.jsx("p",{children:E("segments.edit.all_contacts_excluded","All contacts have been excluded from this segment")}),vs.jsx("p",{className:"text-sm",children:g.length>0&&vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),x([]),v([])},className:"mt-2",children:[vs.jsx(rj,{className:"w-4 h-4 mr-2"}),E("segments.edit.restore_all_contacts","Restore all contacts")]})})]}):0===z?vs.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[vs.jsx(fj,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),vs.jsx("p",{children:E("segments.edit.no_contacts_match","No contacts match the current criteria")}),vs.jsx("p",{className:"text-sm",children:E("segments.edit.try_adjusting_filters","Try adjusting your filters")})]}):vs.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[vs.jsx(fj,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),vs.jsx("p",{children:E("segments.edit.add_filter_criteria","Add filter criteria to preview contacts")}),vs.jsx("p",{className:"text-sm",children:E("segments.edit.select_tags_or_dates","Select tags or date ranges to see matching contacts")})]}),g.length>0&&vs.jsxs("div",{className:"mt-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsxs("h5",{className:"text-sm font-medium text-orange-800",children:[E("segments.edit.excluded_contacts_title","Excluded Contacts")," (",g.length,")"]}),vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),x([]),v([])},className:"text-orange-700 border-orange-300 hover:bg-orange-100",children:[vs.jsx(rj,{className:"w-4 h-4 mr-1"}),E("segments.edit.restore_all","Restore All")]})]}),vs.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((e=>vs.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded border border-orange-200",children:[vs.jsx("span",{className:"text-sm text-orange-800",children:e.name||e.phone||`Contact ${e.id}`}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",onClick:t=>{var n;t.preventDefault(),t.stopPropagation(),n=e.id,x((e=>e.filter((e=>e!==n)))),v((e=>e.filter((e=>e.id!==n)))),A({title:E("segments.edit.contact_restored_title","Contact restored"),description:E("segments.edit.contact_restored_desc","Contact has been added back to the segment preview")})},className:"h-5 w-5 p-0 text-orange-600 hover:text-orange-800",title:E("segments.edit.restore_contact_tooltip","Restore contact"),children:vs.jsx(rj,{className:"w-3 h-3"})})]},e.id)))})]})]}),vs.jsxs(SB,{className:"flex justify-between",children:[vs.jsxs(lk,{type:"button",variant:"destructive",onClick:()=>M(!0),disabled:b,children:[vs.jsx(nj,{className:"w-4 h-4 mr-2"}),E("segments.edit.delete_button","Delete Segment")]}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:t,disabled:b,children:E("common.cancel","Cancel")}),vs.jsx(lk,{type:"submit",disabled:b,children:b?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),E("segments.edit.updating","Updating...")]}):E("segments.edit.update_button","Update Segment")})]})]})]})]})}),vs.jsx(x7,{open:k,onOpenChange:M,children:vs.jsxs(w7,{children:[vs.jsxs(j7,{children:[vs.jsx(C7,{children:E("segments.edit.delete_confirm_title","Delete Segment")}),vs.jsxs(S7,{children:[E("segments.edit.delete_confirm_message","Are you sure you want to delete this segment? This action cannot be undone."),_&&vs.jsxs("div",{className:"mt-2 p-2 bg-muted rounded text-sm",children:[vs.jsx("strong",{children:_.name})," (",_.contactCount," ",E("segments.edit.contacts","contacts"),")"]})]})]}),vs.jsxs(N7,{children:[vs.jsx(M7,{children:E("common.cancel","Cancel")}),vs.jsx(k7,{onClick:async()=>{w(!0);try{const e=await fetch(`/api/campaigns/segments/${n}`,{method:"DELETE"}),r=await e.json();if(!r.success)throw new Error(r.error);A({title:E("common.success","Success"),description:E("segments.edit.delete_success","Segment deleted successfully")}),a(null),t()}catch(e){A({title:E("common.error","Error"),description:(e instanceof Error?e.message:null)||E("segments.edit.delete_failed","Failed to delete segment"),variant:"destructive"})}finally{w(!1),M(!1)}},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:E("segments.edit.delete_confirm_button","Delete Segment")})]})]})})]})}function pTe({isOpen:e,onClose:t,templateId:n,onTemplateUpdated:a}){const[r,s]=cs.useState({name:"",description:"",category:"general",content:""}),[i,o]=cs.useState([]),[l,c]=cs.useState(!1),[d,u]=cs.useState(!1),[f,m]=cs.useState({}),[p,h]=cs.useState(!1),[g,x]=cs.useState(null);cs.useRef(null);const y=cs.useRef(null),{toast:v}=Fy(),{t:b}=mk();cs.useEffect((()=>{e&&n&&w()}),[e,n]);const w=async()=>{u(!0);try{const e=await fetch(`/api/campaigns/templates/${n}`),t=await e.json();if(!t.success)throw new Error(t.error);{const e=t.data;x(e),s({name:e.name,description:e.description||"",category:e.category,content:e.content});const n=(e.mediaUrls||[]).map(((e,t)=>({id:`existing-${t}`,file:null,type:j(e),url:e,name:e.split("/").pop()||"media",size:0})));o(n)}}catch(e){v({title:b("common.error","Error"),description:b("templates.edit.load_failed","Failed to load template"),variant:"destructive"}),t()}finally{u(!1)}},j=e=>{var t;const n=null==(t=e.split(".").pop())?void 0:t.toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(n||"")?"image":["mp4","avi","mov","wmv"].includes(n||"")?"video":["mp3","wav","ogg","m4a"].includes(n||"")?"audio":"document"};return d?vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsx(NB,{className:"sm:max-w-[600px]",children:vs.jsxs("div",{className:"flex items-center justify-center py-12",children:[vs.jsx(uw,{className:"h-8 w-8 animate-spin"}),vs.jsx("span",{className:"ml-2",children:b("templates.edit.loading_template","Loading template...")})]})})}):vs.jsxs(vs.Fragment,{children:[vs.jsx(yB,{open:e,onOpenChange:t,children:vs.jsxs(NB,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[vs.jsx(CB,{children:vs.jsxs(kB,{className:"flex items-center gap-2",children:[vs.jsx(Zb,{className:"w-5 h-5"}),b("templates.edit.title","Edit Template")]})}),vs.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r.name.trim()&&r.content.trim()){c(!0);try{const e=i.map((e=>e.url)),l=await fetch(`/api/campaigns/templates/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.name,description:r.description,category:r.category,content:r.content,mediaUrls:e,channelType:"whatsapp",isActive:!0})}),c=await l.json();if(!c.success)throw new Error(c.error);v({title:b("common.success","Success"),description:b("templates.edit.update_success","Template updated successfully")}),a(c.data),t(),s({name:"",description:"",category:"general",content:""}),o([]),m({}),x(null)}catch(l){v({title:b("common.error","Error"),description:b("templates.edit.update_failed","Failed to update template"),variant:"destructive"})}finally{c(!1)}}else v({title:b("templates.edit.validation_error","Validation Error"),description:b("templates.edit.name_content_required","Name and content are required"),variant:"destructive"})},className:"space-y-6",children:[vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"name",children:b("templates.edit.name_label","Template Name")}),vs.jsx(LB,{id:"name",value:r.name,onChange:e=>s((t=>({...t,name:e.target.value}))),placeholder:b("templates.edit.name_placeholder","e.g., Welcome Message, Promotion Alert"),required:!0})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"description",children:b("templates.edit.description_label","Description (Optional)")}),vs.jsx(TB,{id:"description",value:r.description,onChange:e=>s((t=>({...t,description:e.target.value}))),placeholder:b("templates.edit.description_placeholder","Describe this template..."),rows:2})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"category",children:b("templates.edit.category_label","Category")}),vs.jsxs(ZU,{value:r.category,onValueChange:e=>s((t=>({...t,category:e}))),children:[vs.jsx(tW,{children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"general",children:b("templates.edit.category.general","General")}),vs.jsx(sW,{value:"marketing",children:b("templates.edit.category.marketing","Marketing")}),vs.jsx(sW,{value:"support",children:b("templates.edit.category.support","Support")}),vs.jsx(sW,{value:"notification",children:b("templates.edit.category.notification","Notification")}),vs.jsx(sW,{value:"welcome",children:b("templates.edit.category.welcome","Welcome")})]})]})]})]}),vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"content",children:b("templates.edit.content_label","Message Content")}),vs.jsx(TB,{ref:y,id:"content",value:r.content,onChange:e=>s((t=>({...t,content:e.target.value}))),placeholder:b("templates.edit.content_placeholder","Enter your message content here... Click 'Insert Variable' to add personalization..."),rows:6,required:!0}),vs.jsx("div",{className:"mt-2",children:vs.jsx(cTe,{textareaRef:y,value:r.content,onChange:e=>s((t=>({...t,content:e}))),customVariables:["company","position","location","industry"]})})]}),i.length>0&&vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{children:b("templates.edit.attached_media","Attached Media")}),vs.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.map((e=>vs.jsx("div",{className:"relative border rounded-lg p-2",children:vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[vs.jsx(dk,{variant:"secondary",className:"text-xs",children:e.type}),vs.jsx("span",{className:"text-sm truncate",children:e.name})]}),vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",onClick:()=>{return t=e.id,void o((e=>e.filter((e=>e.id!==t))));var t},className:"h-6 w-6 p-0",children:vs.jsx(yj,{className:"h-3 w-3"})})]})},e.id)))})]})]}),vs.jsxs(SB,{className:"flex justify-between",children:[vs.jsxs(lk,{type:"button",variant:"destructive",onClick:()=>h(!0),disabled:l,children:[vs.jsx(nj,{className:"w-4 h-4 mr-2"}),b("templates.edit.delete_button","Delete Template")]}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:t,disabled:l,children:b("common.cancel","Cancel")}),vs.jsx(lk,{type:"submit",disabled:l,children:l?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),b("templates.edit.updating","Updating...")]}):b("templates.edit.update_button","Update Template")})]})]})]})]})}),vs.jsx(x7,{open:p,onOpenChange:h,children:vs.jsxs(w7,{children:[vs.jsxs(j7,{children:[vs.jsx(C7,{children:b("templates.edit.delete_confirm_title","Delete Template")}),vs.jsxs(S7,{children:[b("templates.edit.delete_confirm_message","Are you sure you want to delete this template? This action cannot be undone."),g&&vs.jsx("div",{className:"mt-2 p-2 bg-muted rounded text-sm",children:vs.jsx("strong",{children:g.name})})]})]}),vs.jsxs(N7,{children:[vs.jsx(M7,{children:b("common.cancel","Cancel")}),vs.jsx(k7,{onClick:async()=>{c(!0);try{const e=await fetch(`/api/campaigns/templates/${n}`,{method:"DELETE"}),r=await e.json();if(!r.success)throw new Error(r.error);v({title:b("common.success","Success"),description:b("templates.edit.delete_success","Template deleted successfully")}),a(null),t()}catch(e){v({title:b("common.error","Error"),description:(e instanceof Error?e.message:null)||b("templates.edit.delete_failed","Failed to delete template"),variant:"destructive"})}finally{c(!1),h(!1)}},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:b("templates.edit.delete_confirm_button","Delete Template")})]})]})})]})}function hTe(){const[e,t]=fx(),n=dx(),a=e.includes("/edit"),r=a?parseInt(n.id||"0"):null,{t:s}=mk(),i=[{id:"basic",title:s("campaigns.builder.steps.basic","Basic Info"),icon:vw},{id:"audience",title:s("campaigns.builder.steps.audience","Audience"),icon:fj},{id:"content",title:s("campaigns.builder.steps.content","Content"),icon:vw},{id:"settings",title:s("campaigns.builder.steps.settings","Settings"),icon:Fw},{id:"antiban",title:s("campaigns.builder.steps.antiban","Anti-Ban"),icon:Uw},{id:"review",title:s("campaigns.builder.steps.review","Review"),icon:Qb}],[o,l]=cs.useState(0),[c,d]=cs.useState({name:"",description:"",content:"",mediaUrls:[],channelType:"whatsapp",campaignType:"immediate",rateLimitSettings:{messages_per_minute:10,messages_per_hour:200,messages_per_day:1e3,delay_between_messages:6,humanization_enabled:!0},antiBanSettings:{enabled:!0,mode:"moderate",businessHoursOnly:!1,respectWeekends:!1,randomizeDelay:!0,minDelay:3,maxDelay:15,accountRotation:!0,cooldownPeriod:30,messageVariation:!1}}),[u,f]=cs.useState([]),[m,p]=cs.useState([]),[h,g]=cs.useState(null),[x,y]=cs.useState(!1),[v,b]=cs.useState(!1),[w,j]=cs.useState(!1),[N,C]=cs.useState(null),[S,k]=cs.useState(null),[M,_]=cs.useState(!1),I=cs.useRef(null),{toast:A}=Fy(),{data:E=[],isLoading:L}=function(){const{company:e}=xT();return Sy({queryKey:["/api/channel-connections",null==e?void 0:e.id],staleTime:12e4,refetchOnWindowFocus:!0,refetchOnReconnect:!0})}(),T=E.filter((e=>"whatsapp_unofficial"===e.channelType&&"active"===e.status));cs.useEffect((()=>{D(),P(),a&&r&&O(r)}),[a,r]),cs.useEffect((()=>{c.content&&R()}),[c.content]);const D=async()=>{try{const e=await fetch("/api/campaigns/templates"),t=await e.json();t.success&&f(t.data)}catch(e){}},P=async()=>{try{const e=await fetch("/api/campaigns/segments"),t=await e.json();t.success&&p(t.data)}catch(e){}},O=async e=>{try{const t=await fetch(`/api/campaigns/${e}`),n=await t.json();if(n.success){const e=n.data;d({name:e.name||"",description:e.description||"",content:e.content||"",mediaUrls:e.mediaUrls||[],channelType:e.channelType||"whatsapp_unofficial",channelId:e.channelId,channelIds:e.channelIds||[],templateId:e.templateId,segmentId:e.segmentId,campaignType:e.campaignType||"immediate",scheduledAt:e.scheduledAt?new Date(e.scheduledAt).toISOString().slice(0,16):"",rateLimitSettings:e.rateLimitSettings||{messages_per_minute:10,messages_per_hour:200,messages_per_day:1e3,delay_between_messages:6,humanization_enabled:!0},antiBanSettings:e.antiBanSettings||{enabled:!0,mode:"moderate",businessHoursOnly:!1,respectWeekends:!1,randomizeDelay:!0,minDelay:3,maxDelay:15,accountRotation:!0,cooldownPeriod:30,messageVariation:!1}})}}catch(t){A({title:s("common.error","Error"),description:s("campaigns.builder.messages.load_error","Failed to load campaign data"),variant:"destructive"})}},R=async()=>{try{const e=await fetch("/api/campaigns/validate-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:c.content})}),t=await e.json();t.success&&g(t.data)}catch(e){}},z=e=>{const t=u.find((t=>t.id===parseInt(e)));t&&d((e=>({...e,templateId:t.id,content:t.content,mediaUrls:t.mediaUrls||[]})))},F=e=>{d((t=>({...t,segmentId:parseInt(e)})))};return vs.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[vs.jsxs("div",{className:"flex items-center gap-4",children:[vs.jsx(lk,{variant:"outline",size:"sm",onClick:()=>t("/campaigns"),children:vs.jsx(yb,{className:"w-4 h-4"})}),vs.jsxs("div",{children:[vs.jsx("h1",{className:"text-2xl",children:a?s("campaigns.builder.header.edit","Edit Campaign"):s("campaigns.builder.header.create","Create Campaign")}),vs.jsx("p",{className:"text-muted-foreground",children:s("campaigns.builder.header.step_progress","Step {{current}} of {{total}}: {{title}}",{current:o+1,total:i.length,title:i[o].title})})]})]}),vs.jsx("div",{className:"flex items-center justify-between",children:i.map(((e,t)=>{const n=e.icon,a=t===o,r=t<o;return vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full border-2 "+(a||r?"border-primary bg-primary text-primary-foreground":"border-muted-foreground bg-background"),children:vs.jsx(n,{className:"w-4 h-4"})}),vs.jsx("span",{className:"ml-2 text-sm "+(a?"font-medium":""),children:e.title}),t<i.length-1&&vs.jsx("div",{className:"w-12 h-px bg-muted-foreground mx-4"})]},e.id)}))}),vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsx(ak,{children:i[o].title})}),vs.jsx(sk,{children:(()=>{var e,t,n,a,r,l,f,p;switch(i[o].id){case"basic":return vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"name",children:s("campaigns.builder.basic.name_label","Campaign Name")}),vs.jsx(LB,{id:"name",value:c.name,onChange:e=>d((t=>({...t,name:e.target.value}))),placeholder:s("campaigns.builder.basic.name_placeholder","Enter campaign name")})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"description",children:s("campaigns.builder.basic.description_label","Description")}),vs.jsx(TB,{id:"description",value:c.description,onChange:e=>d((t=>({...t,description:e.target.value}))),placeholder:s("campaigns.builder.basic.description_placeholder","Describe your campaign"),rows:3})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"channelIds",children:s("campaigns.builder.basic.connections_label","WhatsApp Connections")}),vs.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s("campaigns.builder.basic.connections_description","Select multiple WhatsApp accounts for better distribution and anti-ban protection")}),L?vs.jsx("div",{className:"flex items-center justify-center p-4",children:vs.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):0===T.length?vs.jsxs("div",{className:"p-4 border border-dashed border-gray-300 rounded-lg text-center",children:[vs.jsx(vw,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),vs.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s("campaigns.builder.basic.no_connections","No WhatsApp connections available")}),vs.jsx("p",{className:"text-xs text-gray-500",children:s("campaigns.builder.basic.setup_connection","Please set up a WhatsApp connection in Settings > Channel Connections first")})]}):vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("div",{className:"border rounded-lg p-3 space-y-2 max-h-48 overflow-y-auto",children:T.map((e=>{var t,n;const a=(null==(t=c.channelIds)?void 0:t.includes(e.id))||c.channelId===e.id&&!(null==(n=c.channelIds)?void 0:n.length);return vs.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-muted rounded",children:[vs.jsx("input",{type:"checkbox",id:`connection-${e.id}`,checked:a,onChange:t=>{const n=t.target.checked;d((t=>{let a=t.channelIds||[];return n?a.includes(e.id)||(a=[...a,e.id]):a=a.filter((t=>t!==e.id)),{...t,channelIds:a,channelId:a.length>0?a[0]:void 0,channelType:"whatsapp_unofficial"}}))},className:"rounded border-gray-300 text-primary focus:ring-primary"}),vs.jsxs("label",{htmlFor:`connection-${e.id}`,className:"flex items-center gap-2 flex-1 cursor-pointer",children:[vs.jsx("i",{className:"ri-whatsapp-line text-green-600"}),vs.jsx("span",{className:"font-medium",children:e.accountName}),vs.jsx(dk,{variant:"secondary",className:"ml-auto",children:e.status})]})]},e.id)}))}),((null==(e=c.channelIds)?void 0:e.length)||0)>0&&vs.jsxs("div",{className:"text-sm text-muted-foreground",children:[vs.jsx("strong",{children:(null==(t=c.channelIds)?void 0:t.length)||0})," ",s("campaigns.builder.basic.accounts_selected","account(s) selected for distribution")]}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=T.map((e=>e.id));d((t=>({...t,channelIds:e,channelId:e[0],channelType:"whatsapp_unofficial"})))},children:s("campaigns.builder.basic.select_all","Select All")}),vs.jsx(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>{d((e=>({...e,channelIds:[],channelId:void 0})))},children:s("campaigns.builder.basic.clear_all","Clear All")})]})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"campaignType",children:s("campaigns.builder.basic.type_label","Campaign Type")}),vs.jsxs(ZU,{value:c.campaignType,onValueChange:e=>d((t=>({...t,campaignType:e}))),children:[vs.jsx(tW,{children:vs.jsx(eW,{})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"immediate",children:s("campaigns.builder.basic.type_immediate","Send Immediately")}),vs.jsx(sW,{value:"scheduled",children:s("campaigns.builder.basic.type_scheduled","Schedule for Later")}),vs.jsx(sW,{value:"drip",children:s("campaigns.builder.basic.type_drip","Drip Campaign")})]})]})]}),"scheduled"===c.campaignType&&vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"scheduledAt",children:s("campaigns.builder.basic.schedule_label","Scheduled Date & Time")}),vs.jsx(LB,{id:"scheduledAt",type:"datetime-local",value:c.scheduledAt,onChange:e=>d((t=>({...t,scheduledAt:e.target.value})))})]})]});case"audience":return vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsx(EB,{children:s("campaigns.builder.audience.segment_label","Select Audience Segment")}),vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>b(!0),className:"flex items-center gap-2",children:[vs.jsx(Iw,{className:"w-4 h-4"}),s("campaigns.builder.audience.create_segment","Create New Segment")]})]}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsxs(ZU,{value:null==(n=c.segmentId)?void 0:n.toString(),onValueChange:F,children:[vs.jsx(tW,{className:"flex-1",children:vs.jsx(eW,{placeholder:s("campaigns.builder.audience.segment_placeholder","Choose a segment")})}),vs.jsx(rW,{children:m.map((e=>vs.jsx(sW,{value:e.id.toString(),children:vs.jsxs("div",{className:"flex justify-between items-center w-full",children:[vs.jsx("span",{children:e.name}),vs.jsxs(dk,{variant:"secondary",className:"ml-2",children:[e.contactCount," ",s("campaigns.builder.audience.contacts","contacts")]})]})},e.id)))})]}),c.segmentId&&vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>C(c.segmentId),className:"flex items-center gap-2",children:[vs.jsx(Hw,{className:"w-4 h-4"}),s("common.edit","Edit")]})]})]}),c.segmentId&&vs.jsx(tk,{children:vs.jsx(sk,{className:"pt-4",children:(()=>{const e=m.find((e=>e.id===c.segmentId));return e?vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-medium",children:e.name}),vs.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),vs.jsxs("p",{className:"text-sm mt-2",children:[vs.jsx("strong",{children:e.contactCount})," ",s("campaigns.builder.audience.will_receive","contacts will receive this campaign")]})]}):null})()})})]});case"content":return vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{children:[vs.jsxs("div",{className:"flex items-center justify-between mb-2",children:[vs.jsx(EB,{children:s("campaigns.builder.content.template_label","Use Template (Optional)")}),vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>j(!0),className:"flex items-center gap-2",children:[vs.jsx(Iw,{className:"w-4 h-4"}),s("campaigns.builder.content.create_template","Create New Template")]})]}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsxs(ZU,{onValueChange:z,value:null==(a=c.templateId)?void 0:a.toString(),children:[vs.jsx(tW,{className:"flex-1",children:vs.jsx(eW,{placeholder:s("campaigns.builder.content.template_placeholder","Choose a template")})}),vs.jsx(rW,{children:u.map((e=>vs.jsxs(sW,{value:e.id.toString(),children:[e.name," (",e.category,")"]},e.id)))})]}),c.templateId&&vs.jsxs(lk,{type:"button",variant:"outline",size:"sm",onClick:()=>k(c.templateId),className:"flex items-center gap-2",children:[vs.jsx(Hw,{className:"w-4 h-4"}),s("common.edit","Edit")]})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"content",children:s("campaigns.builder.content.message_label","Message Content")}),vs.jsx(TB,{ref:I,id:"content",value:c.content,onChange:e=>d((t=>({...t,content:e.target.value}))),placeholder:s("campaigns.builder.content.message_placeholder","Enter your message content. Click 'Insert Variable' to add personalization..."),rows:6}),vs.jsx("div",{className:"mt-2",children:vs.jsx(cTe,{textareaRef:I,value:c.content,onChange:e=>d((t=>({...t,content:e}))),customVariables:["company","position","location","industry"]})})]}),h&&vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsxs(ak,{className:"flex items-center gap-2",children:[vs.jsx(nj,{className:"w-4 h-4"}),s("campaigns.builder.content.validation_title","Content Validation")]})}),vs.jsxs(sk,{children:[vs.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[vs.jsxs("span",{children:[s("campaigns.builder.content.validation_score","Score"),":"]}),vs.jsxs(dk,{variant:h.score>=80?"default":"destructive",children:[h.score,"/100"]})]}),h.issues.length>0&&vs.jsxs("div",{children:[vs.jsxs("p",{className:"text-sm font-medium mb-2",children:[s("campaigns.builder.content.validation_issues","Issues"),":"]}),vs.jsx("ul",{className:"text-sm space-y-1",children:h.issues.map(((e,t)=>vs.jsxs("li",{className:"flex items-start gap-2",children:[vs.jsx(nj,{className:"w-3 h-3 mt-0.5 text-yellow-500"}),e]},t)))})]})]})]})]});case"settings":return vs.jsx("div",{className:"space-y-4",children:vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsx(ak,{children:s("campaigns.builder.settings.rate_limiting_title","Rate Limiting & Anti-Ban Settings")})}),vs.jsxs(sk,{className:"space-y-4",children:[vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"messagesPerMinute",children:s("campaigns.builder.settings.messages_per_minute","Messages per Minute")}),vs.jsx(LB,{id:"messagesPerMinute",type:"number",value:c.rateLimitSettings.messages_per_minute,onChange:e=>d((t=>({...t,rateLimitSettings:{...t.rateLimitSettings,messages_per_minute:parseInt(e.target.value)}})))})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"messagesPerHour",children:s("campaigns.builder.settings.messages_per_hour","Messages per Hour")}),vs.jsx(LB,{id:"messagesPerHour",type:"number",value:c.rateLimitSettings.messages_per_hour,onChange:e=>d((t=>({...t,rateLimitSettings:{...t.rateLimitSettings,messages_per_hour:parseInt(e.target.value)}})))})]})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"delayBetweenMessages",children:s("campaigns.builder.settings.delay_between_messages","Delay Between Messages (seconds)")}),vs.jsx(LB,{id:"delayBetweenMessages",type:"number",value:c.rateLimitSettings.delay_between_messages,onChange:e=>d((t=>({...t,rateLimitSettings:{...t.rateLimitSettings,delay_between_messages:parseInt(e.target.value)}})))})]})]})]})});case"antiban":return vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsxs(ak,{className:"flex items-center gap-2",children:[vs.jsx(Uw,{className:"w-5 h-5"}),s("campaigns.builder.antiban.title","Anti-Ban Protection")]})}),vs.jsxs(sk,{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"antiBanEnabled",children:s("campaigns.builder.antiban.enable_label","Enable Anti-Ban Protection")}),vs.jsx("p",{className:"text-sm text-muted-foreground",children:s("campaigns.builder.antiban.enable_description","Automatically apply intelligent rate limiting and account rotation")})]}),vs.jsx(L4,{id:"antiBanEnabled",checked:c.antiBanSettings.enabled,onCheckedChange:e=>d((t=>({...t,antiBanSettings:{...t.antiBanSettings,enabled:e}})))})]}),c.antiBanSettings.enabled&&vs.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[vs.jsxs("div",{children:[vs.jsx(EB,{children:s("campaigns.builder.antiban.mode_label","Protection Mode")}),vs.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s("campaigns.builder.antiban.mode_description","Choose how aggressive the anti-ban protection should be")}),vs.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"conservative",label:s("campaigns.builder.antiban.mode_conservative","Conservative"),desc:s("campaigns.builder.antiban.mode_conservative_desc","Slowest, safest")},{value:"moderate",label:s("campaigns.builder.antiban.mode_moderate","Moderate"),desc:s("campaigns.builder.antiban.mode_moderate_desc","Balanced approach")},{value:"aggressive",label:s("campaigns.builder.antiban.mode_aggressive","Aggressive"),desc:s("campaigns.builder.antiban.mode_aggressive_desc","Faster, higher risk")}].map((e=>vs.jsxs(lk,{type:"button",variant:c.antiBanSettings.mode===e.value?"default":"outline",className:"h-auto p-3 flex flex-col items-center",onClick:()=>d((t=>({...t,antiBanSettings:{...t.antiBanSettings,mode:e.value}}))),children:[vs.jsx("span",{className:"font-medium",children:e.label}),vs.jsx("span",{className:"text-xs text-muted-foreground",children:e.desc})]},e.value)))})]}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"businessHoursOnly",children:s("campaigns.builder.antiban.business_hours_label","Business Hours Only")}),vs.jsx("p",{className:"text-sm text-muted-foreground",children:s("campaigns.builder.antiban.business_hours_desc","Send only during 9 AM - 6 PM")})]}),vs.jsx(L4,{id:"businessHoursOnly",checked:c.antiBanSettings.businessHoursOnly,onCheckedChange:e=>d((t=>({...t,antiBanSettings:{...t.antiBanSettings,businessHoursOnly:e}})))})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"respectWeekends",children:s("campaigns.builder.antiban.respect_weekends_label","Respect Weekends")}),vs.jsx("p",{className:"text-sm text-muted-foreground",children:s("campaigns.builder.antiban.respect_weekends_desc","Pause on weekends")})]}),vs.jsx(L4,{id:"respectWeekends",checked:c.antiBanSettings.respectWeekends,onCheckedChange:e=>d((t=>({...t,antiBanSettings:{...t.antiBanSettings,respectWeekends:e}})))})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"randomizeDelay",children:s("campaigns.builder.antiban.randomize_delays_label","Randomize Delays")}),vs.jsx("p",{className:"text-sm text-muted-foreground",children:s("campaigns.builder.antiban.randomize_delays_desc","Add human-like variance to message timing")})]}),vs.jsx(L4,{id:"randomizeDelay",checked:c.antiBanSettings.randomizeDelay,onCheckedChange:e=>d((t=>({...t,antiBanSettings:{...t.antiBanSettings,randomizeDelay:e}})))})]}),c.antiBanSettings.randomizeDelay&&vs.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"minDelay",children:s("campaigns.builder.antiban.min_delay_label","Min Delay (seconds)")}),vs.jsx(LB,{id:"minDelay",type:"number",min:"1",max:"60",value:c.antiBanSettings.minDelay,onChange:e=>d((t=>({...t,antiBanSettings:{...t.antiBanSettings,minDelay:parseInt(e.target.value)||3}})))})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"maxDelay",children:s("campaigns.builder.antiban.max_delay_label","Max Delay (seconds)")}),vs.jsx(LB,{id:"maxDelay",type:"number",min:"1",max:"300",value:c.antiBanSettings.maxDelay,onChange:e=>d((t=>({...t,antiBanSettings:{...t.antiBanSettings,maxDelay:parseInt(e.target.value)||15}})))})]})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"accountRotation",children:s("campaigns.builder.antiban.account_rotation_label","Smart Account Rotation")}),vs.jsx("p",{className:"text-sm text-muted-foreground",children:s("campaigns.builder.antiban.account_rotation_desc","Distribute messages across selected accounts")})]}),vs.jsx(L4,{id:"accountRotation",checked:c.antiBanSettings.accountRotation,onCheckedChange:e=>d((t=>({...t,antiBanSettings:{...t.antiBanSettings,accountRotation:e}})))})]}),vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"cooldownPeriod",children:s("campaigns.builder.antiban.cooldown_period_label","Account Cooldown Period (minutes)")}),vs.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s("campaigns.builder.antiban.cooldown_period_desc","Rest time between high-volume sending for each account")}),vs.jsx(LB,{id:"cooldownPeriod",type:"number",min:"5",max:"1440",value:c.antiBanSettings.cooldownPeriod,onChange:e=>d((t=>({...t,antiBanSettings:{...t.antiBanSettings,cooldownPeriod:parseInt(e.target.value)||30}})))})]})]}),vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"messageVariation",children:s("campaigns.builder.antiban.message_variation_label","Message Variation")}),vs.jsx("p",{className:"text-sm text-muted-foreground",children:s("campaigns.builder.antiban.message_variation_desc","Add slight variations to avoid identical content")})]}),vs.jsx(L4,{id:"messageVariation",checked:c.antiBanSettings.messageVariation,onCheckedChange:e=>d((t=>({...t,antiBanSettings:{...t.antiBanSettings,messageVariation:e}})))})]})]})]})]}),((null==(r=c.channelIds)?void 0:r.length)||0)>0&&vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsxs(ak,{className:"flex items-center gap-2",children:[vs.jsx(fj,{className:"w-5 h-5"}),s("campaigns.builder.antiban.account_health_title","Account Health Status")]})}),vs.jsx(sk,{children:vs.jsx("div",{className:"space-y-3",children:T.filter((e=>{var t;return null==(t=c.channelIds)?void 0:t.includes(e.id)})).map((e=>vs.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[vs.jsxs("div",{className:"flex items-center gap-3",children:[vs.jsx("i",{className:"ri-whatsapp-line text-green-600"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"font-medium",children:e.accountName}),vs.jsxs("p",{className:"text-sm text-muted-foreground",children:[s("campaigns.builder.antiban.last_active","Last active"),": ",new Date(e.lastActiveAt||Date.now()).toLocaleDateString()]})]})]}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(dk,{variant:"active"===e.status?"default":"secondary",children:e.status}),vs.jsxs("div",{className:"flex items-center gap-1",children:[vs.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),vs.jsx("span",{className:"text-sm text-muted-foreground",children:s("campaigns.builder.antiban.account_status_healthy","Healthy")})]})]})]},e.id)))})})]})]});case"review":return vs.jsx("div",{className:"space-y-4",children:vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsx(ak,{children:s("campaigns.builder.review.campaign_summary_title","Campaign Summary")})}),vs.jsxs(sk,{className:"space-y-4",children:[vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-medium",children:s("campaigns.builder.review.basic_info_title","Basic Information")}),vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.name_label","Name"),":"]})," ",c.name]}),vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.description_label","Description"),":"]})," ",c.description]}),vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.channel_label","Channel"),":"]})," ",c.channelType]}),vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.type_label","Type"),":"]})," ",c.campaignType]}),"scheduled"===c.campaignType&&c.scheduledAt&&vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.scheduled_for_label","Scheduled for"),":"]})," ",new Date(c.scheduledAt).toLocaleString()]})]}),vs.jsx(R$,{}),vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-medium",children:s("campaigns.builder.review.whatsapp_accounts_title","WhatsApp Accounts")}),((null==(l=c.channelIds)?void 0:l.length)||0)>0?vs.jsxs("div",{className:"space-y-2",children:[vs.jsxs("p",{children:[vs.jsx("strong",{children:(null==(f=c.channelIds)?void 0:f.length)||0})," ",s("campaigns.builder.review.accounts_selected_for_distribution","account(s) selected for distribution"),":"]}),vs.jsx("div",{className:"space-y-1",children:T.filter((e=>{var t;return null==(t=c.channelIds)?void 0:t.includes(e.id)})).map((e=>vs.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[vs.jsx("i",{className:"ri-whatsapp-line text-green-600"}),vs.jsx("span",{children:e.accountName}),vs.jsx(dk,{variant:"secondary",className:"text-xs",children:e.status})]},e.id)))})]}):c.channelId?vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.single_account_label","Single Account"),":"]})," ",(null==(p=T.find((e=>e.id===c.channelId)))?void 0:p.accountName)||"Unknown"]}):vs.jsx("p",{children:s("campaigns.builder.review.no_account_selected","No WhatsApp account selected")})]}),vs.jsx(R$,{}),vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-medium",children:s("campaigns.builder.review.audience_title","Audience")}),(()=>{const e=m.find((e=>e.id===c.segmentId));return e?vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.segment_label","Segment"),":"]})," ",e.name," (",e.contactCount," ",s("campaigns.builder.audience.contacts","contacts"),")"]}):vs.jsx("p",{children:s("campaigns.builder.review.no_segment_selected","No segment selected")})})()]}),vs.jsx(R$,{}),vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-medium",children:s("campaigns.builder.review.antiban_title","Anti-Ban Protection")}),c.antiBanSettings.enabled?vs.jsxs("div",{className:"space-y-1",children:[vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.antiban_mode_label","Mode"),":"]})," ",c.antiBanSettings.mode]}),vs.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.antiBanSettings.businessHoursOnly&&vs.jsx(dk,{variant:"outline",children:s("campaigns.builder.antiban.business_hours_label","Business Hours Only")}),c.antiBanSettings.respectWeekends&&vs.jsx(dk,{variant:"outline",children:s("campaigns.builder.antiban.respect_weekends_label","Respect Weekends")}),c.antiBanSettings.randomizeDelay&&vs.jsxs(dk,{variant:"outline",children:[s("campaigns.builder.review.random_delays_badge","Random Delays")," (",c.antiBanSettings.minDelay,"-",c.antiBanSettings.maxDelay,"s)"]}),c.antiBanSettings.accountRotation&&vs.jsx(dk,{variant:"outline",children:s("campaigns.builder.review.account_rotation_badge","Account Rotation")}),c.antiBanSettings.messageVariation&&vs.jsx(dk,{variant:"outline",children:s("campaigns.builder.antiban.message_variation_label","Message Variation")})]})]}):vs.jsx("p",{children:s("campaigns.builder.review.antiban_disabled","Anti-ban protection disabled")})]}),vs.jsx(R$,{}),vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-medium",children:s("campaigns.builder.review.rate_limiting_title","Rate Limiting")}),vs.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.per_minute_label","Per Minute"),":"]})," ",c.rateLimitSettings.messages_per_minute," ",s("campaigns.builder.review.messages_unit","messages")]}),vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.per_hour_label","Per Hour"),":"]})," ",c.rateLimitSettings.messages_per_hour," ",s("campaigns.builder.review.messages_unit","messages")]}),vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.per_day_label","Per Day"),":"]})," ",c.rateLimitSettings.messages_per_day," ",s("campaigns.builder.review.messages_unit","messages")]}),vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.review.base_delay_label","Base Delay"),":"]})," ",c.rateLimitSettings.delay_between_messages," ",s("campaigns.builder.review.seconds_unit","seconds")]})]})]}),vs.jsx(R$,{}),vs.jsxs("div",{children:[vs.jsx("h4",{className:"font-medium",children:s("campaigns.builder.review.message_content_title","Message Content")}),vs.jsx("div",{className:"bg-muted p-3 rounded-md",children:vs.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:c.content})}),c.mediaUrls&&c.mediaUrls.length>0&&vs.jsxs("div",{className:"mt-2",children:[vs.jsxs("p",{className:"text-sm font-medium",children:[s("campaigns.builder.review.media_attachments_label","Media Attachments"),":"]}),vs.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:c.mediaUrls.map(((e,t)=>vs.jsxs(dk,{variant:"secondary",className:"text-xs",children:[s("campaigns.builder.review.media_item_label","Media")," ",t+1]},t)))})]})]})]})]})});default:return null}})()})]}),vs.jsxs("div",{className:"flex justify-between",children:[vs.jsxs(lk,{variant:"outline",onClick:()=>{o>0&&l(o-1)},disabled:0===o,children:[vs.jsx(yb,{className:"w-4 h-4 mr-2"}),s("campaigns.builder.navigation.previous","Previous")]}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsxs(lk,{variant:"outline",onClick:async()=>{y(!0);try{const e=a?`/api/campaigns/${r}`:"/api/campaigns",t=a?"PUT":"POST",n=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),i=await n.json();if(!i.success)throw new Error(i.error);A({title:s("common.success","Success"),description:a?s("campaigns.builder.messages.update_success","Campaign updated successfully"):s("campaigns.builder.messages.save_success","Campaign saved as draft")})}catch(e){A({title:s("common.error","Error"),description:a?s("campaigns.builder.messages.update_error","Failed to update campaign"):s("campaigns.builder.messages.save_error","Failed to save campaign"),variant:"destructive"})}finally{y(!1)}},disabled:x,children:[vs.jsx(Pw,{className:"w-4 h-4 mr-2"}),s("campaigns.builder.navigation.save_draft","Save Draft")]}),o===i.length-1?vs.jsx(lk,{onClick:()=>{const e=(()=>{const e=[];return c.name.trim()||e.push(s("campaigns.builder.validation.name_required","Campaign name is required")),c.channelId||c.channelIds&&0!==c.channelIds.length||e.push(s("campaigns.builder.validation.connection_required","At least one WhatsApp connection is required")),c.segmentId||e.push(s("campaigns.builder.validation.segment_required","Audience segment is required")),c.content.trim()||e.push(s("campaigns.builder.validation.content_required","Message content is required")),"scheduled"!==c.campaignType||c.scheduledAt||e.push(s("campaigns.builder.validation.schedule_required","Scheduled date and time is required for scheduled campaigns")),e})();e.length>0?A({title:s("campaigns.builder.validation.error_title","Validation Error"),description:e.join(", "),variant:"destructive"}):_(!0)},disabled:x,className:"min-w-[140px]",children:x?vs.jsxs(vs.Fragment,{children:[vs.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s("campaigns.builder.navigation.launching","Launching...")]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Rw,{className:"w-4 h-4 mr-2"}),s("campaigns.builder.navigation.launch","Launch Campaign")]})}):vs.jsxs(lk,{onClick:()=>{o<i.length-1&&l(o+1)},children:[s("campaigns.builder.navigation.next","Next"),vs.jsx(vb,{className:"w-4 h-4 ml-2"})]})]})]}),vs.jsx(oTe,{isOpen:v,onClose:()=>b(!1),onSegmentCreated:e=>{p((t=>[e,...t])),d((t=>({...t,segmentId:e.id}))),A({title:s("common.success","Success"),description:s("campaigns.builder.messages.segment_created",'Segment "{{name}}" created and selected',{name:e.name})})}}),vs.jsx(fTe,{isOpen:w,onClose:()=>j(!1),onTemplateCreated:e=>{f((t=>[e,...t])),d((t=>({...t,templateId:e.id,content:e.content,mediaUrls:e.mediaUrls||[]}))),A({title:s("common.success","Success"),description:s("campaigns.builder.messages.template_created",'Template "{{name}}" created and selected',{name:e.name})})}}),N&&vs.jsx(mTe,{isOpen:null!==N,onClose:()=>C(null),segmentId:N,onSegmentUpdated:e=>{null===e?(p((e=>e.filter((e=>e.id!==N)))),c.segmentId===N&&d((e=>({...e,segmentId:void 0})))):p((t=>t.map((t=>t.id===e.id?e:t)))),C(null)}}),S&&vs.jsx(pTe,{isOpen:null!==S,onClose:()=>k(null),templateId:S,onTemplateUpdated:e=>{null===e?(f((e=>e.filter((e=>e.id!==S)))),c.templateId===S&&d((e=>({...e,templateId:void 0,content:""})))):(f((t=>t.map((t=>t.id===e.id?e:t)))),c.templateId===e.id&&d((t=>({...t,content:e.content,mediaUrls:e.mediaUrls||[]})))),k(null)}}),vs.jsx(yB,{open:M,onOpenChange:_,children:vs.jsxs(NB,{children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:s("campaigns.builder.launch.confirmation_title","Launch Campaign Confirmation")}),vs.jsx(MB,{children:s("campaigns.builder.launch.confirmation_description","Are you sure you want to launch this campaign? This action cannot be undone.")})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[vs.jsxs("h4",{className:"font-medium mb-2",children:[s("campaigns.builder.launch.summary_title","Campaign Summary"),":"]}),vs.jsxs("div",{className:"space-y-1 text-sm",children:[vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.launch.summary_name","Name"),":"]})," ",c.name]}),vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.launch.summary_type","Type"),":"]})," ",c.campaignType]}),(()=>{const e=m.find((e=>e.id===c.segmentId));return e?vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.launch.summary_recipients","Recipients"),":"]})," ",e.contactCount," ",s("campaigns.builder.audience.contacts","contacts")]}):null})(),"scheduled"===c.campaignType&&c.scheduledAt&&vs.jsxs("p",{children:[vs.jsxs("strong",{children:[s("campaigns.builder.launch.summary_scheduled","Scheduled for"),":"]})," ",new Date(c.scheduledAt).toLocaleString()]})]})]}),vs.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded-lg",children:vs.jsxs("div",{className:"flex items-start gap-2",children:[vs.jsx(nj,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),vs.jsxs("div",{className:"text-sm text-yellow-800",children:[vs.jsxs("p",{className:"font-medium",children:[s("campaigns.builder.launch.warning_title","Important"),":"]}),vs.jsx("p",{children:s("campaigns.builder.launch.warning_description","Once launched, this campaign will start sending messages immediately and cannot be stopped.")})]})]})})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{variant:"outline",onClick:()=>_(!1),disabled:x,children:s("common.cancel","Cancel")}),vs.jsx(lk,{onClick:async()=>{_(!1),y(!0);try{const e=await fetch("/api/campaigns",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),n=await e.json();if(!n.success)throw new Error(n.error);{const e=n.data.id,a=await fetch(`/api/campaigns/${e}/start`,{method:"POST"}),r=await a.json();if(!r.success)throw new Error(r.error);{const e=m.find((e=>e.id===c.segmentId)),n=(null==e?void 0:e.contactCount)||0;A({title:s("campaigns.builder.messages.launch_success_title","Campaign Launched Successfully! 🚀"),description:s("campaigns.builder.messages.launch_success_description",'"{{name}}" is now running and will send messages to {{count}} contacts',{name:c.name,count:n})}),d({name:"",description:"",content:"",mediaUrls:[],channelType:"whatsapp",campaignType:"immediate",rateLimitSettings:{messages_per_minute:10,messages_per_hour:200,messages_per_day:1e3,delay_between_messages:6,humanization_enabled:!0},antiBanSettings:{enabled:!0,mode:"moderate",businessHoursOnly:!1,respectWeekends:!1,randomizeDelay:!0,minDelay:3,maxDelay:15,accountRotation:!0,cooldownPeriod:30,messageVariation:!1}}),l(0),g(null),b(!1),j(!1),C(null),k(null),_(!1),setTimeout((()=>{t("/campaigns")}),2e3)}}}catch(e){A({title:s("campaigns.builder.messages.launch_error_title","Launch Failed"),description:e instanceof Error?e.message:s("campaigns.builder.messages.launch_error_description","Failed to launch campaign. Please try again."),variant:"destructive"})}finally{y(!1)}},disabled:x,className:"min-w-[120px]",children:x?vs.jsxs(vs.Fragment,{children:[vs.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s("campaigns.builder.navigation.launching","Launching...")]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Rw,{className:"w-4 h-4 mr-2"}),s("campaigns.builder.launch.confirm_button","Yes, Launch")]})})]})]})})]})}function gTe(){return vs.jsxs("div",{className:"h-screen flex flex-col overflow-hidden font-sans text-gray-800",children:[vs.jsx(uR,{}),vs.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[vs.jsx(yR,{}),vs.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:vs.jsx(hTe,{})})]})]})}function xTe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yTe=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),vTe=()=>Math.random().toString(36).substring(7).split("").join("."),bTe={INIT:`@@redux/INIT${vTe()}`,REPLACE:`@@redux/REPLACE${vTe()}`};function wTe(e,t,n){if("function"!=typeof e)throw new Error(xTe(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(xTe(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(xTe(1));return n(wTe)(e,t)}let a=e,r=t,s=new Map,i=s,o=0,l=!1;function c(){i===s&&(i=new Map,s.forEach(((e,t)=>{i.set(t,e)})))}function d(){if(l)throw new Error(xTe(3));return r}function u(e){if("function"!=typeof e)throw new Error(xTe(4));if(l)throw new Error(xTe(5));let t=!0;c();const n=o++;return i.set(n,e),function(){if(t){if(l)throw new Error(xTe(6));t=!1,c(),i.delete(n),s=null}}}function f(e){if(!function(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}(e))throw new Error(xTe(7));if(void 0===e.type)throw new Error(xTe(8));if("string"!=typeof e.type)throw new Error(xTe(17));if(l)throw new Error(xTe(9));try{l=!0,r=a(r,e)}finally{l=!1}return(s=i).forEach((e=>{e()})),e}f({type:bTe.INIT});return{dispatch:f,subscribe:u,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error(xTe(10));a=e,f({type:bTe.REPLACE})},[yTe]:function(){const e=u;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(xTe(11));function n(){const e=t;e.next&&e.next(d())}n();return{unsubscribe:e(n)}},[yTe](){return this}}}}}function jTe(e,t){return function(...n){return t(e.apply(this,n))}}function NTe(e,t){if("function"==typeof e)return jTe(e,t);if("object"!=typeof e||null===e)throw new Error(xTe(16));const n={};for(const a in e){const r=e[a];"function"==typeof r&&(n[a]=jTe(r,t))}return n}function CTe(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...n)=>e(t(...n))))}var STe=cs;"function"==typeof Object.is&&Object.is,STe.useSyncExternalStore,STe.useRef,STe.useEffect,STe.useMemo,STe.useDebugValue;var kTe=cs.version.startsWith("19"),MTe=Symbol.for(kTe?"react.transitional.element":"react.element"),_Te=Symbol.for("react.portal"),ITe=Symbol.for("react.fragment"),ATe=Symbol.for("react.strict_mode"),ETe=Symbol.for("react.profiler"),LTe=Symbol.for("react.consumer"),TTe=Symbol.for("react.context"),DTe=Symbol.for("react.forward_ref"),PTe=Symbol.for("react.suspense"),OTe=Symbol.for("react.suspense_list"),RTe=Symbol.for("react.memo"),zTe=Symbol.for("react.lazy"),FTe=DTe,BTe=RTe;function UTe(e){return function(e){if("object"==typeof e&&null!==e){const{$$typeof:t}=e;switch(t){case MTe:switch(e=e.type){case ITe:case ETe:case ATe:case PTe:case OTe:return e;default:switch(e=e&&e.$$typeof){case TTe:case DTe:case zTe:case RTe:case LTe:return e;default:return t}}case _Te:return t}}}(e)===RTe}function WTe(e,t,n,a,{areStatesEqual:r,areOwnPropsEqual:s,areStatePropsEqual:i}){let o,l,c,d,u,f=!1;function m(f,m){const p=!s(m,l),h=!r(f,o,m,l);return o=f,l=m,p&&h?(c=e(o,l),t.dependsOnOwnProps&&(d=t(a,l)),u=n(c,d,l),u):p?(e.dependsOnOwnProps&&(c=e(o,l)),t.dependsOnOwnProps&&(d=t(a,l)),u=n(c,d,l),u):h?function(){const t=e(o,l),a=!i(t,c);return c=t,a&&(u=n(c,d,l)),u}():u}return function(r,s){return f?m(r,s):(o=r,l=s,c=e(o,l),d=t(a,l),u=n(c,d,l),f=!0,u)}}function GTe(e){return function(t){const n=e(t);function a(){return n}return a.dependsOnOwnProps=!1,a}}function VTe(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function HTe(e,t){return function(t,{displayName:n}){const a=function(e,t){return a.dependsOnOwnProps?a.mapToProps(e,t):a.mapToProps(e,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(t,n){a.mapToProps=e,a.dependsOnOwnProps=VTe(e);let r=a(t,n);return"function"==typeof r&&(a.mapToProps=r,a.dependsOnOwnProps=VTe(r),r=a(t,n)),r},a}}function qTe(e,t){return(n,a)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${a.wrappedComponentName}.`)}}function $Te(e,t,n){return{...n,...e,...t}}var YTe={notify(){},get:()=>[]};function QTe(e,t){let n,a=YTe,r=0,s=!1;function i(){c.onStateChange&&c.onStateChange()}function o(){r++,n||(n=t?t.addNestedSub(i):e.subscribe(i),a=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let a=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){a&&null!==e&&(a=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}())}function l(){r--,n&&0===r&&(n(),n=void 0,a.clear(),a=YTe)}const c={addNestedSub:function(e){o();const t=a.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){a.notify()},handleChangeWrapper:i,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,o())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>a};return c}var KTe=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),JTe=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),ZTe=(()=>KTe||JTe?cs.useLayoutEffect:cs.useEffect)();function XTe(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function eDe(e,t){if(XTe(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!XTe(e[n[r]],t[n[r]]))return!1;return!0}var tDe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},nDe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},aDe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},rDe={[FTe]:{$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},[BTe]:aDe};function sDe(e){return UTe(e)?aDe:rDe[e.$$typeof]||tDe}var iDe=Object.defineProperty,oDe=Object.getOwnPropertyNames,lDe=Object.getOwnPropertySymbols,cDe=Object.getOwnPropertyDescriptor,dDe=Object.getPrototypeOf,uDe=Object.prototype;function fDe(e,t){if("string"!=typeof t){if(uDe){const n=dDe(t);n&&n!==uDe&&fDe(e,n)}let a=oDe(t);lDe&&(a=a.concat(lDe(t)));const r=sDe(e),s=sDe(t);for(let i=0;i<a.length;++i){const o=a[i];if(!(nDe[o]||s&&s[o]||r&&r[o])){const a=cDe(t,o);try{iDe(e,o,a)}catch(n){}}}}return e}var mDe=Symbol.for("react-redux-context"),pDe="undefined"!=typeof globalThis?globalThis:{};function hDe(){if(!cs.createContext)return{};const e=pDe[mDe]??(pDe[mDe]=new Map);let t=e.get(cs.createContext);return t||(t=cs.createContext(null),e.set(cs.createContext,t)),t}var gDe=hDe(),xDe=[null,null];function yDe(e,t,n,a,r,s){e.current=a,n.current=!1,r.current&&(r.current=null,s())}function vDe(e,t){return e===t}var bDe=function(e,t,n,{pure:a,areStatesEqual:r=vDe,areOwnPropsEqual:s=eDe,areStatePropsEqual:i=eDe,areMergedPropsEqual:o=eDe,forwardRef:l=!1,context:c=gDe}={}){const d=c,u=function(e){return e?"function"==typeof e?HTe(e):qTe(e,"mapStateToProps"):GTe((()=>({})))}(e),f=function(e){return e&&"object"==typeof e?GTe((t=>function(e,t){const n={};for(const a in e){const r=e[a];"function"==typeof r&&(n[a]=(...e)=>t(r(...e)))}return n}(e,t))):e?"function"==typeof e?HTe(e):qTe(e,"mapDispatchToProps"):GTe((e=>({dispatch:e})))}(t),m=function(e){return e?"function"==typeof e?function(e){return function(t,{displayName:n,areMergedPropsEqual:a}){let r,s=!1;return function(t,n,i){const o=e(t,n,i);return s?a(o,r)||(r=o):(s=!0,r=o),r}}}(e):qTe(e,"mergeProps"):()=>$Te}(n),p=Boolean(e);return e=>{const t=e.displayName||e.name||"Component",n=`Connect(${t})`,a={shouldHandleStateChanges:p,displayName:n,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:u,initMapDispatchToProps:f,initMergeProps:m,areStatesEqual:r,areStatePropsEqual:i,areOwnPropsEqual:s,areMergedPropsEqual:o};function c(t){const[n,r,s]=cs.useMemo((()=>{const{reactReduxForwardedRef:e,...n}=t;return[t.context,e,n]}),[t]),i=cs.useMemo((()=>{let e=d;return null==n||n.Consumer,e}),[n,d]),o=cs.useContext(i),l=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),c=Boolean(o)&&Boolean(o.store),u=l?t.store:o.store,f=c?o.getServerState:u.getState,m=cs.useMemo((()=>function(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:a,...r}){return WTe(t(e,r),n(e,r),a(e,r),e,r)}(u.dispatch,a)),[u]),[h,g]=cs.useMemo((()=>{if(!p)return xDe;const e=QTe(u,l?void 0:o.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[u,l,o]),x=cs.useMemo((()=>l?o:{...o,subscription:h}),[l,o,h]),y=cs.useRef(void 0),v=cs.useRef(s),b=cs.useRef(void 0),w=cs.useRef(!1),j=cs.useRef(!1),N=cs.useRef(void 0);ZTe((()=>(j.current=!0,()=>{j.current=!1})),[]);const C=cs.useMemo((()=>()=>b.current&&s===v.current?b.current:m(u.getState(),s)),[u,s]),S=cs.useMemo((()=>e=>h?function(e,t,n,a,r,s,i,o,l,c,d){if(!e)return()=>{};let u=!1,f=null;const m=()=>{if(u||!o.current)return;const e=t.getState();let n,m;try{n=a(e,r.current)}catch(p){m=p,f=p}m||(f=null),n===s.current?i.current||c():(s.current=n,l.current=n,i.current=!0,d())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}(p,u,h,m,v,y,w,j,b,g,e):()=>{}),[h]);var k,M,_;let I;k=yDe,M=[v,y,w,s,b,g],ZTe((()=>k(...M)),_);try{I=cs.useSyncExternalStore(S,C,f?()=>m(f(),s):C)}catch(pBe){throw N.current&&(pBe.message+=`\nThe error may be correlated with this previous error:\n${N.current.stack}\n\n`),pBe}ZTe((()=>{N.current=void 0,b.current=void 0,y.current=I}));const A=cs.useMemo((()=>cs.createElement(e,{...I,ref:r})),[r,e,I]);return cs.useMemo((()=>p?cs.createElement(i.Provider,{value:x},A):A),[i,A,x])}const h=cs.memo(c);if(h.WrappedComponent=e,h.displayName=c.displayName=n,l){const t=cs.forwardRef((function(e,t){return cs.createElement(h,{...e,reactReduxForwardedRef:t})}));return t.displayName=n,t.WrappedComponent=e,fDe(t,e)}return fDe(h,e)}};var wDe=function(e){const{children:t,context:n,serverState:a,store:r}=e,s=cs.useMemo((()=>{const e=QTe(r);return{store:r,subscription:e,getServerState:a?()=>a:void 0}}),[r,a]),i=cs.useMemo((()=>r.getState()),[r]);ZTe((()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==r.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[s,i]);const o=n||gDe;return cs.createElement(o.Provider,{value:s},t)},jDe=function(e){var t=e.top,n=e.right,a=e.bottom,r=e.left;return{top:t,right:n,bottom:a,left:r,width:n-r,height:a-t,x:r,y:t,center:{x:(n+r)/2,y:(a+t)/2}}},NDe=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},CDe=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},SDe={top:0,right:0,bottom:0,left:0},kDe=function(e){var t=e.borderBox,n=e.margin,a=void 0===n?SDe:n,r=e.border,s=void 0===r?SDe:r,i=e.padding,o=void 0===i?SDe:i,l=jDe(NDe(t,a)),c=jDe(CDe(t,s)),d=jDe(CDe(c,o));return{marginBox:l,borderBox:jDe(t),paddingBox:c,contentBox:d,margin:a,border:s,padding:o}},MDe=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&Rxe(),n},_De=function(e,t){var n,a,r=e.borderBox,s=e.border,i=e.margin,o=e.padding,l=(a=t,{top:(n=r).top+a.y,left:n.left+a.x,bottom:n.bottom+a.y,right:n.right+a.x});return kDe({borderBox:l,border:s,margin:i,padding:o})},IDe=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),_De(e,t)},ADe=function(e,t){var n={top:MDe(t.marginTop),right:MDe(t.marginRight),bottom:MDe(t.marginBottom),left:MDe(t.marginLeft)},a={top:MDe(t.paddingTop),right:MDe(t.paddingRight),bottom:MDe(t.paddingBottom),left:MDe(t.paddingLeft)},r={top:MDe(t.borderTopWidth),right:MDe(t.borderRightWidth),bottom:MDe(t.borderBottomWidth),left:MDe(t.borderLeftWidth)};return kDe({borderBox:e,margin:n,padding:a,border:r})},EDe=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return ADe(t,n)},LDe=function(e){var t=[],n=null,a=function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];t=r,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function TDe(e,t){}function DDe(){}function PDe(e,t,n){const a=t.map((t=>{const a=(r=n,s=t.options,{...r,...s});var r,s;return e.addEventListener(t.eventName,t.fn,a),function(){e.removeEventListener(t.eventName,t.fn,a)}}));return function(){a.forEach((e=>{e()}))}}TDe.bind(null,"warn"),TDe.bind(null,"error");class ODe extends Error{}function RDe(e,t){throw new ODe("Invariant failed")}ODe.prototype.toString=function(){return this.message};class zDe extends ds.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=DDe,this.onWindowError=e=>{const t=this.getCallbacks();t.isDragging()&&t.tryAbort();e.error instanceof ODe&&e.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=e=>{this.callbacks=e}}componentDidMount(){this.unbind=PDe(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(!(e instanceof ODe))throw e;this.setState({})}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const FDe=e=>e+1,BDe=(e,t)=>{const n=e.droppableId===t.droppableId,a=FDe(e.index),r=FDe(t.index);return n?`\n      You have moved the item from position ${a}\n      to position ${r}\n    `:`\n    You have moved the item from position ${a}\n    in list ${e.droppableId}\n    to list ${t.droppableId}\n    in position ${r}\n  `},UDe=(e,t,n)=>t.droppableId===n.droppableId?`\n      The item ${e}\n      has been combined with ${n.draggableId}`:`\n      The item ${e}\n      in list ${t.droppableId}\n      has been combined with ${n.draggableId}\n      in list ${n.droppableId}\n    `,WDe=e=>`\n  The item has returned to its starting position\n  of ${FDe(e.index)}\n`,GDe={dragHandleUsageInstructions:"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",onDragStart:e=>`\n  You have lifted an item in position ${FDe(e.source.index)}\n`,onDragUpdate:e=>{const t=e.destination;if(t)return BDe(e.source,t);const n=e.combine;return n?UDe(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},onDragEnd:e=>{if("CANCEL"===e.reason)return`\n      Movement cancelled.\n      ${WDe(e.source)}\n    `;const t=e.destination,n=e.combine;return t?`\n      You have dropped the item.\n      ${BDe(e.source,t)}\n    `:n?`\n      You have dropped the item.\n      ${UDe(e.draggableId,e.source,n)}\n    `:`\n    The item has been dropped while not over a drop area.\n    ${WDe(e.source)}\n  `}};function VDe(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||Number.isNaN(n)&&Number.isNaN(a)))return!1;var n,a;return!0}function HDe(e,t){const n=cs.useState((()=>({inputs:t,result:e()})))[0],a=cs.useRef(!0),r=cs.useRef(n),s=a.current||Boolean(t&&r.current.inputs&&VDe(t,r.current.inputs))?r.current:{inputs:t,result:e()};return cs.useEffect((()=>{a.current=!1,r.current=s}),[s]),s.result}function qDe(e,t){return HDe((()=>e),t)}const $De={x:0,y:0},YDe=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),QDe=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),KDe=(e,t)=>e.x===t.x&&e.y===t.y,JDe=e=>({x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}),ZDe=(e,t,n=0)=>"x"===e?{x:t,y:n}:{x:n,y:t},XDe=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),ePe=(e,t)=>Math.min(...t.map((t=>XDe(e,t)))),tPe=e=>t=>({x:e(t.x),y:e(t.y)});const nPe=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),aPe=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],rPe=(e,t)=>t&&t.shouldClipSubject?((e,t)=>{const n=jDe({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n})(t.pageMarginBox,e):jDe(e);var sPe=({page:e,withPlaceholder:t,axis:n,frame:a})=>{const r=((e,t)=>t?nPe(e,t.scroll.diff.displacement):e)(e.marginBox,a),s=((e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e)(r,n,t);return{page:e,withPlaceholder:t,active:rPe(s,a)}},iPe=(e,t)=>{e.frame||RDe();const n=e.frame,a=QDe(t,n.scroll.initial),r=JDe(a),s={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:a,displacement:r},max:n.scroll.max}},i=sPe({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s});return{...e,frame:s,subject:i}};function oPe(e,t=VDe){let n=null;function a(...a){if(n&&n.lastThis===this&&t(a,n.lastArgs))return n.lastResult;const r=e.apply(this,a);return n={lastResult:r,lastArgs:a,lastThis:this},r}return a.clear=function(){n=null},a}const lPe=oPe((e=>e.reduce(((e,t)=>(e[t.descriptor.id]=t,e)),{}))),cPe=oPe((e=>e.reduce(((e,t)=>(e[t.descriptor.id]=t,e)),{}))),dPe=oPe((e=>Object.values(e))),uPe=oPe((e=>Object.values(e)));var fPe=oPe(((e,t)=>{const n=uPe(t).filter((t=>e===t.descriptor.droppableId)).sort(((e,t)=>e.descriptor.index-t.descriptor.index));return n}));function mPe(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function pPe(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var hPe=oPe(((e,t)=>t.filter((t=>t.descriptor.id!==e.descriptor.id)))),gPe=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const xPe={point:$De,value:0},yPe={invisible:{},visible:{},all:[]},vPe={displaced:yPe,displacedBy:xPe,at:null};var bPe=(e,t)=>n=>e<=n&&n<=t,wPe=e=>{const t=bPe(e.top,e.bottom),n=bPe(e.left,e.right);return a=>{if(t(a.top)&&t(a.bottom)&&n(a.left)&&n(a.right))return!0;const r=t(a.top)||t(a.bottom),s=n(a.left)||n(a.right);if(r&&s)return!0;const i=a.top<e.top&&a.bottom>e.bottom,o=a.left<e.left&&a.right>e.right;if(i&&o)return!0;return i&&s||o&&r}},jPe=e=>{const t=bPe(e.top,e.bottom),n=bPe(e.left,e.right);return e=>t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)};const NPe={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},CPe={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};const SPe=({target:e,destination:t,viewport:n,withDroppableDisplacement:a,isVisibleThroughFrameFn:r})=>{const s=a?((e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:$De;return nPe(e,n)})(e,t):e;return((e,t,n)=>!!t.subject.active&&n(t.subject.active)(e))(s,t,r)&&((e,t,n)=>n(t)(e))(s,n,r)},kPe=e=>SPe({...e,isVisibleThroughFrameFn:jPe});function MPe({afterDragging:e,destination:t,displacedBy:n,viewport:a,forceShouldAnimate:r,last:s}){return e.reduce((function(e,i){const o=function(e,t){const n=e.page.marginBox,a={top:t.point.y,right:0,bottom:0,left:t.point.x};return jDe(NDe(n,a))}(i,n),l=i.descriptor.id;e.all.push(l);const c=(e=>SPe({...e,isVisibleThroughFrameFn:wPe}))({target:o,destination:t,viewport:a,withDroppableDisplacement:!0});if(!c)return e.invisible[i.descriptor.id]=!0,e;const d=((e,t,n)=>{if("boolean"==typeof n)return n;if(!t)return!0;const{invisible:a,visible:r}=t;if(a[e])return!1;const s=r[e];return!s||s.shouldAnimate})(l,s,r),u={draggableId:l,shouldAnimate:d};return e.visible[l]=u,e}),{all:[],visible:{},invisible:{}})}function _Pe({insideDestination:e,inHomeList:t,displacedBy:n,destination:a}){const r=function(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(e,{inHomeList:t});return{displaced:yPe,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:r}}}}function IPe({draggable:e,insideDestination:t,destination:n,viewport:a,displacedBy:r,last:s,index:i,forceShouldAnimate:o}){const l=gPe(e,n);if(null==i)return _Pe({insideDestination:t,inHomeList:l,displacedBy:r,destination:n});const c=t.find((e=>e.descriptor.index===i));if(!c)return _Pe({insideDestination:t,inHomeList:l,displacedBy:r,destination:n});const d=hPe(e,t),u=t.indexOf(c);return{displaced:MPe({afterDragging:d.slice(u),destination:n,displacedBy:r,last:s,viewport:a.frame,forceShouldAnimate:o}),displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function APe(e,t){return Boolean(t.effected[e])}var EPe=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:a,destination:r,insideDestination:s,previousImpact:i,viewport:o,afterCritical:l})=>{const c=i.at;if(c||RDe(),"REORDER"===c.type){const a=(({isMovingForward:e,isInHomeList:t,insideDestination:n,location:a})=>{if(!n.length)return null;const r=a.index,s=e?r+1:r-1,i=n[0].descriptor.index,o=n[n.length-1].descriptor.index;return s<i||s>(t?o:o+1)?null:s})({isMovingForward:e,isInHomeList:t,location:c.destination,insideDestination:s});return null==a?null:IPe({draggable:n,insideDestination:s,destination:r,viewport:o,last:i.displaced,displacedBy:i.displacedBy,index:a})}const d=(({isMovingForward:e,destination:t,draggables:n,combine:a,afterCritical:r})=>{if(!t.isCombineEnabled)return null;const s=a.draggableId,i=n[s].descriptor.index;return APe(s,r)?e?i:i-1:e?i+1:i})({isMovingForward:e,destination:r,displaced:i.displaced,draggables:a,combine:c.combine,afterCritical:l});return null==d?null:IPe({draggable:n,insideDestination:s,destination:r,viewport:o,last:i.displaced,displacedBy:i.displacedBy,index:d})},LPe=({afterCritical:e,impact:t,draggables:n})=>{const a=pPe(t);a||RDe();const r=a.draggableId,s=n[r].page.borderBox.center,i=(({displaced:e,afterCritical:t,combineWith:n,displacedBy:a})=>{const r=Boolean(e.visible[n]||e.invisible[n]);return APe(n,t)?r?$De:JDe(a.point):r?a.point:$De})({displaced:t.displaced,afterCritical:e,combineWith:r,displacedBy:t.displacedBy});return YDe(s,i)};const TPe=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,DPe=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,PPe=({axis:e,moveRelativeTo:t,isMoving:n})=>ZDe(e.line,t.marginBox[e.end]+TPe(e,n),DPe(e,t.marginBox,n)),OPe=({axis:e,moveRelativeTo:t,isMoving:n})=>ZDe(e.line,t.marginBox[e.start]-((e,t)=>t.margin[e.end]+t.borderBox[e.size]/2)(e,n),DPe(e,t.marginBox,n));var RPe=({impact:e,draggable:t,draggables:n,droppable:a,afterCritical:r})=>{const s=fPe(a.descriptor.id,n),i=t.page,o=a.axis;if(!s.length)return(({axis:e,moveInto:t,isMoving:n})=>ZDe(e.line,t.contentBox[e.start]+TPe(e,n),DPe(e,t.contentBox,n)))({axis:o,moveInto:a.page,isMoving:i});const{displaced:l,displacedBy:c}=e,d=l.all[0];if(d){const e=n[d];if(APe(d,r))return OPe({axis:o,moveRelativeTo:e.page,isMoving:i});const t=_De(e.page,c.point);return OPe({axis:o,moveRelativeTo:t,isMoving:i})}const u=s[s.length-1];if(u.descriptor.id===t.descriptor.id)return i.borderBox.center;if(APe(u.descriptor.id,r)){const e=_De(u.page,JDe(r.displacedBy.point));return PPe({axis:o,moveRelativeTo:e,isMoving:i})}return PPe({axis:o,moveRelativeTo:u.page,isMoving:i})},zPe=(e,t)=>{const n=e.frame;return n?YDe(t,n.scroll.diff.displacement):t};var FPe=e=>{const t=(({impact:e,draggable:t,droppable:n,draggables:a,afterCritical:r})=>{const s=t.page.borderBox.center,i=e.at;return n&&i?"REORDER"===i.type?RPe({impact:e,draggable:t,draggables:a,droppable:n,afterCritical:r}):LPe({impact:e,draggables:a,afterCritical:r}):s})(e),n=e.droppable;return n?zPe(n,t):t},BPe=(e,t)=>{const n=QDe(t,e.scroll.initial),a=JDe(n);return{frame:jDe({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:a}}}};function UPe(e,t){return e.map((e=>t[e]))}var WPe=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const a=((e,t)=>YDe(e.scroll.diff.displacement,t))(n,e),r=QDe(a,t.page.borderBox.center);return YDe(t.client.borderBox.center,r)},GPe=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:a,withDroppableDisplacement:r,onlyOnMainAxis:s=!1})=>{const i=QDe(n,e.page.borderBox.center),o={target:nPe(e.page.borderBox,i),destination:t,withDroppableDisplacement:r,viewport:a};return s?(e=>{return SPe({...e,isVisibleThroughFrameFn:(t=e.destination.axis,e=>{const n=bPe(e.top,e.bottom),a=bPe(e.left,e.right);return e=>t===NPe?n(e.top)&&n(e.bottom):a(e.left)&&a(e.right)})});var t})(o):kPe(o)},VPe=({isMovingForward:e,draggable:t,destination:n,draggables:a,previousImpact:r,viewport:s,previousPageBorderBoxCenter:i,previousClientSelection:o,afterCritical:l})=>{if(!n.isEnabled)return null;const c=fPe(n.descriptor.id,a),d=gPe(t,n),u=(({isMovingForward:e,draggable:t,destination:n,insideDestination:a,previousImpact:r})=>{if(!n.isCombineEnabled)return null;if(!mPe(r))return null;function s(e){const t={type:"COMBINE",combine:{draggableId:e,droppableId:n.descriptor.id}};return{...r,at:t}}const i=r.displaced.all,o=i.length?i[0]:null;if(e)return o?s(o):null;const l=hPe(t,a);if(!o)return l.length?s(l[l.length-1].descriptor.id):null;const c=l.findIndex((e=>e.descriptor.id===o));-1===c&&RDe();const d=c-1;return d<0?null:s(l[d].descriptor.id)})({isMovingForward:e,draggable:t,destination:n,insideDestination:c,previousImpact:r})||EPe({isMovingForward:e,isInHomeList:d,draggable:t,draggables:a,destination:n,insideDestination:c,previousImpact:r,viewport:s,afterCritical:l});if(!u)return null;const f=FPe({impact:u,draggable:t,droppable:n,draggables:a,afterCritical:l});if(GPe({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})){return{clientSelection:WPe({pageBorderBoxCenter:f,draggable:t,viewport:s}),impact:u,scrollJumpRequest:null}}const m=QDe(f,i),p=(({impact:e,viewport:t,destination:n,draggables:a,maxScrollChange:r})=>{const s=BPe(t,YDe(t.scroll.current,r)),i=n.frame?iPe(n,YDe(n.frame.scroll.current,r)):n,o=e.displaced,l=MPe({afterDragging:UPe(o.all,a),destination:n,displacedBy:e.displacedBy,viewport:s.frame,last:o,forceShouldAnimate:!1}),c=MPe({afterDragging:UPe(o.all,a),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:o,forceShouldAnimate:!1}),d={},u={},f=[o,l,c];return o.all.forEach((e=>{const t=function(e,t){for(let n=0;n<t.length;n++){const a=t[n].visible[e];if(a)return a}return null}(e,f);t?u[e]=t:d[e]=!0})),{...e,displaced:{all:o.all,invisible:d,visible:u}}})({impact:u,viewport:s,destination:n,draggables:a,maxScrollChange:m});return{clientSelection:o,impact:p,scrollJumpRequest:m}};const HPe=e=>{const t=e.subject.active;return t||RDe(),t};const qPe=(e,t)=>{const n=e.page.borderBox.center;return APe(e.descriptor.id,t)?QDe(n,t.displacedBy.point):n},$Pe=(e,t)=>{const n=e.page.borderBox;return APe(e.descriptor.id,t)?nPe(n,JDe(t.displacedBy.point)):n};var YPe=oPe((function(e,t){const n=t[e.line];return{value:n,point:ZDe(e.line,n)}}));const QPe=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),KPe=(e,t,n)=>{const a=e.frame;gPe(t,e)&&RDe(),e.subject.withPlaceholder&&RDe();const r=YPe(e.axis,t.displaceBy).point,s=((e,t,n)=>{const a=e.axis;if("virtual"===e.descriptor.mode)return ZDe(a.line,t[a.line]);const r=e.subject.page.contentBox[a.size],s=fPe(e.descriptor.id,n).reduce(((e,t)=>e+t.client.marginBox[a.size]),0)+t[a.line]-r;return s<=0?null:ZDe(a.line,s)})(e,r,n),i={placeholderSize:r,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!a){const t=sPe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:t}}const o=s?YDe(a.scroll.max,s):a.scroll.max,l=QPe(a,o),c=sPe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:l});return{...e,subject:c,frame:l}};var JPe=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:a,draggables:r,droppables:s,viewport:i,afterCritical:o})=>{const l=(({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:a,viewport:r})=>{const s=n.subject.active;if(!s)return null;const i=n.axis,o=bPe(s[i.start],s[i.end]),l=dPe(a).filter((e=>e!==n)).filter((e=>e.isEnabled)).filter((e=>Boolean(e.subject.active))).filter((e=>wPe(r.frame)(HPe(e)))).filter((t=>{const n=HPe(t);return e?s[i.crossAxisEnd]<n[i.crossAxisEnd]:n[i.crossAxisStart]<s[i.crossAxisStart]})).filter((e=>{const t=HPe(e),n=bPe(t[i.start],t[i.end]);return o(t[i.start])||o(t[i.end])||n(s[i.start])||n(s[i.end])})).sort(((t,n)=>{const a=HPe(t)[i.crossAxisStart],r=HPe(n)[i.crossAxisStart];return e?a-r:r-a})).filter(((e,t,n)=>HPe(e)[i.crossAxisStart]===HPe(n[0])[i.crossAxisStart]));if(!l.length)return null;if(1===l.length)return l[0];const c=l.filter((e=>bPe(HPe(e)[i.start],HPe(e)[i.end])(t[i.line])));return 1===c.length?c[0]:c.length>1?c.sort(((e,t)=>HPe(e)[i.start]-HPe(t)[i.start]))[0]:l.sort(((e,n)=>{const a=ePe(t,aPe(HPe(e))),r=ePe(t,aPe(HPe(n)));return a!==r?a-r:HPe(e)[i.start]-HPe(n)[i.start]}))[0]})({isMovingForward:e,pageBorderBoxCenter:t,source:a,droppables:s,viewport:i});if(!l)return null;const c=fPe(l.descriptor.id,r),d=(({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:a,afterCritical:r})=>{const s=a.filter((e=>kPe({target:$Pe(e,r),destination:n,viewport:t.frame,withDroppableDisplacement:!0}))).sort(((t,a)=>{const s=XDe(e,zPe(n,qPe(t,r))),i=XDe(e,zPe(n,qPe(a,r)));return s<i?-1:i<s?1:t.descriptor.index-a.descriptor.index}));return s[0]||null})({pageBorderBoxCenter:t,viewport:i,destination:l,insideDestination:c,afterCritical:o}),u=(({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:a,draggables:r,destination:s,viewport:i,afterCritical:o})=>{if(!t){if(n.length)return null;const e={displaced:yPe,displacedBy:xPe,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},t=FPe({impact:e,draggable:a,droppable:s,draggables:r,afterCritical:o}),l=gPe(a,s)?s:KPe(s,a,r);return GPe({draggable:a,destination:l,newPageBorderBoxCenter:t,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?e:null}const l=Boolean(e[s.axis.line]<=t.page.borderBox.center[s.axis.line]),c=(()=>{const e=t.descriptor.index;return t.descriptor.id===a.descriptor.id||l?e:e+1})(),d=YPe(s.axis,a.displaceBy);return IPe({draggable:a,insideDestination:n,destination:s,viewport:i,displacedBy:d,last:yPe,index:c})})({previousPageBorderBoxCenter:t,destination:l,draggable:n,draggables:r,moveRelativeTo:d,insideDestination:c,viewport:i,afterCritical:o});if(!u)return null;const f=FPe({impact:u,draggable:n,droppable:l,draggables:r,afterCritical:o});return{clientSelection:WPe({pageBorderBoxCenter:f,draggable:n,viewport:i}),impact:u,scrollJumpRequest:null}},ZPe=e=>{const t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null};var XPe=({state:e,type:t})=>{const n=((e,t)=>{const n=ZPe(e);return n?t[n]:null})(e.impact,e.dimensions.droppables),a=Boolean(n),r=e.dimensions.droppables[e.critical.droppable.id],s=n||r,i=s.axis.direction,o="vertical"===i&&("MOVE_UP"===t||"MOVE_DOWN"===t)||"horizontal"===i&&("MOVE_LEFT"===t||"MOVE_RIGHT"===t);if(o&&!a)return null;const l="MOVE_DOWN"===t||"MOVE_RIGHT"===t,c=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:u,droppables:f}=e.dimensions;return o?VPe({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:c,destination:s,draggables:u,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):JPe({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:c,isOver:s,draggables:u,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function eOe(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function tOe(e){const t=bPe(e.top,e.bottom),n=bPe(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function nOe({pageBorderBox:e,draggable:t,droppables:n}){const a=dPe(n).filter((t=>{if(!t.isEnabled)return!1;const n=t.subject.active;if(!n)return!1;if(r=n,!((a=e).left<r.right&&a.right>r.left&&a.top<r.bottom&&a.bottom>r.top))return!1;var a,r;if(tOe(n)(e.center))return!0;const s=t.axis,i=n.center[s.crossAxisLine],o=e[s.crossAxisStart],l=e[s.crossAxisEnd],c=bPe(n[s.crossAxisStart],n[s.crossAxisEnd]),d=c(o),u=c(l);return!d&&!u||(d?o<i:l>i)}));return a.length?1===a.length?a[0].descriptor.id:function({pageBorderBox:e,draggable:t,candidates:n}){const a=t.page.borderBox.center,r=n.map((t=>{const n=t.axis,r=ZDe(t.axis.line,e.center[n.line],t.page.borderBox.center[n.crossAxisLine]);return{id:t.descriptor.id,distance:XDe(a,r)}})).sort(((e,t)=>t.distance-e.distance));return r[0]?r[0].id:null}({pageBorderBox:e,draggable:t,candidates:a}):null}const aOe=(e,t)=>jDe(nPe(e,t));function rOe({displaced:e,id:t}){return Boolean(e.visible[t]||e.invisible[t])}var sOe=({pageOffset:e,draggable:t,draggables:n,droppables:a,previousImpact:r,viewport:s,afterCritical:i})=>{const o=aOe(t.page.borderBox,e),l=nOe({pageBorderBox:o,draggable:t,droppables:a});if(!l)return vPe;const c=a[l],d=fPe(c.descriptor.id,n),u=((e,t)=>{const n=e.frame;return n?aOe(t,n.scroll.diff.value):t})(c,o);return(({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:a,insideDestination:r,afterCritical:s})=>{if(!a.isCombineEnabled)return null;const i=a.axis,o=YPe(a.axis,e.displaceBy),l=o.value,c=t[i.start],d=t[i.end],u=hPe(e,r).find((e=>{const t=e.descriptor.id,a=e.page.borderBox,r=a[i.size]/4,o=APe(t,s),u=rOe({displaced:n.displaced,id:t});return o?u?d>a[i.start]+r&&d<a[i.end]-r:c>a[i.start]-l+r&&c<a[i.end]-l-r:u?d>a[i.start]+l+r&&d<a[i.end]+l-r:c>a[i.start]+r&&c<a[i.end]-r}));return u?{displacedBy:o,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:u.descriptor.id,droppableId:a.descriptor.id}}}:null})({pageBorderBoxWithDroppableScroll:u,draggable:t,previousImpact:r,destination:c,insideDestination:d,afterCritical:i})||(({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:a,last:r,viewport:s,afterCritical:i})=>{const o=n.axis,l=YPe(n.axis,t.displaceBy),c=l.value,d=e[o.start],u=e[o.end],f=function({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}({draggable:t,closest:hPe(t,a).find((e=>{const t=e.descriptor.id,n=e.page.borderBox.center[o.line],a=APe(t,i),s=rOe({displaced:r,id:t});return a?s?u<=n:d<n-c:s?u<=n+c:d<n}))||null,inHomeList:gPe(t,n)});return IPe({draggable:t,insideDestination:a,destination:n,viewport:s,last:r,displacedBy:l,index:f})})({pageBorderBoxWithDroppableScroll:u,draggable:t,destination:c,insideDestination:d,last:r.displaced,viewport:s,afterCritical:i})},iOe=(e,t)=>({...e,[t.descriptor.id]:t});const oOe=({previousImpact:e,impact:t,droppables:n})=>{const a=ZPe(e),r=ZPe(t);if(!a)return n;if(a===r)return n;const s=n[a];if(!s.subject.withPlaceholder)return n;const i=(e=>{const t=e.subject.withPlaceholder;t||RDe();const n=e.frame;if(!n){const t=sPe({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:t}}const a=t.oldFrameMaxScroll;a||RDe();const r=QPe(n,a),s=sPe({page:e.subject.page,axis:e.axis,frame:r,withPlaceholder:null});return{...e,subject:s,frame:r}})(s);return iOe(n,i)};var lOe=({state:e,clientSelection:t,dimensions:n,viewport:a,impact:r,scrollJumpRequest:s})=>{const i=a||e.viewport,o=n||e.dimensions,l=t||e.current.client.selection,c=QDe(l,e.initial.client.selection),d={offset:c,selection:l,borderBoxCenter:YDe(e.initial.client.borderBoxCenter,c)},u={selection:YDe(d.selection,i.scroll.current),borderBoxCenter:YDe(d.borderBoxCenter,i.scroll.current),offset:YDe(d.offset,i.scroll.diff.value)},f={client:d,page:u};if("COLLECTING"===e.phase)return{...e,dimensions:o,viewport:i,current:f};const m=o.draggables[e.critical.draggable.id],p=r||sOe({pageOffset:u.offset,draggable:m,draggables:o.draggables,droppables:o.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),h=(({draggable:e,draggables:t,droppables:n,previousImpact:a,impact:r})=>{const s=oOe({previousImpact:a,impact:r,droppables:n}),i=ZPe(r);if(!i)return s;const o=n[i];if(gPe(e,o))return s;if(o.subject.withPlaceholder)return s;const l=KPe(o,e,t);return iOe(s,l)})({draggable:m,impact:p,previousImpact:e.impact,draggables:o.draggables,droppables:o.droppables});return{...e,current:f,dimensions:{draggables:o.draggables,droppables:h},impact:p,viewport:i,scrollJumpRequest:s||null,forceShouldAnimate:!s&&null}};var cOe=({impact:e,viewport:t,draggables:n,destination:a,forceShouldAnimate:r})=>{const s=e.displaced,i=function(e,t){return e.map((e=>t[e]))}(s.all,n),o=MPe({afterDragging:i,destination:a,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:r,last:s});return{...e,displaced:o}},dOe=({impact:e,draggable:t,droppable:n,draggables:a,viewport:r,afterCritical:s})=>{const i=FPe({impact:e,draggable:t,draggables:a,droppable:n,afterCritical:s});return WPe({pageBorderBoxCenter:i,draggable:t,viewport:r})},uOe=({state:e,dimensions:t,viewport:n})=>{"SNAP"!==e.movementMode&&RDe();const a=e.impact,r=n||e.viewport,s=t||e.dimensions,{draggables:i,droppables:o}=s,l=i[e.critical.draggable.id],c=ZPe(a);c||RDe();const d=o[c],u=cOe({impact:a,viewport:r,destination:d,draggables:i}),f=dOe({impact:u,draggable:l,droppable:d,draggables:i,viewport:r,afterCritical:e.afterCritical});return lOe({impact:u,clientSelection:f,state:e,dimensions:s,viewport:r})},fOe=({draggable:e,home:t,draggables:n,viewport:a})=>{const r=YPe(t.axis,e.displaceBy),s=fPe(t.descriptor.id,n),i=s.indexOf(e);-1===i&&RDe();const o=s.slice(i+1),l=o.reduce(((e,t)=>(e[t.descriptor.id]=!0,e)),{}),c={inVirtualList:"virtual"===t.descriptor.mode,displacedBy:r,effected:l};var d;return{impact:{displaced:MPe({afterDragging:o,destination:t,displacedBy:r,last:null,viewport:a.frame,forceShouldAnimate:!1}),displacedBy:r,at:{type:"REORDER",destination:(d=e.descriptor,{index:d.index,droppableId:d.droppableId})}},afterCritical:c}},mOe=({additions:e,updatedDroppables:t,viewport:n})=>{const a=n.scroll.diff.value;return e.map((e=>{const r=e.descriptor.droppableId,s=(e=>{const t=e.frame;return t||RDe(),t})(t[r]).scroll.diff.value,i=(({draggable:e,offset:t,initialWindowScroll:n})=>{const a=_De(e.client,t),r=IDe(a,n);return{...e,placeholder:{...e.placeholder,client:a},client:a,page:r}})({draggable:e,offset:YDe(a,s),initialWindowScroll:n.scroll.initial});return i}))};const pOe=e=>"SNAP"===e.movementMode,hOe=(e,t,n)=>{const a=((e,t)=>({draggables:e.draggables,droppables:iOe(e.droppables,t)}))(e.dimensions,t);return!pOe(e)||n?lOe({state:e,dimensions:a}):uOe({state:e,dimensions:a})};function gOe(e){return e.isDragging&&"SNAP"===e.movementMode?{...e,scrollJumpRequest:null}:e}const xOe={phase:"IDLE",completed:null,shouldFlush:!1};var yOe=(e=xOe,t)=>{if("FLUSH"===t.type)return{...xOe,shouldFlush:!0};if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&RDe();const{critical:n,clientSelection:a,viewport:r,dimensions:s,movementMode:i}=t.payload,o=s.draggables[n.draggable.id],l=s.droppables[n.droppable.id],c={selection:a,borderBoxCenter:o.client.borderBox.center,offset:$De},d={client:c,page:{selection:YDe(c.selection,r.scroll.initial),borderBoxCenter:YDe(c.selection,r.scroll.initial),offset:YDe(c.selection,r.scroll.diff.value)}},u=dPe(s.droppables).every((e=>!e.isFixedOnPage)),{impact:f,afterCritical:m}=fOe({draggable:o,home:l,draggables:s.draggables,viewport:r});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:i,dimensions:s,initial:d,current:d,isWindowScrollAllowed:u,impact:f,afterCritical:m,onLiftImpact:f,viewport:r,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&RDe();return{...e,phase:"COLLECTING"}}if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&RDe(),(({state:e,published:t})=>{const n=t.modified.map((t=>{const n=e.dimensions.droppables[t.droppableId];return iPe(n,t.scroll)})),a={...e.dimensions.droppables,...lPe(n)},r=cPe(mOe({additions:t.additions,updatedDroppables:a,viewport:e.viewport})),s={...e.dimensions.draggables,...r};t.removals.forEach((e=>{delete s[e]}));const i={droppables:a,draggables:s},o=ZPe(e.impact),l=o?i.droppables[o]:null,c=i.draggables[e.critical.draggable.id],d=i.droppables[e.critical.droppable.id],{impact:u,afterCritical:f}=fOe({draggable:c,home:d,draggables:s,viewport:e.viewport}),m=l&&l.isCombineEnabled?e.impact:u,p=sOe({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:m,viewport:e.viewport,afterCritical:f}),h={...e,phase:"DRAGGING",impact:p,onLiftImpact:u,dimensions:i,afterCritical:f,forceShouldAnimate:!1};return"COLLECTING"===e.phase?h:{...h,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}})({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;eOe(e)||RDe();const{client:n}=t.payload;return KDe(n,e.current.client.selection)?e:lOe({state:e,clientSelection:n,impact:pOe(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return gOe(e);if("COLLECTING"===e.phase)return gOe(e);eOe(e)||RDe();const{id:n,newScroll:a}=t.payload,r=e.dimensions.droppables[n];if(!r)return e;const s=iPe(r,a);return hOe(e,s,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;eOe(e)||RDe();const{id:n,isEnabled:a}=t.payload,r=e.dimensions.droppables[n];r||RDe(),r.isEnabled===a&&RDe();const s={...r,isEnabled:a};return hOe(e,s,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;eOe(e)||RDe();const{id:n,isCombineEnabled:a}=t.payload,r=e.dimensions.droppables[n];r||RDe(),r.isCombineEnabled===a&&RDe();const s={...r,isCombineEnabled:a};return hOe(e,s,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;eOe(e)||RDe(),e.isWindowScrollAllowed||RDe();const n=t.payload.newScroll;if(KDe(e.viewport.scroll.current,n))return gOe(e);const a=BPe(e.viewport,n);return pOe(e)?uOe({state:e,viewport:a}):lOe({state:e,viewport:a})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!eOe(e))return e;const n=t.payload.maxScroll;if(KDe(n,e.viewport.scroll.max))return e;const a={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:a}}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&RDe();const n=XPe({state:e,type:t.type});return n?lOe({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){const n=t.payload.reason;"COLLECTING"!==e.phase&&RDe();return{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if("DROP_ANIMATE"===t.type){const{completed:n,dropDuration:a,newHomeClientOffset:r}=t.payload;"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&RDe();return{phase:"DROP_ANIMATING",completed:n,dropDuration:a,newHomeClientOffset:r,dimensions:e.dimensions}}if("DROP_COMPLETE"===t.type){const{completed:e}=t.payload;return{phase:"IDLE",completed:e,shouldFlush:!1}}return e};function vOe(e,t){return e instanceof Object&&"type"in e&&e.type===t}const bOe=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),wOe=()=>({type:"COLLECTION_STARTING",payload:null}),jOe=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),NOe=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),COe=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),SOe=e=>({type:"MOVE",payload:e}),kOe=()=>({type:"MOVE_UP",payload:null}),MOe=()=>({type:"MOVE_DOWN",payload:null}),_Oe=()=>({type:"MOVE_RIGHT",payload:null}),IOe=()=>({type:"MOVE_LEFT",payload:null}),AOe=e=>({type:"DROP_COMPLETE",payload:e}),EOe=e=>({type:"DROP",payload:e}),LOe=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});const TOe="cubic-bezier(.2,1,.1,1)",DOe={drop:0,combining:.7},POe={drop:.75},OOe={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ROe=`${OOe.outOfTheWay}s ${"cubic-bezier(0.2, 0, 0, 1)"}`,zOe={fluid:`opacity ${ROe}`,snap:`transform ${ROe}, opacity ${ROe}`,drop:e=>{const t=`${e}s ${TOe}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${ROe}`,placeholder:`height ${ROe}, width ${ROe}, margin ${ROe}`},FOe=e=>KDe(e,$De)?void 0:`translate(${e.x}px, ${e.y}px)`,BOe=FOe,UOe=(e,t)=>{const n=FOe(e);if(n)return t?`${n} scale(${POe.drop})`:n},{minDropTime:WOe,maxDropTime:GOe}=OOe,VOe=GOe-WOe;const HOe=({getState:e,dispatch:t})=>n=>a=>{if(!vOe(a,"DROP"))return void n(a);const r=e(),s=a.payload.reason;if("COLLECTING"===r.phase)return void t((e=>({type:"DROP_PENDING",payload:e}))({reason:s}));if("IDLE"===r.phase)return;"DROP_PENDING"===r.phase&&r.isWaiting&&RDe(),"DRAGGING"!==r.phase&&"DROP_PENDING"!==r.phase&&RDe();const i=r.critical,o=r.dimensions,l=o.draggables[r.critical.draggable.id],{impact:c,didDropInsideDroppable:d}=(({draggables:e,reason:t,lastImpact:n,home:a,viewport:r,onLiftImpact:s})=>{if(!n.at||"DROP"!==t)return{impact:cOe({draggables:e,impact:s,destination:a,viewport:r,forceShouldAnimate:!0}),didDropInsideDroppable:!1};return"REORDER"===n.at.type?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:yPe},didDropInsideDroppable:!0}})({reason:s,lastImpact:r.impact,afterCritical:r.afterCritical,onLiftImpact:r.onLiftImpact,home:r.dimensions.droppables[r.critical.droppable.id],viewport:r.viewport,draggables:r.dimensions.draggables}),u=d?mPe(c):null,f=d?pPe(c):null,m={index:i.draggable.index,droppableId:i.droppable.id},p={draggableId:l.descriptor.id,type:l.descriptor.type,source:m,reason:s,mode:r.movementMode,destination:u,combine:f},h=(({impact:e,draggable:t,dimensions:n,viewport:a,afterCritical:r})=>{const{draggables:s,droppables:i}=n,o=ZPe(e),l=o?i[o]:null,c=i[t.descriptor.droppableId],d=dOe({impact:e,draggable:t,draggables:s,afterCritical:r,droppable:l||c,viewport:a});return QDe(d,t.client.borderBox.center)})({impact:c,draggable:l,dimensions:o,viewport:r.viewport,afterCritical:r.afterCritical}),g={critical:r.critical,afterCritical:r.afterCritical,result:p,impact:c};if(!(!KDe(r.current.client.offset,h)||Boolean(p.combine)))return void t(AOe({completed:g}));const x=(({current:e,destination:t,reason:n})=>{const a=XDe(e,t);if(a<=0)return WOe;if(a>=1500)return GOe;const r=WOe+VOe*(a/1500);return Number(("CANCEL"===n?.6*r:r).toFixed(2))})({current:r.current.client.offset,destination:h,reason:s});t((e=>({type:"DROP_ANIMATE",payload:e}))({newHomeClientOffset:h,dropDuration:x,completed:g}))};var qOe=()=>({x:window.pageXOffset,y:window.pageYOffset});function $Oe({onWindowScroll:e}){const t=LDe((function(){e(qOe())})),n=(a=t,{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||a()}});var a;let r=DDe;function s(){return r!==DDe}return{start:function(){s()&&RDe(),r=PDe(window,[n])},stop:function(){s()||RDe(),t.cancel(),r(),r=DDe},isActive:s}}const YOe=e=>{const t=$Oe({onWindowScroll:t=>{e.dispatch((e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}))({newScroll:t}))}});return e=>n=>{!t.isActive()&&vOe(n,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&(e=>vOe(e,"DROP_COMPLETE")||vOe(e,"DROP_ANIMATE")||vOe(e,"FLUSH"))(n)&&t.stop(),e(n)}};var QOe=()=>{const e=[];return{add:t=>{const n=setTimeout((()=>(t=>{const n=e.findIndex((e=>e.timerId===t));-1===n&&RDe();const[a]=e.splice(n,1);a.callback()})(n))),a={timerId:n,callback:t};e.push(a)},flush:()=>{if(!e.length)return;const t=[...e];e.length=0,t.forEach((e=>{clearTimeout(e.timerId),e.callback()}))}}};const KOe=(e,t)=>{t()},JOe=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function ZOe(e,t,n,a){if(!e)return void n(a(t));const r=(e=>{let t=!1,n=!1;const a=setTimeout((()=>{n=!0})),r=r=>{t||n||(t=!0,e(r),clearTimeout(a))};return r.wasCalled=()=>t,r})(n);e(t,{announce:r}),r.wasCalled()||n(a(t))}var XOe=(e,t)=>{const n=((e,t)=>{const n=QOe();let a=null;const r=n=>{a||RDe(),a=null,KOe(0,(()=>ZOe(e().onDragEnd,n,t,GDe.onDragEnd)))};return{beforeCapture:(t,n)=>{a&&RDe(),KOe(0,(()=>{const a=e().onBeforeCapture;a&&a({draggableId:t,mode:n})}))},beforeStart:(t,n)=>{a&&RDe(),KOe(0,(()=>{const a=e().onBeforeDragStart;a&&a(JOe(t,n))}))},start:(r,s)=>{a&&RDe();const i=JOe(r,s);a={mode:s,lastCritical:r,lastLocation:i.source,lastCombine:null},n.add((()=>{KOe(0,(()=>ZOe(e().onDragStart,i,t,GDe.onDragStart)))}))},update:(r,s)=>{const i=mPe(s),o=pPe(s);a||RDe();const l=!((e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,a=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&a})(r,a.lastCritical);l&&(a.lastCritical=r);const c=(u=i,!(null==(d=a.lastLocation)&&null==u||null!=d&&null!=u&&d.droppableId===u.droppableId&&d.index===u.index));var d,u;c&&(a.lastLocation=i);const f=!((e,t)=>null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId)(a.lastCombine,o);if(f&&(a.lastCombine=o),!l&&!c&&!f)return;const m={...JOe(r,a.mode),combine:o,destination:i};n.add((()=>{KOe(0,(()=>ZOe(e().onDragUpdate,m,t,GDe.onDragUpdate)))}))},flush:()=>{a||RDe(),n.flush()},drop:r,abort:()=>{if(!a)return;const e={...JOe(a.lastCritical,a.mode),combine:null,destination:null,reason:"CANCEL"};r(e)}}})(e,t);return e=>t=>a=>{if(vOe(a,"BEFORE_INITIAL_CAPTURE"))return void n.beforeCapture(a.payload.draggableId,a.payload.movementMode);if(vOe(a,"INITIAL_PUBLISH")){const e=a.payload.critical;return n.beforeStart(e,a.payload.movementMode),t(a),void n.start(e,a.payload.movementMode)}if(vOe(a,"DROP_COMPLETE")){const e=a.payload.completed.result;return n.flush(),t(a),void n.drop(e)}if(t(a),vOe(a,"FLUSH"))return void n.abort();const r=e.getState();"DRAGGING"===r.phase&&n.update(r.critical,r.impact)}};const eRe=e=>t=>n=>{if(!vOe(n,"DROP_ANIMATION_FINISHED"))return void t(n);const a=e.getState();"DROP_ANIMATING"!==a.phase&&RDe(),e.dispatch(AOe({completed:a.completed}))},tRe=e=>{let t=null,n=null;return a=>r=>{if((vOe(r,"FLUSH")||vOe(r,"DROP_COMPLETE")||vOe(r,"DROP_ANIMATION_FINISHED"))&&(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),a(r),!vOe(r,"DROP_ANIMATE"))return;const s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((()=>{n=null,t=PDe(window,[s])}))}};var nRe=e=>t=>n=>a=>{if((e=>vOe(e,"DROP_COMPLETE")||vOe(e,"DROP_ANIMATE")||vOe(e,"FLUSH"))(a))return e.stop(),void n(a);if(vOe(a,"INITIAL_PUBLISH")){n(a);const r=t.getState();return"DRAGGING"!==r.phase&&RDe(),void e.start(r)}n(a),e.scroll(t.getState())};const aRe=e=>t=>n=>{if(t(n),!vOe(n,"PUBLISH_WHILE_DRAGGING"))return;const a=e.getState();"DROP_PENDING"===a.phase&&(a.isWaiting||e.dispatch(EOe({reason:a.reason})))},rRe=CTe;var sRe=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:a,announce:r,autoScroller:s})=>{return wTe(yOe,rRe(function(...e){return t=>(n,a)=>{const r=t(n,a);let s=()=>{throw new Error(xTe(15))};const i={getState:r.getState,dispatch:(e,...t)=>s(e,...t)},o=e.map((e=>e(i)));return s=CTe(...o)(r.dispatch),{...r,dispatch:s}}}((i=n,()=>e=>t=>{vOe(t,"INITIAL_PUBLISH")&&i.dragging(),vOe(t,"DROP_ANIMATE")&&i.dropping(t.payload.completed.result.reason),(vOe(t,"FLUSH")||vOe(t,"DROP_COMPLETE"))&&i.resting(),e(t)}),(e=>()=>t=>n=>{(vOe(n,"DROP_COMPLETE")||vOe(n,"FLUSH")||vOe(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)})(e),(e=>({getState:t,dispatch:n})=>a=>r=>{if(!vOe(r,"LIFT"))return void a(r);const{id:s,clientSelection:i,movementMode:o}=r.payload,l=t();"DROP_ANIMATING"===l.phase&&n(AOe({completed:l.completed})),"IDLE"!==t().phase&&RDe(),n({type:"FLUSH",payload:null}),n((e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}))({draggableId:s,movementMode:o}));const c={draggableId:s,scrollOptions:{shouldPublishImmediately:"SNAP"===o}},{critical:d,dimensions:u,viewport:f}=e.startPublishing(c);n((e=>({type:"INITIAL_PUBLISH",payload:e}))({critical:d,dimensions:u,clientSelection:i,movementMode:o,viewport:f}))})(e),HOe,eRe,tRe,aRe,nRe(s),YOe,(e=>{let t=!1;return()=>n=>a=>{if(vOe(a,"INITIAL_PUBLISH"))return t=!0,e.tryRecordFocus(a.payload.critical.draggable.id),n(a),void e.tryRestoreFocusRecorded();if(n(a),t){if(vOe(a,"FLUSH"))return t=!1,void e.tryRestoreFocusRecorded();if(vOe(a,"DROP_COMPLETE")){t=!1;const n=a.payload.completed.result;n.combine&&e.tryShiftRecord(n.draggableId,n.combine.draggableId),e.tryRestoreFocusRecorded()}}}})(t),XOe(a,r))));var i};var iRe=({scrollHeight:e,scrollWidth:t,height:n,width:a})=>{const r=QDe({x:t,y:e},{x:a,y:n});return{x:Math.max(0,r.x),y:Math.max(0,r.y)}},oRe=()=>{const e=document.documentElement;return e||RDe(),e},lRe=()=>{const e=oRe();return iRe({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},cRe=({critical:e,scrollOptions:t,registry:n})=>{const a=(()=>{const e=qOe(),t=lRe(),n=e.y,a=e.x,r=oRe(),s=r.clientWidth,i=r.clientHeight;return{frame:jDe({top:n,left:a,right:a+s,bottom:n+i}),scroll:{initial:e,current:e,max:t,diff:{value:$De,displacement:$De}}}})(),r=a.scroll.current,s=e.droppable,i=n.droppable.getAllByType(s.type).map((e=>e.callbacks.getDimensionAndWatchScroll(r,t))),o=n.draggable.getAllByType(e.draggable.type).map((e=>e.getDimension(r)));return{dimensions:{draggables:cPe(o),droppables:lPe(i)},critical:e,viewport:a}};function dRe(e,t,n){if(n.descriptor.id===t.id)return!1;if(n.descriptor.type!==t.type)return!1;return"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode}var uRe=(e,t)=>{let n=null;const a=function({registry:e,callbacks:t}){let n={additions:{},removals:{},modified:{}},a=null;const r=()=>{a||(t.collectionStarting(),a=requestAnimationFrame((()=>{a=null;const{additions:r,removals:s,modified:i}=n,o=Object.keys(r).map((t=>e.draggable.getById(t).getDimension($De))).sort(((e,t)=>e.descriptor.index-t.descriptor.index)),l=Object.keys(i).map((t=>({droppableId:t,scroll:e.droppable.getById(t).callbacks.getScrollWhileDragging()}))),c={additions:o,removals:Object.keys(s),modified:l};n={additions:{},removals:{},modified:{}},t.publish(c)})))};return{add:e=>{const t=e.descriptor.id;n.additions[t]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[t]&&delete n.removals[t],r()},remove:e=>{const t=e.descriptor;n.removals[t.id]=!0,n.modified[t.droppableId]=!0,n.additions[t.id]&&delete n.additions[t.id],r()},stop:()=>{a&&(cancelAnimationFrame(a),a=null,n={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),r=t=>{n||RDe();const r=n.critical.draggable;"ADDITION"===t.type&&dRe(e,r,t.value)&&a.add(t.value),"REMOVAL"===t.type&&dRe(e,r,t.value)&&a.remove(t.value)};return{updateDroppableIsEnabled:(a,r)=>{e.droppable.exists(a)||RDe(),n&&t.updateDroppableIsEnabled({id:a,isEnabled:r})},updateDroppableIsCombineEnabled:(a,r)=>{n&&(e.droppable.exists(a)||RDe(),t.updateDroppableIsCombineEnabled({id:a,isCombineEnabled:r}))},scrollDroppable:(t,a)=>{n&&e.droppable.getById(t).callbacks.scroll(a)},updateDroppableScroll:(a,r)=>{n&&(e.droppable.exists(a)||RDe(),t.updateDroppableScroll({id:a,newScroll:r}))},startPublishing:t=>{n&&RDe();const a=e.draggable.getById(t.draggableId),s=e.droppable.getById(a.descriptor.droppableId),i={draggable:a.descriptor,droppable:s.descriptor},o=e.subscribe(r);return n={critical:i,unsubscribe:o},cRe({critical:i,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:()=>{if(!n)return;a.stop();const t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((e=>e.callbacks.dragStopped())),n.unsubscribe(),n=null}}},fRe=(e,t)=>"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason),mRe=e=>{window.scrollBy(e.x,e.y)};const pRe=oPe((e=>dPe(e).filter((e=>!!e.isEnabled&&!!e.frame))));var hRe=({center:e,destination:t,droppables:n})=>{if(t){const e=n[t];return e.frame?e:null}const a=((e,t)=>pRe(t).find((t=>(t.frame||RDe(),tOe(t.frame.pageMarginBox)(e))))||null)(e,n);return a};const gRe={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var xRe=({startOfRange:e,endOfRange:t,current:n})=>{const a=t-e;if(0===a)return 0;return(n-e)/a},yRe=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:r})=>{const s=((e,t,n=()=>gRe)=>{const a=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return a.maxPixelScroll;if(e===t.startScrollingFrom)return 1;const r=1-xRe({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),s=a.maxPixelScroll*a.ease(r);return Math.ceil(s)})(e,t,r);return 0===s?0:a?Math.max(((e,t,n)=>{const a=n(),r=a.durationDampening.accelerateAt,s=a.durationDampening.stopDampeningAt,i=t,o=s,l=Date.now()-i;if(l>=s)return e;if(l<r)return 1;const c=xRe({startOfRange:r,endOfRange:o,current:l}),d=e*a.ease(c);return Math.ceil(d)})(s,n,r),1):s},vRe=({container:e,distanceToEdges:t,dragStartTime:n,axis:a,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const i=((e,t,n=()=>gRe)=>{const a=n();return{startScrollingFrom:e[t.size]*a.startFromPercentage,maxScrollValueAt:e[t.size]*a.maxScrollAtPercentage}})(e,a,s);return t[a.end]<t[a.start]?yRe({distanceToEdge:t[a.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s}):-1*yRe({distanceToEdge:t[a.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s})};const bRe=tPe((e=>0===e?0:e));var wRe=({dragStartTime:e,container:t,subject:n,center:a,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const i={top:a.y-t.top,right:t.right-a.x,bottom:t.bottom-a.y,left:a.x-t.left},o=vRe({container:t,distanceToEdges:i,dragStartTime:e,axis:NPe,shouldUseTimeDampening:r,getAutoScrollerOptions:s}),l=vRe({container:t,distanceToEdges:i,dragStartTime:e,axis:CPe,shouldUseTimeDampening:r,getAutoScrollerOptions:s}),c=bRe({x:l,y:o});if(KDe(c,$De))return null;const d=(({container:e,subject:t,proposedScroll:n})=>{const a=t.height>e.height,r=t.width>e.width;return r||a?r&&a?null:{x:r?0:n.x,y:a?0:n.y}:n})({container:t,subject:n,proposedScroll:c});return d?KDe(d,$De)?null:d:null};const jRe=tPe((e=>0===e?0:e>0?1:-1)),NRe=(()=>{const e=(e,t)=>e<0?e:e>t?e-t:0;return({current:t,max:n,change:a})=>{const r=YDe(t,a),s={x:e(r.x,n.x),y:e(r.y,n.y)};return KDe(s,$De)?null:s}})(),CRe=({max:e,current:t,change:n})=>{const a={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},r=jRe(n),s=NRe({max:a,current:t,change:r});return!s||(0!==r.x&&0===s.x||0!==r.y&&0===s.y)},SRe=(e,t)=>CRe({current:e.scroll.current,max:e.scroll.max,change:t}),kRe=(e,t)=>{const n=e.frame;return!!n&&CRe({current:n.scroll.current,max:n.scroll.max,change:t})};var MRe=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:a,scrollDroppable:r,getAutoScrollerOptions:s})=>{const i=e.current.page.borderBoxCenter,o=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const r=(({viewport:e,subject:t,center:n,dragStartTime:a,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const i=wRe({dragStartTime:a,container:e.frame,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s});return i&&SRe(e,i)?i:null})({dragStartTime:t,viewport:e.viewport,subject:o,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:s});if(r)return void a(r)}const l=hRe({center:i,destination:ZPe(e.impact),droppables:e.dimensions.droppables});if(!l)return;const c=(({droppable:e,subject:t,center:n,dragStartTime:a,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const i=e.frame;if(!i)return null;const o=wRe({dragStartTime:a,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s});return o&&kRe(e,o)?o:null})({dragStartTime:t,droppable:l,subject:o,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:s});c&&r(l.descriptor.id,c)},_Re=({move:e,scrollDroppable:t,scrollWindow:n})=>{const a=(e,n)=>{if(!kRe(e,n))return n;const a=((e,t)=>{const n=e.frame;return n&&kRe(e,t)?NRe({current:n.scroll.current,max:n.scroll.max,change:t}):null})(e,n);if(!a)return t(e.descriptor.id,n),null;const r=QDe(n,a);t(e.descriptor.id,r);return QDe(n,r)},r=(e,t,a)=>{if(!e)return a;if(!SRe(t,a))return a;const r=((e,t)=>{if(!SRe(e,t))return null;const n=e.scroll.max,a=e.scroll.current;return NRe({current:a,max:n,change:t})})(t,a);if(!r)return n(a),null;const s=QDe(a,r);n(s);return QDe(a,s)};return t=>{const n=t.scrollJumpRequest;if(!n)return;const s=ZPe(t.impact);s||RDe();const i=a(t.dimensions.droppables[s],n);if(!i)return;const o=t.viewport,l=r(t.isWindowScrollAllowed,o,i);l&&((t,n)=>{const a=YDe(t.current.client.selection,n);e({client:a})})(t,l)}},IRe=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:a})=>{const r=(({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>gRe})=>{const a=LDe(e),r=LDe(t);let s=null;const i=e=>{s||RDe();const{shouldUseTimeDampening:t,dragStartTime:i}=s;MRe({state:e,scrollWindow:a,scrollDroppable:r,dragStartTime:i,shouldUseTimeDampening:t,getAutoScrollerOptions:n})};return{start:e=>{s&&RDe();const t=Date.now();let a=!1;const r=()=>{a=!0};MRe({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r,getAutoScrollerOptions:n}),s={dragStartTime:t,shouldUseTimeDampening:a},a&&i(e)},stop:()=>{s&&(a.cancel(),r.cancel(),s=null)},scroll:i}})({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:a}),s=_Re({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:e=>{a().disabled||"DRAGGING"!==e.phase||("FLUID"!==e.movementMode?e.scrollJumpRequest&&s(e):r.scroll(e))},start:r.start,stop:r.stop}};const ARe="data-rfd",ERe=(()=>{const e=`${ARe}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),LRe=(()=>{const e=`${ARe}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),TRe=(()=>{const e=`${ARe}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),DRe={contextId:`${ARe}-scroll-container-context-id`},PRe=(e,t)=>e.map((e=>{const n=e.styles[t];return n?`${e.selector} { ${n} }`:""})).join(" ");const ORe="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?cs.useLayoutEffect:cs.useEffect,RRe=()=>{const e=document.querySelector("head");return e||RDe(),e},zRe=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function FRe(e,t){const n=HDe((()=>(e=>{const t=(n=e,e=>`[${e}="${n}"]`);var n;const a=(()=>{const e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:t(ERe.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}})(),r=[(()=>{const e=`\n      transition: ${zOe.outOfTheWay};\n    `;return{selector:t(LRe.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}})(),a,{selector:t(TRe.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:PRe(r,"always"),resting:PRe(r,"resting"),dragging:PRe(r,"dragging"),dropAnimating:PRe(r,"dropAnimating"),userCancel:PRe(r,"userCancel")}})(e)),[e]),a=cs.useRef(null),r=cs.useRef(null),s=qDe(oPe((e=>{const t=r.current;t||RDe(),t.textContent=e})),[]),i=qDe((e=>{const t=a.current;t||RDe(),t.textContent=e}),[]);ORe((()=>{(a.current||r.current)&&RDe();const o=zRe(t),l=zRe(t);return a.current=o,r.current=l,o.setAttribute(`${ARe}-always`,e),l.setAttribute(`${ARe}-dynamic`,e),RRe().appendChild(o),RRe().appendChild(l),i(n.always),s(n.resting),()=>{const e=e=>{const t=e.current;t||RDe(),RRe().removeChild(t),e.current=null};e(a),e(r)}}),[t,i,s,n.always,n.resting,e]);const o=qDe((()=>s(n.dragging)),[s,n.dragging]),l=qDe((e=>{s("DROP"!==e?n.userCancel:n.dropAnimating)}),[s,n.dropAnimating,n.userCancel]),c=qDe((()=>{r.current&&s(n.resting)}),[s,n.resting]);return HDe((()=>({dragging:o,dropping:l,resting:c})),[o,l,c])}function BRe(e,t){return Array.from(e.querySelectorAll(t))}var URe=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function WRe(e){return e instanceof URe(e).HTMLElement}function GRe(e){const t=cs.useRef({}),n=cs.useRef(null),a=cs.useRef(null),r=cs.useRef(!1),s=qDe((function(e,n){const a={id:e,focus:n};return t.current[e]=a,function(){const n=t.current;n[e]!==a&&delete n[e]}}),[]),i=qDe((function(t){const n=function(e,t){const n=`[${ERe.contextId}="${e}"]`,a=BRe(document,n);if(!a.length)return null;const r=a.find((e=>e.getAttribute(ERe.draggableId)===t));return r&&WRe(r)?r:null}(e,t);n&&n!==document.activeElement&&n.focus()}),[e]),o=qDe((function(e,t){n.current===e&&(n.current=t)}),[]),l=qDe((function(){a.current||r.current&&(a.current=requestAnimationFrame((()=>{a.current=null;const e=n.current;e&&i(e)})))}),[i]),c=qDe((function(e){n.current=null;const t=document.activeElement;t&&t.getAttribute(ERe.draggableId)===e&&(n.current=e)}),[]);ORe((()=>(r.current=!0,function(){r.current=!1;const e=a.current;e&&cancelAnimationFrame(e)})),[]);return HDe((()=>({register:s,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:o})),[s,c,l,o])}function VRe(){const e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach((t=>t(e)))}function a(t){return e.draggables[t]||null}function r(t){return e.droppables[t]||null}return{draggable:{register:t=>{e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:(t,n)=>{const a=e.draggables[n.descriptor.id];a&&a.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:t=>{const r=t.descriptor.id,s=a(r);s&&t.uniqueId===s.uniqueId&&(delete e.draggables[r],e.droppables[t.descriptor.droppableId]&&n({type:"REMOVAL",value:t}))},getById:function(e){const t=a(e);return t||RDe(),t},findById:a,exists:e=>Boolean(a(e)),getAllByType:t=>Object.values(e.draggables).filter((e=>e.descriptor.type===t))},droppable:{register:t=>{e.droppables[t.descriptor.id]=t},unregister:t=>{const n=r(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){const t=r(e);return t||RDe(),t},findById:r,exists:e=>Boolean(r(e)),getAllByType:t=>Object.values(e.droppables).filter((e=>e.descriptor.type===t))},subscribe:function(e){return t.push(e),function(){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var HRe=ds.createContext(null),qRe=()=>{const e=document.body;return e||RDe(),e};const $Re={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};const YRe={separator:"::"};function QRe(e,t=YRe){const n=ds.useId();return HDe((()=>`${e}${t.separator}${n}`),[t.separator,e,n])}var KRe=ds.createContext(null);function JRe(e){const t=cs.useRef(e);return cs.useEffect((()=>{t.current=e})),t}function ZRe(e){return"IDLE"!==e.phase&&"DROP_ANIMATING"!==e.phase&&e.isDragging}const XRe=9,eze=13,tze=33,nze=34,aze=35,rze=36,sze={[eze]:!0,[XRe]:!0};var ize=e=>{sze[e.keyCode]&&e.preventDefault()};const oze=(()=>{const e="visibilitychange";if("undefined"==typeof document)return e;return[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find((e=>`on${e}`in document))||e})();const lze={type:"IDLE"};function cze({cancel:e,completed:t,getPhase:n,setPhase:a}){return[{eventName:"mousemove",fn:e=>{const{button:t,clientX:r,clientY:s}=e;if(0!==t)return;const i={x:r,y:s},o=n();if("DRAGGING"===o.type)return e.preventDefault(),void o.actions.move(i);"PENDING"!==o.type&&RDe();const l=o.point;if(c=l,d=i,!(Math.abs(d.x-c.x)>=5||Math.abs(d.y-c.y)>=5))return;var c,d;e.preventDefault();const u=o.actions.fluidLift(i);a({type:"DRAGGING",actions:u})}},{eventName:"mouseup",fn:a=>{const r=n();"DRAGGING"===r.type?(a.preventDefault(),r.actions.drop({shouldBlockNextClick:!0}),t()):e()}},{eventName:"mousedown",fn:t=>{"DRAGGING"===n().type&&t.preventDefault(),e()}},{eventName:"keydown",fn:t=>{if("PENDING"!==n().type)return 27===t.keyCode?(t.preventDefault(),void e()):void ize(t);e()}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{"PENDING"===n().type&&e()}},{eventName:"webkitmouseforcedown",fn:t=>{const a=n();"IDLE"===a.type&&RDe(),a.actions.shouldRespectForcePress()?e():t.preventDefault()}},{eventName:oze,fn:e}]}function dze(){}const uze={[nze]:!0,[tze]:!0,[rze]:!0,[aze]:!0};function fze(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:a=>27===a.keyCode?(a.preventDefault(),void n()):32===a.keyCode?(a.preventDefault(),t(),void e.drop()):40===a.keyCode?(a.preventDefault(),void e.moveDown()):38===a.keyCode?(a.preventDefault(),void e.moveUp()):39===a.keyCode?(a.preventDefault(),void e.moveRight()):37===a.keyCode?(a.preventDefault(),void e.moveLeft()):void(uze[a.keyCode]?a.preventDefault():ize(a))},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:oze,fn:n}]}const mze={type:"IDLE"};const pze=["input","button","textarea","select","option","optgroup","video","audio"];function hze(e,t){if(null==t)return!1;if(pze.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&hze(e,t.parentElement)}function gze(e,t){const n=t.target;return!!WRe(n)&&hze(e,n)}var xze=e=>jDe(e.getBoundingClientRect()).center;const yze=(()=>{const e="matches";if("undefined"==typeof document)return e;return[e,"msMatchesSelector","webkitMatchesSelector"].find((e=>e in Element.prototype))||e})();function vze(e,t){return null==e?null:e[yze](t)?e:vze(e.parentElement,t)}function bze(e,t){return e.closest?e.closest(t):vze(e,t)}function wze(e,t){const n=t.target;if(!((a=n)instanceof URe(a).Element))return null;var a;const r=function(e){return`[${ERe.contextId}="${e}"]`}(e),s=bze(n,r);return s&&WRe(s)?s:null}function jze(e){e.preventDefault()}function Nze({expected:e,phase:t,isLockActive:n,shouldWarn:a}){return!!n()&&e===t}function Cze({lockAPI:e,store:t,registry:n,draggableId:a}){if(e.isClaimed())return!1;const r=n.draggable.findById(a);return!!r&&(!!r.options.isEnabled&&!!fRe(t.getState(),a))}function Sze({lockAPI:e,contextId:t,store:n,registry:a,draggableId:r,forceSensorStop:s,sourceEvent:i}){if(!Cze({lockAPI:e,store:n,registry:a,draggableId:r}))return null;const o=a.draggable.getById(r),l=function(e,t){const n=`[${LRe.contextId}="${e}"]`,a=BRe(document,n).find((e=>e.getAttribute(LRe.id)===t));return a&&WRe(a)?a:null}(t,o.descriptor.id);if(!l)return null;if(i&&!o.options.canDragInteractiveElements&&gze(l,i))return null;const c=e.claim(s||DDe);let d="PRE_DRAG";function u(){return o.options.shouldRespectForcePress}function f(){return e.isActive(c)}const m=function(e,t){Nze({expected:e,phase:d,isLockActive:f,shouldWarn:!0})&&n.dispatch(t())}.bind(null,"DRAGGING");function p(t){function a(){e.release(),d="COMPLETED"}function r(e,r={shouldBlockNextClick:!1}){if(t.cleanup(),r.shouldBlockNextClick){const e=PDe(window,[{eventName:"click",fn:jze,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(e)}a(),n.dispatch(EOe({reason:e}))}return"PRE_DRAG"!==d&&(a(),RDe()),n.dispatch((e=>({type:"LIFT",payload:e}))(t.liftActionArgs)),d="DRAGGING",{isActive:()=>Nze({expected:"DRAGGING",phase:d,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:u,drop:e=>r("DROP",e),cancel:e=>r("CANCEL",e),...t.actions}}return{isActive:()=>Nze({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:u,fluidLift:function(e){const t=LDe((e=>{m((()=>SOe({client:e})))}));return{...p({liftActionArgs:{id:r,clientSelection:e,movementMode:"FLUID"},cleanup:()=>t.cancel(),actions:{move:t}}),move:t}},snapLift:function(){const e={moveUp:()=>m(kOe),moveRight:()=>m(_Oe),moveDown:()=>m(MOe),moveLeft:()=>m(IOe)};return p({liftActionArgs:{id:r,clientSelection:xze(l),movementMode:"SNAP"},cleanup:DDe,actions:e})},abort:function(){Nze({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!0})&&e.release()}}}const kze=[function(e){const t=cs.useRef(lze),n=cs.useRef(DDe),a=HDe((()=>({eventName:"mousedown",fn:function(t){if(t.defaultPrevented)return;if(0!==t.button)return;if(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)return;const a=e.findClosestDraggableId(t);if(!a)return;const r=e.tryGetLock(a,i,{sourceEvent:t});if(!r)return;t.preventDefault();const s={x:t.clientX,y:t.clientY};n.current(),c(r,s)}})),[e]),r=HDe((()=>({eventName:"webkitmouseforcewillbegin",fn:t=>{if(t.defaultPrevented)return;const n=e.findClosestDraggableId(t);if(!n)return;const a=e.findOptionsForDraggable(n);a&&(a.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}})),[e]),s=qDe((function(){n.current=PDe(window,[r,a],{passive:!1,capture:!0})}),[r,a]),i=qDe((()=>{"IDLE"!==t.current.type&&(t.current=lze,n.current(),s())}),[s]),o=qDe((()=>{const e=t.current;i(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[i]),l=qDe((function(){const e=cze({cancel:o,completed:i,getPhase:()=>t.current,setPhase:e=>{t.current=e}});n.current=PDe(window,e,{capture:!0,passive:!1})}),[o,i]),c=qDe((function(e,n){"IDLE"!==t.current.type&&RDe(),t.current={type:"PENDING",point:n,actions:e},l()}),[l]);ORe((function(){return s(),function(){n.current()}}),[s])},function(e){const t=cs.useRef(dze),n=HDe((()=>({eventName:"keydown",fn:function(n){if(n.defaultPrevented)return;if(32!==n.keyCode)return;const r=e.findClosestDraggableId(n);if(!r)return;const s=e.tryGetLock(r,l,{sourceEvent:n});if(!s)return;n.preventDefault();let i=!0;const o=s.snapLift();function l(){i||RDe(),i=!1,t.current(),a()}t.current(),t.current=PDe(window,fze(o,l),{capture:!0,passive:!1})}})),[e]),a=qDe((function(){t.current=PDe(window,[n],{passive:!1,capture:!0})}),[n]);ORe((function(){return a(),function(){t.current()}}),[a])},function(e){const t=cs.useRef(mze),n=cs.useRef(DDe),a=qDe((function(){return t.current}),[]),r=qDe((function(e){t.current=e}),[]),s=HDe((()=>({eventName:"touchstart",fn:function(t){if(t.defaultPrevented)return;const a=e.findClosestDraggableId(t);if(!a)return;const r=e.tryGetLock(a,o,{sourceEvent:t});if(!r)return;const s=t.touches[0],{clientX:i,clientY:l}=s,c={x:i,y:l};n.current(),u(r,c)}})),[e]),i=qDe((function(){n.current=PDe(window,[s],{capture:!0,passive:!1})}),[s]),o=qDe((()=>{const e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),r(mze),n.current(),i())}),[i,r]),l=qDe((()=>{const e=t.current;o(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[o]),c=qDe((function(){const e={capture:!0,passive:!1},t={cancel:l,completed:o,getPhase:a},r=PDe(window,function({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:t=>{const a=n();if("DRAGGING"!==a.type)return void e();a.hasMoved=!0;const{clientX:r,clientY:s}=t.touches[0],i={x:r,y:s};t.preventDefault(),a.actions.move(i)}},{eventName:"touchend",fn:a=>{const r=n();"DRAGGING"===r.type?(a.preventDefault(),r.actions.drop({shouldBlockNextClick:!0}),t()):e()}},{eventName:"touchcancel",fn:t=>{"DRAGGING"===n().type?(t.preventDefault(),e()):e()}},{eventName:"touchforcechange",fn:t=>{const a=n();"IDLE"===a.type&&RDe();const r=t.touches[0];if(!r)return;if(!(r.force>=.15))return;const s=a.actions.shouldRespectForcePress();if("PENDING"!==a.type)return s?a.hasMoved?void t.preventDefault():void e():void t.preventDefault();s&&e()}},{eventName:oze,fn:e}]}(t),e),s=PDe(window,function({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:e=>{e.preventDefault()}},{eventName:"keydown",fn:n=>{"DRAGGING"===t().type?(27===n.keyCode&&n.preventDefault(),e()):e()}},{eventName:oze,fn:e}]}(t),e);n.current=function(){r(),s()}}),[l,a,o]),d=qDe((function(){const e=a();"PENDING"!==e.type&&RDe();const t=e.actions.fluidLift(e.point);r({type:"DRAGGING",actions:t,hasMoved:!1})}),[a,r]),u=qDe((function(e,t){"IDLE"!==a().type&&RDe();const n=setTimeout(d,120);r({type:"PENDING",point:t,actions:e,longPressTimerId:n}),c()}),[c,a,r,d]);ORe((function(){return i(),function(){n.current();const e=a();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),r(mze))}}),[a,i,r]),ORe((function(){return PDe(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])}),[])}];function Mze({contextId:e,store:t,registry:n,customSensors:a,enableDefaultSensors:r}){const s=[...r?kze:[],...a||[]],i=cs.useState((()=>function(){let e=null;function t(){e||RDe(),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&RDe();const n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()))[0],o=qDe((function(e,t){ZRe(e)&&!ZRe(t)&&i.tryAbandon()}),[i]);ORe((function(){let e=t.getState();return t.subscribe((()=>{const n=t.getState();o(e,n),e=n}))}),[i,t,o]),ORe((()=>i.tryAbandon),[i.tryAbandon]);const l=qDe((e=>Cze({lockAPI:i,registry:n,store:t,draggableId:e})),[i,n,t]),c=qDe(((a,r,s)=>Sze({lockAPI:i,registry:n,contextId:e,store:t,draggableId:a,forceSensorStop:r||null,sourceEvent:s&&s.sourceEvent?s.sourceEvent:null})),[e,i,n,t]),d=qDe((t=>function(e,t){const n=wze(e,t);return n?n.getAttribute(ERe.draggableId):null}(e,t)),[e]),u=qDe((e=>{const t=n.draggable.findById(e);return t?t.options:null}),[n.draggable]),f=qDe((function(){i.isClaimed()&&(i.tryAbandon(),"IDLE"!==t.getState().phase&&t.dispatch({type:"FLUSH",payload:null}))}),[i,t]),m=qDe((()=>i.isClaimed()),[i]),p=HDe((()=>({canGetLock:l,tryGetLock:c,findClosestDraggableId:d,findOptionsForDraggable:u,tryReleaseLock:f,isLockClaimed:m})),[l,c,d,u,f,m]);for(let h=0;h<s.length;h++)s[h](p)}function _ze(e){return e.current||RDe(),e.current}function Ize(e){const{contextId:t,setCallbacks:n,sensors:a,nonce:r,dragHandleUsageInstructions:s}=e,i=cs.useRef(null),o=JRe(e),l=qDe((()=>(e=>({onBeforeCapture:t=>{Sg.flushSync((()=>{e.onBeforeCapture&&e.onBeforeCapture(t)}))},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}))(o.current)),[o]),c=qDe((()=>(e=>({...gRe,...e.autoScrollerOptions,durationDampening:{...gRe.durationDampening,...e.autoScrollerOptions}}))(o.current)),[o]),d=function(e){const t=HDe((()=>(e=>`rfd-announcement-${e}`)(e)),[e]),n=cs.useRef(null);return cs.useEffect((function(){const e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),hwe(e.style,$Re),qRe().appendChild(e),function(){setTimeout((function(){const t=qRe();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)}))}}),[t]),qDe((e=>{const t=n.current;t&&(t.textContent=e)}),[])}(t),u=function({contextId:e,text:t}){const n=QRe("hidden-text",{separator:"-"}),a=HDe((()=>function({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}({contextId:e,uniqueId:n})),[n,e]);return cs.useEffect((function(){const e=document.createElement("div");return e.id=a,e.textContent=t,e.style.display="none",qRe().appendChild(e),function(){const t=qRe();t.contains(e)&&t.removeChild(e)}}),[a,t]),a}({contextId:t,text:s}),f=FRe(t,r),m=qDe((e=>{_ze(i).dispatch(e)}),[]),p=HDe((()=>NTe({publishWhileDragging:bOe,updateDroppableScroll:jOe,updateDroppableIsEnabled:NOe,updateDroppableIsCombineEnabled:COe,collectionStarting:wOe},m)),[m]),h=function(){const e=HDe(VRe,[]);return cs.useEffect((()=>function(){e.clean()}),[e]),e}(),g=HDe((()=>uRe(h,p)),[h,p]),x=HDe((()=>IRe({scrollWindow:mRe,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:c,...NTe({move:SOe},m)})),[g.scrollDroppable,m,c]),y=GRe(t),v=HDe((()=>sRe({announce:d,autoScroller:x,dimensionMarshal:g,focusMarshal:y,getResponders:l,styleMarshal:f})),[d,x,g,y,l,f]);i.current=v;const b=qDe((()=>{const e=_ze(i);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})}),[]),w=qDe((()=>{const e=_ze(i).getState();return"DROP_ANIMATING"===e.phase||"IDLE"!==e.phase&&e.isDragging}),[]);n(HDe((()=>({isDragging:w,tryAbort:b})),[w,b]));const j=qDe((e=>fRe(_ze(i).getState(),e)),[]),N=qDe((()=>eOe(_ze(i).getState())),[]),C=HDe((()=>({marshal:g,focus:y,contextId:t,canLift:j,isMovementAllowed:N,dragHandleUsageInstructionsId:u,registry:h})),[t,g,u,y,j,N,h]);return Mze({contextId:t,store:v,registry:h,customSensors:a||null,enableDefaultSensors:!1!==e.enableDefaultSensors}),cs.useEffect((()=>b),[b]),ds.createElement(KRe.Provider,{value:C},ds.createElement(wDe,{context:HRe,store:v},e.children))}function Aze(e){const t=ds.useId(),n=e.dragHandleUsageInstructions||GDe.dragHandleUsageInstructions;return ds.createElement(zDe,null,(a=>ds.createElement(Ize,{nonce:e.nonce,contextId:t,setCallbacks:a,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children)))}const Eze=5e3,Lze=4500,Tze=(e,t)=>t?zOe.drop(t.duration):e?zOe.snap:zOe.fluid,Dze=(e,t)=>{if(e)return t?DOe.drop:DOe.combining};function Pze(e){return"DRAGGING"===e.type?function(e){const t=e.dimension.client,{offset:n,combineWith:a,dropping:r}=e,s=Boolean(a),i=(e=>null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode)(e),o=Boolean(r),l=o?UOe(n,s):BOe(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:Tze(i,r),transform:l,opacity:Dze(s,o),zIndex:o?Lze:Eze,pointerEvents:"none"}}(e):{transform:BOe((t=e).offset),transition:t.shouldAnimateDisplacement?void 0:"none"};var t}function Oze(e){const t=QRe("draggable"),{descriptor:n,registry:a,getDraggableRef:r,canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:o}=e,l=HDe((()=>({canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:o})),[s,o,i]),c=qDe((e=>{const t=r();return t||RDe(),function(e,t,n=$De){const a=window.getComputedStyle(t),r=t.getBoundingClientRect(),s=ADe(r,a),i=IDe(s,n);return{descriptor:e,placeholder:{client:s,tagName:t.tagName.toLowerCase(),display:a.display},displaceBy:{x:s.marginBox.width,y:s.marginBox.height},client:s,page:i}}(n,t,e)}),[n,r]),d=HDe((()=>({uniqueId:t,descriptor:n,options:l,getDimension:c})),[n,c,l,t]),u=cs.useRef(d),f=cs.useRef(!0);ORe((()=>(a.draggable.register(u.current),()=>a.draggable.unregister(u.current))),[a.draggable]),ORe((()=>{if(f.current)return void(f.current=!1);const e=u.current;u.current=d,a.draggable.update(d,e)}),[d,a.draggable])}var Rze=ds.createContext(null);function zze(e){const t=cs.useContext(e);return t||RDe(),t}function Fze(e){e.preventDefault()}var Bze=(e,t)=>e===t,Uze=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};function Wze(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Gze={mapped:{type:"SECONDARY",offset:$De,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Wze(null)}};const Vze=bDe((()=>{const e=function(){const e=oPe(((e,t)=>({x:e,y:t}))),t=oPe(((e,t,n=null,a=null,r=null)=>({isDragging:!0,isClone:t,isDropAnimating:Boolean(r),dropAnimation:r,mode:e,draggingOver:n,combineWith:a,combineTargetFor:null}))),n=oPe(((e,n,a,r,s=null,i=null,o=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:s,combineWith:i,mode:n,offset:e,dimension:a,forceShouldAnimate:o,snapshot:t(n,r,s,i,null)}})));return(a,r)=>{if(ZRe(a)){if(a.critical.draggable.id!==r.draggableId)return null;const t=a.current.client.offset,i=a.dimensions.draggables[r.draggableId],o=ZPe(a.impact),l=(s=a.impact).at&&"COMBINE"===s.at.type?s.at.combine.draggableId:null,c=a.forceShouldAnimate;return n(e(t.x,t.y),a.movementMode,i,r.isClone,o,l,c)}var s;if("DROP_ANIMATING"===a.phase){const e=a.completed;if(e.result.draggableId!==r.draggableId)return null;const n=r.isClone,s=a.dimensions.draggables[r.draggableId],i=e.result,o=i.mode,l=Uze(i),c=(e=>e.combine?e.combine.draggableId:null)(i),d={duration:a.dropDuration,curve:TOe,moveTo:a.newHomeClientOffset,opacity:c?DOe.drop:null,scale:c?POe.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:s,dropping:d,draggingOver:l,combineWith:c,mode:o,forceShouldAnimate:null,snapshot:t(o,n,l,c,d)}}}return null}}(),t=function(){const e=oPe(((e,t)=>({x:e,y:t}))),t=oPe(Wze),n=oPe(((e,n=null,a)=>({mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:a,snapshot:t(n)}}))),a=e=>e?n($De,e,!0):null,r=(t,r,s,i)=>{const o=s.displaced.visible[t],l=Boolean(i.inVirtualList&&i.effected[t]),c=pPe(s),d=c&&c.draggableId===t?r:null;if(!o){if(!l)return a(d);if(s.displaced.invisible[t])return null;const r=JDe(i.displacedBy.point),o=e(r.x,r.y);return n(o,d,!0)}if(l)return a(d);const u=s.displacedBy.point,f=e(u.x,u.y);return n(f,d,o.shouldAnimate)};return(e,t)=>{if(ZRe(e))return e.critical.draggable.id===t.draggableId?null:r(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){const n=e.completed;return n.result.draggableId===t.draggableId?null:r(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return(n,a)=>e(n,a)||t(n,a)||Gze}),{dropAnimationFinished:LOe},null,{context:HRe,areStatePropsEqual:Bze})((e=>{const t=cs.useRef(null),n=qDe(((e=null)=>{t.current=e}),[]),a=qDe((()=>t.current),[]),{contextId:r,dragHandleUsageInstructionsId:s,registry:i}=zze(KRe),{type:o,droppableId:l}=zze(Rze),c=HDe((()=>({id:e.draggableId,index:e.index,type:o,droppableId:l})),[e.draggableId,e.index,o,l]),{children:d,draggableId:u,isEnabled:f,shouldRespectForcePress:m,canDragInteractiveElements:p,isClone:h,mapped:g,dropAnimationFinished:x}=e;if(!h){Oze(HDe((()=>({descriptor:c,registry:i,getDraggableRef:a,canDragInteractiveElements:p,shouldRespectForcePress:m,isEnabled:f})),[c,i,a,p,m,f]))}const y=HDe((()=>f?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":u,"data-rfd-drag-handle-context-id":r,draggable:!1,onDragStart:Fze}:null),[r,s,u,f]),v=qDe((e=>{"DRAGGING"===g.type&&g.dropping&&"transform"===e.propertyName&&Sg.flushSync(x)}),[x,g]),b=HDe((()=>{const e=Pze(g),t="DRAGGING"===g.type&&g.dropping?v:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":r,"data-rfd-draggable-id":u,style:e,onTransitionEnd:t},dragHandleProps:y}}),[r,y,u,g,v,n]),w=HDe((()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}})),[c.droppableId,c.id,c.index,c.type]);return ds.createElement(ds.Fragment,null,d(b,g.snapshot,w))}));function Hze(e){return zze(Rze).isUsingCloneFor!==e.draggableId||e.isClone?ds.createElement(Vze,e):null}function qze(e){const t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),a=Boolean(e.shouldRespectForcePress);return ds.createElement(Hze,hwe({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:a}))}const $ze=e=>t=>e===t,Yze=$ze("scroll"),Qze=$ze("auto"),Kze=(e,t)=>t(e.overflowX)||t(e.overflowY),Jze=e=>null==e||e===document.body||e===document.documentElement?null:(e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Kze(n,Yze)||Kze(n,Qze)})(e)?e:Jze(e.parentElement);var Zze=e=>({x:e.scrollLeft,y:e.scrollTop});const Xze=e=>{if(!e)return!1;return"fixed"===window.getComputedStyle(e).position||Xze(e.parentElement)};var eFe=({ref:e,descriptor:t,env:n,windowScroll:a,direction:r,isDropDisabled:s,isCombineEnabled:i,shouldClipSubject:o})=>{const l=n.closestScrollable,c=((e,t)=>{const n=EDe(e);if(!t)return n;if(e!==t)return n;const a=n.paddingBox.top-t.scrollTop,r=n.paddingBox.left-t.scrollLeft,s=a+t.scrollHeight,i=r+t.scrollWidth,o=NDe({top:a,right:i,bottom:s,left:r},n.border);return kDe({borderBox:o,margin:n.margin,border:n.border,padding:n.padding})})(e,l),d=IDe(c,a),u=(()=>{if(!l)return null;const e=EDe(l),t={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:e,page:IDe(e,a),scroll:Zze(l),scrollSize:t,shouldClipSubject:o}})(),f=(({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:a,direction:r,client:s,page:i,closest:o})=>{const l=(()=>{if(!o)return null;const{scrollSize:e,client:t}=o,n=iRe({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:o.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:o.shouldClipSubject,scroll:{initial:o.scroll,current:o.scroll,max:n,diff:{value:$De,displacement:$De}}}})(),c="vertical"===r?NPe:CPe;return{descriptor:e,isCombineEnabled:n,isFixedOnPage:a,axis:c,isEnabled:t,client:s,page:i,frame:l,subject:sPe({page:i,withPlaceholder:null,axis:c,frame:l})}})({descriptor:t,isEnabled:!s,isCombineEnabled:i,isFixedOnPage:n.isFixedOnPage,direction:r,client:c,page:d,closest:u});return f};const tFe={passive:!1},nFe={passive:!0};var aFe=e=>e.shouldPublishImmediately?tFe:nFe;const rFe=e=>e&&e.env.closestScrollable||null;function sFe(e){const t=cs.useRef(null),n=zze(KRe),a=QRe("droppable"),{registry:r,marshal:s}=n,i=JRe(e),o=HDe((()=>({id:e.droppableId,type:e.type,mode:e.mode})),[e.droppableId,e.mode,e.type]),l=cs.useRef(o),c=HDe((()=>oPe(((e,n)=>{t.current||RDe();const a={x:e,y:n};s.updateDroppableScroll(o.id,a)}))),[o.id,s]),d=qDe((()=>{const e=t.current;return e&&e.env.closestScrollable?Zze(e.env.closestScrollable):$De}),[]),u=qDe((()=>{const e=d();c(e.x,e.y)}),[d,c]),f=HDe((()=>LDe(u)),[u]),m=qDe((()=>{const e=t.current,n=rFe(e);e&&n||RDe();e.scrollOptions.shouldPublishImmediately?u():f()}),[f,u]),p=qDe(((e,a)=>{t.current&&RDe();const r=i.current,s=r.getDroppableRef();s||RDe();const l={closestScrollable:Jze(c=s),isFixedOnPage:Xze(c)};var c;const d={ref:s,descriptor:o,env:l,scrollOptions:a};t.current=d;const u=eFe({ref:s,descriptor:o,env:l,windowScroll:e,direction:r.direction,isDropDisabled:r.isDropDisabled,isCombineEnabled:r.isCombineEnabled,shouldClipSubject:!r.ignoreContainerClipping}),f=l.closestScrollable;return f&&(f.setAttribute(DRe.contextId,n.contextId),f.addEventListener("scroll",m,aFe(d.scrollOptions))),u}),[n.contextId,o,m,i]),h=qDe((()=>{const e=t.current,n=rFe(e);return e&&n||RDe(),Zze(n)}),[]),g=qDe((()=>{const e=t.current;e||RDe();const n=rFe(e);t.current=null,n&&(f.cancel(),n.removeAttribute(DRe.contextId),n.removeEventListener("scroll",m,aFe(e.scrollOptions)))}),[m,f]),x=qDe((e=>{const n=t.current;n||RDe();const a=rFe(n);a||RDe(),a.scrollTop+=e.y,a.scrollLeft+=e.x}),[]),y=HDe((()=>({getDimensionAndWatchScroll:p,getScrollWhileDragging:h,dragStopped:g,scroll:x})),[g,p,h,x]),v=HDe((()=>({uniqueId:a,descriptor:o,callbacks:y})),[y,o,a]);ORe((()=>(l.current=v.descriptor,r.droppable.register(v),()=>{t.current&&g(),r.droppable.unregister(v)})),[y,o,g,v,s,r.droppable]),ORe((()=>{t.current&&s.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)}),[e.isDropDisabled,s]),ORe((()=>{t.current&&s.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,s])}function iFe(){}const oFe={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},lFe=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const a=(({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||"close"===n?oFe:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin})({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==n?zOe.placeholder:null}};var cFe=ds.memo((e=>{const t=cs.useRef(null),n=qDe((()=>{t.current&&(clearTimeout(t.current),t.current=null)}),[]),{animate:a,onTransitionEnd:r,onClose:s,contextId:i}=e,[o,l]=cs.useState("open"===e.animate);cs.useEffect((()=>o?"open"!==a?(n(),l(!1),iFe):t.current?iFe:(t.current=setTimeout((()=>{t.current=null,l(!1)})),n):iFe),[a,o,n]);const c=qDe((e=>{"height"===e.propertyName&&(r(),"close"===a&&s())}),[a,s,r]),d=lFe({isAnimatingOpenOnMount:o,animate:e.animate,placeholder:e.placeholder});return ds.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":i,onTransitionEnd:c,ref:e.innerRef})}));class dFe extends ds.PureComponent{constructor(...e){super(...e),this.state={isVisible:Boolean(this.props.on),data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{"close"===this.state.animate&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const uFe={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||RDe(),document.body}},fFe=e=>{let t,n={...e};for(t in uFe)void 0===e[t]&&(n={...n,[t]:uFe[t]});return n},mFe=(e,t)=>e===t.droppable.type,pFe=(e,t)=>t.draggables[e.draggable.id],hFe={updateViewportMaxScroll:e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e})},gFe=bDe((()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=oPe((e=>({draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}))),a=oPe(((a,r,s,i,o,l)=>{const c=o.descriptor.id;if(o.descriptor.droppableId===a){const e=l?{render:l,dragging:n(o.descriptor)}:null,t={isDraggingOver:s,draggingOverWith:s?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:o.placeholder,shouldAnimatePlaceholder:!1,snapshot:t,useClone:e}}if(!r)return t;if(!i)return e;const d={isDraggingOver:s,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:o.placeholder,shouldAnimatePlaceholder:!0,snapshot:d,useClone:null}}));return(n,r)=>{const s=fFe(r),i=s.droppableId,o=s.type,l=!s.isDropDisabled,c=s.renderClone;if(ZRe(n)){const e=n.critical;if(!mFe(o,e))return t;const r=pFe(e,n.dimensions),s=ZPe(n.impact)===i;return a(i,l,s,s,r,c)}if("DROP_ANIMATING"===n.phase){const e=n.completed;if(!mFe(o,e.critical))return t;const r=pFe(e.critical,n.dimensions);return a(i,l,Uze(e.result)===i,ZPe(e.impact)===i,r,c)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){const a=n.completed;if(!mFe(o,a.critical))return t;const r=ZPe(a.impact)===i,s=Boolean(a.impact.at&&"COMBINE"===a.impact.at.type),l=a.critical.droppable.id===i;return r?s?e:t:l?e:t}return t}}),hFe,((e,t,n)=>({...fFe(n),...e,...t})),{context:HRe,areStatePropsEqual:Bze})((e=>{const t=cs.useContext(KRe);t||RDe();const{contextId:n,isMovementAllowed:a}=t,r=cs.useRef(null),s=cs.useRef(null),{children:i,droppableId:o,type:l,mode:c,direction:d,ignoreContainerClipping:u,isDropDisabled:f,isCombineEnabled:m,snapshot:p,useClone:h,updateViewportMaxScroll:g,getContainerForClone:x}=e,y=qDe((()=>r.current),[]),v=qDe(((e=null)=>{r.current=e}),[]);qDe((()=>s.current),[]);const b=qDe(((e=null)=>{s.current=e}),[]),w=qDe((()=>{a()&&g({maxScroll:lRe()})}),[a,g]);sFe({droppableId:o,type:l,mode:c,direction:d,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:u,getDroppableRef:y});const j=HDe((()=>ds.createElement(dFe,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(({onClose:e,data:t,animate:a})=>ds.createElement(cFe,{placeholder:t,onClose:e,innerRef:b,animate:a,contextId:n,onTransitionEnd:w})))),[n,w,e.placeholder,e.shouldAnimatePlaceholder,b]),N=HDe((()=>({innerRef:v,placeholder:j,droppableProps:{"data-rfd-droppable-id":o,"data-rfd-droppable-context-id":n}})),[n,o,j,v]),C=h?h.dragging.draggableId:null,S=HDe((()=>({droppableId:o,type:l,isUsingCloneFor:C})),[o,C,l]);return ds.createElement(Rze.Provider,{value:S},i(N,p),function(){if(!h)return null;const{dragging:e,render:t}=h,n=ds.createElement(Hze,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},((n,a)=>t(n,a,e)));return kg.createPortal(n,x())}())})),xFe=ME({title:mE().min(2,"Title must be at least 2 characters"),stageId:mE().min(1,"Please select a pipeline stage"),value:pE().min(0).optional().nullable(),contactId:pE().min(1,"Please select a contact"),priority:FE(["low","medium","high"]).default("medium"),dueDate:yE().optional().nullable(),assignedToUserId:pE().optional().nullable(),description:mE().optional().nullable(),tags:kE(mE()).default([])});function yFe({deal:e,isOpen:t,onClose:n}){const{toast:a}=Fy(),r=vy(),[s,i]=cs.useState([]),[o,l]=cs.useState(""),{data:c}=Sy({queryKey:["/api/contacts"],queryFn:()=>_y("GET","/api/contacts").then((e=>e.json()))}),{data:d=[]}=Sy({queryKey:["/api/team-members"],queryFn:()=>_y("GET","/api/team-members").then((e=>e.json()))}),{data:u=[]}=Sy({queryKey:["/api/pipeline/stages"],queryFn:()=>_y("GET","/api/pipeline/stages").then((e=>e.json()))}),f=TEe({resolver:eTe(xFe),defaultValues:{title:"",stageId:"",value:null,contactId:void 0,priority:"medium",dueDate:null,assignedToUserId:null,description:"",tags:[]}});cs.useEffect((()=>{var n;e&&t&&(f.reset({title:e.title||"",stageId:(null==(n=e.stageId)?void 0:n.toString())||"",value:e.value||null,contactId:e.contactId||void 0,priority:e.priority||"medium",dueDate:e.dueDate?new Date(e.dueDate):null,assignedToUserId:e.assignedToUserId||null,description:e.description||"",tags:e.tags||[]}),i(e.tags||[]))}),[e,t,f]);const m=()=>{f.reset(),i([]),l("")},p=()=>{if(o.trim()&&!s.includes(o.trim())){const e=[...s,o.trim()];i(e),f.setValue("tags",e),l("")}},h=ky({mutationFn:async t=>{if(!e)throw new Error("No deal to update");return(await _y("PATCH",`/api/deals/${e.id}`,t)).json()},onSuccess:()=>{a({title:"Success",description:"Deal has been updated"}),r.invalidateQueries({queryKey:["/api/deals"]}),m(),n()},onError:e=>{a({title:"Error",description:`Failed to update deal: ${e.message}`,variant:"destructive"})}}),g=e=>{const t={...e,tags:s};h.mutate(t)},x=(null==c?void 0:c.contacts)||[];return vs.jsx(yB,{open:t,onOpenChange:e=>{e||n(),e&&m()},children:vs.jsxs(NB,{className:"sm:max-w-[600px] max-h-[90vh] md:max-h-[80vh] p-0 flex flex-col",children:[vs.jsxs(CB,{className:"px-8 pt-6 pb-4",children:[vs.jsx(kB,{children:"Edit Deal"}),vs.jsx(MB,{children:"Update the deal information"})]}),vs.jsx(CY,{className:"flex-1 px-4 py-6 overflow-auto",children:vs.jsx(DEe,{...f,children:vs.jsxs("form",{onSubmit:f.handleSubmit(g),className:"space-y-8 m-2",children:[vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[vs.jsx(OEe,{control:f.control,name:"title",render:({field:e})=>vs.jsxs(FEe,{className:"md:col-span-2",children:[vs.jsx(BEe,{children:"Deal Title"}),vs.jsx(UEe,{children:vs.jsx(LB,{...e,placeholder:"Enter deal title"})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:f.control,name:"contactId",render:({field:e})=>{var t;return vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Contact"}),vs.jsxs(ZU,{onValueChange:t=>e.onChange(parseInt(t)),value:(null==(t=e.value)?void 0:t.toString())||void 0,children:[vs.jsx(UEe,{children:vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"Select a contact"})})}),vs.jsx(rW,{children:x.map((e=>vs.jsx(sW,{value:e.id.toString(),children:e.name},e.id)))})]}),vs.jsx(GEe,{})]})}}),vs.jsx(OEe,{control:f.control,name:"stageId",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Pipeline Stage"}),vs.jsxs(ZU,{onValueChange:e.onChange,value:e.value||void 0,children:[vs.jsx(UEe,{children:vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"Select a stage"})})}),vs.jsx(rW,{children:u.map((e=>vs.jsx(sW,{value:e.id.toString(),children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),e.name]})},e.id)))})]}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:f.control,name:"value",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Deal Value ($)"}),vs.jsx(UEe,{children:vs.jsx(LB,{type:"number",placeholder:"0",...e,value:e.value||"",onChange:t=>e.onChange(t.target.value?parseFloat(t.target.value):null)})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:f.control,name:"priority",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Priority"}),vs.jsxs(ZU,{onValueChange:e.onChange,value:e.value||void 0,children:[vs.jsx(UEe,{children:vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"Select priority"})})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"low",children:"Low"}),vs.jsx(sW,{value:"medium",children:"Medium"}),vs.jsx(sW,{value:"high",children:"High"})]})]}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:f.control,name:"assignedToUserId",render:({field:e})=>{var t;return vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Assigned To"}),vs.jsxs(ZU,{onValueChange:t=>e.onChange("unassigned"===t?null:parseInt(t)),value:(null==(t=e.value)?void 0:t.toString())||"unassigned",children:[vs.jsx(UEe,{children:vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"Select assignee"})})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"unassigned",children:"Unassigned"}),d.map((e=>vs.jsx(sW,{value:e.id.toString(),children:e.fullName||e.username},e.id)))]})]}),vs.jsx(GEe,{})]})}}),vs.jsx(OEe,{control:f.control,name:"dueDate",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Due Date"}),vs.jsx(UEe,{children:vs.jsx(LB,{type:"date",...e,value:e.value?Dz(e.value,"yyyy-MM-dd"):"",onChange:t=>e.onChange(t.target.value?new Date(t.target.value):null)})}),vs.jsx(GEe,{})]})})]}),vs.jsx(OEe,{control:f.control,name:"description",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Description"}),vs.jsx(UEe,{children:vs.jsx(TB,{placeholder:"Enter deal description...",className:"resize-none",rows:3,...e,value:e.value||""})}),vs.jsx(GEe,{})]})}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(BEe,{children:"Tags"}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(LB,{placeholder:"Add a tag...",value:o,onChange:e=>l(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),p())}}),vs.jsx(lk,{type:"button",onClick:p,size:"sm",children:vs.jsx(Iw,{className:"h-4 w-4"})})]}),s.length>0&&vs.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.map(((e,t)=>vs.jsxs(dk,{variant:"secondary",className:"flex items-center gap-1",children:[e,vs.jsx(yj,{className:"h-3 w-3 cursor-pointer",onClick:()=>(e=>{const t=s.filter((t=>t!==e));i(t),f.setValue("tags",t)})(e)})]},t)))})]})]})})}),vs.jsxs(SB,{className:"px-8 py-4",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),vs.jsx(lk,{type:"submit",onClick:f.handleSubmit(g),disabled:h.isPending,children:h.isPending?"Updating...":"Update Deal"})]})]})})}function vFe({deal:e,isOpen:t,onClose:n}){const{data:a}=Sy({queryKey:["/api/contacts",null==e?void 0:e.contactId],queryFn:()=>_y("GET",`/api/contacts/${null==e?void 0:e.contactId}`).then((e=>e.json())),enabled:!!(null==e?void 0:e.contactId)&&"number"==typeof e.contactId}),{data:r}=Sy({queryKey:["/api/users",null==e?void 0:e.assignedToUserId],queryFn:()=>_y("GET",`/api/users/${null==e?void 0:e.assignedToUserId}`).then((e=>e.json())),enabled:!!(null==e?void 0:e.assignedToUserId)&&"number"==typeof e.assignedToUserId}),{data:s}=Sy({queryKey:["/api/pipeline/stages",null==e?void 0:e.stageId],queryFn:()=>_y("GET",`/api/pipeline/stages/${null==e?void 0:e.stageId}`).then((e=>e.json())),enabled:!!(null==e?void 0:e.stageId)&&"number"==typeof e.stageId}),{data:i=[]}=Sy({queryKey:["/api/deals",null==e?void 0:e.id,"activities"],queryFn:()=>_y("GET",`/api/deals/${null==e?void 0:e.id}/activities`).then((e=>e.json())),enabled:!!(null==e?void 0:e.id)&&"number"==typeof e.id});if(!e)return null;const o={low:"bg-blue-500",medium:"bg-yellow-500",high:"bg-red-500"}[e.priority]||"bg-gray-500";return vs.jsx(yB,{open:t,onOpenChange:e=>!e&&n(),children:vs.jsxs(NB,{className:"sm:max-w-[700px] max-h-[90vh] p-0 flex flex-col",children:[vs.jsx(CB,{className:"px-6 pt-6 pb-4",children:vs.jsx(kB,{className:"flex items-center gap-3",children:vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:`h-3 w-3 rounded-full ${o}`}),e.title]})})}),vs.jsx(CY,{className:"flex-1 px-6 pb-6",children:vs.jsxs("div",{className:"space-y-6",children:[a&&vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[vs.jsx(uj,{className:"h-5 w-5"}),"Contact Information"]}),vs.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[vs.jsx(jF,{contact:a,size:"lg"}),vs.jsxs("div",{className:"flex-1 space-y-2",children:[vs.jsx("h4",{className:"font-medium text-lg",children:a.name}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[a.phone&&vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(Mw,{className:"h-4 w-4 text-muted-foreground"}),vs.jsx("span",{children:a.phone})]}),a.email&&vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(hw,{className:"h-4 w-4 text-muted-foreground"}),vs.jsx("span",{children:a.email})]}),a.company&&vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx(jb,{className:"h-4 w-4 text-muted-foreground"}),vs.jsx("span",{children:a.company})]})]})]})]})]}),vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[vs.jsx(Zb,{className:"h-5 w-5"}),"Deal Information"]}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.value&&vs.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[vs.jsx(Vb,{className:"h-5 w-5 text-green-600"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-muted-foreground",children:"Deal Value"}),vs.jsxs("p",{className:"font-semibold text-lg",children:["$",(new Intl.NumberFormat).format(e.value)]})]})]}),s&&vs.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[vs.jsx("div",{className:"h-5 w-5 rounded-full",style:{backgroundColor:s.color}}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-muted-foreground",children:"Pipeline Stage"}),vs.jsx("p",{className:"font-semibold",children:s.name})]})]}),vs.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[vs.jsx(Lb,{className:"h-5 w-5 text-orange-600"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-muted-foreground",children:"Priority"}),vs.jsx("p",{className:"font-semibold capitalize",children:e.priority})]})]}),r&&vs.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[vs.jsx(uj,{className:"h-5 w-5 text-blue-600"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-muted-foreground",children:"Assigned To"}),vs.jsx("p",{className:"font-semibold",children:r.name})]})]}),e.dueDate&&vs.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[vs.jsx(Nb,{className:"h-5 w-5 text-purple-600"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-muted-foreground",children:"Due Date"}),vs.jsx("p",{className:"font-semibold",children:Dz(new Date(e.dueDate),"PPP")})]})]}),e.lastActivityAt&&vs.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[vs.jsx(Bb,{className:"h-5 w-5 text-gray-600"}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Activity"}),vs.jsx("p",{className:"font-semibold",children:Rz(new Date(e.lastActivityAt),{addSuffix:!0})})]})]})]})]}),e.description&&vs.jsxs(vs.Fragment,{children:[vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsx("h3",{className:"text-lg font-semibold",children:"Description"}),vs.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.description})]})]}),e.tags&&e.tags.length>0&&vs.jsxs(vs.Fragment,{children:[vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[vs.jsx(Qw,{className:"h-5 w-5"}),"Tags"]}),vs.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map(((e,t)=>vs.jsx(dk,{variant:"secondary",children:e},t)))})]})]}),i.length>0&&vs.jsxs(vs.Fragment,{children:[vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsx("h3",{className:"text-lg font-semibold",children:"Recent Activities"}),vs.jsx("div",{className:"space-y-3",children:i.slice(0,5).map((e=>vs.jsxs("div",{className:"flex gap-3 p-3 border rounded-lg",children:[vs.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500 mt-2"}),vs.jsxs("div",{className:"flex-1",children:[vs.jsx("p",{className:"text-sm",children:e.content}),vs.jsx("p",{className:"text-xs text-muted-foreground",children:Rz(new Date(e.createdAt),{addSuffix:!0})})]})]},e.id)))})]})]}),vs.jsx(R$,{}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-muted-foreground",children:[vs.jsxs("div",{children:[vs.jsx("p",{className:"font-medium",children:"Created"}),vs.jsx("p",{children:Dz(new Date(e.createdAt),"PPP p")})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"font-medium",children:"Last Updated"}),vs.jsx("p",{children:Dz(new Date(e.updatedAt),"PPP p")})]})]})]})})]})})}function bFe({contactId:e,isOpen:t,onClose:n}){const{data:a,isLoading:r}=Sy({queryKey:["/api/contacts",e],queryFn:()=>_y("GET",`/api/contacts/${e}`).then((e=>e.json())),enabled:!!e&&t}),{data:s=[]}=Sy({queryKey:["/api/conversations","contact",e],queryFn:()=>_y("GET",`/api/conversations?contactId=${e}`).then((e=>e.json())),enabled:!!e&&t}),{data:i=[]}=Sy({queryKey:["/api/deals","contact",e],queryFn:()=>_y("GET",`/api/deals?contactId=${e}`).then((e=>e.json())),enabled:!!e&&t});if(!e||!a)return null;const o=e=>{switch(e){case"whatsapp":case"whatsapp_unofficial":return"ri-whatsapp-line text-green-600";case"instagram":return"ri-instagram-line text-pink-600";case"facebook":return"ri-facebook-line text-blue-600";default:return"ri-message-line text-gray-600"}},l=e=>{switch(e){case"whatsapp":return"WhatsApp Business";case"whatsapp_unofficial":return"WhatsApp";case"instagram":return"Instagram";case"facebook":return"Facebook Messenger";default:return"Unknown"}};return vs.jsx(yB,{open:t,onOpenChange:e=>!e&&n(),children:vs.jsxs(NB,{className:"sm:max-w-[700px] max-h-[90vh] p-0 flex flex-col",children:[vs.jsx(CB,{className:"px-6 pt-6 pb-4",children:vs.jsxs(kB,{className:"flex items-center gap-3",children:[vs.jsx(uj,{className:"h-5 w-5"}),"Contact Details"]})}),vs.jsx(CY,{className:"flex-1 px-6 pb-6",children:r?vs.jsx("div",{className:"flex items-center justify-center py-8",children:vs.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):vs.jsxs("div",{className:"space-y-6",children:[vs.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[vs.jsx(jF,{contact:a,size:"lg"}),vs.jsxs("div",{className:"flex-1 space-y-2",children:[vs.jsxs("div",{className:"flex items-center justify-between",children:[vs.jsx("h2",{className:"text-xl font-semibold",children:a.name}),vs.jsxs("div",{className:"flex items-center gap-2",children:[vs.jsx("div",{className:"h-2 w-2 rounded-full "+(a.isActive?"bg-green-500":"bg-gray-300")}),vs.jsx("span",{className:"text-sm text-muted-foreground",children:a.isActive?"Active":"Inactive"})]})]}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.phone&&vs.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[vs.jsx(Mw,{className:"h-4 w-4 text-muted-foreground"}),vs.jsx("span",{children:a.phone})]}),a.email&&vs.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[vs.jsx(hw,{className:"h-4 w-4 text-muted-foreground"}),vs.jsx("span",{children:a.email})]}),a.company&&vs.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[vs.jsx(jb,{className:"h-4 w-4 text-muted-foreground"}),vs.jsx("span",{children:a.company})]}),a.location&&vs.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[vs.jsx(gw,{className:"h-4 w-4 text-muted-foreground"}),vs.jsx("span",{children:a.location})]})]}),vs.jsx("div",{className:"flex gap-2 pt-2",children:vs.jsxs(lk,{size:"sm",variant:"outline",onClick:()=>{window.location.href=`/pipeline?contactId=${e}`},children:[vs.jsx($b,{className:"h-4 w-4 mr-2"}),"View Deals"]})})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information"}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Identifier"}),vs.jsx("p",{className:"text-sm",children:a.identifier||"Not provided"})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Identifier Type"}),vs.jsx("p",{className:"text-sm capitalize",children:a.identifierType||"Not specified"})]})]}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"First Contacted"}),vs.jsx("p",{className:"text-sm",children:a.createdAt?Dz(new Date(a.createdAt),"PPP"):"Unknown"})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Activity"}),vs.jsx("p",{className:"text-sm",children:a.lastContactedAt?Rz(new Date(a.lastContactedAt),{addSuffix:!0}):"No recent activity"})]})]})]})]}),a.notes&&vs.jsxs(vs.Fragment,{children:[vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),vs.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:a.notes})]})]}),a.tags&&a.tags.length>0&&vs.jsxs(vs.Fragment,{children:[vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsx("h3",{className:"text-lg font-semibold",children:"Tags"}),vs.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map(((e,t)=>vs.jsx(dk,{variant:"secondary",children:e},t)))})]})]}),s.length>0&&vs.jsxs(vs.Fragment,{children:[vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[vs.jsx(yw,{className:"h-5 w-5"}),"Recent Conversations (",s.length,")"]}),vs.jsx("div",{className:"space-y-2",children:s.slice(0,3).map((e=>vs.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[vs.jsx("i",{className:o(e.channelType)}),vs.jsxs("div",{className:"flex-1",children:[vs.jsx("p",{className:"text-sm font-medium",children:l(e.channelType)}),vs.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last message: ",Rz(new Date(e.lastMessageAt),{addSuffix:!0})]})]}),vs.jsx(dk,{variant:"active"===e.status?"default":"secondary",children:e.status})]},e.id)))})]})]}),i.length>0&&vs.jsxs(vs.Fragment,{children:[vs.jsx(R$,{}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[vs.jsx(xb,{className:"h-5 w-5"}),"Associated Deals (",i.length,")"]}),vs.jsx("div",{className:"space-y-2",children:i.slice(0,3).map((e=>vs.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[vs.jsxs("div",{className:"flex-1",children:[vs.jsx("p",{className:"text-sm font-medium",children:e.title}),vs.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.value&&`$${(new Intl.NumberFormat).format(e.value)} • `,e.stage]})]}),vs.jsx(dk,{variant:"outline",className:"capitalize",children:e.priority})]},e.id)))})]})]}),vs.jsx(R$,{}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-muted-foreground",children:[vs.jsxs("div",{children:[vs.jsx("p",{className:"font-medium",children:"Created"}),vs.jsx("p",{children:Dz(new Date(a.createdAt),"PPP p")})]}),vs.jsxs("div",{children:[vs.jsx("p",{className:"font-medium",children:"Last Updated"}),vs.jsx("p",{children:Dz(new Date(a.updatedAt),"PPP p")})]})]})]})})]})})}function wFe({deal:e}){const t=vy(),[,n]=fx(),{toast:a}=Fy(),[r,s]=cs.useState(!1),[i,o]=cs.useState(!1),[l,c]=cs.useState(!1),[d,u]=cs.useState(!1),{data:f}=Sy({queryKey:["/api/contacts",e.contactId],queryFn:()=>_y("GET",`/api/contacts/${e.contactId}`).then((e=>e.json())),enabled:!!e.contactId}),{data:m}=Sy({queryKey:["/api/users",e.assignedToUserId],queryFn:()=>_y("GET",`/api/users/${e.assignedToUserId}`).then((e=>e.json())),enabled:!!e.assignedToUserId}),p=ky({mutationFn:async e=>(await _y("DELETE",`/api/deals/${e}`)).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/deals"]}),e.stage&&t.invalidateQueries({queryKey:[`/api/deals/stage/${e.stage}`]}),e.stageId&&t.invalidateQueries({queryKey:[`/api/deals/stageId/${e.stageId}`]})},onError:e=>{}}),h={low:"bg-blue-500",medium:"bg-yellow-500",high:"bg-red-500"}[e.priority]||"bg-gray-500";return vs.jsxs("div",{className:"bg-card border rounded-md shadow-sm p-4 mb-3 cursor-grab hover:shadow transition-shadow duration-200",children:[vs.jsxs("div",{className:"flex justify-between items-start mb-3",children:[vs.jsx("h3",{className:"text-base font-medium truncate",children:e.title}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(JS,{children:vs.jsxs(ZS,{children:[vs.jsx(XS,{asChild:!0,children:vs.jsx("div",{className:`h-2.5 w-2.5 rounded-full ${h}`})}),vs.jsx(ek,{children:vs.jsxs("p",{className:"capitalize",children:[e.priority," priority"]})})]})}),vs.jsxs(YO,{children:[vs.jsx(QO,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-8 w-8",children:vs.jsx(qb,{className:"h-4 w-4"})})}),vs.jsxs(KO,{align:"end",children:[vs.jsx(ZO,{children:"Actions"}),vs.jsx(JO,{onClick:()=>{o(!0)},children:"Edit Deal"}),vs.jsx(JO,{onClick:()=>{c(!0)},children:"View Details"}),vs.jsx(JO,{onClick:()=>{u(!0)},children:"View Contact"}),vs.jsx(XO,{}),vs.jsx(JO,{onClick:()=>s(!0),className:"text-destructive",children:"Delete"})]})]})]})]}),f&&vs.jsxs("div",{className:"flex items-center mb-3 p-2 rounded-md hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{(null==f?void 0:f.id)&&(null==f?void 0:f.identifierType)&&(localStorage.setItem("selectedContactId",f.id.toString()),localStorage.setItem("selectedChannelType",f.identifierType),n("/"),a({title:"Redirecting to inbox",description:`Opening conversation with ${f.name}`}))},title:`Open conversation with ${f.name}`,children:[vs.jsx(jF,{contact:f,size:"sm",className:"mr-3"}),vs.jsxs("div",{className:"flex-1 min-w-0",children:[vs.jsxs("div",{className:"flex items-center",children:[vs.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:f.name}),f.identifierType&&vs.jsxs("span",{className:"ml-2 inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-gray-100",children:["whatsapp"===f.identifierType&&vs.jsx("i",{className:"ri-whatsapp-line text-green-600 mr-1"}),"whatsapp_unofficial"===f.identifierType&&vs.jsx("i",{className:"ri-whatsapp-line text-green-600 mr-1"}),"messenger"===f.identifierType&&vs.jsx("i",{className:"ri-messenger-line text-blue-600 mr-1"}),"instagram"===f.identifierType&&vs.jsx("i",{className:"ri-instagram-line text-pink-600 mr-1"}),f.identifierType]})]}),m&&vs.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Assigned to: ",m.fullName||m.username]})]})]}),vs.jsxs("div",{className:"space-y-2 text-sm",children:[e.description&&vs.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:e.description}),e.value&&vs.jsxs("div",{className:"font-medium",children:["$",(new Intl.NumberFormat).format(e.value)]}),vs.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground pt-2",children:[e.assignedToUserId&&vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(uj,{className:"h-3.5 w-3.5 mr-1"}),vs.jsx("span",{children:"Assigned"})]}),e.lastActivityAt&&vs.jsxs("div",{className:"flex items-center",title:new Date(e.lastActivityAt).toLocaleString(),children:[vs.jsx(Bb,{className:"h-3.5 w-3.5 mr-1"}),vs.jsx("span",{children:Rz(new Date(e.lastActivityAt),{addSuffix:!0})})]}),e.dueDate&&vs.jsxs("div",{className:"flex items-center",title:new Date(e.dueDate).toLocaleString(),children:[vs.jsx(Nb,{className:"h-3.5 w-3.5 mr-1"}),vs.jsx("span",{children:new Date(e.dueDate).toLocaleDateString()})]})]}),e.tags&&e.tags.length>0&&vs.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map(((e,t)=>vs.jsxs(dk,{variant:"secondary",className:"text-xs flex items-center",children:[vs.jsx(Qw,{className:"h-3 w-3 mr-1"}),e]},t)))})]}),vs.jsx(x7,{open:r,onOpenChange:s,children:vs.jsxs(w7,{children:[vs.jsxs(j7,{children:[vs.jsx(C7,{children:"Are you sure?"}),vs.jsxs(S7,{children:['This will remove the deal "',e.title,'" from your pipeline. This action cannot be undone.']})]}),vs.jsxs(N7,{children:[vs.jsx(M7,{children:"Cancel"}),vs.jsx(k7,{onClick:()=>{p.mutate(e.id),s(!1)},className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})}),vs.jsx(yFe,{deal:e,isOpen:i,onClose:()=>o(!1)}),vs.jsx(vFe,{deal:e,isOpen:l,onClose:()=>c(!1)}),vs.jsx(bFe,{contactId:e.contactId,isOpen:d,onClose:()=>u(!1)})]})}function jFe({onAddDeal:e,onOpenFilterModal:t,activeFilter:n}){var a,r,s,i;const{toast:o}=Fy(),{t:l}=mk(),c=vy(),[d,u]=cs.useState(null),[f,m]=cs.useState(""),[p,h]=cs.useState("#3a86ff"),[g,x]=cs.useState(""),[y,v]=cs.useState(""),[b,w]=cs.useState(!1),[j,N]=cs.useState(!1),[C,S]=cs.useState(null),[k,M]=cs.useState(null),_=["#4361ee","#3a86ff","#7209b7","#f72585","#4cc9f0","#4895ef","#560bad","#f3722c","#f8961e","#90be6d","#43aa8b","#577590"],{data:I=[],isLoading:A}=Sy({queryKey:["/api/pipeline/stages"],queryFn:async()=>{const e=await _y("GET","/api/pipeline/stages");return await e.json()}}),{data:E=[],isLoading:L}=Sy({queryKey:["/api/deals",n],queryFn:async()=>{const e=new URLSearchParams;n.priority&&e.append("priority",n.priority),n.assignedToUserId&&e.append("assignedTo",n.assignedToUserId.toString()),n.titleSearch&&e.append("titleSearch",n.titleSearch),n.tags&&n.tags.length>0&&e.append("tags",n.tags.join(",")),n.contactPhone&&e.append("contactPhone",n.contactPhone),n.contactName&&e.append("contactName",n.contactName);const t="/api/deals"+(e.toString()?`?${e.toString()}`:"");return(await _y("GET",t)).json()}}),T=cs.useMemo((()=>{if(!I||0===I.length)return{};const e={};return I.forEach((t=>{e[t.id]=[]})),E&&Array.isArray(E)&&E.length>0&&E.forEach((t=>{t.stageId&&e[t.stageId]&&e[t.stageId].push(t)})),e}),[E,I]),[D,P]=cs.useState({}),O=ky({mutationFn:async({name:e,color:t})=>{const n=await _y("POST","/api/pipeline/stages",{name:e,color:t,order:I.length+1});return await n.json()},onSuccess:e=>{m(""),h("#3a86ff"),w(!1),c.invalidateQueries({queryKey:["/api/pipeline/stages"]}),c.refetchQueries({queryKey:["/api/pipeline/stages"]}),c.invalidateQueries({queryKey:["/api/deals"]}),o({title:l("common.success","Success"),description:l("pipeline.stage_created_success","Stage created successfully")})},onError:e=>{o({title:l("common.error","Error"),description:l("pipeline.stage_create_failed","Failed to create stage: {{error}}",{error:e.message}),variant:"destructive"})}}),R=ky({mutationFn:async({id:e,name:t,color:n})=>(await _y("PUT",`/api/pipeline/stages/${e}`,{name:t,color:n})).json(),onSuccess:()=>{u(null),x(""),v(""),c.invalidateQueries({queryKey:["/api/pipeline/stages"]}),o({title:l("common.success","Success"),description:l("pipeline.stage_updated_success","Stage updated successfully")})},onError:e=>{o({title:l("common.error","Error"),description:l("pipeline.stage_update_failed","Failed to update stage: {{error}}",{error:e.message}),variant:"destructive"})}}),z=ky({mutationFn:async({id:e,moveToStageId:t})=>{const n=`/api/pipeline/stages/${e}${t?`?moveToStageId=${t}`:""}`;return(await _y("DELETE",n)).ok},onSuccess:()=>{N(!1),S(null),M(null),c.invalidateQueries({queryKey:["/api/pipeline/stages"]}),c.invalidateQueries({queryKey:["/api/deals"]}),o({title:l("common.success","Success"),description:l("pipeline.stage_deleted_success","Stage deleted successfully")})},onError:e=>{o({title:l("common.error","Error"),description:l("pipeline.stage_delete_failed","Failed to delete stage: {{error}}",{error:e.message}),variant:"destructive"})}}),F=ky({mutationFn:async({dealId:e,stageId:t})=>(await _y("PATCH",`/api/deals/${e}/stageId`,{stageId:t})).json(),onSuccess:()=>{P({}),c.invalidateQueries({queryKey:["/api/deals"]})},onError:e=>{P({}),o({title:l("common.error","Error"),description:l("pipeline.deal_update_failed","Failed to update deal stage: {{error}}",{error:e.message}),variant:"destructive"})}}),B=Object.keys(D).length>0?D:T,U=A||L;return vs.jsxs("div",{className:"flex flex-col h-full",children:[vs.jsxs("div",{className:"flex justify-between items-center mb-6",children:[vs.jsx("h1",{className:"text-2xl ",children:l("nav.pipeline","Pipeline")}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsxs(lk,{variant:"outline",size:"sm",onClick:t,className:"flex items-center gap-1",children:[vs.jsx(tw,{className:"h-4 w-4"}),l("common.filter","Filter"),(n.priority||n.assignedToUserId||n.titleSearch||n.tags&&n.tags.length>0||n.contactPhone||n.contactName)&&vs.jsx("span",{className:"ml-1 flex h-2 w-2 rounded-full bg-primary"})]}),vs.jsxs(lk,{variant:"outline",size:"sm",onClick:()=>w(!0),className:"flex items-center gap-1",children:[vs.jsx(Iw,{className:"h-4 w-4"}),l("pipeline.add_stage","Add Stage")]}),vs.jsxs(lk,{onClick:e,className:"flex items-center gap-1 btn-brand-primary",children:[vs.jsx(Rb,{className:"h-4 w-4"}),l("pipeline.add_deal","Add Deal")]})]})]}),U?vs.jsx("div",{className:"flex items-center justify-center h-64",children:vs.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):vs.jsx(vs.Fragment,{children:0===I.length?vs.jsxs("div",{className:"flex flex-col items-center justify-center h-64 p-6 text-center bg-secondary/20 rounded-lg",children:[vs.jsx("h3",{className:"text-lg  mb-2",children:l("pipeline.no_stages","No Pipeline Stages")}),vs.jsx("p",{className:"text-muted-foreground mb-4",children:l("pipeline.create_first_stage","Create your first stage to get started")}),vs.jsx(lk,{onClick:()=>w(!0),children:l("pipeline.add_first_stage","Add First Stage")})]}):vs.jsx(Aze,{onDragEnd:e=>{var t;const{destination:n,source:a,draggableId:r}=e;if(!n||n.droppableId===a.droppableId&&n.index===a.index)return;const s=parseInt(r),i=parseInt(a.droppableId),o=parseInt(n.droppableId);if(i!==o){const e=null==(t=B[i])?void 0:t.find((e=>e.id===s));if(!e)return;const a={...T};a[i]=a[i].filter((e=>e.id!==s));const r={...e,stageId:o};a[o]=[...a[o].slice(0,n.index),r,...a[o].slice(n.index)],P(a),F.mutate({dealId:s,stageId:o})}else{const e={...T},[t]=e[i].splice(a.index,1);e[i].splice(n.index,0,t),P(e)}},children:vs.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6 gap-4 h-full overflow-hidden",children:I.map((e=>{var t;return vs.jsxs("div",{className:"flex flex-col h-full",children:[vs.jsxs("div",{className:"flex justify-between items-center p-2 mb-2 rounded-md shadow-md",style:{borderLeft:`4px solid ${e.color}`,backgroundColor:`${e.color}20`},children:[vs.jsxs("div",{className:"flex items-center gap-1.5",children:[vs.jsx("h3",{className:"font-medium text-sm",children:e.name}),vs.jsx("span",{className:"text-xs text-muted-foreground bg-background rounded-full px-1.5 py-0.5",children:(null==(t=B[e.id])?void 0:t.length)||0})]}),vs.jsxs(YO,{children:[vs.jsx(QO,{asChild:!0,children:vs.jsx(lk,{variant:"ghost",size:"icon",className:"h-7 w-7",children:vs.jsx(qb,{className:"h-4 w-4"})})}),vs.jsxs(KO,{align:"end",children:[vs.jsxs(JO,{onClick:()=>(e=>{u(e.id),x(e.name),v(e.color)})(e),children:[vs.jsx(Sw,{className:"mr-2 h-4 w-4"}),l("common.edit","Edit")]}),vs.jsxs(JO,{onClick:()=>(e=>{S(e),N(!0)})(e),children:[vs.jsx(Zw,{className:"mr-2 h-4 w-4"}),l("common.delete","Delete")]})]})]})]}),vs.jsx(gFe,{droppableId:e.id.toString(),children:(t,n)=>{var a;return vs.jsxs("div",{ref:t.innerRef,...t.droppableProps,className:"flex-1 p-2 rounded-md overflow-y-auto shadow-md "+(n.isDraggingOver?"bg-secondary/50":""),style:{minHeight:"70vh",backgroundColor:e.color?`${e.color}10`:void 0,border:`1px solid ${e.color}30`},children:[null==(a=B[e.id])?void 0:a.map(((e,t)=>vs.jsx(qze,{draggableId:e.id.toString(),index:t,children:(t,n)=>vs.jsx("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,style:{...t.draggableProps.style,opacity:n.isDragging?.8:1},children:vs.jsx(wFe,{deal:e})})},e.id))),t.placeholder]})}})]},e.id)}))})})}),vs.jsx(yB,{open:b,onOpenChange:w,children:vs.jsxs(NB,{children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:l("pipeline.add_stage_title","Add Pipeline Stage")}),vs.jsx(MB,{children:l("pipeline.add_stage_description","Create a new stage for your pipeline. Stages help organize your deals and track their progress.")})]}),vs.jsxs("div",{className:"space-y-4 py-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"name",children:l("pipeline.stage_name","Stage Name")}),vs.jsx(LB,{id:"name",placeholder:l("pipeline.stage_name_placeholder","e.g., Discovery, Negotiation, Proposal"),value:f,onChange:e=>m(e.target.value)})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"color",children:l("pipeline.stage_color","Stage Color")}),vs.jsx("div",{className:"flex flex-wrap gap-2",children:_.map((e=>vs.jsx("div",{className:"w-8 h-8 rounded-full cursor-pointer border-2 "+(p===e?"border-black dark:border-white":"border-transparent"),style:{backgroundColor:e},onClick:()=>h(e)},e)))}),vs.jsxs("div",{className:"mt-2 flex items-center",children:[vs.jsx("div",{className:"w-6 h-6 rounded-full mr-2",style:{backgroundColor:p}}),vs.jsx("span",{className:"text-sm",children:p})]})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{variant:"outline",onClick:()=>w(!1),children:l("common.cancel","Cancel")}),vs.jsx(lk,{onClick:()=>{f.trim()?O.mutate({name:f,color:p}):o({title:l("common.error","Error"),description:l("pipeline.stage_name_required","Stage name cannot be empty"),variant:"destructive"})},children:l("pipeline.create_stage","Create Stage")})]})]})}),vs.jsx(yB,{open:!!d,onOpenChange:e=>!e&&u(null),children:vs.jsxs(NB,{children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:l("pipeline.edit_stage_title","Edit Pipeline Stage")}),vs.jsx(MB,{children:l("pipeline.edit_stage_description","Update the stage name and color.")})]}),vs.jsxs("div",{className:"space-y-4 py-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"edit-name",children:l("pipeline.stage_name","Stage Name")}),vs.jsx(LB,{id:"edit-name",placeholder:l("pipeline.stage_name_placeholder","e.g., Discovery, Negotiation, Proposal"),value:g,onChange:e=>x(e.target.value),autoFocus:!0})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"edit-color",children:l("pipeline.stage_color","Stage Color")}),vs.jsx("div",{className:"flex flex-wrap gap-2",children:_.map((e=>vs.jsx("div",{className:"w-8 h-8 rounded-full cursor-pointer border-2 "+(y===e?"border-black dark:border-white":"border-transparent"),style:{backgroundColor:e},onClick:()=>v(e)},e)))}),vs.jsxs("div",{className:"mt-2 flex items-center",children:[vs.jsx("div",{className:"w-6 h-6 rounded-full mr-2",style:{backgroundColor:y}}),vs.jsx("span",{className:"text-sm",children:y})]})]})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{variant:"outline",onClick:()=>{u(null),x(""),v("")},children:l("common.cancel","Cancel")}),vs.jsx(lk,{className:"btn-brand-primary",onClick:()=>{return d&&(e=d,void(g.trim()?R.mutate({id:e,name:g,color:y}):o({title:l("common.error","Error"),description:l("pipeline.stage_name_required","Stage name cannot be empty"),variant:"destructive"})));var e},children:l("pipeline.update_stage","Update Stage")})]})]})}),vs.jsx(yB,{open:j,onOpenChange:N,children:vs.jsxs(NB,{children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:l("pipeline.delete_stage_title","Delete Pipeline Stage")}),vs.jsx(MB,{children:C&&(null==(a=B[C.id])?void 0:a.length)>0?vs.jsx(vs.Fragment,{children:l("pipeline.stage_contains_deals","This stage contains {{count}} deals. Where would you like to move them?",{count:null==(r=B[C.id])?void 0:r.length})}):vs.jsx(vs.Fragment,{children:l("pipeline.delete_stage_confirmation","Are you sure you want to delete this stage? This action cannot be undone.")})})]}),C&&(null==(s=B[C.id])?void 0:s.length)>0&&vs.jsxs("div",{className:"space-y-4 py-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"targetStage",children:l("pipeline.move_deals_to","Move deals to")}),vs.jsxs("select",{id:"targetStage",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:k||"",onChange:e=>M(parseInt(e.target.value)),children:[vs.jsx("option",{value:"",children:l("pipeline.select_stage","Select a stage")}),I.filter((e=>C&&e.id!==C.id)).map((e=>vs.jsx("option",{value:e.id,children:e.name},e.id)))]})]}),!k&&vs.jsx(pR,{variant:"destructive",children:vs.jsx(gR,{children:l("pipeline.select_target_stage_warning","You must select a target stage or the deals in this stage will be lost.")})})]}),vs.jsxs(SB,{children:[vs.jsx(lk,{variant:"outline",onClick:()=>{N(!1),S(null),M(null)},children:l("common.cancel","Cancel")}),vs.jsx(lk,{variant:"destructive",onClick:()=>{C&&z.mutate({id:C.id,moveToStageId:k||void 0})},disabled:!!C&&(null==(i=B[C.id])?void 0:i.length)>0&&!k,children:l("pipeline.delete_stage","Delete Stage")})]})]})})]})}const NFe=ME({title:mE().min(2,"Title must be at least 2 characters"),stage:mE().min(1,"Please select a pipeline stage"),value:pE().min(0).optional().nullable(),contactId:pE().min(1,"Please select a contact"),priority:FE(["low","medium","high"]).default("medium"),dueDate:yE().optional().nullable(),assignedToUserId:pE().optional().nullable(),description:mE().optional().nullable(),tags:kE(mE()).default([])});function CFe({isOpen:e,onClose:t}){const{toast:n}=Fy(),a=vy(),[r,s]=cs.useState([]),[i,o]=cs.useState(""),{data:l}=Sy({queryKey:["/api/contacts"],queryFn:()=>_y("GET","/api/contacts").then((e=>e.json()))}),{data:c=[]}=Sy({queryKey:["/api/team-members"],queryFn:()=>_y("GET","/api/team-members").then((e=>e.json()))}),{data:d=[]}=Sy({queryKey:["/api/pipeline/stages"],queryFn:()=>_y("GET","/api/pipeline/stages").then((e=>e.json())).then((e=>e))}),u=TEe({resolver:eTe(NFe),defaultValues:{title:"",stage:"",value:null,contactId:void 0,priority:"medium",dueDate:null,assignedToUserId:null,description:"",tags:[]}});cs.useEffect((()=>{d.length>0&&!u.getValues("stage")&&u.setValue("stage",d[0].id.toString())}),[d,u]);const f=()=>{u.reset(),s([]),o("")},m=()=>{if(i.trim()&&!r.includes(i.trim())){const e=[...r,i.trim()];s(e),u.setValue("tags",e),o("")}},p=ky({mutationFn:async e=>(await _y("POST","/api/deals",e)).json(),onSuccess:()=>{n({title:"Success",description:"Deal has been created"}),a.invalidateQueries({queryKey:["/api/deals"]}),f(),t()},onError:e=>{n({title:"Error",description:`Failed to create deal: ${e.message}`,variant:"destructive"})}}),h=e=>{e.tags=r,p.mutate(e)};return vs.jsx(yB,{open:e,onOpenChange:e=>{e||t(),e&&f()},children:vs.jsxs(NB,{className:"sm:max-w-[600px] max-h-[90vh] md:max-h-[80vh] p-0 flex flex-col",children:[vs.jsxs(CB,{className:"px-8 pt-6 pb-4",children:[vs.jsx(kB,{children:"Add New Deal"}),vs.jsx(MB,{children:"Create a new deal in your pipeline"})]}),vs.jsx(CY,{className:"flex-1 px-4 py-6 overflow-auto",children:vs.jsx(DEe,{...u,children:vs.jsx("form",{onSubmit:u.handleSubmit(h),className:"space-y-8 m-2",children:vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[vs.jsx(OEe,{control:u.control,name:"title",render:({field:e})=>vs.jsxs(FEe,{className:"md:col-span-2",children:[vs.jsx(BEe,{children:"Deal Title"}),vs.jsx(UEe,{children:vs.jsx(LB,{...e,placeholder:"Enter deal title"})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:u.control,name:"value",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Deal Value"}),vs.jsx(UEe,{children:vs.jsx(LB,{type:"number",placeholder:"0.00",onChange:t=>{const n=""===t.target.value?null:parseFloat(t.target.value);e.onChange(n)},value:null===e.value?"":e.value})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:u.control,name:"stage",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Stage"}),vs.jsxs(ZU,{onValueChange:e.onChange,defaultValue:e.value,children:[vs.jsx(UEe,{children:vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"Select stage"})})}),vs.jsx(rW,{children:d.map((e=>vs.jsx(sW,{value:e.id.toString(),children:e.name},e.id)))})]}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:u.control,name:"contactId",render:({field:e})=>{var t;return vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Contact"}),vs.jsxs(ZU,{onValueChange:t=>e.onChange("none"===t?null:parseInt(t)),value:(null==(t=e.value)?void 0:t.toString())||"none",children:[vs.jsx(UEe,{children:vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"Select contact"})})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"none",children:"None"}),(null==l?void 0:l.contacts)&&Array.isArray(l.contacts)?l.contacts.map((e=>vs.jsx(sW,{value:e.id.toString(),children:e.fullName||e.name||e.phoneNumber},e.id))):null]})]}),vs.jsx(GEe,{})]})}}),vs.jsx(OEe,{control:u.control,name:"priority",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Priority"}),vs.jsxs(ZU,{onValueChange:e.onChange,defaultValue:e.value,children:[vs.jsx(UEe,{children:vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"Select priority"})})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"low",children:"Low"}),vs.jsx(sW,{value:"medium",children:"Medium"}),vs.jsx(sW,{value:"high",children:"High"})]})]}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:u.control,name:"dueDate",render:({field:e})=>vs.jsxs(FEe,{className:"flex flex-col",children:[vs.jsx(BEe,{children:"Due Date"}),vs.jsxs(r6,{children:[vs.jsx(s6,{asChild:!0,children:vs.jsx(UEe,{children:vs.jsxs(lk,{variant:"outline",className:fN("pl-3 text-left font-normal",!e.value&&"text-muted-foreground"),children:[e.value?Dz(e.value,"PPP"):vs.jsx("span",{children:"Pick a date"}),vs.jsx(Nb,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),vs.jsx(i6,{className:"w-auto p-0",align:"start",children:vs.jsx(o9,{mode:"single",selected:e.value||void 0,onSelect:e.onChange,disabled:e=>e<new Date((new Date).setHours(0,0,0,0)),initialFocus:!0})})]}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:u.control,name:"assignedToUserId",render:({field:e})=>{var t;return vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Assigned To"}),vs.jsxs(ZU,{onValueChange:t=>e.onChange("unassigned"===t?null:parseInt(t)),value:(null==(t=e.value)?void 0:t.toString())||"unassigned",children:[vs.jsx(UEe,{children:vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"Assign to"})})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"unassigned",children:"Unassigned"}),c.map((e=>vs.jsx(sW,{value:e.id.toString(),children:e.fullName||e.username},e.id)))]})]}),vs.jsx(GEe,{})]})}}),vs.jsxs(FEe,{className:"md:col-span-2",children:[vs.jsx(BEe,{children:"Tags"}),vs.jsxs("div",{className:"flex gap-2",children:[vs.jsx(LB,{value:i,onChange:e=>o(e.target.value),placeholder:"Add tags",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),m())}}),vs.jsx(lk,{type:"button",size:"sm",onClick:m,children:vs.jsx(Iw,{className:"h-4 w-4"})})]}),vs.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.map((e=>vs.jsxs(dk,{variant:"secondary",className:"flex items-center",children:[e,vs.jsx(lk,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1",onClick:()=>(e=>{const t=r.filter((t=>t!==e));s(t),u.setValue("tags",t)})(e),children:vs.jsx(yj,{className:"h-3 w-3"})})]},e)))}),vs.jsx(WEe,{children:"Press Enter or click Add to add a tag"})]}),vs.jsx(OEe,{control:u.control,name:"description",render:({field:e})=>vs.jsxs(FEe,{className:"md:col-span-2",children:[vs.jsx(BEe,{children:"Description"}),vs.jsx(UEe,{children:vs.jsx(TB,{...e,placeholder:"Enter deal description",className:"min-h-[100px]",value:e.value||""})}),vs.jsx(GEe,{})]})})]})})})}),vs.jsx("div",{className:"border-t border-border mt-2",children:vs.jsxs(SB,{className:"px-8 py-6 flex flex-row justify-end gap-3 sm:gap-2",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),vs.jsx(lk,{variant:"outline",className:"btn-brand-primary",type:"submit",disabled:p.isPending,onClick:u.handleSubmit(h),children:p.isPending?"Creating...":"Create Deal"})]})})]})})}function SFe({isOpen:e,onClose:t,currentFilter:n,onApplyFilter:a}){var r;const[s,i]=cs.useState({priority:n.priority,assignedToUserId:n.assignedToUserId,titleSearch:n.titleSearch,tags:n.tags||[],contactPhone:n.contactPhone,contactName:n.contactName}),[o,l]=cs.useState(n.tags||[]);cs.useEffect((()=>{e&&(i({priority:n.priority,assignedToUserId:n.assignedToUserId,titleSearch:n.titleSearch,tags:n.tags||[],contactPhone:n.contactPhone,contactName:n.contactName}),l(n.tags||[]))}),[e,n]);const{data:c=[]}=Sy({queryKey:["/api/team-members"],queryFn:()=>_y("GET","/api/team-members").then((e=>e.json()))}),{data:d=[]}=Sy({queryKey:["/api/deals/tags"],queryFn:()=>_y("GET","/api/deals/tags").then((e=>e.json()))});return vs.jsx(yB,{open:e,onOpenChange:e=>!e&&t(),children:vs.jsxs(NB,{className:"sm:max-w-[600px] max-h-[80vh]",children:[vs.jsxs(CB,{children:[vs.jsx(kB,{children:"Filter Deals"}),vs.jsx(MB,{children:"Filter deals by priority, assignee, title, tags, and contact information."})]}),vs.jsx(CY,{className:"max-h-[60vh] pr-4",children:vs.jsxs("div",{className:"space-y-6 py-4",children:[vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"priority",children:"Priority"}),vs.jsxs(ZU,{value:s.priority||"all",onValueChange:e=>i({...s,priority:"all"===e?null:e}),children:[vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"All priorities"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"all",children:"All priorities"}),vs.jsx(sW,{value:"low",children:"Low"}),vs.jsx(sW,{value:"medium",children:"Medium"}),vs.jsx(sW,{value:"high",children:"High"})]})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"assignee",children:"Assigned To"}),vs.jsxs(ZU,{value:(null==(r=s.assignedToUserId)?void 0:r.toString())||"all",onValueChange:e=>i({...s,assignedToUserId:"all"===e?null:parseInt(e)}),children:[vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"All team members"})}),vs.jsxs(rW,{children:[vs.jsx(sW,{value:"all",children:"All team members"}),c.map((e=>vs.jsx(sW,{value:e.id.toString(),children:e.fullName},e.id)))]})]})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"titleSearch",children:"Search by Deal Title"}),vs.jsx(LB,{id:"titleSearch",placeholder:"Enter deal title to search...",value:s.titleSearch||"",onChange:e=>i({...s,titleSearch:e.target.value||null})})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{children:"Filter by Tags"}),d.length>0?vs.jsxs("div",{className:"space-y-3",children:[o.length>0&&vs.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((e=>vs.jsxs(dk,{variant:"secondary",className:"flex items-center gap-1",children:[e,vs.jsx(yj,{className:"h-3 w-3 cursor-pointer hover:text-destructive",onClick:()=>{return t=e,void l((e=>e.filter((e=>e!==t))));var t}})]},e)))}),vs.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-md p-2",children:vs.jsx("div",{className:"space-y-2",children:d.map((e=>vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(V7,{id:`tag-${e}`,checked:o.includes(e),onCheckedChange:()=>(e=>{l((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))})(e)}),vs.jsx(EB,{htmlFor:`tag-${e}`,className:"text-sm cursor-pointer",children:e})]},e)))})})]}):vs.jsx("p",{className:"text-sm text-muted-foreground",children:"No tags available"})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"contactPhone",children:"Search by Contact Phone"}),vs.jsx(LB,{id:"contactPhone",placeholder:"Enter contact phone number...",value:s.contactPhone||"",onChange:e=>i({...s,contactPhone:e.target.value||null})})]}),vs.jsxs("div",{className:"space-y-2",children:[vs.jsx(EB,{htmlFor:"contactName",children:"Search by Contact Name"}),vs.jsx(LB,{id:"contactName",placeholder:"Enter contact name...",value:s.contactName||"",onChange:e=>i({...s,contactName:e.target.value||null})})]})]})}),vs.jsxs(SB,{className:"flex justify-between",children:[vs.jsx(lk,{type:"button",variant:"outline",onClick:()=>{i({priority:null,assignedToUserId:null,titleSearch:null,tags:[],contactPhone:null,contactName:null}),l([]),a({priority:null,assignedToUserId:null,titleSearch:null,tags:null,contactPhone:null,contactName:null}),t()},children:"Clear Filters"}),vs.jsx(lk,{type:"button",className:"btn-brand-primary",onClick:()=>{const e={...s,tags:o.length>0?o:null};a(e),t()},children:"Apply Filters"})]})]})})}function kFe(){const{user:e,isLoading:t}=xT(),[n,a]=cs.useState(!1),[r,s]=cs.useState(!1),[i,o]=cs.useState({priority:null,assignedToUserId:null,titleSearch:null,tags:null,contactPhone:null,contactName:null});if(t)return vs.jsx("div",{className:"flex items-center justify-center min-h-screen",children:vs.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});if(!e)return vs.jsx(wx,{to:"/auth"});return vs.jsxs("div",{className:"h-screen flex flex-col overflow-hidden font-sans text-gray-800",children:[vs.jsx(uR,{}),vs.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[vs.jsx(yR,{}),vs.jsx("div",{className:"flex-1 overflow-y-auto",children:vs.jsxs("div",{className:"container mx-auto px-4 py-6",children:[vs.jsx(jFe,{onAddDeal:()=>a(!0),onOpenFilterModal:()=>s(!0),activeFilter:i}),vs.jsx(CFe,{isOpen:n,onClose:()=>a(!1)}),vs.jsx(SFe,{isOpen:r,onClose:()=>s(!1),currentFilter:i,onApplyFilter:e=>{o(e),s(!1)}})]})})]})]})}const MFe=ME({username:mE().min(2,"Username or email must be at least 2 characters"),password:mE().min(1,"Password is required")});function _Fe(){const{user:e,isLoading:t,loginMutation:n}=xT(),{t:a}=mk(),{branding:r}=jT(),[s,i]=cs.useState(!1);cs.useEffect((()=>{if(t){const e=setTimeout((()=>{document.cookie="connect.sid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.reload()}),3e3);return()=>clearTimeout(e)}}),[t]);const o=TEe({resolver:eTe(MFe),defaultValues:{username:"",password:""}});return t?vs.jsx("div",{className:"min-h-screen flex items-center justify-center",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):e?vs.jsx(wx,{to:"/"}):vs.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-4",children:[vs.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[vs.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-100/30 rounded-full blur-3xl"}),vs.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-100/30 rounded-full blur-3xl"})]}),vs.jsx("div",{className:"relative z-10 w-full max-w-md",children:vs.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:[vs.jsx("div",{className:"flex justify-center mb-6",children:vs.jsx("div",{className:"w-auto h-12 flex items-center justify-center",children:r.logoUrl?vs.jsx("img",{src:r.logoUrl,alt:r.appName,className:"h-12 w-auto"}):vs.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center",children:vs.jsx("span",{className:"text-white font-bold text-lg",children:r.appName.charAt(0)})})})}),vs.jsxs("div",{className:"text-center mb-8",children:[vs.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:a("auth.signin_title","Access like a shadow")}),vs.jsx("p",{className:"text-gray-500 text-sm",children:a("auth.signin_description","Unite your customer conversations across all channels in one powerful CRM.")})]}),vs.jsx(DEe,{...o,children:vs.jsxs("form",{onSubmit:o.handleSubmit((e=>{n.mutate(e)})),className:"space-y-4",children:[vs.jsx(OEe,{control:o.control,name:"username",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(UEe,{children:vs.jsxs("div",{className:"relative",children:[vs.jsx(hw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),vs.jsx(LB,{placeholder:a("auth.email_placeholder","Email"),className:"pl-10 h-12 bg-gray-50 border-gray-200 rounded-lg",...e})]})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:o.control,name:"password",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(UEe,{children:vs.jsxs("div",{className:"relative",children:[vs.jsx(fw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),vs.jsx(LB,{type:s?"text":"password",placeholder:a("auth.password_placeholder","Password"),className:"pl-10 pr-10 h-12 bg-gray-50 border-gray-200 rounded-lg",...e}),vs.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?vs.jsx(Yb,{className:"w-5 h-5"}):vs.jsx(Qb,{className:"w-5 h-5"})})]})}),vs.jsx(GEe,{})]})}),vs.jsx("div",{className:"flex justify-end",children:vs.jsx("a",{href:"#",className:"text-sm text-gray-500 hover:text-gray-700",children:a("auth.forgot_password","Forgot password?")})}),vs.jsx(lk,{type:"submit",className:"w-full h-12 btn-brand-primary text-white rounded-lg font-medium",disabled:n.isPending,children:n.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),a("auth.logging_in","Logging in...")]}):a("auth.get_started","Login")})]})}),vs.jsx("div",{className:"mt-4 text-center",children:vs.jsxs("p",{className:"text-sm text-gray-600",children:[a("auth.new_to_platform","New to the platform?")," ",vs.jsx("a",{href:"/register",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline",children:a("auth.register_company","Register for a new Company")})]})}),vs.jsx("div",{className:"mt-6 mb-4",children:vs.jsxs("div",{className:"relative",children:[vs.jsx("div",{className:"absolute inset-0 flex items-center",children:vs.jsx("div",{className:"w-full border-t border-gray-200"})}),vs.jsx("div",{className:"relative flex justify-center text-sm",children:vs.jsx("span",{className:"px-2 bg-white text-gray-500",children:a("auth.or_sign_in_with","Or sign in with")})})]})}),vs.jsxs("div",{className:"flex justify-center space-x-4",children:[vs.jsx("button",{onClick:()=>window.location.href="/api/auth/google",className:"w-12 h-12 bg-gray-50 hover:bg-gray-100 rounded-lg flex items-center justify-center border border-gray-200 transition-colors",title:"Sign in with Google",children:vs.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[vs.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),vs.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),vs.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),vs.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),vs.jsx("button",{onClick:()=>window.location.href="/api/auth/facebook",className:"w-12 h-12 bg-gray-50 hover:bg-gray-100 rounded-lg flex items-center justify-center border border-gray-200 transition-colors",title:"Sign in with Facebook",children:vs.jsx("svg",{className:"w-5 h-5",fill:"#1877F2",viewBox:"0 0 24 24",children:vs.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),vs.jsx("button",{onClick:()=>window.location.href="/api/auth/apple",className:"w-12 h-12 bg-gray-50 hover:bg-gray-100 rounded-lg flex items-center justify-center border border-gray-200 transition-colors",title:"Sign in with Apple",children:vs.jsx("svg",{className:"w-5 h-5",fill:"#000000",viewBox:"0 0 24 24",children:vs.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})})})]})]})})]})}function IFe(){const[e,t]=fx(),{toast:n}=Fy(),{t:a}=mk(),{branding:r}=jT(),[s,i]=cs.useState(!1),[o,l]=cs.useState(null),c=cs.useRef(""),d=(u=a,ME({companyName:mE().min(2,u("registration.validation.company_name_min","Company name must be at least 2 characters")).max(100),companySlug:mE().min(3,u("registration.validation.company_slug_min","Company slug must be at least 3 characters")).max(50).regex(/^[a-z0-9-]+$/,u("registration.validation.company_slug_format","Slug can only contain lowercase letters, numbers, and hyphens")),adminFullName:mE().min(2,u("registration.validation.admin_name_min","Full name must be at least 2 characters")).max(100),adminEmail:mE().email(u("registration.validation.admin_email_invalid","Please enter a valid email address")),adminUsername:mE().min(3,u("registration.validation.admin_username_min","Username must be at least 3 characters")).max(50),adminPassword:mE().min(6,u("registration.validation.admin_password_min","Password must be at least 6 characters")),confirmPassword:mE().min(1,u("registration.validation.confirm_password_required","Please confirm your password")),planId:pE().int().min(1,u("registration.validation.plan_required","Please select a plan"))}).refine((e=>e.adminPassword===e.confirmPassword),{message:u("registration.validation.passwords_no_match","Passwords don't match"),path:["confirmPassword"]}));var u;const{data:f,isLoading:m}=Sy({queryKey:["/api/registration/status"],queryFn:async()=>{const e=await _y("GET","/api/registration/status");if(!e.ok)throw new Error(a("registration.error.status_check_failed","Failed to check registration status"));return e.json()}}),{data:p,isLoading:h}=Sy({queryKey:["/api/plans/registration"],queryFn:async()=>{const e=await _y("GET","/api/plans/registration");if(!e.ok)throw new Error(a("registration.error.plans_fetch_failed","Failed to fetch plans"));return e.json()}}),g=TEe({resolver:eTe(d),defaultValues:{companyName:"",companySlug:"",adminFullName:"",adminEmail:"",adminUsername:"",adminPassword:"",confirmPassword:"",planId:1}}),x=g.watch("companyName");cs.useEffect((()=>{if(x){const e=x.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();g.setValue("companySlug",e)}}),[x,g]);const y=ky({mutationFn:async e=>{c.current=e;const t=await _y("POST","/api/company/check-slug",{slug:e});if(!t.ok){const e=await t.json();throw new Error(e.error||a("registration.error.slug_check_failed","Failed to check slug availability"))}return t.json()},onSuccess:(e,t)=>{c.current===t&&(l(e.available),e.available?g.clearErrors("companySlug"):g.setError("companySlug",{message:a("registration.validation.slug_taken","This slug is already taken")}))},onError:(e,t)=>{c.current===t&&(l(!1),g.setError("companySlug",{message:e.message}))},onSettled:(e,t,n)=>{c.current===n&&i(!1)}}),v=g.watch("companySlug");cs.useEffect((()=>{if(g.clearErrors("companySlug"),i(!1),l(null),v&&v.length>=3&&""!==v.trim()){i(!0);const e=setTimeout((()=>{y.mutate(v.trim())}),500);return()=>{clearTimeout(e),i(!1)}}}),[v,g]);const b=ky({mutationFn:async e=>{const t=await _y("POST","/api/company/register",e);if(!t.ok){const e=await t.json();throw new Error(e.message||a("registration.error.register_failed","Failed to register company"))}return t.json()},onSuccess:e=>{n({title:a("registration.success_title","Registration successful!"),description:e.requiresApproval?a("registration.approval_required","Your company registration has been submitted for approval. You will receive an email once approved."):a("registration.success_desc","Your company has been registered successfully. You can now log in.")}),setTimeout((()=>{t("/auth")}),2e3)},onError:e=>{n({title:a("registration.failed_title","Registration failed"),description:e.message,variant:"destructive"})}});return m||h?vs.jsx("div",{className:"min-h-screen flex items-center justify-center",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):(null==f?void 0:f.enabled)?vs.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-4",children:[vs.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[vs.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-100/30 rounded-full blur-3xl"}),vs.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-100/30 rounded-full blur-3xl"})]}),vs.jsx("div",{className:"relative z-10 w-full max-w-2xl",children:vs.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:[vs.jsx("div",{className:"flex justify-center mb-6",children:vs.jsx("div",{className:"w-auto h-12 flex items-center justify-center",children:r.logoUrl?vs.jsx("img",{src:r.logoUrl,alt:r.appName,className:"h-12 w-auto"}):vs.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center",children:vs.jsx("span",{className:"text-white font-bold text-lg",children:r.appName.charAt(0)})})})}),vs.jsxs("div",{className:"text-center mb-8",children:[vs.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mb-2",children:a("registration.page_title","Register Your Company")}),vs.jsx("p",{className:"text-gray-500 text-sm",children:a("registration.page_subtitle","Create your company account and manage all your channels in one place!")})]}),(null==f?void 0:f.requireApproval)&&vs.jsxs(pR,{className:"mb-6",children:[vs.jsx(Lb,{className:"h-4 w-4"}),vs.jsx(gR,{children:a("registration.approval_notice","New registrations require admin approval. You will receive an email once your registration is approved.")})]}),vs.jsx(DEe,{...g,children:vs.jsxs("form",{onSubmit:g.handleSubmit((e=>{b.mutate(e)})),className:"space-y-6",children:[vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 border-b pb-2",children:[vs.jsx(jb,{className:"h-4 w-4"}),a("registration.company_info","Company Information")]}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[vs.jsx(OEe,{control:g.control,name:"companyName",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsxs(BEe,{children:[a("registration.company_name","Company Name")," *"]}),vs.jsx(UEe,{children:vs.jsx(LB,{placeholder:a("registration.company_name_placeholder","Your Company Name"),className:"h-12 bg-gray-50 border-gray-200 rounded-lg",...e})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:g.control,name:"companySlug",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsxs(BEe,{children:[a("registration.company_slug","Company Slug")," *"]}),vs.jsx(UEe,{children:vs.jsxs("div",{className:"relative",children:[vs.jsx(LB,{placeholder:a("registration.company_slug_placeholder","your-company"),className:"h-12 bg-gray-50 border-gray-200 rounded-lg",...e}),s&&vs.jsx(uw,{className:"absolute right-3 top-3 h-4 w-4 animate-spin text-gray-400"}),!s&&!0===o&&e.value&&e.value.length>=3&&vs.jsx(kb,{className:"absolute right-3 top-3 h-4 w-4 text-green-500"}),!s&&!1===o&&e.value&&e.value.length>=3&&vs.jsx(Lb,{className:"absolute right-3 top-3 h-4 w-4 text-red-500"})]})}),vs.jsx(WEe,{children:a("registration.company_slug_description","This will be your unique identifier (e.g., your-company.app.com)")}),vs.jsx(GEe,{})]})})]})]}),vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 border-b pb-2",children:[vs.jsx(uj,{className:"h-4 w-4"}),a("registration.admin_details","Admin User Details")]}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[vs.jsx(OEe,{control:g.control,name:"adminFullName",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsxs(BEe,{children:[a("registration.admin_full_name","Full Name")," *"]}),vs.jsx(UEe,{children:vs.jsx(LB,{placeholder:a("registration.admin_full_name_placeholder","John Doe"),className:"h-12 bg-gray-50 border-gray-200 rounded-lg",...e})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:g.control,name:"adminEmail",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsxs(BEe,{children:[a("registration.admin_email","Email Address")," *"]}),vs.jsx(UEe,{children:vs.jsx(LB,{type:"email",placeholder:a("registration.admin_email_placeholder","john@yourcompany.com"),className:"h-12 bg-gray-50 border-gray-200 rounded-lg",...e})}),vs.jsx(GEe,{})]})})]}),vs.jsx(OEe,{control:g.control,name:"adminUsername",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsxs(BEe,{children:[a("registration.admin_username","Username")," *"]}),vs.jsx(UEe,{children:vs.jsx(LB,{placeholder:a("registration.admin_username_placeholder","johndoe"),className:"h-12 bg-gray-50 border-gray-200 rounded-lg",...e})}),vs.jsx(WEe,{children:a("registration.admin_username_description","This will be used to log in to your account")}),vs.jsx(GEe,{})]})}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[vs.jsx(OEe,{control:g.control,name:"adminPassword",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsxs(BEe,{children:[a("registration.admin_password","Password")," *"]}),vs.jsx(UEe,{children:vs.jsx(LB,{type:"password",placeholder:a("registration.admin_password_placeholder","Create a strong password"),className:"h-12 bg-gray-50 border-gray-200 rounded-lg",...e})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:g.control,name:"confirmPassword",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsxs(BEe,{children:[a("registration.admin_confirm_password","Confirm Password")," *"]}),vs.jsx(UEe,{children:vs.jsx(LB,{type:"password",placeholder:a("registration.admin_confirm_password_placeholder","Confirm your password"),className:"h-12 bg-gray-50 border-gray-200 rounded-lg",...e})}),vs.jsx(GEe,{})]})})]})]}),p&&p.length>0&&vs.jsxs("div",{className:"space-y-4",children:[vs.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 border-b pb-2",children:[vs.jsx(Wb,{className:"h-4 w-4"}),a("registration.plan_selection","Plan Selection")]}),vs.jsx(OEe,{control:g.control,name:"planId",render:({field:e})=>{var t;return vs.jsxs(FEe,{children:[vs.jsxs(BEe,{children:[a("registration.select_plan","Select Plan")," *"]}),vs.jsxs(ZU,{onValueChange:t=>e.onChange(parseInt(t)),defaultValue:null==(t=e.value)?void 0:t.toString(),children:[vs.jsx(UEe,{children:vs.jsx(tW,{children:vs.jsx(eW,{placeholder:a("registration.select_plan_placeholder","Choose a plan")})})}),vs.jsx(rW,{children:p.map((e=>vs.jsx(sW,{value:e.id.toString(),children:vs.jsxs("div",{className:"flex items-center justify-between w-full",children:[vs.jsxs("div",{className:"flex flex-col",children:[vs.jsx("span",{children:e.name}),e.hasTrialPeriod&&e.trialDays>0&&vs.jsxs("span",{className:"text-xs text-blue-600",children:[e.trialDays," day trial"]}),e.isFree&&vs.jsx("span",{className:"text-xs text-green-600",children:"Free plan"})]}),vs.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["$",e.price,"/month"]})]})},e.id)))})]}),vs.jsx(WEe,{children:a("registration.plan_change_note","You can change your plan later from the settings")}),vs.jsx(GEe,{})]})}})]}),vs.jsxs("div",{className:"flex gap-4",children:[vs.jsx(lk,{type:"button",variant:"outline",className:"flex-1 h-12 rounded-lg font-medium",onClick:()=>t("/auth"),children:a("auth.back_to_login","Back to Login")}),vs.jsx(lk,{type:"submit",className:"flex-1 h-12 btn-brand-primary text-white rounded-lg font-medium",disabled:b.isPending||s,children:b.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),a("registration.registering","Registering...")]}):a("registration.register_button","Register Company")})]})]})}),vs.jsx("div",{className:"mt-6 text-center",children:vs.jsxs("p",{className:"text-sm text-gray-600",children:[a("registration.already_have_account","Already have an account?")," ",vs.jsx("a",{href:"/auth",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline",children:a("registration.sign_in","Sign in")})]})})]})})]}):vs.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-4",children:[vs.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[vs.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-100/30 rounded-full blur-3xl"}),vs.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-100/30 rounded-full blur-3xl"})]}),vs.jsx("div",{className:"relative z-10 w-full max-w-md",children:vs.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:[vs.jsx("div",{className:"flex justify-center mb-6",children:vs.jsx("div",{className:"w-16 h-16 flex items-center justify-center",children:r.logoUrl?vs.jsx("img",{src:r.logoUrl,alt:r.appName,className:"h-10 w-auto max-w-10"}):vs.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center",children:vs.jsx("span",{className:"text-white font-bold text-lg",children:r.appName.charAt(0)})})})}),vs.jsx("div",{className:"flex justify-center mb-6",children:vs.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:vs.jsx(Lb,{className:"h-6 w-6 text-red-600"})})}),vs.jsxs("div",{className:"text-center mb-8",children:[vs.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:a("registration.unavailable_title","Registration Unavailable")}),vs.jsx("p",{className:"text-gray-500 text-sm",children:a("registration.unavailable_desc","Company registration is currently disabled. Please contact the administrator for more information.")})]}),vs.jsx(lk,{variant:"outline",className:"w-full h-12 rounded-lg font-medium",onClick:()=>t("/auth"),children:a("auth.back_to_login","Back to Login")})]})})]})}const AFe=ME({username:mE().min(1,"Username is required"),password:mE().min(1,"Password is required")});function EFe(){const{toast:e}=Fy(),{t:t}=mk();fx();const n=TEe({resolver:eTe(AFe),defaultValues:{username:"",password:""}}),a=ky({mutationFn:async e=>{const t=await _y("POST","/api/admin/login",e);if(!t.ok){const e=await t.json().catch((()=>({})));throw new Error(e.message||"Invalid credentials")}return await t.json()},onSuccess:n=>{e({title:t("auth.login_success","Login successful"),description:t("auth.welcome_back","Welcome back, {{name}}!",{name:n.fullName})}),setTimeout((()=>{window.location.href="/admin/dashboard"}),500)},onError:n=>{e({title:t("auth.login_failed","Login failed"),description:n.message||t("auth.invalid_credentials","Invalid username or password"),variant:"destructive"})}});return vs.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:vs.jsx("div",{className:"w-full max-w-md p-4",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{className:"space-y-1 text-center",children:[vs.jsx("div",{className:"flex justify-center mb-4",children:vs.jsxs("svg",{viewBox:"0 0 24 24",width:60,height:60,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[vs.jsx("path",{d:"M8.18164 10.7027C8.18164 10.7027 8.18168 8.13513 8.18164 6.59459C8.1816 4.74571 9.70861 3 11.9998 3C14.291 3 15.8179 4.74571 15.8179 6.59459C15.8179 8.13513 15.8179 10.7027 15.8179 10.7027",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),vs.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.50005 11.3932C4.50001 13.1319 4.49995 16.764 4.50007 19.1988C4.5002 21.8911 8.66375 22.5 12.0001 22.5C15.3364 22.5 19.5 21.8911 19.5 19.1988L19.5 11.3932C19.5 10.8409 19.0523 10.3957 18.5 10.3957H5.50004C4.94777 10.3957 4.50006 10.8409 4.50005 11.3932ZM10.5 16.0028C10.5 16.4788 10.7069 16.9065 11.0357 17.2008V18.7529C11.0357 19.3051 11.4834 19.7529 12.0357 19.7529H12.1786C12.7309 19.7529 13.1786 19.3051 13.1786 18.7529V17.2008C13.5074 16.9065 13.7143 16.4788 13.7143 16.0028C13.7143 15.1152 12.9948 14.3957 12.1072 14.3957C11.2195 14.3957 10.5 15.1152 10.5 16.0028Z",fill:"#000000"})]})}),vs.jsx(ak,{className:"text-2xl",children:t("admin.login_title","Admin Login")}),vs.jsx(rk,{children:t("admin.login_description","Enter your credentials to access the admin panel")})]}),vs.jsx(sk,{children:vs.jsx(DEe,{...n,children:vs.jsxs("form",{onSubmit:n.handleSubmit((e=>{a.mutate(e)})),className:"space-y-4",children:[vs.jsx(OEe,{control:n.control,name:"username",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:t("auth.email","Email")}),vs.jsx(UEe,{children:vs.jsx(LB,{placeholder:t("auth.email_placeholder","admin@example.com"),...e,autoComplete:"username",disabled:a.isPending})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:n.control,name:"password",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:t("auth.password","Password")}),vs.jsx(UEe,{children:vs.jsx(LB,{type:"password",placeholder:t("auth.password_placeholder","••••••••"),...e,autoComplete:"current-password",disabled:a.isPending})}),vs.jsx(GEe,{})]})}),vs.jsx(lk,{type:"submit",className:"w-full btn-brand-primary",variant:"brand",disabled:a.isPending,children:a.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),t("auth.logging_in","Logging in...")]}):t("auth.login","Login")})]})})}),vs.jsx(ik,{className:"flex justify-center",children:vs.jsx("p",{className:"text-sm text-gray-500",children:t("admin.restricted_area","This area is restricted to administrators only")})})]})})})}function LFe({children:e}){var t;const[n,a]=fx(),{user:r}=xT(),{t:s}=mk(),{toast:i}=Fy(),{branding:o}=jT(),l=function(){const[e,t]=cs.useState(void 0);return cs.useEffect((()=>{const e=window.matchMedia("(max-width: 767px)"),n=()=>{t(window.innerWidth<768)};return e.addEventListener("change",n),t(window.innerWidth<768),()=>e.removeEventListener("change",n)}),[]),!!e}(),[c,d]=cs.useState(!1),[u,f]=cs.useState(0);cs.useEffect((()=>{l&&d(!1)}),[n,l]),cs.useEffect((()=>{d(!l)}),[l]),cs.useEffect((()=>{const e=()=>{f((e=>e+1))};return window.addEventListener("brandingUpdated",e),()=>window.removeEventListener("brandingUpdated",e)}),[]);const m=ky({mutationFn:async()=>{const e=await _y("POST","/api/logout");if(!e.ok)throw new Error("Failed to logout");return e},onSuccess:()=>{Ay.setQueryData(["/api/user"],null),i({title:s("auth.logged_out","Logged out"),description:s("auth.logged_out_success","You have been successfully logged out")}),setTimeout((()=>{a("/admin")}),500)},onError:e=>{i({title:s("common.error","Error"),description:s("auth.logout_failed","Failed to logout: {{error}}",{error:e.message}),variant:"destructive"})}});return vs.jsxs("div",{className:"min-h-screen flex flex-col",children:[vs.jsxs("header",{className:"bg-primary text-white px-6 py-3 flex justify-between items-center relative z-50",style:{backgroundColor:o.primaryColor},children:[vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(lk,{variant:"ghost",size:"icon",className:"md:hidden mr-2 text-white hover:bg-white/10",onClick:()=>d(!c),children:c?vs.jsx(yj,{className:"h-6 w-6"}):vs.jsx(xw,{className:"h-6 w-6"})}),o.logoUrl?vs.jsx("img",{src:o.logoUrl,alt:o.appName,className:"h-8 w-8 object-contain"}):vs.jsx("svg",{className:"h-8 w-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:vs.jsx("path",{d:"M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8\r\n              S16.41,20,12,20z M14.59,8.59L16,10l-6,6l-4-4l1.41-1.41L10,13.17L14.59,8.59z"})}),vs.jsxs("span",{className:"ml-2 text-xl font-bold",children:[o.appName," Admin"]})]}),vs.jsxs("div",{className:"flex items-center space-x-4",children:[vs.jsx(eR,{variant:"compact"}),vs.jsxs(YO,{children:[vs.jsxs(QO,{className:"flex items-center cursor-pointer hover:opacity-80",children:[vs.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-800 flex items-center justify-center text-white font-medium",children:(null==(t=null==r?void 0:r.fullName)?void 0:t.split(" ").map((e=>e[0])).join(""))||"SA"}),vs.jsx("span",{className:"ml-2 hidden md:block",children:(null==r?void 0:r.fullName)||"Super Admin"})]}),vs.jsxs(KO,{align:"end",className:"w-56",children:[vs.jsxs("div",{className:"px-2 py-1.5 text-sm font-medium",children:[vs.jsx("div",{children:(null==r?void 0:r.fullName)||"Super Admin"}),vs.jsx("div",{className:"text-xs text-muted-foreground",children:(null==r?void 0:r.email)||"admin@example.com"})]}),vs.jsx(XO,{}),vs.jsx(JO,{className:"p-0",children:vs.jsx(tR,{className:"w-full justify-start p-2"})}),vs.jsx(XO,{}),vs.jsxs(JO,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:()=>{m.mutate()},disabled:m.isPending,children:[vs.jsx(pw,{className:"mr-2 h-4 w-4"}),vs.jsx("span",{children:m.isPending?s("auth.logging_out","Logging out..."):s("auth.logout","Logout")})]})]})]})]})]}),vs.jsxs("div",{className:"flex flex-1 relative",children:[l&&c&&vs.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>d(!1)}),vs.jsxs("aside",{className:`\n            ${l?"fixed":"relative"}\n            ${l&&!c?"-translate-x-full":"translate-x-0"}\n            w-64 text-white transition-transform duration-300 ease-in-out z-50\n            ${l?"h-full":"h-auto"}\n          `,style:{backgroundColor:o.primaryColor||"#1f2937"},children:[!1,vs.jsxs("nav",{className:"p-4 space-y-2",children:[vs.jsx(yx,{href:"/admin/dashboard",children:vs.jsxs(lk,{variant:"ghost",className:"w-full justify-start text-white transition-colors "+("/admin/dashboard"===n?"bg-white/20 text-white":"hover:bg-white/10 text-white/80 hover:text-white"),children:[vs.jsx(sw,{className:"mr-2 h-5 w-5"}),s("admin.nav.dashboard","Dashboard")]})}),vs.jsx(yx,{href:"/admin/companies",children:vs.jsxs(lk,{variant:"ghost",className:"w-full justify-start text-white transition-colors "+(n.startsWith("/admin/companies")?"bg-white/20 text-white":"hover:bg-white/10 text-white/80 hover:text-white"),children:[vs.jsx(jb,{className:"mr-2 h-5 w-5"}),s("admin.nav.companies","Companies")]})}),vs.jsx(yx,{href:"/admin/users",children:vs.jsxs(lk,{variant:"ghost",className:"w-full justify-start text-white transition-colors "+(n.startsWith("/admin/users")?"bg-white/20 text-white":"hover:bg-white/10 text-white/80 hover:text-white"),children:[vs.jsx(fj,{className:"mr-2 h-5 w-5"}),s("admin.nav.users","Users")]})}),vs.jsx(yx,{href:"/admin/plans",children:vs.jsxs(lk,{variant:"ghost",className:"w-full justify-start text-white transition-colors "+(n.startsWith("/admin/plans")?"bg-white/20 text-white":"hover:bg-white/10 text-white/80 hover:text-white"),children:[vs.jsx(Nw,{className:"mr-2 h-5 w-5"}),s("admin.nav.plans","Plans")]})}),vs.jsx(yx,{href:"/admin/payments",children:vs.jsxs(lk,{variant:"ghost",className:"w-full justify-start text-white transition-colors "+(n.startsWith("/admin/payments")?"bg-white/20 text-white":"hover:bg-white/10 text-white/80 hover:text-white"),children:[vs.jsx(Wb,{className:"mr-2 h-5 w-5"}),s("admin.payments.title","Payment Management")]})}),vs.jsx(yx,{href:"/admin/analytics",children:vs.jsxs(lk,{variant:"ghost",className:"w-full justify-start text-white transition-colors "+(n.startsWith("/admin/analytics")?"bg-white/20 text-white":"hover:bg-white/10 text-white/80 hover:text-white"),children:[vs.jsx(Sb,{className:"mr-2 h-5 w-5"}),s("admin.nav.analytics","Analytics")]})}),vs.jsx(yx,{href:"/admin/translations",children:vs.jsxs(lk,{variant:"ghost",className:"w-full justify-start text-white transition-colors "+(n.startsWith("/admin/translations")?"bg-white/20 text-white":"hover:bg-white/10 text-white/80 hover:text-white"),children:[vs.jsx(nw,{className:"mr-2 h-5 w-5"}),s("admin.nav.translations","Translations")]})}),vs.jsx(yx,{href:"/admin/settings",children:vs.jsxs(lk,{variant:"ghost",className:"w-full justify-start text-white transition-colors "+(n.startsWith("/admin/settings")?"bg-white/20 text-white":"hover:bg-white/10 text-white/80 hover:text-white"),children:[vs.jsx(Fw,{className:"mr-2 h-5 w-5"}),s("admin.nav.settings","Settings")]})})]}),vs.jsx("div",{className:"mt-auto p-4 border-t border-white/20",children:vs.jsx(fR,{className:"text-xs",variant:"outline"})})]}),vs.jsx("main",{className:"flex-1 bg-gray-50 overflow-auto transition-all duration-300 "+(l?"w-full":"ml-0"),children:e})]})]})}function TFe(){const{user:e,isLoading:t}=xT(),{t:n}=mk(),[a,r]=fx();cs.useEffect((()=>{t||!e||e.isSuperAdmin||r("/")}),[e,t,r]);const{data:s,isLoading:i}=Sy({queryKey:["/api/admin/companies"],queryFn:async()=>{const e=await _y("GET","/api/admin/companies");if(!e.ok)throw new Error("Failed to fetch companies");return e.json()},enabled:!!(null==e?void 0:e.isSuperAdmin)}),o=(null==s?void 0:s.filter((e=>e.active)).length)||0,l=(null==s?void 0:s.filter((e=>!e.active)).length)||0;return t?vs.jsx("div",{className:"flex items-center justify-center min-h-screen",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):(null==e?void 0:e.isSuperAdmin)?vs.jsx(LFe,{children:vs.jsxs("div",{className:"p-6",children:[vs.jsxs("div",{className:"flex justify-between items-center mb-6",children:[vs.jsx("h1",{className:"text-2xl",children:n("admin.nav.dashboard","Admin Dashboard")}),vs.jsxs(lk,{onClick:()=>r("/admin/companies/new"),variant:"brand",children:[vs.jsx(Iw,{className:"mr-2 h-4 w-4"}),n("admin.companies.new_company","New Company")]})]}),vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[vs.jsxs(tk,{children:[vs.jsx(nk,{className:"pb-2",children:vs.jsx(ak,{className:"text-sm font-medium text-muted-foreground",children:n("admin.companies.total_companies","Total Companies")})}),vs.jsx(sk,{children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(jb,{className:"h-5 w-5 text-primary mr-2"}),vs.jsx("div",{className:"text-2xl",children:i?vs.jsx(uw,{className:"h-5 w-5 animate-spin"}):(null==s?void 0:s.length)||0})]})})]}),vs.jsxs(tk,{children:[vs.jsx(nk,{className:"pb-2",children:vs.jsx(ak,{className:"text-sm font-medium text-muted-foreground",children:n("admin.companies.active_companies","Active Companies")})}),vs.jsx(sk,{children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(jb,{className:"h-5 w-5 text-green-500 mr-2"}),vs.jsx("div",{className:"text-2xl",children:i?vs.jsx(uw,{className:"h-5 w-5 animate-spin"}):o})]})})]}),vs.jsxs(tk,{children:[vs.jsx(nk,{className:"pb-2",children:vs.jsx(ak,{className:"text-sm font-medium text-muted-foreground",children:n("admin.companies.inactive_companies","Inactive Companies")})}),vs.jsx(sk,{children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(jb,{className:"h-5 w-5 text-gray-400 mr-2"}),vs.jsx("div",{className:"text-2xl",children:i?vs.jsx(uw,{className:"h-5 w-5 animate-spin"}):l})]})})]})]}),vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:n("admin.nav.companies","Companies")}),vs.jsx(rk,{children:n("admin.companies.manage_description","Manage all companies in the system")})]}),vs.jsx(sk,{children:i?vs.jsx("div",{className:"flex justify-center py-8",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):0===(null==s?void 0:s.length)?vs.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n("admin.companies.no_companies_found","No companies found. Create your first company to get started.")}):vs.jsxs("div",{className:"rounded-md border",children:[vs.jsxs("div",{className:"grid grid-cols-5 p-4 font-medium border-b",children:[vs.jsx("div",{children:n("admin.companies.table.name","Name")}),vs.jsx("div",{children:n("admin.companies.table.slug","Slug")}),vs.jsx("div",{children:n("admin.companies.table.plan","Plan")}),vs.jsx("div",{children:n("admin.companies.table.status","Status")}),vs.jsx("div",{children:n("admin.companies.table.actions","Actions")})]}),vs.jsx("div",{className:"divide-y",children:null==s?void 0:s.map((e=>vs.jsxs("div",{className:"grid grid-cols-5 p-4 items-center",children:[vs.jsx("div",{className:"font-medium",children:e.name}),vs.jsx("div",{className:"text-muted-foreground",children:e.slug}),vs.jsx("div",{children:vs.jsx("span",{className:"capitalize",children:e.plan})}),vs.jsx("div",{children:e.active?vs.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:n("common.active","Active")}):vs.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:n("common.inactive","Inactive")})}),vs.jsx("div",{children:vs.jsx(lk,{variant:"brand",size:"sm",onClick:()=>r(`/admin/companies/${e.id}`),children:n("common.manage","Manage")})})]},e.id)))})]})})]})]})}):null}function DFe(){const{data:e,isLoading:t,error:n}=Sy({queryKey:["/api/admin/plans"],queryFn:async()=>{const e=await _y("GET","/api/admin/plans");if(!e.ok)throw new Error("Failed to fetch plans");return e.json()}});return{plans:e||[],isLoading:t,error:n}}const PFe=ME({name:mE().min(1,"Company name is required"),slug:mE().min(1,"Slug is required").regex(/^[a-z0-9-]+$/,"Slug can only contain lowercase letters, numbers, and hyphens"),logo:mE().optional(),primaryColor:mE().regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),active:xE(),planId:pE().int().min(1,"Plan is required"),maxUsers:pE().int().min(1,"Must have at least 1 user")});function OFe(){const{user:e,isLoading:t,impersonateCompanyMutation:n}=xT(),{plans:a,isLoading:r}=DFe(),[s,i]=fx(),[o,l]=px("/admin/companies/:id"),{toast:c}=Fy(),[d,u]=cs.useState("details"),[f,m]=cs.useState(!1);cs.useEffect((()=>{t||!e||e.isSuperAdmin||i("/")}),[e,t,i]);const p=o?parseInt(l.id):null,{data:h,isLoading:g}=Sy({queryKey:[`/api/admin/companies/${p}`],queryFn:async()=>{const e=await _y("GET",`/api/admin/companies/${p}`);if(!e.ok)throw new Error("Failed to fetch company");return e.json()},enabled:!!p&&!!(null==e?void 0:e.isSuperAdmin)}),{data:x,isLoading:y}=Sy({queryKey:[`/api/admin/companies/${p}/users`],queryFn:async()=>{const e=await _y("GET",`/api/admin/companies/${p}/users`);if(!e.ok)throw new Error("Failed to fetch company users");return e.json()},enabled:!!p&&!!(null==e?void 0:e.isSuperAdmin)}),v=TEe({resolver:eTe(PFe),defaultValues:{name:"",slug:"",logo:"",primaryColor:"#333235",active:!0,planId:0,maxUsers:5}});cs.useEffect((()=>{if(h&&a.length>0){const e=(e=>{const t=a.find((t=>t.name.toLowerCase()===e.toLowerCase()));return(null==t?void 0:t.id)||0})(h.plan);v.reset({name:h.name,slug:h.slug,logo:h.logo||"",primaryColor:h.primaryColor,active:h.active,planId:e,maxUsers:h.maxUsers})}}),[h,a,v]);const b=ky({mutationFn:async e=>{const t=await _y("PUT",`/api/admin/companies/${p}`,e);if(!t.ok){const e=await t.json().catch((()=>({})));throw new Error(e.message||"Failed to update company")}return t.json()},onSuccess:()=>{c({title:"Company updated",description:"The company has been updated successfully"}),Ay.invalidateQueries({queryKey:[`/api/admin/companies/${p}`]}),Ay.invalidateQueries({queryKey:["/api/admin/companies"]})},onError:e=>{c({title:"Update failed",description:e.message,variant:"destructive"})}}),w=ky({mutationFn:async()=>{const e=await _y("DELETE",`/api/admin/companies/${p}`);if(!e.ok){const t=await e.json().catch((()=>({})));throw new Error(t.message||"Failed to deactivate company")}return e.json()},onSuccess:()=>{c({title:"Company deactivated",description:"The company has been deactivated successfully"}),i("/admin/dashboard")},onError:e=>{c({title:"Deactivation failed",description:e.message,variant:"destructive"})}});return t?vs.jsx("div",{className:"flex items-center justify-center min-h-screen",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):(null==e?void 0:e.isSuperAdmin)?vs.jsx(LFe,{children:vs.jsxs("div",{className:"p-6",children:[vs.jsxs("div",{className:"flex items-center justify-between mb-6",children:[vs.jsxs("div",{className:"flex items-center",children:[vs.jsxs(lk,{variant:"ghost",onClick:()=>i("/admin/dashboard"),className:"mr-4",children:[vs.jsx(yb,{className:"h-4 w-4 mr-2"}),"Back"]}),vs.jsx("h1",{className:"text-2xl",children:g?"Loading...":`Company: ${null==h?void 0:h.name}`})]}),!g&&h&&vs.jsxs(x7,{open:f,onOpenChange:m,children:[vs.jsx(y7,{asChild:!0,children:vs.jsxs(lk,{className:"ml-auto btn-brand-primary",children:[vs.jsx(mw,{className:"h-4 w-4 mr-2"}),"Impersonate Company"]})}),vs.jsxs(w7,{className:"max-w-md max-h-[90vh]",children:[vs.jsxs(j7,{children:[vs.jsx(C7,{children:"Impersonate Company"}),vs.jsxs(S7,{children:["You are about to log in as an admin user for ",h.name,". This will allow you to access the company dashboard and perform actions as a company admin."]})]}),vs.jsxs(N7,{className:"mt-4",children:[vs.jsx(M7,{children:"Cancel"}),vs.jsx(k7,{className:"btn-brand-primary",onClick:()=>{p&&(n.mutate(p),m(!1))},children:n.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"h-4 w-4 mr-2 animate-spin"}),"Impersonating..."]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(oj,{className:"h-4 w-4 mr-2"}),"Impersonate"]})})]})]})]})]}),vs.jsxs(J_e,{value:d,onValueChange:u,children:[vs.jsxs(Z_e,{className:"mb-6",children:[vs.jsx(X_e,{value:"details",children:"Company Details"}),vs.jsx(X_e,{value:"users",children:"Users"}),vs.jsx(X_e,{value:"data",children:"Data & Usage"})]}),vs.jsx(eIe,{value:"details",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Company Information"}),vs.jsx(rk,{children:"Manage company details and settings"})]}),vs.jsx(sk,{children:g?vs.jsx("div",{className:"flex justify-center py-8",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):vs.jsx(DEe,{...v,children:vs.jsxs("form",{onSubmit:v.handleSubmit((e=>{b.mutate(e)})),className:"space-y-6",children:[vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[vs.jsx(OEe,{control:v.control,name:"name",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Company Name"}),vs.jsx(UEe,{children:vs.jsx(LB,{...e})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:v.control,name:"slug",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Slug"}),vs.jsx(UEe,{children:vs.jsx(LB,{...e})}),vs.jsx(WEe,{children:"Used for URL and identification"}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:v.control,name:"logo",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Logo URL"}),vs.jsx(UEe,{children:vs.jsx(LB,{...e})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:v.control,name:"primaryColor",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Primary Color"}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx("div",{className:"w-6 h-6 rounded-full border cursor-pointer",style:{backgroundColor:e.value},onClick:()=>{const e=document.getElementById("primaryColorPicker");e&&e.click()}}),vs.jsx(UEe,{children:vs.jsx(LB,{id:"primaryColorPicker",type:"color",...e,className:"w-16 h-10 p-1 border rounded cursor-pointer"})}),vs.jsx(UEe,{children:vs.jsx(LB,{...e,placeholder:"#333235",className:"flex-1"})})]}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:v.control,name:"planId",render:({field:e})=>{var t,n;return vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Plan"}),vs.jsxs(ZU,{onValueChange:t=>{e.onChange(parseInt(t));const n=a.find((e=>e.id===parseInt(t)));n&&v.setValue("maxUsers",n.maxUsers)},value:(null==(t=e.value)?void 0:t.toString())||"",disabled:r||0===a.length,children:[vs.jsx(UEe,{children:vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"Select a plan"})})}),vs.jsx(rW,{children:r?vs.jsx(sW,{value:"loading",disabled:!0,children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin mr-2"}),"Loading plans..."]})}):0===a.length?vs.jsx(sW,{value:"none",disabled:!0,children:"No plans available"}):a.map((e=>vs.jsxs(sW,{value:e.id.toString(),children:[e.name," ($",e.price,"/month)"]},e.id)))})]}),vs.jsx(WEe,{children:e.value?vs.jsx(vs.Fragment,{children:(null==(n=a.find((t=>t.id===e.value)))?void 0:n.description)||""}):"Select a subscription plan for this company"}),vs.jsx(GEe,{})]})}}),vs.jsx(OEe,{control:v.control,name:"maxUsers",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Max Users"}),vs.jsx(UEe,{children:vs.jsx(LB,{type:"number",...e,onChange:t=>e.onChange(parseInt(t.target.value))})}),vs.jsx(GEe,{})]})})]}),vs.jsx(OEe,{control:v.control,name:"active",render:({field:e})=>vs.jsxs(FEe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[vs.jsxs("div",{className:"space-y-0.5",children:[vs.jsx(BEe,{className:"text-base",children:"Active Status"}),vs.jsx(WEe,{children:"When inactive, users cannot access the platform"})]}),vs.jsx(UEe,{children:vs.jsx(L4,{checked:e.value,onCheckedChange:e.onChange})})]})}),vs.jsxs("div",{className:"flex justify-between",children:[vs.jsx(lk,{type:"button",variant:"destructive",onClick:()=>{confirm("Are you sure you want to deactivate this company? This will prevent all users from accessing the platform.")&&w.mutate()},disabled:w.isPending,children:w.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Deactivating..."]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Xw,{className:"mr-2 h-4 w-4"}),"Deactivate Company"]})}),vs.jsx(lk,{type:"submit",disabled:b.isPending,variant:"brand",className:"btn-brand-primary",children:b.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Pw,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})})})]})}),vs.jsx(eIe,{value:"users",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Company Users"}),vs.jsx(rk,{children:"Manage users for this company"})]}),vs.jsx(sk,{children:y?vs.jsx("div",{className:"flex justify-center py-8",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):x&&0!==x.length?vs.jsxs("div",{className:"rounded-md border",children:[vs.jsxs("div",{className:"grid grid-cols-4 p-4 font-medium border-b",children:[vs.jsx("div",{children:"Name"}),vs.jsx("div",{children:"Email"}),vs.jsx("div",{children:"Role"}),vs.jsx("div",{children:"Actions"})]}),vs.jsx("div",{className:"divide-y",children:x.map((e=>vs.jsxs("div",{className:"grid grid-cols-4 p-4 items-center",children:[vs.jsx("div",{className:"font-medium",children:e.fullName}),vs.jsx("div",{className:"text-muted-foreground",children:e.email}),vs.jsx("div",{className:"capitalize",children:e.role}),vs.jsx("div",{children:vs.jsx(lk,{variant:"brand",size:"sm",children:"Edit"})})]},e.id)))})]}):vs.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No users found for this company."})})]})}),vs.jsx(eIe,{value:"data",children:vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Data & Usage"}),vs.jsx(rk,{children:"View company data usage and statistics"})]}),vs.jsx(sk,{children:vs.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Data usage statistics will be available soon."})})]})})]})]})}):null}const RFe=ME({name:mE().min(1,"Company name is required"),slug:mE().min(1,"Slug is required").regex(/^[a-z0-9-]+$/,"Slug can only contain lowercase letters, numbers, and hyphens"),logo:mE().optional(),primaryColor:mE().regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),planId:pE().int().min(1,"Plan is required"),maxUsers:pE().int().min(1,"Must have at least 1 user")});function zFe(){const{user:e,isLoading:t}=xT(),{plans:n,isLoading:a}=DFe(),[r,s]=fx(),{toast:i}=Fy();cs.useEffect((()=>{t||!e||e.isSuperAdmin||s("/")}),[e,t,s]);const o=n.find((e=>"free"===e.name.toLowerCase()))||n[0],l=TEe({resolver:eTe(RFe),defaultValues:{name:"",slug:"",logo:"",primaryColor:"#333235",planId:(null==o?void 0:o.id)||0,maxUsers:(null==o?void 0:o.maxUsers)||5}});cs.useEffect((()=>{if(n.length>0&&!l.getValues().planId){const e=n.find((e=>"free"===e.name.toLowerCase()))||n[0];l.setValue("planId",e.id),l.setValue("maxUsers",e.maxUsers)}}),[n,l]);const c=ky({mutationFn:async e=>{const t=await _y("POST","/api/admin/companies",e);if(!t.ok){const e=await t.json().catch((()=>({})));throw new Error(e.message||"Failed to create company")}return t.json()},onSuccess:e=>{i({title:"Company created",description:"The company has been created successfully"}),Ay.invalidateQueries({queryKey:["/api/admin/companies"]}),s(`/admin/companies/${e.id}`)},onError:e=>{i({title:"Creation failed",description:e.message,variant:"destructive"})}});return t?vs.jsx("div",{className:"flex items-center justify-center min-h-screen",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):(null==e?void 0:e.isSuperAdmin)?vs.jsx(LFe,{children:vs.jsxs("div",{className:"p-6",children:[vs.jsxs("div",{className:"flex items-center mb-6",children:[vs.jsxs(lk,{variant:"ghost",onClick:()=>s("/admin/dashboard"),className:"mr-4",children:[vs.jsx(yb,{className:"h-4 w-4 mr-2"}),"Back"]}),vs.jsx("h1",{className:"text-2xl",children:"Create New Company"})]}),vs.jsxs(tk,{children:[vs.jsxs(nk,{children:[vs.jsx(ak,{children:"Company Information"}),vs.jsx(rk,{children:"Enter the details for the new company"})]}),vs.jsx(sk,{children:vs.jsx(DEe,{...l,children:vs.jsxs("form",{onSubmit:l.handleSubmit((e=>{c.mutate(e)})),className:"space-y-6",children:[vs.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[vs.jsx(OEe,{control:l.control,name:"name",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Company Name"}),vs.jsx(UEe,{children:vs.jsx(LB,{...e})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:l.control,name:"slug",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Slug"}),vs.jsx(UEe,{children:vs.jsx(LB,{...e})}),vs.jsx(WEe,{children:"Used for URL and identification"}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:l.control,name:"logo",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Logo URL"}),vs.jsx(UEe,{children:vs.jsx(LB,{...e})}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:l.control,name:"primaryColor",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Primary Color"}),vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx("div",{className:"w-8 h-8 rounded-full border cursor-pointer",style:{backgroundColor:e.value},onClick:()=>{const e=document.getElementById("primaryColorPicker");e&&e.click()},title:"Pick a color"}),vs.jsx(UEe,{children:vs.jsx(LB,{id:"primaryColorPicker",type:"color",value:e.value,onChange:e.onChange,className:"w-12 h-10 p-1 border rounded cursor-pointer",style:{minWidth:0,padding:0},tabIndex:-1})}),vs.jsx(UEe,{children:vs.jsx(LB,{...e,type:"text",placeholder:"#333235",className:"w-28"})})]}),vs.jsx(GEe,{})]})}),vs.jsx(OEe,{control:l.control,name:"planId",render:({field:e})=>{var t,r;return vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Plan"}),vs.jsxs(ZU,{onValueChange:t=>{e.onChange(parseInt(t));const a=n.find((e=>e.id===parseInt(t)));a&&l.setValue("maxUsers",a.maxUsers)},value:(null==(t=e.value)?void 0:t.toString())||"",disabled:a||0===n.length,children:[vs.jsx(UEe,{children:vs.jsx(tW,{children:vs.jsx(eW,{placeholder:"Select a plan"})})}),vs.jsx(rW,{children:a?vs.jsx(sW,{value:"loading",disabled:!0,children:vs.jsxs("div",{className:"flex items-center",children:[vs.jsx(uw,{className:"h-4 w-4 animate-spin mr-2"}),"Loading plans..."]})}):0===n.length?vs.jsx(sW,{value:"none",disabled:!0,children:"No plans available"}):n.filter((e=>e.isActive)).map((e=>vs.jsxs(sW,{value:e.id.toString(),children:[e.name," ($",e.price,"/month)"]},e.id)))})]}),vs.jsx(WEe,{children:e.value?vs.jsx(vs.Fragment,{children:(null==(r=n.find((t=>t.id===e.value)))?void 0:r.description)||""}):"Select a subscription plan for this company"}),vs.jsx(GEe,{})]})}}),vs.jsx(OEe,{control:l.control,name:"maxUsers",render:({field:e})=>vs.jsxs(FEe,{children:[vs.jsx(BEe,{children:"Max Users"}),vs.jsx(UEe,{children:vs.jsx(LB,{type:"number",...e,onChange:t=>e.onChange(parseInt(t.target.value))})}),vs.jsx(GEe,{})]})})]}),vs.jsx("div",{className:"flex justify-end",children:vs.jsx(lk,{type:"submit",disabled:c.isPending,children:c.isPending?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):vs.jsxs(vs.Fragment,{children:[vs.jsx(Pw,{className:"mr-2 h-4 w-4"}),"Create Company"]})})})]})})})]})]})}):null}function FFe(){fx();const[e,t]=cs.useState("processing"),[n,a]=cs.useState("Processing onboarding...");cs.useEffect((()=>{(async()=>{try{const e=new URLSearchParams(window.location.search),n=e.get("client"),r=e.get("channels");if(!n||!r)throw new Error("Missing required parameters from 360Dialog callback");const s=r.replace(/[\[\]]/g,"").split(",").filter(Boolean);if(0===s.length)throw new Error("No channels provided in callback");window.opener?(window.opener.postMessage({type:"360dialog-onboarding-success",clientId:n,channels:s},window.location.origin),t("success"),a("Onboarding completed successfully! You can close this window."),setTimeout((()=>{window.close()}),2e3)):(t("success"),a("Onboarding completed successfully! Redirecting to settings..."),setTimeout((()=>{window.location.href="/settings?tab=channels"}),2e3))}catch(e){t("error"),a(e.message||"Failed to process onboarding callback"),window.opener&&(window.opener.postMessage({type:"360dialog-onboarding-error",error:e.message},window.location.origin),setTimeout((()=>{window.close()}),3e3))}})()}),[]);return vs.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:vs.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[vs.jsxs("div",{className:"mb-6",children:[vs.jsx("div",{className:"flex justify-center mb-4",children:(()=>{switch(e){case"processing":return vs.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"});case"success":return vs.jsx("i",{className:"ri-check-line text-4xl text-green-500"});case"error":return vs.jsx("i",{className:"ri-error-warning-line text-4xl text-red-500"})}})()}),vs.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"360Dialog WhatsApp Onboarding"}),vs.jsx("p",{className:`text-sm ${(()=>{switch(e){case"processing":return"text-blue-600";case"success":return"text-green-600";case"error":return"text-red-600"}})()}`,children:n})]}),"processing"===e&&vs.jsxs("div",{className:"space-y-2",children:[vs.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:vs.jsx("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}})}),vs.jsx("p",{className:"text-xs text-gray-500",children:"Please wait while we process your WhatsApp Business account setup..."})]}),"success"===e&&vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-md",children:vs.jsxs("div",{className:"flex items-start",children:[vs.jsx("i",{className:"ri-check-line text-green-500 mr-2 mt-0.5"}),vs.jsxs("div",{className:"text-left",children:[vs.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Onboarding Complete"}),vs.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Your WhatsApp Business account has been successfully connected through 360Dialog. You can now start messaging your customers!"})]})]})}),!window.opener&&vs.jsx("button",{onClick:()=>window.location.href="/settings?tab=channels",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Go to Settings"})]}),"error"===e&&vs.jsxs("div",{className:"space-y-4",children:[vs.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:vs.jsxs("div",{className:"flex items-start",children:[vs.jsx("i",{className:"ri-error-warning-line text-red-500 mr-2 mt-0.5"}),vs.jsxs("div",{className:"text-left",children:[vs.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Onboarding Failed"}),vs.jsx("p",{className:"text-xs text-red-600 mt-1",children:"There was an issue completing your WhatsApp Business account setup. Please try again or contact support if the problem persists."})]})]})}),vs.jsxs("div",{className:"flex gap-2",children:[!window.opener&&vs.jsx("button",{onClick:()=>window.location.href="/settings?tab=channels",className:"flex-1 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 transition-colors",children:"Back to Settings"}),vs.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Try Again"})]})]}),vs.jsx("div",{className:"mt-8 pt-4 border-t border-gray-200",children:vs.jsxs("div",{className:"flex items-center justify-center text-xs text-gray-500",children:[vs.jsx("i",{className:"ri-whatsapp-line text-green-500 mr-1"}),"Powered by 360Dialog WhatsApp Business API"]})})]})})}function BFe(){return cs.useEffect((()=>{if(!document.getElementById("facebook-jssdk")){window.fbAsyncInit=function(){window.FB.init({appId:$Ee,autoLogAppEvents:!0,xfbml:!0,version:QEe})};const e=document.createElement("script");e.id="facebook-jssdk",e.src="https://connect.facebook.net/en_US/sdk.js",e.async=!0,e.defer=!0,e.crossOrigin="anonymous";const t=document.getElementsByTagName("script")[0];t&&t.parentNode?t.parentNode.insertBefore(e,t):document.head.appendChild(e)}}),[]),null}function UFe({path:e,component:t}){const{user:n,company:a,isLoading:r,isMaintenanceMode:s,isLoadingMaintenance:i}=xT(),{toast:o}=Fy();return cs.useEffect((()=>{n&&n.isSuperAdmin&&"/admin/dashboard"!==e&&o({title:"Admin Access",description:"You are logged in as a super admin. Redirecting to admin dashboard."})}),[n,e,o]),vs.jsx(xx,{path:e,children:()=>r||i?vs.jsx("div",{className:"flex items-center justify-center min-h-screen",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):!s||n&&n.isSuperAdmin?n?n.isSuperAdmin&&"/admin/dashboard"!==e?vs.jsx(wx,{to:"/admin/dashboard"}):n.isSuperAdmin||a?vs.jsx(t,{}):vs.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:[vs.jsx("h1",{className:"text-2xl mb-2",children:"Company Not Found"}),vs.jsx("p",{className:"text-gray-600 mb-4 text-center",children:"Your account is not associated with an active company. Please contact your administrator."}),vs.jsx("button",{onClick:()=>{document.cookie="connect.sid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href="/auth"},className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary/90",children:"Return to Login"})]}):vs.jsx(wx,{to:"/auth"}):vs.jsx(wx,{to:"/maintenance"})})}function WFe({path:e,component:t}){const{user:n,isLoading:a,isMaintenanceMode:r,isLoadingMaintenance:s}=xT(),[i,o]=fx();return cs.useEffect((()=>{a||s||(n?n.isSuperAdmin||o("/"):o("/admin"))}),[n,a,s,o]),vs.jsx(xx,{path:e,children:()=>a||s?vs.jsx("div",{className:"flex items-center justify-center min-h-screen",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})}):n&&n.isSuperAdmin?vs.jsx(t,{}):vs.jsx("div",{className:"flex items-center justify-center min-h-screen",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})})})}const GFe=({children:e,permission:t,permissions:n,requireAll:a=!1,fallbackPath:r="/access-denied"})=>{const{user:s,isLoading:i,isMaintenanceMode:o,isLoadingMaintenance:l}=xT(),{hasPermission:c,hasAnyPermission:d,hasAllPermissions:u,isLoading:f}=rR(),[,m]=fx();if(i||f||l)return vs.jsx("div",{className:"flex items-center justify-center min-h-screen",children:vs.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[vs.jsx(uw,{className:"h-8 w-8 animate-spin text-blue-600"}),vs.jsx("p",{className:"text-gray-600",children:"Checking permissions..."})]})});if(o&&(!s||!s.isSuperAdmin))return m("/maintenance"),null;if(!s)return m("/auth"),null;let p=!1;return p=t?c(t):!n||(a?u(n):d(n)),p?vs.jsx(vs.Fragment,{children:e}):(m(r),null)},VFe=({children:e})=>vs.jsx(GFe,{permissions:["view_settings","manage_settings"],requireAll:!1,children:e}),HFe=({children:e})=>vs.jsx(GFe,{permissions:["view_analytics","view_detailed_analytics"],requireAll:!1,children:e}),qFe=({children:e})=>vs.jsx(GFe,{permissions:["view_flows","manage_flows"],requireAll:!1,children:e}),$Fe=({children:e})=>vs.jsx(GFe,{permissions:["view_contacts","manage_contacts"],requireAll:!1,children:e}),YFe=({children:e})=>vs.jsx(GFe,{permissions:["view_pipeline","manage_pipeline"],requireAll:!1,children:e}),QFe=({children:e})=>vs.jsx(GFe,{permissions:["view_calendar","manage_calendar"],requireAll:!1,children:e}),KFe=({children:e})=>vs.jsx(GFe,{permissions:["view_campaigns","create_campaigns","edit_campaigns","delete_campaigns","manage_templates","manage_segments","view_campaign_analytics","manage_whatsapp_accounts","configure_channels"],requireAll:!1,children:e});function JFe(){const{user:e}=xT();return vs.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:vs.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:vs.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:vs.jsxs("div",{className:"text-center",children:[vs.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-6",children:vs.jsx(Uw,{className:"h-8 w-8 text-red-600"})}),vs.jsx("h1",{className:"text-2xl text-gray-900 mb-2",children:"Access Denied"}),vs.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access this page. Please contact your administrator if you believe this is an error."}),e&&vs.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[vs.jsxs("p",{className:"text-sm text-gray-700",children:[vs.jsx("span",{className:"font-medium",children:"Logged in as:"})," ",e.fullName]}),vs.jsxs("p",{className:"text-sm text-gray-700",children:[vs.jsx("span",{className:"font-medium",children:"Role:"})," ",e.role]}),e.companyId&&vs.jsxs("p",{className:"text-sm text-gray-700",children:[vs.jsx("span",{className:"font-medium",children:"Company ID:"})," ",e.companyId]})]}),vs.jsxs("div",{className:"space-y-3",children:[vs.jsx(yx,{href:"/inbox",children:vs.jsxs(lk,{className:"w-full flex items-center justify-center space-x-2",children:[vs.jsx(sw,{className:"h-4 w-4"}),vs.jsx("span",{children:"Go to Inbox"})]})}),vs.jsxs(lk,{variant:"outline",className:"w-full flex items-center justify-center space-x-2",onClick:()=>window.history.back(),children:[vs.jsx(yb,{className:"h-4 w-4"}),vs.jsx("span",{children:"Go Back"})]})]}),vs.jsx("div",{className:"mt-6 text-center",children:vs.jsx("p",{className:"text-xs text-gray-500",children:"If you need access to this feature, please contact your system administrator."})})]})})})})}function ZFe(){const{t:e}=mk(),{branding:t}=jT(),[n,a]=cs.useState(null),[r,s]=cs.useState(""),[i,o]=cs.useState(!0),[l,c]=cs.useState(!1),[d,u]=cs.useState(""),[f,m]=cs.useState("");cs.useEffect((()=>{p();const e=setInterval(p,3e4);return()=>clearInterval(e)}),[]);const p=async()=>{try{const e=await fetch("/api/auto-update/maintenance");if(e.ok){const t=await e.json();if(a(t),!t.enabled)return void(window.location.href="/")}else if(404===e.status)return void(window.location.href="/")}catch(e){setTimeout((()=>{window.location.href="/"}),5e3)}finally{o(!1)}};return i?vs.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:vs.jsxs("div",{className:"flex items-center space-x-2",children:[vs.jsx(uw,{className:"h-6 w-6 animate-spin"}),vs.jsx("span",{children:e("maintenance.page.loading","Loading...")})]})}):vs.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:vs.jsxs("div",{className:"max-w-md w-full space-y-6",children:[vs.jsxs(tk,{className:"text-center",children:[vs.jsxs(nk,{children:[vs.jsx("div",{className:"mx-auto w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mb-4",children:vs.jsx(Fw,{className:"h-8 w-8 text-orange-600"})}),vs.jsx(ak,{className:"text-2xl font-bold text-gray-900",children:e("maintenance.page.title","System Maintenance")})]}),vs.jsxs(sk,{className:"space-y-4",children:[vs.jsx("p",{className:"text-gray-600",children:(null==n?void 0:n.message)||e("maintenance.page.default_message","The system is currently under maintenance. Please try again later.")}),(null==n?void 0:n.estimatedCompletion)&&vs.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:[vs.jsx(Bb,{className:"h-4 w-4"}),vs.jsx("span",{children:e("maintenance.page.estimated_completion","Estimated completion: {{time}}",{time:(t=>{if(!t)return null;try{const n=new Date(t),a=new Date,r=n.getTime()-a.getTime();if(r<=0)return e("maintenance.page.soon","Soon");const s=Math.ceil(r/36e5);if(s<24)return e("maintenance.page.hours_remaining","~{{hours}} hour{{plural}}",{hours:s,plural:1!==s?"s":""});const i=Math.ceil(s/24);return e("maintenance.page.days_remaining","~{{days}} day{{plural}}",{days:i,plural:1!==i?"s":""})}catch{return null}})(n.estimatedCompletion)})})]}),vs.jsx("div",{className:"pt-4",children:vs.jsx(lk,{onClick:p,variant:"outline",className:"w-full",children:e("maintenance.page.check_status","Check Status")})})]})]}),vs.jsxs(tk,{children:[vs.jsx(nk,{children:vs.jsxs(ak,{className:"text-lg flex items-center space-x-2",children:[vs.jsx(Uw,{className:"h-5 w-5"}),vs.jsx("span",{children:e("maintenance.page.admin_access","Administrator Access")})]})}),vs.jsx(sk,{children:vs.jsxs("form",{onSubmit:async t=>{t.preventDefault(),c(!0),u(""),m("");try{const t=await fetch("/api/auto-update/maintenance/bypass",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bypassCode:r})}),n=await t.json();t.ok&&n.success?(m(e("maintenance.page.access_granted","Access granted! Redirecting...")),setTimeout((()=>{window.location.href="/"}),1500)):u(n.error||e("maintenance.page.invalid_bypass_code","Invalid bypass code"))}catch(n){u(e("maintenance.page.verify_failed","Failed to verify bypass code"))}finally{c(!1)}},className:"space-y-4",children:[vs.jsxs("div",{children:[vs.jsx(EB,{htmlFor:"bypassCode",children:e("maintenance.page.bypass_code_label","Bypass Code")}),vs.jsx(LB,{id:"bypassCode",type:"password",value:r,onChange:e=>s(e.target.value),placeholder:e("maintenance.page.bypass_code_placeholder","Enter bypass code"),disabled:l})]}),d&&vs.jsx(pR,{variant:"destructive",children:vs.jsx(gR,{children:d})}),f&&vs.jsx(pR,{className:"border-green-200 bg-green-50",children:vs.jsx(gR,{className:"text-green-800",children:f})}),vs.jsx(lk,{type:"submit",className:"w-full",disabled:l||!r.trim(),children:l?vs.jsxs(vs.Fragment,{children:[vs.jsx(uw,{className:"mr-2 h-4 w-4 animate-spin"}),e("maintenance.page.verifying","Verifying...")]}):e("maintenance.page.access_system","Access System")})]})})]}),vs.jsxs("div",{className:"text-center text-sm text-gray-500",children:[vs.jsx("p",{children:e("maintenance.page.app_name",t.appName,{appName:t.appName})}),vs.jsx("p",{children:e("maintenance.page.support_message","If you need immediate assistance, please contact support.")})]})]})})}const XFe=()=>vs.jsx("div",{className:"flex items-center justify-center min-h-screen",children:vs.jsx(uw,{className:"h-8 w-8 animate-spin text-primary"})});function eBe(){return vs.jsx(ds.Suspense,{fallback:vs.jsx(XFe,{}),children:vs.jsxs(bx,{children:[vs.jsx(UFe,{path:"/",component:vR}),vs.jsx(UFe,{path:"/inbox",component:AY}),vs.jsx(xx,{path:"/flows",children:vs.jsx(qFe,{children:vs.jsx(FY,{})})}),vs.jsx(xx,{path:"/flows/new",children:vs.jsx(qFe,{children:vs.jsx(U8,{})})}),vs.jsx(xx,{path:"/flows/:id",children:vs.jsx(qFe,{children:vs.jsx(U8,{})})}),vs.jsx(xx,{path:"/contacts",children:vs.jsx($Fe,{children:vs.jsx(H7,{})})}),vs.jsx(xx,{path:"/pipeline",children:vs.jsx(YFe,{children:vs.jsx(kFe,{})})}),vs.jsx(UFe,{path:"/debug-pipeline",component:ds.lazy((()=>Ag((()=>import("./debug-pipeline-CciB_V3y.js")),[])))}),vs.jsx(xx,{path:"/calendar",children:vs.jsx(QFe,{children:vs.jsx(Q7,{})})}),vs.jsx(xx,{path:"/campaigns",children:vs.jsx(KFe,{children:vs.jsx(iTe,{})})}),vs.jsx(xx,{path:"/campaigns/new",children:vs.jsx(KFe,{children:vs.jsx(gTe,{})})}),vs.jsx(xx,{path:"/campaigns/:id/edit",children:vs.jsx(KFe,{children:vs.jsx(gTe,{})})}),vs.jsx(xx,{path:"/campaigns/:id",children:vs.jsx(KFe,{children:vs.jsx(iTe,{})})}),vs.jsx(xx,{path:"/analytics",children:vs.jsx(HFe,{children:vs.jsx(L_e,{})})}),vs.jsx(xx,{path:"/settings",children:vs.jsx(VFe,{children:vs.jsx(YLe,{})})}),vs.jsx(xx,{path:"/settings/channels/360dialog/callback",component:FFe}),vs.jsx(UFe,{path:"/profile",component:aTe}),vs.jsx(xx,{path:"/access-denied",component:JFe}),vs.jsx(xx,{path:"/maintenance",component:ZFe}),vs.jsx(xx,{path:"/auth",component:_Fe}),vs.jsx(xx,{path:"/register",component:IFe}),vs.jsx(xx,{path:"/accept-invitation",component:ds.lazy((()=>Ag((()=>import("./AcceptInvitation-Coeqs_sl.js")),[])))}),vs.jsx(xx,{path:"/admin",component:ds.lazy((()=>Ag((()=>import("./index-hivyBzug.js")),[])))}),vs.jsx(xx,{path:"/admin/login",component:EFe}),vs.jsx(WFe,{path:"/admin/dashboard",component:TFe}),vs.jsx(WFe,{path:"/admin/companies",component:ds.lazy((()=>Ag((()=>import("./index-BVsAeSNs.js")),__vite__mapDeps([0,1]))))}),vs.jsx(WFe,{path:"/admin/companies/new",component:zFe}),vs.jsx(WFe,{path:"/admin/companies/:id",component:OFe}),vs.jsx(WFe,{path:"/admin/users",component:ds.lazy((()=>Ag((()=>import("./index-3TEX2-uW.js")),[])))}),vs.jsx(WFe,{path:"/admin/users/new",component:ds.lazy((()=>Ag((()=>import("./new-CezGui6P.js")),[])))}),vs.jsx(WFe,{path:"/admin/users/:id",component:ds.lazy((()=>Ag((()=>import("./_id_-BKETzcfK.js")),[])))}),vs.jsx(WFe,{path:"/admin/plans",component:ds.lazy((()=>Ag((()=>import("./index-BS0IMjpl.js")),[])))}),vs.jsx(WFe,{path:"/admin/payments",component:ds.lazy((()=>Ag((()=>import("./index-DOXFhnpM.js")),[])))}),vs.jsx(WFe,{path:"/admin/analytics",component:ds.lazy((()=>Ag((()=>import("./index-BVkn6GU0.js")),[])))}),vs.jsx(WFe,{path:"/admin/settings",component:ds.lazy((()=>Ag((()=>import("./index-BBtvncPy.js")),__vite__mapDeps([2,1]))))}),vs.jsx(WFe,{path:"/admin/translations",component:ds.lazy((()=>Ag((()=>import("./index-SNCx6lTj.js")),[])))}),vs.jsx(xx,{path:"/payment/success",component:ds.lazy((()=>Ag((()=>import("./success-HWMUwO-u.js")),[])))}),vs.jsx(xx,{path:"/payment/cancel",component:ds.lazy((()=>Ag((()=>import("./cancel-DBd-HAP9.js")),[])))}),vs.jsx(xx,{path:"/payment/pending",component:ds.lazy((()=>Ag((()=>import("./pending-Dr48JyW2.js")),[])))}),vs.jsx(xx,{component:NT})]})})}function tBe(){const[e,t]=cs.useState(!0);return cs.useEffect((()=>{setTimeout((()=>{t(!1)}),500)}),[]),e?vs.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center font-poppins",children:[vs.jsx(uw,{className:"h-10 w-10 animate-spin text-primary mb-4"}),vs.jsx("p",{className:"text-gray-500",children:"Initializing..."})]}):vs.jsx(by,{client:Ay,children:vs.jsx(gT,{children:vs.jsx(wT,{children:vs.jsx(fk,{children:vs.jsx(lR,{children:vs.jsx(JS,{children:vs.jsxs("div",{className:"font-poppins",children:[vs.jsx(jN,{}),vs.jsx(BFe,{}),vs.jsx(eBe,{})]})})})})})})})}var nBe=(e,t,n,a,r,s,i,o)=>{let l=document.documentElement,c=["light","dark"];function d(t){(Array.isArray(e)?e:[e]).forEach((e=>{let n="class"===e,a=n&&s?r.map((e=>s[e]||e)):r;n?(l.classList.remove(...a),l.classList.add(s&&s[t]?s[t]:t)):l.setAttribute(e,t)})),function(e){o&&c.includes(e)&&(l.style.colorScheme=e)}(t)}if(a)d(a);else try{let e=localStorage.getItem(t)||n;d(i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(u){}},aBe=["light","dark"],rBe="(prefers-color-scheme: dark)",sBe="undefined"==typeof window,iBe=cs.createContext(void 0),oBe=e=>cs.useContext(iBe)?cs.createElement(cs.Fragment,null,e.children):cs.createElement(cBe,{...e}),lBe=["light","dark"],cBe=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:a=!0,storageKey:r="theme",themes:s=lBe,defaultTheme:i=(n?"system":"light"),attribute:o="data-theme",value:l,children:c,nonce:d,scriptProps:u})=>{let[f,m]=cs.useState((()=>uBe(r,i))),[p,h]=cs.useState((()=>"system"===f?mBe():f)),g=l?Object.values(l):s,x=cs.useCallback((e=>{let r=e;if(!r)return;"system"===e&&n&&(r=mBe());let s=l?l[r]:r,c=t?fBe(d):null,u=document.documentElement,f=e=>{"class"===e?(u.classList.remove(...g),s&&u.classList.add(s)):e.startsWith("data-")&&(s?u.setAttribute(e,s):u.removeAttribute(e))};if(Array.isArray(o)?o.forEach(f):f(o),a){let e=aBe.includes(i)?i:null,t=aBe.includes(r)?r:e;u.style.colorScheme=t}null==c||c()}),[d]),y=cs.useCallback((e=>{let t="function"==typeof e?e(f):e;m(t);try{localStorage.setItem(r,t)}catch(n){}}),[f]),v=cs.useCallback((t=>{let a=mBe(t);h(a),"system"===f&&n&&!e&&x("system")}),[f,e]);cs.useEffect((()=>{let e=window.matchMedia(rBe);return e.addListener(v),v(e),()=>e.removeListener(v)}),[v]),cs.useEffect((()=>{let e=e=>{e.key===r&&(e.newValue?m(e.newValue):y(i))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[y]),cs.useEffect((()=>{x(null!=e?e:f)}),[e,f]);let b=cs.useMemo((()=>({theme:f,setTheme:y,forcedTheme:e,resolvedTheme:"system"===f?p:f,themes:n?[...s,"system"]:s,systemTheme:n?p:void 0})),[f,y,e,p,n,s]);return cs.createElement(iBe.Provider,{value:b},cs.createElement(dBe,{forcedTheme:e,storageKey:r,attribute:o,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:l,themes:s,nonce:d,scriptProps:u}),c)},dBe=cs.memo((({forcedTheme:e,storageKey:t,attribute:n,enableSystem:a,enableColorScheme:r,defaultTheme:s,value:i,themes:o,nonce:l,scriptProps:c})=>{let d=JSON.stringify([n,t,s,e,o,i,a,r]).slice(1,-1);return cs.createElement("script",{...c,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?l:"",dangerouslySetInnerHTML:{__html:`(${nBe.toString()})(${d})`}})})),uBe=(e,t)=>{if(sBe)return;let n;try{n=localStorage.getItem(e)||void 0}catch(a){}return n||t},fBe=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout((()=>{document.head.removeChild(t)}),1)}},mBe=e=>(e||(e=window.matchMedia(rBe)),e.matches?"dark":"light");Mg(document.getElementById("root")).render(vs.jsx(oBe,{attribute:"class",defaultTheme:"light",children:vs.jsx(tBe,{})}));export{XS as $,pR as A,lk as B,tk as C,yB as D,SB as E,fj as F,Wb as G,dk as H,LB as I,DFe as J,LFe as K,uw as L,vw as M,Ow as N,EY as O,Iw as P,LY as Q,wx as R,Fw as S,Zw as T,cj as U,DY as V,PY as W,TY as X,OY as Y,JS as Z,ZS as _,nk as a,eae as a$,ow as a0,ek as a1,mw as a2,x7 as a3,w7 as a4,j7 as a5,C7 as a6,S7 as a7,N7 as a8,M7 as a9,xE as aA,pE as aB,FE as aC,mE as aD,y7 as aE,J_e as aF,Z_e as aG,X_e as aH,eIe as aI,vB as aJ,kb as aK,ik as aL,Hw as aM,Iae as aN,ds as aO,Bae as aP,bge as aQ,Jne as aR,zve as aS,pwe as aT,aae as aU,vne as aV,Yne as aW,Dge as aX,cb as aY,_ae as aZ,yve as a_,k7 as aa,YO as ab,QO as ac,tw as ad,KO as ae,ZO as af,XO as ag,JO as ah,TEe as ai,yb as aj,DEe as ak,OEe as al,FEe as am,BEe as an,UEe as ao,GEe as ap,ZU as aq,tW as ar,eW as as,rW as at,sW as au,WEe as av,L4 as aw,Pw as ax,eTe as ay,ME as az,ak as b,Mee as b0,tue as b1,cye as b2,Sye as b3,Owe as b4,sNe as b5,kse as b6,pae as b7,Cae as b8,Jxe as b9,jb as bA,Sb as bB,jT as bC,sj as bD,Uw as bE,Dw as bF,R$ as bG,$b as bH,T3 as bI,Lw as bJ,L3 as bK,Bb as bL,lw as bM,Jw as bN,nw as bO,dLe as bP,Xw as bQ,sae as ba,Gue as bb,I_e as bc,dMe as bd,UCe as be,wMe as bf,LMe as bg,YCe as bh,vy as bi,Hb as bj,Wue as bk,$ke as bl,mue as bm,mN as bn,Lce as bo,pN as bp,Qb as bq,hw as br,Nb as bs,E_e as bt,CNe as bu,TB as bv,Ub as bw,Vb as bx,tj as by,Lb as bz,sk as c,_y as d,fx as e,Fy as f,mk as g,Sy as h,ky as i,vs as j,zb as k,rk as l,gR as m,EB as n,Db as o,EFe as p,gb as q,cs as r,Ay as s,NB as t,xT as u,CB as v,kB as w,MB as x,nj as y,hR as z};
