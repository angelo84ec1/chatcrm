import{e,f as s,r as t,i as a,j as r,C as i,a as n,b as c,l,c as o,L as u,o as m,k as p,aL as h,B as d,d as N}from"./index-CExeSDUv.js";function x(){const[x,D]=e(),{toast:b}=s(),[v,w]=t.useState(!0),[f,y]=t.useState(!1),P=new URLSearchParams(window.location.search),C=P.get("source"),g=P.get("transaction_id"),j=P.get("session_id"),k=a({mutationFn:async()=>{if(!g)return null;const e=await N("POST","/api/payment/verify",{transactionId:g,source:C||"stripe",session_id:j});if(!e.ok){const s=await e.json();throw new Error(s.error||"Failed to verify payment")}return e.json()},onSuccess:e=>{y(!0),w(!1),b({title:"Payment Successful",description:"Your subscription has been activated successfully."})},onError:e=>{y(!1),w(!1),b({title:"Payment Verification Failed",description:e.message,variant:"destructive"})}});return t.useEffect((()=>{g?k.mutate():w(!1)}),[g]),r.jsxDEV("div",{className:"container max-w-md py-12",children:r.jsxDEV(i,{children:[r.jsxDEV(n,{className:"text-center",children:[r.jsxDEV(c,{className:"text-2xl",children:["Payment ",v?"Processing":f?"Successful":"Verification Failed"]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:69,columnNumber:11},this),r.jsxDEV(l,{children:v?"We're verifying your payment...":f?"Your subscription has been activated successfully.":"We couldn't verify your payment. Please contact support."},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:70,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:68,columnNumber:9},this),r.jsxDEV(o,{className:"flex justify-center py-6",children:v?r.jsxDEV(u,{className:"h-16 w-16 animate-spin text-primary"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:80,columnNumber:13},this):f?r.jsxDEV(m,{className:"h-16 w-16 text-green-500"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:83,columnNumber:15},this):r.jsxDEV(p,{className:"h-16 w-16 text-red-500"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:85,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:78,columnNumber:9},this),r.jsxDEV(h,{className:"flex justify-center gap-4",children:[r.jsxDEV(d,{variant:"outline",onClick:()=>D("/settings"),disabled:v,children:"Return to Settings"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:90,columnNumber:11},this),r.jsxDEV(d,{variant:"outline",className:"btn-brand-primary",onClick:()=>D("/inbox"),disabled:v,children:"Go to inbox"},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:93,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:89,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:67,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/Mnsas/OneDrive/Desktop/PowerChatPlus/powerchatplus/client/src/pages/payment/success.tsx",lineNumber:66,columnNumber:5},this)}export{x as default};
